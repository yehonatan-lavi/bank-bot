!(function (e) {
  'use strict';

  self.cdApi = {
    _eventListeners: {},
    configurationKeys: {
      serverURL: 'serverURL',
      customerID: 'customerID',
      logServerURL: 'logServerURL',
      enableCustomElementsProcessing: 'enableCustomElementsProcessing',
      collectionSettings: 'collectionSettings',
    },

    getConfigurations: function (callback) {
      const configurations = {};
      configurations[cdApi.configurationKeys.serverURL] ='https://wup-application.bc2.customers.biocatch.com';
      configurations[cdApi.configurationKeys.customerID] = 'application';
      configurations[cdApi.configurationKeys.logServerURL] ='https://log-application.bc2.customers.biocatch.com/api/v1/sendLogs';
      configurations[cdApi.configurationKeys.enableCustomElementsProcessing] = true;
      configurations[cdApi.configurationKeys.collectionSettings] = {
        elementSettings: { customElementAttribute: 'data-bb',
                           keyEventsMaskSpecialChars: true },
      };
      configurations['allowedUnmaskedValuesList'] = ['Submit'];
      configurations['enableUnmaskedValues'] = true
      callback(configurations);
    },

    // set the page context
    changeContext: function (contextName) {
      window.postMessage(
        { type: 'ContextChange', context: contextName },
        window.location.href
      );
    },

    //set the customer session id - CSID
    setCustomerSessionId: function (csid) {
      window.postMessage(
        { type: 'cdSetCsid', csid: csid },
        window.location.href
      );
    },

    //set the session brand
    setCustomerBrand: function (brand) {
      window.postMessage(
        { type: 'cdSetCustomerBrand', brand: brand },
        window.location.href
      );
    },
  };
})();
var cdwpb;
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/main/BioCatchClient.js":
/*!************************************!*\
  !*** ./src/main/BioCatchClient.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BioCatchClient: function() { return /* binding */ BioCatchClient; }
/* harmony export */ });
/* harmony import */ var _technicalServices_SupportedBrowserChecker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./technicalServices/SupportedBrowserChecker */ "./src/main/technicalServices/SupportedBrowserChecker.js");
/* harmony import */ var _common_polyfills_PolyfillsApplier__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/polyfills/PolyfillsApplier */ "./src/main/common/polyfills/PolyfillsApplier.js");
/* harmony import */ var _contract_BCProtocolType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contract/BCProtocolType */ "./src/main/contract/BCProtocolType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var BioCatchClient = /*#__PURE__*/function () {
  function BioCatchClient(client, dynamicCdApiLoader, configMapper, serverUrlResolver, remoteConfigurationLoadedCallback) {
    _classCallCheck(this, BioCatchClient);
    (0,_common_polyfills_PolyfillsApplier__WEBPACK_IMPORTED_MODULE_1__["default"])();

    // Unsupported browsers are aborted.
    if (!_technicalServices_SupportedBrowserChecker__WEBPACK_IMPORTED_MODULE_0__["default"].isSupported()) {
      return;
    }
    if ('cdApi' in window) {
      client.autoStart(remoteConfigurationLoadedCallback);
    } else {
      window.bcClient = this._createProxyInterface(client, serverUrlResolver, configMapper, dynamicCdApiLoader, remoteConfigurationLoadedCallback);
    }
  }

  /**
   * Creates an interface that disconnected from the actual BioCatchClient instance, so that
   * It will be less easy to inspect or debug BioCatchClient members and see it runtime values.
   */
  return _createClass(BioCatchClient, [{
    key: "_createProxyInterface",
    value: function _createProxyInterface(client, serverUrlResolver, configMapper, dynamicCdApiLoader, remoteConfigurationLoadedCallback) {
      return {
        start: function start(wupServerUrl, customerID, customerSessionID, configurations) {
          var protocolType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _contract_BCProtocolType__WEBPACK_IMPORTED_MODULE_2__.BCProtocolType.V3;
          // Prioritize the extended options and cid provided by the start params over the raw url.
          var resolvedServerUrl = serverUrlResolver.resolve(wupServerUrl, customerID, protocolType);

          // Translate the configurations json to StartupConfigurations object the JavaScript knows to work with.
          var startupConfigurations = configMapper.mapStartupConfigurations(resolvedServerUrl, configurations);

          // Attach to the window the cdApi so the sdk could work as it used to.
          dynamicCdApiLoader.attachCdApi(window);
          client.manualStart(startupConfigurations, resolvedServerUrl, remoteConfigurationLoadedCallback, undefined, customerSessionID);
        },
        stop: function stop() {
          client.stop();
        },
        pause: function pause() {
          client.pause();
        },
        resume: function resume() {
          client.resume();
        },
        updateCustomerSessionID: function updateCustomerSessionID(customerID) {
          client.updateCustomerSessionID(customerID);
        },
        changeContext: function changeContext(contextName) {
          client.changeContext(contextName);
        },
        startNewSession: function startNewSession(customerSessionID) {
          client.startNewSession(customerSessionID);
        },
        setCoordinatesMasking: function setCoordinatesMasking(isEnable) {
          client.setCoordinatesMasking(isEnable);
        },
        setCustomerBrand: function setCustomerBrand(brand) {
          client.setCustomerBrand(brand);
        }
      };
    }
  }]);
}();

/***/ }),

/***/ "./src/main/Client.js":
/*!****************************!*\
  !*** ./src/main/Client.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Client; }
/* harmony export */ });
/* harmony import */ var _core_SystemBootstrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/SystemBootstrapper */ "./src/main/core/SystemBootstrapper.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _api_CdApiFacade__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api/CdApiFacade */ "./src/main/api/CdApiFacade.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





var Client = /*#__PURE__*/function () {
  function Client() {
    _classCallCheck(this, Client);
  }
  return _createClass(Client, [{
    key: "autoStart",
    value: function autoStart(remoteConfigurationLoadedCallback) {
      var _this = this;
      // Create the cdApi facade here so we can get the configurations
      var cdApiFacade = new _api_CdApiFacade__WEBPACK_IMPORTED_MODULE_4__["default"]();
      cdApiFacade.getConfigurations(function (configurations) {
        if (!configurations) {
          // Log is not really doing something here since we don't have the log server url, hence will never get the logs address
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed starting the JS SDK. Received invalid start configurations');
          return;
        }

        // Make sure we have a wup server URL otherwise there is no point to continue
        if (!configurations.getWupServerURL()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Missing server URL. Unable to start the library.');
          return;
        }
        if (configurations.getUseUrlWorker() && configurations.getWorkerUrl() === '') {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed starting the JS SDK. Received invalid WorkerUrl configuration');
          return;
        }

        // Load the system components
        _this.start(cdApiFacade, configurations, remoteConfigurationLoadedCallback);
      });
    }
  }, {
    key: "manualStart",
    value: function manualStart(configurations, wupServerUrl, remoteConfigurationLoadedCallback, cdApi, customerSessionID) {
      var cdApiFacade = new _api_CdApiFacade__WEBPACK_IMPORTED_MODULE_4__["default"](undefined, cdApi);
      this.start(cdApiFacade, configurations, remoteConfigurationLoadedCallback, customerSessionID);
    }
  }, {
    key: "start",
    value: function start(cdApiFacade, configurations, remoteConfigurationLoadedCallback, customerSessionID) {
      var _this$systemBootstrap;
      this._cdApiFacade = cdApiFacade;
      this._startupConfigurations = configurations;
      this._configurationLoadedCallback = remoteConfigurationLoadedCallback;
      this.systemBootstrapper = new _core_SystemBootstrapper__WEBPACK_IMPORTED_MODULE_0__["default"]();
      cdApiFacade.createClientInterface(this, configurations.getClientSettings());
      this.systemBootstrapper.start(cdApiFacade, configurations, customerSessionID);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Got server address: ".concat(configurations.getWupServerURL()));
      var pm = this.systemBootstrapper.getPerfMonitor();
      pm.startMonitor('t.timeTillServerConfig');
      pm.startMonitor('t.timeTillDataCollect'); // will be stopped in the MouseEvents startFeature

      this.configurationService = this.systemBootstrapper.getConfigurationService();
      this.sessionService = this.systemBootstrapper.getSessionService();
      this.configurationService.setConfigurationLoadedCallback(remoteConfigurationLoadedCallback);
      this.systemBootstrapper.getFeatureService().buildFrameRelatedLists();
      this.systemBootstrapper.getFeatureBuilder().buildFeatures();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Started default features collection');
      this.systemBootstrapper.getFeatureService().runDefault();
      this.systemBootstrapper.getApiBridge().enableApi();
      this.systemBootstrapper.getContextMgr().initContextHandling();
      this.systemBootstrapper.registerPostLoadEvents();
      (_this$systemBootstrap = this.systemBootstrapper.getMuidService()) === null || _this$systemBootstrap === void 0 || _this$systemBootstrap.initMuid();
      var enableStartupCustomerSessionId = this.systemBootstrapper.getConfigurationRepository().get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.enableStartupCustomerSessionId);
      // Start a new session or resume an existing one...
      enableStartupCustomerSessionId ? this.sessionService.startNewSession(customerSessionID) : this.sessionService.resumeOrStartSession(customerSessionID);
    }
  }, {
    key: "stop",
    value: function stop() {
      this.systemBootstrapper.stop();
    }
  }, {
    key: "pause",
    value: function pause() {
      window.postMessage({
        type: 'cdChangeState',
        toState: 'pause'
      }, window.location.href);
    }
  }, {
    key: "resume",
    value: function resume() {
      window.postMessage({
        type: 'cdChangeState',
        toState: 'run'
      }, window.location.href);
    }
  }, {
    key: "updateCustomerSessionID",
    value: function updateCustomerSessionID(customerSessionID) {
      window.postMessage({
        type: 'cdSetCsid',
        csid: customerSessionID
      }, window.location.href);
    }
  }, {
    key: "changeContext",
    value: function changeContext(contextName) {
      window.postMessage({
        type: 'ContextChange',
        context: contextName
      }, window.location.href);
    }
  }, {
    key: "startNewSession",
    value: function startNewSession(customerSessionID) {
      window.postMessage({
        type: 'ResetSession',
        resetReason: 'customerApi',
        csid: customerSessionID
      }, window.location.href);
    }
  }, {
    key: "setCustomerBrand",
    value: function setCustomerBrand(brand) {
      window.postMessage({
        type: 'cdSetCustomerBrand',
        brand: brand
      }, window.location.href);
    }
  }, {
    key: "restart",
    value: function restart() {
      this.stop();
      this.start(this._cdApiFacade, this._startupConfigurations, this._configurationLoadedCallback);
    }

    /**
     * flush(), setCoordinatesMasking(), and submitCustomElement()
     * are methods appended to window.cdApi object using the
     * createClientInterface of the CdApiFacade class
     */
  }, {
    key: "flush",
    value: function flush() {
      this.systemBootstrapper.flushAllMessages();
    }

    /**
     * @param isEnabled
     */
  }, {
    key: "setCoordinatesMasking",
    value: function setCoordinatesMasking(isEnabled) {
      this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(isEnabled);
    }

    /**
     * @param customElement
     */
  }, {
    key: "submitCustomElement",
    value: function submitCustomElement(customElement) {
      var messageBus = this.systemBootstrapper.getMessageBus();
      messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.CustomElementSubmitted, customElement);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/ApiCommandType.js":
/*!****************************************!*\
  !*** ./src/main/api/ApiCommandType.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiCommandType: function() { return /* binding */ ApiCommandType; }
/* harmony export */ });
var ApiCommandType = {
  ContextChangeCommand: 'ContextChange',
  ResetSessionCommand: 'ResetSession',
  CustomerMetadataCommand: 'cdCustomerMetadata',
  ChangeStateCommand: 'cdChangeState',
  SetCsidCommand: 'cdSetCsid',
  SetPsidCommand: 'cdSetPsid',
  SetCustomerBrand: 'cdSetCustomerBrand'
};

/***/ }),

/***/ "./src/main/api/ApiContractName.js":
/*!*****************************************!*\
  !*** ./src/main/api/ApiContractName.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiContractName: function() { return /* binding */ ApiContractName; }
/* harmony export */ });
var ApiContractName = {
  GetConfigurations: 'getConfigurations',
  ConfigurationKeys: 'configurationKeys',
  RestartFunction: 'restart',
  ClientFacade: 'client'
};

/***/ }),

/***/ "./src/main/api/ApiEventType.js":
/*!**************************************!*\
  !*** ./src/main/api/ApiEventType.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiEventType: function() { return /* binding */ ApiEventType; }
/* harmony export */ });
var ApiEventType = {
  NewSessionStartedEvent: 'cdNewSessionStartedEvent',
  StateChangedEvent: 'cdStateChangedEvent',
  HeartBeatEvent: 'cdHeartbeat',
  RestoredMuidEvent: 'RestoredMuidEvent'
};

/***/ }),

/***/ "./src/main/api/CdApiFacade.js":
/*!*************************************!*\
  !*** ./src/main/api/CdApiFacade.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CdApiFacade; }
/* harmony export */ });
/* harmony import */ var _ApiContractName__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApiContractName */ "./src/main/api/ApiContractName.js");
/* harmony import */ var _StartupConfigurations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StartupConfigurations */ "./src/main/api/StartupConfigurations.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_URLFieldsExtractor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../technicalServices/URLFieldsExtractor */ "./src/main/technicalServices/URLFieldsExtractor.js");
/* harmony import */ var _technicalServices_URLBuilder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../technicalServices/URLBuilder */ "./src/main/technicalServices/URLBuilder.js");
/* harmony import */ var _contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./src/main/contract/APIConfigurationKey.js");
/* harmony import */ var _core_exceptions_CDAPIException__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/exceptions/CDAPIException */ "./src/main/core/exceptions/CDAPIException.js");
/* harmony import */ var _contract_ClientSettingsKey__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../contract/ClientSettingsKey */ "./src/main/contract/ClientSettingsKey.js");
/* harmony import */ var _core_ConfigMapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/ConfigMapper */ "./src/main/core/ConfigMapper.js");
/* harmony import */ var _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../worker/communication/ConfigurationDefaultValues */ "./src/worker/communication/ConfigurationDefaultValues.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * The cdApi facade exposes the various apis available for the SDK to use.
 * This API should be used for querying configurations external to the SDK if available.
 */










var CdApiFacade = /*#__PURE__*/function () {
  function CdApiFacade(utils, cdApi) {
    _classCallCheck(this, CdApiFacade);
    this._cdApi = cdApi;
    this._utils = utils;
  }

  /**
   * Helper function to always get the relevant cdApi
   * When coming from Npm flow -> this._cdApi
   * When coming from legacy flow -> window.cdApi
   */
  return _createClass(CdApiFacade, [{
    key: "cdApi",
    value: function cdApi() {
      // this._cdApi != undefined only on NPM.
      return this._cdApi || window.cdApi;
    }

    /**
     * Get the customer session ID if available by callback
     * @param callback
     */
  }, {
    key: "getCustomerSessionID",
    value: function getCustomerSessionID(callback) {
      this._getFromApiOrEmpty('getCustomerSessionID', function (csnum) {
        callback(csnum);
      });
    }

    /**
     * Get the log server url if available by callback. This function should not be used since its deprecated. Use getConfigurations instead.
     * @param callback
     */
  }, {
    key: "getLogServerAddress",
    value: function getLogServerAddress(callback) {
      this._getFromApiOrEmpty('getLogServerAddress', function (url) {
        callback(url);
      });
    }

    /**
     * Get the server url if available by callback. This function should not be used since its deprecated. Use getConfigurations instead.
     * @param callback
     */
  }, {
    key: "getServerAddress",
    value: function getServerAddress(callback) {
      this._getFromApiOrEmpty('getCustomerConfigLocation', function (url) {
        callback(url);
      });
    }

    /**
     * Get all configurations in a single api which receives a dictionary of configurations on initialization
     * @param callback
     */
  }, {
    key: "getConfigurations",
    value: function getConfigurations(callback) {
      var _this = this;
      var wupServerURL = null;
      // If we have the getConfigurations API
      if (this.isApiAvailable(_ApiContractName__WEBPACK_IMPORTED_MODULE_0__.ApiContractName.GetConfigurations)) {
        this._getFromApiOrEmpty(_ApiContractName__WEBPACK_IMPORTED_MODULE_0__.ApiContractName.GetConfigurations, function (configurations) {
          var startupConfigurations = null;
          // If we have configuration keys and configurations we try to extract the configurations
          if (configurations) {
            if (configurations.isWupServerURLProxy) {
              wupServerURL = configurations.wupServerURL;
            } else if (configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.wupServerURL]) {
              wupServerURL = _technicalServices_URLBuilder__WEBPACK_IMPORTED_MODULE_4__["default"].buildCustomServerUrl(configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.wupServerURL]);
            } else if (configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.customerID] && configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.serverURL]) {
              wupServerURL = _technicalServices_URLBuilder__WEBPACK_IMPORTED_MODULE_4__["default"].build(configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.serverURL], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_5__.APIConfigurationKey.customerID]);
            } else {
              throw new Error('Invalid serverURL or cid. Parameter is empty');
            }
            var configurationMapper = new _core_ConfigMapper__WEBPACK_IMPORTED_MODULE_8__.ConfigMapper();
            startupConfigurations = configurationMapper.mapStartupConfigurations(wupServerURL, configurations);
          }
          callback(startupConfigurations);
        });
      } else {
        this.getLogServerAddress(function (defaultLogAddress) {
          // get server url
          _this.getServerAddress(function (configUrl) {
            var extractedFields = _technicalServices_URLFieldsExtractor__WEBPACK_IMPORTED_MODULE_3__["default"].extract(configUrl);
            wupServerURL = _technicalServices_URLBuilder__WEBPACK_IMPORTED_MODULE_4__["default"].build(extractedFields.serverURL, extractedFields.cid);
            callback(new _StartupConfigurations__WEBPACK_IMPORTED_MODULE_1__["default"](wupServerURL, defaultLogAddress, null, false, '', null));
          });
        });
      }
    }
  }, {
    key: "createClientInterface",
    value: function createClientInterface(client, clientSettings) {
      if (!this.isCDAPIAvailable()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error('Failed setting client facade. cdApi is unavailable.');
        throw new _core_exceptions_CDAPIException__WEBPACK_IMPORTED_MODULE_6__["default"]('Failed setting client facade. cdApi is unavailable.');
      }
      var clientObject = {};
      clientObject.setCoordinatesMasking = function (mouseMasking) {
        client.setCoordinatesMasking(mouseMasking);
      };
      if (clientSettings && clientSettings[_contract_ClientSettingsKey__WEBPACK_IMPORTED_MODULE_7__.ClientSettingsKey.enableRestart]) {
        clientObject.restart = function () {
          client.restart();
        };
      }
      if (clientSettings && clientSettings[_contract_ClientSettingsKey__WEBPACK_IMPORTED_MODULE_7__.ClientSettingsKey.enableFlush]) {
        clientObject.flush = function () {
          client.flush();
        };
      }
      if (clientSettings && clientSettings[_contract_ClientSettingsKey__WEBPACK_IMPORTED_MODULE_7__.ClientSettingsKey.enableCustomElements]) {
        clientObject.submitCustomElement = function (customElement) {
          client.submitCustomElement(customElement);
        };
      }

      // This object will be set on the cdApi object
      this.cdApi()[_ApiContractName__WEBPACK_IMPORTED_MODULE_0__.ApiContractName.ClientFacade] = clientObject;
    }
  }, {
    key: "isCDAPIAvailable",
    value: function isCDAPIAvailable() {
      // If there is no cdApi at all
      if (!this.cdApi()) {
        return false;
      }
      return true;
    }
  }, {
    key: "isApiAvailable",
    value: function isApiAvailable(api) {
      // If there is no cdApi at all
      if (!this.cdApi()) {
        return false;
      }

      // If the client didn't implement the specific api...
      if (!this.cdApi()[api]) {
        return false;
      }
      return true;
    }

    /**
     * @param {string} api - The API method name to call
     * @param {Function} callback - Callback function to execute with the API result
     * @param {number} retryCount - Tracks the number of retry attempts when cdApi is not available.
     *                               Starts at 0 and increments with each retry (up to maxRetries).
     *                               Used to prevent infinite retry loops and for logging retry attempts.
     */
  }, {
    key: "_getFromApiOrEmpty",
    value: function _getFromApiOrEmpty(api, callback) {
      var retryCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var maxRetries = _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_9__.ConfigurationDefaultValues.MAX_CSID_RETRY_COUNT;

      // If the client didn't implement the cdApi or it wasn't loaded yet...
      if (!this.cdApi()) {
        if (retryCount >= maxRetries) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Failed getting cdApi after all ".concat(maxRetries, " retries."));
          return;
        }
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warnRetry("cdApi not found on attempt ".concat(retryCount + 1, "/").concat(maxRetries, ". Retrying..."), retryCount + 1, maxRetries);
        retryCount++;
        setTimeout(this._getFromApiOrEmpty.bind(this, api, callback, retryCount), 100); // the bind is for the callback to pass
        return;
      }

      // If the client didn't implement the specific api...
      if (!this.cdApi()[api]) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("User did not implement cdApi method: ".concat(api));
        callback('');
        return;
      }
      try {
        this.cdApi()[api](callback);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while calling cdApi ".concat(api, " function. Exception was thrown from client implementation."), ex);
        // After we logged the error from cdApi implementation we rethrow the exception so that caller can handle it.
        throw ex;
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/ClientEventService.js":
/*!********************************************!*\
  !*** ./src/main/api/ClientEventService.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ClientEventService; }
/* harmony export */ });
/* harmony import */ var _ApiEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApiEventType */ "./src/main/api/ApiEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ClientEventService = /*#__PURE__*/function () {
  function ClientEventService() {
    _classCallCheck(this, ClientEventService);
  }
  return _createClass(ClientEventService, [{
    key: "publishNewSessionStartedEvent",
    value: function publishNewSessionStartedEvent(sid) {
      window.postMessage({
        type: _ApiEventType__WEBPACK_IMPORTED_MODULE_0__.ApiEventType.NewSessionStartedEvent,
        event: {
          sessionID: sid
        }
      }, window.location.href);
    }
  }, {
    key: "publishStateChangedEvent",
    value: function publishStateChangedEvent(state) {
      window.postMessage({
        type: _ApiEventType__WEBPACK_IMPORTED_MODULE_0__.ApiEventType.StateChangedEvent,
        event: {
          state: state
        }
      }, window.location.href);
    }
  }, {
    key: "publishRestoredMuidEvent",
    value: function publishRestoredMuidEvent(muid) {
      window.postMessage({
        type: _ApiEventType__WEBPACK_IMPORTED_MODULE_0__.ApiEventType.RestoredMuidEvent,
        event: {
          muid: muid
        }
      }, window.location.href);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/CollectionSettings.js":
/*!********************************************!*\
  !*** ./src/main/api/CollectionSettings.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CollectionSettings; }
/* harmony export */ });
/* harmony import */ var _ElementSettings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ElementSettings */ "./src/main/api/ElementSettings.js");
/* harmony import */ var _CustomInputElementSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CustomInputElementSettings */ "./src/main/api/CustomInputElementSettings.js");
/* harmony import */ var _contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./src/main/contract/APIConfigurationKey.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contract/AgentType */ "./src/main/contract/AgentType.js");
/* harmony import */ var _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contract/CollectionMode */ "./src/main/contract/CollectionMode.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var CollectionSettings = /*#__PURE__*/function () {
  function CollectionSettings(collectionSettings) {
    var _collectionSettings$A, _collectionSettings$A2;
    _classCallCheck(this, CollectionSettings);
    this._elementSettings = new _ElementSettings__WEBPACK_IMPORTED_MODULE_0__["default"](collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_2__.APIConfigurationKey.elementSettings]);
    this._customInputElementSettings = new _CustomInputElementSettings__WEBPACK_IMPORTED_MODULE_1__["default"](collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_2__.APIConfigurationKey.customInputElementSettings]);
    this._agentType = this._validateAgentType(collectionSettings === null || collectionSettings === void 0 || (_collectionSettings$A = collectionSettings[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_2__.APIConfigurationKey.mode]) === null || _collectionSettings$A === void 0 ? void 0 : _collectionSettings$A.agentType);
    this._collectionMode = this._setAgentCollectionMode(collectionSettings === null || collectionSettings === void 0 || (_collectionSettings$A2 = collectionSettings[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_2__.APIConfigurationKey.mode]) === null || _collectionSettings$A2 === void 0 ? void 0 : _collectionSettings$A2.collectionMode);
  }
  return _createClass(CollectionSettings, [{
    key: "getElementSettings",
    value: function getElementSettings() {
      return this._elementSettings;
    }
  }, {
    key: "getCustomInputElementSettings",
    value: function getCustomInputElementSettings() {
      return this._customInputElementSettings;
    }
  }, {
    key: "getAgentType",
    value: function getAgentType() {
      return this._agentType;
    }
  }, {
    key: "getAgentMode",
    value: function getAgentMode() {
      return this._collectionMode;
    }

    /**
     *
     * @param collectionMode
     * @returns {string|*|string}
     * agentType: primary -> collectionMode: full
     * agentType: secondary -> collectionMode: full or lean
     */
  }, {
    key: "_setAgentCollectionMode",
    value: function _setAgentCollectionMode(collectionMode) {
      if (this._agentType === _contract_AgentType__WEBPACK_IMPORTED_MODULE_3__.AgentType.PRIMARY) {
        return _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_4__.CollectionMode.FULL;
      }
      return this._validateAgentMode(collectionMode);
    }
  }, {
    key: "_validateAgentType",
    value: function _validateAgentType(agentType) {
      if (Object.values(_contract_AgentType__WEBPACK_IMPORTED_MODULE_3__.AgentType).includes(agentType)) {
        return agentType;
      }
      var defaultAgentType = _contract_AgentType__WEBPACK_IMPORTED_MODULE_3__.AgentType.PRIMARY;
      if (agentType !== undefined) {
        // Warn only if an invalid value was actually provided
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].warn("Invalid agent type: ".concat(agentType, ". Defaulting to ").concat(defaultAgentType, " agent type."));
      }
      return defaultAgentType;
    }
  }, {
    key: "_validateAgentMode",
    value: function _validateAgentMode(collectionMode) {
      if (Object.values(_contract_CollectionMode__WEBPACK_IMPORTED_MODULE_4__.CollectionMode).includes(collectionMode)) {
        return collectionMode;
      }
      var defaultCollectionMode = _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_4__.CollectionMode.LEAN;
      if (collectionMode !== undefined) {
        // Warn only if an invalid value was actually provided
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].warn("Invalid collection mode: ".concat(collectionMode, ". Defaulting to ").concat(defaultCollectionMode, " collection mode."));
      }
      return defaultCollectionMode;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/CoordinatesMaskingConfigurationUpdater.js":
/*!****************************************************************!*\
  !*** ./src/main/api/CoordinatesMaskingConfigurationUpdater.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CoordinatesMaskingConfigurationUpdater; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




/**
 * this class is a bridge for handling the collection of mouse coordinates.
 * the class takes effect when:
 * 1. server configurations loaded
 * 2. setCoordinatesMasking API function was fired.
 * the class updates the configuration repository 'enableCoordinatesMasking' field which
 * is being consumed by the 'MouseEventCollector' class.
 */
var CoordinatesMaskingConfigurationUpdater = /*#__PURE__*/function () {
  function CoordinatesMaskingConfigurationUpdater(configurationRepository) {
    _classCallCheck(this, CoordinatesMaskingConfigurationUpdater);
    this._configurationRepository = configurationRepository;
  }
  return _createClass(CoordinatesMaskingConfigurationUpdater, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(serverConfigurations) {
      var isEnabled = serverConfigurations.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableCoordinatesMasking);
      this._setConfigurationKey(isEnabled);
    }
  }, {
    key: "updateConfig",
    value: function updateConfig(isEnable) {
      this._handleConfigurationUpdate(isEnable);
    }
  }, {
    key: "_handleConfigurationUpdate",
    value: function _handleConfigurationUpdate(isEnabled) {
      if (!_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].isBoolean(isEnabled)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Invalid argument type: ".concat(isEnabled));
        return;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("Set coordinates masking API was called, is enabled: ".concat(isEnabled));
      this._setConfigurationKey(isEnabled);
    }
  }, {
    key: "_setConfigurationKey",
    value: function _setConfigurationKey(value) {
      this._configurationRepository.set(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableCoordinatesMasking, value);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/CustomInputElementSettings.js":
/*!****************************************************!*\
  !*** ./src/main/api/CustomInputElementSettings.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CustomInputElementSettings; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var CustomInputElementSettings = /*#__PURE__*/function () {
  function CustomInputElementSettings(customInputElementSettings) {
    _classCallCheck(this, CustomInputElementSettings);
    this._parentElementSelector = customInputElementSettings ? customInputElementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.parentElementSelector] : null;
    this._childElementWithCustomAttribute = customInputElementSettings ? customInputElementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.childElementWithCustomAttribute] : null;
    this._elementDataAttribute = customInputElementSettings ? customInputElementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementDataAttribute] : null;
    this._customButtons = customInputElementSettings ? customInputElementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.customButtons] : null;
  }
  return _createClass(CustomInputElementSettings, [{
    key: "getParentElementSelector",
    value: function getParentElementSelector() {
      return this._parentElementSelector;
    }
  }, {
    key: "getChildElementWithCustomAttribute",
    value: function getChildElementWithCustomAttribute() {
      return this._childElementWithCustomAttribute;
    }
  }, {
    key: "getElementDataAttribute",
    value: function getElementDataAttribute() {
      return this._elementDataAttribute;
    }
  }, {
    key: "getCustomButtons",
    value: function getCustomButtons() {
      return this._customButtons;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/CustomerApiBridge.js":
/*!*******************************************!*\
  !*** ./src/main/api/CustomerApiBridge.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CustomerApiBridge; }
/* harmony export */ });
/* harmony import */ var _ApiCommandType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApiCommandType */ "./src/main/api/ApiCommandType.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var CustomerApiBridge = /*#__PURE__*/function () {
  function CustomerApiBridge(pauseResumeMgr, messageBus, cdApiFacade, utils) {
    _classCallCheck(this, CustomerApiBridge);
    this._pauseResumeMgr = pauseResumeMgr;
    this._messageBus = messageBus;
    this._cdApiFacade = cdApiFacade;
    this._utils = utils;
    this._createCommandToBusMessageMapping();
  }
  return _createClass(CustomerApiBridge, [{
    key: "enableApi",
    value: function enableApi() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Enabling api calls');
      this._onApiMessageBinded = this._onApiMessage.bind(this);
      this._utils.addEventListener(window, 'message', this._onApiMessageBinded, true);
    }
  }, {
    key: "disableApi",
    value: function disableApi() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Disabling api calls');
      this._utils.removeEventListener(window, 'message', this._onApiMessageBinded, true);
    }
  }, {
    key: "getCustomerSessionID",
    value: function getCustomerSessionID(callback) {
      this._cdApiFacade.getCustomerSessionID(function (customerSessionID) {
        callback(customerSessionID);
      });
    }
  }, {
    key: "getLogServerAddress",
    value: function getLogServerAddress(callback) {
      this._cdApiFacade.getLogServerAddress(function (url) {
        callback(url);
      });
    }
  }, {
    key: "getServerAddress",
    value: function getServerAddress(callback) {
      this._cdApiFacade.getServerAddress(function (url) {
        callback(url);
      });
    }
  }, {
    key: "getConfigurations",
    value: function getConfigurations(callback) {
      this._cdApiFacade.getConfigurations(function (configurations) {
        callback(configurations);
      });
    }

    /**
     * Method posts a window message once a session reset occurs. Exposes a session reset event
     * @param snum
     */
  }, {
    key: "notifySessionReset",
    value: function notifySessionReset(snum) {
      if (this._pauseResumeMgr.isCustomerApiEnabled()) {
        window.postMessage({
          type: 'SNumNotification',
          cdSNum: snum
        }, window.location.href);
      }
    }
  }, {
    key: "isApiAvailable",
    value: function isApiAvailable(api) {
      return this._cdApiFacade.isApiAvailable(api);
    }
  }, {
    key: "_onApiMessage",
    value: function _onApiMessage(e) {
      // make sure that the message posted from the same tab
      var apiMsg = e.data;
      var msgType = apiMsg.type;
      if (msgType === undefined) {
        // we may be in IE <=9 which passes only strings so the msg may be stringified
        try {
          apiMsg = JSON.parse(apiMsg);
          msgType = apiMsg.type;
        } catch (ex) {
          // Swallow exception
        }
      }
      if (msgType === _ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.ChangeStateCommand || this._pauseResumeMgr.isCustomerApiEnabled() && this._apiCommandToBusMessageMapping[msgType]) {
        // even when api is disabled we should enable running the pause/resume api
        e.preventDefault && e.preventDefault(); // IE8 does not support
        e.stopPropagation && e.stopPropagation();
        this._messageBus.publish(this._apiCommandToBusMessageMapping[msgType], apiMsg);
      }
    }
  }, {
    key: "_createCommandToBusMessageMapping",
    value: function _createCommandToBusMessageMapping() {
      this._apiCommandToBusMessageMapping = {};
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.ContextChangeCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiContextChangeEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.ResetSessionCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiResetSessionEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.CustomerMetadataCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiCustomerMetadataEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.ChangeStateCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiChangeStateEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.SetCsidCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiSetCsidEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.SetPsidCommand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiSetPsidEvent;
      this._apiCommandToBusMessageMapping[_ApiCommandType__WEBPACK_IMPORTED_MODULE_0__.ApiCommandType.SetCustomerBrand] = _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ApiSetCustomerBrand;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/ElementSettings.js":
/*!*****************************************!*\
  !*** ./src/main/api/ElementSettings.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ElementSettings; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ElementSettings = /*#__PURE__*/function () {
  function ElementSettings(elementSettings) {
    _classCallCheck(this, ElementSettings);
    this._customElementAttribute = elementSettings ? elementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.customElementAttribute] : null;
    this._attributesToMask = elementSettings ? elementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.maskElementsAttributes] : null;
    this._keyEventsMaskSpecialChars = elementSettings ? elementSettings[_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.keyEventsMaskSpecialChars] : null;
  }
  return _createClass(ElementSettings, [{
    key: "getCustomElementAttribute",
    value: function getCustomElementAttribute() {
      return this._customElementAttribute;
    }
  }, {
    key: "getAttributesToMask",
    value: function getAttributesToMask() {
      return this._attributesToMask;
    }
  }, {
    key: "getKeyEventsMaskSpecialChars",
    value: function getKeyEventsMaskSpecialChars() {
      return this._keyEventsMaskSpecialChars;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/api/StartupConfigurations.js":
/*!***********************************************!*\
  !*** ./src/main/api/StartupConfigurations.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StartupConfigurations; }
/* harmony export */ });
/* harmony import */ var _CollectionSettings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CollectionSettings */ "./src/main/api/CollectionSettings.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var StartupConfigurations = /*#__PURE__*/function () {
  function StartupConfigurations(wupServerURL, logServerURL, enableFramesProcessing, enableCustomElementsProcessing, enableSameSiteNoneAndSecureCookies, useUrlWorker, workerUrl, isWupServerURLProxy, clientSettings, collectionSettings, enableStartupCustomerSessionId, mutationMaxChunkSize, mutationChunkDelayMs, passwordIdMaskingList, enableUnmaskedValues, allowedUnmaskedValuesList, enableCoordinatesMasking, isFlutterApp, enableMinifiedWupUri, enableMinifiedLogUri, maxShadowDepth, iframeLoadingTimeout, elementCategories, elementAttributes, recoveryServerURL, enableMathDetect, enableBrowserDisplayDetect, enableGraphCard, useLegacyZeroTimeout, externalWASMModules, elementSelectors, restrictedCookieDomains, crossBrandSharedCookieDomain) {
    _classCallCheck(this, StartupConfigurations);
    this._wupServerURL = wupServerURL;
    this._logServerURL = logServerURL;
    this._enableFramesProcessing = enableFramesProcessing;
    this._enableCustomElementsProcessing = enableCustomElementsProcessing;
    this._enableSameSiteNoneAndSecureCookies = enableSameSiteNoneAndSecureCookies;
    this._useUrlWorker = useUrlWorker;
    this._workerUrl = workerUrl;
    this._isWupServerURLProxy = isWupServerURLProxy;
    this._clientSettings = clientSettings;
    this._collectionSettings = collectionSettings || new _CollectionSettings__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this._enableStartupCustomerSessionId = enableStartupCustomerSessionId;
    this._mutationMaxChunkSize = mutationMaxChunkSize || 0;
    this._mutationChunkDelayMs = mutationChunkDelayMs || 100;
    this._passwordIdMaskingList = passwordIdMaskingList;
    this._enableUnmaskedValues = enableUnmaskedValues || false;
    this._allowedUnmaskedValuesList = allowedUnmaskedValuesList || [];
    this._enableCoordinatesMasking = enableCoordinatesMasking || false;
    this._isFlutterApp = isFlutterApp || false;
    this._enableMinifiedWupUri = enableMinifiedWupUri !== undefined ? enableMinifiedWupUri : true;
    this._enableMinifiedLogUri = enableMinifiedLogUri !== undefined ? enableMinifiedLogUri : false;
    this._maxShadowDepth = maxShadowDepth || 0;
    this._iframeLoadingTimeout = iframeLoadingTimeout || 5000;
    this._elementCategories = elementCategories;
    this._elementAttributes = elementAttributes;
    this._elementSelectors = elementSelectors;
    this._recoveryServerURL = recoveryServerURL || "";
    this._enableMathDetect = enableMathDetect;
    this._enableBrowserDisplayDetect = enableBrowserDisplayDetect;
    this._enableGraphCard = enableGraphCard;
    this._useLegacyZeroTimeout = useLegacyZeroTimeout;
    this._externalWASMModules = externalWASMModules || [];
    this._restrictedCookieDomains = restrictedCookieDomains || [];
    this._crossBrandSharedCookieDomain = crossBrandSharedCookieDomain;
  }
  return _createClass(StartupConfigurations, [{
    key: "getWupServerURL",
    value: function getWupServerURL() {
      return this._wupServerURL;
    }
  }, {
    key: "getRecoveryServerURL",
    value: function getRecoveryServerURL() {
      return this._recoveryServerURL;
    }
  }, {
    key: "getLogServerURL",
    value: function getLogServerURL() {
      return this._logServerURL;
    }
  }, {
    key: "isMinifiedLogUriEnabled",
    value: function isMinifiedLogUriEnabled() {
      return this._enableMinifiedLogUri;
    }
  }, {
    key: "getEnableFramesProcessing",
    value: function getEnableFramesProcessing() {
      return this._enableFramesProcessing;
    }
  }, {
    key: "getEnableCustomElementsProcessing",
    value: function getEnableCustomElementsProcessing() {
      return this._enableCustomElementsProcessing;
    }
  }, {
    key: "getEnableSameSiteNoneAndSecureCookies",
    value: function getEnableSameSiteNoneAndSecureCookies() {
      return this._enableSameSiteNoneAndSecureCookies;
    }
  }, {
    key: "getUseUrlWorker",
    value: function getUseUrlWorker() {
      return this._useUrlWorker;
    }
  }, {
    key: "getWorkerUrl",
    value: function getWorkerUrl() {
      return this._workerUrl;
    }
  }, {
    key: "getIsWupServerURLProxy",
    value: function getIsWupServerURLProxy() {
      return this._isWupServerURLProxy;
    }
  }, {
    key: "getClientSettings",
    value: function getClientSettings() {
      return this._clientSettings;
    }
  }, {
    key: "getCollectionSettings",
    value: function getCollectionSettings() {
      return this._collectionSettings;
    }
  }, {
    key: "getEnableStartupCustomerSessionId",
    value: function getEnableStartupCustomerSessionId() {
      return this._enableStartupCustomerSessionId;
    }
  }, {
    key: "getMutationMaxChunkSize",
    value: function getMutationMaxChunkSize() {
      return this._mutationMaxChunkSize;
    }
  }, {
    key: "getMutationChunkDelayMs",
    value: function getMutationChunkDelayMs() {
      return this._mutationChunkDelayMs;
    }
  }, {
    key: "getPasswordIdMaskingList",
    value: function getPasswordIdMaskingList() {
      return this._passwordIdMaskingList;
    }
  }, {
    key: "isUnmaskedValuesEnabled",
    value: function isUnmaskedValuesEnabled() {
      return this._enableUnmaskedValues;
    }
  }, {
    key: "getAllowedUnmaskedValuesList",
    value: function getAllowedUnmaskedValuesList() {
      return this._allowedUnmaskedValuesList;
    }
  }, {
    key: "isCoordinatesMaskingEnabled",
    value: function isCoordinatesMaskingEnabled() {
      return this._enableCoordinatesMasking;
    }
  }, {
    key: "isFlutterApp",
    value: function isFlutterApp() {
      return this._isFlutterApp;
    }
  }, {
    key: "isMinifiedWupUriEnabled",
    value: function isMinifiedWupUriEnabled() {
      return this._enableMinifiedWupUri;
    }
  }, {
    key: "getMaxShadowDepth",
    value: function getMaxShadowDepth() {
      return this._maxShadowDepth;
    }
  }, {
    key: "getIframeLoadingTimeout",
    value: function getIframeLoadingTimeout() {
      return this._iframeLoadingTimeout;
    }
  }, {
    key: "getElementCategories",
    value: function getElementCategories() {
      return this._elementCategories;
    }
  }, {
    key: "getElementAttributes",
    value: function getElementAttributes() {
      return this._elementAttributes;
    }
  }, {
    key: "getElementSelectors",
    value: function getElementSelectors() {
      return this._elementSelectors;
    }
  }, {
    key: "isMathDetectEnabled",
    value: function isMathDetectEnabled() {
      return this._enableMathDetect;
    }
  }, {
    key: "isBrowserDisplayDetectEnabled",
    value: function isBrowserDisplayDetectEnabled() {
      return this._enableBrowserDisplayDetect;
    }
  }, {
    key: "isGraphCardEnabled",
    value: function isGraphCardEnabled() {
      return this._enableGraphCard;
    }
  }, {
    key: "getUseLegacyZeroTimeout",
    value: function getUseLegacyZeroTimeout() {
      return this._useLegacyZeroTimeout;
    }
  }, {
    key: "getExternalWASMModules",
    value: function getExternalWASMModules() {
      return this._externalWASMModules;
    }

    /**
      * List of domains on which SDK cookies must NOT be written.
      *
      * Used to prevent cookies from being stored at high-level shared domains
      * that could be visible to multiple brands or tenants (e.g., several banks
      * under *.bank.in).
      *
      * Example:
      *  - If 'bank.in' is listed here and the current host is 'www.icici.bank.in':
      *      - Disallow: domain='.bank.in'
      *      - Allow:    domain='.icici.bank.in'
      *
      * Default: empty list: []
      */
  }, {
    key: "getRestrictedCookieDomains",
    value: function getRestrictedCookieDomains() {
      return this._restrictedCookieDomains;
    }

    /**
     * Returns the configured cross-brand shared cookie domain, if defined.
     *
     * This domain is used **exclusively for device-identifier cookies**
     * (such as the MUID) that must be shared across multiple related
     * portals or sub-brands belonging to the same organization.
     *
     * Unlike `restrictedCookieDomains`, which prevent cookie writing to
     * shared high-level domains for security and isolation reasons,
     * `crossBrandSharedCookieDomain` enables a *controlled exception*
     * that allows writing specific cookies (e.g., MUID) to a parent domain
     * for consistent user recognition across those portals.
     *
     *
     * Typical scenario:
     *  - Organization: NAB Group (Australia)
     *  - Brands: `ib.nab.com.au`, `nabconnect.nab.com.au`
     *
     * Behavior:
     *  - Session cookies remain restricted to each subdomain.
     *  - Device-identifying MUID cookie is written once to 'nab.com.au'
     *    so that it can be reused between portals.
     *
     * Returns:
     *  - The configured shared cookie domain (e.g., `"nab.com.au"`) if defined
     *  - `null` if not configured
     */
  }, {
    key: "getCrossBrandSharedCookieDomain",
    value: function getCrossBrandSharedCookieDomain() {
      return this._crossBrandSharedCookieDomain;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/DataCollector.js":
/*!**********************************************!*\
  !*** ./src/main/collectors/DataCollector.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DataCollector; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Base class for all data collectors in the system.
 * 
 * Feature Settings Properties:
 * @property {string} configKey - Unique identifier for the feature configuration
 * @property {boolean} isDefault - Whether the feature is enabled by default
 * @property {boolean} shouldRunPerContext - Whether the feature should run for each context (like iframe)
 * @property {boolean} shouldRunPerSession - Whether the feature should run for each session
 * @property {boolean} shouldRun - Master switch for the feature
 * @property {boolean} isFrameRelated - Whether the feature is related to iframe functionality
 * @property {boolean} runInSlave - Whether the feature should run in slave mode
 * @property {boolean} runInLean - Whether the feature should run in lean mode
 * @property {boolean} runInUns - Whether the feature should run in uns mode
 * @property {boolean} isRunning - Runtime state indicator
 * @property {Object|null} instance - Holds the instance of the feature when it's running
 * 
 * Feature Modes:
 * - Slave Mode: Features that run in slave mode are executed in a separate context, typically used for
 *   features that need to run in iframes or other isolated contexts. These features are initialized
 *   separately from the main context and can operate independently. Used in the slave system loader
 *   to determine which features should be loaded in the slave context.
 * 
 * - Lean Mode: Features that run in lean mode are included in the lean version of the application.
 *   These features are essential for basic functionality and are selected based on the collection mode.
 *   The lean mode is used to optimize performance by only loading necessary features. Used in
 *   FeaturesList.registerLeanFeatures() to determine which features should be included in the lean version.
 * 
 * - Uns Mode: Features that run in uns mode are executed in an unsecured context. These features
 *   typically handle sensitive data or operations that require special security considerations.
 *   They are only enabled when the application is running in an unsecured environment. Used in
 *   various features like BrowserPropsFeature and ContextPropsFeature to determine if they should
 *   run in unsecured contexts.
 */


var DataCollector = /*#__PURE__*/function () {
  function DataCollector() {
    _classCallCheck(this, DataCollector);
  }
  return _createClass(DataCollector, [{
    key: "startFeature",
    value:
    /**
     * Starts the feature. Override this method in subclasses to implement feature-specific startup logic.
     */
    function startFeature() {}

    /**
     * Stops the feature. Override this method in subclasses to implement feature-specific cleanup logic.
     */
  }, {
    key: "stopFeature",
    value: function stopFeature() {}

    /**
     * Updates the feature configuration. Override this method in subclasses to handle configuration changes.
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}

    /**
     * Sends data to the queue. Override this method in subclasses to implement data collection logic.
     */
  }, {
    key: "sendToQueue",
    value: function sendToQueue() {}

    // There is a bug in jquery (1.7.1) that timestamp doesn't work correctly (ie, firefox)
    // The bug is defined in http://bugs.jquery.com/ticket/10755
    // The timestamp in FF is from the opening of the browser
    // timestamp doesn't always exist
  }, {
    key: "getEventTimestamp",
    value: function getEventTimestamp() {
      return _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].dateNow();
    }

    /**
     * Gets the timestamp from an event object.
     * @param {Event} e - The event object
     * @returns {number} The event timestamp or 0 if not available
     */
  }, {
    key: "getTimestampFromEvent",
    value: function getTimestampFromEvent(e) {
      return e.timeStamp ? _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cutDecimalPointDigits(e.timeStamp, 3) : 0;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/FeatureService.js":
/*!***********************************************!*\
  !*** ./src/main/collectors/FeatureService.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FeatureService; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var FeatureService = /*#__PURE__*/function () {
  /**
   * This class manages all the feature execution by configuration.
   * @param featuresList FeaturesList object
   * @param {FramesHandler} frameHandler is used to run features on frames
   * @param {ConfigurationRepository} configurationRepository
   * @param {DOMUtils} domUtils
   * @param {BrowserContextsCache} browserContextsCache Contains a map of browser contexts (e.g. custom handlers) collected by designated event handlers
   * @constructor
   */
  function FeatureService(featuresList, frameHandler, configurationRepository, domUtils, utils, browserContextsCache) {
    _classCallCheck(this, FeatureService);
    this._features = featuresList;
    this._frameHandler = frameHandler;
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._cdUtils = utils;
    this._browserContextsCache = browserContextsCache;
    this.callMethod = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.useLegacyZeroTimeout) ? this._cdUtils.asyncCall : this._cdUtils.asyncTimeoutCall;

    // This is a super hack to initialize the component for backwards compatibility.
    this.buildFrameRelatedLists();
  }

  // TODO: Get rid of this crap. We can get this by iterating over the features instead of building these arrays.
  return _createClass(FeatureService, [{
    key: "buildFrameRelatedLists",
    value: function buildFrameRelatedLists() {
      this._frameRelatedDefaultFeatures = this._collectFrameRelated(this._features.getDefaultFeatures());
      this._frameRelatedNonDefaultFeatures = this._collectFrameRelated(this._features.getNonDefaultFeatures());
    }
  }, {
    key: "runDefault",
    value: function runDefault() {
      var _this = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Running default features');

      // We don't check configuration was updated here like in the other feature runs because default features
      // run before configuration arrives from the server
      if (document.readyState === 'complete') {
        // Already fully loaded
        this._runFeatures(this._features.getDefaultFeatures(), this._frameRelatedDefaultFeatures);
      } else {
        window.addEventListener('load', function () {
          _this._runFeatures(_this._features.getDefaultFeatures(), _this._frameRelatedDefaultFeatures);
        }, {
          once: true
        });
      }
    }
  }, {
    key: "stopDefault",
    value: function stopDefault() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopping default features');
      this._stopFeatures(this._features.getDefaultFeatures(), this._frameRelatedDefaultFeatures);
    }
  }, {
    key: "runPerSessionFeatures",
    value: function runPerSessionFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Running per session features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.");
        return;
      }

      // Start the per session features according to the configuration
      this._startFeatures(this._features.getPerSessionFeatures());
    }
  }, {
    key: "stopPerSessionFeatures",
    value: function stopPerSessionFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopping per session features');
      this._stopFeatures(this._features.getPerSessionFeatures());
    }
  }, {
    key: "runNonDefault",
    value: function runNonDefault() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Running non default features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives.");
        return;
      }
      this._runFeatures(this._features.getNonDefaultFeatures(), this._frameRelatedNonDefaultFeatures);
    }
  }, {
    key: "stopNonDefault",
    value: function stopNonDefault() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopping non default features');
      this._stopFeatures(this._features.getNonDefaultFeatures(), this._frameRelatedNonDefaultFeatures);
    }
  }, {
    key: "runPerContextFeatures",
    value: function runPerContextFeatures(contextData) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Running per context features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.");
        return;
      }
      this._runFeatures(this._features.getPerContextFeatures());
      if (contextData.name !== 'cd_auto') {
        // pass the frame related features to the FrameHandler that will start them
        this._frameRelatedDefaultFeatures && this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures);
      }
    }
  }, {
    key: "stopPerContextFeatures",
    value: function stopPerContextFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopping per context features');
      this._stopFeatures(this._features.getPerContextFeatures());
    }
  }, {
    key: "stopAllFeatures",
    value: function stopAllFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopping all features');
      this.stopDefault();
      this.stopNonDefault();
      this.stopPerSessionFeatures();
      this.stopPerContextFeatures();
    }
  }, {
    key: "updateRunByConfig",
    value: function updateRunByConfig(configurationRepository) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Updating features configuration');
      this._updateFeatures(this._features.getDefaultFeatures(), configurationRepository);
      this._updateFeatures(this._features.getNonDefaultFeatures(), configurationRepository);
      this._updateFeatures(this._features.getPerContextFeatures(), configurationRepository);

      // Don't run the per session features here. They are started once a new session starts.
      // Running them here, will cause them to run every configuration load which is every page
    }

    /**
     * Run available registered features against the provided browserContext
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "runFeaturesOnBrowserContext",
    value: function runFeaturesOnBrowserContext(browserContext) {
      var _this2 = this;
      var defaultFeatures = this._features.getDefaultFeatures();
      if (defaultFeatures) {
        this._browserContextsCache.unRegisterContextFeatures(browserContext.Context, defaultFeatures);
        Object.keys(defaultFeatures).forEach(function (featureKey) {
          var feature = defaultFeatures[featureKey];
          if (feature.shouldRun && feature.isFrameRelated) {
            feature.isRunning = true;
            feature.instance && _this2.callMethod.call(feature.instance.startFeature, feature.instance, browserContext);
          }
        });
      }
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeaturesOnBrowserContextRemove",
    value: function stopFeaturesOnBrowserContextRemove(browserContext) {
      var _this3 = this;
      var defaultFeatures = this._features.getDefaultFeatures();
      if (defaultFeatures) {
        this._browserContextsCache.unRegisterContextFeatures(browserContext.Context, defaultFeatures);
        Object.keys(defaultFeatures).forEach(function (featureKey) {
          var feature = defaultFeatures[featureKey];
          if (feature.shouldRun && feature.isFrameRelated && feature.isRunning) {
            feature.instance && _this3.callMethod.call(feature.instance.stopFeature, feature.instance, browserContext);
          }
        });
      }
    }
  }, {
    key: "_runFeatures",
    value: function _runFeatures(features, frameRelatedFeatures) {
      var _this4 = this;
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          if (feature.shouldRun) {
            _this4.callMethod.call(feature.instance.startFeature, feature.instance, new _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_1__["default"](window.self, _this4._domUtils));
            feature.isRunning = true;
          }
        });
      }

      // TODO: Refactor this shit. Why is this here and why the duplicate startFeatures????
      if (frameRelatedFeatures) {
        // pass the frame related features to the FrameHandler that will start them
        this._frameHandler.startFeatures(frameRelatedFeatures);
        this._domUtils.onPageLoad(window, function () {
          _this4._frameHandler.startFeatures(frameRelatedFeatures);
        });
      }
    }
  }, {
    key: "_stopFeatures",
    value: function _stopFeatures(features, frameRelatedFeatures) {
      var _this5 = this;
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          feature.instance.stopFeature && _this5.callMethod.call(feature.instance.stopFeature, feature.instance, new _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_1__["default"](window.self, _this5._domUtils));
          feature.isRunning = false;
        });
      }
      if (frameRelatedFeatures) {
        // pass the frame related features to the FrameHandler that will start them
        this._frameHandler.stopFeatures(frameRelatedFeatures);
      }
    }
  }, {
    key: "_actOnFeature",
    value: function _actOnFeature(feature, actFunc) {
      // for frame related also call framesHandler, in any case call it on window
      if (feature.isFrameRelated) {
        this._frameHandler[actFunc](feature); // The frameHandler will call start / update with callAsync
      }
      feature.instance[actFunc] && this.callMethod.call(feature.instance[actFunc], feature.instance, new _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_1__["default"](window.self, this._domUtils));
    }

    /**
     * Start the list of features according to the configuration. Features will be run even, if already started
     * @param features
     * @private
     */
  }, {
    key: "_startFeatures",
    value: function _startFeatures(features) {
      var _this6 = this;
      if (!features) {
        return;
      }
      Object.keys(features).forEach(function (featureKey) {
        var currFeature = features[featureKey];
        // Get the configuration indicating if the feature is enabled or disabled
        var configShouldRun = _this6._configurationRepository.get(currFeature.configKey);
        if (typeof configShouldRun === 'boolean') {
          currFeature.shouldRun = configShouldRun;
        }
        if (currFeature.shouldRun) {
          _this6._actOnFeature(currFeature, 'startFeature');
          currFeature.isRunning = true;
        }
      });
    }

    /**
     * Re-start features against available browser contexts
     * @param features
     * @private
     */
  }, {
    key: "_startFeatureOnBrowserContexts",
    value: function _startFeatureOnBrowserContexts(feature) {
      var _this7 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (feature.shouldRun && !_this7._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this7._browserContextsCache.registerContextFeature(browserContext.Context, feature);
          _this7.callMethod.call(feature.instance.startFeature, feature.instance, browserContext);
          feature.isRunning = true;
        }
      });
    }

    /**
     * Stop features against available browser contexts
     * @param feature
     * @private
     */
  }, {
    key: "_stopFeatureOnBrowserContexts",
    value: function _stopFeatureOnBrowserContexts(feature) {
      var _this8 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (_this8._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this8.callMethod.call(feature.instance.stopFeature, feature.instance, browserContext);
        }
        feature.isRunning = false;
        if (_this8._browserContextsCache.exists(browserContext.Context)) {
          _this8._browserContextsCache.unRegisterContextFeature(browserContext.Context, feature);
        }
        _this8._browserContextsCache.remove(browserContext.Context);
      });
    }

    /**
     * Update a feature config against available browser contexts
     * @param feature
     * @private
     */
  }, {
    key: "_updateFeatureConfigOnBrowserContexts",
    value: function _updateFeatureConfigOnBrowserContexts(feature) {
      var _this9 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (_this9._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this9.callMethod.call(feature.instance.updateFeatureConfig, feature.instance, browserContext);
        }
      });
    }
  }, {
    key: "_updateFeatures",
    value: function _updateFeatures(features, configurationRepository) {
      var _this10 = this;
      if (!features) {
        return;
      }
      Object.keys(features).forEach(function (featureKey) {
        var currFeature = features[featureKey];
        var configShouldRun = configurationRepository.get(currFeature.configKey);
        if (typeof configShouldRun === 'boolean') {
          currFeature.shouldRun = configShouldRun;
        }
        if (currFeature.isRunning && !currFeature.shouldRun) {
          _this10._actOnFeature(currFeature, 'stopFeature');
          _this10._stopFeatureOnBrowserContexts(currFeature);
          currFeature.isRunning = false;
        } else if (!currFeature.isRunning && currFeature.shouldRun) {
          _this10._actOnFeature(currFeature, 'startFeature');
          _this10._startFeatureOnBrowserContexts(currFeature);
          currFeature.isRunning = true;
        }
        if (currFeature.isRunning) {
          // in this case shouldRun == true
          // update the feature with the retrieved configuration
          _this10._actOnFeature(currFeature, 'updateFeatureConfig');
          _this10._updateFeatureConfigOnBrowserContexts(currFeature);
        }
      });
    }
  }, {
    key: "_collectFrameRelated",
    value: function _collectFrameRelated(features) {
      var frameRelatedFeatures = [];
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          if (feature.isFrameRelated) {
            frameRelatedFeatures.push(feature);
          }
        });
      }
      return frameRelatedFeatures;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/FeaturesBuilder.js":
/*!************************************************!*\
  !*** ./src/main/collectors/FeaturesBuilder.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FeaturesBuilder; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/*
 *
 * @param allFeatures: A FeatureList object contains all the features
 * @param utils: utilites object supplied to the features that needs it
 * @param elements: An Elements object supplied to the features that needs it
 * @param mutationObserver
 * @param dataQueue: The Q that each of the features will fill with data
 * @param sessionService: handles sid and csid
 * @param muidService: handles and holds muid
 * @param perfMonitor: sends performance data, start and end times for features
 * @param sensorDataQ: handles history buffer for sensor events near touch events
 * @param msgBus: communicator between modules
 * @constructor
 */
var FeaturesBuilder = /*#__PURE__*/function () {
  /* eslint-disable no-bitwise, no-restricted-syntax */

  function FeaturesBuilder(allFeatures, configurationRepository, utils, elements, mutationObserver, dataQueue, devDebugDataQ, configurations, sessionService, muidService, muidEncryptedService, perfMonitor, sensorDataQ, msgBus, cidCache, sameCharService, maskingService, categoryService, wasmModuleLoader, contextMgr, fontTimingService, fontDetectorProvider, agenticDomInjectionDetector) {
    _classCallCheck(this, FeaturesBuilder);
    this._features = allFeatures;
    this._configurationRepository = configurationRepository; // Don't remove! Its used by the features
    this._utils = utils;
    this._elements = elements; // TODO: consider to change name to elementUtils
    this._mutationObserver = mutationObserver;
    this._dataQ = dataQueue;
    this._devDebugDataQueue = devDebugDataQ;
    this._sessionService = sessionService;
    this._muidService = muidService;
    this._muidEncryptedService = muidEncryptedService;
    this._perfMonitor = perfMonitor;
    this._sensorDataQ = sensorDataQ;
    this._msgBus = msgBus;
    this._cidCache = cidCache;
    this._sameCharService = sameCharService;
    this._maskingService = maskingService;
    this._categoryService = categoryService;
    this._configurations = configurations;
    this._wasmModuleLoader = wasmModuleLoader;
    this._contextMgr = contextMgr;
    this._fontTimingService = fontTimingService;
    this._fontDetectorProvider = fontDetectorProvider;
    this._agenticDomInjectionDetector = agenticDomInjectionDetector;
  }
  return _createClass(FeaturesBuilder, [{
    key: "buildFeatures",
    value: function buildFeatures() {
      var me = this;
      function buildFeaturesInList(featureList) {
        if (!featureList) {
          return;
        }
        Object.keys(featureList).forEach(function (featureKey) {
          var feature = featureList[featureKey];
          try {
            feature.init.apply(me);
          } catch (e) {
            var name = feature.name || featureKey;
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to initialize feature \"".concat(name, "\": ").concat(e.message, "\nStack: ").concat(e.stack));
            // Its a static list, so it will remove it from all parts of code.
            // Best option for now, because if we don't delete the item, it will use it as null which cause to error in other parts of code
            delete featureList[featureKey]; // Remove the feature if it fails initialization
          }
        });
      }
      buildFeaturesInList(this._features.list);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/FeaturesList.js":
/*!*********************************************!*\
  !*** ./src/main/collectors/FeaturesList.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FeaturesList; }
/* harmony export */ });
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events */ "./src/main/collectors/events/index.js");
/* harmony import */ var _static__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./static */ "./src/main/collectors/static/index.js");
/* harmony import */ var _perContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./perContext */ "./src/main/collectors/perContext/index.js");
/* harmony import */ var _misc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./misc */ "./src/main/collectors/misc/index.js");
/* harmony import */ var _static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./static/font/collection/FontConfiguration */ "./src/main/collectors/static/font/collection/FontConfiguration.js");
/* harmony import */ var _events_handlers_JqueryElementsHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events/handlers/JqueryElementsHandler */ "./src/main/collectors/events/handlers/JqueryElementsHandler.js");
/* harmony import */ var _identity_CrossDomainMuidCollector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./identity/CrossDomainMuidCollector */ "./src/main/collectors/identity/CrossDomainMuidCollector.js");
/* harmony import */ var _events_InputEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./events/InputEvents */ "./src/main/collectors/events/InputEvents.js");
/* harmony import */ var _events_CustomInputEvents__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./events/CustomInputEvents */ "./src/main/collectors/events/CustomInputEvents.js");
/* harmony import */ var _events_ClickEvents__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./events/ClickEvents */ "./src/main/collectors/events/ClickEvents.js");
/* harmony import */ var _events_SelectElementEvents__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./events/SelectElementEvents */ "./src/main/collectors/events/SelectElementEvents.js");
/* harmony import */ var _events_FormEvents__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./events/FormEvents */ "./src/main/collectors/events/FormEvents.js");
/* harmony import */ var _static_incognito_PrivateBrowsingDetector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./static/incognito/PrivateBrowsingDetector */ "./src/main/collectors/static/incognito/PrivateBrowsingDetector.js");
/* harmony import */ var _static_incognito_IncognitoDetector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./static/incognito/IncognitoDetector */ "./src/main/collectors/static/incognito/IncognitoDetector.js");
/* harmony import */ var _static_PointerHoverDetector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./static/PointerHoverDetector */ "./src/main/collectors/static/PointerHoverDetector.js");
/* harmony import */ var _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../technicalServices/SiteMapper */ "./src/main/technicalServices/SiteMapper.js");
/* harmony import */ var _perContext_ScriptsRepository__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./perContext/ScriptsRepository */ "./src/main/collectors/perContext/ScriptsRepository.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _services_MutationEmitter__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../services/MutationEmitter */ "./src/main/services/MutationEmitter.js");
/* harmony import */ var _services_StandardInputEventsEmitter__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../services/StandardInputEventsEmitter */ "./src/main/services/StandardInputEventsEmitter.js");
/* harmony import */ var _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../system/EventAggregator */ "./src/main/system/EventAggregator.js");
/* harmony import */ var _services_StandardOnClickEventsEmitter__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../services/StandardOnClickEventsEmitter */ "./src/main/services/StandardOnClickEventsEmitter.js");
/* harmony import */ var _services_StandardOnChangeEventsEmitter__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../services/StandardOnChangeEventsEmitter */ "./src/main/services/StandardOnChangeEventsEmitter.js");
/* harmony import */ var _services_StandardOnFormEventsEmitter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../services/StandardOnFormEventsEmitter */ "./src/main/services/StandardOnFormEventsEmitter.js");
/* harmony import */ var _services_SyntheticMaskInputEventsHandler__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../services/SyntheticMaskInputEventsHandler */ "./src/main/services/SyntheticMaskInputEventsHandler.js");
/* harmony import */ var _services_SyntheticAutotabInputEventsHandler__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../services/SyntheticAutotabInputEventsHandler */ "./src/main/services/SyntheticAutotabInputEventsHandler.js");
/* harmony import */ var _emitters_FocusEventEmitter__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../emitters/FocusEventEmitter */ "./src/main/emitters/FocusEventEmitter.js");
/* harmony import */ var _emitters_BlurEventEmitter__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../emitters/BlurEventEmitter */ "./src/main/emitters/BlurEventEmitter.js");
/* harmony import */ var _emitters_ResizeEventEmitter__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../emitters/ResizeEventEmitter */ "./src/main/emitters/ResizeEventEmitter.js");
/* harmony import */ var _emitters_DOMContentLoadedEventEmitter__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../emitters/DOMContentLoadedEventEmitter */ "./src/main/emitters/DOMContentLoadedEventEmitter.js");
/* harmony import */ var _emitters_VisibilityChangeEventEmitter__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../emitters/VisibilityChangeEventEmitter */ "./src/main/emitters/VisibilityChangeEventEmitter.js");
/* harmony import */ var _emitters_ScrollEventEmitter__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../emitters/ScrollEventEmitter */ "./src/main/emitters/ScrollEventEmitter.js");
/* harmony import */ var _services_WindowMessageEventEmitter__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../services/WindowMessageEventEmitter */ "./src/main/services/WindowMessageEventEmitter.js");
/* harmony import */ var _emitters_DeviceOrientationEventEmitter__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../emitters/DeviceOrientationEventEmitter */ "./src/main/emitters/DeviceOrientationEventEmitter.js");
/* harmony import */ var _emitters_BeforeInstallPromptEventEmitter__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../emitters/BeforeInstallPromptEventEmitter */ "./src/main/emitters/BeforeInstallPromptEventEmitter.js");
/* harmony import */ var _emitters_CutEventEmitter__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../emitters/CutEventEmitter */ "./src/main/emitters/CutEventEmitter.js");
/* harmony import */ var _emitters_CopyEventEmitter__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../emitters/CopyEventEmitter */ "./src/main/emitters/CopyEventEmitter.js");
/* harmony import */ var _emitters_PasteEventEmitter__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../emitters/PasteEventEmitter */ "./src/main/emitters/PasteEventEmitter.js");
/* harmony import */ var _emitters_ElementFocusEventEmitter__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../emitters/ElementFocusEventEmitter */ "./src/main/emitters/ElementFocusEventEmitter.js");
/* harmony import */ var _emitters_ElementBlurEventEmitter__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../emitters/ElementBlurEventEmitter */ "./src/main/emitters/ElementBlurEventEmitter.js");
/* harmony import */ var _services_StandardCustomInputEmitter__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../services/StandardCustomInputEmitter */ "./src/main/services/StandardCustomInputEmitter.js");
/* harmony import */ var _events_LevenshteinDistanceCollector__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./events/LevenshteinDistanceCollector */ "./src/main/collectors/events/LevenshteinDistanceCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }











































var dataCollectors = [{
  name: 'MouseEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.MouseEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.MouseEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.FlutterMouseEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._configurations);
      } else {
        this._features.list.MouseEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.MouseEventCollector(this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._elements, this._dataQ, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'KeyEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.KeyEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.KeyEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.FlutterKeyEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService);
      } else {
        this._features.list.KeyEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.KeyEventCollector(this._configurationRepository, this._utils, this._elements, this._dataQ, this._msgBus, this._sameCharService, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'TouchEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.TouchEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.TouchEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.FlutterTouchEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService);
      } else {
        this._features.list.TouchEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.TouchEventCollector(this._utils, this._elements, this._dataQ, this._msgBus, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'ClipboardEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.ClipboardEventCollector,
  init: function init() {
    return function () {
      var clipboardEventsBuilder = new _events__WEBPACK_IMPORTED_MODULE_0__.ClipboardEventCollector.Builder(this._utils, this._elements, this._dataQ, this._configurations, this._configurationRepository);
      var cutEventEmitter = new _emitters_CutEventEmitter__WEBPACK_IMPORTED_MODULE_36__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var copyEventEmitter = new _emitters_CopyEventEmitter__WEBPACK_IMPORTED_MODULE_37__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var pasteEventEmitter = new _emitters_PasteEventEmitter__WEBPACK_IMPORTED_MODULE_38__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      clipboardEventsBuilder.withMessageBus(this._msgBus).withCutEventEmitter(cutEventEmitter).withCopyEventEmitter(copyEventEmitter).withPasteEventEmitter(pasteEventEmitter);
      this._features.list.ClipboardEvents.instance = clipboardEventsBuilder.build();
    };
  }
}, {
  name: 'ElementEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.ElementEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.ElementEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.FlutterElementEventsCollector(this._msgBus, this._dataQ, this._utils, this._contextMgr, this._maskingService);
      } else {
        var standardInputEventsEmitter = new _services_StandardInputEventsEmitter__WEBPACK_IMPORTED_MODULE_20__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var standardOnClickEventsEmitter = new _services_StandardOnClickEventsEmitter__WEBPACK_IMPORTED_MODULE_22__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var standardOnChangeEventsEmitter = new _services_StandardOnChangeEventsEmitter__WEBPACK_IMPORTED_MODULE_23__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var elementFocusEventEmitter = new _emitters_ElementFocusEventEmitter__WEBPACK_IMPORTED_MODULE_39__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var elementBlurEventEmitter = new _emitters_ElementBlurEventEmitter__WEBPACK_IMPORTED_MODULE_40__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var standardOnFormEventsEmitter = new _services_StandardOnFormEventsEmitter__WEBPACK_IMPORTED_MODULE_24__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var standardCustomInputEmitter = new _services_StandardCustomInputEmitter__WEBPACK_IMPORTED_MODULE_41__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var jQueryElementListenerSiteMapper = new _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_15__["default"](MutationObserver, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], 'jQueryElementListenerConfig', null, false);
        var jqueryElementsHandler = (0,_events_handlers_JqueryElementsHandler__WEBPACK_IMPORTED_MODULE_5__["default"])(standardInputEventsEmitter, standardOnClickEventsEmitter, standardOnChangeEventsEmitter, standardOnFormEventsEmitter);
        var elementEventsBuilder = new _events__WEBPACK_IMPORTED_MODULE_0__.ElementEventCollector.Builder(this._configurationRepository, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._elements, this._dataQ, this._configurations);
        var mutationEmitter = new _services_MutationEmitter__WEBPACK_IMPORTED_MODULE_19__["default"](this._msgBus);
        var syntheticMaskInputEventsHandler = new _services_SyntheticMaskInputEventsHandler__WEBPACK_IMPORTED_MODULE_25__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        var syntheticAutotabInputEventsHandler = new _services_SyntheticAutotabInputEventsHandler__WEBPACK_IMPORTED_MODULE_26__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"], this._utils);
        elementEventsBuilder.withjQueryElementListenerSiteMapper(jQueryElementListenerSiteMapper);
        elementEventsBuilder.withMessageBus(this._msgBus);
        elementEventsBuilder.withMutationEmitter(mutationEmitter);
        elementEventsBuilder.withjQueryElementsHandler(jqueryElementsHandler);
        elementEventsBuilder.withInputEvents(_events_InputEvents__WEBPACK_IMPORTED_MODULE_7__["default"], _events_InputEvents__WEBPACK_IMPORTED_MODULE_7__.inputSelectors, this._maskingService, this._categoryService);
        elementEventsBuilder.withStandardInputEventsEmitter(standardInputEventsEmitter);
        elementEventsBuilder.withSyntheticMaskInputEventsHandler(syntheticMaskInputEventsHandler);
        elementEventsBuilder.withSyntheticAutotabInputEventsHandler(syntheticAutotabInputEventsHandler);
        elementEventsBuilder.withClickEvents(_events_ClickEvents__WEBPACK_IMPORTED_MODULE_9__["default"], _events_ClickEvents__WEBPACK_IMPORTED_MODULE_9__.onClickSelectors);
        elementEventsBuilder.withStandardOnClickEventsEmitter(standardOnClickEventsEmitter);
        elementEventsBuilder.withSelectElementEvents(_events_SelectElementEvents__WEBPACK_IMPORTED_MODULE_10__["default"], _events_SelectElementEvents__WEBPACK_IMPORTED_MODULE_10__.onSelectSelectors);
        elementEventsBuilder.withElementFocusEventsEmitter(elementFocusEventEmitter);
        elementEventsBuilder.withElementBlurEventsEmitter(elementBlurEventEmitter);
        elementEventsBuilder.withStandardOnChangeEventsEmitter(standardOnChangeEventsEmitter);
        elementEventsBuilder.withFormEvents(_events_FormEvents__WEBPACK_IMPORTED_MODULE_11__["default"], _events_FormEvents__WEBPACK_IMPORTED_MODULE_11__.onFormSelectors);
        elementEventsBuilder.withStandardOnFormEventsEmitter(standardOnFormEventsEmitter);
        elementEventsBuilder.withCustomInputEventEmitter(_events_CustomInputEvents__WEBPACK_IMPORTED_MODULE_8__["default"], standardCustomInputEmitter);
        this._features.list.ElementEvents.instance = elementEventsBuilder.build();
      }
    };
  }
}, {
  name: 'WindowEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.WindowEventCollector,
  init: function init() {
    return function () {
      var windowEventCollectorBuilder = new _events__WEBPACK_IMPORTED_MODULE_0__.WindowEventCollector.Builder(this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_18__["default"], this._dataQ);
      var focusEventEmitter = new _emitters_FocusEventEmitter__WEBPACK_IMPORTED_MODULE_27__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var blurEventEmitter = new _emitters_BlurEventEmitter__WEBPACK_IMPORTED_MODULE_28__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var resizeEventEmitter = new _emitters_ResizeEventEmitter__WEBPACK_IMPORTED_MODULE_29__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var domContentLoadedEventEmitter = new _emitters_DOMContentLoadedEventEmitter__WEBPACK_IMPORTED_MODULE_30__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var visibilityChangeEventEmitter = new _emitters_VisibilityChangeEventEmitter__WEBPACK_IMPORTED_MODULE_31__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      var scrollEventEmitter = new _emitters_ScrollEventEmitter__WEBPACK_IMPORTED_MODULE_32__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      windowEventCollectorBuilder.withMessageBus(this._msgBus);
      windowEventCollectorBuilder.withFocusEventEmitter(focusEventEmitter);
      windowEventCollectorBuilder.withBlurEventEmitter(blurEventEmitter);
      windowEventCollectorBuilder.withResizeEventEmitter(resizeEventEmitter);
      windowEventCollectorBuilder.withDOMContentLoadedEventEmitter(domContentLoadedEventEmitter);
      windowEventCollectorBuilder.withVisibilityChangeEventEmitter(visibilityChangeEventEmitter);
      windowEventCollectorBuilder.withScrollEventEmitter(scrollEventEmitter);
      this._features.list.WindowEvents.instance = windowEventCollectorBuilder.build();
    };
  }
}, {
  name: 'MetadataCollector',
  className: _misc__WEBPACK_IMPORTED_MODULE_3__.MetadataCollector,
  init: function init() {
    return function () {
      var metadataSiteMapper = new _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_15__["default"](MutationObserver, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], 'metadataConfig', null, false);
      this._features.list.MetadataCollector.instance = new _misc__WEBPACK_IMPORTED_MODULE_3__.MetadataCollector(this._configurationRepository, this._dataQ, metadataSiteMapper, this._utils);
    };
  }
}, {
  name: 'TabsEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.TabEventCollector,
  init: function init() {
    return function () {
      this._features.list.TabsEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.TabEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'DoNotTrack',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.DoNotTrackFeature,
  init: function init() {
    return function () {
      this._features.list.DoNotTrack.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.DoNotTrackFeature(this._dataQ);
    };
  }
}, {
  name: 'BrowserProps',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.BrowserPropsFeature,
  init: function init() {
    return function () {
      this._features.list.BrowserProps.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.BrowserPropsFeature(this._dataQ, _static_PointerHoverDetector__WEBPACK_IMPORTED_MODULE_14__["default"], this._utils, this._configurationRepository, this._configurations);
    };
  }
}, {
  name: 'IsPrivateBrowsing',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.IsPrivateBrowsingFeature,
  init: function init() {
    return function () {
      var privateBrowsingDetector = new _static_incognito_PrivateBrowsingDetector__WEBPACK_IMPORTED_MODULE_12__["default"]();
      var incognitoDetector = new _static_incognito_IncognitoDetector__WEBPACK_IMPORTED_MODULE_13__["default"]();
      this._features.list.IsPrivateBrowsing.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.IsPrivateBrowsingFeature(this._dataQ, privateBrowsingDetector, incognitoDetector, this._devDebugDataQueue, this._configurationRepository);
    };
  }
}, {
  name: 'FontsDetectionFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.FontCollectionFeature,
  init: function init() {
    return function () {
      var fontConfigManager = new _static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_4__["default"](this._configurationRepository);
      this._features.list.FontsDetectionFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.FontCollectionFeature({
        utils: this._utils,
        domUtils: _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"],
        dataQueue: this._dataQ,
        fontConfig: fontConfigManager,
        v1Collector: null,
        v2Collector: null,
        fontTimingService: this._fontTimingService
      });
    };
  }
}, {
  name: 'GraphicDetectFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.GraphicDetectFeature,
  init: function init() {
    return function () {
      this._features.list.GraphicDetectFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.GraphicDetectFeature(this._dataQ, this._configurations);
    };
  }
}, {
  name: 'BrowserDetect',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.BrowserDetect,
  init: function init() {
    return function () {
      this._features.list.BrowserDetect.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.BrowserDetect(this._dataQ);
    };
  }
}, {
  name: 'FilesFeature',
  className: _misc__WEBPACK_IMPORTED_MODULE_3__.FilesFeature,
  init: function init() {
    return function () {
      this._features.list.FilesFeature.instance = new _misc__WEBPACK_IMPORTED_MODULE_3__.FilesFeature(this._configurationRepository, this._utils, this._sessionService, this._muidService, this._cidCache);
    };
  }
}, {
  name: 'UserPermissions',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.UserPermissions,
  init: function init() {
    return function () {
      this._features.list.UserPermissions.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.UserPermissions(this._dataQ);
    };
  }
}, {
  name: 'MediaDevicesFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.MediaDevicesFeature,
  init: function init() {
    return function () {
      this._features.list.MediaDevicesFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.MediaDevicesFeature(this._dataQ);
    };
  }
}, {
  name: 'ContextPropsFeature',
  className: _perContext__WEBPACK_IMPORTED_MODULE_2__.ContextPropsFeature,
  init: function init() {
    return function () {
      this._features.list.ContextPropsFeature.instance = new _perContext__WEBPACK_IMPORTED_MODULE_2__.ContextPropsFeature(this._dataQ, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._perfMonitor, this._configurationRepository);
    };
  }
}, {
  name: 'GfxRenderingFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.GfxRenderingFeature,
  init: function init() {
    return function () {
      this._features.list.GfxRenderingFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.GfxRenderingFeature(this._dataQ, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_18__["default"]);
    };
  }
}, {
  name: 'AudioDetectFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.AudioDetectFeature,
  init: function init() {
    return function () {
      this._features.list.AudioDetectFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.AudioDetectFeature(this._dataQ, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_18__["default"]);
    };
  }
}, {
  name: 'AudioDetectFeature2',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.AudioDetectFeature2,
  init: function init() {
    return function () {
      this._features.list.AudioDetectFeature2.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.AudioDetectFeature2(this._devDebugDataQueue, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_18__["default"]);
    };
  }
}, {
  name: 'EncryptedMuidFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.EncryptedMuidFeature,
  init: function init() {
    return function () {
      this._features.list.EncryptedMuidFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.EncryptedMuidFeature(this._devDebugDataQueue, this._muidEncryptedService);
    };
  }
}, {
  name: 'ScriptsFeature',
  className: _perContext__WEBPACK_IMPORTED_MODULE_2__.ScriptsFeature,
  init: function init() {
    return function () {
      var scriptsRepository = new _perContext_ScriptsRepository__WEBPACK_IMPORTED_MODULE_16__["default"](this._utils);
      this._features.list.ScriptsFeature.instance = new _perContext__WEBPACK_IMPORTED_MODULE_2__.ScriptsFeature(this._dataQ, scriptsRepository);
    };
  }
}, {
  name: 'AccelerometerEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.AccelerometerEventCollector,
  init: function init() {
    return function () {
      this._features.list.AccelerometerEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.AccelerometerEventCollector(this._configurationRepository, this._utils, this._sensorDataQ);
    };
  }
}, {
  name: 'PinchZoomEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.PinchZoomEventCollector,
  init: function init() {
    return function () {
      this._features.list.PinchZoomEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.PinchZoomEventCollector(this._utils, this._elements, this._dataQ, this._msgBus, this._configurations);
    };
  }
}, {
  name: 'ScriptEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.ScriptEventCollector,
  init: function init() {
    return function () {
      this._features.list.ScriptEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.ScriptEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'NetInfoEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.NetInfoEventCollector,
  init: function init() {
    return function () {
      this._features.list.NetInfoEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.NetInfoEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'MainThreadBlockingEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.MainThreadBlockingCollector,
  init: function init() {
    return function () {
      this._features.list.MainThreadBlockingEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.MainThreadBlockingCollector(this._configurationRepository, this._utils, this._dataQ);
    };
  }
}, {
  name: 'DeviceOrientationCollector',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.DeviceOrientationCollector,
  init: function init() {
    return function () {
      this._features.list.DeviceOrientationCollector.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.DeviceOrientationCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'TapEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.TapEventCollector,
  init: function init() {
    return function () {
      this._features.list.TapEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.TapEventCollector(this._configurationRepository, this._utils, this._elements, this._dataQ, this._maskingService, this._configurations);
    };
  }
}, {
  name: 'LocationEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.LocationCollector,
  init: function init() {
    return function () {
      this._features.list.LocationEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.LocationCollector(this._dataQ, this._utils, this._configurationRepository);
    };
  }
}, {
  name: 'StorageEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.StorageEventCollector,
  init: function init() {
    return function () {
      this._features.list.StorageEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.StorageEventCollector(this._utils, this._elements, this._dataQ, this._msgBus);
    };
  }
}, {
  name: 'PrintEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.PrintEventCollector,
  init: function init() {
    return function () {
      this._features.list.PrintEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.PrintEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'LightSensorEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.LightSensorEventCollector,
  init: function init() {
    return function () {
      this._features.list.LightSensorEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.LightSensorEventCollector(this._dataQ, this._utils, this._configurationRepository);
    };
  }
}, {
  name: 'CrossDomain',
  className: _identity_CrossDomainMuidCollector__WEBPACK_IMPORTED_MODULE_6__["default"],
  init: function init() {
    return function () {
      var crossDomainBuilder = new _identity_CrossDomainMuidCollector__WEBPACK_IMPORTED_MODULE_6__["default"].Builder(this._configurationRepository, this._dataQ, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], _identity_CrossDomainMuidCollector__WEBPACK_IMPORTED_MODULE_6__.CrossmuidEventType);
      var windowMessageEventEmitter = new _services_WindowMessageEventEmitter__WEBPACK_IMPORTED_MODULE_33__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      crossDomainBuilder.withMessageBus(this._msgBus);
      crossDomainBuilder.withWindowMessageEventEmitter(windowMessageEventEmitter);
      this._features.list.CrossDomain.instance = crossDomainBuilder.build();
    };
  }
}, {
  name: 'OrientationEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.OrientationEventCollector,
  init: function init() {
    return function () {
      var deviceOrientationEventEmitter = new _emitters_DeviceOrientationEventEmitter__WEBPACK_IMPORTED_MODULE_34__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      this._features.list.OrientationEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.OrientationEventCollector(this._configurationRepository, this._utils, this._sensorDataQ, this._msgBus, deviceOrientationEventEmitter);
    };
  }
}, {
  name: 'BeforeInstallPromptEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.BeforeInstallPromptEventCollector,
  init: function init() {
    return function () {
      var beforeInstallPromptEventEmitter = new _emitters_BeforeInstallPromptEventEmitter__WEBPACK_IMPORTED_MODULE_35__["default"](this._msgBus, _system_EventAggregator__WEBPACK_IMPORTED_MODULE_21__["default"]);
      this._features.list.BeforeInstallPromptEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.BeforeInstallPromptEventCollector(this._dataQ, this._utils, this._msgBus, beforeInstallPromptEventEmitter);
    };
  }
}, {
  name: 'LevenshteinDistanceEvents',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.LevenshteinDistanceCollector,
  init: function init() {
    return function () {
      this._features.list.LevenshteinDistanceEvents.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.LevenshteinDistanceCollector(this._utils, this._configurationRepository, this._dataQ, this._msgBus, this._wasmModuleLoader, this._categoryService);
    };
  }
}, {
  name: 'Navigator',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.NavigatorFeature,
  init: function init() {
    return function () {
      this._features.list.Navigator.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.NavigatorFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'ClientHints',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.ClientHintsCollector,
  init: function init() {
    return function () {
      this._features.list.ClientHints.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.ClientHintsCollector(this._dataQ);
    };
  }
}, {
  name: 'KeyboardLayoutFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.KeyboardLayoutFeature,
  init: function init() {
    return function () {
      this._features.list.KeyboardLayoutFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.KeyboardLayoutFeature(this._dataQ);
    };
  }
}, {
  name: 'StorageFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.StorageFeature,
  init: function init() {
    return function () {
      this._features.list.StorageFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.StorageFeature(this._dataQ);
    };
  }
}, {
  name: 'BatteryStatusCollector',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.BatteryStatusCollector,
  init: function init() {
    return function () {
      this._features.list.BatteryStatusCollector.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.BatteryStatusCollector(this._dataQ, this._utils);
    };
  }
}, {
  name: 'FontEmojiFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.FontEmojiFeature,
  init: function init() {
    return function () {
      this._features.list.FontEmojiFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.FontEmojiFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'FontMathFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.FontMathFeature,
  init: function init() {
    return function () {
      this._features.list.FontMathFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.FontMathFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'FontWidthFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.FontWidthFeature,
  init: function init() {
    return function () {
      this._features.list.FontWidthFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.FontWidthFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'ScreenHighResFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.ScreenHighResFeature,
  init: function init() {
    return function () {
      this._features.list.ScreenHighResFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.ScreenHighResFeature(this._dataQ);
    };
  }
}, {
  name: 'BrowserExtensionEvents',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.BrowserExtensionsDomCollector,
  init: function init() {
    return function () {
      this._features.list.BrowserExtensionEvents.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.BrowserExtensionsDomCollector(this._configurationRepository, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._dataQ);
    };
  }
}, {
  name: 'BrowserExtensionsUrlCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.BrowserExtensionsUrlCollector,
  init: function init() {
    return function () {
      this._features.list.BrowserExtensionsUrlCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.BrowserExtensionsUrlCollector(this._configurationRepository, this._utils, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_17__["default"], this._devDebugDataQueue);
    };
  }
}, {
  name: 'AdblockerListsCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.AdblockerListsCollector,
  init: function init() {
    return function () {
      this._features.list.AdblockerListsCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.AdblockerListsCollector(this._dataQ);
    };
  }
}, {
  name: 'WebglCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.WebglCollector,
  init: function init() {
    return function () {
      this._features.list.WebglCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.WebglCollector(this._dataQ);
    };
  }
}, {
  name: 'DRMDataCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.DRMDataCollector,
  init: function init() {
    return function () {
      this._features.list.DRMDataCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.DRMDataCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'WebRTCDataCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.WebRTCDataCollector,
  init: function init() {
    return function () {
      this._features.list.WebRTCDataCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.WebRTCDataCollector(this._dataQ);
    };
  }
}, {
  name: 'SpeechVoiceCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.SpeechVoiceCollector,
  init: function init() {
    return function () {
      this._features.list.SpeechVoiceCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.SpeechVoiceCollector(this._dataQ);
    };
  }
}, {
  name: 'CPUDataCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.CPUDataCollector,
  init: function init() {
    return function () {
      this._features.list.CPUDataCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.CPUDataCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'HeapCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.HeapCollector,
  init: function init() {
    return function () {
      this._features.list.HeapCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.HeapCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'TimingCollector',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.TimingCollector,
  init: function init() {
    return function () {
      this._features.list.TimingCollector.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.TimingCollector(this._devDebugDataQueue, this._fontTimingService);
    };
  }
}, {
  name: 'AgenticBrowserDetectFeature',
  className: _static__WEBPACK_IMPORTED_MODULE_1__.AgenticBrowserDetectFeature,
  init: function init() {
    return function () {
      this._features.list.AgenticBrowserDetectFeature.instance = new _static__WEBPACK_IMPORTED_MODULE_1__.AgenticBrowserDetectFeature(this._dataQ, this._fontDetectorProvider, this._configurationRepository);
    };
  }
}, {
  name: 'AgenticDomInjectionCollector',
  className: _events__WEBPACK_IMPORTED_MODULE_0__.AgenticDomInjectionCollector,
  init: function init() {
    return function () {
      this._features.list.AgenticDomInjectionCollector.instance = new _events__WEBPACK_IMPORTED_MODULE_0__.AgenticDomInjectionCollector(this._dataQ, this._msgBus, this._utils, this._configurationRepository, this._agenticDomInjectionDetector);
    };
  }
}];
var FeaturesList = /*#__PURE__*/function () {
  function FeaturesList() {
    _classCallCheck(this, FeaturesList);
  }
  return _createClass(FeaturesList, null, [{
    key: "register",
    value: function register() {
      var _this = this;
      FeaturesList.list = {};
      dataCollectors.forEach(function (feature) {
        _this._addFeature(feature);
      });
    }
  }, {
    key: "registerLeanFeatures",
    value: function registerLeanFeatures() {
      var _this2 = this;
      FeaturesList.list = {};
      dataCollectors.forEach(function (feature) {
        if (feature.className.getDefaultSettings().runInLean) {
          _this2._addFeature(feature);
        }
      });
    }
  }, {
    key: "getDefaultFeatures",
    value: function getDefaultFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.isDefault;
      });
    }
  }, {
    key: "getPerContextFeatures",
    value: function getPerContextFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.shouldRunPerContext;
      });
    }
  }, {
    key: "getPerSessionFeatures",
    value: function getPerSessionFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.shouldRunPerSession;
      });
    }
  }, {
    key: "getNonDefaultFeatures",
    value: function getNonDefaultFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return !feature.isDefault && !feature.shouldRunPerContext && !feature.shouldRunPerSession;
      });
    }
  }, {
    key: "getFeaturesByCondition",
    value: function getFeaturesByCondition(condition) {
      var features = {};
      Object.keys(FeaturesList.list).forEach(function (featureKey) {
        var feature = FeaturesList.list[featureKey];
        if (condition(feature)) {
          features[featureKey] = feature;
        }
      });
      return features;
    }
  }, {
    key: "_addFeature",
    value: function _addFeature(feature) {
      var collectorStaticSetup = feature.className.getDefaultSettings();

      // Creating a new object reference to ensure that multiple instances of the same class do not share or modify each other's data.
      var collectorSetup = _objectSpread({}, collectorStaticSetup);
      var name = feature.name;
      collectorSetup.init = feature.init();
      FeaturesList.list[name] = collectorSetup;
    }
  }]);
}();
_defineProperty(FeaturesList, "list", void 0);


/***/ }),

/***/ "./src/main/collectors/SensorGateKeeper.js":
/*!*************************************************!*\
  !*** ./src/main/collectors/SensorGateKeeper.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SensorGateKeeper; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var SensorGateKeeper = /*#__PURE__*/function () {
  function SensorGateKeeper(sessionInfoService, configurationRepository) {
    _classCallCheck(this, SensorGateKeeper);
    this.configurationRepository = configurationRepository;
    this.sessionInfoService = sessionInfoService;
    this.isMotionOnSessionStart = this.configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.isMotionOnSessionStart);
    this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.motionPaddingOnSessionStartMSec);
  }
  return _createClass(SensorGateKeeper, [{
    key: "configure",
    value: function configure() {
      this.isMotionOnSessionStart = this.configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.isMotionOnSessionStart);
      this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.motionPaddingOnSessionStartMSec);
      if (this.isMotionOnSessionStart) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("Motion on session start is enabled, collecting motion events for ".concat(this.motionPaddingOnSessionStartMSec / 1000, " seconds."));
      }
    }
  }, {
    key: "isOpen",
    value: function isOpen() {
      return this.isMotionOnSessionStart && _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].dateNow() - this.motionPaddingOnSessionStartMSec < this.sessionInfoService.getStartTime();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/events/AccelerometerEventCollector.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/events/AccelerometerEventCollector.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccelerometerEventStructure: function() { return /* binding */ AccelerometerEventStructure; },
/* harmony export */   GyroEventStructure: function() { return /* binding */ GyroEventStructure; },
/* harmony export */   PERMISSION_STATE: function() { return /* binding */ PERMISSION_STATE; },
/* harmony export */   SENSOR_TYPE: function() { return /* binding */ SENSOR_TYPE; },
/* harmony export */   "default": function() { return /* binding */ AccelerometerEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




// Constants for configuration and event handling
var DEFAULT_SAMPLE_PERIOD = 0;
var DEFAULT_DECIMAL_PRECISION = 4;
var DEFAULT_INVALID_VALUE = -1;
var DEFAULT_GYRO_VALUE = 0;

// Permission states
var PERMISSION_STATE = {
  GRANTED: 'granted',
  DENIED: 'denied',
  PROMPT: 'prompt'
};

// Sensor types
var SENSOR_TYPE = {
  ACCELEROMETER: 'accelerometer',
  GYROSCOPE: 'gyroscope'
};
var featureSettings = {
  configKey: 'isAccelerometerEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var AccelerometerEventStructure = ['eventSequence', 'timestamp', 'x', 'y', 'z'];
var GyroEventStructure = ['eventSequence', 'timestamp', 'absolute', 'alpha', 'beta', 'gamma'];

/**
 * Collects accelerometer and gyroscope data from device motion events
 * Handles permission checks and data processing for motion sensors
 */
var AccelerometerEventCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {Object} configurationRepository - Repository for configuration values
   * @param {Object} utils - Utility functions
   * @param {Object} dataQueue - Queue for storing collected data
   * @param {Object} [navigatorObj=window.navigator] - Navigator object (for testing)
   * @param {Object} [windowObj=window] - Window object (for testing)
   */
  function AccelerometerEventCollector(configurationRepository, utils, dataQueue) {
    var _this;
    var navigatorObj = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : window.navigator;
    var windowObj = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : window;
    _classCallCheck(this, AccelerometerEventCollector);
    _this = _callSuper(this, AccelerometerEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._storageUtils = _this._utils.StorageUtils;
    _this._navigator = navigatorObj;
    _this._window = windowObj;

    // Initialize configuration values
    _this._samplePeriod = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.accelerometerEventsSamplePeriod) || DEFAULT_SAMPLE_PERIOD;
    _this._samplePeriodGyro = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.gyroEventsSamplePeriod) || DEFAULT_SAMPLE_PERIOD;

    // Initialize state tracking
    _this._lastAccelerometerData = {
      x: 0,
      y: 0,
      z: 0,
      time: 0
    };
    _this._lastGyroData = {
      alpha: 0,
      beta: 0,
      gamma: 0,
      time: 0
    };

    // Initialize permission states
    _this._hasAccelerometerPermission = false;
    _this._hasGyroscopePermission = false;

    // Bind event handler
    _this._onAccelerometerventFunc = _this._onAccelerometerEvent.bind(_this);
    return _this;
  }

  /**
   * Checks and updates sensor permissions
   * Handles two cases:
   * 1. Browsers without Permissions API - defaults to allowed access
   * 2. Browsers with Permissions API - checks actual permissions
   * Each permission is checked independently to prevent one failure from affecting the other
   * @private
   * @returns {Promise<void>}
   */
  _inherits(AccelerometerEventCollector, _DataCollector);
  return _createClass(AccelerometerEventCollector, [{
    key: "_checkPermissions",
    value: (function () {
      var _checkPermissions2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$_navigator$perm;
        var accelerometerPermission, gyroscopePermission;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if ((_this$_navigator$perm = this._navigator.permissions) !== null && _this$_navigator$perm !== void 0 && _this$_navigator$perm.query) {
                _context.next = 5;
                break;
              }
              // Fallback for browsers without Permissions API
              this._hasAccelerometerPermission = true;
              this._hasGyroscopePermission = true;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Permissions API not available, defaulting to allowed access');
              return _context.abrupt("return");
            case 5:
              _context.prev = 5;
              _context.next = 8;
              return this._navigator.permissions.query({
                name: SENSOR_TYPE.ACCELEROMETER
              });
            case 8:
              accelerometerPermission = _context.sent;
              this._hasAccelerometerPermission = accelerometerPermission.state === PERMISSION_STATE.GRANTED;
              _context.next = 16;
              break;
            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](5);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Failed to check accelerometer permission:', _context.t0);
              this._hasAccelerometerPermission = true;
            case 16:
              _context.prev = 16;
              _context.next = 19;
              return this._navigator.permissions.query({
                name: SENSOR_TYPE.GYROSCOPE
              });
            case 19:
              gyroscopePermission = _context.sent;
              this._hasGyroscopePermission = gyroscopePermission.state === PERMISSION_STATE.GRANTED;
              _context.next = 27;
              break;
            case 23:
              _context.prev = 23;
              _context.t1 = _context["catch"](16);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Failed to check gyroscope permission:', _context.t1);
              this._hasGyroscopePermission = true;
            case 27:
              if (!this._hasAccelerometerPermission && !this._hasGyroscopePermission) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Both accelerometer and gyroscope permissions are denied');
              }
            case 28:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[5, 12], [16, 23]]);
      }));
      function _checkPermissions() {
        return _checkPermissions2.apply(this, arguments);
      }
      return _checkPermissions;
    }()
    /**
     * Processes accelerometer data from device motion event
     * @private
     * @param {Object} acceleration - Acceleration data
     * @param {number} time - Current timestamp
     */
    )
  }, {
    key: "_processAccelerometerData",
    value: function _processAccelerometerData(acceleration, time) {
      if (!acceleration || time - this._lastAccelerometerData.time <= this._samplePeriod) {
        return;
      }
      var x = this._utils.isUndefinedNull(acceleration.x) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.x, DEFAULT_DECIMAL_PRECISION);
      var y = this._utils.isUndefinedNull(acceleration.y) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.y, DEFAULT_DECIMAL_PRECISION);
      var z = this._utils.isUndefinedNull(acceleration.z) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.z, DEFAULT_DECIMAL_PRECISION);
      if (x !== this._lastAccelerometerData.x || y !== this._lastAccelerometerData.y || z !== this._lastAccelerometerData.z) {
        var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
        this._lastAccelerometerData = {
          x: x,
          y: y,
          z: z,
          time: time
        };
        this._dataQueue.addToQueue('accelerometer_events', [null, eventSeq, time, x, y, z]);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].isDebug() && _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Accelerometer data: timestamp:".concat(time, " x,y,z:").concat(x, ",").concat(y, ",").concat(z));
      }
    }

    /**
     * Processes gyroscope data from device motion event
     * @private
     * @param {Object} rotationRate - Rotation rate data
     * @param {boolean} absolute - Whether rotation is absolute
     * @param {number} time - Current timestamp
     */
  }, {
    key: "_processGyroData",
    value: function _processGyroData(rotationRate, absolute, time) {
      if (!rotationRate || time - this._lastGyroData.time <= this._samplePeriodGyro) {
        return;
      }
      var alpha = this._utils.isUndefinedNull(rotationRate.alpha) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.alpha, DEFAULT_DECIMAL_PRECISION);
      var beta = this._utils.isUndefinedNull(rotationRate.beta) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.beta, DEFAULT_DECIMAL_PRECISION);
      var gamma = this._utils.isUndefinedNull(rotationRate.gamma) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.gamma, DEFAULT_DECIMAL_PRECISION);
      if (alpha !== this._lastGyroData.alpha || beta !== this._lastGyroData.beta || gamma !== this._lastGyroData.gamma) {
        var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
        this._lastGyroData = {
          alpha: alpha,
          beta: beta,
          gamma: gamma,
          time: time
        };
        this._dataQueue.addToQueue('gyro_events', [null, eventSeq, time, absolute, alpha, beta, gamma]);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].isDebug() && _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Gyro data: timestamp:".concat(time, " alpha,beta,gamma:").concat(alpha, ",").concat(beta, ",").concat(gamma));
      }
    }

    /**
     * Handles device motion events
     * @private
     * @param {DeviceMotionEvent} e - Device motion event
     * @returns {boolean}
     */
  }, {
    key: "_onAccelerometerEvent",
    value: function _onAccelerometerEvent(e) {
      if (!e) {
        return true;
      }
      var time = this._utils.dateNow();
      if (this._hasAccelerometerPermission && e.accelerationIncludingGravity) {
        this._processAccelerometerData(e.accelerationIncludingGravity, time);
      }
      if (this._hasGyroscopePermission && e.rotationRate) {
        this._processGyroData(e.rotationRate, e.absolute || false, time);
      }
      return true;
    }

    /**
     * Starts collecting device motion data
     * @returns {Promise<void>}
     */
  }, {
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (this._window.DeviceMotionEvent) {
                _context2.next = 3;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('DeviceMotionEvent not supported in this environment');
              return _context2.abrupt("return");
            case 3:
              _context2.next = 5;
              return this._checkPermissions();
            case 5:
              if (this._hasAccelerometerPermission || this._hasGyroscopePermission) {
                this._utils.addEventListener(this._window, 'devicemotion', this._onAccelerometerventFunc);
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Device motion event listener added successfully');
              } else {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Device motion event listener not added due to missing permissions');
              }
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops collecting device motion data
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._window.DeviceMotionEvent) {
        this._utils.removeEventListener(this._window, 'devicemotion', this._onAccelerometerventFunc);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Device motion event listener removed');
      }
    }

    /**
     * Updates feature configuration
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var newSamplePeriod = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.accelerometerEventsSamplePeriod);
      var newSamplePeriodGyro = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.gyroEventsSamplePeriod);
      if (newSamplePeriod !== undefined) {
        this._samplePeriod = newSamplePeriod;
      }
      if (newSamplePeriodGyro !== undefined) {
        this._samplePeriodGyro = newSamplePeriodGyro;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Updated sample periods - Accelerometer: ".concat(this._samplePeriod, ", Gyro: ").concat(this._samplePeriodGyro));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/AgenticDomInjectionCollector.js":
/*!********************************************************************!*\
  !*** ./src/main/collectors/events/AgenticDomInjectionCollector.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomInjectionEventType: function() { return /* binding */ DomInjectionEventType; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ AgenticDomInjectionCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_agenticDomInjection_AgenticDomInjectionDetector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/agenticDomInjection/AgenticDomInjectionDetector */ "./src/main/technicalServices/agenticDomInjection/AgenticDomInjectionDetector.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






/**
 * AgenticDomInjectionCollector
 *
 * Purpose:
 * - Detect short-lived ("blink") DOM injections that match known agent overlay signatures.
 *
 * How it works:
 * - Listens to MessageBus mutation events:
 *   - MessageBusEventType.MutationAddedNodes
 *   - MessageBusEventType.MutationRemovedNodes
 * - When a matching element is ADDED, store its `performance.now()` timestamp in a WeakMap.
 * - When the same element is REMOVED, compute duration = now - addedAt.
 * - If duration <= `agenticDomInjectionBlinkThresholdMs`, emit a blink event.
 *
 * Output:
 * - Enqueues to `agentic_dom_injection_events` with `EventStructure`:
 *   [eventSequence, timestamp, eventType, indicatorType, blinkDurationMs]
 *
 * Configuration:
 * - `isAgenticDomInjectionFeature`: enable/disable this collector.
 * - `agenticDomInjectionBlinkThresholdMs`: max blink duration (ms) to count as injection.
 */
var featureSettings = {
  configKey: 'isAgenticDomInjectionFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var DEFAULT_BLINK_THRESHOLD_MS = 100;
var DomInjectionEventType = {
  blink: 0
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'indicatorType', 'blinkDurationMs'];
var AgenticDomInjectionCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQueue
   * @param {MessageBus} messageBus
   * @param {CDUtils} utils
   * @param {ConfigurationRepository} configurationRepository
   * @param {AgenticDomInjectionDetector} detector
   */
  function AgenticDomInjectionCollector(dataQueue, messageBus, utils, configurationRepository, detector) {
    var _this;
    _classCallCheck(this, AgenticDomInjectionCollector);
    _this = _callSuper(this, AgenticDomInjectionCollector);
    _defineProperty(_this, "startFeature", function () {
      try {
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.MutationAddedNodes, _this._onNodesAdded);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.MutationRemovedNodes, _this._onNodesRemoved);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed starting AgenticDomInjectionCollector. msg: ".concat(err.message), err);
      }
    });
    _defineProperty(_this, "stopFeature", function () {
      try {
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.MutationAddedNodes, _this._onNodesAdded);
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.MutationRemovedNodes, _this._onNodesRemoved);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed stopping AgenticDomInjectionCollector. msg: ".concat(err.message), err);
      }
    });
    _defineProperty(_this, "_onNodesAdded", function (event) {
      var nowPerf = performance.now();
      var nodes = event === null || event === void 0 ? void 0 : event.addedNodes;
      if (!nodes || !nodes.length) return;
      for (var i = 0; i < nodes.length; i++) {
        var el = nodes[i];
        var indicatorType = _this._detector.detect(el);
        if (indicatorType === _technicalServices_agenticDomInjection_AgenticDomInjectionDetector__WEBPACK_IMPORTED_MODULE_3__.DomInjectionIndicatorType.unknown) continue;
        _this._indicatorAddTimes.set(el, {
          t: nowPerf,
          indicatorType: indicatorType
        });
      }
    });
    _defineProperty(_this, "_onNodesRemoved", function (event) {
      var nowPerf = performance.now();
      var nodes = event === null || event === void 0 ? void 0 : event.removedNodes;
      if (!nodes || !nodes.length) return;
      for (var i = 0; i < nodes.length; i++) {
        var el = nodes[i];
        var rec = _this._indicatorAddTimes.get(el);
        if (!rec) continue;
        var duration = nowPerf - rec.t;
        _this._indicatorAddTimes["delete"](el);
        if (duration >= 0 && duration <= _this._blinkThresholdMs) {
          _this._sendBlinkEvent(rec.indicatorType, duration);
        }
      }
    });
    _this._dataQueue = dataQueue;
    _this._messageBus = messageBus;
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._blinkThresholdMs = _this._getBlinkThresholdMs();
    _this._detector = detector;

    // track elements that are added+removed quickly ("blink") using WeakMap.
    _this._indicatorAddTimes = new WeakMap(); // Element -> { t: number, indicatorType: number }
    return _this;
  }
  _inherits(AgenticDomInjectionCollector, _DataCollector);
  return _createClass(AgenticDomInjectionCollector, [{
    key: "_sendBlinkEvent",
    value: function _sendBlinkEvent(indicatorType, blinkDurationMs) {
      try {
        var eventSequence = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        var timestamp = this.getEventTimestamp();
        this._dataQueue.addToQueue('agentic_dom_injection_events', this._utils.convertToArrayByMap(EventStructure, {
          eventSequence: eventSequence,
          timestamp: timestamp,
          eventType: DomInjectionEventType.blink,
          indicatorType: indicatorType,
          blinkDurationMs: Math.round(blinkDurationMs)
        }));
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed sending AgenticDomInjectionBlink event. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_getBlinkThresholdMs",
    value: function _getBlinkThresholdMs() {
      var _this$_configurationR;
      var blinkThresholdMs = (_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.agenticDomInjectionBlinkThresholdMs);
      return typeof blinkThresholdMs === 'number' && blinkThresholdMs > 0 ? blinkThresholdMs : DEFAULT_BLINK_THRESHOLD_MS;
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var _this$_detector, _this$_detector$onCon;
      this._blinkThresholdMs = this._getBlinkThresholdMs();
      // keep detector allowlist in sync with config updates
      (_this$_detector = this._detector) === null || _this$_detector === void 0 || (_this$_detector$onCon = _this$_detector.onConfigUpdate) === null || _this$_detector$onCon === void 0 || _this$_detector$onCon.call(_this$_detector);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/BatteryStatusCollector.js":
/*!**************************************************************!*\
  !*** ./src/main/collectors/events/BatteryStatusCollector.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BatteryStatusStructure: function() { return /* binding */ BatteryStatusStructure; },
/* harmony export */   "default": function() { return /* binding */ BatteryStatusCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * Collects battery status information from the device.
 *
 * Features:
 * - Tracks battery level changes
 * - Monitors charging status
 * - Handles secure context requirements
 * - Graceful error handling
 * - Clean event listener management
 *
 * Security and Permissions:
 * - The Battery Status API is only available in secure contexts (HTTPS)
 * - Starting from Chrome 103, the API requires a secure context to prevent potential privacy concerns
 * - While not currently listed in the Permissions-Policy specification, the API follows similar security principles
 * - The API is considered a sensitive feature that could potentially be used for fingerprinting
 * - Access to battery information is restricted to the same origin by default
 *
 * Browser Support:
 * - Chrome (since version 103 with secure context requirement)
 * - Edge (based on Chromium)
 * - Opera (based on Chromium)
 *
 * Note: This API should be used with consideration for user privacy and battery impact.
 * Frequent polling of battery status can affect device performance and battery life.
 */


var featureSettings = {
  configKey: 'isBatteryStatusFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var BatteryStatusStructure = ['eventSequence', 'timestamp', 'chargeLevel', 'isCharging', 'powerSource'];
var BatteryStatusCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {Object} dataQueue - Queue for storing collected data
   * @param {Object} utils - Utility functions
   * @param {Object} [navigator=window.navigator] - Navigator object for battery API access
   */
  function BatteryStatusCollector(dataQueue, utils) {
    var _this;
    var navigator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.navigator;
    _classCallCheck(this, BatteryStatusCollector);
    _this = _callSuper(this, BatteryStatusCollector);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._storageUtils = utils.StorageUtils;
    _this._navigator = navigator;
    _this._battery = null;

    // Bind event handlers to maintain proper 'this' context
    _this._onLevelChangeEventFunc = _this._onLevelChangeEventFunc.bind(_this);
    _this._onChargingChangeEventFunc = _this._onChargingChangeEventFunc.bind(_this);
    return _this;
  }

  /**
   * Starts collecting battery status data
   * @returns {Promise<void>}
   */
  _inherits(BatteryStatusCollector, _DataCollector);
  return _createClass(BatteryStatusCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this.getBatteryManager();
            case 3:
              this._battery = _context.sent;
              this._setupEventListeners();
              _context.next = 7;
              return this._sendData();
            case 7:
              _context.next = 12;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to start battery status collector: ".concat(_context.t0.message || _context.t0));
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 9]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops collecting battery status data
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._cleanupEventListeners();
      this._battery = null;
    }

    /**
     * Sets up event listeners for battery status changes
     * @private
     */
  }, {
    key: "_setupEventListeners",
    value: function _setupEventListeners() {
      if (!this._battery) return;
      this._battery.addEventListener('levelchange', this._onLevelChangeEventFunc);
      this._battery.addEventListener('chargingchange', this._onChargingChangeEventFunc);
    }

    /**
     * Removes event listeners
     * @private
     */
  }, {
    key: "_cleanupEventListeners",
    value: function _cleanupEventListeners() {
      if (!this._battery) return;
      this._battery.removeEventListener('levelchange', this._onLevelChangeEventFunc);
      this._battery.removeEventListener('chargingchange', this._onChargingChangeEventFunc);
    }

    /**
     * Gets the battery manager instance
     * @returns {Promise<BatteryManager>}
     * @throws {Error}
     */
  }, {
    key: "getBatteryManager",
    value: (function () {
      var _getBatteryManager = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return this._navigator.getBattery();
            case 3:
              return _context2.abrupt("return", _context2.sent);
            case 6:
              _context2.prev = 6;
              _context2.t0 = _context2["catch"](0);
              throw new Error("Failed to get battery manager: ".concat(_context2.t0.message || _context2.t0));
            case 9:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 6]]);
      }));
      function getBatteryManager() {
        return _getBatteryManager.apply(this, arguments);
      }
      return getBatteryManager;
    }()
    /**
     * Handles battery level change events
     * @private
     */
    )
  }, {
    key: "_onLevelChangeEventFunc",
    value: function _onLevelChangeEventFunc(e) {
      this._sendData(e.currentTarget);
    }

    /**
     * Handles battery charging status change events
     * @private
     */
  }, {
    key: "_onChargingChangeEventFunc",
    value: function _onChargingChangeEventFunc(e) {
      this._sendData(e.currentTarget);
    }

    /**
     * Sends battery status data to the queue
     * @private
     * @param {BatteryManager} battery - Battery manager instance
     */
  }, {
    key: "_sendData",
    value: function _sendData() {
      var battery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._battery;
      if (!battery) return;
      var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
      var time = this._utils.dateNow();
      this._dataQueue.addToQueue('battery_status', this._utils.convertToArrayByMap(BatteryStatusStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        chargeLevel: battery.level,
        isCharging: battery.charging,
        powerSource: 0
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/BeforeInstallPromptEventCollector.js":
/*!*************************************************************************!*\
  !*** ./src/main/collectors/events/BeforeInstallPromptEventCollector.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var featureSettings = {
  configKey: 'isBeforeInstallPrompt',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'platforms', 'relativeTime'];
var BeforeInstallPromptEventCollector = /*#__PURE__*/function (_DataCollector) {
  function BeforeInstallPromptEventCollector(dataQueue, utils, MessageBus, BeforeInstallPromptEventEmitter) {
    var _this;
    _classCallCheck(this, BeforeInstallPromptEventCollector);
    _this = _callSuper(this, BeforeInstallPromptEventCollector);
    _defineProperty(_this, "_onBeforeInstallPrompt", function (event) {
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var time = _this.getEventTimestamp();
      var relativeTimestamp = _this.getTimestampFromEvent(event);
      var platforms = event.platforms ? event.platforms.join(',') : '';
      _this._dataQueue.addToQueue('before_install_prompt', _this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        platforms: platforms,
        relativeTime: relativeTimestamp
      }));
    });
    _this._messageBus = MessageBus;
    _this._eventEmitter = BeforeInstallPromptEventEmitter;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    return _this;
  }
  _inherits(BeforeInstallPromptEventCollector, _DataCollector);
  return _createClass(BeforeInstallPromptEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._eventEmitter.start(window);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BeforeInstallPromptEvent, this._onBeforeInstallPrompt);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._eventEmitter.stop(window);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BeforeInstallPromptEvent, this._onBeforeInstallPrompt);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (BeforeInstallPromptEventCollector);

/***/ }),

/***/ "./src/main/collectors/events/ClickEvents.js":
/*!***************************************************!*\
  !*** ./src/main/collectors/events/ClickEvents.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onClickSelectors: function() { return /* binding */ onClickSelectors; }
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./src/main/collectors/events/Event.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var onClickSelectors = "input[type='button'], input[type='radio'], input[type='checkbox'], button";

/**
 * OnCLickEvents Data Collector
 */
var ClickEvents = /*#__PURE__*/function (_Event) {
  /**
   * @param sendToQueue
   */
  function ClickEvents(sendToQueue, CDUtils, messageBus, configurationRepository, StandardOnClickEventsEmitter, maskingService, elements, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, ClickEvents);
    _this = _callSuper(this, ClickEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnClickEvents", function (e) {
      // in input of type button we wish to see the value in the button,
      // in input of type radio the value of the element clicked is the value
      // in input of type checkbox the value is the value property,
      // in button tag the value in the innerHTML
      // we send whether the value is checked un the selected property
      var target = e.target;
      var newValue = target.value || target.innerHTML || '';
      newValue = _this._maskingService.maskText(newValue, e.target.id);
      _this._sendToQueue(e, {
        length: newValue.length,
        elementValues: newValue,
        selected: target.checked === undefined ? -1 : target.checked ? 1 : 0
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = CDUtils;
    _this._messageBus = messageBus;
    _this._StandardOnClickEventsEmitter = StandardOnClickEventsEmitter;
    _this._configurationRepository = configurationRepository;
    _this._enableElementHierarchy = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableElementHierarchy);
    _this._enableElementCategory = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableElementCategory);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(ClickEvents, _Event);
  return _createClass(ClickEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnClickEvent, this.handleOnClickEvents);
      browserContext.collectAllElementsBySelectorAsync(onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onClickElements) {
        _this2._StandardOnClickEventsEmitter.start(_onClickElements);
      });
    }

    /**
     * @param {BrowserContext}browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnClickEvent, this.handleOnClickEvents);
      browserContext.collectAllElementsBySelectorAsync(onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onClickElements) {
        _this3._StandardOnClickEventsEmitter.stop(_onClickElements);
      });
    }
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this4 = this;
      if (!this._enableElementHierarchy && !this._enableElementCategory) return;
      browserContext.collectAllElementsBySelectorAsync(onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (elements) {
        _this4.processElements(elements, isChange, _this4._elements, _this4._elements.resendElementPerContext, _this4._elements.getElement);
      });
    }
  }]);
}(_Event__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (ClickEvents);

/***/ }),

/***/ "./src/main/collectors/events/ClipboardEventCollector.js":
/*!***************************************************************!*\
  !*** ./src/main/collectors/events/ClipboardEventCollector.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClipboardEventType: function() { return /* binding */ ClipboardEventType; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// eslint-disable-next-line max-classes-per-file




var featureSettings = {
  configKey: 'isClipboardEvent',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var ClipboardEventType = {
  copy: 0,
  paste: 1,
  cut: 2
};
var EventStructure = ['eventSequence', 'timestamp', 'clipboardEventType', 'elementHash', 'copiedText', 'isAfterAsyncTextEmpty', 'isOSTextEmpty', 'isEventTextEqualsOS'];
var ClipboardEventCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   *
   * @param utils
   * @param elements
   * @param dataQ
   */
  function ClipboardEventCollector(builder) {
    var _this;
    _classCallCheck(this, ClipboardEventCollector);
    _this = _callSuper(this, ClipboardEventCollector);
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      try {
        var currDocument = browserContext.getDocument();
        _this._cutEventEmitter.start(currDocument);
        _this._copyEventEmitter.start(currDocument);
        _this._pasteEventEmitter.start(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', _this._maxShadowDepth, _this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this._cutEventEmitter.start(iframe.contentDocument);
              _this._copyEventEmitter.start(iframe.contentDocument);
              _this._pasteEventEmitter.start(iframe.contentDocument);
            }
          });
        });
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.CutEvent, _this._handleClipboardEvent);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.CopyEvent, _this._handleClipboardEvent);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.PasteEvent, _this._handleClipboardEvent);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed starting the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    });
    _defineProperty(_this, "_handleClipboardEvent", function (e) {
      _this._sendToQueue(e);
    });
    _defineProperty(_this, "_sendToQueue", function (e) {
      try {
        var time = _this.getEventTimestamp(e);
        var element = _this._elements.getElementHashFromEvent(e);
        var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        var textValue = _this._getClipboardTextFromEvent(e);
        textValue = textValue || '';
        var type = ClipboardEventType[e.type];
        if (_this._utils.isUndefinedNull(type)) {
          type = -1;
        }
        var context = {
          textValue: textValue,
          eventSeq: eventSeq,
          time: time,
          element: element,
          type: type
        };

        // Fetch agentic signals for paste if enabled; otherwise send immediately.
        if ((e === null || e === void 0 ? void 0 : e.type) === 'paste' && _this._collectAgenticPasteSignal) {
          _this._getPasteDataFromEvent(e, textValue).then(function (_ref) {
            var features = _ref.features;
            return _this._finalizeAndSend(context, features);
          })["catch"](function () {
            return _this._finalizeAndSend(context);
          });
        } else {
          _this._finalizeAndSend(context);
        }
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed handling ClipboardEvent. msg: ".concat(error.message), error);
      }
    });
    _this._utils = builder.utils;
    _this._dataQueue = builder.dataQueue;
    _this._elements = builder.elements;
    _this._messageBus = builder.messageBus;
    _this._configurationRepository = builder.configurationRepository;
    _this._collectAgenticPasteSignal = builder.collectAgenticPasteSignal;
    _this._cutEventEmitter = builder.cutEventEmitter;
    _this._copyEventEmitter = builder.copyEventEmitter;
    _this._pasteEventEmitter = builder.pasteEventEmitter;
    _this._maxShadowDepth = builder.maxShadowDepth;
    _this._iframeLoadingTimeout = builder.iframeLoadingTimeout;
    return _this;
  }
  _inherits(ClipboardEventCollector, _DataCollector);
  return _createClass(ClipboardEventCollector, [{
    key: "stopFeature",
    value:
    /**
     * @param {BrowserContext} browserContext
     */
    function stopFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._cutEventEmitter.stop(currDocument);
        this._copyEventEmitter.stop(currDocument);
        this._pasteEventEmitter.stop(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._cutEventEmitter.stop(iframe.contentDocument);
              _this2._copyEventEmitter.stop(iframe.contentDocument);
              _this2._pasteEventEmitter.stop(iframe.contentDocument);
            }
          });
        });
        this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.CutEvent, this._handleClipboardEvent);
        this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.CopyEvent, this._handleClipboardEvent);
        this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.PasteEvent, this._handleClipboardEvent);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed stopping the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_finalizeAndSend",
    value: function _finalizeAndSend(context) {
      var agenticPasteSignals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
        isAfterAsyncTextEmpty: null,
        isOSTextEmpty: null,
        isEventTextEqualsOS: null
      };
      var textValue = context.textValue,
        eventSeq = context.eventSeq,
        time = context.time,
        element = context.element,
        type = context.type;

      // mask all chars, but preserve length
      var maskedText = textValue;
      if (maskedText !== '') {
        maskedText = maskedText.replace(/[\d]/g, '1').replace(/[a-zA-Z]/g, 'a').replace(/[^a-zA-Z\d]/g, '*');
      }
      this._dataQueue.addToQueue('clipboard_events', this._utils.convertToArrayByMap(EventStructure, _objectSpread({
        eventSequence: eventSeq,
        timestamp: time,
        elementHash: element,
        copiedText: maskedText,
        clipboardEventType: type
      }, agenticPasteSignals)));
    }
  }, {
    key: "_getClipboardTextFromEvent",
    value: function _getClipboardTextFromEvent(e) {
      return e.clipboardData ? e.clipboardData.getData('text') : window.clipboardData ? window.clipboardData.getData('text') : '';
    }

    // Agentic paste signals:
    // These fields help characterize paste patterns typical of agentic behavior
    // (e.g., differences between event-provided text vs OS clipboard / async clipboard reads).
  }, {
    key: "_getPasteDataFromEvent",
    value: function () {
      var _getPasteDataFromEvent2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, pastedEventText) {
        var _navigator;
        var readTextSupported, asyncClipRaw, pastedAfterRaw, beforeAsyncText, afterAsyncText, osText;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              readTextSupported = !!((_navigator = navigator) !== null && _navigator !== void 0 && (_navigator = _navigator.clipboard) !== null && _navigator !== void 0 && _navigator.readText);
              asyncClipRaw = '';
              if (!readTextSupported) {
                _context.next = 12;
                break;
              }
              _context.prev = 3;
              _context.next = 6;
              return navigator.clipboard.readText();
            case 6:
              asyncClipRaw = _context.sent;
              _context.next = 12;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](3);
              asyncClipRaw = '';
            case 12:
              pastedAfterRaw = this._getClipboardTextFromEvent(e);
              beforeAsyncText = String(pastedEventText || '').trim();
              afterAsyncText = String(pastedAfterRaw || '').trim();
              osText = String(asyncClipRaw || '').trim();
              return _context.abrupt("return", {
                features: {
                  isAfterAsyncTextEmpty: afterAsyncText === '',
                  isOSTextEmpty: osText === '',
                  isEventTextEqualsOS: beforeAsyncText === osText
                }
              });
            case 17:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[3, 9]]);
      }));
      function _getPasteDataFromEvent(_x, _x2) {
        return _getPasteDataFromEvent2.apply(this, arguments);
      }
      return _getPasteDataFromEvent;
    }()
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._collectAgenticPasteSignal = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.collectAgenticPasteSignal);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(utils, elements, dataQ, configuration, configurationRepository) {
          _classCallCheck(this, Builder);
          this.utils = utils;
          this.dataQueue = dataQ;
          this.elements = elements;
          this.maxShadowDepth = configuration.getMaxShadowDepth();
          this.iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
          this.configurationRepository = configurationRepository;
          this.collectAgenticPasteSignal = this.configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.collectAgenticPasteSignal);
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withCutEventEmitter",
          value: function withCutEventEmitter(cutEventEmitter) {
            this.cutEventEmitter = cutEventEmitter;
            return this;
          }
        }, {
          key: "withCopyEventEmitter",
          value: function withCopyEventEmitter(copyEventEmitter) {
            this.copyEventEmitter = copyEventEmitter;
            return this;
          }
        }, {
          key: "withPasteEventEmitter",
          value: function withPasteEventEmitter(pasteEventEmitter) {
            this.pasteEventEmitter = pasteEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new ClipboardEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (ClipboardEventCollector);

/***/ }),

/***/ "./src/main/collectors/events/ControlsKeyTable.js":
/*!********************************************************!*\
  !*** ./src/main/collectors/events/ControlsKeyTable.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ControlsKeyTable: function() { return /* binding */ ControlsKeyTable; }
/* harmony export */ });
var ControlsKeyTable = {
  'Enter': 13,
  'ArrowUp': 38,
  'ArrowDown': 40,
  'ArrowLeft': 37,
  'ArrowRight': 39,
  'Escape': 27,
  ' ': 32,
  // Space
  'Control': 17,
  'Alt': 18,
  'Tab': 9,
  'Shift': 16,
  'CapsLock': 20,
  'Meta': 91,
  'Backspace': 8,
  'Home': 36,
  'End': 35,
  'Insert': 45,
  // didnt see this key in any event.
  'Delete': 46,
  'PageUp': 33,
  'PageDown': 34,
  'PrintScreen': 44,
  'NumLock': 144,
  'Clear': 144,
  // NumLock
  'F1': 112,
  'F2': 113,
  'F3': 114,
  'F4': 115,
  'F5': 116,
  'F6': 117,
  'F7': 118,
  'F8': 119,
  'F9': 120,
  '10': 121,
  'F11': 122,
  'F12': 123
};

/***/ }),

/***/ "./src/main/collectors/events/CustomInputEvents.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/CustomInputEvents.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./src/main/collectors/events/Event.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * CustomInputEvents Controlled by ElementsEvent Data Collector using CustomInputElementSettings.
 * support collection of a single Input Element.
 */
var CustomInputEvents = /*#__PURE__*/function (_Event) {
  /**
   *
   * @param elements
   * @param sendToQueue
   * @param CDUtils
   * @param messageBus
   * @param StandardCustomInputEmitter
   * @param maskingService
   * @param inputElementSettings
   * @param categoryService {CategoryService}
   */
  function CustomInputEvents(elements, sendToQueue, CDUtils, messageBus, StandardCustomInputEmitter, maskingService, inputElementSettings, categoryService) {
    var _this;
    _classCallCheck(this, CustomInputEvents);
    _this = _callSuper(this, CustomInputEvents);
    _defineProperty(_this, "handleInputEvents", function (e) {
      var _e$getAttribute, _this$_inputElementSe, _e$target, _e$target2, _this$_inputElementSe2, _newValue;
      var newValue = '';
      var attribute = e === null || e === void 0 || (_e$getAttribute = e.getAttribute) === null || _e$getAttribute === void 0 ? void 0 : _e$getAttribute.call(e, (_this$_inputElementSe = _this._inputElementSettings) === null || _this$_inputElementSe === void 0 ? void 0 : _this$_inputElementSe.elementDataAttribute);
      if (attribute) {
        newValue = attribute;
      } else if (e !== null && e !== void 0 && (_e$target = e.target) !== null && _e$target !== void 0 && _e$target.ariaValueNow) {
        newValue = e.target.ariaValueNow;
      } else if (e !== null && e !== void 0 && (_e$target2 = e.target) !== null && _e$target2 !== void 0 && _e$target2.value) {
        var _e$target3;
        newValue = (_e$target3 = e.target) === null || _e$target3 === void 0 ? void 0 : _e$target3.value;
      } else if (e !== null && e !== void 0 && e[(_this$_inputElementSe2 = _this._inputElementSettings) === null || _this$_inputElementSe2 === void 0 ? void 0 : _this$_inputElementSe2.elementDataAttribute]) {
        var _this$_inputElementSe3;
        newValue = e[(_this$_inputElementSe3 = _this._inputElementSettings) === null || _this$_inputElementSe3 === void 0 ? void 0 : _this$_inputElementSe3.elementDataAttribute];
      }
      if (newValue !== '') {
        newValue = _this._maskingService.maskText(newValue, e.id);
      }
      if (newValue === '') {
        return;
      }
      _this._sendToQueue(e, {
        length: ((_newValue = newValue) === null || _newValue === void 0 ? void 0 : _newValue.length) || 0,
        elementValues: newValue,
        selected: -1
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = CDUtils;
    _this._messageBus = messageBus;
    _this._StandardCustomInputEmitter = StandardCustomInputEmitter;
    _this._maskingService = maskingService;
    _this._inputElementSettings = inputElementSettings;
    _this._elementsFromDoc = {
      mainElement: '',
      customButtons: []
    };
    _this._categoryService = categoryService;
    return _this;
  }
  _inherits(CustomInputEvents, _Event);
  return _createClass(CustomInputEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this$_inputElementSe4, _this$_inputElementSe5, _this$_elementsFromDo, _this$_elementsFromDo2;
      if (!((_this$_inputElementSe4 = this._inputElementSettings) !== null && _this$_inputElementSe4 !== void 0 && _this$_inputElementSe4.parentElementSelector) && !((_this$_inputElementSe5 = this._inputElementSettings) !== null && _this$_inputElementSe5 !== void 0 && _this$_inputElementSe5.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomInputElement, this.handleInputEvents);
      var elements = [(_this$_elementsFromDo = this._elementsFromDoc) === null || _this$_elementsFromDo === void 0 ? void 0 : _this$_elementsFromDo.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo2 = this._elementsFromDoc) === null || _this$_elementsFromDo2 === void 0 ? void 0 : _this$_elementsFromDo2.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      this.addListenersBySelector(elements);
    }
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this$_inputElementSe6, _this$_inputElementSe7, _this$_elementsFromDo3, _this$_elementsFromDo4;
      if (!((_this$_inputElementSe6 = this._inputElementSettings) !== null && _this$_inputElementSe6 !== void 0 && _this$_inputElementSe6.parentElementSelector) && !((_this$_inputElementSe7 = this._inputElementSettings) !== null && _this$_inputElementSe7 !== void 0 && _this$_inputElementSe7.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomInputElement, this.handleInputEvents);
      var elements = [(_this$_elementsFromDo3 = this._elementsFromDoc) === null || _this$_elementsFromDo3 === void 0 ? void 0 : _this$_elementsFromDo3.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo4 = this._elementsFromDoc) === null || _this$_elementsFromDo4 === void 0 ? void 0 : _this$_elementsFromDo4.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      this.removeListenersBySelector(elements);
    }
  }, {
    key: "getSelectElementsFromDoc",
    value: function getSelectElementsFromDoc(doc) {
      var _this$_inputElementSe8,
        _this2 = this;
      var body = doc.querySelector('body');
      var mainElement = doc.querySelector((_this$_inputElementSe8 = this._inputElementSettings) === null || _this$_inputElementSe8 === void 0 ? void 0 : _this$_inputElementSe8.childElementWithCustomAttribute);
      if (body) {
        var _this$_inputElementSe9;
        if (mainElement) {
          this._elementsFromDoc.mainElement = mainElement;
        }
        if ((_this$_inputElementSe9 = this._inputElementSettings) !== null && _this$_inputElementSe9 !== void 0 && _this$_inputElementSe9.customButtons) {
          var _this$_inputElementSe10;
          (_this$_inputElementSe10 = this._inputElementSettings) === null || _this$_inputElementSe10 === void 0 || _this$_inputElementSe10.customButtons.forEach(function (element) {
            var elem = doc.querySelector(element);
            if (elem) {
              _this2._elementsFromDoc.customButtons.push(elem);
            }
          });
        }
      }
      return this._elementsFromDoc;
    }
  }, {
    key: "addListenersBySelector",
    value: function addListenersBySelector(elements) {
      var _this$_elementsFromDo5;
      if ((_this$_elementsFromDo5 = this._elementsFromDoc) !== null && _this$_elementsFromDo5 !== void 0 && _this$_elementsFromDo5.mainElement && elements.length >= 1) {
        this._StandardCustomInputEmitter.start(elements);
      }
    }
  }, {
    key: "removeListenersBySelector",
    value: function removeListenersBySelector(elements) {
      var _this$_elementsFromDo6;
      if ((_this$_elementsFromDo6 = this._elementsFromDoc) !== null && _this$_elementsFromDo6 !== void 0 && _this$_elementsFromDo6.mainElement && elements.length >= 1) {
        this._StandardCustomInputEmitter.stop(elements);
      }
      this._elementsFromDoc = {
        mainElement: '',
        customButtons: []
      };
    }

    /**
     * @param {BrowserContext} browserContext
     * @param isChange
     */
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this$_inputElementSe11,
        _this$_inputElementSe12,
        _this$_elementsFromDo7,
        _this$_elementsFromDo8,
        _this$_elementsFromDo9,
        _this3 = this;
      if (!((_this$_inputElementSe11 = this._inputElementSettings) !== null && _this$_inputElementSe11 !== void 0 && _this$_inputElementSe11.parentElementSelector) && !((_this$_inputElementSe12 = this._inputElementSettings) !== null && _this$_inputElementSe12 !== void 0 && _this$_inputElementSe12.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      var elements = [(_this$_elementsFromDo7 = this._elementsFromDoc) === null || _this$_elementsFromDo7 === void 0 ? void 0 : _this$_elementsFromDo7.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo8 = this._elementsFromDoc) === null || _this$_elementsFromDo8 === void 0 ? void 0 : _this$_elementsFromDo8.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      if ((_this$_elementsFromDo9 = this._elementsFromDoc) !== null && _this$_elementsFromDo9 !== void 0 && _this$_elementsFromDo9.mainElement && elements.length >= 1) {
        elements.forEach(function (element) {
          if (_this3._elements.isListed(element)) {
            if (!isChange) {
              // on load and context change we need to report again elements
              _this3._elements.resendElementPerContext(element); // this will cause the Elements class to add element event to Q
            }
          } else {
            _this3._elements.getElement(element, false); // this will cause the Elements class to add element event to Q
          }
        });
      }
    }
  }]);
}(_Event__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (CustomInputEvents);

/***/ }),

/***/ "./src/main/collectors/events/DeviceOrientationCollector.js":
/*!******************************************************************!*\
  !*** ./src/main/collectors/events/DeviceOrientationCollector.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeviceOrientationType: function() { return /* binding */ DeviceOrientationType; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ DeviceOrientationCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isDeviceOrientationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var DeviceOrientationType = {
  'undefined': 0,
  'portrait-primary': 1,
  'landscape-primary': 2,
  'portrait-secondary': 3,
  'landscape-secondary': 4
};
var EventStructure = ['eventSequence', 'timestamp', 'orientation'];
var DeviceOrientationCollector = /*#__PURE__*/function (_DataCollector) {
  function DeviceOrientationCollector(utils, dataQ) {
    var _this;
    _classCallCheck(this, DeviceOrientationCollector);
    _this = _callSuper(this, DeviceOrientationCollector);
    _this._dataQ = dataQ;
    _this._utils = utils;
    _this._onDeviceOrientationEventFunc = _this._onDeviceOrientationEvent.bind(_this);
    if (screen.mozOrientation && screen.addEventListener) {
      _this._eventTarget = screen;
      _this._eventName = 'mozorientationchange';
    } else if (screen.msOrientation && screen.addEventListener) {
      _this._eventTarget = screen;
      _this._eventName = 'msorientationchange';
    } else {
      _this._eventTarget = window;
      _this._eventName = 'orientationchange';
    }
    return _this;
  }
  _inherits(DeviceOrientationCollector, _DataCollector);
  return _createClass(DeviceOrientationCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(this._eventTarget, this._eventName, this._onDeviceOrientationEventFunc);
      this._handleDeviceOrientationEvent(screen);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(this._eventTarget, this._eventName, this._onDeviceOrientationEventFunc);
    }
  }, {
    key: "_onDeviceOrientationEvent",
    value: function _onDeviceOrientationEvent(e) {
      var scr;
      if (!e || !e.target) {
        scr = screen;
      } else {
        // Chrome target is window so we need to get screen out of it. Firefox target is screen so we just get the target
        scr = e.target.screen || e.target;
      }
      this._handleDeviceOrientationEvent(scr);
    }

    // Handle screen orientation event. Notice that we receive the screen object as a parameter. The reason for this is
    // that we require the screen object from the event args since it is the only one up to date with the correct orientation value (At least until FireFox fixes this behavior)
  }, {
    key: "_handleDeviceOrientationEvent",
    value: function _handleDeviceOrientationEvent(scr) {
      // Since FireFox has both mozOrientation & orientation properties but only the first one is up to date, this order of must be preserved for now...
      var orientation = scr.mozOrientation || scr.msOrientation || scr.orientation;

      // Case the browser doesn't support orientation
      if (orientation === undefined) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('onDeviceOrientationEvent: Unable to find orientation data.');
        return;
      }

      // Extract the actual type
      var orientationType = orientation.type || orientation;
      var deviceOrientationType = DeviceOrientationType[orientationType];

      // In case the orientation type is unknown to us...
      if (deviceOrientationType === undefined) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("onDeviceOrientationEvent: Unknown orientation ".concat(orientationType, " value."));
        return;
      }
      if (this._lastDeviceOrientationType !== deviceOrientationType) {
        var timestamp = this.getEventTimestamp();
        var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        this._lastDeviceOrientationType = deviceOrientationType;
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace("onDeviceOrientationEvent: Orientation changed to ".concat(deviceOrientationType, " at time ").concat(timestamp));
        this._dataQ.addToQueue('screen_orientation', this._utils.convertToArrayByMap(EventStructure, {
          eventSequence: eventSeq,
          timestamp: timestamp,
          orientation: deviceOrientationType
        }));
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/ElementEventCollector.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/events/ElementEventCollector.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElementEventType: function() { return /* binding */ ElementEventType; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// eslint-disable-next-line max-classes-per-file





var featureSettings = {
  configKey: 'isElementsEvent',
  isDefault: true,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var ElementEventType = {
  input: 0,
  initial: 1,
  focus: 2,
  blur: 3,
  change: 4,
  click: 5,
  submit: 6
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'length', 'elementValues', 'selected', 'hashedValue', 'relativeTime'];
var ElementEventCollector = /*#__PURE__*/function (_DataCollector) {
  function ElementEventCollector(builder) {
    var _this;
    _classCallCheck(this, ElementEventCollector);
    _this = _callSuper(this, ElementEventCollector);
    _defineProperty(_this, "mutationMessageHandler", function (message) {
      if (message.browserContext) {
        var _this$_customInputEve, _this$_customInputEve2;
        _this._inputEvents.addOnLoadInputData(message.browserContext, true);
        _this._inputEvents.bind(message.browserContext);
        _this._clickEvents.addOnLoadInputData(message.browserContext, true);
        _this._clickEvents.bind(message.browserContext);
        _this._selectElementEvents.bind(message.browserContext);
        _this._formEvents.bind(message.browserContext);
        (_this$_customInputEve = _this._customInputEvents) === null || _this$_customInputEve === void 0 || _this$_customInputEve.addOnLoadInputData(message.browserContext, true);
        (_this$_customInputEve2 = _this._customInputEvents) === null || _this$_customInputEve2 === void 0 || _this$_customInputEve2.bind(message.browserContext);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      var _this$_customInputEve3, _this$_customInputEve4;
      _this._inputEvents.addOnLoadInputData(browserContext, false);
      _this._inputEvents.bind(browserContext);
      _this._clickEvents.addOnLoadInputData(browserContext, false);
      _this._clickEvents.bind(browserContext);
      _this._selectElementEvents.bind(browserContext);
      (_this$_customInputEve3 = _this._customInputEvents) === null || _this$_customInputEve3 === void 0 || _this$_customInputEve3.addOnLoadInputData(browserContext, false);
      (_this$_customInputEve4 = _this._customInputEvents) === null || _this$_customInputEve4 === void 0 || _this$_customInputEve4.bind(browserContext);
      _this._formEvents.bind(browserContext);
      if (_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.isMutationObserver) && _this._mutationEmitter) {
        _this._mutationEmitter.startObserver(browserContext);
        _this._jQueryElementListenerSiteMapper.initTracking();
      }
    });
    /**
     *
     * @param matchedMapping
     * @private
     */
    _defineProperty(_this, "_onSiteMapperMatch", function (matchedMapping) {
      var selector = matchedMapping.selector;
      if (!selector) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].warn('ElementEvents._onSiteMapperMatch - No selector defined for match.' + ' Aborting jQuery element listening process.');
        return;
      }
      try {
        var element = window.document.querySelector(selector);
        if (!element) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("ElementEvents._onSiteMapperMatch - selector:".concat(JSON.stringify(selector), " not found on page"));
          return;
        }
        if (_this._domUtils.matches(element, _this._inputSelectors)) {
          _this._jqueryEventHandler.bindInputEvents(element);
        } else if (_this._domUtils.matches(element, _this._onClickSelectors)) {
          _this._jqueryEventHandler.bindOnClickEvents(element);
        } else if (_this._domUtils.matches(element, _this._onSelectSelectors)) {
          _this._jqueryEventHandler.bindOnChangeEvents(element);
        } else if (_this._domUtils.matches(element, _this._onFormSelectors)) {
          _this._jqueryEventHandler.bindOnFormsEvents(element);
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].error("ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                ".concat(JSON.stringify(selector), " to any selectors group. Aborting jQuery element listening process."));
        }
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].error("ElementEvents._onSiteMapperMatch - ".concat(ex.message), ex);
      }
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._utils = builder.utils;
    _this._domUtils = builder.domUtils;
    _this._dataQ = builder.dataQ;
    _this._elements = builder.elements;
    _this._jQueryElementListenerSiteMapper = builder.jQueryElementListenerSiteMapper;
    _this._jQueryElementListenerSiteMapper.updateObserver(_this._onSiteMapperMatch);
    _this._messageBus = builder.messageBus;
    _this._mutationEmitter = builder.mutationEmitter;
    _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__.MessageBusEventType.MutationSingleEvent, _this.mutationMessageHandler);
    _this._StandardInputEventsEmitter = builder.StandardInputEventsEmitter;
    _this._SyntheticMaskInputEventsHandler = builder.SyntheticMaskInputEventsHandler;
    _this._SyntheticAutotabInputEventsHandler = builder.SyntheticAutotabInputEventsHandler;
    _this._maskingService = builder.maskingService;
    _this._categoryService = builder.categoryService;
    _this._inputEvents = new builder.InputEvents(_this._elements, _this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardInputEventsEmitter, _this._SyntheticMaskInputEventsHandler, _this._SyntheticAutotabInputEventsHandler, _this._maskingService, _this._categoryService, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._inputSelectors = builder.inputSelectors;
    _this._StandardOnClickEventsEmitter = builder.StandardOnClickEventsEmitter;
    if (_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.parentElementSelector) && _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.childElementWithCustomAttribute) && _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.elementDataAttribute)) {
      _this._StandardCustomInputEmitter = builder.StandardCustomInputEmitter;
      _this._inputElementSettings = {
        parentElementSelector: _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.parentElementSelector),
        childElementWithCustomAttribute: _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.childElementWithCustomAttribute),
        elementDataAttribute: _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.elementDataAttribute),
        customButtons: _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.customButtons)
      };
      _this._customInputEvents = new builder.CustomInputEvents(_this._elements, _this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardCustomInputEmitter, _this._maskingService, _this.inputElementSettings = _this._inputElementSettings);
    }
    _this._clickEvents = new builder.ClickEvents(_this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._configurationRepository, _this._StandardOnClickEventsEmitter, _this._maskingService, _this._elements, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onClickSelectors = builder.onClickSelectors;
    _this._StandardOnChangeEventsEmitter = builder.StandardOnChangeEventsEmitter;
    _this._elementFocusEventEmitter = builder.ElementFocusEventsEmitter;
    _this._elementBlurEventEmitter = builder.ElementBlurEventsEmitter;
    _this._selectElementEvents = new builder.SelectElementEvents(_this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardOnChangeEventsEmitter, _this._elementFocusEventEmitter, _this._elementBlurEventEmitter, _this._configurationRepository, _this._maskingService, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onSelectSelectors = builder.onSelectSelectors;
    _this._StandardOnFormEventsEmitter = builder.StandardOnFormEventsEmitter;
    _this._formEvents = new builder.FormEvents(_this.sendToQueue.bind(_this), _this._messageBus, _this._StandardOnFormEventsEmitter, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onFormSelectors = builder.onFormSelectors;
    _this._jqueryEventHandler = builder.JqueryElementsHandler;
    _this._maxElemValLength = 200;
    _this._hashTruncationLength = _this._configurationRepository.get('elementHashTruncationLength') || 2;
    return _this;
  }
  _inherits(ElementEventCollector, _DataCollector);
  return _createClass(ElementEventCollector, [{
    key: "stopFeature",
    value:
    /**
     * @param {BrowserContext} browserContext
     */
    function stopFeature(browserContext) {
      var _this$_customInputEve5;
      this._inputEvents.unbind(browserContext);
      this._clickEvents.unbind(browserContext);
      this._selectElementEvents.unbind(browserContext);
      (_this$_customInputEve5 = this._customInputEvents) === null || _this$_customInputEve5 === void 0 || _this$_customInputEve5.unbind(browserContext);
      this._formEvents.unbind(browserContext);
      this._jQueryElementListenerSiteMapper.stopTracking();
      this._mutationEmitter.stopObserver(browserContext);
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(browserContext) {
      if (this._configurationRepository.get('isMutationObserver') && this._mutationEmitter) {
        this._mutationEmitter.startObserver(browserContext);
        this._jQueryElementListenerSiteMapper.onConfigUpdate(this._configurationRepository);
      }
      this._hashTruncationLength = this._configurationRepository.get('elementHashTruncationLength') !== undefined ? this._configurationRepository.get('elementHashTruncationLength') : this._hashTruncationLength;
      this._elements.updateFeatureConfig();
      this._selectElementEvents.updateSettings(browserContext);
    }
  }, {
    key: "sendToQueue",
    value: function sendToQueue(e, eventData) {
      var isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__.IsTrustedValue[e.isTrusted];
      var time = this.getEventTimestamp(e);
      var relativeTimestamp = this.getTimestampFromEvent(e);
      var type = ElementEventType[e.type];
      if (this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      eventData = eventData || {};
      if (eventData.elementValues && eventData.elementValues.length > this._maxElemValLength) {
        eventData.elementValues = '';
      }
      var fullEventData = _objectSpread(_objectSpread({}, eventData), {
        eventType: type,
        eventSequence: eventSeq,
        timestamp: time,
        elementHash: element,
        isTrusted: isTrusted,
        hashedValue: '',
        relativeTime: relativeTimestamp
      });
      this._dataQ.addToQueue('element_events', this._utils.convertToArrayByMap(EventStructure, fullEventData), true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }

    /**
     * Designated ElementEvents Class Builder
     * @returns {Builder}
     * @constructor
     */
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, utils, domUtils, elements, dataQ, configuration) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.utils = utils;
          this.domUtils = domUtils;
          this.elements = elements;
          this.dataQ = dataQ;
          this.maxShadowDepth = configuration.getMaxShadowDepth();
          this.iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withMutationEmitter",
          value: function withMutationEmitter(mutationEmitter) {
            this.mutationEmitter = mutationEmitter;
            return this;
          }
        }, {
          key: "withjQueryElementListenerSiteMapper",
          value: function withjQueryElementListenerSiteMapper(jQueryElementListenerSiteMapper) {
            this.jQueryElementListenerSiteMapper = jQueryElementListenerSiteMapper;
            return this;
          }
        }, {
          key: "withjQueryElementsHandler",
          value: function withjQueryElementsHandler(JqueryElementsHandler) {
            this.JqueryElementsHandler = JqueryElementsHandler;
            return this;
          }
        }, {
          key: "withInputEvents",
          value: function withInputEvents(InputEvents, inputSelectors, MaskingService, categoryService) {
            this.InputEvents = InputEvents;
            this.inputSelectors = inputSelectors;
            this.maskingService = MaskingService;
            this.categoryService = categoryService;
            return this;
          }
        }, {
          key: "withStandardInputEventsEmitter",
          value: function withStandardInputEventsEmitter(StandardInputEventsEmitter) {
            this.StandardInputEventsEmitter = StandardInputEventsEmitter;
            return this;
          }
        }, {
          key: "withSyntheticMaskInputEventsHandler",
          value: function withSyntheticMaskInputEventsHandler(SyntheticMaskInputEventsHandler) {
            this.SyntheticMaskInputEventsHandler = SyntheticMaskInputEventsHandler;
            return this;
          }
        }, {
          key: "withSyntheticAutotabInputEventsHandler",
          value: function withSyntheticAutotabInputEventsHandler(SyntheticAutotabInputEventsHandler) {
            this.SyntheticAutotabInputEventsHandler = SyntheticAutotabInputEventsHandler;
            return this;
          }
        }, {
          key: "withClickEvents",
          value: function withClickEvents(ClickEvents, onClickSelectors) {
            this.ClickEvents = ClickEvents;
            this.onClickSelectors = onClickSelectors;
            return this;
          }
        }, {
          key: "withStandardOnClickEventsEmitter",
          value: function withStandardOnClickEventsEmitter(StandardOnClickEventsEmitter) {
            this.StandardOnClickEventsEmitter = StandardOnClickEventsEmitter;
            return this;
          }
        }, {
          key: "withSelectElementEvents",
          value: function withSelectElementEvents(SelectElementEvents, onSelectSelectors) {
            this.SelectElementEvents = SelectElementEvents;
            this.onSelectSelectors = onSelectSelectors;
            return this;
          }
        }, {
          key: "withStandardOnChangeEventsEmitter",
          value: function withStandardOnChangeEventsEmitter(StandardOnChangeEventsEmitter) {
            this.StandardOnChangeEventsEmitter = StandardOnChangeEventsEmitter;
            return this;
          }
        }, {
          key: "withElementFocusEventsEmitter",
          value: function withElementFocusEventsEmitter(ElementFocusEventsEmitter) {
            this.ElementFocusEventsEmitter = ElementFocusEventsEmitter;
            return this;
          }
        }, {
          key: "withElementBlurEventsEmitter",
          value: function withElementBlurEventsEmitter(ElementBlurEventsEmitter) {
            this.ElementBlurEventsEmitter = ElementBlurEventsEmitter;
            return this;
          }
        }, {
          key: "withFormEvents",
          value: function withFormEvents(FormEvents, onFormSelectors) {
            this.FormEvents = FormEvents;
            this.onFormSelectors = onFormSelectors;
            return this;
          }
        }, {
          key: "withStandardOnFormEventsEmitter",
          value: function withStandardOnFormEventsEmitter(StandardOnFormEventsEmitter) {
            this.StandardOnFormEventsEmitter = StandardOnFormEventsEmitter;
            return this;
          }
        }, {
          key: "withCustomInputEventEmitter",
          value: function withCustomInputEventEmitter(CustomInputEvents, StandardCustomInputEmitter) {
            this.CustomInputEvents = CustomInputEvents;
            this.StandardCustomInputEmitter = StandardCustomInputEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new ElementEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (ElementEventCollector);

/***/ }),

/***/ "./src/main/collectors/events/ElementsCollector.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/ElementsCollector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ ElementsCollector; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_ElementStrengthen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/ElementStrengthen */ "./src/main/technicalServices/ElementStrengthen.js");
/* harmony import */ var _technicalServices_UniqueIDConfiguration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../technicalServices/UniqueIDConfiguration */ "./src/main/technicalServices/UniqueIDConfiguration.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }





var EventStructure = ['elementHash', 'tagName', 'id', 'name', 'type', 'leftPosition', 'topPosition', 'width', 'height', 'className', 'href', 'title', 'alt', 'selectValues', 'elementValue', 'checked', 'timestamp', 'customElementAttribute', 'unmaskedElementValue', 'elementMappingId', 'category'];
var ElementsCollector = /*#__PURE__*/function (_DataCollector) {
  function ElementsCollector(configurationRepository, utils, dataQueue, contextMgr, maskingService, categoryService, isCollectorsV2) {
    var _this;
    _classCallCheck(this, ElementsCollector);
    _this = _callSuper(this, ElementsCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._contextMgr = contextMgr;
    _this._maskingService = maskingService;
    _this._categoryService = categoryService;
    _this._isCollectorsV2 = isCollectorsV2;
    _this._elementHashWMap = new WeakMap();
    // by default we collect unless the server will order otherwise
    _this._collectPosition = true;
    _this._collectClassName = true;
    _this._collectTitle = true;
    _this._collectHref = true;
    _this._collectCustomElementAttribute = true;
    _this._customElementAttribute = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.customElementAttribute);
    _this._maxElemValLength = 30;
    _this._allowedUnmaskedValuesList = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList);
    _this._enableUnmaskedValues = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableUnmaskedValues);
    _this._enableElementHierarchy = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementHierarchy);
    _this._enableElementCategory = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementCategory);
    _this._uniqueIDConfiguration = _technicalServices_UniqueIDConfiguration__WEBPACK_IMPORTED_MODULE_4__.UniqueIDConfiguration.parse(_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementUniqueIDConfiguration));
    return _this;
  }

  /**
   * Getting the Element hash
   * @param elem - dom element
   * @returns {*} - hash value for the element
   */
  _inherits(ElementsCollector, _DataCollector);
  return _createClass(ElementsCollector, [{
    key: "getElement",
    value: function getElement(elem) {
      if (this._utils.isUndefinedNull(elem) || elem === document || elem === document.body) {
        return -1; // on mouse events we may get the document object
        // we sometimes get null element - iframes etc
      }
      var hash = -1;
      if (this._elementHashWMap.has(elem)) {
        hash = this._elementHashWMap.get(elem).hash;
      } else {
        var xpath = _technicalServices_ElementStrengthen__WEBPACK_IMPORTED_MODULE_3__.ElementStrengthenInstance.getUniqueElementXpath(elem);
        hash = xpath ? this._utils.getHash(xpath) : -1;
        this._elementHashWMap.set(elem, {
          hash: hash,
          contextList: [this._contextMgr.contextName]
        });
        this._sendElementToServer(elem, hash);
      }
      return hash;
    }
  }, {
    key: "getElementHashFromEvent",
    value: function getElementHashFromEvent(event) {
      var elementTarget = this.getRealEventTarget(event);
      return this.getElement(elementTarget);
    }
  }, {
    key: "getRealEventTarget",
    value: function getRealEventTarget(event) {
      // Try to get the first element from the composedPath (Shadow DOM safe)
      var path = event.composedPath ? event.composedPath() : null;

      // If path exists and has elements, use the first element, otherwise fall back to e.target
      var realTarget = path && path.length > 0 ? path[0] : event.target;
      return realTarget;
    }

    /**
     * for existing elements, check if was sent for the current context
     * @param elem
     */
  }, {
    key: "resendElementPerContext",
    value: function resendElementPerContext(elem) {
      if (!this._elementHashWMap.has(elem)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("received for resendElementPerContext bad element, not in hash map. id=".concat(elem.id));
        return;
      }
      var elemData = this._elementHashWMap.get(elem);
      var hash = elemData.hash;
      if (elemData.contextList.indexOf(this._contextMgr.contextName) < 0) {
        // the element was already sent for this context, we do not want the server and DB
        // to be swamped with data so we don't sent it in this case
        elemData.contextList.push(this._contextMgr.contextName);
        this._elementHashWMap.set(elem, {
          hash: elemData.hash,
          contextList: elemData.contextList
        });
        this._sendElementToServer(elem, hash);
      }
    }
  }, {
    key: "isListed",
    value: function isListed(elem) {
      return this._elementHashWMap.has(elem);
    }

    /**
     * return block of saved data (context and hash)
     * @param elem
     * @returns {object}
     */
  }, {
    key: "getElementData",
    value: function getElementData(elem) {
      return this._elementHashWMap.get(elem);
    }

    /**
     * return contextList
     * @param elem
     * @returns {[]}
     */
  }, {
    key: "getElementContextList",
    value: function getElementContextList(elem) {
      return this._elementHashWMap.get(elem).contextList;
    }
  }, {
    key: "_sendElementToServer",
    value: function _sendElementToServer(elem, hash) {
      // offset/width/height are sometimes float values
      var position = this._collectPosition ? elem.getBoundingClientRect && elem.getBoundingClientRect() : null;
      var left = -1;
      var top = -1;
      var width = -1;
      var height = -1;
      if (position) {
        left = Math.round(position.left);
        top = Math.round(position.top);
        width = Math.round(position.right - position.left);
        height = Math.round(position.bottom - position.top);
      }

      // the following attributes are always a string, even when not exist they are ""
      var elemId = this._maskingService.maskAbsoluteIfRequired(elem.id, elem.id);
      var elemName = this._maskingService.maskAbsoluteIfRequired(elem.name, elem.id);
      // we are using getAttribute and not class since it is working also on none HTML elements such as SVG.
      // Without it in SVG it returns an object
      var elemClass = this._collectClassName ? elem.getAttribute && this._verifyNoPrivateData(elem.getAttribute('class')) || '' : '';
      var elemTitle = this._collectTitle ? this._verifyNoPrivateData(elem.title) || '' : ''; // title is the tooltip
      var elemTagName = this._verifyNoPrivateData(elem.nodeName) || '';
      var elemHref = this._collectHref ? this._verifyNoPrivateData(elem.href) || '' : ''; // href returns undefined when not exist
      if (elemHref.length > 0) {
        elemHref = this._utils.clearTextFromNumbers(elemHref);
      }
      var elemCustomElementAttribute = this._collectCustomElementAttribute ? elem.getAttribute && this._verifyNoPrivateData(elem.getAttribute(this._customElementAttribute)) || '' : '';

      //we also check if there are customAttributes that need to be masked by checking its name against the masking list
      var maskedElemCustomElementAttribute = this._maskingService.maskAbsoluteIfRequired(elemCustomElementAttribute, elem.id);
      var selectValues = '';
      if (elem.nodeName === 'SELECT') {
        selectValues = this._utils.getDropDownListValues(elem, this._maskingService).join(';');
      }

      // element value should be taken first because that's whats important
      // when the field is loaded if already contains data,
      // other fields not input are less important
      var elemValue = elem.value || elem.textContent || elem.innerHTML || '';
      var unmaskedString = '';
      if (this._enableUnmaskedValues && Array.isArray(this._allowedUnmaskedValuesList) && this._allowedUnmaskedValuesList.length > 0) {
        this._allowedUnmaskedValuesList.forEach(function (listValue) {
          if (typeof listValue !== 'string') {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Unsupported allowedUnmaksedValuesList value was provided: ".concat(listValue.toString()));
          } else if (listValue.toLowerCase() === elemValue.trim().toLowerCase()) {
            unmaskedString = listValue;
          }
        });
      }
      if (elemValue.length > this._maxElemValLength) {
        // This is probably the innerHTML of some DIV / FORM / other element that was
        // clicked in the screen and has no meaning (empty area) and we do not want to collect this data
        elemValue = '';
      } else {
        elemValue = this._maskingService.maskText(elemValue, elem.id);
      }
      var checked = this._utils.isUndefinedNull(elem.checked) ? -1 : elem.checked ? 1 : 0;
      var time = this.getEventTimestamp();
      var elementHierarchyAndIndex = this.enableElementHierarchy ? _technicalServices_ElementStrengthen__WEBPACK_IMPORTED_MODULE_3__.ElementStrengthenInstance.getUniqueElementId(elem, this._uniqueIDConfiguration) : '';
      var category = this._enableElementCategory ? this._categoryService.categoryField(elem) : '';
      var data = [this._contextMgr.contextHash, hash, elemTagName || '', elemId || '', elemName || '', elem.type || '', left || 0, top || 0, width || 0, height || 0, elemClass || '', elemHref || '', elemTitle || '', elem.alt || '',
      // elements that have no support in alt will return undefined
      selectValues || '', elemValue || '', checked, time, maskedElemCustomElementAttribute || elemCustomElementAttribute, unmaskedString, elementHierarchyAndIndex, category];
      if (this._isCollectorsV2) {
        // dataQueue === devDebugDataQ
        // Therefore name is not important.
        this._dataQueue.addToQueue('', ['elements_v2', data, false]);
      } else {
        this._dataQueue.addToQueue('elements', data, false);
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].isDebug() && _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('adding element id:' + elemId + ', name:' + elemName + ', type:' + elem.type + ', width:' + width + ', height:' + height + ', left:' + left + ', top:' + top + ', hash: ' + hash);
    }
  }, {
    key: "_verifyNoPrivateData",
    value: function _verifyNoPrivateData(data) {
      if (/\d\d\d/.test(data)) {
        return this._utils.clearTextFromNumbers(data);
      }
      return data;
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var _this$_categoryServic;
      this._collectPosition = typeof this._configurationRepository.get('isElementsPosition') === 'boolean' ? this._configurationRepository.get('isElementsPosition') : this._collectPosition;
      this._collectClassName = typeof this._configurationRepository.get('isElementsClassName') === 'boolean' ? this._configurationRepository.get('isElementsClassName') : this._collectClassName;
      this._collectTitle = typeof this._configurationRepository.get('isElementsTitle') === 'boolean' ? this._configurationRepository.get('isElementsTitle') : this._collectTitle;
      this._collectHref = typeof this._configurationRepository.get('isElementsHref') === 'boolean' ? this._configurationRepository.get('isElementsHref') : this._collectHref;
      this._collectCustomElementAttribute = typeof this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.collectCustomElementAttribute) === 'boolean' ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.collectCustomElementAttribute) : this._collectCustomElementAttribute;
      this._customElementAttribute = typeof this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.customElementAttribute) === 'string' ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.customElementAttribute) : this._customElementAttribute;
      this._maxElemValLength = this._configurationRepository.get('maxElValLen') ? this._configurationRepository.get('maxElValLen') : this._maxElemValLength;
      this._allowedUnmaskedValuesList = this._configurationRepository.get('allowedUnmaskedValuesList') ? this._configurationRepository.get('allowedUnmaskedValuesList') : this._allowedUnmaskedValuesList;
      this._enableUnmaskedValues = this._configurationRepository.get('enableUnmaskedValues') ? this._configurationRepository.get('enableUnmaskedValues') : this._enableUnmaskedValues;
      this._enableElementHierarchy = typeof this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementHierarchy) === 'boolean' ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementHierarchy) : this._enableElementHierarchy;
      this._enableElementCategory = typeof this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementCategory) === 'boolean' ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableElementCategory) : this._enableElementCategory;
      this._uniqueIDConfiguration = typeof this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementUniqueIDConfiguration) === 'string' ? _technicalServices_UniqueIDConfiguration__WEBPACK_IMPORTED_MODULE_4__.UniqueIDConfiguration.parse(this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementUniqueIDConfiguration)) : this._uniqueIDConfiguration;
      (_this$_categoryServic = this._categoryService) === null || _this$_categoryServic === void 0 || _this$_categoryServic.onConfigUpdate(this._configurationRepository);
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/Event.js":
/*!*********************************************!*\
  !*** ./src/main/collectors/events/Event.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Event; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var Event = /*#__PURE__*/function () {
  function Event() {
    _classCallCheck(this, Event);
  }
  return _createClass(Event, [{
    key: "getEventTimestamp",
    value:
    // There is a bug in jquery (1.7.1) that timestamp doesn't work correctly (ie, firefox)
    // The bug is defined in http://bugs.jquery.com/ticket/10755
    // The timestamp in FF is from the opening of the browser
    // timestamp doesn't always exist
    function getEventTimestamp() {
      return _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].dateNow();
    }
  }, {
    key: "getTimestampFromEvent",
    value: function getTimestampFromEvent(e) {
      return e.timeStamp ? _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cutDecimalPointDigits(e.timeStamp, 3) : 0;
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}
  }, {
    key: "processElements",
    value: function processElements(elements, isChange, elementsHandler, resendMethod, getMethod) {
      elements.forEach(function (element) {
        var isListed = elementsHandler.isListed(element);
        if (isListed && !isChange) {
          resendMethod.call(elementsHandler, element);
        } else if (!isListed) {
          getMethod.call(elementsHandler, element, false);
        }
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/events/FormEvents.js":
/*!**************************************************!*\
  !*** ./src/main/collectors/events/FormEvents.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onFormSelectors: function() { return /* binding */ onFormSelectors; }
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./src/main/collectors/events/Event.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var onFormSelectors = 'form';
var FormEvents = /*#__PURE__*/function (_Event) {
  /**
   *
   * @param sendToQueue
   * @param MessageBus
   * @param StandardOnFormEventsEmitter
   */
  function FormEvents(sendToQueue, MessageBus, StandardOnFormEventsEmitter, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, FormEvents);
    _this = _callSuper(this, FormEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnFormEvents", function (e) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace('ElementEvents:_onFormSubmitEvent');
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    _this._sendToQueue = sendToQueue;
    _this._messageBus = MessageBus;
    _this._StandardOnFormEventsEmitter = StandardOnFormEventsEmitter;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(FormEvents, _Event);
  return _createClass(FormEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      var doc = browserContext.getDocument();
      browserContext.collectAllElementsBySelectorAsync(onFormSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onFormElements) {
        _this2._StandardOnFormEventsEmitter.start(_onFormElements);
      });
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.StandardOnFormSubmitEvent, this.handleOnFormEvents);
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      browserContext.collectAllElementsBySelectorAsync(onFormSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onFormElements) {
        _this3._StandardOnFormEventsEmitter.stop(_onFormElements);
      });
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.StandardOnFormSubmitEvent, this.handleOnFormEvents);
    }
  }]);
}(_Event__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (FormEvents);

/***/ }),

/***/ "./src/main/collectors/events/InputEvents.js":
/*!***************************************************!*\
  !*** ./src/main/collectors/events/InputEvents.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   inputSelectors: function() { return /* binding */ inputSelectors; }
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./src/main/collectors/events/Event.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var inputSelectors = "input:not([type='color']):not([type='hidden']):not([type='file']):not" + "([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea";

/**
 * Private instance of the input events data collector
 * @param eventEmitter
 * @param maxShadowDepth
 * @returns {{applyAction: _applyAction}}
 * @private
 */
var _InputEventsCollector = function _InputEventsCollector(eventEmitter, maxShadowDepth, iframeLoadingTimeout) {
  function _applyAction(browserContext, action, shouldSkipElement) {
    var supportedActions = ['start', 'stop'];
    if (!supportedActions.includes(action)) return false;
    browserContext.collectAllElementsBySelectorAsync(inputSelectors, maxShadowDepth, iframeLoadingTimeout).then(function (elements) {
      if (elements.length > 0) {
        eventEmitter[action](elements, browserContext.Context, shouldSkipElement);
      }
    });
  }
  return {
    applyAction: _applyAction
  };
};

/**
 * InputEvents Data Collector. Controlled by ElementsEvent Data Collector
 */
var InputEvents = /*#__PURE__*/function (_Event) {
  function InputEvents(elements, sendToQueue, CDUtils, MessageBus, StandardInputEventsEmitter, SyntheticMaskInputEventsHandler, SyntheticAutotabInputEventsHandler, MaskingService, categoryService, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, InputEvents);
    _this = _callSuper(this, InputEvents);
    /**
     * Receive the requested event from the handler
     */
    _defineProperty(_this, "handleInputEvents", function (e) {
      if (e.constructor.name === 'InputEvent') {
        _this._inputEventsPerElement.set(e.target, {});
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = _this._maskingService.maskText(newValue, e.target.id);
      }
      _this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleFocusBlurEvents", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleSyntheticInputEvents", function (e) {
      // jQuery autotab plugin special handling!
      // Backspace keys are not reported as custom input events in case of jQuery autotab plugin is applied on
      // the current target.
      // This allows any other subsequent custom key events (that are not backspace) to be reported as
      // input events despite having the current target hashed in _inputEventNameTags
      if (!!_this._inputEventsPerElement.has(e.target) && !(typeof e.jQueryMask !== 'undefined' && (e.jQueryMask === 'autotab' || e.jQueryMask === 'prasleyValidator'))) {
        return;
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = _this._maskingService.maskText(newValue, e.target.id);
      }
      _this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._messageBus = MessageBus;
    _this._CDUtils = CDUtils;
    _this._StandardInputEventsEmitter = StandardInputEventsEmitter;
    _this._SyntheticMaskInputEventsHandler = SyntheticMaskInputEventsHandler;
    _this._SyntheticAutotabInputEventsHandler = SyntheticAutotabInputEventsHandler;
    _this._maskingService = MaskingService;
    _this._categoryService = categoryService;
    _this._inputEventsPerElement = new WeakMap();
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(InputEvents, _Event);
  return _createClass(InputEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputEvent, this.handleInputEvents);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputFocusEvent, this.handleFocusBlurEvents);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputBlurEvent, this.handleFocusBlurEvents);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.SyntheticInputMaskEvent, this.handleSyntheticInputEvents);
      _InputEventsCollector(this._StandardInputEventsEmitter, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
      _InputEventsCollector(this._SyntheticMaskInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
      _InputEventsCollector(this._SyntheticAutotabInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      _InputEventsCollector(this._StandardInputEventsEmitter, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      _InputEventsCollector(this._SyntheticMaskInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      _InputEventsCollector(this._SyntheticAutotabInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputEvent, this.handleInputEvents);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputFocusEvent, this.handleFocusBlurEvents);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputBlurEvent, this.handleFocusBlurEvents);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.SyntheticInputMaskEvent, this.handleSyntheticInputEvents);
    }

    /**
     * @param {BrowserContext} browserContext
     * @param isChange
     */
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this2 = this;
      browserContext.collectAllElementsBySelectorAsync(inputSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (elements) {
        _this2.processElements(elements, isChange, _this2._elements, _this2._elements.resendElementPerContext, _this2._elements.getElement);
      });
    }
  }]);
}(_Event__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (InputEvents);

/***/ }),

/***/ "./src/main/collectors/events/IsTrustedValue.js":
/*!******************************************************!*\
  !*** ./src/main/collectors/events/IsTrustedValue.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IsTrustedValue: function() { return /* binding */ IsTrustedValue; }
/* harmony export */ });
var IsTrustedValue = {
  "false": 0,
  "true": 1,
  undefined: 2,
  "null": 2
};

/***/ }),

/***/ "./src/main/collectors/events/KeyEventCollector.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/KeyEventCollector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   KeyEventType: function() { return /* binding */ KeyEventType; },
/* harmony export */   "default": function() { return /* binding */ KeyEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _services_SameCharService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/SameCharService */ "./src/main/services/SameCharService.js");
/* harmony import */ var _KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./KeyRegionsStringTable */ "./src/main/collectors/events/KeyRegionsStringTable.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }







var featureSettings = {
  configKey: 'isKeyEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var KeyEventType = {
  keyup: 0,
  keydown: 1,
  keypress: 2
};
var DEFAULT_KEY_REGION_VALUE = '-1';
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'charCode', 'character', 'keyComboType', 'isCtrl', 'isShift', 'isAlt', 'isMetaKey', 'keyLocation', 'code', 'key', 'isRepeat', 'keyRegion', 'relativeTime', 'isSameKey'];
var KeyEventCollector = /*#__PURE__*/function (_DataCollector) {
  function KeyEventCollector(configurationRepository, utils, elements, dataQueue, msgbus, sameCharService, maskingService, startupConfigurations) {
    var _this;
    _classCallCheck(this, KeyEventCollector);
    _this = _callSuper(this, KeyEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._elements = elements;
    _this._dataQueue = dataQueue;
    _this._msgBus = msgbus;
    _this._sameCharService = sameCharService;
    _this._maskingService = maskingService;
    _this._maxShadowDepth = startupConfigurations.getMaxShadowDepth();
    _this._iframeLoadingTimeout = startupConfigurations.getIframeLoadingTimeout();

    // ctrl+c, ctrl+v, ctrl+a, ctrl+x, ctrl+z, ctrl+p, ctrl+s
    _this.comboCodes = ['c', 'v', 'a', 'x', 'z', 'p', 's'];
    _this._onKeyEvent = _this._onKeyEvent.bind(_this);
    _this._useCaptureEvents = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.isCaptureKeyEvents);
    _this._listeners = [];
    _this._listenedDocuments = new WeakSet();
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(KeyEventCollector, _DataCollector);
  return _createClass(KeyEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._bind(currDocument, this._onKeyEvent, this._useCaptureEvents);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._bind(iframe.contentDocument, _this2._onKeyEvent, _this2._useCaptureEvents);
            }
          });
        });
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].error("KeyEvents:startFeature failed, msg: ".concat(err.message), err);
      }
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._unbind(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this3._unbind(iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].error("KeyEvents:stopFeature failed, msg: ".concat(err.message), err);
      }
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(browserContext) {
      try {
        if (this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.isCaptureKeyEvents) !== this._useCaptureEvents) {
          var currDocument = browserContext.getDocument();
          var useCaptureEvents = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.isCaptureKeyEvents);

          // Remove current subscribers
          this._unbind(currDocument);

          // Subscribe using the new capture definition
          this._bind(currDocument, this._onKeyEvent, useCaptureEvents);
          this._useCaptureEvents = useCaptureEvents;
        }
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].error("KeyEvents:startFeature failed, msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_bind",
    value: function _bind(document, handler, isCapture) {
      if (this._listenedDocuments.has(document)) {
        return; // Already added
      }
      this._listenedDocuments.add(document);
      this._addListener(document, 'keyup', handler, isCapture);
      this._addListener(document, 'keydown', handler, isCapture);
      this._addListener(document, 'keypress', handler, isCapture);
    }
  }, {
    key: "_unbind",
    value: function _unbind(document) {
      this._listenedDocuments["delete"](document);
      this._removeAllListeners(document, 'keyup');
      this._removeAllListeners(document, 'keydown');
      this._removeAllListeners(document, 'keypress');
    }
  }, {
    key: "_addListener",
    value: function _addListener(target, type, handler, options) {
      target.addEventListener(type, handler, options);
      this._listeners.push({
        target: target,
        type: type,
        handler: handler,
        options: options
      });
    }
  }, {
    key: "_removeAllListeners",
    value: function _removeAllListeners(target, type) {
      this._listeners.filter(function (l) {
        return l.target === target && l.type === type;
      }).forEach(function (l) {
        l.target.removeEventListener(l.type, l.handler, l.options);
      });
      this._listeners = this._listeners.filter(function (l) {
        return !(l.target === target && l.type === type);
      });
    }
  }, {
    key: "_onKeyEvent",
    value: function _onKeyEvent(e) {
      var type = KeyEventType[e.type];
      if (type === KeyEventType.keydown || type === KeyEventType.keyup) {
        this._msgBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.KeyEvent, {
          action: type
        });
      }
      this._handleKeyEvent(e, 'key_events');
    }
  }, {
    key: "_handleKeyEvent",
    value: function _handleKeyEvent(e, eventName) {
      //get element id for masking
      var element = this._elements.getRealEventTarget(e);
      var elementID = element.id;
      var eventType = KeyEventType[e.type];
      if (this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var eventSequence = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = this.getEventTimestamp(e);
      var eventKey = e.key || this._maskingService.getKeyFromLegacyProperties(e);
      var eventCode = e.code || '';
      var KeyMaskedParameters = this._maskingService.maskKey(eventKey, eventCode, elementID);
      var character = KeyMaskedParameters.key.length > 1 ? '' : KeyMaskedParameters.key;
      var elementHash = this._elements.getElementHashFromEvent(e);
      // make sure it doesn't count double
      var keyComboType = this._getComboType(e, eventKey); // only on keydown
      var isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__.IsTrustedValue[e.isTrusted];
      var metaKey = e.key === 'Meta' || e.key === 'OS' || e.key === 'Win' || e.metaKey || e.keyCode === 91 || e.keyCode === 92;
      var keyRegion = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.collectKeyRegionValue) ? this._getKeyRegion(eventCode) : DEFAULT_KEY_REGION_VALUE;
      var relativeTs = this.getTimestampFromEvent(e);
      var isSameKey = _services_SameCharService__WEBPACK_IMPORTED_MODULE_5__.SameCharType.undefined;
      if (e.type === 'keypress') {
        isSameKey = this._sameCharService.compare(e.target, e.key);
        this._sameCharService.update(e.target, e.key);
      }

      // the if is for performance optimization
      if (_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].isDebug()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].trace("onKeyEvent: got event: ".concat(eventType, ", at time:").concat(timestamp, ", key: ").concat(KeyMaskedParameters.key, ", code:").concat(KeyMaskedParameters.code, ", old charCode:").concat(KeyMaskedParameters.charCode));
      }
      this._dataQueue.addToQueue(eventName, this._utils.convertToArrayByMap(EventStructure, {
        eventType: eventType,
        eventSequence: eventSequence,
        timestamp: timestamp,
        charCode: KeyMaskedParameters.charCode,
        character: character,
        elementHash: elementHash,
        keyComboType: keyComboType,
        isTrusted: isTrusted,
        isCtrl: e.ctrlKey || false,
        isShift: e.shiftKey || false,
        isAlt: e.altKey || false,
        isMetaKey: metaKey || false,
        keyLocation: e.location || 0,
        code: KeyMaskedParameters.code || '',
        key: KeyMaskedParameters.key || '',
        location: e.location || '',
        isRepeat: e.repeat || false,
        // is pressed repeatedly,
        keyRegion: keyRegion,
        relativeTime: relativeTs,
        isSameKey: isSameKey
      }));
    }
  }, {
    key: "_getKeyRegion",
    value: function _getKeyRegion(code) {
      return _KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_6__.KeyRegionsStringTable[code] ? _KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_6__.KeyRegionsStringTable[code] : DEFAULT_KEY_REGION_VALUE;
    }
  }, {
    key: "_getComboType",
    value: function _getComboType(e, eventKey) {
      return (e.ctrlKey || e.metaKey) && eventKey !== undefined ? this.comboCodes.indexOf(eventKey) : -1;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/KeyRegionsStringTable.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/events/KeyRegionsStringTable.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KeyRegionsStringTable: function() { return /* binding */ KeyRegionsStringTable; }
/* harmony export */ });
/**
 * This table will give more information about the whe user uses the keyboard, by mapping
 * keyboard regions - each region of physical keys receives a key
 *
 */
var KeyRegionsStringTable = {
  'IntlBackslash': '0',
  'Digit1': '0',
  'Digit2': '0',
  'Digit3': '0',
  'Digit4': '1',
  'Digit5': '1',
  'Digit6': '1',
  'Digit7': '1',
  'Digit8': '2',
  'Digit9': '2',
  'Digit0': '2',
  'KeyQ': '3',
  'KeyW': '3',
  'KeyE': '3',
  'KeyA': '3',
  'KeyS': '3',
  'KeyD': '3',
  'KeyZ': '3',
  'KeyX': '3',
  'KeyC': '3',
  'KeyR': '4',
  'KeyT': '4',
  'KeyF': '4',
  'KeyG': '4',
  'KeyV': '4',
  'KeyB': '4',
  'KeyY': '5',
  'KeyU': '5',
  'KeyH': '5',
  'KeyJ': '5',
  'KeyN': '5',
  'KeyM': '5',
  'KeyI': '6',
  'KeyO': '6',
  'KeyP': '6',
  'KeyK': '6',
  'KeyL': '6',
  'Comma': '6',
  'Period': '6',
  'Semicolon': '7',
  'Minus': '7',
  'Equal': '7',
  'Slash': '7',
  'BracketLeft': '7',
  'Backslash': '7',
  'BracketRight': '7',
  'Quote': '7',
  'NumLock': '8',
  'NumpadDivide': '8',
  'NumpadMultiply': '8',
  'NumpadSubtract': '8',
  'NumpadAdd': '8',
  'NumpadEnter': '8',
  'NumpadDecimal': '8',
  'Numpad0': '8',
  'Numpad1': '8',
  'Numpad2': '8',
  'Numpad3': '8',
  'Numpad4': '8',
  'Numpad5': '8',
  'Numpad6': '8',
  'Numpad7': '8',
  'Numpad8': '8',
  'Numpad9': '8'
};

/***/ }),

/***/ "./src/main/collectors/events/LevenshteinDistanceCollector.js":
/*!********************************************************************!*\
  !*** ./src/main/collectors/events/LevenshteinDistanceCollector.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ LevenshteinDistanceCollector; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var CATEGORY_FIRST_NAME = '0100';
var CATEGORY_LAST_NAME = '0101';
var CATEGORY_EMAIL = '0103';
var wasmModuleDefaultName = 'cdld';
var levenshteinScoreFunction = 'levenshtein';
var levenshteinMatchEmailFunction = 'matchNameEmail';
var featureSettings = {
  configKey: 'isLevenshteinDistanceCollector',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'similarity', 'score'];

/**
 * This collector relies on external WASM modules provided using startup configurations.
 * The collector is responsible for loading the WASM module and using its functions to calculate the Levenshtein distance
 * between a name and an email address.
 * It listens to events of type `MessageBusEventType.LevenshteinDistance` to receive updates on the name and email,
 * The elements from which the name and email are collected are detected by the categoryService
 */
var LevenshteinDistanceCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   *
   * @param utils
   * @param configurationRepository
   * @param dataQ
   * @param MessageBus
   * @param moduleLoader {WasmModuleLoader}
   * @param categoryService {CategoryService} URL to the WASM module, if not provided it will use the default one
   */
  function LevenshteinDistanceCollector(utils, configurationRepository, dataQ, MessageBus, moduleLoader, categoryService) {
    var _this;
    _classCallCheck(this, LevenshteinDistanceCollector);
    _this = _callSuper(this, LevenshteinDistanceCollector);
    /**
     * detect browsers by feature detection since user agent can lie
     */
    _defineProperty(_this, "_handleLevenshteinDistanceEvent", function (e) {
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // call LevenshteinDistanceFeature event
        var category = _this._categoryService.categoryField(e.target);
        if (category === CATEGORY_FIRST_NAME || category === CATEGORY_LAST_NAME) {
          _this.name = newValue;
        }
        if (category === CATEGORY_EMAIL) {
          _this.email = newValue;
        }
        // Makes sure we have DistanceMeasure on the window,
        // also makes sure both name & email exists and not empty
        if (_this.name && _this.email) {
          var time = _this.getEventTimestamp();
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var score = _this._levenshteinScoreFunction(_this.name, _this.email);
          var match = _this._levenshteinMatchEmailFunction(_this.name, _this.email);
          _this._dataQ.addToQueue('similarity_score', _this._utils.convertToArrayByMap(EventStructure, {
            eventSequence: eventSeq,
            timestamp: time,
            similarity: match,
            score: score
          }));
        }
      }
    });
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._dataQ = dataQ;
    _this._messageBus = MessageBus;
    _this._moduleLoader = moduleLoader;
    _this._categoryService = categoryService;
    _this._levenshteinScoreFunction = null;
    _this._levenshteinMatchEmailFunction = null;
    _this._boundHandleLevenshteinDistanceEvent = _this._handleLevenshteinDistanceEvent.bind(_this);
    return _this;
  }
  _inherits(LevenshteinDistanceCollector, _DataCollector);
  return _createClass(LevenshteinDistanceCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(LevenshteinDistanceCollector, "startFeature", this, 3)([]);
      this._moduleLoader.loadExternalWASMModuleByName(wasmModuleDefaultName, this._loadWasmMethod.bind(this));
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      _superPropGet(LevenshteinDistanceCollector, "stopFeature", this, 3)([]);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.StandardInputBlurEvent, this._boundHandleLevenshteinDistanceEvent);
    }

    /**
     * Do not subscribe to events until callback is successfully called
     * @param wasmModule
     * @private
     */
  }, {
    key: "_loadWasmMethod",
    value: function _loadWasmMethod(wasmModule) {
      if (wasmModule && wasmModule[levenshteinScoreFunction] && typeof wasmModule[levenshteinScoreFunction] === 'function' && typeof wasmModule[levenshteinMatchEmailFunction] === 'function') {
        this._levenshteinScoreFunction = wasmModule[levenshteinScoreFunction];
        this._levenshteinMatchEmailFunction = wasmModule[levenshteinMatchEmailFunction];
        this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.StandardInputBlurEvent, this._boundHandleLevenshteinDistanceEvent);
      } else {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Failed to load Levenshtein distance function from wasm module');
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/LightSensorEventCollector.js":
/*!*****************************************************************!*\
  !*** ./src/main/collectors/events/LightSensorEventCollector.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ LightSensorEvents; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * the sensor reading happens all the time, we don't need all the readings
 * @type {number}
 */


var featureSettings = {
  configKey: 'isLightSensor',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var SENSOR_EVENT_THRESHOLD = 5000;
var EventStructure = ['eventSequence', 'timestamp', 'illuminance'];
var LightSensorEvents = /*#__PURE__*/function (_DataCollector) {
  function LightSensorEvents(dataQueue, utils, configurationRepository) {
    var _this;
    _classCallCheck(this, LightSensorEvents);
    _this = _callSuper(this, LightSensorEvents);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._eventThreshold = _this._configurationRepository.get('lightSensorEventThreshold') || SENSOR_EVENT_THRESHOLD;
    _this._lastTime = 0;
    // Bind the event handlers
    _this.onReadingSensorBoundble = _this._onReadingSensor.bind(_this);
    return _this;
  }
  _inherits(LightSensorEvents, _DataCollector);
  return _createClass(LightSensorEvents, [{
    key: "_onReadingSensor",
    value: function _onReadingSensor() {
      var time = this.getEventTimestamp();
      if (time - this._lastTime > this._eventThreshold) {
        var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        this._lastTime = time;
        this._dataQueue.addToQueue('ambient_light_level', this._utils.convertToArrayByMap(EventStructure, {
          eventSequence: eventSeq,
          timestamp: time,
          illuminance: this._sensor.illuminance
        }));
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      if (!window.AmbientLightSensor) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('LightSensor does not exist, not collecting');
        return;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('AmbientLightSensor exists and collected');
      this._sensor = new AmbientLightSensor();
      this._sensor.addEventListener('reading', this.onReadingSensorBoundble, true);
      this._sensor.addEventListener('error', LightSensorEvents._onSensorError, true);
      this._sensor.start();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._sensor) {
        this._sensor.removeEventListener('reading', this.onReadingSensorBoundble, true);
        this._sensor.removeEventListener('error', LightSensorEvents._onSensorError, true);
        this._sensor.stop();
        this._sensor = null;
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._eventThreshold = this._configurationRepository.get('lightSensorEventThreshold') ? this._configurationRepository.get('lightSensorEventThreshold') : this._eventThreshold;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "_onSensorError",
    value: function _onSensorError(event) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error connecting LightSensor ".concat(event.error));
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/LocationCollector.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/LocationCollector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ LocationCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Collect the user permissions granted to the domain. The permissions are per domain and
 * different from browser to browser. There are 3 possible values: granted, prompt, denied
 *  Supported in: Chrome, FF, Opera
 *  collecting the Geolocation of the user only if the permissions is granted
 */



var featureSettings = {
  configKey: 'isLocationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'longitude', 'latitude', 'accuracy', 'speed', 'provider'];
var LocationCollector = /*#__PURE__*/function (_DataCollector) {
  function LocationCollector(dataQ, utils, configurationRepository) {
    var _this;
    var navigator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : window.navigator;
    _classCallCheck(this, LocationCollector);
    _this = _callSuper(this, LocationCollector);
    _defineProperty(_this, "_subscribeForLocationEvents", function () {
      // Unsubscribe from any existing events
      _this._unsubscribeFromLocationEvents();
      _this._watcherID = _this._navigator.geolocation.watchPosition(_this._onGeoLocationPositionEvent, _this._onGeoLocationPositionError);

      // Cancel an existing timeouts before setting up a new one
      _this._clearLocationEventsTimeout();
      _this._locationEventsTimeoutID = setTimeout(function () {
        _this._unsubscribeFromLocationEvents();
      });
    });
    _defineProperty(_this, "_unsubscribeFromLocationEvents", function () {
      _this._clearLocationEventsTimeout();

      // If there is no watch we abort at this point.
      if (!_this._watcherID) {
        return;
      }
      _this._navigator.geolocation.clearWatch(_this._watcherID);
      _this._watcherID = null;
    });
    _defineProperty(_this, "_onGeoLocationPositionEvent", function (position) {
      _this._sendData(position);
    });
    _defineProperty(_this, "_onGeoLocationPositionError", function (err) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Failed getting geolocation with code ".concat(err.code, ". ").concat(err.message));
    });
    _this._configurationRepository = configurationRepository;
    _this._locationEventsTimeoutMsec = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.locationEventsTimeoutMsec);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    _this._watcherID = null;
    _this._locationEventsTimeoutID = null;
    return _this;
  }
  _inherits(LocationCollector, _DataCollector);
  return _createClass(LocationCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._subscribeForLocationIfPermissionGranted();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._unsubscribeFromLocationEvents();
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      try {
        if (this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.locationEventsTimeoutMsec) !== this._locationEventsTimeoutMsec) {
          this._locationEventsTimeoutMsec = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.locationEventsTimeoutMsec);
        }
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("LocationEvents: updateFeatureConfig failed, msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_subscribeForLocationIfPermissionGranted",
    value: function _subscribeForLocationIfPermissionGranted() {
      var _this2 = this;
      if (this._navigator.permissions && this._navigator.permissions.query) {
        this._navigator.permissions.query({
          name: 'geolocation'
        }).then(function (result) {
          if (result.state === 'granted') {
            _this2._subscribeForLocationEvents();
          } else {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('location permission is denied. Location data will not be collected');
          }
        })["catch"](function (ex) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed querying for geolocation permission. ".concat(ex.message));
        });
      }
    }
  }, {
    key: "_clearLocationEventsTimeout",
    value: function _clearLocationEventsTimeout() {
      if (this._locationEventsTimeoutID) {
        clearTimeout(this._locationEventsTimeoutID);
      }
      this._locationEventsTimeoutID = null;
    }
  }, {
    key: "_sendData",
    value: function _sendData(pos) {
      var crd = pos.coords;
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var time = this.getEventTimestamp();
      this._dataQ.addToQueue('location_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        longitude: crd.longitude || -1,
        latitude: crd.latitude || -1,
        accuracy: crd.accuracy || -1,
        speed: crd.speed || -1,
        provider: ''
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/MainThreadBlockingCollector.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/events/MainThreadBlockingCollector.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BlockingEventType: function() { return /* binding */ BlockingEventType; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ MainThreadBlockingCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isMainThreadBlocking',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var BlockingEventType = {
  mainThreadBlocked: 0
};
var DEFAULT_BLOCKING_THRESHOLD = 200;
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'blockingDuration', 'attribution'];
var MainThreadBlockingCollector = /*#__PURE__*/function (_DataCollector) {
  function MainThreadBlockingCollector(configurationRepository, utils, dataQueue) {
    var _this;
    _classCallCheck(this, MainThreadBlockingCollector);
    _this = _callSuper(this, MainThreadBlockingCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._blockingThreshold = DEFAULT_BLOCKING_THRESHOLD;
    _this._performanceObserver = null;
    return _this;
  }
  _inherits(MainThreadBlockingCollector, _DataCollector);
  return _createClass(MainThreadBlockingCollector, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      if (!this._isPerformanceObserverSupported()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace('MainThreadBlocking: PerformanceObserver not supported, feature disabled');
        return;
      }
      this._performanceObserver = new PerformanceObserver(function (list) {
        list.getEntries().forEach(function (entry) {
          if (entry.entryType === 'longtask' && entry.duration >= _this2._blockingThreshold) {
            _this2._onBlocking(entry);
          }
        });
      });
      this._performanceObserver.observe({
        entryTypes: ['longtask']
      });
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace('MainThreadBlocking: Feature started using PerformanceObserver');
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._performanceObserver) {
        this._performanceObserver.disconnect();
        this._performanceObserver = null;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace('MainThreadBlocking: Feature stopped');
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var newThreshold = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.mainThreadBlockingThreshold) || DEFAULT_BLOCKING_THRESHOLD;
      if (newThreshold !== this._blockingThreshold) {
        this._blockingThreshold = newThreshold;
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace("MainThreadBlocking: Threshold updated to ".concat(this._blockingThreshold, "ms"));
      }
    }
  }, {
    key: "_isPerformanceObserverSupported",
    value: function _isPerformanceObserverSupported() {
      var _PerformanceObserver$;
      return 'PerformanceObserver' in window && ((_PerformanceObserver$ = PerformanceObserver.supportedEntryTypes) === null || _PerformanceObserver$ === void 0 ? void 0 : _PerformanceObserver$.includes('longtask'));
    }
  }, {
    key: "_extractAttribution",
    value: function _extractAttribution(entry) {
      var attribution = null;

      // Extract attribution data if available
      if (entry.attribution && entry.attribution.length > 0) {
        var firstAttribution = entry.attribution[0];

        // Combine script URL and line into "url/line" format
        if (firstAttribution.scriptURL && firstAttribution.scriptLine) {
          attribution = "".concat(firstAttribution.scriptURL, "/").concat(firstAttribution.scriptLine);
        } else if (firstAttribution.scriptURL) {
          attribution = firstAttribution.scriptURL;
        }
      }
      return attribution;
    }
  }, {
    key: "_onBlocking",
    value: function _onBlocking(entry) {
      var eventSequence = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = this.getEventTimestamp({
        timeStamp: performance.now()
      });
      var attribution = this._extractAttribution(entry);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("MainThreadBlocking: Blocking detected - ".concat(entry.duration.toFixed(2), "ms, attribution: ").concat(attribution));
      this._dataQueue.addToQueue('main_thread_blocking', this._utils.convertToArrayByMap(EventStructure, {
        eventType: BlockingEventType.mainThreadBlocked,
        eventSequence: eventSequence,
        timestamp: timestamp,
        blockingDuration: entry.duration,
        attribution: attribution
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/MouseEventCollector.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/events/MouseEventCollector.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   MouseEventType: function() { return /* binding */ MouseEventType; },
/* harmony export */   "default": function() { return /* binding */ MouseEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var featureSettings = {
  configKey: 'isMouseEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var MouseEventType = {
  mousemove: 0,
  mousedown: 1,
  mouseup: 2,
  click: 3,
  dblclick: 4,
  mouseleave: 5,
  mouseenter: 6,
  wheel: 7,
  mouseout: 8,
  mouseover: 9
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'pageX', 'pageY', 'screenX', 'screenY', 'button', 'wheelDelta', 'clientX', 'clientY', 'eventDetail', 'buttonNew', 'relativeTime', 'pressure'];
var MouseEventCollector = /*#__PURE__*/function (_DataCollector) {
  function MouseEventCollector(utils, domUtils, elements, dataQueue, maskingService, configuration) {
    var _this;
    _classCallCheck(this, MouseEventCollector);
    _this = _callSuper(this, MouseEventCollector);
    // remembers the last button so that ie will know which click was clicked.
    _defineProperty(_this, "_lastButton", void 0);
    // remembers the last pointer down event pressure so that will be sent in the click event.
    // Due to DS limitations, the pointerdown event cannot be sent.
    _defineProperty(_this, "_lastPointerDownPressure", -1);
    _defineProperty(_this, "_getMouseEvent", function (e) {
      var _e$pressure;
      // wheel delta is only in the case of mousewheel
      var button = e.which;
      if (e.type === 'mouseup') {
        // remembers the last button so that IE will know which click was clicked.
        _this._lastButton = button;
      } else if (e.type === 'click' && button === 0) {
        // So IE will know which click was clicked.
        button = _this._lastButton;
      }
      var eventType = MouseEventType[e.type];
      if (_this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var wheelDelta = e.deltaY || e.deltaX || e.deltaZ || e.wheelDelta || 0;
      var relativeTs = _this.getTimestampFromEvent(e);
      // we are not using CDUtils.convertToArrayByMap here for optimization reasons

      // Transfer pressure from pointerdown to mousedown since pointerdown is not sent to the backend.
      var pressure = (_e$pressure = e.pressure) !== null && _e$pressure !== void 0 ? _e$pressure : -1;
      if (e.type === 'pointerdown') {
        _this._lastPointerDownPressure = pressure;
        return;
      } else if (e.type === 'mousedown') {
        if (_this._lastPointerDownPressure !== -1) {
          pressure = _this._lastPointerDownPressure;
        }
        _this._lastPointerDownPressure = -1;
      }
      _this._dataQueue.addToQueue('mouse_events', [null, _this._utils.StorageUtils.getAndUpdateEventSequenceNumber(), _this.getEventTimestamp(e), eventType, _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[e.isTrusted], e.type === 'mousemove' ? 0 : _this._elements.getElementHashFromEvent(e), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.pageX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.pageY), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.screenX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.screenY), button === null || button === undefined ? -1 : button,
      // In 2.0 the data team is not ready to handle vector yet. In 2.1 we should change it to be a vector
      Math.round(wheelDelta), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.clientX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : _this._roundCoordinate(e.clientY), e.detail || 0,
      // For click or dblclick events, UIEvent.detail is the current click count.
      // For mousedown or mouseup events, UIEvent.detail is 1 plus the current click count.
      // For all other UIEvent objects, UIEvent.detail is always zero.
      // We are using it since in Angular sites (AMEX) we are getting a click both on the
      // upper wrapper div which is transferred to the input. The way to distinguish between them
      // (besides the different element hash) is to look also on the event.detail
      e.button === null || e.button === undefined ? -1 : e.button, relativeTs,
      // Agentic-signal note:
      // - On pointer events we can get `e.pressure` (0/0.5) for `pointerdown` (often meaningful for some AI browsers/agents).
      // - Fallback is -1 when the platform does not expose pressure.
      pressure]);
    });
    _this._utils = utils;
    _this._domUtils = domUtils;
    _this._elements = elements;
    _this._dataQueue = dataQueue;
    _this._maskingService = maskingService;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    _this._listenedDocuments = new WeakSet();
    return _this;
  }
  _inherits(MouseEventCollector, _DataCollector);
  return _createClass(MouseEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._addEventListeners(browserContext, currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._addEventListeners(browserContext, iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("MouseEvents:startFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._removeEventListeners(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this3._removeEventListeners(iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("MouseEvents:stopFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_addEventListeners",
    value: function _addEventListeners(browserContext, currentDocument) {
      var _this4 = this;
      if (this._listenedDocuments.has(currentDocument)) {
        return; // Already added
      }
      this._listenedDocuments.add(currentDocument);
      this._domUtils.addEventListener(currentDocument, 'mousemove', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'mousedown', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'mouseup', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'click', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'dblclick', this._getMouseEvent, true);
      this._isIE = !!currentDocument.documentMode || /edge/.test(window.navigator.userAgent.toLowerCase());
      if (this._isIE) {
        // mouseleave and mouseenter events in IE and edge only work on the body and not
        // on the entire document
        this._domUtils.onDocumentBody(browserContext.Context, function () {
          _this4._domUtils.addEventListener(currentDocument.body, 'mouseleave', _this4._getMouseEvent);
          _this4._domUtils.addEventListener(currentDocument.body, 'mouseenter', _this4._getMouseEvent);
        });
      } else {
        this._domUtils.addEventListener(currentDocument, 'mouseleave', this._getMouseEvent);
        this._domUtils.addEventListener(currentDocument, 'mouseenter', this._getMouseEvent);
      }
      this._domUtils.addEventListener(currentDocument, 'wheel', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'pointerdown', this._getMouseEvent, true);
    }
  }, {
    key: "_removeEventListeners",
    value: function _removeEventListeners(currentDocument) {
      this._listenedDocuments["delete"](currentDocument);
      this._domUtils.removeEventListener(currentDocument, 'mousemove', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'mousedown', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'mouseup', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'click', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'dblclick', this._getMouseEvent, true);
      if (this._isIE) {
        this._domUtils.removeEventListener(currentDocument.body, 'mouseleave', this._getMouseEvent);
        this._domUtils.removeEventListener(currentDocument.body, 'mouseenter', this._getMouseEvent);
      } else {
        this._domUtils.removeEventListener(currentDocument, 'mouseleave', this._getMouseEvent);
        this._domUtils.removeEventListener(currentDocument, 'mouseenter', this._getMouseEvent);
      }
      this._domUtils.removeEventListener(currentDocument, 'wheel', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'pointerdown', this._getMouseEvent, true);
    }
  }, {
    key: "_roundCoordinate",
    value: function _roundCoordinate(coordinate) {
      if (coordinate) {
        return Math.round(coordinate);
      }
      return -1;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/NetInfoEventCollector.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/events/NetInfoEventCollector.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   "default": function() { return /* binding */ NetInfoEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isNetInfoEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'connectionType', 'effectiveType', 'downlinkMax', 'downlink', 'rtt', 'isSaveData'];
var NetInfoEventCollector = /*#__PURE__*/function (_DataCollector) {
  function NetInfoEventCollector(utils, dataQueue) {
    var _this;
    var connection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    _classCallCheck(this, NetInfoEventCollector);
    _this = _callSuper(this, NetInfoEventCollector);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._connection = connection;
    _this._boundOnChangeNetworkInfo = _this.onChangeNetworkInfo.bind(_this);
    return _this;
  }
  _inherits(NetInfoEventCollector, _DataCollector);
  return _createClass(NetInfoEventCollector, [{
    key: "onChangeNetworkInfo",
    value: function onChangeNetworkInfo() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('NetInfoEvents:onChangeNetworkInfo');
      // I stringify the downlinkMax since on wifi it is Infinity (number) and server side will not handle it...
      var saveData = this._utils.isUndefinedNull(this._connection.saveData) ? '' : this._connection.saveData.toString();
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQueue.addToQueue('net_info_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        connectionType: this._connection.type ? this._connection.type : '',
        effectiveType: this._connection.effectiveType ? this._connection.effectiveType : '',
        downlinkMax: this._connection.downlinkMax ? this._connection.downlinkMax.toString() : '',
        downlink: this._connection.downlink ? this._connection.downlink.toString() : '',
        rtt: this._connection.rtt ? this._connection.rtt.toString() : '',
        isSaveData: saveData
      }));
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      if (this._connection) {
        // get the data any time it changes
        this._connection.addEventListener('change', this._boundOnChangeNetworkInfo, true);
        this.onChangeNetworkInfo();
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._connection) {
        this._connection.removeEventListener('change', this._boundOnChangeNetworkInfo, true);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/OrientationEventCollector.js":
/*!*****************************************************************!*\
  !*** ./src/main/collectors/events/OrientationEventCollector.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var featureSettings = {
  configKey: 'isOrientationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'absolute', 'alpha', 'beta', 'gamma'];
var OrientationEventCollector = /*#__PURE__*/function (_DataCollector) {
  function OrientationEventCollector(configurationRepository, utils, dataQ, MessageBus, DeviceOrientationEventEmitter) {
    var _this;
    _classCallCheck(this, OrientationEventCollector);
    _this = _callSuper(this, OrientationEventCollector);
    _defineProperty(_this, "_handleDeviceOrientationEvent", function (e) {
      var time = _this._utils.dateNow();
      if (e && time - _this._lastTime > _this._samplePeriod) {
        var absolute = e.absolute || false;
        var alpha = _this._utils.isUndefinedNull(e.alpha) ? 0 : _this._utils.cutDecimalPointDigits(e.alpha, 4);
        var beta = _this._utils.isUndefinedNull(e.beta) ? 0 : _this._utils.cutDecimalPointDigits(e.beta, 4);
        var gamma = _this._utils.isUndefinedNull(e.gamma) ? 0 : _this._utils.cutDecimalPointDigits(e.gamma, 4);
        if (alpha !== _this._lastAlpha || beta !== _this._lastBeta || gamma !== _this._lastGamma) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].isDebug() && _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("OrientationEvents:_onOrientationEvent, sending data: timestamp: ".concat(time, "\n                alpha,betta,gamma: ").concat(alpha, ",").concat(beta, ",").concat(gamma, ",prevTime:").concat(_this._lastTime));
          _this._lastTime = time;
          _this._lastAlpha = alpha;
          _this._lastBeta = beta;
          _this._lastGamma = gamma;
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          _this._dataQ.addToQueue('orientation_events', [null, eventSeq, time, absolute, alpha, beta, gamma]);
        }
      }
    });
    _this._dataQ = dataQ;
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._samplePeriod = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.orientationEventsSamplePeriod) || 0;
    _this._lastAlpha = 0;
    _this._lastBeta = 0;
    _this._lastGamma = 0;
    _this._lastTime = 0;
    _this._messageBus = MessageBus;
    _this._deviceOrientationEventEmitter = DeviceOrientationEventEmitter;
    return _this;
  }
  _inherits(OrientationEventCollector, _DataCollector);
  return _createClass(OrientationEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      if (window.DeviceOrientationEvent) {
        this._deviceOrientationEventEmitter.start();
        this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.DeviceOrientationEvent, this._handleDeviceOrientationEvent);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (window.DeviceOrientationEvent) {
        this._deviceOrientationEventEmitter.stop();
        this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.DeviceOrientationEvent, this._handleDeviceOrientationEvent);
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var samplePeriodConf = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.orientationEventsSamplePeriod);
      this._samplePeriod = samplePeriodConf !== undefined ? samplePeriodConf : this._samplePeriod;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (OrientationEventCollector);

/***/ }),

/***/ "./src/main/collectors/events/PinchZoomEventCollector.js":
/*!***************************************************************!*\
  !*** ./src/main/collectors/events/PinchZoomEventCollector.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PinchZoomEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var eventsPointerXYProps = ['clientX', 'clientY'];
var eventsTouchXYProps = ['screenX', 'screenY'];

/**
 * should be called on pointerup event
 * Then clear the stack of pointers
 */
var pinchRecognizer = function pinchRecognizer(pointers, prevPointers, eventProps) {
  function getDistance(p1, p2) {
    var x = p2[eventProps[0]] - p1[eventProps[0]];
    var y = p2[eventProps[1]] - p1[eventProps[1]];
    return Math.sqrt(x * x + y * y);
  }
  function _getScale() {
    return getDistance(pointers[0], pointers[1]) / getDistance(prevPointers[0], prevPointers[1]);
  }
  function _getFocusPoint(p1, p2) {
    return {
      x: (p1[eventProps[0]] + p2[eventProps[0]]) / 2,
      y: (p1[eventProps[1]] + p2[eventProps[1]]) / 2
    };
  }
  return {
    getScale: function getScale() {
      return _getScale();
    },
    getFocusPoint: function getFocusPoint() {
      return _getFocusPoint(pointers[1], pointers[0]);
    }
  };
};
var pinchZoomEventType = {
  pointerdown: 0,
  pointermove: 1,
  pointerup: 2
};
var featureSettings = {
  configKey: 'isPinchZoomEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'focusX', 'focusY', 'scaleFactor'];
var PinchZoomEventCollector = /*#__PURE__*/function (_DataCollector) {
  function PinchZoomEventCollector(utils, elements, dataQ, msgBus, configuration) {
    var _this;
    _classCallCheck(this, PinchZoomEventCollector);
    _this = _callSuper(this, PinchZoomEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._evGesturesCache = [];
    _this._prevEventDiff = -1;
    _this._prevEvGestureSet = [];
    _this._prevTouchEvents = [];
    _this._onAllBrowsersPinchZoomEventBinded = _this._onAllBrowsersPinchZoomEvent.bind(_this);
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(PinchZoomEventCollector, _DataCollector);
  return _createClass(PinchZoomEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, scale, focusPoint, e) {
      if (type === pinchZoomEventType.pointerdown || type === pinchZoomEventType.pointerup) {
        this._msgBus.publish('pinchEvent', {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();

      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue('pinch_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        focusX: focusPoint.x,
        focusY: focusPoint.y,
        scaleFactor: scale
      }));
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var _this2 = this;
      var currDocument = browserContext.getDocument();
      var eventsToListen;

      // By default, bind the Pointer Events and if not supported
      // attempt to use the Touch Events
      if (window.PointerEvent) {
        eventsToListen = ['pointerdown', 'pointermove', 'pointerup'];
      } else if (window.TouchEvent) {
        eventsToListen = ['touchstart', 'touchend', 'touchcancel', 'touchmove'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents) {
        var _loop = function _loop(i) {
          _this2._utils.addEventListener(currDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersPinchZoomEventBinded, false, false);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this2._maxShadowDepth, _this2._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this2._utils.addEventListener(iframe.contentDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersPinchZoomEventBinded, false, false);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop(i);
        }
      }
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      var currDocument = browserContext.getDocument();
      if (this._listeningToEvents) {
        var _loop2 = function _loop2(i) {
          _this3._utils.removeEventListener(currDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersPinchZoomEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this3._maxShadowDepth, _this3._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this3._utils.removeEventListener(iframe.contentDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersPinchZoomEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop2(i);
        }
      }
      this._evGesturesCache = [];
      this._prevEventDiff = -1;
    }
  }, {
    key: "_onAllBrowsersPinchZoomEvent",
    value: function _onAllBrowsersPinchZoomEvent(e) {
      switch (e.type) {
        case 'pointerdown':
          this._onPointerDownEvent(e);
          break;
        case 'pointermove':
          this._onPointerMoveEvent(e);
          break;
        case 'pointerup':
          this._onPointerUpEvent(e);
          break;
        case 'touchstart':
          this._onTouchStartEvent(e);
          break;
        case 'touchend':
          this._onTouchEndEvent();
          break;
        case 'touchmove':
          this._onTouchMoveEvent(e);
          break;
        default:
      }
      return true;
    }
  }, {
    key: "_onPointerDownEvent",
    value: function _onPointerDownEvent(e) {
      this._evGesturesCache.push(e);
    }
  }, {
    key: "_onPointerMoveEvent",
    value: function _onPointerMoveEvent(e) {
      // We update the events with the same pointerId value that were push as pointerdown.
      // We're only interested in 2 gestures to imply if two points
      // with different pointer Ids create a pinch when their x,y are increased,decreased accordingly
      for (var i = 0; i < this._evGesturesCache.length; i++) {
        if (e.pointerId === this._evGesturesCache[i].pointerId) {
          this._evGesturesCache[i] = e;
          break;
        }
      }
      if (this._evGesturesCache.length === 2 && this._evGesturesCache[0].pointerId !== this._evGesturesCache[1].pointerId) {
        // Calculate the distance between the two pointers
        var curDiff = Math.abs(this._evGesturesCache[0].clientX - this._evGesturesCache[1].clientX);
        if (this._prevEventDiff > 0) {
          if (curDiff > this._prevEventDiff) {
            // The distance between the two pointers has increased
            // this._addToCommunicationQueue(pinchZoomEventType[e.type], "zoom_in", e);
          }
          if (curDiff < this._prevEventDiff) {
            // The distance between the two pointers has decreased
            // this._addToCommunicationQueue(pinchZoomEventType[e.type], "zoom_out", e);
          }
          if (this._prevEvGestureSet.length === 2) {
            var pr = pinchRecognizer(this._evGesturesCache, this._prevEvGestureSet, eventsPointerXYProps);
            var _s = pr.getScale();
            this._addToCommunicationQueue(pinchZoomEventType[e.type], _s, pr.getFocusPoint(), e);
          }
        }

        // Cache the distance for the next move event
        this._prevEventDiff = curDiff;
        this._prevEvGestureSet = this._evGesturesCache.slice(0);
      } else if (this._evGesturesCache.length > 2) {
        // There are for some reason points that are not cleared immediately.
        this._evGesturesCache = [];
        this._prevEvGestureSet = [];
      }
    }

    /**
     * We clear the events that were collected before the pointerup event was thrown
     * @param e
     * @private
     */
  }, {
    key: "_onPointerUpEvent",
    value: function _onPointerUpEvent(e) {
      for (var i = 0; i < this._evGesturesCache.length; i++) {
        if (this._evGesturesCache[i].pointerId === e.pointerId) {
          this._evGesturesCache.splice(i, 1);
          break;
        }
      }
      if (this._evGesturesCache.length < 2) {
        this._prevEventDiff = -1;
        this._prevEvGestureSet = [];
      }
    }
  }, {
    key: "_onTouchStartEvent",
    value: function _onTouchStartEvent(e) {
      this._prevTouchEvents[0] = e.touches.item(0);
      this._prevTouchEvents[1] = e.touches.item(1);
    }
  }, {
    key: "_onTouchEndEvent",
    value: function _onTouchEndEvent() {
      this._prevTouchEvents = [];
    }

    /**
     * Since this feature deals only with pinching/zooming, the maximum number of
     * fingers on the surface at the same time is for pinching/zooming detection
     * is two.
     * @param e
     * @private
     */
  }, {
    key: "_onTouchMoveEvent",
    value: function _onTouchMoveEvent(e) {
      if (e.touches.length === 2) {
        if (this._prevTouchEvents.length === 2) {
          var current = [e.touches.item(0), e.touches.item(1)];
          var pr = pinchRecognizer(current, this._prevTouchEvents.splice(0), eventsTouchXYProps);
          var _s = pr.getScale();
          this._addToCommunicationQueue(pinchZoomEventType[e.type], _s, pr.getFocusPoint(), e);
        }
        // finally - update the previous touch pairs
        this._prevTouchEvents[0] = e.touches.item(0);
        this._prevTouchEvents[1] = e.touches.item(1);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/PrintEventCollector.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/events/PrintEventCollector.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   PrintEventType: function() { return /* binding */ PrintEventType; },
/* harmony export */   "default": function() { return /* binding */ PrintEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var featureSettings = {
  configKey: 'isPrintEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var PrintEventType = {
  printDialogOpened: 1,
  printDialogClosed: 0
};
var EventStructure = ['eventSequence', 'timestamp', 'printDialogState'];
var PrintEventCollector = /*#__PURE__*/function (_DataCollector) {
  function PrintEventCollector(utils, dataQueue) {
    var _this;
    _classCallCheck(this, PrintEventCollector);
    _this = _callSuper(this, PrintEventCollector);
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._addToEventQueueFunc = _this._addToEventQueue.bind(_this);
    _this._myAfterPrintFunc = _this._myAfterPrint.bind(_this);
    return _this;
  }
  _inherits(PrintEventCollector, _DataCollector);
  return _createClass(PrintEventCollector, [{
    key: "_myAfterPrint",
    value: function _myAfterPrint() {
      this._addToEventQueueFunc(PrintEventType.printDialogClosed); // printDialogClosed = -1
      window.removeEventListener('focus', this._myAfterPrintFunc);
    }
  }, {
    key: "_onBeforePrintEvent",
    value: function _onBeforePrintEvent() {
      this._addToEventQueueFunc(PrintEventType.printDialogOpened); // printDialogOpened = 1

      // "afterprint" doesn't work well for some browsers
      // All browsers dispatch a "focus" event on the window object
      // so we listen to the "focus" event to detect when the print dialog is being closed
      this._utils.addEventListener(window, 'focus', this._myAfterPrintFunc.bind(this));
    }

    // (1, -1) = (print dialog opened, print dialog closed)
  }, {
    key: "_addToEventQueue",
    value: function _addToEventQueue(printDialogState) {
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQueue.addToQueue('print_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        printDialogState: printDialogState
      }));
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(window, 'beforeprint', this._onBeforePrintEvent.bind(this));
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(window, 'beforeprint', this._onBeforePrintEvent.bind(this), true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/ScriptEventCollector.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/events/ScriptEventCollector.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   ScriptEventType: function() { return /* binding */ ScriptEventType; },
/* harmony export */   "default": function() { return /* binding */ ScriptEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * e.target.id = testPointer
 e.target.namespaceURI = http://www.w3.org/1999/xhtml
 e.target.outerHTML = <script src="TestPointer.js" type="text/javascript" id="testPointer"></script>
 e.target.src = http://localhost:63342/TestFeature/TestPointer.js
 e.target.type = text/javascript
 */


var ScriptEventType = {
  load: 0
};
var featureSettings = {
  configKey: 'isScriptExecuteEve',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'scriptId', 'namespaceURI', 'outerHTML', 'scriptSource', 'scriptType'];
var ScriptEventCollector = /*#__PURE__*/function (_DataCollector) {
  function ScriptEventCollector(utils, dataQueue) {
    var _this;
    _classCallCheck(this, ScriptEventCollector);
    _this = _callSuper(this, ScriptEventCollector);
    _this._onScriptExecuteEventFunc = _this._onScriptExecuteEvent.bind(_this);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    return _this;
  }
  _inherits(ScriptEventCollector, _DataCollector);
  return _createClass(ScriptEventCollector, [{
    key: "_onScriptExecuteEvent",
    value: function _onScriptExecuteEvent(e) {
      if (e && e.target && (e.type !== 'load' || e.target.nodeName.toLowerCase() === 'script')) {
        try {
          var time = this.getEventTimestamp(e);
          var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var type = ScriptEventType[e.type];
          if (this._utils.isUndefinedNull(type)) {
            type = -1;
          }

          // the if is for performance optimization
          if (_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].isDebug()) {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace('got event ' + e.type + ', ' + type + ', scriptSrc: ' + e.target.src + ' at time ' + time);
          }
          this._dataQueue.addToQueue('script_events', this._utils.convertToArrayByMap(EventStructure, {
            eventSequence: eventSeq,
            timestamp: time,
            eventType: type,
            scriptId: e.target.id || '',
            namespaceURI: e.target.namespaceURI || '',
            outerHTML: e.target.outerHTML || '',
            scriptSource: e.target.src || '',
            scriptType: e.target.type || ''
          }));
        } catch (err) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("error on getScriptExecuteEvent ".concat(err.toString()));
        }
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(document, 'load', this._onScriptExecuteEventFunc, true);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(document, 'load', this._onScriptExecuteEventFunc, true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/SelectElementEvents.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/events/SelectElementEvents.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onSelectSelectors: function() { return /* binding */ onSelectSelectors; }
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./src/main/collectors/events/Event.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var onSelectSelectors = 'select';
var SelectElementEvents = /*#__PURE__*/function (_Event) {
  /**
   *
   * @param sendToQueue
   */
  function SelectElementEvents(sendToQueue, cdUtils, messageBus, standardOnChangeEventsEmitter, elementFocusEventEmitter, elementBlurEventEmitter, configurationRepository, maskingService, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, SelectElementEvents);
    _this = _callSuper(this, SelectElementEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnChangeEvents", function (e) {
      var optionsVals = _this._CDUtils.getDropDownListValues(e.target, _this._maskingService).join(';');
      optionsVals = _this._CDUtils.clearTextFromNumbers(optionsVals);
      var selected = e.target.selectedIndex;
      var length = e.target.value.length;
      _this._sendToQueue(e, {
        length: length,
        selected: selected,
        elementValues: optionsVals
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleBlurEvent", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleFocusEvent", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = cdUtils;
    _this._messageBus = messageBus;
    _this._StandardOnChangeEventsEmitter = standardOnChangeEventsEmitter;
    _this._elementFocusEventEmitter = elementFocusEventEmitter;
    _this._elementBlurEventEmitter = elementBlurEventEmitter;
    _this._configurationRepository = configurationRepository;
    _this._collectSelectElementBlurAndFocusEvents = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.collectSelectElementBlurAndFocusEvents);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(SelectElementEvents, _Event);
  return _createClass(SelectElementEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnSelectEvent, this.handleOnChangeEvents);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ElementFocusEvent, this.handleFocusEvent);
      this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ElementBlurEvent, this.handleBlurEvent);
      browserContext.collectAllElementsBySelectorAsync(onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
        _this2._StandardOnChangeEventsEmitter.start(_onSelectElements);
        if (_this2._collectSelectElementBlurAndFocusEvents) {
          _this2._elementFocusEventEmitter.start(_onSelectElements);
          _this2._elementBlurEventEmitter.start(_onSelectElements);
        }
      });
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      browserContext.collectAllElementsBySelectorAsync(onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
        _this3._StandardOnChangeEventsEmitter.stop(_onSelectElements);
        _this3._elementFocusEventEmitter.stop(_onSelectElements);
        _this3._elementBlurEventEmitter.stop(_onSelectElements);
      });
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnSelectEvent, this.handleOnChangeEvents);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ElementFocusEvent, this.handleFocusEvent);
      this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.ElementBlurEvent, this.handleBlurEvent);
    }
  }, {
    key: "updateSettings",
    value: function updateSettings(browserContext) {
      var _this4 = this;
      this._collectSelectElementBlurAndFocusEvents = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.collectSelectElementBlurAndFocusEvents);
      if (!this._collectSelectElementBlurAndFocusEvents) {
        browserContext.collectAllElementsBySelectorAsync(onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
          _this4._elementFocusEventEmitter.stop(_onSelectElements);
          _this4._elementBlurEventEmitter.stop(_onSelectElements);
        });
      }
    }
  }]);
}(_Event__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (SelectElementEvents);

/***/ }),

/***/ "./src/main/collectors/events/SensorsDataQueue.js":
/*!********************************************************!*\
  !*** ./src/main/collectors/events/SensorsDataQueue.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SensorsDataQueue; }
/* harmony export */ });
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _TouchEventCollector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TouchEventCollector */ "./src/main/collectors/events/TouchEventCollector.js");
/* harmony import */ var _KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./KeyEventCollector */ "./src/main/collectors/events/KeyEventCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





var SensorsDataQueue = /*#__PURE__*/function () {
  function SensorsDataQueue(configurationRepository, dataQueue, msgBus, utils, sensorGateKeeper) {
    _classCallCheck(this, SensorsDataQueue);
    this._historyBuffer = [];
    this._isTouchInProgress = false;
    this._touchStartCount = 0;
    this._isPostTouch = false;
    this._touchEndTime = 0;
    this._sensorGateKeeper = sensorGateKeeper;
    this._dataQueue = dataQueue;
    this._configurationRepository = configurationRepository;
    this._msgBus = msgBus;
    this._utils = utils;
    this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.TouchEvent, this._onTouch.bind(this));
    this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.KeyEvent, this._onTouch.bind(this));
    this._isMotionAroundTouchEnabled = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isMotionAroundTouchEnabled);
    this._aroundTouchInterval = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.motionPaddingAroundTouchMSec);
  }

  /**
   * Called be the sensor event handlers, according to state, handle the event, if during touch, send directly to queue,
   * if post then also send upto to interval time, else, keep a history buffer for pre touch events, for interval
   * length of time
   * @param name
   * @param data
   * @param addCtxId
   * @param isImmediateWup
   */
  return _createClass(SensorsDataQueue, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      var currTime = this._utils.dateNow();
      if (this._isPostTouch) {
        var postTouchTimeRemaining = currTime - this._touchEndTime;
        if (postTouchTimeRemaining > this._aroundTouchInterval) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("SensorsDataQueue: stopped post touch events, time has passed (".concat(this._aroundTouchInterval, " millisec)"));
          this._isPostTouch = false;
        }
      }
      if (!this._isMotionAroundTouchEnabled || this._isTouchInProgress || this._isPostTouch || this._sensorGateKeeper.isOpen()) {
        this._dataQueue.addToQueue(name, data, addCtxId, isImmediateWup);
      } else {
        this._historyBuffer.push({
          name: name,
          data: data,
          addCtxId: addCtxId,
          isImmediateWup: isImmediateWup,
          timestamp: currTime
        });
        // check buffer to 3 sec
        for (var i = 0, len = this._historyBuffer.length; i < len; i++) {
          // we keep getting out the first item so we stay at location 0
          var preTouchTime = currTime - this._historyBuffer[0].timestamp;
          if (preTouchTime > this._aroundTouchInterval) {
            this._historyBuffer.shift();
          } else {
            break;
          }
        }
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._aroundTouchInterval = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.motionPaddingAroundTouchMSec) !== undefined ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.motionPaddingAroundTouchMSec) : this._aroundTouchInterval;
      this._isMotionAroundTouchEnabled = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isMotionAroundTouchEnabled) !== undefined ? this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isMotionAroundTouchEnabled) : this._isMotionAroundTouchEnabled;
    }

    /**
     * Upon start of touch event send the history buffer of pre-touch sensor events according to
     * interval (1 sec by default)
     * @private
     */
  }, {
    key: "_sendBuffer",
    value: function _sendBuffer() {
      var startTime = this._utils.dateNow();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("sending history sensors buffer ts=".concat(startTime));
      // send all buffer to queue
      for (var i = 0, len = this._historyBuffer.length; i < len; i++) {
        if (startTime - this._historyBuffer[i].timestamp <= this._aroundTouchInterval) {
          this._dataQueue.addToQueue(this._historyBuffer[i].name, this._historyBuffer[i].data, this._historyBuffer[i].addCtxId, this._historyBuffer[i].isImmediateWup);
        }
      }
      this._historyBuffer = [];
    }

    /**
     * on touch event manage current status of touch - is during or after touch event, in order to manage
     * sensor events interval
     *
     * on mobile - touching the keyboard is sent as keyevent and not touch event
     * @param event
     * @returns {boolean}
     * @private
     */
  }, {
    key: "_onTouch",
    value: function _onTouch(event) {
      if (this._isMotionAroundTouchEnabled) {
        if (!this._isTouchInProgress && (event.action === _TouchEventCollector__WEBPACK_IMPORTED_MODULE_1__.TouchEventType.touchstart || event.action === _KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__.KeyEventType.keydown)) {
          // isTouchInProgress protects against multiple touch downs in a row
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("Started touch event in sensors data q ts=".concat(this._utils.dateNow()));
          this._isTouchInProgress = true;
          this._touchStartCount = 1;
          this._sendBuffer();
        } else if (event.action === _TouchEventCollector__WEBPACK_IMPORTED_MODULE_1__.TouchEventType.touchend || event.action === _KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__.KeyEventType.keyup) {
          this._touchStartCount--;
          if (this._touchStartCount <= 0) {
            this._isTouchInProgress = false;
            this._isPostTouch = true;
            this._touchEndTime = this._utils.dateNow();
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("stopped touch event in sensors data q ts=".concat(this._utils.dateNow()));
          }
        } else if (event.action === _TouchEventCollector__WEBPACK_IMPORTED_MODULE_1__.TouchEventType.touchstart || event.action === _KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__.KeyEventType.keydown) {
          // on mobile - touching the keyboard is sent as keyevent and not touch event
          // for cases when there's another touch start after touch start, so wait until all
          // the touches end
          this._touchStartCount++;
        }
      }
      return false;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/events/StorageEventCollector.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/events/StorageEventCollector.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var featureSettings = {
  configKey: 'isStorageEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var StorageEventType = {
  'storage': 0
};
var EventStructure = ['eventSequence', 'timestamp', 'keys', 'action', 'tabsOpened']; // "keys" - what keys were changed. "area" - the name of the storage area - 'sync', 'local' or 'managed'
var StorageEventCollector = /*#__PURE__*/function (_DataCollector) {
  function StorageEventCollector(utils, elements, dataQ, msgBus) {
    var _this;
    _classCallCheck(this, StorageEventCollector);
    _this = _callSuper(this, StorageEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._onAllStorageEventBinded = _this._onAllStorageEvent.bind(_this);
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(StorageEventCollector, _DataCollector);
  return _createClass(StorageEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, keys, action, tabsopened, e) {
      if (type === StorageEventType.storage) {
        this._msgBus.publish('storageEvent', {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQ.addToQueue('storage_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        keys: keys,
        action: action,
        tabsOpened: tabsopened
      }));
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var eventsToListen;
      var windowContext = browserContext.Context;
      if (windowContext.localStorage || windowContext.sessionStorage) {
        eventsToListen = ['storage'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents.length > 0) {
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          this._utils.addEventListener(windowContext, this._listeningToEvents[i], this._onAllStorageEventBinded, true);
        }
      }
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      if (this._listeningToEvents) {
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          this._utils.removeEventListener(browserContext.Context, this._listeningToEvents[i], this._onAllStorageEventBinded, true);
        }
      }
    }
  }, {
    key: "_onAllStorageEvent",
    value: function _onAllStorageEvent(e) {
      switch (e.type) {
        case 'storage':
          this._onStorageEvent(e);
          break;
        default:
      }
      return true;
    }

    /**
     *
     * @param e
     * @private
     */
  }, {
    key: "_onStorageEvent",
    value: function _onStorageEvent(e) {
      var tabs = false;
      var keys = null;
      var action = null;
      if (e.key === null) {
        keys = null;
      }
      if (typeof e.key === 'string' && e.newValue === null) {
        keys = e.key;
        action = 'delete';
      } else {
        keys = e.key;
        action = 'update';
      }
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (tabList && _typeof(tabList[0]) === 'object') {
        tabs = true;
      }
      tabs = tabs ? 1 : 0;
      this._addToCommunicationQueue(e.type, keys, action, tabs, e);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/TabEventCollector.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/TabEventCollector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   TabEventType: function() { return /* binding */ TabEventType; },
/* harmony export */   "default": function() { return /* binding */ TabEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isTabsEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var TabEventType = {
  openTab: 0,
  newTab: 1,
  closeTab: 2
};
var EventStructure = ['eventSequence', 'timestamp', 'type', 'id', 'href', 'referrer', 'currentTabsList'];

/**
 * Identify tabs and manage this info and send to server
 *
 * https://stackoverflow.com/questions/1366483/javascript-sharing-data-between-tabs
 * local storage is shared between tabs and storage event fires when other tabs
 * make changes to localStorage. This is quite handy for communication purposes.
 */
var TabEventCollector = /*#__PURE__*/function (_DataCollector) {
  function TabEventCollector(utils, dataQ) {
    var _this;
    _classCallCheck(this, TabEventCollector);
    _this = _callSuper(this, TabEventCollector);
    _this._utils = utils;
    _this._currState = null;
    _this._dataQueue = dataQ;
    _this._tabData = {
      id: '',
      openTabTS: 0
    };
    _this._onUnloadTabBinded = _this._onUnloadTab.bind(_this);
    return _this;
  }
  _inherits(TabEventCollector, _DataCollector);
  return _createClass(TabEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Starting tab events feature');
      this._initTabInfo();
      window.addEventListener('beforeunload', this._onUnloadTabBinded);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Stopping tab events feature');
      window.removeEventListener('beforeunload', this._onUnloadTabBinded);
    }

    /**
     * save the tab id in the session storage, so a new tab will not have an id
     * and the list in local storage
     * we can reach this function on reload, reset session, etc
     */
  }, {
    key: "_initTabInfo",
    value: function _initTabInfo() {
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (!tabList) {
        tabList = [];
      }
      // if tab data already exists it might refresh etc
      var type = TabEventType.openTab;
      this._tabData = this._utils.StorageUtils.getFromSessionStorage('cdTabData') || this._tabData.id;
      // session storage is not saved between tabs except on duplicate
      // local storage is saved between tabs
      // if no data in session storage
      // except for IE - which works the other way around
      if (!this._tabData) {
        this._updateTabData();
        type = TabEventType.newTab;
      }
      var index = -1;
      for (var i = 0, len = tabList.length; i < len; i++) {
        if (tabList[i][0] === this._tabData.id) {
          index = i;
          break;
        }
      }

      // if tab is not in the list, add it
      // can happen on new tab, or reload
      if (index === -1 || index === tabList.length) {
        // need to add every time if doesn't exist since every unload it's removed (refresh/reload page)
        tabList.push([this._tabData.id, this._tabData.openTabTS]);
        this._utils.StorageUtils.saveToLocalStorage('cdTabList', tabList);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('added tab to list. ' + this._tabData.id + ', tab index=' + tabList.length);
      }
      var url = this._utils.getDocUrl();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var tabListStr = JSON.stringify(tabList);
      this._dataQueue.addToQueue('tab_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: this._tabData.openTabTS,
        type: type,
        id: this._tabData.id || '',
        href: url || '',
        referrer: this._utils.clearTextFromNumbers(document.referrer),
        currentTabsList: tabListStr || ''
      }));
    }

    /**
     * Remove the tab info on tab close, after sending th list of tabs
     * can be also on reload, load other page etc
     */
  }, {
    key: "_onUnloadTab",
    value: function _onUnloadTab() {
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (!tabList) {
        tabList = [];
      }
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var url = this._utils.getDocUrl();
      var type = TabEventType.closeTab;
      var tabListStr = JSON.stringify(tabList);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("removing tab from list. id:".concat(this._tabData.id, ", timestamp:").concat(time));
      this._dataQueue.addToQueue('tab_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        type: type,
        id: this._tabData.id || '',
        href: url || '',
        referrer: this._utils.clearTextFromNumbers(document.referrer),
        currentTabsList: tabListStr || ''
      }), true, true);

      // remove current tab from list
      for (var i = 0, len = tabList.length; i < len; i++) {
        if (tabList[i][0] === this._tabData.id) {
          tabList.splice(i, 1);
          break;
        }
      }
      this._utils.StorageUtils.saveToLocalStorage('cdTabList', tabList);
    }
  }, {
    key: "_updateTabData",
    value: function _updateTabData() {
      this._tabData = {};
      this._tabData = {
        id: this._utils.generateUUID(),
        openTabTS: this.getEventTimestamp()
      };
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("initialize tab data: id:".concat(this._tabData.id, ", timestamp:").concat(this._tabData.openTabTS));
      this._utils.StorageUtils.saveToSessionStorage('cdTabData', this._tabData);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/TapEventCollector.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/events/TapEventCollector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LongPressEventStructure: function() { return /* binding */ LongPressEventStructure; },
/* harmony export */   TapEventStructure: function() { return /* binding */ TapEventStructure; },
/* harmony export */   "default": function() { return /* binding */ TapEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * Defines the maximum distance in pixels that a touch pad touch can move
 * before being released for it to be considered a tap (click) as opposed
 * to a hover movement gesture.
 */




var featureSettings = {
  configKey: 'isTapEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var TAP_MAX_SLOP = 20;
/**
 * Defines the duration in milliseconds we will wait to see if a touch event
 * is a tap or a scroll. If the user does not move within this interval, it is
 * considered to be a tap.
 */
// const TAP_TIMEOUT = 100;
/**
 * Defines the default duration in milliseconds before a press turns into
 * a long press
 */
var LONG_PRESS_TIMEOUT = 500;
var TapEventStructure = ['eventSequence', 'timestamp', 'screenX', 'screenY', 'pageX', 'pageY', 'clientX', 'clientY', 'isTrusted', 'elementHash', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor'];
var LongPressEventStructure = ['eventSequence', 'timestamp', 'screenX', 'screenY', 'pageX', 'pageY', 'clientX', 'clientY', 'isTrusted', 'elementHash', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor'];
var TapEventCollector = /*#__PURE__*/function (_DataCollector) {
  function TapEventCollector(configurationRepository, utils, elements, dataQ, maskingService, configuration) {
    var _this;
    _classCallCheck(this, TapEventCollector);
    _this = _callSuper(this, TapEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._activeTouchActions = {};
    _this._maskingService = maskingService;
    _this._tapMaxSlop = _this._configurationRepository.get('tapEventsTapMaxSlop') || TAP_MAX_SLOP;
    _this._longPressTimeout = _this._configurationRepository.get('tapEventsLongPressTimeout') || LONG_PRESS_TIMEOUT;
    _this._handleStartEventBind = _this._handleStartEvent.bind(_this);
    _this._handleMoveEventBind = _this._handleMoveEvent.bind(_this);
    _this._handleEndEventBind = _this._handleEndEvent.bind(_this);
    _this._handleCancelEventBind = _this._handleCancelEvent.bind(_this);
    _this._eventDefinitions = TapEventCollector.getSupportedTouchEvents();
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(TapEventCollector, _DataCollector);
  return _createClass(TapEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }

    /*
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._tapMaxSlop = this._configurationRepository.get('tapEventsTapMaxSlop') !== undefined ? this._configurationRepository.get('tapEventsTapMaxSlop') : this._tapMaxSlop;
      this._longPressTimeout = this._configurationRepository.get('tapEventsLongPressTimeout') !== undefined ? this._configurationRepository.get('tapEventsLongPressTimeout') : this._longPressTimeout;
    }
  }, {
    key: "_bind",
    value:
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
    function _bind(browserContext) {
      var _this2 = this;
      if (!this._eventDefinitions) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.');
        return;
      }
      var currDocument = browserContext.getDocument();
      this._addEventListeners(currDocument);
      browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
        iframes.forEach(function (iframe) {
          if (iframe && iframe.contentDocument) {
            _this2._addEventListeners(iframe.contentDocument);
          }
        });
      });
    }
  }, {
    key: "_addEventListeners",
    value: function _addEventListeners(currDocument) {
      this._utils.addEventListener(currDocument, this._eventDefinitions.startEvent, this._handleStartEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.moveEvent, this._handleMoveEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.endEvent, this._handleEndEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.cancelEvent, this._handleCancelEventBind);
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      if (!this._eventDefinitions) {
        return;
      }
      var currDocument = browserContext.getDocument();
      this._removeEventListeners(currDocument);
      browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
        iframes.forEach(function (iframe) {
          if (iframe && iframe.contentDocument) {
            _this3._removeEventListeners(iframe.contentDocument);
          }
        });
      });
    }
  }, {
    key: "_removeEventListeners",
    value: function _removeEventListeners(currDocument) {
      this._utils.removeEventListener(currDocument, this._eventDefinitions.startEvent, this._handleStartEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.moveEvent, this._handleMoveEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.endEvent, this._handleEndEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.cancelEvent, this._handleCancelEventBind);
    }
  }, {
    key: "_handleStartEvent",
    value: function _handleStartEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        // Save the state of the active touch operations so we can make decisions when tap is ending
        this._activeTouchActions[eventData[i].identifier] = {
          startTime: this.getEventTimestamp(),
          startX: eventData[i].touchData.pageX,
          startY: eventData[i].touchData.pageY,
          offsetX: 0,
          offsetY: 0
        };
      }
    }
  }, {
    key: "_handleMoveEvent",
    value: function _handleMoveEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        var activeTouchAction = this._activeTouchActions[eventData[i].identifier];

        // If we don't have previous knowledge of this touch we skip it...
        if (!activeTouchAction) {
          continue;
        }

        // Calculate the move offset from the start point. In the End event we will see if we
        // need to discard this because the offset is too big
        activeTouchAction.offsetX = Math.abs(eventData[i].touchData.pageX - activeTouchAction.startX);
        activeTouchAction.offsetY = Math.abs(eventData[i].touchData.pageY - activeTouchAction.startY);
      }
    }
  }, {
    key: "_handleEndEvent",
    value: function _handleEndEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        var activeTouchAction = this._activeTouchActions[eventData[i].identifier];

        // If we don't have previous knowledge of this touch we skip it...
        if (!activeTouchAction) {
          continue;
        }

        // If the offset from where we started the tap is smaller then the max SLOP offset
        if (activeTouchAction.offsetX < this._tapMaxSlop && activeTouchAction.offsetY < this._tapMaxSlop) {
          // If the time passed since the tap down is not exceeding the timeout which makes the tap a long press operation...
          if (this.getEventTimestamp() - activeTouchAction.startTime < this._longPressTimeout) {
            this._sendEvent('tap_events', TapEventStructure, eventData[i].identifier, eventData[i].touchData, eventData[i].eventArgs);
          } else {
            this._sendEvent('longpress_events', LongPressEventStructure, eventData[i].identifier, eventData[i].touchData, eventData[i].eventArgs);
          }
        }
        delete this._activeTouchActions[eventData[i].identifier];
      }
    }
  }, {
    key: "_handleCancelEvent",
    value: function _handleCancelEvent(e) {
      var eventData = this._getEventData(e);

      // Remove the canceled touch operations from the active actions dictionary
      for (var i = 0; i < eventData.length; i++) {
        delete this._activeTouchActions[eventData[i].identifier];
      }
    }

    // Get the event data. We build a unified event data structure so same code can handle the difference event formats
  }, {
    key: "_getEventData",
    value: function _getEventData(e) {
      // Case the event is of touch event type
      if (e.changedTouches !== undefined) {
        var eventData = [];
        for (var i = 0; i < e.changedTouches.length; i++) {
          var changedTouch = e.changedTouches[i];
          var identifier = changedTouch.identifier;
          eventData.push({
            identifier: identifier,
            touchData: changedTouch,
            eventArgs: e
          }); // we want to shrink it to short
        }
        return eventData;
      }
      // Case the event is of Pointer event type
      if (e.pointerType != null) {
        if (e.pointerType === 'touch' || e.pointerType === 'pen' || e.pointerType === e.MSPOINTER_TYPE_TOUCH || e.pointerType === e.MSPOINTER_TYPE_PEN) {
          var _identifier = e.pointerId ? e.pointerId : 0;
          return [{
            identifier: _identifier,
            touchData: e,
            eventArgs: e
          }];
        }
      }

      // If data is unsupported we return an empty array so consumption of the data will not be invalid
      return [];
    }
  }, {
    key: "_sendEvent",
    value: function _sendEvent(eventName, dataMappingDefs, identifier, touch, e) {
      var time = this.getEventTimestamp();
      var isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[e.isTrusted];
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      if (this._utils.isUndefinedNull(identifier)) {
        identifier = 0;
      }

      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue(eventName, this._utils.convertToArrayByMap(dataMappingDefs, {
        eventSequence: eventSeq,
        timestamp: time,
        screenX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.screenX ? Math.round(touch.screenX) : 0,
        screenY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.screenY ? Math.round(touch.screenY) : 0,
        pageX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.pageX || 0,
        pageY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.pageY || 0,
        clientX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.clientX || 0,
        clientY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.clientY || 0,
        isTrusted: isTrusted,
        elementHash: element,
        touchIndex: identifier % 10000,
        // we want to shrink it to short
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: touch.radiusX ? touch.radiusX * 2 : 0,
        touchSizeMinor: touch.radiusY ? touch.radiusY * 2 : 0
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getSupportedTouchEvents",
    value: function getSupportedTouchEvents() {
      // FF, Chrome, Opera, iOS Safari
      if (window.TouchEvent) {
        return {
          startEvent: 'touchstart',
          moveEvent: 'touchmove',
          endEvent: 'touchend',
          cancelEvent: 'touchcancel'
        };
      }

      // IE11, Edge, Safari (desktop)
      // Pointer events are also supported by others, but the touch is more
      // accurate in touch related while the pointer is meant to aggregate all
      // the pointer devices
      if (window.PointerEvent) {
        return {
          startEvent: 'pointerdown',
          moveEvent: 'pointermove',
          endEvent: 'pointerup',
          cancelEvent: 'pointercancel'
        };
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('TapEvents:_createEventsToListenList - No touch support for browser.');
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/TouchEventCollector.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/events/TouchEventCollector.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   TouchEventType: function() { return /* binding */ TouchEventType; },
/* harmony export */   "default": function() { return /* binding */ TouchEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




var featureSettings = {
  configKey: 'isTouchEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var TouchEventIEType = {
  pointerdown: 'touchstart',
  pointerup: 'touchend',
  pointermove: 'touchmove',
  MSPointerDown: 'touchstart',
  MSPointerUp: 'touchend',
  MSPointerMove: 'touchmove'
};
var TouchEventType = {
  touchstart: 0,
  touchmove: 1,
  touchend: 2,
  touchcancel: 3
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'clientX', 'clientY', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor', 'pageX', 'pageY', 'screenX', 'screenY', 'relativeTime', 'touchPressure'];
var TouchEventCollector = /*#__PURE__*/function (_DataCollector) {
  function TouchEventCollector(utils, elements, dataQ, msgBus, maskingService, configuration) {
    var _this;
    _classCallCheck(this, TouchEventCollector);
    _this = _callSuper(this, TouchEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._onAllBrowsersTouchEventBinded = _this._onAllBrowsersTouchEvent.bind(_this);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }

  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(TouchEventCollector, _DataCollector);
  return _createClass(TouchEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, identifier, touch, e) {
      if (type === TouchEventType.touchstart || type === TouchEventType.touchend) {
        this._msgBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.TouchEvent, {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__.IsTrustedValue[e.isTrusted];
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      if (this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      if (this._utils.isUndefinedNull(identifier)) {
        identifier = -1;
      }
      var relativeTs = this.getTimestampFromEvent(e);
      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue('touch_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        eventType: type,
        isTrusted: isTrusted,
        elementHash: element,
        clientX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.clientX ? Math.round(touch.clientX) : 0,
        clientY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.clientY ? Math.round(touch.clientY) : 0,
        touchIndex: identifier,
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: touch.radiusX ? touch.radiusX * 2 : 0,
        touchSizeMinor: touch.radiusY ? touch.radiusY * 2 : 0,
        pageX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.pageX || 0,
        pageY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.pageY || 0,
        screenX: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.screenX || 0,
        screenY: this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : touch.screenY || 0,
        relativeTime: relativeTs,
        touchPressure: touch.force || -1
      }));
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var _this2 = this;
      var currDocument = browserContext.getDocument();
      var eventsToListen;

      // FF, Chrome, Opera, iOS Safari
      if (window.TouchEvent) {
        eventsToListen = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];
      } else if (window.PointerEvent) {
        // IE11, Edge, Safari (desktop)
        // Pointer events are also supported by others, but the touch is more
        // accurate in touch related while the pointer is meant to aggregate all
        // the pointer devices

        eventsToListen = ['pointerdown', 'pointermove', 'pointerup'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents) {
        var _loop = function _loop(i) {
          _this2._utils.addEventListener(currDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersTouchEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this2._maxShadowDepth, _this2._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this2._utils.addEventListener(iframe.contentDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersTouchEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop(i);
        }
      }
    }

    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      var currDocument = browserContext.getDocument();
      if (this._listeningToEvents) {
        var _loop2 = function _loop2(i) {
          _this3._utils.removeEventListener(currDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersTouchEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this3._maxShadowDepth, _this3._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this3._utils.removeEventListener(iframe.contentDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersTouchEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop2(i);
        }
      }
    }
  }, {
    key: "_onAllBrowsersTouchEvent",
    value: function _onAllBrowsersTouchEvent(e) {
      this._onIeTouchEvent(e);
      this._onTouchEvent(e);
      return true;
    }
  }, {
    key: "_onTouchEvent",
    value: function _onTouchEvent(e) {
      // prevents ie from working
      if (e.pointerType === null || e.pointerType === undefined) {
        if (e.changedTouches !== undefined) {
          var type = TouchEventType[e.type];
          for (var i = 0; i < e.changedTouches.length; i++) {
            var touch = e.changedTouches[i];
            var identifier = touch.identifier % 10000; // we want to shrink it to short
            this._addToCommunicationQueue(type, identifier, touch, e);
          }
        }
      }
    }
  }, {
    key: "_onIeTouchEvent",
    value: function _onIeTouchEvent(e) {
      // don't take the event if it's a mouse event. different syntax between ie 10 and 11
      if (e.pointerType != null) {
        if (e.pointerType === 'touch' || e.pointerType === 'pen' || e.pointerType === e.MSPOINTER_TYPE_TOUCH || e.pointerType === e.MSPOINTER_TYPE_PEN) {
          var touchLikeType = TouchEventIEType[e.type] || 'touchcancel';
          var identifier = e.pointerId ? e.pointerId % 10000 : 0; // we want to shrink it to short
          var type = TouchEventType[touchLikeType];
          this._addToCommunicationQueue(type, identifier, e, e);
        }
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/WindowEventCollector.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/events/WindowEventCollector.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; },
/* harmony export */   WindowEventType: function() { return /* binding */ WindowEventType; },
/* harmony export */   "default": function() { return /* binding */ WindowEventCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// eslint-disable-next-line max-classes-per-file





var featureSettings = {
  configKey: 'isWindowEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var WindowEventType = {
  DOMContentLoaded: 0,
  scroll: 1,
  resize: 2,
  focus: 3,
  blur: 4,
  tabFocus: 5,
  tabBlur: 6
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'screenWidth', 'screenHeight', 'clientWidth', 'clientHeight', 'documentWidth', 'documentHeight', 'scrollTop', 'scrollLeft', 'windowInnerWidth', 'windowInnerHeight', 'windowOuterWidth', 'windowOuterHeight'];
var WindowEventCollector = /*#__PURE__*/function (_DataCollector) {
  function WindowEventCollector(builder) {
    var _this;
    _classCallCheck(this, WindowEventCollector);
    _this = _callSuper(this, WindowEventCollector);
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      try {
        _this._resizeEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ResizeEvent, _this._onWindowEvent);
        _this._focusEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.FocusEvent, _this._onWindowEvent);
        _this._blurEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.BlurEvent, _this._onWindowEvent);
        _this._domContentLoadedEventEmitter.start(browserContext.getDocument());
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.DOMContentLoadedEvent, _this._onWindowEvent);
        _this._visibilityChangeEventEmitter.start(browserContext.getDocument());
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.VisibilityChangeEvent, _this._onWindowEvent);
        if (_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isScrollCollect)) {
          _this._scrollEventEmitter.start(browserContext.Context);
          _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
        }
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Failed starting the WindowEventCollector. msg: ".concat(err.message), err);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "stopFeature", function (browserContext) {
      try {
        _this._resizeEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ResizeEvent, _this._onWindowEvent);
        _this._focusEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.FocusEvent, _this._onWindowEvent);
        _this._blurEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.BlurEvent, _this._onWindowEvent);
        _this._domContentLoadedEventEmitter.stop(browserContext.getDocument());
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.DOMContentLoadedEvent, _this._onWindowEvent);
        _this._visibilityChangeEventEmitter.stop(browserContext.getDocument());
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.VisibilityChangeEvent, _this._onWindowEvent);
        if (_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isScrollCollect)) {
          _this._scrollEventEmitter.stop(browserContext.Context);
          _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
        }
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Failed stopping the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateFeatureConfig", function (browserContext) {
      if (!_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isScrollCollect)) {
        _this._scrollEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
      } else if (_this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.isScrollCollect)) {
        _this._scrollEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_3__.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
      }
    });
    _defineProperty(_this, "_onWindowEvent", function (event) {
      try {
        _this._sendToQueue(event);
      } catch (e) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while sending window event. ".concat(e.message), e);
      }
    });
    _defineProperty(_this, "_sendToQueue", function (e) {
      if (!e) {
        throw new Error('Invalid window event received.');
      }
      var time;
      var isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[undefined];
      if (e.type === 'DOMContentLoaded') {
        time = new Date().getTime();
      } else {
        time = _this.getEventTimestamp(e);
        isTrusted = _IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[e.isTrusted];
      }
      // if for performance optimization
      if (_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].isDebug()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace('got event ' + e.type + ' at time ' + time);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].trace('adding to queue - screen(width,height): ' + screen.width + ',' + screen.height + ' window(width,height): ' + window.innerWidth + ',' + window.innerHeight);
      }
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var type = e.type !== 'visibilitychange' ? e.type : document.visibilityState === 'hidden' ? 'tabBlur' : 'tabFocus';
      var eventType = WindowEventType[type];
      if (eventType == null || eventType === undefined) {
        eventType = -1;
      }
      _this._dataQueue.addToQueue('window_events', _this._utils.convertToArrayByMap(EventStructure, {
        eventType: eventType,
        eventSequence: eventSeq,
        timestamp: time,
        screenWidth: screen.width ? Math.round(screen.width) : -1,
        screenHeight: screen.height ? Math.round(screen.height) : -1,
        clientWidth: window.innerWidth ? Math.round(window.innerWidth) : -1,
        clientHeight: window.innerHeight ? Math.round(window.innerHeight) : -1,
        documentWidth: document.body && document.body.clientWidth ? Math.round(document.body.clientWidth) : -1,
        documentHeight: document.body && document.body.clientHeight ? Math.round(document.body.clientHeight) : -1,
        scrollTop: document.body && document.body.scrollTop ? Math.round(document.body.scrollTop) : 0,
        scrollLeft: document.body && document.body.scrollLeft ? Math.round(document.body.scrollLeft) : 0,
        windowInnerWidth: window.innerWidth ? Math.round(window.innerWidth) : -1,
        windowInnerHeight: window.innerHeight ? Math.round(window.innerHeight) : -1,
        windowOuterWidth: window.outerWidth ? Math.round(window.outerWidth) : -1,
        windowOuterHeight: window.outerHeight ? Math.round(window.outerHeight) : -1,
        isTrusted: isTrusted
      }));
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._utils = builder.utils;
    _this._dataQueue = builder.dataQueue;
    _this._messageBus = builder.messageBus;
    _this._focusEventEmitter = builder.focusEventEmitter;
    _this._blurEventEmitter = builder.blurEventEmitter;
    _this._resizeEventEmitter = builder.resizeEventEmitter;
    _this._domContentLoadedEventEmitter = builder.domContentLoadedEventEmitter;
    _this._visibilityChangeEventEmitter = builder.visibilityChangeEventEmitter;
    _this._scrollEventEmitter = builder.scrollEventEmitter;
    return _this;
  }
  _inherits(WindowEventCollector, _DataCollector);
  return _createClass(WindowEventCollector, null, [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, utils, dataQ) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.utils = utils;
          this.dataQueue = dataQ;
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withFocusEventEmitter",
          value: function withFocusEventEmitter(focusEventEmitter) {
            this.focusEventEmitter = focusEventEmitter;
            return this;
          }
        }, {
          key: "withBlurEventEmitter",
          value: function withBlurEventEmitter(blurEventEmitter) {
            this.blurEventEmitter = blurEventEmitter;
            return this;
          }
        }, {
          key: "withResizeEventEmitter",
          value: function withResizeEventEmitter(resizeEventEmitter) {
            this.resizeEventEmitter = resizeEventEmitter;
            return this;
          }
        }, {
          key: "withDOMContentLoadedEventEmitter",
          value: function withDOMContentLoadedEventEmitter(domContentLoadedEventEmitter) {
            this.domContentLoadedEventEmitter = domContentLoadedEventEmitter;
            return this;
          }
        }, {
          key: "withVisibilityChangeEventEmitter",
          value: function withVisibilityChangeEventEmitter(visibilityChangeEventEmitter) {
            this.visibilityChangeEventEmitter = visibilityChangeEventEmitter;
            return this;
          }
        }, {
          key: "withScrollEventEmitter",
          value: function withScrollEventEmitter(scrollEventEmitter) {
            this.scrollEventEmitter = scrollEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new WindowEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/events/handlers/JqueryElementsHandler.js":
/*!**********************************************************************!*\
  !*** ./src/main/collectors/events/handlers/JqueryElementsHandler.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ JqueryElementsHandler; }
/* harmony export */ });
var StandardInputEventsEmitter = null;
var StandardOnClickEventsEmitter = null;
var StandardOnChangeEventsEmitter = null;
var StandardOnFormEventsEmitter = null;
function _bindInputEvents(element) {
  StandardInputEventsEmitter.removeElementEvents(element);
  StandardInputEventsEmitter.addElementEvents(element, true);
}
function _bindOnClickEvents(element) {
  StandardOnClickEventsEmitter.removeElementEvents(element);
  StandardOnClickEventsEmitter.addElementEvents(element, true);
}
function _bindOnChangeEvents(element) {
  StandardOnChangeEventsEmitter.removeElementEvents(element);
  StandardOnChangeEventsEmitter.addElementEvents(element, true);
}
function _bindOnFormsEvents(element) {
  StandardOnFormEventsEmitter.removeElementEvents(element);
  StandardOnFormEventsEmitter.addElementEvents(element, true);
}
function JqueryElementsHandler(StandardInputEventsEmitterService, StandardOnClickEventsEmitterService, StandardOnChangeEventsEmitterService, StandardOnFormEventsEmitterService) {
  StandardInputEventsEmitter = StandardInputEventsEmitterService;
  StandardOnClickEventsEmitter = StandardOnClickEventsEmitterService;
  StandardOnChangeEventsEmitter = StandardOnChangeEventsEmitterService;
  StandardOnFormEventsEmitter = StandardOnFormEventsEmitterService;
  return {
    bindInputEvents: _bindInputEvents,
    bindOnClickEvents: _bindOnClickEvents,
    bindOnChangeEvents: _bindOnChangeEvents,
    bindOnFormsEvents: _bindOnFormsEvents
  };
}

/***/ }),

/***/ "./src/main/collectors/events/index.js":
/*!*********************************************!*\
  !*** ./src/main/collectors/events/index.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccelerometerEventCollector: function() { return /* reexport safe */ _AccelerometerEventCollector__WEBPACK_IMPORTED_MODULE_5__["default"]; },
/* harmony export */   AgenticDomInjectionCollector: function() { return /* reexport safe */ _AgenticDomInjectionCollector__WEBPACK_IMPORTED_MODULE_21__["default"]; },
/* harmony export */   BatteryStatusCollector: function() { return /* reexport safe */ _BatteryStatusCollector__WEBPACK_IMPORTED_MODULE_26__["default"]; },
/* harmony export */   BeforeInstallPromptEventCollector: function() { return /* reexport safe */ _BeforeInstallPromptEventCollector__WEBPACK_IMPORTED_MODULE_3__["default"]; },
/* harmony export */   ClipboardEventCollector: function() { return /* reexport safe */ _ClipboardEventCollector__WEBPACK_IMPORTED_MODULE_1__["default"]; },
/* harmony export */   DeviceOrientationCollector: function() { return /* reexport safe */ _DeviceOrientationCollector__WEBPACK_IMPORTED_MODULE_9__["default"]; },
/* harmony export */   ElementEventCollector: function() { return /* reexport safe */ _ElementEventCollector__WEBPACK_IMPORTED_MODULE_0__["default"]; },
/* harmony export */   ElementsCollector: function() { return /* reexport safe */ _ElementsCollector__WEBPACK_IMPORTED_MODULE_18__["default"]; },
/* harmony export */   FlutterElementEventsCollector: function() { return /* reexport safe */ _flutter_collectors_elements_FlutterElementEventsCollector__WEBPACK_IMPORTED_MODULE_22__["default"]; },
/* harmony export */   FlutterKeyEventCollector: function() { return /* reexport safe */ _flutter_collectors_key_FlutterKeyEventCollector__WEBPACK_IMPORTED_MODULE_23__["default"]; },
/* harmony export */   FlutterMouseEventCollector: function() { return /* reexport safe */ _flutter_collectors_mouse_FlutterMouseEventCollector__WEBPACK_IMPORTED_MODULE_25__["default"]; },
/* harmony export */   FlutterTouchEventCollector: function() { return /* reexport safe */ _flutter_collectors_touch_FlutterTouchEventCollector__WEBPACK_IMPORTED_MODULE_24__["default"]; },
/* harmony export */   KeyEventCollector: function() { return /* reexport safe */ _KeyEventCollector__WEBPACK_IMPORTED_MODULE_15__["default"]; },
/* harmony export */   LevenshteinDistanceCollector: function() { return /* reexport safe */ _LevenshteinDistanceCollector__WEBPACK_IMPORTED_MODULE_20__["default"]; },
/* harmony export */   LightSensorEventCollector: function() { return /* reexport safe */ _LightSensorEventCollector__WEBPACK_IMPORTED_MODULE_13__["default"]; },
/* harmony export */   LocationCollector: function() { return /* reexport safe */ _LocationCollector__WEBPACK_IMPORTED_MODULE_19__["default"]; },
/* harmony export */   MainThreadBlockingCollector: function() { return /* reexport safe */ _MainThreadBlockingCollector__WEBPACK_IMPORTED_MODULE_27__["default"]; },
/* harmony export */   MouseEventCollector: function() { return /* reexport safe */ _MouseEventCollector__WEBPACK_IMPORTED_MODULE_14__["default"]; },
/* harmony export */   NetInfoEventCollector: function() { return /* reexport safe */ _NetInfoEventCollector__WEBPACK_IMPORTED_MODULE_8__["default"]; },
/* harmony export */   OrientationEventCollector: function() { return /* reexport safe */ _OrientationEventCollector__WEBPACK_IMPORTED_MODULE_2__["default"]; },
/* harmony export */   PinchZoomEventCollector: function() { return /* reexport safe */ _PinchZoomEventCollector__WEBPACK_IMPORTED_MODULE_6__["default"]; },
/* harmony export */   PrintEventCollector: function() { return /* reexport safe */ _PrintEventCollector__WEBPACK_IMPORTED_MODULE_12__["default"]; },
/* harmony export */   ScriptEventCollector: function() { return /* reexport safe */ _ScriptEventCollector__WEBPACK_IMPORTED_MODULE_7__["default"]; },
/* harmony export */   StorageEventCollector: function() { return /* reexport safe */ _StorageEventCollector__WEBPACK_IMPORTED_MODULE_11__["default"]; },
/* harmony export */   TabEventCollector: function() { return /* reexport safe */ _TabEventCollector__WEBPACK_IMPORTED_MODULE_17__["default"]; },
/* harmony export */   TapEventCollector: function() { return /* reexport safe */ _TapEventCollector__WEBPACK_IMPORTED_MODULE_10__["default"]; },
/* harmony export */   TouchEventCollector: function() { return /* reexport safe */ _TouchEventCollector__WEBPACK_IMPORTED_MODULE_16__["default"]; },
/* harmony export */   WindowEventCollector: function() { return /* reexport safe */ _WindowEventCollector__WEBPACK_IMPORTED_MODULE_4__["default"]; }
/* harmony export */ });
/* harmony import */ var _ElementEventCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ElementEventCollector */ "./src/main/collectors/events/ElementEventCollector.js");
/* harmony import */ var _ClipboardEventCollector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ClipboardEventCollector */ "./src/main/collectors/events/ClipboardEventCollector.js");
/* harmony import */ var _OrientationEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OrientationEventCollector */ "./src/main/collectors/events/OrientationEventCollector.js");
/* harmony import */ var _BeforeInstallPromptEventCollector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BeforeInstallPromptEventCollector */ "./src/main/collectors/events/BeforeInstallPromptEventCollector.js");
/* harmony import */ var _WindowEventCollector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WindowEventCollector */ "./src/main/collectors/events/WindowEventCollector.js");
/* harmony import */ var _AccelerometerEventCollector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AccelerometerEventCollector */ "./src/main/collectors/events/AccelerometerEventCollector.js");
/* harmony import */ var _PinchZoomEventCollector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PinchZoomEventCollector */ "./src/main/collectors/events/PinchZoomEventCollector.js");
/* harmony import */ var _ScriptEventCollector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ScriptEventCollector */ "./src/main/collectors/events/ScriptEventCollector.js");
/* harmony import */ var _NetInfoEventCollector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./NetInfoEventCollector */ "./src/main/collectors/events/NetInfoEventCollector.js");
/* harmony import */ var _DeviceOrientationCollector__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeviceOrientationCollector */ "./src/main/collectors/events/DeviceOrientationCollector.js");
/* harmony import */ var _TapEventCollector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./TapEventCollector */ "./src/main/collectors/events/TapEventCollector.js");
/* harmony import */ var _StorageEventCollector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./StorageEventCollector */ "./src/main/collectors/events/StorageEventCollector.js");
/* harmony import */ var _PrintEventCollector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./PrintEventCollector */ "./src/main/collectors/events/PrintEventCollector.js");
/* harmony import */ var _LightSensorEventCollector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./LightSensorEventCollector */ "./src/main/collectors/events/LightSensorEventCollector.js");
/* harmony import */ var _MouseEventCollector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MouseEventCollector */ "./src/main/collectors/events/MouseEventCollector.js");
/* harmony import */ var _KeyEventCollector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./KeyEventCollector */ "./src/main/collectors/events/KeyEventCollector.js");
/* harmony import */ var _TouchEventCollector__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./TouchEventCollector */ "./src/main/collectors/events/TouchEventCollector.js");
/* harmony import */ var _TabEventCollector__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./TabEventCollector */ "./src/main/collectors/events/TabEventCollector.js");
/* harmony import */ var _ElementsCollector__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ElementsCollector */ "./src/main/collectors/events/ElementsCollector.js");
/* harmony import */ var _LocationCollector__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./LocationCollector */ "./src/main/collectors/events/LocationCollector.js");
/* harmony import */ var _LevenshteinDistanceCollector__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./LevenshteinDistanceCollector */ "./src/main/collectors/events/LevenshteinDistanceCollector.js");
/* harmony import */ var _AgenticDomInjectionCollector__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./AgenticDomInjectionCollector */ "./src/main/collectors/events/AgenticDomInjectionCollector.js");
/* harmony import */ var _flutter_collectors_elements_FlutterElementEventsCollector__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../flutter/collectors/elements/FlutterElementEventsCollector */ "./src/main/flutter/collectors/elements/FlutterElementEventsCollector.js");
/* harmony import */ var _flutter_collectors_key_FlutterKeyEventCollector__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../flutter/collectors/key/FlutterKeyEventCollector */ "./src/main/flutter/collectors/key/FlutterKeyEventCollector.js");
/* harmony import */ var _flutter_collectors_touch_FlutterTouchEventCollector__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../flutter/collectors/touch/FlutterTouchEventCollector */ "./src/main/flutter/collectors/touch/FlutterTouchEventCollector.js");
/* harmony import */ var _flutter_collectors_mouse_FlutterMouseEventCollector__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../flutter/collectors/mouse/FlutterMouseEventCollector */ "./src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js");
/* harmony import */ var _BatteryStatusCollector__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./BatteryStatusCollector */ "./src/main/collectors/events/BatteryStatusCollector.js");
/* harmony import */ var _MainThreadBlockingCollector__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./MainThreadBlockingCollector */ "./src/main/collectors/events/MainThreadBlockingCollector.js");





























/***/ }),

/***/ "./src/main/collectors/identity/CrossDomainMuidCollector.js":
/*!******************************************************************!*\
  !*** ./src/main/collectors/identity/CrossDomainMuidCollector.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CSP_REGEX: function() { return /* binding */ CSP_REGEX; },
/* harmony export */   CrossmuidEventType: function() { return /* binding */ CrossmuidEventType; },
/* harmony export */   DOMAIN_REGEX: function() { return /* binding */ DOMAIN_REGEX; },
/* harmony export */   DOMAIN_STATES_PROPS: function() { return /* binding */ DOMAIN_STATES_PROPS; },
/* harmony export */   EventStructure: function() { return /* binding */ EventStructure; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _core_frames_SystemFrameName__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/frames/SystemFrameName */ "./src/main/core/frames/SystemFrameName.js");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var featureSettings = {
  configKey: 'isCrossdomain',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var CrossmuidEventType = {
  found: 0,
  "new": 1
};

// REGEX to detect usage of child-src with Content Security Policy meta tag
var CSP_REGEX = /(?=(child\-src)|(frame\-src))([^;]+)/gi;
// REGEX to detect domain URL excluding request uri
var DOMAIN_REGEX = /http[s]?:\/\/([^\/]+)/gi;

// Domain states props template
var DOMAIN_STATES_PROPS = {
  resource: null,
  iframeElement: false,
  // Iframe element appended to DOM
  blockedByCSP: false,
  // CSP child-src rule is used without the domains occurrence
  iframeLoaded: false,
  // Iframe event has been received
  ACKMessageSent: false,
  // ACK message has been sent (always include generated muid)
  ACKMessageRecieved: false,
  // ACK message has been received in the cross client script
  unavailable: false // Domain is not available - do not report again
};
var EventStructure = ['eventSequence', 'timestamp', 'eventType', 'domainUrl', 'muid'];
var CrossDomainMuidCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * Use a CrossDomain builder to create a new instance
   * @param builder {Builder}
   */
  function CrossDomainMuidCollector(builder) {
    var _this;
    _classCallCheck(this, CrossDomainMuidCollector);
    _this = _callSuper(this, CrossDomainMuidCollector);
    /**
     * Iterate over the domains and create a default state for each domain
     * Detect domains in CSP meta tag
     * Start connection between Cross Domain feature and the cross client domains
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      // Expecting a list of domains
      _this._domainsResources = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.crossDomainsList);
      _this._crossDomainsTimeout = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.crossDomainsTimeout);
      if (Array.isArray(_this._domainsResources) && _this._domainsResources.length > 0) {
        // Start window Message event observing
        _this._windowMessageEmitter.startObserver(browserContext);
        _this._domainsResources.forEach(function (element) {
          var _domainMatch = element.match(DOMAIN_REGEX);
          if (_domainMatch !== null && typeof _domainMatch[0] === 'string') {
            var _domain = _domainMatch[0];
            if (_typeof(_this._domainsStates[_domain]) === 'object') return;
            _this._domainsStates[_domain] = _objectSpread({}, DOMAIN_STATES_PROPS);
            _this._domainsStates[_domain].resource = element;
            _this._domains.push(_domain);
          }
        });

        // If invalid domains of any sort are provided, verify this._domains has at least a single valid
        // domain element that can be connected
        if (Array.isArray(_this._domains) && _this._domains.length > 0) {
          // Apply the Content Security Policy assertion to every available domain
          _this.isBlockedByCSP(browserContext, _this._domains);
          _this._domUtils.onDocumentBody(browserContext.Context, function () {
            _this.connectDomains(browserContext);
          });
        }
      }
    });
    /**
     * Stop the CrossDomain's message emitter
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "stopFeature", function (browserContext) {
      _this._clearFeaturesObjects(browserContext);
    });
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
    _defineProperty(_this, "_clearFeaturesObjects", function (browserContext) {
      _this._windowMessageEmitter.stopObserver(browserContext);
      if (Array.isArray(_this._domains) && _this._domains.length > 0) {
        _this._domains.forEach(function (domain) {
          _this.clearDomElements(browserContext, domain);
        });
        _this._domains = [];
        _this._domainsStates = {};
      }
    });
    /**
     * Start/Continue the connection between the current window to the cross client domains
     * Once the cross domain connection is started, using setTimeout, allow up to X milliseconds
     * (using the crossDomainsTimeout directive) before removing each iframe created per a given domain.
     * @param {BrowserContext} browserContext
     * @param domains
     */
    _defineProperty(_this, "connectDomains", function (browserContext) {
      if (Array.isArray(_this._domains) && _this._domains.length > 0) {
        _this._domains.forEach(function (domain) {
          // Do not create iframe in the following cases
          if (!_this._domainsStates[domain].blockedByCSP && _this._domainsStates[domain].iframeElement === false) {
            _this.createIframe(browserContext, domain);
          }
        });
        _this._domainsTimeoutFunc = setTimeout(function () {
          _this._domains.forEach(function (domain) {
            if (_typeof(_this._domainsStates[domain]) === 'object' && _this._domainsStates[domain].ACKMessageRecieved === false && _this._domainsStates[domain].unavailable === false) {
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Cross Domain feature - domain ".concat(domain, " is unavailable"));
              _this._domainsStates[domain].unavailable = true;
              _this.clearDomElements(browserContext, domain);
            }
          });
        }, _this._crossDomainsTimeout);
      }
    });
    /**
     * Create the iframe element, setup an onload event
     * @param {BrowserContext} browserContext
     * @param domain
     */
    _defineProperty(_this, "createIframe", function (browserContext, domain) {
      var iframe = browserContext.getDocument().createElement('iframe');
      iframe.onload = function () {
        _this.postNextMessage(domain);
      };
      iframe.id = _core_frames_SystemFrameName__WEBPACK_IMPORTED_MODULE_5__.SystemFrameName.ignorePrefixFrame + CrossDomainMuidCollector.generateRandomID();
      iframe.src = _this._domainsStates[domain].resource;
      iframe.style.display = 'none';
      iframe.style.opacity = '0';
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      browserContext.getDocument().body.appendChild(iframe);
      _this._domainsStates[domain].iframeElement = iframe;
    });
    /**
     * Clear the iframe for the requested domain
     * @param {BrowserContext} browserContext
     * @param domain
     */
    _defineProperty(_this, "clearDomElements", function (browserContext, domain) {
      var _domainFrame = _this._domainsStates[domain].iframeElement;
      if (_typeof(_domainFrame) === 'object') {
        var _domainFrameElement = browserContext.getDocument().getElementById(_this._domainsStates[domain].iframeElement.id);
        if (_domainFrameElement !== null) {
          browserContext.getDocument().body.removeChild(_domainFrame);
        }
      }
    });
    /**
     * Post the next message based on the domains state
     * Message is sent only if the ACK has not been sent and if the iframeElement is available
     * At this stage, generated MUID is sent by default whether the cross client script needs it or not
     * @param domain
     */
    _defineProperty(_this, "postNextMessage", function (domain) {
      if (!_this._domainsStates[domain].ACKMessageRecieved && _this._domainsStates[domain].iframeElement) {
        var message = {
          'muid': _this._generatedMUID
        };
        _this._domainsStates[domain].iframeElement.contentWindow.postMessage(JSON.stringify(message), domain);
        _this._domainsStates[domain].ACKMessageSent = true;
      }
    });
    /**
     * Attempt to locate a Content-Security-Policy meta tag with child-src rule
     * Updates the states of every domain if detected
     * @param {BrowserContext} browserContext
     * @param domains
     */
    _defineProperty(_this, "isBlockedByCSP", function (browserContext, domains) {
      if (!Array.isArray(domains) || domains.length < 1) {
        throw new Error('Domains are expected for content security policy assertion');
      }
      var cspFound = false;
      [].slice.call(browserContext.getDocument().getElementsByTagName('meta')).forEach(function (metaElem) {
        if (metaElem.getAttribute('http-equiv') === 'Content-Security-Policy') {
          cspFound = true;
          var cspMatch = metaElem.getAttribute('content').match(CSP_REGEX);
          domains.forEach(function (domain) {
            if (cspMatch && cspMatch[0].indexOf(domain) === -1) {
              if (_typeof(_this._domainsStates[domain]) === 'object') {
                // Only log if we haven't already marked it as blocked
                if (!_this._domainsStates[domain].blockedByCSP) {
                  _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Cross Domain feature - domain ".concat(domain, " is blocked by CSP"));
                }
                _this._domainsStates[domain].blockedByCSP = true;
              }
            }
          });
        }
        if (cspFound) return false;
      });
    });
    /**
     * Will clear the frame element immediately upon handling cross client message
     * @param message
     */
    _defineProperty(_this, "windowMessageHandler", function (message) {
      var domain = message.message.origin;
      if (_this._domainsStates.hasOwnProperty(domain)) {
        // Determine the next state based on the cross client message
        if (_this._domainsStates[domain].ACKMessageRecieved === true) return;
        _this._domainsStates[domain].ACKMessageRecieved = true;
        _this.clearDomElements(new _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_3__["default"](message.message.currentTarget, _this._domUtils), domain);
        var _data = message.message.data;
        _this.sendToQueue(domain, _data);
      }
    });
    /**
     * Send the found/new data to queue
     * @param domain
     * @param data
     */
    _defineProperty(_this, "sendToQueue", function (domainUrl, data) {
      var domain = domainUrl.replace(/http[s]?:\/\//i, '');
      if (_typeof(data.found) === 'object') {
        Object.keys(data.found).forEach(function (item) {
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var foundKey = domain;
          var foundValue = data.found[item].split('__');
          var eventData = {
            eventType: _this._eventType.found,
            eventSequence: eventSeq,
            domainUrl: foundKey,
            muid: foundValue[0],
            timestamp: foundValue[1]
          };
          _this._dataQ.addToQueue('crossmuid_event', _this._utils.convertToArrayByMap(EventStructure, eventData), true);
        });
      }
      if (_typeof(data["new"]) === 'object') {
        Object.keys(data["new"]).forEach(function (item) {
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var newKey = domain;
          var newValue = data["new"][item].split('__');
          var eventData = {
            eventType: _this._eventType["new"],
            eventSequence: eventSeq,
            domainUrl: newKey,
            muid: newValue[0],
            timestamp: newValue[1]
          };
          _this._dataQ.addToQueue('crossmuid_event', _this._utils.convertToArrayByMap(EventStructure, eventData));
        });
      }
      if (_typeof(data.error_message) === 'object') {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Cross Domain feature - domain ".concat(domain, " error. Error Message: \n                ").concat(data.error_message, " Code: ").concat(data.error_code));
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateFeatureConfig", function (browserContext) {
      _this._domainsResources = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.crossDomainsList);
      _this._crossDomainsTimeout = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.crossDomainsTimeout);
      clearTimeout(_this._domainsTimeoutFunc);
      _this._domainsTimeoutFunc = null;
      _this.updateDomainStates(browserContext);
    });
    /**
     * Update the _domainStates object in case unhandled domains are found
     * Do not clear or remove the state of handled domains
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateDomainStates", function (browserContext) {
      if (Array.isArray(_this._domainsResources) && _this._domainsResources.length > 0) {
        _this._domains = [];
        _this._domainsResources.forEach(function (element) {
          var _domainMatch = element.match(DOMAIN_REGEX);
          if (_domainMatch !== null && typeof _domainMatch[0] === 'string') {
            var _domain = _domainMatch[0];
            // No need to recreated the state for existing domain
            if (_typeof(_this._domainsStates[_domain]) !== 'object') {
              _this._domainsStates[_domain] = _objectSpread({}, DOMAIN_STATES_PROPS);
              _this._domainsStates[_domain].resource = element;
            }
            _this._domains.push(_domain);
          }
        });

        // If invalid domains of any sort are provided, verify this._domains has at least a single valid
        // domain element that can be connected
        if (Array.isArray(_this._domains) && _this._domains.length > 0) {
          // Apply the Content Security Policy assertion to every available domain
          _this.isBlockedByCSP(browserContext, _this._domains);
          _this._domUtils.onDocumentBody(browserContext.Context, function () {
            _this.connectDomains(browserContext);
          });
        }
      }
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._dataQ = builder.dataQ;
    _this._utils = builder.utils;
    _this._domUtils = builder.domUtils;
    _this._eventType = builder.eventType;
    _this._messageBus = builder.messageBus;
    _this._windowMessageEmitter = builder.windowMessageEventEmitter;
    _this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.WindowMessageEvent, _this.windowMessageHandler);
    // Cross client MUID to be sent by default for every domain provided
    _this._generatedMUID = _this._utils.dateNow() + '-' + _this._utils.generateUUID().toUpperCase();
    _this._domainsStates = {};
    // Full domain resources list provided by the config manager
    _this._domainsResources = [];
    // Actual domains array used for internal iteration
    _this._domains = [];
    _this._domainsTimeoutFunc = null;
    return _this;
  }
  _inherits(CrossDomainMuidCollector, _DataCollector);
  return _createClass(CrossDomainMuidCollector, null, [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }

    /**
     * Returns a CrossDomain DataCollector builder
     * @returns {Builder}
     * @constructor
     */
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, dataQ, utils, domUtils, eventType) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.dataQ = dataQ;
          this.utils = utils;
          this.domUtils = domUtils;
          this.eventType = eventType;
        }

        /**
         * @param {MessageBus} messageBus
         * @returns {Builder}
         */
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }

          /**
           *
           * @param {WindowMessageEventEmitter} windowMessageEventEmitter
           * @returns {Builder}
           */
        }, {
          key: "withWindowMessageEventEmitter",
          value: function withWindowMessageEventEmitter(windowMessageEventEmitter) {
            this.windowMessageEventEmitter = windowMessageEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new CrossDomainMuidCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }, {
    key: "generateRandomID",
    value: function generateRandomID() {
      var charset = 'abcdefghijklmnopqrstuvwxyz0123456789';
      var randomId = '';
      for (var i = 0; i < 16; i++) {
        randomId += charset.charAt(Math.floor(Math.random() * charset.length));
      }
      return randomId;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (CrossDomainMuidCollector);

/***/ }),

/***/ "./src/main/collectors/misc/FilesFeature.js":
/*!**************************************************!*\
  !*** ./src/main/collectors/misc/FilesFeature.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FilesFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var featureSettings = {
  configKey: 'isFilesFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var FilesFeature = /*#__PURE__*/function (_DataCollector) {
  function FilesFeature(configurationRepository, utils, sessionService, muidService, cidCache) {
    var _this;
    _classCallCheck(this, FilesFeature);
    _this = _callSuper(this, FilesFeature);
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._sessionService = sessionService;
    _this._muidService = muidService;
    _this._cidCache = cidCache;
    return _this;
  }

  /**
   * generic function for commends of getting files for different purposes
   * is list is empty or null do not run
   *
   * All the parameters need to be updated in order to call the feature
   */
  _inherits(FilesFeature, _DataCollector);
  return _createClass(FilesFeature, [{
    key: "getFiles",
    value: function getFiles() {
      if (this._customerId && this._muid && this._sid && this._addrList && this._addrList.length > 0) {
        var url;
        for (var i = 0; i < this._addrList.length; i++) {
          // build url
          url = this._addrList[i] + '?cid=' + this._customerId + '&snum=' + this._sid + '&muid=' + this._muid;
          this._utils.getPostUrl(url, 'GET', null, null, null);
          this._isSent = true;
        }
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      var _this$_muidService;
      this._isSent = false;
      try {
        this._addrList = JSON.parse(this._configurationRepository.get('getAddrList'));
      } catch (ex) {
        this._addrList = '';
      }
      this._customerId = this._cidCache.get() || '';
      this._muid = ((_this$_muidService = this._muidService) === null || _this$_muidService === void 0 ? void 0 : _this$_muidService.muid) || '';
      this._sid = this._sessionService.sessionId || '';
      this.getFiles();
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var _this$_muidService2;
      try {
        this._addrList = JSON.parse(this._configurationRepository.get('getAddrList'));
      } catch (ex) {
        this._addrList = '';
      }
      this._customerId = this._cidCache.get() || '';
      this._muid = ((_this$_muidService2 = this._muidService) === null || _this$_muidService2 === void 0 ? void 0 : _this$_muidService2.muid) || '';
      this._sid = this._sessionService.sessionId || '';
      if (!this._isSent) {
        this.getFiles();
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/misc/MetadataCollector.js":
/*!*******************************************************!*\
  !*** ./src/main/collectors/misc/MetadataCollector.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MetadataCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isMetadataCollect',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var MetadataCollector = /*#__PURE__*/function (_DataCollector) {
  function MetadataCollector(configurationRepository, dataQ, metaDataSiteMapper, utils) {
    var _this;
    _classCallCheck(this, MetadataCollector);
    _this = _callSuper(this, MetadataCollector);
    _this._configurationRepository = configurationRepository;
    _this._dataQ = dataQ;
    _this._metaDataSiteMapper = metaDataSiteMapper;
    _this._utils = utils;
    _this._metaDataSiteMapper.updateObserver(_this.onSiteMapperMatch.bind(_this));
    return _this;
  }
  _inherits(MetadataCollector, _DataCollector);
  return _createClass(MetadataCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._metaDataSiteMapper.initTracking();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._metaDataSiteMapper.stopTracking();
    }
  }, {
    key: "onSiteMapperMatch",
    value: function onSiteMapperMatch(matchedMapping) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Metadata Collector mapper match - ".concat(JSON.stringify(matchedMapping)));
      if (matchedMapping.metaVal) {
        this._dataQ.addToQueue('metadata_map', [null, matchedMapping.metaVal, this._utils.dateNow()]);
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/misc/index.js":
/*!*******************************************!*\
  !*** ./src/main/collectors/misc/index.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FilesFeature: function() { return /* reexport safe */ _FilesFeature__WEBPACK_IMPORTED_MODULE_0__["default"]; },
/* harmony export */   MetadataCollector: function() { return /* reexport safe */ _MetadataCollector__WEBPACK_IMPORTED_MODULE_1__["default"]; }
/* harmony export */ });
/* harmony import */ var _FilesFeature__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FilesFeature */ "./src/main/collectors/misc/FilesFeature.js");
/* harmony import */ var _MetadataCollector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MetadataCollector */ "./src/main/collectors/misc/MetadataCollector.js");



/***/ }),

/***/ "./src/main/collectors/perContext/ContextPropsFeature.js":
/*!***************************************************************!*\
  !*** ./src/main/collectors/perContext/ContextPropsFeature.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ContextPropsFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../contract/AgentType */ "./src/main/contract/AgentType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }






var featureSettings = {
  configKey: 'isContextPropsFeature',
  isDefault: false,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var ContextPropsFeature = /*#__PURE__*/function (_DataCollector) {
  function ContextPropsFeature(dataQ, domUtils, perfMonitor, configurationRepository) {
    var _this;
    _classCallCheck(this, ContextPropsFeature);
    _this = _callSuper(this, ContextPropsFeature);
    _this._dataQ = dataQ;
    _this._domUtils = domUtils;
    _this._perfMonitor = perfMonitor;
    _this._configurationRepository = configurationRepository;
    _this._observerCallback = _this._observerCallback.bind(_this);
    _this.calcTime = _this.calcTime.bind(_this);
    _this._getEntriesByType = _this._getEntriesByType.bind(_this);
    _this.callMethod = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.useLegacyZeroTimeout) ? _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].asyncCall : _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].asyncTimeoutCall;
    return _this;
  }
  _inherits(ContextPropsFeature, _DataCollector);
  return _createClass(ContextPropsFeature, [{
    key: "startFeature",
    value: function startFeature() {
      if (self.screen) {
        var xdpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        var ydpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        if (this._shouldCollectStaticFields()) {
          this._dataQ.addToQueue('static_fields', ['display', [screen.colorDepth, screen.width, screen.height, screen.availHeight || -1, screen.availWidth || -1, xdpi, ydpi]], false);
        }
      }
      this.reportPageLoadTime();
    }
  }, {
    key: "_shouldCollectStaticFields",
    value: function _shouldCollectStaticFields() {
      var _this$_configurationR;
      return ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.agentType)) !== _contract_AgentType__WEBPACK_IMPORTED_MODULE_5__.AgentType.SECONDARY;
    }

    //Observer callback function for getting entries
  }, {
    key: "_observerCallback",
    value: function _observerCallback(list, observer) {
      var entries = list.getEntries()[0];
      if (entries.duration) {
        this.calcTime(entries);
        if ("disconnect" in observer) {
          observer.disconnect();
        }
      }
    }

    //checking if the entry type is supported by the useragent
  }, {
    key: "_isEntrySupportedByBrowser",
    value: function _isEntrySupportedByBrowser(entry) {
      //if the supportedEntryTypes is not available feature in browser I skip it and return true
      if (!("supportedEntryTypes" in window.PerformanceObserver)) {
        return true;
      }
      return PerformanceObserver.supportedEntryTypes.includes(entry);
    }

    //get the Performance Navigation API entries
  }, {
    key: "_getEntriesByType",
    value: function _getEntriesByType() {
      if (window.performance.timing) {
        if (window.performance.timing.loadEventEnd && window.performance.timing.navigationStart) {
          var entries = {
            duration: window.performance.timing.loadEventEnd - window.performance.timing.navigationStart
          };
          this.calcTime(entries);
        }
      }
    }

    //entries is an instance of the PerformanceNavigationTiming interface;
    // if not supported it fallback to Navigation Timing API: see class function _getEntriesByType
  }, {
    key: "calcTime",
    value: function calcTime(entries) {
      //when either entries or duration are not captured a warning log will be dispatched
      if (_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].isUndefinedNull(entries)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Context Props Feature: no entries of navigation timing were captured");
        return;
      }
      if (!_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].isUndefinedNull(entries)) {
        if (_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].isUndefinedNull(entries.duration)) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Context Props Feature: page duration loading was not calculated");
          return;
        }
      }
      this._perfMonitor.reportMonitor('t.timeTillPageLoad', Math.round(entries.duration));
    }

    /*
     * Calculates the page load time based on navigation timing api:
     * PerformanceNavigationTiming: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming
     * PerformanceObserver: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver
     * Observer introduced in newer browser versions, so the PerformanceNavigationTiming might be defined but the Observer not
     */
  }, {
    key: "reportPageLoadTime",
    value: function reportPageLoadTime() {
      //first checking if the new Performance Navigation API is supported
      //if not, it uses the old Navigation API
      if (window.performance && "PerformanceNavigationTiming" in window) {
        var entryType = "navigation";
        // if either PerformanceObserver or entryType are not defined/supported we use a fallback
        if (!("PerformanceObserver" in window) || !this._isEntrySupportedByBrowser(entryType)) {
          this.reportPageLoadTimeFallback();
          return;
        }
        // create PerformanceObserver instance
        var performanceObserver = new PerformanceObserver(this._observerCallback);
        try {
          //as of today, there is no sufficient way to detect if a browser supports the type attribute or not
          //therefore we use the try&catch approach.
          performanceObserver.observe({
            type: entryType,
            buffered: true
          });
        } catch (e) {
          this.reportPageLoadTimeFallback();
        }
      } else {
        this.reportPageLoadTimeFallback();
      }
    }

    //fallback function to calculate page loading time
    //for old browsers we use the deprecated interface- https://developer.mozilla.org/en/docs/Web/API/Navigation_timing_API
  }, {
    key: "reportPageLoadTimeFallback",
    value: function reportPageLoadTimeFallback() {
      var _this2 = this;
      //sometimes the load event triggers before we subscribed to it.
      //this way we ensure calling the asyncCall function in case it has been missed
      if (_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_3__["default"].isWindowDocumentReady(window)) {
        this.callMethod.call(this._getEntriesByType);
        return;
      }
      _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].addEventListener(self, 'load', function () {
        //since a timeout is needed for getting all PerformanceNavigationTiming entries
        //we use the asyncCall
        _this2.callMethod.call(_this2._getEntriesByType);
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/perContext/ScriptsFeature.js":
/*!**********************************************************!*\
  !*** ./src/main/collectors/perContext/ScriptsFeature.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ScriptsFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var featureSettings = {
  configKey: 'isScriptsFeature',
  isDefault: false,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var ScriptsFeature = /*#__PURE__*/function (_DataCollector) {
  function ScriptsFeature(dataQ, scriptsRepository) {
    var _this;
    _classCallCheck(this, ScriptsFeature);
    _this = _callSuper(this, ScriptsFeature);
    _this._dataQ = dataQ;
    _this._timeoutValue = 1000; // timeout 1 sec
    _this._scriptsRepository = scriptsRepository;
    _this._runDetectionLoopBinded = _this._runDetectionLoop.bind(_this);
    return _this;
  }
  _inherits(ScriptsFeature, _DataCollector);
  return _createClass(ScriptsFeature, [{
    key: "_checkScriptsData",
    value: function _checkScriptsData() {
      var scriptList = document.scripts;
      for (var i = 0; i < scriptList.length; i++) {
        var scriptRef = {
          src: scriptList[i].src,
          text: scriptList[i].text
        };
        if (!this._scriptsRepository.exists(scriptRef)) {
          this._scriptsRepository.add(scriptRef);
          this._dataQ.addToQueue('scripts', [null, scriptRef.src, scriptRef.textHash]);
        }
      }
    }
  }, {
    key: "_runDetectionLoop",
    value: function _runDetectionLoop() {
      this._checkScriptsData();
      this._timer = setTimeout(this._runDetectionLoopBinded, this._timeoutValue);
      // increase the timeout every time so we won't run this so many times
      if (this._timeoutValue < 536870911) {
        this._timeoutValue *= 4;
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._runDetectionLoop();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._timer) {
        clearTimeout(this._timer);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/perContext/ScriptsRepository.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/perContext/ScriptsRepository.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ScriptsRepository; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * This Class handles working with the the script list obtained from the dom, save the collected scripts and helps
 * to check if a specific script was already collected
 */
var ScriptsRepository = /*#__PURE__*/function () {
  function ScriptsRepository(utils) {
    _classCallCheck(this, ScriptsRepository);
    this._utils = utils;
    this._scriptList = [];
  }
  return _createClass(ScriptsRepository, [{
    key: "count",
    value: function count() {
      return this._scriptList.length;
    }

    /**
     *
     * @param script - an object with {src, text}
     * @returns {boolean}
     */
  }, {
    key: "exists",
    value: function exists(script) {
      // make sure to remove long numbers which might be ID's
      if (/\d\d\d/.test(script.src)) {
        script.src = this._utils.clearTextFromNumbers(script.src);
      }
      var textHash = this._utils.getHash(script.text);
      for (var j = 0; j < this._scriptList.length; j++) {
        // the field has to contain a value, or source, or hash != 0
        if (script.src && script.src === this._scriptList[j].src || textHash && textHash === this._scriptList[j].textHash) {
          return true;
        }
      }
      return false;
    }

    /**
     * add to list
     * @param scriptReference - an object with {src, text}
     */
  }, {
    key: "add",
    value: function add(scriptReference) {
      scriptReference.textHash = this._utils.getHash(scriptReference.text);
      if (/\d\d\d/.test(scriptReference.src)) {
        scriptReference.src = this._utils.clearTextFromNumbers(scriptReference.src);
      }
      this._scriptList.push({
        src: scriptReference.src,
        textHash: scriptReference.textHash
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/perContext/index.js":
/*!*************************************************!*\
  !*** ./src/main/collectors/perContext/index.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContextPropsFeature: function() { return /* reexport safe */ _ContextPropsFeature__WEBPACK_IMPORTED_MODULE_0__["default"]; },
/* harmony export */   ScriptsFeature: function() { return /* reexport safe */ _ScriptsFeature__WEBPACK_IMPORTED_MODULE_1__["default"]; }
/* harmony export */ });
/* harmony import */ var _ContextPropsFeature__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ContextPropsFeature */ "./src/main/collectors/perContext/ContextPropsFeature.js");
/* harmony import */ var _ScriptsFeature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ScriptsFeature */ "./src/main/collectors/perContext/ScriptsFeature.js");



/***/ }),

/***/ "./src/main/collectors/static/AgenticBrowserDetectFeature.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/static/AgenticBrowserDetectFeature.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgenticBrowserDetectFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_AgenticBrowserDetectContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/AgenticBrowserDetectContract */ "./src/main/contract/staticContracts/AgenticBrowserDetectContract.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




var featureSettings = {
  configKey: 'isAgenticBrowserDetectFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * AgenticBrowserDetectFeature
 *
 * Purpose:
 * - Collect static signals that may indicate the presence of an agentic browser.
 * - Currently focuses on detecting specific agentic-related fonts.
 * - Designed to be expanded in the future with additional static browser fingerprints.
 */
var AgenticBrowserDetectFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQ
   * @param {FontDetectorProvider} detectorProvider
   * @param {Object} configurationRepository - Repository for configuration values
   */
  function AgenticBrowserDetectFeature(dataQ, detectorProvider, configurationRepository) {
    var _this;
    _classCallCheck(this, AgenticBrowserDetectFeature);
    _this = _callSuper(this, AgenticBrowserDetectFeature);
    _this._dataQ = dataQ;
    _this._detectorProvider = detectorProvider;
    _this._configurationRepository = configurationRepository;
    return _this;
  }
  _inherits(AgenticBrowserDetectFeature, _DataCollector);
  return _createClass(AgenticBrowserDetectFeature, [{
    key: "startFeature",
    value: function startFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Starting Agentic Browser Detection Feature");
      this._detectFonts()["catch"](function (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to collect Agentic Browser information: ".concat(error));
      });
    }
  }, {
    key: "_detectFonts",
    value: function () {
      var _detectFonts2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var detectedFonts, agenticBrowserDetectContract, contractData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.getDetectedFonts();
            case 2:
              detectedFonts = _context.sent;
              if (detectedFonts.length) {
                _context.next = 6;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("No Agentic Browser fonts detected");
              return _context.abrupt("return");
            case 6:
              agenticBrowserDetectContract = new _contract_staticContracts_AgenticBrowserDetectContract__WEBPACK_IMPORTED_MODULE_2__["default"](detectedFonts.join(','));
              contractData = agenticBrowserDetectContract.buildQueueMessage();
              this._dataQ.addToQueue('static_fields', contractData, false);
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function _detectFonts() {
        return _detectFonts2.apply(this, arguments);
      }
      return _detectFonts;
    }()
  }, {
    key: "getDetectedFonts",
    value: function () {
      var _getDetectedFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var agenticBrowserFonts;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              agenticBrowserFonts = this.getFontFromConfig();
              agenticBrowserFonts = this.fontsToArray(agenticBrowserFonts);
              _context2.next = 4;
              return this.arrayToFonts(agenticBrowserFonts);
            case 4:
              return _context2.abrupt("return", _context2.sent);
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function getDetectedFonts() {
        return _getDetectedFonts.apply(this, arguments);
      }
      return getDetectedFonts;
    }()
    /**
     * Detects which of the provided fonts are available in the browser.
     * @param {string[]} agenticBrowserFonts - Example: ["Arial", "Courier New", "AgenticFont"]
     * @returns {Promise<string[]>} - The subset of input fonts that were actually detected.
     */
  }, {
    key: "arrayToFonts",
    value: (function () {
      var _arrayToFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(agenticBrowserFonts) {
        var detector, checks;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              detector = this._detectorProvider.getBestDetector();
              _context4.next = 3;
              return Promise.all(agenticBrowserFonts.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(font) {
                  return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                    while (1) switch (_context3.prev = _context3.next) {
                      case 0:
                        _context3.prev = 0;
                        _context3.t0 = font;
                        _context3.next = 4;
                        return detector.detect(font);
                      case 4:
                        _context3.t1 = _context3.sent;
                        return _context3.abrupt("return", [_context3.t0, _context3.t1]);
                      case 8:
                        _context3.prev = 8;
                        _context3.t2 = _context3["catch"](0);
                        return _context3.abrupt("return", [font, false]);
                      case 11:
                      case "end":
                        return _context3.stop();
                    }
                  }, _callee3, null, [[0, 8]]);
                }));
                return function (_x2) {
                  return _ref.apply(this, arguments);
                };
              }()));
            case 3:
              checks = _context4.sent;
              return _context4.abrupt("return", checks.filter(function (_ref2) {
                var _ref3 = _slicedToArray(_ref2, 2),
                  isDetected = _ref3[1];
                return isDetected;
              }).map(function (_ref4) {
                var _ref5 = _slicedToArray(_ref4, 1),
                  font = _ref5[0];
                return font;
              }));
            case 5:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function arrayToFonts(_x) {
        return _arrayToFonts.apply(this, arguments);
      }
      return arrayToFonts;
    }())
  }, {
    key: "fontsToArray",
    value: function fontsToArray(agenticBrowserFonts) {
      // Ensure we always iterate an array
      if (!Array.isArray(agenticBrowserFonts)) {
        agenticBrowserFonts = typeof agenticBrowserFonts === 'string' && agenticBrowserFonts ? [agenticBrowserFonts] : [];
      }
      return agenticBrowserFonts;
    }
  }, {
    key: "getFontFromConfig",
    value: function getFontFromConfig() {
      var agenticBrowserFonts = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.agenticBrowserFonts);
      if (typeof agenticBrowserFonts === 'string') {
        try {
          agenticBrowserFonts = JSON.parse(agenticBrowserFonts);
        } catch (_unused2) {
          // If parsing fails, treat as "no fonts configured"
          agenticBrowserFonts = [];
        }
      }
      return agenticBrowserFonts;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/AudioDetectFeature.js":
/*!**********************************************************!*\
  !*** ./src/main/collectors/static/AudioDetectFeature.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AudioDetectFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_AudioDetectContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/AudioDetectContract */ "./src/main/contract/staticContracts/AudioDetectContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isAudioDetectFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var audioConfig = {
  channelCount: 1,
  length: 5000,
  sampleRate: 44100,
  oscillatorType: 'triangle',
  oscillatorFrequency: 10000,
  compressor: {
    threshold: -50,
    knee: 40,
    ratio: 12,
    attack: 0,
    release: 0.25
  },
  renderRetryDelay: 500,
  maxRetries: 3,
  fingerprintDataOffset: 4500
};
var AudioDetectFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQ
   * @param {Utils} CDUtils
   */
  function AudioDetectFeature(dataQ, utils) {
    var _this;
    _classCallCheck(this, AudioDetectFeature);
    _this = _callSuper(this, AudioDetectFeature);
    _this._dataQ = dataQ;
    _this._utils = utils;
    return _this;
  }
  _inherits(AudioDetectFeature, _DataCollector);
  return _createClass(AudioDetectFeature, [{
    key: "startFeature",
    value: function startFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Starting Audio Detection Feature");
      try {
        this._collectAudioFingerprintInfo();
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to collect audio information: ".concat(error));
      }
    }
  }, {
    key: "_collectAudioFingerprintInfo",
    value: function _collectAudioFingerprintInfo() {
      var _this2 = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting audio properties');
      this._getAudioFingerprint().then(function (audioData) {
        return _this2._utils.digest_sha256(audioData);
      }).then(function (hash) {
        var audioContract = new _contract_staticContracts_AudioDetectContract__WEBPACK_IMPORTED_MODULE_2__["default"](hash);
        var contractData = audioContract.buildQueueMessage();
        _this2._dataQ.addToQueue('static_fields', contractData, false);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Audio properties collected successfully');
      })["catch"](function (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error collecting audio information: ".concat(error));
      });
    }

    /**
     * Generates a unique audio fingerprint by synthesizing audio data in an OfflineAudioContext.
     * This process does not produce any audible sound but captures unique device characteristics
     * through oscillator and compressor settings. The resulting fingerprint is a string representation
     * of channel data, offering a unique identifier based on the device's audio capabilities.
     *
     * @returns {Promise<string>} - Resolves with the audio fingerprint string.
     * @throws Error if the AudioContext initialization or rendering fails.
     */
  }, {
    key: "_getAudioFingerprint",
    value: (function () {
      var _getAudioFingerprint2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var AudioContext, context, oscillator, compressor;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              AudioContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;
              if (AudioContext) {
                _context.next = 4;
                break;
              }
              throw new Error("AudioContext is not supported");
            case 4:
              context = new AudioContext(audioConfig.channelCount, audioConfig.length, audioConfig.sampleRate);
              oscillator = context.createOscillator();
              compressor = context.createDynamicsCompressor();
              oscillator.type = audioConfig.oscillatorType;
              oscillator.frequency.value = audioConfig.oscillatorFrequency;
              compressor.threshold.value = audioConfig.compressor.threshold;
              compressor.knee.value = audioConfig.compressor.knee;
              compressor.ratio.value = audioConfig.compressor.ratio;
              compressor.attack.value = audioConfig.compressor.attack;
              compressor.release.value = audioConfig.compressor.release;
              oscillator.connect(compressor);
              compressor.connect(context.destination);
              oscillator.start(0);
              return _context.abrupt("return", this._renderAudio(context).then(function (buffer) {
                return buffer.getChannelData(0).subarray(audioConfig.fingerprintDataOffset).toString();
              }));
            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error initializing audio fingerprint: ".concat(_context.t0));
              throw _context.t0;
            case 24:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 20]]);
      }));
      function _getAudioFingerprint() {
        return _getAudioFingerprint2.apply(this, arguments);
      }
      return _getAudioFingerprint;
    }())
  }, {
    key: "_renderAudio",
    value: function _renderAudio(context) {
      var renderRetryDelay = audioConfig.renderRetryDelay,
        maxRetries = audioConfig.maxRetries;
      var retryCount = 0;
      return new Promise(function (resolve, reject) {
        var _attemptRender = function attemptRender() {
          try {
            var renderingPromise = context.startRendering();
            if (context.state === 'running') {
              resolve(renderingPromise);
            } else if (context.state === 'suspended' && !document.hidden) {
              if (++retryCount < maxRetries) {
                setTimeout(_attemptRender, renderRetryDelay);
              } else {
                reject(new Error('Audio context suspended'));
              }
            }
          } catch (error) {
            reject(error);
          }
        };
        _attemptRender();
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/AudioDetectFeature2.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/static/AudioDetectFeature2.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AudioDetectFeature2; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_AudioDetectContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/AudioDetectContract */ "./src/main/contract/staticContracts/AudioDetectContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




/**
 * AudioDetectFeature2 implements advanced audio fingerprinting with multiple techniques:
 * 
 * 1. Multi-Signal Analysis:
 *    - Uses multiple oscillator types and frequencies
 *    - Combines signals with advanced mixing
 *    - Performs frequency domain analysis
 * 
 * 2. Advanced Signal Processing:
 *    - Adaptive noise cancellation
 *    - Dynamic range compression
 *    - Phase analysis and harmonic detection
 * 
 * 3. Browser-Specific Optimizations:
 *    - Detects browser audio capabilities
 *    - Adapts processing based on browser type
 *    - Handles WebKit/Blink/Gecko specific quirks
 * 
 * 4. Enhanced Fingerprinting:
 *    - Multi-resolution analysis
 *    - Temporal stability improvements
 *    - Cross-browser consistency
 */

var DEFAULT_AUDIO_CONFIG = {
  sampleRate: 44100,
  cloneCount: 40000,
  stabilizationPrecision: 6.2,
  targetSampleIndex: 3395,
  // Advanced signal configuration
  signals: [{
    type: 'square',
    frequency: 1000,
    detune: 0,
    phase: 0,
    harmonics: [{
      frequency: 2000,
      amplitude: 0.3
    }, {
      frequency: 3000,
      amplitude: 0.2
    }]
  }, {
    type: 'sine',
    frequency: 2000,
    detune: 0,
    phase: 0,
    modulation: {
      frequency: 5,
      depth: 0.1
    }
  }, {
    type: 'triangle',
    frequency: 3000,
    detune: 0,
    phase: 0,
    formants: [{
      frequency: 500,
      bandwidth: 50
    }, {
      frequency: 1500,
      bandwidth: 100
    }]
  }, {
    type: 'sawtooth',
    frequency: 4000,
    detune: 0,
    phase: 0,
    resonance: {
      frequency: 6000,
      Q: 10
    }
  }],
  // Advanced processing chain
  compressor: {
    threshold: -70,
    knee: 40,
    ratio: 12,
    attack: 0,
    release: 0.25,
    makeupGain: 0,
    bypass: false
  },
  filters: [{
    type: 'allpass',
    frequency: 5.239622852977861,
    Q: 0.1,
    gain: 0
  }, {
    type: 'highpass',
    frequency: 20,
    Q: 1,
    gain: 0
  }, {
    type: 'lowpass',
    frequency: 20000,
    Q: 1,
    gain: 0
  }],
  // Analysis configuration
  analysis: {
    fftSize: 2048,
    smoothingTimeConstant: 0.8,
    minDecibels: -100,
    maxDecibels: -30,
    spectralPeaks: 10,
    phaseAnalysis: true,
    harmonicDetection: true
  },
  // Browser-specific settings
  browserOptimizations: {
    safari: {
      loopStartOffset: 0.00000000001,
      loopEndOffset: 0.00000000001,
      retryAttempts: 3
    },
    chrome: {
      useWorklet: false,
      bufferSize: 4096
    },
    firefox: {
      useSharedArrayBuffer: false,
      audioWorkletSupport: false
    }
  }
};
var DEFAULT_FEATURE_SETTINGS = {
  configKey: 'isAudioDetectFeature2',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var AudioDetectFeature2 = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQ
   * @param {Utils} utils
   * @param {Object} options
   * @param {Object} options.audioContext - AudioContext constructors
   * @param {Function} options.audioContext.regular - Regular AudioContext constructor
   * @param {Function} options.audioContext.offline - OfflineAudioContext constructor
   * @param {Object} options.performance - Performance API
   * @param {Object} options.audioConfig - Optional custom audio config
   * @param {Object} options.featureSettings - Optional custom feature settings
   */
  function AudioDetectFeature2(dataQ, utils) {
    var _this;
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    _classCallCheck(this, AudioDetectFeature2);
    _this = _callSuper(this, AudioDetectFeature2);
    if (!dataQ) throw new Error('DataQueue is required');
    if (!utils) throw new Error('Utils is required');
    _this._dataQ = dataQ;
    _this._utils = utils;

    // Inject AudioContext constructors
    var audioContext = options.audioContext || {};
    _this._AudioContext = audioContext.regular || window.AudioContext || window.webkitAudioContext;
    _this._OfflineAudioContext = audioContext.offline || window.OfflineAudioContext || window.webkitOfflineAudioContext;
    if (!_this._AudioContext || !_this._OfflineAudioContext) {
      throw new Error('AudioContext constructors are required');
    }

    // Inject performance API
    _this._performance = options.performance || window.performance;
    if (!_this._performance) {
      throw new Error('Performance API is required');
    }

    // Use provided configs or defaults
    _this._audioConfig = options.audioConfig || _objectSpread({}, DEFAULT_AUDIO_CONFIG);
    _this._featureSettings = options.featureSettings || _objectSpread({}, DEFAULT_FEATURE_SETTINGS);
    return _this;
  }
  _inherits(AudioDetectFeature2, _DataCollector);
  return _createClass(AudioDetectFeature2, [{
    key: "startFeature",
    value: function startFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Starting Advanced Audio Detection Feature 2");
      try {
        this._collectAudioFingerprintInfo();
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to collect audio information: ".concat(error));
      }
    }
  }, {
    key: "_collectAudioFingerprintInfo",
    value: function _collectAudioFingerprintInfo() {
      var _this2 = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting advanced audio properties (method 2)');
      this._getAdvancedAudioFingerprint().then(function (audioData) {
        return _this2._utils.digest_sha256(audioData.toString());
      }).then(function (hash) {
        _this2._dataQ.addToQueue('static_fields', ['audio_detect2', hash], false);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Advanced audio properties collected successfully (method 2) ' + hash);
      })["catch"](function (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error collecting audio information: ".concat(error));
      });
    }

    /**
     * Generates an advanced audio fingerprint using multiple techniques.
     * 
     * @returns {Promise<number>} - Resolves with the stabilized audio fingerprint value.
     * @throws Error if the AudioContext initialization or rendering fails.
     */
  }, {
    key: "_getAdvancedAudioFingerprint",
    value: (function () {
      var _getAdvancedAudioFingerprint2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this3 = this;
        var contextInfo, signals, processedResults, _iterator, _step, signal, processed, combinedSignal, fingerprint, stabilizedFingerprint;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this._getAudioContextInfo();
            case 3:
              contextInfo = _context.sent;
              _context.next = 6;
              return Promise.all([this._getBaseSignal(this._OfflineAudioContext)].concat(_toConsumableArray(this._audioConfig.signals.map(function (config) {
                return _this3._getAdvancedSignal(config);
              }))));
            case 6:
              signals = _context.sent;
              // Process each signal and collect advanced metrics
              processedResults = [];
              _iterator = _createForOfIteratorHelper(signals);
              _context.prev = 9;
              _iterator.s();
            case 11:
              if ((_step = _iterator.n()).done) {
                _context.next = 20;
                break;
              }
              signal = _step.value;
              if (!signal) {
                _context.next = 18;
                break;
              }
              _context.next = 16;
              return this._applyAdvancedProcessing(signal);
            case 16:
              processed = _context.sent;
              if (processed && processed.buffer && processed.metrics) {
                processedResults.push({
                  buffer: processed.buffer,
                  metrics: processed.metrics
                });
              }
            case 18:
              _context.next = 11;
              break;
            case 20:
              _context.next = 25;
              break;
            case 22:
              _context.prev = 22;
              _context.t0 = _context["catch"](9);
              _iterator.e(_context.t0);
            case 25:
              _context.prev = 25;
              _iterator.f();
              return _context.finish(25);
            case 28:
              if (!(processedResults.length === 0)) {
                _context.next = 30;
                break;
              }
              throw new Error("No valid processed signals");
            case 30:
              _context.next = 32;
              return this._combineSignalsAdvanced(processedResults.map(function (p) {
                return p.buffer;
              }));
            case 32:
              combinedSignal = _context.sent;
              // Generate composite fingerprint from multiple sources
              fingerprint = this._generateCompositeFingerprint(combinedSignal, processedResults.map(function (p) {
                return p.metrics;
              }), contextInfo); // Apply advanced stabilization
              stabilizedFingerprint = this._stabilizeAdvanced(fingerprint, contextInfo);
              return _context.abrupt("return", this._stabilize(stabilizedFingerprint, this._audioConfig.stabilizationPrecision));
            case 38:
              _context.prev = 38;
              _context.t1 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error in advanced audio fingerprinting: ".concat(_context.t1));
              throw _context.t1;
            case 42:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 38], [9, 22, 25, 28]]);
      }));
      function _getAdvancedAudioFingerprint() {
        return _getAdvancedAudioFingerprint2.apply(this, arguments);
      }
      return _getAdvancedAudioFingerprint;
    }()
    /**
     * Gets comprehensive audio context information
     */
    )
  }, {
    key: "_getAudioContextInfo",
    value: (function () {
      var _getAudioContextInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var regularContext, info, _i, _arr, rate, testContext, channels, _testContext, merger;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              regularContext = new this._AudioContext();
              info = {
                sampleRate: regularContext.sampleRate,
                baseLatency: regularContext.baseLatency || 0,
                maxChannelCount: regularContext.destination.maxChannelCount,
                state: regularContext.state,
                supportedSampleRates: [],
                supportedChannelCounts: [],
                browser: this._browserInfo
              }; // Test different sample rates
              for (_i = 0, _arr = [8000, 11025, 16000, 22050, 24000, 32000, 44100, 48000, 88200, 96000]; _i < _arr.length; _i++) {
                rate = _arr[_i];
                try {
                  testContext = new this._AudioContext({
                    sampleRate: rate
                  });
                  info.supportedSampleRates.push(rate);
                  if (typeof testContext.close === 'function') {
                    testContext.close();
                  }
                } catch (e) {}
              }

              // Test different channel counts
              for (channels = 1; channels <= 32; channels *= 2) {
                try {
                  _testContext = new this._AudioContext();
                  merger = _testContext.createChannelMerger(channels);
                  info.supportedChannelCounts.push(channels);
                  if (typeof _testContext.close === 'function') {
                    _testContext.close();
                  }
                } catch (e) {}
              }
              if (typeof regularContext.close === 'function') {
                regularContext.close();
              }
              return _context2.abrupt("return", info);
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _getAudioContextInfo() {
        return _getAudioContextInfo2.apply(this, arguments);
      }
      return _getAudioContextInfo;
    }()
    /**
     * Generates the original FingerprintJS base signal
     */
    )
  }, {
    key: "_getBaseSignal",
    value: (function () {
      var _getBaseSignal2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(AudioContext) {
        var context, oscillator, compressor, filter;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              context = new AudioContext(1, this._audioConfig.targetSampleIndex + 1, this._audioConfig.sampleRate);
              oscillator = context.createOscillator();
              oscillator.type = "square";
              oscillator.frequency.value = 1000;
              compressor = context.createDynamicsCompressor();
              compressor.threshold.value = -70;
              compressor.knee.value = 40;
              compressor.ratio.value = 12;
              compressor.attack.value = 0;
              compressor.release.value = 0.25;
              filter = context.createBiquadFilter();
              filter.type = "allpass";
              filter.frequency.value = 5.239622852977861;
              filter.Q.value = 0.1;
              oscillator.connect(compressor);
              compressor.connect(filter);
              filter.connect(context.destination);
              oscillator.start(0);
              _context3.next = 20;
              return this._renderAudio(context);
            case 20:
              return _context3.abrupt("return", _context3.sent);
            case 21:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _getBaseSignal(_x) {
        return _getBaseSignal2.apply(this, arguments);
      }
      return _getBaseSignal;
    }()
    /**
     * Generates an advanced signal with complex characteristics
     */
    )
  }, {
    key: "_getAdvancedSignal",
    value: (function () {
      var _getAdvancedSignal2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(signalConfig) {
        var context, oscillator, compressor, filters, currentNode, harmonicMixer, modulator, modulationGain, resonanceFilter;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              context = new this._OfflineAudioContext(1, this._audioConfig.targetSampleIndex + 1, this._audioConfig.sampleRate);
              oscillator = context.createOscillator();
              oscillator.type = signalConfig.type;
              oscillator.frequency.value = signalConfig.frequency;
              if (signalConfig.detune !== 0) {
                oscillator.detune.value = signalConfig.detune;
              }

              // Create advanced processing chain
              compressor = this._createAdvancedCompressor(context);
              filters = this._createFilterChain(context); // Connect oscillator through processing chain
              currentNode = oscillator;
              currentNode.connect(compressor);
              currentNode = compressor;

              // Connect through filters
              filters.forEach(function (filter) {
                currentNode.connect(filter);
                currentNode = filter;
              });

              // Add harmonics if specified
              if (signalConfig.harmonics) {
                harmonicMixer = context.createGain();
                currentNode.connect(harmonicMixer);
                signalConfig.harmonics.forEach(function (harmonic) {
                  var harmonicOsc = context.createOscillator();
                  harmonicOsc.type = 'sine';
                  harmonicOsc.frequency.value = harmonic.frequency;
                  harmonicOsc.connect(harmonicMixer, 0, 0);
                  harmonicMixer.gain.value = harmonic.amplitude;
                  harmonicOsc.start(0);
                });
                currentNode = harmonicMixer;
              }

              // Add modulation if specified
              if (signalConfig.modulation) {
                modulator = context.createOscillator();
                modulator.type = 'sine';
                modulator.frequency.value = signalConfig.modulation.frequency;
                modulationGain = context.createGain();
                modulationGain.gain.value = signalConfig.modulation.depth;
                modulator.connect(modulationGain);
                modulationGain.connect(oscillator.frequency);
                modulator.start(0);
              }

              // Add formants if specified
              if (signalConfig.formants) {
                signalConfig.formants.forEach(function (formant) {
                  var formantFilter = context.createBiquadFilter();
                  formantFilter.type = 'bandpass';
                  formantFilter.frequency.value = formant.frequency;
                  formantFilter.Q.value = formant.frequency / formant.bandwidth;
                  currentNode.connect(formantFilter);
                  currentNode = formantFilter;
                });
              }

              // Add resonance if specified
              if (signalConfig.resonance) {
                resonanceFilter = context.createBiquadFilter();
                resonanceFilter.type = 'peaking';
                resonanceFilter.frequency.value = signalConfig.resonance.frequency;
                resonanceFilter.Q.value = signalConfig.resonance.Q;
                resonanceFilter.gain.value = 6;
                currentNode.connect(resonanceFilter);
                currentNode = resonanceFilter;
              }
              currentNode.connect(context.destination);
              oscillator.start(0);
              _context4.next = 19;
              return this._renderAudio(context);
            case 19:
              return _context4.abrupt("return", _context4.sent);
            case 20:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _getAdvancedSignal(_x2) {
        return _getAdvancedSignal2.apply(this, arguments);
      }
      return _getAdvancedSignal;
    }()
    /**
     * Creates an advanced compressor with browser-specific optimizations
     */
    )
  }, {
    key: "_createAdvancedCompressor",
    value: function _createAdvancedCompressor(context) {
      var compressor = context.createDynamicsCompressor();
      var config = this._audioConfig.compressor;
      compressor.threshold.value = config.threshold;
      compressor.knee.value = config.knee;
      compressor.ratio.value = config.ratio;
      compressor.attack.value = config.attack;
      compressor.release.value = config.release;
      if (compressor.makeupGain) {
        compressor.makeupGain.value = config.makeupGain;
      }
      return compressor;
    }

    /**
     * Creates a chain of filters for advanced processing
     */
  }, {
    key: "_createFilterChain",
    value: function _createFilterChain(context) {
      return this._audioConfig.filters.map(function (filterConfig) {
        var filter = context.createBiquadFilter();
        filter.type = filterConfig.type;
        filter.frequency.value = filterConfig.frequency;
        filter.Q.value = filterConfig.Q;
        filter.gain.value = filterConfig.gain;
        return filter;
      });
    }

    /**
     * Applies advanced processing to a signal and extracts metrics
     */
  }, {
    key: "_applyAdvancedProcessing",
    value: (function () {
      var _applyAdvancedProcessing2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(signal) {
        var context, analyser, source, spectralData, timeData, metrics;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              context = new this._AudioContext();
              if (signal instanceof AudioBuffer) {
                _context5.next = 3;
                break;
              }
              throw new Error('Invalid audio signal: expected AudioBuffer');
            case 3:
              // Create analyser for spectral analysis
              analyser = context.createAnalyser();
              analyser.fftSize = this._audioConfig.analysis.fftSize;
              analyser.smoothingTimeConstant = this._audioConfig.analysis.smoothingTimeConstant;
              analyser.minDecibels = this._audioConfig.analysis.minDecibels;
              analyser.maxDecibels = this._audioConfig.analysis.maxDecibels;

              // Create buffer source
              source = context.createBufferSource();
              source.buffer = signal;

              // Connect for analysis
              source.connect(analyser);
              analyser.connect(context.destination);
              source.start(0);

              // Collect analysis data
              spectralData = new Float32Array(analyser.frequencyBinCount);
              timeData = new Float32Array(analyser.frequencyBinCount);
              analyser.getFloatFrequencyData(spectralData);
              analyser.getFloatTimeDomainData(timeData);

              // Calculate advanced metrics
              metrics = {
                spectral: this._analyzeSpectralData(spectralData),
                phase: this._analyzePhaseData(timeData),
                dynamic: this._analyzeDynamicRange(spectralData),
                harmonic: this._analyzeHarmonicContent(spectralData, timeData),
                temporal: this._analyzeTemporalCharacteristics(timeData)
              };
              return _context5.abrupt("return", {
                buffer: signal,
                metrics: metrics
              });
            case 19:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function _applyAdvancedProcessing(_x3) {
        return _applyAdvancedProcessing2.apply(this, arguments);
      }
      return _applyAdvancedProcessing;
    }()
    /**
     * Analyzes spectral data for fingerprinting
     */
    )
  }, {
    key: "_analyzeSpectralData",
    value: function _analyzeSpectralData(spectralData) {
      var metrics = {
        peaks: [],
        centroid: 0,
        spread: 0,
        skewness: 0,
        kurtosis: 0
      };
      if (!spectralData || spectralData.length === 0) {
        return metrics;
      }

      // Find spectral peaks
      for (var i = 1; i < spectralData.length - 1; i++) {
        if (spectralData[i] > spectralData[i - 1] && spectralData[i] > spectralData[i + 1]) {
          metrics.peaks.push({
            index: i,
            magnitude: spectralData[i]
          });
        }
      }

      // Sort peaks by magnitude and limit count
      metrics.peaks.sort(function (a, b) {
        return b.magnitude - a.magnitude;
      });
      metrics.peaks = metrics.peaks.slice(0, this._audioConfig.analysis.spectralPeaks);

      // Calculate spectral centroid
      var numerator = 0;
      var denominator = 0;
      for (var _i2 = 0; _i2 < spectralData.length; _i2++) {
        var magnitude = Math.pow(10, spectralData[_i2] / 20);
        numerator += _i2 * magnitude;
        denominator += magnitude;
      }
      if (denominator > 0) {
        metrics.centroid = numerator / denominator;
      }

      // Calculate spectral spread
      if (denominator > 0) {
        var spreadSum = 0;
        for (var _i3 = 0; _i3 < spectralData.length; _i3++) {
          var _magnitude = Math.pow(10, spectralData[_i3] / 20);
          spreadSum += Math.pow(_i3 - metrics.centroid, 2) * _magnitude;
        }
        metrics.spread = Math.sqrt(spreadSum / denominator);
      }
      return metrics;
    }

    /**
     * Analyzes phase data for fingerprinting
     */
  }, {
    key: "_analyzePhaseData",
    value: function _analyzePhaseData(timeData) {
      var metrics = {
        zeroCrossings: 0,
        phaseVariance: 0,
        phaseCoherence: 0
      };
      if (!timeData || timeData.length === 0) {
        return metrics;
      }

      // Count zero crossings
      var prevSample = timeData[0];
      for (var i = 1; i < timeData.length; i++) {
        if (prevSample < 0 && timeData[i] >= 0 || prevSample >= 0 && timeData[i] < 0) {
          metrics.zeroCrossings++;
        }
        prevSample = timeData[i];
      }

      // Calculate phase variance
      var mean = timeData.reduce(function (a, b) {
        return a + b;
      }, 0) / timeData.length;
      metrics.phaseVariance = timeData.reduce(function (a, b) {
        return a + Math.pow(b - mean, 2);
      }, 0) / timeData.length;

      // Calculate phase coherence
      if (timeData.length > 1) {
        var coherenceSum = 0;
        for (var _i4 = 1; _i4 < timeData.length; _i4++) {
          var phaseDiff = Math.abs(timeData[_i4] - timeData[_i4 - 1]);
          coherenceSum += Math.cos(phaseDiff);
        }
        metrics.phaseCoherence = coherenceSum / (timeData.length - 1);
      }
      return metrics;
    }

    /**
     * Analyzes dynamic range characteristics
     */
  }, {
    key: "_analyzeDynamicRange",
    value: function _analyzeDynamicRange(spectralData) {
      var metrics = {
        crestFactor: 0,
        dynamicRange: 0,
        compressionRatio: 0
      };
      if (!spectralData || spectralData.length === 0) {
        return metrics;
      }
      var linearData = spectralData.map(function (x) {
        return Math.pow(10, x / 20);
      }).filter(function (x) {
        return x > 0;
      });
      if (linearData.length === 0) {
        return metrics;
      }
      var rms = Math.sqrt(linearData.reduce(function (a, b) {
        return a + b * b;
      }, 0) / linearData.length);
      var peak = Math.max.apply(Math, _toConsumableArray(linearData));
      if (rms > 0) {
        metrics.crestFactor = peak / rms;
        var min = Math.min.apply(Math, _toConsumableArray(linearData));
        metrics.dynamicRange = 20 * Math.log10(peak / min);
      }
      return metrics;
    }

    /**
     * Analyzes harmonic content
     */
  }, {
    key: "_analyzeHarmonicContent",
    value: function _analyzeHarmonicContent(spectralData, timeData) {
      var metrics = {
        totalHarmonicDistortion: 0,
        harmonicSpectrum: 0
      };
      if (!spectralData || spectralData.length === 0) {
        return metrics;
      }
      var linearData = spectralData.map(function (x) {
        return Math.pow(10, x / 20);
      });
      var fundamental = Math.max.apply(Math, _toConsumableArray(linearData));
      var harmonics = linearData.filter(function (value, index) {
        return index > 0 && value > fundamental * 0.1;
      });
      var harmonicSum = harmonics.reduce(function (sum, value) {
        return sum + value * value;
      }, 0);
      metrics.totalHarmonicDistortion = fundamental > 0 ? Math.sqrt(harmonicSum) / fundamental : 0;
      return metrics;
    }

    /**
     * Analyzes temporal characteristics
     */
  }, {
    key: "_analyzeTemporalCharacteristics",
    value: function _analyzeTemporalCharacteristics(timeData) {
      var metrics = {
        attackTime: 0,
        decayTime: 0,
        sustainLevel: 0
      };
      if (!timeData || timeData.length === 0) {
        return metrics;
      }
      var envelope = this._calculateEnvelope(timeData);
      if (envelope.length > 0) {
        var peak = Math.max.apply(Math, _toConsumableArray(envelope));
        var attackThreshold = peak * 0.9;
        var attackIndex = 0;
        for (var i = 0; i < envelope.length; i++) {
          if (envelope[i] >= attackThreshold) {
            attackIndex = i;
            break;
          }
        }
        metrics.attackTime = attackIndex / this._audioConfig.sampleRate;
      }
      return metrics;
    }

    /**
     * Calculates signal envelope
     */
  }, {
    key: "_calculateEnvelope",
    value: function _calculateEnvelope(timeData) {
      var envelope = [];
      var windowSize = Math.max(1, Math.floor(timeData.length * 0.001));
      for (var i = 0; i < timeData.length; i += windowSize) {
        var _window = timeData.slice(i, Math.min(i + windowSize, timeData.length));
        var rms = Math.sqrt(_window.reduce(function (sum, sample) {
          return sum + sample * sample;
        }, 0) / _window.length);
        envelope.push(rms);
      }
      return envelope;
    }

    /**
     * Combines multiple signals with advanced mixing
     */
  }, {
    key: "_combineSignalsAdvanced",
    value: (function () {
      var _combineSignalsAdvanced2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(signals) {
        var context, combinedBuffer, combinedData, weights, totalWeight, i, weightedSum, j, signal, channelData;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              if (!(!Array.isArray(signals) || signals.length === 0)) {
                _context6.next = 2;
                break;
              }
              throw new Error('Invalid signals array');
            case 2:
              context = new this._OfflineAudioContext(1, this._audioConfig.targetSampleIndex + 1, this._audioConfig.sampleRate);
              combinedBuffer = context.createBuffer(1, context.length, context.sampleRate);
              combinedData = combinedBuffer.getChannelData(0); // Use weighted mixing based on signal characteristics
              weights = signals.map(function (_, index) {
                return 1.0 - index * 0.1;
              });
              totalWeight = weights.reduce(function (sum, weight) {
                return sum + weight;
              }, 0);
              for (i = 0; i < combinedData.length; i++) {
                weightedSum = 0;
                for (j = 0; j < signals.length; j++) {
                  signal = signals[j];
                  channelData = signal.getChannelData(0);
                  if (i < channelData.length) {
                    weightedSum += channelData[i] * weights[j];
                  }
                }
                combinedData[i] = weightedSum / totalWeight;
              }
              return _context6.abrupt("return", combinedBuffer);
            case 9:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function _combineSignalsAdvanced(_x4) {
        return _combineSignalsAdvanced2.apply(this, arguments);
      }
      return _combineSignalsAdvanced;
    }()
    /**
     * Generates composite fingerprint from multiple sources
     */
    )
  }, {
    key: "_generateCompositeFingerprint",
    value: function _generateCompositeFingerprint(signal, metricsArray, contextInfo) {
      var _this4 = this;
      // Hash the combined signal
      var signalHash = this._hashSignal(signal.getChannelData(0));

      // Hash metrics from all processed signals
      var metricsHash = metricsArray.reduce(function (hash, metrics, index) {
        var frequencyWeight = 1.0 + index * 0.1;
        var spectralHash = _this4._hashSpectralMetrics(metrics.spectral || {});
        var phaseHash = _this4._hashPhaseMetrics(metrics.phase || {});
        var dynamicHash = _this4._hashDynamicMetrics(metrics.dynamic || {});
        var harmonicHash = _this4._hashHarmonicMetrics(metrics.harmonic || {});
        var temporalHash = _this4._hashTemporalMetrics(metrics.temporal || {});
        var combinedMetricsHash = _this4._combineHashes([spectralHash, phaseHash, dynamicHash, harmonicHash, temporalHash]);
        var weightedHash = Math.floor(combinedMetricsHash * frequencyWeight);
        return _this4._combineHashes([hash, weightedHash]);
      }, 0);

      // Combine with context info
      var contextHash = this._hashContextInfo(contextInfo);
      return this._combineHashes([signalHash, metricsHash, contextHash]);
    }

    /**
     * Hashes signal data
     */
  }, {
    key: "_hashSignal",
    value: function _hashSignal(signalData) {
      if (!signalData || !signalData.length) {
        return 0;
      }
      var hash = 0;
      var intervals = [1, 10, 50, 100];
      intervals.forEach(function (interval) {
        for (var i = 0; i < signalData.length; i += interval) {
          var sample = signalData[i] || 0;
          var positionWeight = 1.0 + i / signalData.length * 0.5;
          var weightedSample = sample * positionWeight;
          hash = (hash << 5) - hash + weightedSample;
          hash = hash & hash;
        }
      });
      return hash;
    }

    /**
     * Hashes spectral metrics
     */
  }, {
    key: "_hashSpectralMetrics",
    value: function _hashSpectralMetrics(spectralData) {
      var hash = 0;
      if (Array.isArray(spectralData.peaks)) {
        spectralData.peaks.forEach(function (peak) {
          if (peak && _typeof(peak) === 'object') {
            hash = (hash << 5) - hash + (peak.index || 0);
            hash = (hash << 5) - hash + (peak.magnitude || 0);
          }
        });
      }
      hash = (hash << 5) - hash + (spectralData.centroid || 0);
      hash = (hash << 5) - hash + (spectralData.spread || 0);
      hash = (hash << 5) - hash + (spectralData.skewness || 0);
      hash = (hash << 5) - hash + (spectralData.kurtosis || 0);
      return hash & hash;
    }

    /**
     * Hashes phase metrics
     */
  }, {
    key: "_hashPhaseMetrics",
    value: function _hashPhaseMetrics(phaseData) {
      var hash = 0;
      hash = (hash << 5) - hash + (phaseData.zeroCrossings || 0);
      hash = (hash << 5) - hash + (phaseData.phaseVariance || 0);
      hash = (hash << 5) - hash + (phaseData.phaseCoherence || 0);
      return hash & hash;
    }

    /**
     * Hashes dynamic metrics
     */
  }, {
    key: "_hashDynamicMetrics",
    value: function _hashDynamicMetrics(metrics) {
      var hash = 0;
      hash = (hash << 5) - hash + (metrics.crestFactor || 0);
      hash = (hash << 5) - hash + (metrics.dynamicRange || 0);
      hash = (hash << 5) - hash + (metrics.compressionRatio || 0);
      return hash & hash;
    }

    /**
     * Hashes harmonic metrics
     */
  }, {
    key: "_hashHarmonicMetrics",
    value: function _hashHarmonicMetrics(metrics) {
      var hash = 0;
      hash = (hash << 5) - hash + (metrics.totalHarmonicDistortion || 0);
      hash = (hash << 5) - hash + (metrics.harmonicSpectrum || 0);
      return hash & hash;
    }

    /**
     * Hashes temporal metrics
     */
  }, {
    key: "_hashTemporalMetrics",
    value: function _hashTemporalMetrics(metrics) {
      var hash = 0;
      hash = (hash << 5) - hash + (metrics.attackTime || 0);
      hash = (hash << 5) - hash + (metrics.decayTime || 0);
      hash = (hash << 5) - hash + (metrics.sustainLevel || 0);
      return hash & hash;
    }

    /**
     * Hashes context information
     */
  }, {
    key: "_hashContextInfo",
    value: function _hashContextInfo(contextInfo) {
      var hash = 0;
      hash = (hash << 5) - hash + contextInfo.sampleRate;
      hash = (hash << 5) - hash + contextInfo.baseLatency;
      hash = (hash << 5) - hash + contextInfo.maxChannelCount;
      hash = (hash << 5) - hash + this._hashString(contextInfo.state);
      hash = (hash << 5) - hash + this._hashString(contextInfo.browser);
      contextInfo.supportedSampleRates.forEach(function (rate) {
        hash = (hash << 5) - hash + rate;
      });
      contextInfo.supportedChannelCounts.forEach(function (channels) {
        hash = (hash << 5) - hash + channels;
      });
      return hash & hash;
    }

    /**
     * Hashes a string
     */
  }, {
    key: "_hashString",
    value: function _hashString(str) {
      var hash = 0;
      if (typeof str !== 'string') {
        str = String(str);
      }
      for (var i = 0; i < str.length; i++) {
        var _char = str.charCodeAt(i);
        hash = (hash << 5) - hash + _char;
        hash = hash & hash;
      }
      return hash;
    }

    /**
     * Combines multiple hashes
     */
  }, {
    key: "_combineHashes",
    value: function _combineHashes(hashes) {
      return hashes.reduce(function (acc, hash) {
        acc = (acc << 5) - acc + hash;
        return acc & acc;
      }, 0);
    }

    /**
     * Applies advanced stabilization
     */
  }, {
    key: "_stabilizeAdvanced",
    value: function _stabilizeAdvanced(fingerprint, contextInfo) {
      var contextHash = this._hashContextInfo(contextInfo);
      var browserQuirksHash = this._hashBrowserQuirks(contextInfo);
      var hash = fingerprint;
      hash = (hash << 5) - hash + contextHash;
      hash = (hash << 5) - hash + browserQuirksHash;
      hash = hash & hash;
      return hash;
    }

    /**
     * Hashes browser-specific quirks
     */
  }, {
    key: "_hashBrowserQuirks",
    value: function _hashBrowserQuirks(contextInfo) {
      var hash = 0;
      hash = (hash << 5) - hash + this._hashString(contextInfo.browser);
      hash = (hash << 5) - hash + contextInfo.baseLatency;
      hash = (hash << 5) - hash + contextInfo.maxChannelCount;
      return hash & hash;
    }

    /**
     * Truncates some digits of the number to make it stable.
     * `precision` is the number of significant digits to keep. The number may be not integer:
     *  - If it ends with `.2`, the last digit is rounded to the nearest multiple of 5;
     *  - If it ends with `.5`, the last digit is rounded to the nearest even number;
     */
  }, {
    key: "_stabilize",
    value: function _stabilize(value, precision) {
      if (value === 0) {
        return value;
      }
      var power = Math.floor(Math.log10(Math.abs(value)));
      var precisionPower = power - Math.floor(precision) + 1;
      var precisionBase = Math.pow(10, -precisionPower) * (precision * 10 % 10 || 1);
      return Math.round(value * precisionBase) / precisionBase;
    }

    /**
     * Renders audio from an OfflineAudioContext with browser-specific optimizations.
     */
  }, {
    key: "_renderAudio",
    value: function _renderAudio(audioContext) {
      var _this5 = this;
      return new Promise(function (resolve, reject) {
        var _this5$_audioConfig$b;
        var retryCount = 0;
        var maxRetries = ((_this5$_audioConfig$b = _this5._audioConfig.browserOptimizations[_this5._browserInfo]) === null || _this5$_audioConfig$b === void 0 ? void 0 : _this5$_audioConfig$b.retryAttempts) || 3;
        var _attemptRender = function attemptRender() {
          try {
            var onComplete = function onComplete() {
              resolve(audioBuffer);
            };
            audioContext.oncomplete = function (e) {
              resolve(e.renderedBuffer);
            };
            audioContext.onstatechange = function () {
              if (audioContext.state === "suspended") {
                audioContext.resume();
              }
            };
            var audioBuffer = audioContext.startRendering();
            if (audioBuffer && audioBuffer instanceof Promise) {
              return audioBuffer.then(onComplete)["catch"](reject);
            }
          } catch (error) {
            if (++retryCount < maxRetries) {
              setTimeout(_attemptRender, 100);
            } else {
              reject(error);
            }
          }
        };
        _attemptRender();
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return _objectSpread({}, DEFAULT_FEATURE_SETTINGS);
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/BrowserDetect.js":
/*!*****************************************************!*\
  !*** ./src/main/collectors/static/BrowserDetect.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserDetect; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _contract_staticContracts_BrowserDetectContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contract/staticContracts/BrowserDetectContract */ "./src/main/contract/staticContracts/BrowserDetectContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isBrowserDetect',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var BrowserDetect = /*#__PURE__*/function (_DataCollector) {
  function BrowserDetect(dataQ) {
    var _this;
    _classCallCheck(this, BrowserDetect);
    _this = _callSuper(this, BrowserDetect);
    _this._dataQ = dataQ;
    return _this;
  }

  /**
   * detect browsers by feature detection since user agent can lie
   */
  _inherits(BrowserDetect, _DataCollector);
  return _createClass(BrowserDetect, [{
    key: "startFeature",
    value: function startFeature() {
      var isChrome = false;
      var isOpera = false;
      var isFirefox = false;
      var isSafari = false;
      var isIE = false;
      var isEdge = false;
      var isBlink = false;
      if (this.doesUserAagentDataExists()) {
        // Modern detection using userAgentData
        navigator.userAgentData.brands.forEach(function (brand) {
          if (brand.brand === 'Google Chrome') isChrome = true;
          if (brand.brand === 'Opera') isOpera = true;
          if (brand.brand === 'Microsoft Edge') isEdge = true;
          if (brand.brand === 'Firefox') isFirefox = true;
        });

        // Detect Safari via platform or specific WebKit engine check
        if (navigator.userAgentData.platform) {
          isSafari = navigator.userAgentData.platform === 'macOS' && !isChrome && !isEdge && !isOpera && /Safari/.test(navigator.userAgent);
        }
        // Blink is the engine behind Chrome and Opera
        isBlink = isChrome || isOpera;
      } else {
        // Fallback for older browsers
        var userAgent = navigator.userAgent;
        isOpera = /OPR|Opera/.test(userAgent);
        isFirefox = /Firefox/.test(userAgent);
        isSafari = /Safari/.test(userAgent) && /Apple Computer/.test(navigator.vendor);
        isIE = /MSIE|Trident/.test(userAgent); // MSIE for older versions, Trident for IE 11+
        isEdge = /Edg/.test(userAgent); // Edge (Chromium-based)
        // In case we use Opera or Edge, the system detect 'Chrome' as well, 
        // that's why we are adding the verification to make sure it's also not Edge and Opera
        isChrome = /Chrome/.test(userAgent) && !isEdge && !isOpera && /Google Inc/.test(navigator.vendor);
        isBlink = (isChrome || isOpera) && !!window.CSS; // Blink engine detection
      }
      var browserDetectContract = new _contract_staticContracts_BrowserDetectContract__WEBPACK_IMPORTED_MODULE_1__["default"](isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink);
      var data = browserDetectContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', data, false);
    }
  }, {
    key: "doesUserAagentDataExists",
    value: function doesUserAagentDataExists() {
      return navigator.userAgentData && navigator.userAgentData.brands && navigator.userAgentData.brands.length > 0;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/BrowserPropsFeature.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/static/BrowserPropsFeature.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserPropsFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_VersionClientBrowserPropsContract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_DeviceSourceBrowserPropsContract__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_OSBrowserPropsContract__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_OSVersionBrowserPropsContract__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_OSFamilyBrowserPropsContract__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_InputMechBrowserPropsContract__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_CoresBrowserPropsContract__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/CoresBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_PluginsBrowserPropsContract__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_JsUaBrowserPropsContract__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_TimeZoneBrowserPropsContract__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_CookieEnabledBrowserPropsContract__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_DeviceMemoryBrowserPropsContract__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_LangBrowserPropsContract__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/LangBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_LanguagesListBrowserPropsContract__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_BuildIDBrowserPropsContract__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_MaxTouchPointsBrowserPropsContract__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js");
/* harmony import */ var _contract_staticContracts_MathDetectContract__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../contract/staticContracts/MathDetectContract */ "./src/main/contract/staticContracts/MathDetectContract.js");
/* harmony import */ var _contract_staticContracts_browserPropsContract_BrowserDisplayBrowserPropsContract__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract */ "./src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }





















var featureSettings = {
  configKey: 'collectBrowserProps',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};

/* eslint-disable prefer-destructuring */
var BrowserPropsFeature = /*#__PURE__*/function (_DataCollector) {
  function BrowserPropsFeature(dataQ, pointerHoverDetector, utils, configurationRepository, configurations) {
    var _this;
    _classCallCheck(this, BrowserPropsFeature);
    _this = _callSuper(this, BrowserPropsFeature);
    _this._dataQ = dataQ;
    _this._pointerHoverDetector = pointerHoverDetector;
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._configurations = configurations;
    return _this;
  }
  _inherits(BrowserPropsFeature, _DataCollector);
  return _createClass(BrowserPropsFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting Browser Props');

      // basic required fields
      var versionClientBrowserPropsContract = new _contract_staticContracts_browserPropsContract_VersionClientBrowserPropsContract__WEBPACK_IMPORTED_MODULE_3__["default"](this._utils.scriptVersion);
      var versionClientData = versionClientBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', versionClientData, false);
      var deviceSourceBrowserPropsContract = new _contract_staticContracts_browserPropsContract_DeviceSourceBrowserPropsContract__WEBPACK_IMPORTED_MODULE_4__["default"]('js');
      var deviceSourceData = deviceSourceBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', deviceSourceData, false);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("SDK Version is ".concat(this._utils.scriptVersion));
      var language = BrowserPropsFeature.getLanguage();
      if (language) {
        // If configuration specifies to hash the language field...
        if (this._configurationRepository.get('browserPropsShouldHashLanguageField')) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Hashing language field according to configuration');
          language = this._utils.getHash(language).toString();
        }
        var mainLangBrowserPropsContract = new _contract_staticContracts_browserPropsContract_LangBrowserPropsContract__WEBPACK_IMPORTED_MODULE_15__["default"](language);
        var mainLangData = mainLangBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', mainLangData, false);
      }
      var osBrowserPropsContract = new _contract_staticContracts_browserPropsContract_OSBrowserPropsContract__WEBPACK_IMPORTED_MODULE_5__["default"](BrowserPropsFeature.getAvailablePlatform(window.navigator));
      var osData = osBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osData, false);
      var os = BrowserPropsFeature.getOperatingSystem();
      var osVersionBrowserPropsContract = new _contract_staticContracts_browserPropsContract_OSVersionBrowserPropsContract__WEBPACK_IMPORTED_MODULE_6__["default"](os.version);
      var osVersionData = osVersionBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osVersionData, false);
      var osFamilyBrowserPropsContract = new _contract_staticContracts_browserPropsContract_OSFamilyBrowserPropsContract__WEBPACK_IMPORTED_MODULE_7__["default"](os.name); //here
      var osFamilyData = osFamilyBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osFamilyData, false);
      var pointerHover = this._pointerHoverDetector.getPointerHover();
      var inputMechBrowserPropsContract = new _contract_staticContracts_browserPropsContract_InputMechBrowserPropsContract__WEBPACK_IMPORTED_MODULE_8__["default"](pointerHover.pointer, pointerHover.hover);
      var inputMechData = inputMechBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', inputMechData, false);

      // supported in Chrome, Opera, FF 38+
      var coresBrowserPropsContract = new _contract_staticContracts_browserPropsContract_CoresBrowserPropsContract__WEBPACK_IMPORTED_MODULE_9__["default"](window.navigator.hardwareConcurrency || 0);
      var coresData = coresBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', coresData, false);
      if (navigator.languages) {
        var languages = navigator.languages;
        // If configuration specifies to hash the language field...
        if (this._configurationRepository.get('browserPropsShouldHashLanguageField')) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Hashing languages field according to configuration');
          languages = Array.from(languages, function (lang) {
            return _this2._utils.getHash(lang).toString();
          });
        }
        var languageslistBrowserPropsContract = new _contract_staticContracts_browserPropsContract_LanguagesListBrowserPropsContract__WEBPACK_IMPORTED_MODULE_16__["default"](languages);
        var languageslistData = languageslistBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', languageslistData, false);
      }
      var plugins = BrowserPropsFeature.getPlugins();
      if (plugins && plugins.length > 0) {
        var pluginsBrowserPropsContract = new _contract_staticContracts_browserPropsContract_PluginsBrowserPropsContract__WEBPACK_IMPORTED_MODULE_10__["default"](plugins);
        var pluginsData = pluginsBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', pluginsData, false);
      }
      var jsUaBrowserPropsContract = new _contract_staticContracts_browserPropsContract_JsUaBrowserPropsContract__WEBPACK_IMPORTED_MODULE_11__["default"](navigator.userAgent);
      var jsUaData = jsUaBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', jsUaData, false);
      var tz = new Date().getTimezoneOffset() * -1;
      var timeZoneBrowserPropsContract = new _contract_staticContracts_browserPropsContract_TimeZoneBrowserPropsContract__WEBPACK_IMPORTED_MODULE_12__["default"](tz);
      var timeZoneData = timeZoneBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', timeZoneData, false);
      var isCookie = BrowserPropsFeature.checkCookie();
      var cookieEnabledBrowserPropsContract = new _contract_staticContracts_browserPropsContract_CookieEnabledBrowserPropsContract__WEBPACK_IMPORTED_MODULE_13__["default"](isCookie);
      var cookieEnabledData = cookieEnabledBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', cookieEnabledData, false);

      // device memory from https://github.com/w3c/device-memory#the-web-exposed-api.
      // max value is 8 for now even on 16GB RAM
      var memory = navigator.deviceMemory || 0;
      var deviceMemoryBrowserPropsContract = new _contract_staticContracts_browserPropsContract_DeviceMemoryBrowserPropsContract__WEBPACK_IMPORTED_MODULE_14__["default"](memory);
      var deviceMemoryData = deviceMemoryBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', deviceMemoryData, false);

      //Returns the build identifier of the browser.
      //In modern browsers this property now returns a fixed timestamp as a privacy measure, e.g. 20181001000000 in Firefox 64 onwards.
      //Available only on Firefox browsers, from version 64, for any other browser will return undefined and will not be included in the
      var buildId = navigator.buildID;
      if (buildId) {
        var buildBrowserPropsContract = new _contract_staticContracts_browserPropsContract_BuildIDBrowserPropsContract__WEBPACK_IMPORTED_MODULE_17__["default"](buildId);
        var buildIdData = buildBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', buildIdData, false);
      }

      //The maxTouchPoints read-only property of the Navigator interface returns the maximum number of simultaneous touch contact points
      //are supported by the current device.
      var maxTouchPoints = navigator.maxTouchPoints;
      var maxTouchPointsContract = new _contract_staticContracts_browserPropsContract_MaxTouchPointsBrowserPropsContract__WEBPACK_IMPORTED_MODULE_18__["default"](maxTouchPoints);
      var maxTouchPointsData = maxTouchPointsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', maxTouchPointsData, false);

      // Browser Display Properties.
      if (this._configurations.isBrowserDisplayDetectEnabled()) {
        var browserDisplayProperties = "".concat(BrowserPropsFeature.isTransparencyReduced(), ",\n            ").concat(BrowserPropsFeature.isMotionReduced(), ",\n            ").concat(BrowserPropsFeature.getColorGamut(), ",\n            ").concat(BrowserPropsFeature.areColorsForced(), ",\n            ").concat(BrowserPropsFeature.areColorsInverted(), ",\n            ").concat(BrowserPropsFeature.isHDR(), ",\n            ").concat(BrowserPropsFeature.getMonochromeDepth());
        var browserDisplayPropertiesBrowserPropsContract = new _contract_staticContracts_browserPropsContract_BrowserDisplayBrowserPropsContract__WEBPACK_IMPORTED_MODULE_20__.BrowserDisplayBrowserPropsContract(browserDisplayProperties);
        var browserDisplayPropertiesData = browserDisplayPropertiesBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', browserDisplayPropertiesData, false);
      }

      // Math.
      if (this._configurations.isMathDetectEnabled()) {
        var mathFingerprint = BrowserPropsFeature.getMathFingerprint();
        var mathDetectContract = new _contract_staticContracts_MathDetectContract__WEBPACK_IMPORTED_MODULE_19__["default"](mathFingerprint);
        var mathDetectData = mathDetectContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', mathDetectData, false);
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Browser Props collected');
    }

    /**
     * userLanguage - non standard. Retrieves the operating system's natural language setting
     * browserLanguage - non standard. Retrieves the current operating system language. Can be different from userLanguage
     * e.g in IE 11, userLanguage is 'he-IL' but browserLanguage is 'en-US'
     * language - standard. The preferred language of the user, usually the language of the browser UI
     * @returns {*}
     */
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getLanguage",
    value: function getLanguage() {
      if (navigator) {
        if (navigator.language) {
          // Chrome, FF, Edge, IE 11, Safari etc.
          return navigator.language;
        }
        if (navigator.userLanguage) {
          // IE 10 and lower
          return navigator.userLanguage;
        }
        // I commented out these options since they are not rele
        // else if (navigator.browserLanguage) {
        //     return navigator.browserLanguage;
        // }
        // else if (navigator.systemLanguage) { // IE 10 and lower
        //     return navigator.systemLanguage;
        // }
      }
      return undefined;
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/monochrome
     */
  }, {
    key: "getMonochromeDepth",
    value: function getMonochromeDepth() {
      if (!matchMedia('(min-monochrome: 0)').matches) {
        // The media feature isn't supported by the browser
        return undefined;
      }

      // A variation of binary search algorithm can be used here.
      // But since expected values are very small (10), there is no sense in adding the complexity.
      for (var i = 0; i <= 100; ++i) {
        if (matchMedia("(max-monochrome: ".concat(i, ")")).matches) {
          return i;
        }
      }
      return undefined;
    }

    /**
     * @see https://www.w3.org/TR/mediaqueries-5/#dynamic-range
     */
  }, {
    key: "isHDR",
    value: function isHDR() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(dynamic-range: ".concat(value, ")")).matches;
      };
      if (doesMatch('high')) {
        return 'high';
      }
      if (doesMatch('standard')) {
        return 'standard';
      }
      return 'undefined';
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/inverted-colors
     */
  }, {
    key: "areColorsInverted",
    value: function areColorsInverted() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(inverted-colors: ".concat(value, ")")).matches;
      };
      if (doesMatch('inverted')) {
        return 'inverted';
      }
      if (doesMatch('none')) {
        return 'none';
      }
      return 'undefined';
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/forced-colors
     */
  }, {
    key: "areColorsForced",
    value: function areColorsForced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(forced-colors: ".concat(value, ")")).matches;
      };
      if (doesMatch('active')) {
        return 'active';
      }
      if (doesMatch('none')) {
        return 'none';
      }
      return 'undefined';
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/color-gamut
     */
  }, {
    key: "getColorGamut",
    value: function getColorGamut() {
      // rec2020 includes p3 and p3 includes srgb
      for (var _i = 0, _arr = ['rec2020', 'p3', 'srgb']; _i < _arr.length; _i++) {
        var gamut = _arr[_i];
        if (matchMedia("(color-gamut: ".concat(gamut, ")")).matches) {
          return gamut;
        }
      }
      return 'undefined';
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion
     */
  }, {
    key: "isMotionReduced",
    value: function isMotionReduced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(prefers-reduced-motion: ".concat(value, ")")).matches;
      };
      if (doesMatch('reduce')) {
        return 'reduce';
      }
      if (doesMatch('no-preference')) {
        return 'no-preference';
      }
      return 'undefined';
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-transparency
     */
  }, {
    key: "isTransparencyReduced",
    value: function isTransparencyReduced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(prefers-reduced-transparency: ".concat(value, ")")).matches;
      };
      if (doesMatch('reduce')) {
        return 'reduce';
      }
      if (doesMatch('no-preference')) {
        return 'no-preference';
      }
      return 'undefined';
    }
  }, {
    key: "getMathFingerprint",
    value: function getMathFingerprint() {
      return [Math.acos(0.123124234234234242), Math.acosh(1e308), Math.asin(0.123124234234234242), Math.asinh(1), Math.atan(0.5), Math.atanh(0.5), Math.sin(-1e300), Math.sinh(1), Math.cos(10.000000000123), Math.cosh(1), Math.tan(-1e300), Math.tanh(1), Math.exp(1), Math.expm1(1), Math.log1p(10), Math.pow(Math.PI, -100)].join('|');
    }
  }, {
    key: "getPlugins",
    value: function getPlugins() {
      try {
        var pList = [];
        if (window.navigator.plugins && window.navigator.plugins.length > 0) {
          for (var i = 0, len = window.navigator.plugins.length; i < len; i++) {
            pList.push([window.navigator.plugins[i].name, window.navigator.plugins[i].filename, window.navigator.plugins[i].description, window.navigator.plugins[i].version ? window.navigator.plugins[i].version : '']);
          }
        } else if (window.navigator.mimeTypes && window.navigator.mimeTypes.length > 0) {
          for (var x = 0; x < window.navigator.mimeTypes.length; x++) {
            pList.push([window.navigator.mimeTypes[x].type, '', window.navigator.mimeTypes[x].description, '']);
          }
        }
        // Custom logic for enhancing the plugins list with a ShockwaveFLash entry if detected
        var detectFlashInIE = BrowserPropsFeature.isActiveXAndFlashEnabled;
        BrowserPropsFeature.augmentWithFlashInIE(pList, window.navigator.plugins, detectFlashInIE);
        return pList;
      } catch (e) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("getPlugins error: ".concat(e.message), e);
      }
    }
  }, {
    key: "checkCookie",
    value: function checkCookie() {
      var cookieEnabled = navigator.cookieEnabled;
      if (!cookieEnabled) {
        // for mobile compatibility
        // 1 minute expiration time
        this._utils.StorageUtils.setCookie('testcookie', '1', 60000);
        cookieEnabled = document.cookie.indexOf('testcookie') !== -1;
      }
      return cookieEnabled;
    }
  }, {
    key: "getOperatingSystem",
    value: function getOperatingSystem() {
      var dataOS = [{
        name: 'Windows Phone',
        value: 'Windows Phone',
        version: 'OS'
      }, {
        name: 'Windows',
        value: 'Win',
        version: 'NT'
      }, {
        name: 'iPhone',
        value: 'iPhone',
        version: 'OS'
      }, {
        name: 'iPad',
        value: 'iPad',
        version: 'OS'
      }, {
        name: 'Kindle',
        value: 'Silk',
        version: 'Silk'
      }, {
        name: 'Android',
        value: 'Android',
        version: 'Android'
      }, {
        name: 'PlayBook',
        value: 'PlayBook',
        version: 'OS'
      }, {
        name: 'BlackBerry',
        value: 'BlackBerry',
        version: '/'
      }, {
        name: 'Macintosh',
        value: 'Mac',
        version: 'OS X'
      }, {
        name: 'Linux',
        value: 'Linux',
        version: 'rv'
      }, {
        name: 'Palm',
        value: 'Palm',
        version: 'PalmOS'
      }];
      var navAgentData = [BrowserPropsFeature.getAvailablePlatform(window.navigator), navigator.userAgent].join(' ');
      var version = '';
      var os = 'Unknown';
      var osRegex;
      var verRegex;
      var osMatch;
      var verMatch;
      for (var index = 0; index < dataOS.length; index++) {
        osRegex = new RegExp(dataOS[index].value, 'i');
        osMatch = osRegex.test(navAgentData);
        if (osMatch) {
          verRegex = new RegExp(dataOS[index].version + '[- /:;]([\\d._]+)', 'i');
          verMatch = navAgentData.match(verRegex);
          if (verMatch) {
            if (verMatch[1]) {
              verMatch = verMatch[1];
            }
            verMatch = verMatch.split(/[._]+/);
            for (var verIndex = 0; verIndex < verMatch.length; verIndex++) {
              if (verIndex === 0) {
                version += verMatch[verIndex] + '.';
              } else {
                version += verMatch[verIndex];
              }
            }
          }
          os = dataOS[index].name;
          break;
        }
      }
      return {
        version: parseFloat(version) || null,
        name: os
      };
    }

    /**
     * Must be wrapped with try/catch to avoid undefined errors in non IE browsers
     * (assuming you consider IE a browser)
     * If the ShockwaveFlash plugin is installed and enabled it is expected to appear in
     * the navigator.plugins list in IE 11. However in IE < 11 (10, 9 ,8) the navigator.plugins is not a PluginArray
     * object and therefore this custom detection is required.
     * @returns {boolean}
     */
  }, {
    key: "isActiveXAndFlashEnabled",
    value: function isActiveXAndFlashEnabled() {
      try {
        return Boolean(new ActiveXObject('ShockwaveFlash.ShockwaveFlash'));
      } catch (exception) {
        return false;
      }
    }
  }, {
    key: "getAvailablePlatform",
    value: function getAvailablePlatform(_navigator) {
      if ('platform' in _navigator) {
        return _navigator['platform'];
      } else if ('userAgentData' in _navigator) {
        return _navigator['userAgentData']['platform'];
      }
      return null;
    }

    /**
     * The Flash Enable related data point is the result of collecting the Shockwave flash entry available in the navigator.plugins/mimeTypes
     * However, this entry is added in IE11, Chrome, Firefox and Safari
     * This method is called to enhance the plugins/mimeTypes data upon detecting Flash in IE < 11 using
     * the activeX API
     * @param {Array} data
     * @param {object} navigatorPluginsObject by which IE < 11 behavior is detected as we only augment
     * @param {function} detectFlashInIE
     * MSMimeTypesCollection and MSPluginsCollection collections
     */
  }, {
    key: "augmentWithFlashInIE",
    value: function augmentWithFlashInIE(data, navigatorPluginsObject, detectFlashInIE) {
      // We are not expected to augment the navigator.plugins/mimeTypes object PluginArray (IE 11+) type
      // Only MSMimeTypesCollection and MSPluginsCollection should be augmented

      var pluginsCollectionName = Object.prototype.toString.call(navigatorPluginsObject);
      if (pluginsCollectionName === '[object PluginArray]') {
        return data;
      }
      var pluginsEntry = ['Flash32_32_0_0_238.ocx', 2, 'Shockwave Flash', '32.0.0.238'];
      if (detectFlashInIE()) {
        data.push(pluginsEntry);
      }
      return data;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* eslint-enable prefer-destructuring */


/***/ }),

/***/ "./src/main/collectors/static/ClientHintsCollector.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/static/ClientHintsCollector.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ClientHintsCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_ClientHintsContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/ClientHintsContract */ "./src/main/contract/staticContracts/ClientHintsContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isClientHintsFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};
var ClientHintsCollector = /*#__PURE__*/function (_DataCollector) {
  function ClientHintsCollector(dataQ) {
    var _this;
    var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, ClientHintsCollector);
    _this = _callSuper(this, ClientHintsCollector);
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    return _this;
  }

  /**
   * Collects User-Agent Client Hints API (userAgentData) data.
   * Sends all client hints as a single object with key "client_hints_user_agent"
   **/
  _inherits(ClientHintsCollector, _DataCollector);
  return _createClass(ClientHintsCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var uaData, clientHintsData, highEntropyValues, contract;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this._navigator.userAgentData) {
                _context.next = 3;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('ClientHintsCollector: userAgentData not available');
              return _context.abrupt("return");
            case 3:
              uaData = this._navigator.userAgentData;
              clientHintsData = {
                brands: uaData.brands,
                is_mobile: uaData.mobile,
                platform: uaData.platform
              }; // Collect high entropy values
              _context.prev = 5;
              _context.next = 8;
              return uaData.getHighEntropyValues(["architecture", "model", "platformVersion", "uaFullVersion", "fullVersionList", "bitness", "wow64"]);
            case 8:
              highEntropyValues = _context.sent;
              clientHintsData.architecture = highEntropyValues.architecture;
              clientHintsData.model = highEntropyValues.model;
              clientHintsData.platform_version = highEntropyValues.platformVersion;
              clientHintsData.user_agent_full_version = highEntropyValues.uaFullVersion;
              clientHintsData.full_version_list = highEntropyValues.fullVersionList;
              clientHintsData.bitness = highEntropyValues.bitness;
              clientHintsData.wow64 = highEntropyValues.wow64;
              _context.next = 21;
              break;
            case 18:
              _context.prev = 18;
              _context.t0 = _context["catch"](5);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('ClientHintsCollector: Error collecting client hints data', _context.t0);
            case 21:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('ClientHintsCollector: Sending client hints data: ' + JSON.stringify(clientHintsData));
              // Send all client hints as a single object via contract
              contract = new _contract_staticContracts_ClientHintsContract__WEBPACK_IMPORTED_MODULE_2__["default"](clientHintsData);
              this._dataQ.addToQueue('static_fields', contract.buildQueueMessage(), false);
            case 24:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[5, 18]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }())
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/DRMDataCollector.js":
/*!********************************************************!*\
  !*** ./src/main/collectors/static/DRMDataCollector.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_Hash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/Hash */ "./src/main/technicalServices/Hash.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var DRMDataCollector = /*#__PURE__*/function (_DataCollector) {
  function DRMDataCollector(dataQ) {
    var _this;
    _classCallCheck(this, DRMDataCollector);
    _this = _callSuper(this, DRMDataCollector);
    _this._dataQ = dataQ;
    _this.drmData = {};
    return _this;
  }

  // Added helper method so that tests can stub it
  _inherits(DRMDataCollector, _DataCollector);
  return _createClass(DRMDataCollector, [{
    key: "hashDRMData",
    value: function hashDRMData(drmData) {
      return (0,_technicalServices_Hash__WEBPACK_IMPORTED_MODULE_1__.x64hash128)(JSON.stringify(drmData));
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var drmSystems, config, _i, _Object$entries, _Object$entries$_i, name, keySystem, access, fingerprintHash;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              drmSystems = {
                widevine: "com.widevine.alpha",
                playready: "com.microsoft.playready",
                fairplay: "com.apple.fairplay",
                clearkey: "org.w3.clearkey"
              };
              config = [{
                initDataTypes: ["cenc"],
                videoCapabilities: [{
                  contentType: 'video/mp4; codecs="avc1.42E01E"'
                }, {
                  contentType: 'video/webm; codecs="vp8"'
                }],
                audioCapabilities: [{
                  contentType: 'audio/mp4; codecs="mp4a.40.2"'
                }]
              }]; // Iterate over DRM systems and try to request access.
              _i = 0, _Object$entries = Object.entries(drmSystems);
            case 3:
              if (!(_i < _Object$entries.length)) {
                _context.next = 18;
                break;
              }
              _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), name = _Object$entries$_i[0], keySystem = _Object$entries$_i[1];
              _context.prev = 5;
              _context.next = 8;
              return navigator.requestMediaKeySystemAccess(keySystem, config);
            case 8:
              access = _context.sent;
              this.drmData[name] = {
                supported: true,
                keySystem: keySystem,
                sessionTypes: access.getConfiguration().sessionTypes,
                videoCapabilities: access.getConfiguration().videoCapabilities,
                audioCapabilities: access.getConfiguration().audioCapabilities
              };
              _context.next = 15;
              break;
            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](5);
              // Mark as unsupported.
              this.drmData[name] = {
                supported: false
              };
            case 15:
              _i++;
              _context.next = 3;
              break;
            case 18:
              // Compute fingerprint using the helper method.
              fingerprintHash = this.hashDRMData(this.drmData);
              this.sendData(this.drmData);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('DRMDataCollector - DRM Data');
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug(this.drmData);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug(fingerprintHash);
            case 23:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[5, 12]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "sendData",
    value: function sendData(drmData) {
      this._dataQ.addToQueue('static_fields', ['drm', drmData], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return {
        configKey: 'isDRMFeature',
        isDefault: false,
        shouldRunPerContext: false,
        shouldRunPerSession: true,
        shouldRun: false,
        isFrameRelated: false,
        runInUns: false,
        runInSlave: false,
        runInLean: false,
        isRunning: false,
        instance: null
      };
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (DRMDataCollector);

/***/ }),

/***/ "./src/main/collectors/static/DoNotTrackFeature.js":
/*!*********************************************************!*\
  !*** ./src/main/collectors/static/DoNotTrackFeature.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DoNotTrackFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _contract_staticContracts_DoNotTrackContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contract/staticContracts/DoNotTrackContract */ "./src/main/contract/staticContracts/DoNotTrackContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isDoNotTrack',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var DoNotTrackFeature = /*#__PURE__*/function (_DataCollector) {
  function DoNotTrackFeature(dataQ) {
    var _this;
    _classCallCheck(this, DoNotTrackFeature);
    _this = _callSuper(this, DoNotTrackFeature);
    _this._dataQ = dataQ;
    return _this;
  }

  /**
   * Browsers behavior:
   * Chrome: navigator.doNotTrack == null when not set, "1" when set
   * FF: navigator.doNotTrack == "unspecified" when not set, "1" when set
   * IE 11: window.doNotTrack == null when turned off, "1" when set (default mode)
   * IE 10: navigator.msDoNotTrack == "0" when turned off, "1" when set
   * Safari 9.1: navigator.doNotTrack == null when never set, "1" when set and when again unset "0"
   * Opera: navigator.doNotTrack == null, did not find how to set it in Opera
   * Edge: window.doNotTrack == null when turned off, , "1" when set
   */
  _inherits(DoNotTrackFeature, _DataCollector);
  return _createClass(DoNotTrackFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var dnt = navigator.doNotTrack; // normal browsers
      if (dnt === undefined) {
        dnt = window.doNotTrack; // IE 11 + Edge
        if (dnt === undefined) {
          dnt = navigator.msDoNotTrack; // IE 10
        }
      }
      if (dnt === null || dnt === 'unspecified' || dnt === '0') {
        dnt = 0;
      } else if (dnt === '1') {
        dnt = 1;
      } else {
        // dnt is undefined or some other value (cannot really happen)
        dnt = 2;
      }
      var doNotTrackContract = new _contract_staticContracts_DoNotTrackContract__WEBPACK_IMPORTED_MODULE_1__["default"](dnt);
      var data = doNotTrackContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', data, false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/EncryptedMuidFeature.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/static/EncryptedMuidFeature.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ EncryptedMuidFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _contract_staticContracts_DevDebugInfoContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contract/staticContracts/DevDebugInfoContract */ "./src/main/contract/staticContracts/DevDebugInfoContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'enableEmuidFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var EncryptedMuidFeature = /*#__PURE__*/function (_DataCollector) {
  function EncryptedMuidFeature(dataQ, encryptedMuidService) {
    var _this;
    _classCallCheck(this, EncryptedMuidFeature);
    _this = _callSuper(this, EncryptedMuidFeature);
    _this._encryptedMuidService = encryptedMuidService;
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(EncryptedMuidFeature, _DataCollector);
  return _createClass(EncryptedMuidFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var emuid;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._encryptedMuidService.getEncryptedMuid();
            case 2:
              emuid = _context.sent;
              if (emuid) {
                this._dataQ.addToQueue('static_fields', ['emuid', emuid], false);
              }
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/HeapCollector.js":
/*!*****************************************************!*\
  !*** ./src/main/collectors/static/HeapCollector.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var featureSettings = {
  configKey: 'isHeapFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var HeapCollector = /*#__PURE__*/function (_DataCollector) {
  function HeapCollector(dataQ) {
    var _this;
    var performance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.performance;
    var logger = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    _classCallCheck(this, HeapCollector);
    _this = _callSuper(this, HeapCollector);
    _this._dataQ = dataQ;
    _this._performance = performance;
    _this._logger = logger;
    return _this;
  }

  /**
   * Collects heap memory information
   * @returns {Object} Heap data
   */
  _inherits(HeapCollector, _DataCollector);
  return _createClass(HeapCollector, [{
    key: "collectHeapData",
    value: function collectHeapData() {
      var heapData = {
        timestamp: Date.now()
      };
      try {
        // Performance heap memory information
        if (this._performance && this._performance.memory) {
          var _this$_performance$me = this._performance.memory,
            usedJSHeapSize = _this$_performance$me.usedJSHeapSize,
            totalJSHeapSize = _this$_performance$me.totalJSHeapSize,
            jsHeapSizeLimit = _this$_performance$me.jsHeapSizeLimit;
          if (usedJSHeapSize !== undefined) {
            heapData.usedJSHeapSize = usedJSHeapSize;
          }
          if (totalJSHeapSize !== undefined) {
            heapData.totalJSHeapSize = totalJSHeapSize;
          }
          if (jsHeapSizeLimit !== undefined) {
            heapData.jsHeapSizeLimit = jsHeapSizeLimit;
          }
        }
      } catch (error) {
        if (this._logger) {
          this._logger.debug('HeapCollector - Error collecting heap data:', error);
        }
      }
      return heapData;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var heapData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this._logger) {
                this._logger.info('HeapCollector - Starting heap data collection');
              }
              try {
                heapData = this.collectHeapData();
                if (this._logger) {
                  this._logger.debug('HeapCollector - Heap Data collected: ' + JSON.stringify(heapData));
                }
                this.sendData(heapData);
              } catch (error) {
                if (this._logger) {
                  this._logger.error('HeapCollector - Error during data collection:', error);
                }
              }
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "sendData",
    value: function sendData(heapData) {
      this._dataQ.addToQueue('static_fields', ['heap', heapData], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (HeapCollector);

/***/ }),

/***/ "./src/main/collectors/static/KeyboardLayoutFeature.js":
/*!*************************************************************!*\
  !*** ./src/main/collectors/static/KeyboardLayoutFeature.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ KeyboardLayoutFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_KeyboardLayoutContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/KeyboardLayoutContract */ "./src/main/contract/staticContracts/KeyboardLayoutContract.js");
/* harmony import */ var _technicalServices_Hash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../technicalServices/Hash */ "./src/main/technicalServices/Hash.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




var featureSettings = {
  configKey: 'isKeyboardLayoutFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var KeyboardLayoutFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQ
   */
  function KeyboardLayoutFeature(dataQ) {
    var _this;
    _classCallCheck(this, KeyboardLayoutFeature);
    _this = _callSuper(this, KeyboardLayoutFeature);
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(KeyboardLayoutFeature, _DataCollector);
  return _createClass(KeyboardLayoutFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Starting Keyboard Layout Feature");
              _context.next = 3;
              return this._collectKeyboardLayoutInfo();
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "getKeyboard",
    value: function getKeyboard() {
      return typeof navigator !== 'undefined' && navigator.keyboard ? navigator.keyboard : null;
    }
  }, {
    key: "_collectKeyboardLayoutInfo",
    value: function () {
      var _collectKeyboardLayoutInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var keyboardLayoutInfo, keyboardLayoutContract, contractData;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting keyboard layout properties');
              _context2.prev = 1;
              _context2.next = 4;
              return this._getKeyboardLayoutInfo();
            case 4:
              keyboardLayoutInfo = _context2.sent;
              keyboardLayoutContract = new _contract_staticContracts_KeyboardLayoutContract__WEBPACK_IMPORTED_MODULE_2__["default"](keyboardLayoutInfo);
              contractData = keyboardLayoutContract.buildQueueMessage();
              this._dataQ.addToQueue('static_fields', contractData, false);
              _context2.next = 13;
              break;
            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error collecting keyboard layout information: ".concat(_context2.t0));
            case 13:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[1, 10]]);
      }));
      function _collectKeyboardLayoutInfo() {
        return _collectKeyboardLayoutInfo2.apply(this, arguments);
      }
      return _collectKeyboardLayoutInfo;
    }()
  }, {
    key: "_getKeyboardLayoutInfo",
    value: function () {
      var _getKeyboardLayoutInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var keyboard, layoutMap, map;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              keyboard = this.getKeyboard();
              if (keyboard) {
                _context3.next = 3;
                break;
              }
              throw Error("Could not find keyboard layout");
            case 3:
              _context3.next = 5;
              return keyboard.getLayoutMap();
            case 5:
              layoutMap = _context3.sent;
              map = Array.from(layoutMap.values()).join("");
              return _context3.abrupt("return", (0,_technicalServices_Hash__WEBPACK_IMPORTED_MODULE_3__.x64hash128)(map));
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _getKeyboardLayoutInfo() {
        return _getKeyboardLayoutInfo2.apply(this, arguments);
      }
      return _getKeyboardLayoutInfo;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/MediaDevicesFeature.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/static/MediaDevicesFeature.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MediaDevicesFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_MediaDevicesContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/MediaDevicesContract */ "./src/main/contract/staticContracts/MediaDevicesContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isMediaDevices',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var MediaDevicesFeature = /*#__PURE__*/function (_DataCollector) {
  function MediaDevicesFeature(dataQ) {
    var _this;
    var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, MediaDevicesFeature);
    _this = _callSuper(this, MediaDevicesFeature);
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    _this._metric = 'MediaDevicesFeature';
    return _this;
  }
  _inherits(MediaDevicesFeature, _DataCollector);
  return _createClass(MediaDevicesFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      this._navigator.mediaDevices && this._navigator.mediaDevices.enumerateDevices && this._navigator.mediaDevices.enumerateDevices().then(function (devices) {
        var mediaDevices = [];
        devices.forEach(function (device) {
          var mediaDevice = [device.kind || '', device.label || '', device.deviceId || '', device.groupId || ''];
          mediaDevices.push(mediaDevice);
        });
        var mediaDevicesContract = new _contract_staticContracts_MediaDevicesContract__WEBPACK_IMPORTED_MODULE_2__["default"](mediaDevices);
        var mediaDevicesData = mediaDevicesContract.buildQueueMessage();
        _this2._dataQ.addToQueue('static_fields', mediaDevicesData, false);
      })["catch"](function (err) {
        _this2.cancelMonitor(_this2._metric);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("MediaDevicesFeature:startFeature failed to enumerateDevices: ".concat(err.message));
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/NavigatorFeature.js":
/*!********************************************************!*\
  !*** ./src/main/collectors/static/NavigatorFeature.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NavigatorFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isNavigatorFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};
var NavigatorFeature = /*#__PURE__*/function (_DataCollector) {
  function NavigatorFeature(dataQ) {
    var _this;
    var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, NavigatorFeature);
    _this = _callSuper(this, NavigatorFeature);
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    return _this;
  }

  /**
   * Collects navigator data (excluding User-Agent Client Hints API which is handled by ClientHintsCollector).
   **/
  _inherits(NavigatorFeature, _DataCollector);
  return _createClass(NavigatorFeature, [{
    key: "startFeature",
    value: function startFeature() {
      try {
        var navigatorData = {
          oscpu: this._navigator.oscpu || null,
          pdfViewerEnabled: this._navigator.pdfViewerEnabled || null,
          webdriver: this._navigator.webdriver || null,
          appVersion: this._navigator.appVersion || null,
          platform: this._navigator.platform || null,
          vendor: this._navigator.vendor || null,
          productSub: this._navigator.productSub || null,
          vendorSub: this._navigator.vendorSub || null,
          onLine: this._navigator.onLine || null,
          prototype: Object.getOwnPropertyNames(Object.getPrototypeOf(this._navigator))
        };
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('NavigatorFeature: Collected navigator data' + JSON.stringify(navigatorData));
        this._dataQ.addToQueue('static_fields', ['navigator_oscpu', navigatorData.oscpu], false);
        this._dataQ.addToQueue('static_fields', ['navigator_pdfViewerEnabled', navigatorData.pdfViewerEnabled], false);
        this._dataQ.addToQueue('static_fields', ['navigator_webdriver', navigatorData.webdriver], false);
        this._dataQ.addToQueue('static_fields', ['navigator_appVersion', navigatorData.appVersion], false);
        this._dataQ.addToQueue('static_fields', ['navigator_platform', navigatorData.platform], false);
        this._dataQ.addToQueue('static_fields', ['navigator_vendor', navigatorData.vendor], false);
        this._dataQ.addToQueue('static_fields', ['navigator_productSub', navigatorData.productSub], false);
        this._dataQ.addToQueue('static_fields', ['navigator_vendorSub', navigatorData.vendorSub], false);
        this._dataQ.addToQueue('static_fields', ['navigator_onLine', navigatorData.onLine], false);
        this._dataQ.addToQueue('static_fields', ['navigator_prototype', navigatorData.prototype], false);
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('NavigatorFeature: Error collecting navigator data', error);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/PointerHoverDetector.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/static/PointerHoverDetector.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PointerHoverDetector; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var POINTER_TYPE = {
  FINE: 1,
  COARSE: 2,
  NONE: 3,
  ANY: 4,
  NOT_SUPPORTED: 5
};
var HOVER_TYPE = {
  HOVER: 1,
  ON_DEMAND: 2,
  NONE: 3,
  ANY: 4,
  NOT_SUPPORTED: 5
};
var PointerHoverDetector = /*#__PURE__*/function () {
  function PointerHoverDetector() {
    _classCallCheck(this, PointerHoverDetector);
  }
  return _createClass(PointerHoverDetector, null, [{
    key: "getPointerHover",
    value: function getPointerHover() {
      var inputMechanism = {
        pointer: POINTER_TYPE.NOT_SUPPORTED,
        hover: POINTER_TYPE.NOT_SUPPORTED
      };

      // fine pointer - mouse or pen
      if (window.matchMedia) {
        var mm = window.matchMedia;
        if (mm('( any-pointer: fine )').matches) {
          // hige level accuracy - mouse or pen
          inputMechanism.pointer = POINTER_TYPE.FINE;
        } else if (mm('( any-pointer: coarse )').matches) {
          // less accurate pointer - touch screen
          inputMechanism.pointer = POINTER_TYPE.COARSE;
        } else if (mm('( any-pointer: none )').matches) {
          inputMechanism.pointer = POINTER_TYPE.NONE;
        } else if (mm('( any-pointer )').matches) {
          inputMechanism.pointer = POINTER_TYPE.ANY;
        }

        // The primary input mechanism of the device includes a pointing device of limited accuracy
        if (mm('( any-hover: hover )').matches) {
          inputMechanism.hover = HOVER_TYPE.HOVER;
        } else if (mm('( any-hover: on-demand )').matches) {
          inputMechanism.hover = HOVER_TYPE.ON_DEMAND;
        } else if (mm('( any-hove: none )').matches) {
          inputMechanism.hover = HOVER_TYPE.NONE;
        } else if (window.matchMedia('( any-hover )').matches) {
          inputMechanism.hover = HOVER_TYPE.ANY;
        }
      }
      return inputMechanism;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/ScreenHighResFeature.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/static/ScreenHighResFeature.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ScreenHighResFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_ScreenHighResContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/ScreenHighResContract */ "./src/main/contract/staticContracts/ScreenHighResContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isScreenHighResFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var ScreenHighResFeature = /*#__PURE__*/function (_DataCollector) {
  function ScreenHighResFeature(dataQ) {
    var _this;
    _classCallCheck(this, ScreenHighResFeature);
    _this = _callSuper(this, ScreenHighResFeature);
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(ScreenHighResFeature, _DataCollector);
  return _createClass(ScreenHighResFeature, [{
    key: "startFeature",
    value: function startFeature() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Starting Screen High Resolution Feature');
      var screenHighResInfo = ScreenHighResFeature.getScreenHighResInfo();
      var screenHighResContract = new _contract_staticContracts_ScreenHighResContract__WEBPACK_IMPORTED_MODULE_2__["default"](screenHighResInfo);
      var screenHighResData = screenHighResContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', screenHighResData, false);
    }

    /**
     * Gets the screen high resolution information
     * @returns {boolean} Whether the screen is high resolution
     */
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getScreenHighResInfo",
    value: function getScreenHighResInfo() {
      var HIGH_RES_QUERY = "(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)";
      var mediaQueryList = ScreenHighResFeature.getMediaQueryList(HIGH_RES_QUERY);
      return mediaQueryList ? mediaQueryList.matches : false;
    }

    /**
     * Gets the media query list for a given query
     * @param {string} query - The media query to check
     * @returns {MediaQueryList} The media query list
     */
  }, {
    key: "getMediaQueryList",
    value: function getMediaQueryList(query) {
      if (typeof window !== 'undefined' && typeof window.matchMedia === 'function') {
        return window.matchMedia(query);
      }
      return null;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/SpeechVoiceCollector.js":
/*!************************************************************!*\
  !*** ./src/main/collectors/static/SpeechVoiceCollector.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_Hash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/Hash */ "./src/main/technicalServices/Hash.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isSpeechVoicesFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * Uses speechSynthesis to collect and hash available voices, then stores the data.
 * 
 * speechSynthesis is a Web Speech API interface that enables text-to-speech (TTS) functionality.
 * Voices represent different speech synthesis options, including language, gender, and voice provider.
 */
var SpeechVoiceCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * @constructor
   * @param {Object} dataQ - The data queue instance for storing collected data.
   */
  function SpeechVoiceCollector(dataQ) {
    var _this;
    _classCallCheck(this, SpeechVoiceCollector);
    _this = _callSuper(this, SpeechVoiceCollector);
    _this._dataQ = dataQ;
    return _this;
  }

  /**
   * Initializes the feature by listening for voice changes and collecting data.
   */
  _inherits(SpeechVoiceCollector, _DataCollector);
  return _createClass(SpeechVoiceCollector, [{
    key: "startFeature",
    value: function startFeature() {
      speechSynthesis.addEventListener("voiceschanged", this.processVoices.bind(this));
      if (!speechSynthesis.pending) this.processVoices();
    }

    /**
     * Processes available speech synthesis voices, generates a hash, and adds it to the queue.
     */
  }, {
    key: "processVoices",
    value: function processVoices() {
      var voices = speechSynthesis.getVoices().map(function (_ref) {
        var def = _ref["default"],
          lang = _ref.lang,
          localService = _ref.localService,
          name = _ref.name,
          voiceURI = _ref.voiceURI;
        return {
          def: def,
          lang: lang,
          localService: localService,
          name: name,
          voiceURI: voiceURI
        };
      });
      if (voices.length === 0) return;
      var hash = (0,_technicalServices_Hash__WEBPACK_IMPORTED_MODULE_1__.x64hash128)(JSON.stringify(voices));
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SpeechVoices - Voice hash:' + hash);
      this._dataQ.addToQueue('static_fields', ['speech_voices', hash], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (SpeechVoiceCollector);

/***/ }),

/***/ "./src/main/collectors/static/StorageFeature.js":
/*!******************************************************!*\
  !*** ./src/main/collectors/static/StorageFeature.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_StorageEstimateContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/StorageEstimateContract */ "./src/main/contract/staticContracts/StorageEstimateContract.js");
/* harmony import */ var _contract_staticContracts_StorageDirectoryContract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contract/staticContracts/StorageDirectoryContract */ "./src/main/contract/staticContracts/StorageDirectoryContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }





/**
 * Feature settings for the StorageFeature
 * @type {Object}
 */
var featureSettings = {
  configKey: 'isStorageFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};

/**
 * StorageFeature collects information about browser storage capabilities
 * including storage estimates and directory information.
 * 
 * @extends DataCollector
 */
var StorageFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * Creates a new StorageFeature instance
   * @param {DataQueue} dataQ - The data queue to add collected data to
   */
  function StorageFeature(dataQ) {
    var _this;
    _classCallCheck(this, StorageFeature);
    _this = _callSuper(this, StorageFeature);
    _this._dataQ = dataQ;
    _this._storageManager = null;
    return _this;
  }

  /**
   * Starts the storage feature by collecting both storage estimate and directory information
   */
  _inherits(StorageFeature, _DataCollector);
  return _createClass(StorageFeature, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("Starting Storage Feature");
              this._initializeStorageManager();
              _context.prev = 2;
              _context.next = 5;
              return this._collectStorageEstimateInfo();
            case 5:
              _context.next = 7;
              return this._collectStorageDirectoryInfo();
            case 7:
              _context.next = 12;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](2);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error in Storage Feature: ".concat(_context.t0.message || _context.t0));
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[2, 9]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Initializes the storage manager if not already initialized
     * @private
     */
    )
  }, {
    key: "_initializeStorageManager",
    value: function _initializeStorageManager() {
      if (!this._storageManager) {
        this._storageManager = this.getStorageManager();
      }
    }

    /**
     * Gets the browser's storage manager
     * @returns {StorageManager} The browser's storage manager
     */
  }, {
    key: "getStorageManager",
    value: function getStorageManager() {
      return typeof navigator !== 'undefined' && navigator.storage ? navigator.storage : null;
    }

    /**
     * Collects storage estimate information and adds it to the data queue
     * @private
     */
  }, {
    key: "_collectStorageEstimateInfo",
    value: (function () {
      var _collectStorageEstimateInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var storageEstimate, storageEstimateContract, contractData;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting storage estimate properties');
              _context2.prev = 1;
              _context2.next = 4;
              return this._getStorageEstimateInfo();
            case 4:
              storageEstimate = _context2.sent;
              if (this._isValidStorageEstimate(storageEstimate)) {
                storageEstimateContract = new _contract_staticContracts_StorageEstimateContract__WEBPACK_IMPORTED_MODULE_2__["default"](storageEstimate.usage, storageEstimate.quota);
                contractData = storageEstimateContract.buildQueueMessage();
                this._dataQ.addToQueue('static_fields', contractData, false);
              } else {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Invalid storage estimate data received');
              }
              _context2.next = 12;
              break;
            case 8:
              _context2.prev = 8;
              _context2.t0 = _context2["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error collecting storage estimate information: ".concat(_context2.t0.message || _context2.t0));
              throw _context2.t0;
            case 12:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[1, 8]]);
      }));
      function _collectStorageEstimateInfo() {
        return _collectStorageEstimateInfo2.apply(this, arguments);
      }
      return _collectStorageEstimateInfo;
    }()
    /**
     * Validates storage estimate data
     * @param {Object} storageEstimate - The storage estimate data to validate
     * @returns {boolean} True if the data is valid, false otherwise
     * @private
     */
    )
  }, {
    key: "_isValidStorageEstimate",
    value: function _isValidStorageEstimate(storageEstimate) {
      return storageEstimate && typeof storageEstimate.usage === 'number' && typeof storageEstimate.quota === 'number' && storageEstimate.usage >= 0 && storageEstimate.quota >= 0;
    }

    /**
     * Gets storage estimate information from the browser
     * @private
     * @returns {Promise<{quota: number, usage: number}>} Storage estimate information
     */
  }, {
    key: "_getStorageEstimateInfo",
    value: (function () {
      var _getStorageEstimateInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var storageEstimate;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              if (this._storageManager) {
                _context3.next = 4;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('StorageManager is not initialized or unavailable.');
              throw new Error('StorageManager is not initialized or unavailable.');
            case 4:
              _context3.next = 6;
              return this._storageManager.estimate();
            case 6:
              storageEstimate = _context3.sent;
              return _context3.abrupt("return", {
                quota: storageEstimate.quota,
                usage: storageEstimate.usage
              });
            case 10:
              _context3.prev = 10;
              _context3.t0 = _context3["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to get storage estimate: ".concat(_context3.t0.message || _context3.t0));
              throw _context3.t0;
            case 14:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 10]]);
      }));
      function _getStorageEstimateInfo() {
        return _getStorageEstimateInfo2.apply(this, arguments);
      }
      return _getStorageEstimateInfo;
    }()
    /**
     * Collects storage directory information and adds it to the data queue
     * @private
     */
    )
  }, {
    key: "_collectStorageDirectoryInfo",
    value: (function () {
      var _collectStorageDirectoryInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var directoryName, storageDirectoryContract, contractData;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting storage directory properties');
              _context4.prev = 1;
              _context4.next = 4;
              return this._getStorageDirectoryInfo();
            case 4:
              directoryName = _context4.sent;
              if (this._isValidDirectoryName(directoryName)) {
                storageDirectoryContract = new _contract_staticContracts_StorageDirectoryContract__WEBPACK_IMPORTED_MODULE_3__["default"](directoryName);
                contractData = storageDirectoryContract.buildQueueMessage();
                this._dataQ.addToQueue('static_fields', contractData, false);
              } else {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('Invalid storage directory data received');
              }
              _context4.next = 12;
              break;
            case 8:
              _context4.prev = 8;
              _context4.t0 = _context4["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error collecting storage directory information: ".concat(_context4.t0.message || _context4.t0));
              throw _context4.t0;
            case 12:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[1, 8]]);
      }));
      function _collectStorageDirectoryInfo() {
        return _collectStorageDirectoryInfo2.apply(this, arguments);
      }
      return _collectStorageDirectoryInfo;
    }()
    /**
     * Validates directory name
     * @param {string} directoryName - The directory name to validate
     * @returns {boolean} True if the directory name is valid, false otherwise
     * @private
     */
    )
  }, {
    key: "_isValidDirectoryName",
    value: function _isValidDirectoryName(directoryName) {
      return directoryName !== undefined && typeof directoryName === 'string';
    }

    /**
     * Gets storage directory information from the browser
     * @private
     * @returns {Promise<string>} Storage directory name
     */
  }, {
    key: "_getStorageDirectoryInfo",
    value: (function () {
      var _getStorageDirectoryInfo2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var fileSystemDirectoryHandle;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              if (this._storageManager) {
                _context5.next = 4;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('StorageManager is not initialized or unavailable.');
              throw new Error('StorageManager is not initialized or unavailable.');
            case 4:
              _context5.next = 6;
              return this._storageManager.getDirectory();
            case 6:
              fileSystemDirectoryHandle = _context5.sent;
              return _context5.abrupt("return", fileSystemDirectoryHandle.name);
            case 10:
              _context5.prev = 10;
              _context5.t0 = _context5["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to get storage directory: ".concat(_context5.t0.message || _context5.t0));
              throw _context5.t0;
            case 14:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 10]]);
      }));
      function _getStorageDirectoryInfo() {
        return _getStorageDirectoryInfo2.apply(this, arguments);
      }
      return _getStorageDirectoryInfo;
    }())
  }], [{
    key: "getDefaultSettings",
    value:
    /**
     * Returns the default settings for this feature
     * @returns {Object} The default feature settings
     */
    function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/UserPermissions.js":
/*!*******************************************************!*\
  !*** ./src/main/collectors/static/UserPermissions.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ UserPermissions; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_UserPermissionsContracts_PerUserPermissionContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract */ "./src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js");
/* harmony import */ var _contract_staticContracts_UserPermissionsContracts_PerStorageUserPermissionContract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract */ "./src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js");
/* harmony import */ var _contract_staticContracts_UserPermissionsContracts_PerKindUserPermissionContract__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract */ "./src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * Collect the user permissions granted to the domain. The permissions are per domain and
 * different from browser to browser. There are 3 possible values: granted, prompt, denied
 *  Supported in: Chrome, FF, Opera
 */





var featureSettings = {
  configKey: 'isUserPermissions',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var UserPermissions = /*#__PURE__*/function (_DataCollector) {
  function UserPermissions(dataQ) {
    var _this;
    var navig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, UserPermissions);
    _this = _callSuper(this, UserPermissions);
    _this._permDefs = {
      granted: 1,
      prompt: 2,
      denied: 3,
      "true": 1,
      "false": 3
    };
    _this._permissions = ['geolocation', 'midi', 'notifications', 'push'];
    _this._dataQ = dataQ;
    _this._navigator = navig;
    // 'camera', 'microphone' also appear in docs but are not working on any browser yet. Will be in the future.
    // So currently we check them by using navigator.mediaDevices.enumerateDevices.
    // 'persistent-storage' is working in FF but not in chrome and there is another way to check it
    // so we use the other way
    return _this;
  }
  _inherits(UserPermissions, _DataCollector);
  return _createClass(UserPermissions, [{
    key: "startFeature",
    value: function startFeature() {
      this._reportQueryPermissions();
      this._reportStoragePermission();
      this._reportMicCameraPermissions();
    }

    /**
     * All the query permissions are on of the 3 values: granted, prompt, denied
     * Each permission is checked independently to prevent one failure from affecting the others
     * @private
     */
  }, {
    key: "_reportQueryPermissions",
    value: function _reportQueryPermissions() {
      var _this2 = this;
      if (this._navigator.permissions && this._navigator.permissions.query) {
        var _loop = function _loop() {
          var per = _this2._permissions[i];
          _this2._navigator.permissions.query({
            name: per
          }).then(function (result) {
            var state = _this2._permDefs[result.state] || -1;
            var perContract = new _contract_staticContracts_UserPermissionsContracts_PerUserPermissionContract__WEBPACK_IMPORTED_MODULE_2__["default"](per, state);
            var perData = perContract.buildQueueMessage();
            _this2._dataQ.addToQueue('static_fields', perData, false);
          })["catch"](function (ex) {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Failed querying permission '".concat(per, "': ").concat(ex.message));
          });
        };
        // Check each permission independently with try-catch to handle browser-specific API support
        for (var i = 0; i < this._permissions.length; i++) {
          _loop();
        }
      }
    }

    /**
     * The persisted callback return true or false and we translate it to granted (1) and denied (3)
     * @private
     */
  }, {
    key: "_reportStoragePermission",
    value: function _reportStoragePermission() {
      var _this3 = this;
      // check for persistent storage permissions separately
      if (this._navigator.storage && this._navigator.storage.persisted) {
        this._navigator.storage.persisted().then(function (persistent) {
          var perStorageContract = new _contract_staticContracts_UserPermissionsContracts_PerStorageUserPermissionContract__WEBPACK_IMPORTED_MODULE_3__["default"](_this3._permDefs[persistent] || -1);
          var perStorageData = perStorageContract.buildQueueMessage();
          _this3._dataQ.addToQueue('static_fields', perStorageData, false);
        })["catch"](function (ex) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Failed to check storage persisted: ".concat(ex.message));
        });
      }
    }

    /**
     * We know whether there is a permission for the audio/video by checking the 'label' of the device.
     * If the label != "" then the user gave permissions, otherwise he did not.
     * @private
     */
  }, {
    key: "_reportMicCameraPermissions",
    value: function _reportMicCameraPermissions() {
      var _this4 = this;
      var alreadyReported = {
        audio: false,
        video: false
      };
      function updateReported(deviceKind) {
        if (deviceKind.includes('audio')) {
          alreadyReported.audio = true;
          return 'audio';
        }
        if (deviceKind.includes('video')) {
          alreadyReported.video = true;
          return 'video';
        }
      }
      function isAlreadyReported(deviceKind) {
        return deviceKind.includes('audio') && alreadyReported.audio || deviceKind.includes('video') && alreadyReported.video;
      }

      // check for camera and mic permissions
      this._navigator.mediaDevices && this._navigator.mediaDevices.enumerateDevices && this._navigator.mediaDevices.enumerateDevices().then(function (devices) {
        devices.forEach(function (device) {
          // if the label is not "" then the user gave permissions
          if (!isAlreadyReported(device.kind)) {
            var kind = updateReported(device.kind);
            var perm = device.label !== '' ? _this4._permDefs.granted : _this4._permDefs.denied;
            var perKingContract = new _contract_staticContracts_UserPermissionsContracts_PerKindUserPermissionContract__WEBPACK_IMPORTED_MODULE_4__["default"](kind, perm);
            var perKindData = perKingContract.buildQueueMessage();
            _this4._dataQ.addToQueue('static_fields', perKindData, false);
          }
        });
      })["catch"](function (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("UserPermissions:startFeature failed to enumerateDevices: ".concat(err.message));
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/WebRTCDataCollector.js":
/*!***********************************************************!*\
  !*** ./src/main/collectors/static/WebRTCDataCollector.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_Hash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/Hash */ "./src/main/technicalServices/Hash.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var WebRTCDataCollector = /*#__PURE__*/function (_DataCollector) {
  function WebRTCDataCollector(dataQ) {
    var _this;
    _classCallCheck(this, WebRTCDataCollector);
    _this = _callSuper(this, WebRTCDataCollector);
    _this._dataQ = dataQ;
    _this.peer = null;
    _this.timeoutId = null;
    return _this;
  }
  _inherits(WebRTCDataCollector, _DataCollector);
  return _createClass(WebRTCDataCollector, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var candidates, _error$message, _error$message2;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info("Starting WebRTCDataCollector");
              _context.prev = 1;
              _context.next = 4;
              return this.gatherIceCandidates();
            case 4:
              candidates = _context.sent;
              this.sendData(candidates);
              _context.next = 12;
              break;
            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](1);
              // NotSupportedError and similar are expected when WebRTC is blocked or unavailable
              // These should not be logged as errors since they're browser/privacy limitations
              if (_context.t0.name === 'NotSupportedError' || _context.t0.name === 'NotAllowedError' || (_error$message = _context.t0.message) !== null && _error$message !== void 0 && _error$message.includes('not supported') || (_error$message2 = _context.t0.message) !== null && _error$message2 !== void 0 && _error$message2.includes('not allowed')) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("WebRTC not available:", _context.t0.name, _context.t0.message);
              } else {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("WebRTC data collection failed:", _context.t0.name, _context.t0.message);
              }
              this.sendData([]);
            case 12:
              _context.prev = 12;
              this.cleanup();
              return _context.finish(12);
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[1, 8, 12, 15]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "gatherIceCandidates",
    value: function () {
      var _gatherIceCandidates = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", new Promise(function (resolve) {
                var candidates = [];
                var isGatheringComplete = false;
                _this2.peer = new RTCPeerConnection({
                  iceServers: [{
                    urls: "stun:stunserver.stunprotocol.org"
                  }, {
                    urls: "stun:stun.l.google.com:19302"
                  }]
                });

                // ICE candidate event handler
                _this2.peer.onicecandidate = function (event) {
                  if (event.candidate) {
                    var x = event.candidate;
                    candidates.push({
                      address: String(x.address),
                      port: String(x.port),
                      tcpType: String(x.tcpType),
                      type: String(x.type),
                      protocol: String(x.protocol),
                      url: String(x.url),
                      relatedAddress: String(x.relatedAddress),
                      relatedPort: String(x.relatedPort),
                      candidate: String(x.candidate),
                      sdpMid: String(x.sdpMid),
                      sdpMLineIndex: String(x.sdpMLineIndex)
                    });
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("ICE candidate found: ".concat(x.type, " ").concat(x.protocol, " ").concat(x.address, ":").concat(x.port));
                  } else {
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("ICE candidate gathering complete - no more candidates");
                    isGatheringComplete = true;
                    resolve(candidates);
                  }
                };

                // ICE candidate error
                _this2.peer.onicecandidateerror = function (ev) {
                  _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("ICE candidate error:", ev.errorText, ev.errorCode);
                  // Continue gathering despite errors
                };

                // ICE gathering state changes
                _this2.peer.onicegatheringstatechange = function () {
                  var _this2$peer, _this2$peer2;
                  _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("ICE gathering state changed:", (_this2$peer = _this2.peer) === null || _this2$peer === void 0 ? void 0 : _this2$peer.iceGatheringState);
                  if (((_this2$peer2 = _this2.peer) === null || _this2$peer2 === void 0 ? void 0 : _this2$peer2.iceGatheringState) === "complete") {
                    isGatheringComplete = true;
                    resolve(candidates);
                  }
                };

                // Fallback timeout
                _this2.timeoutId = setTimeout(function () {
                  if (!isGatheringComplete) {
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("ICE candidate gathering timed out after 900ms");
                    resolve(candidates);
                  }
                }, 900);

                // Create a data channel and offer to trigger ICE gathering
                _this2.peer.createDataChannel("data");
                _this2.peer.createOffer().then(function (offer) {
                  return _this2.peer.setLocalDescription(offer);
                })["catch"](function (error) {
                  // Expected failures when WebRTC is blocked/unsupported should not be errors
                  if (error.name === 'NotSupportedError' || error.name === 'NotAllowedError' || error.name === 'InvalidStateError') {
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("WebRTC offer creation not available:", error.name);
                  } else {
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Error creating WebRTC offer:", error.name, error.message);
                  }
                  resolve(candidates); // Resolve with whatever candidates we have
                });
              }));
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      function gatherIceCandidates() {
        return _gatherIceCandidates.apply(this, arguments);
      }
      return gatherIceCandidates;
    }()
  }, {
    key: "cleanup",
    value: function cleanup() {
      if (this.timeoutId) {
        clearTimeout(this.timeoutId);
        this.timeoutId = null;
      }
      if (this.peer) {
        try {
          this.peer.close();
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("WebRTC peer connection closed");
        } catch (error) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Error closing peer connection:", error);
        }
        this.peer = null;
      }
    }
  }, {
    key: "sendData",
    value: function sendData(candidates) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info("Sending ".concat(candidates.length, " ICE candidates"));
      this._dataQ.addToQueue('static_fields', ['webrtc', candidates], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return {
        configKey: 'isWebRTCFeature',
        isDefault: false,
        shouldRunPerContext: false,
        shouldRunPerSession: true,
        shouldRun: false,
        isFrameRelated: false,
        runInUns: false,
        runInSlave: true,
        runInLean: false,
        isRunning: false,
        instance: null
      };
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (WebRTCDataCollector);

/***/ }),

/***/ "./src/main/collectors/static/adblock/AdBlockSelectors.js":
/*!****************************************************************!*\
  !*** ./src/main/collectors/static/adblock/AdBlockSelectors.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   adblockSelectors: function() { return /* binding */ adblockSelectors; }
/* harmony export */ });
// Mapping of ad blocker filter lists to their CSS selectors.
var adblockSelectors = {
  abpIndo: ['#Iklan-Melayang', '#Kolom-Iklan-728', '#SidebarIklan-wrapper', 'a[title="7naga poker" i]', '[title="ALIENBOLA" i]'],
  abpvn: ['#quangcaomb', '.i-said-no-thing-can-stop-me-warning.dark', '.quangcao', '[href^="https://r88.vn/"]', '[href^="https://zbet.vn/"]'],
  adBlockFinland: ['.mainostila', '.sponsorit', '.ylamainos', 'a[href*="/clickthrgh.asp?"]', 'a[href^="https://app.readpeak.com/ads"]'],
  adBlockPersian: ['#navbar_notice_50', 'a[href^="http://g1.v.fwmrm.net/ad/"]', '.kadr', 'TABLE[width="140px"]', '#divAgahi'],
  adBlockWarningRemoval: ['#adblock_message', '.adblockInfo', '.deadblocker-header-bar', '.no-ad-reminder', '#AdBlockDialog'],
  adGuardAnnoyances: ['amp-embed[type="zen"]', '.hs-sosyal', '#cookieconsentdiv', 'div[class^="app_gdpr"]', '.as-oil'],
  adGuardBase: ['#ad-fullbanner2-billboard-outer', '.stky-ad-footer', '.BetterJsPopOverlay', '#ad_300X250', '#bannerfloat22'],
  adGuardChinese: ['#piao_div_0[style*="width:140px;"]', 'a[href*=".ttz5.cn"]', 'a[href*=".yabovip2027.com/"]', '.tm3all2h4b', '#duilian_left'],
  adGuardFrench: ['#anAdScGp300x25', 'a[href*=".kfiopkln.com/"]', 'a[href^="https://jsecoin.com/o/?"]', 'a[href^="https://www.clickadu.com/?"]', '.bandeauClosePub'],
  adGuardGerman: ['.banneritemwerbung_head_1', '.boxstartwerbung', '.werbung3', 'a[href^="http://www.eis.de/index.phtml?refid="]', 'a[href^="https://www.tipico.com/?affiliateId="]'],
  adGuardJapanese: ['#kauli_yad_1', '.adArticleSidetile', '.ads_entrymore', 'a[href^="http://ad2.trafficgate.net/"]', 'a[href^="http://www.rssad.jp/"]'],
  adGuardMobile: ['amp-auto-ads', '#mgid_iframe', '.amp_ad', 'amp-sticky-ad', '.plugin-blogroll'],
  adGuardRussian: ['a[href^="https://ya-distrib.ru/r/"]', 'a[href^="https://ad.letmeads.com/"]', '.reclama', 'div[id^="smi2adblock"]', 'div[id^="AdFox_banner_"]'],
  adGuardSocial: ['a[href^="//www.stumbleupon.com/submit?url="]', 'a[href^="//telegram.me/share/url?"]', '.etsy-tweet', '#inlineShare', '.popup-social'],
  adGuardSpanishPortuguese: ['#barraPublicidade', '#Publicidade', '#publiEspecial', '#queTooltip', '[href^="http://ads.glispa.com/"]'],
  adGuardTrackingProtection: ['amp-embed[type="taboola"]', '#qoo-counter', 'a[href^="http://click.hotlog.ru/"]', 'a[href^="http://hitcounter.ru/top/stat.php"]', 'a[href^="http://top.mail.ru/jump"]'],
  adGuardTurkish: ['#backkapat', '#reklami', 'a[href^="http://adserv.ontek.com.tr/"]', 'a[href^="http://izlenzi.com/campaign/"]', 'a[href^="http://www.installads.net/"]'],
  bulgarian: ['td#freenet_table_ads', '#newAd', '#ea_intext_div', '.lapni-pop-over', '#xenium_hot_offers'],
  easyList: ['#adlabelheader', '#anAdScGame300x250', '#adTakeOverLeft', '#ad_LargeRec01', '#adundergame'],
  easyListChina: ['a[href*=".wensixuetang.com/"]', 'A[href*="/hth107.com/"]', '.appguide-wrap[onclick*="bcebos.com"]', '.frontpageAdvM', '#taotaole'],
  easyListCookie: ['#Button_Cookie', '#CWCookie', '#CookieCon', '#DGPR', '#PnlCookie'],
  easyListCzechSlovak: ['#onlajny-stickers', '#reklamni-box', '.reklama-megaboard', '.sklik', '[id^="sklikReklama"]'],
  easyListDutch: ['#advertentie', '#vipAdmarktBannerBlock', '.adstekst', 'a[href^="http://adserver.webads.nl/adclick/"]', '#semilo-lrectangle'],
  easyListGermany: ['#nativendo-hometop', 'a[href^="http://www.kontakt-vermittler.de/?wm="]', '#gwerbung', 'a[href^="https://marketing.net.brillen.de/"]', '.werbenbox'],
  easyListItaly: ['.box_adv_annunci', '.sb-box-pubbliredazionale', 'a[href^="http://affiliazioniads.snai.it/"]', 'a[href^="https://adserver.html.it/"]', 'a[href^="https://affiliazioniads.snai.it/"]'],
  easyListLithuania: ['.reklamos_tarpas', '.reklamos_nuorodos', 'img[alt="Reklaminis skydelis"]', 'img[alt="Dedikuoti.lt serveriai"]', 'img[alt="Hostingas Serveriai.lt"]'],
  estonian: ['A[href*="http://pay4results24.eu"]'],
  fanboyAnnoyances: ['#feedback-tab', '#taboola-below-article', '.feedburnerFeedBlock', '.widget-feedburner-counter', '[title="Subscribe to our blog"]'],
  fanboyAntiFacebook: ['.util-bar-module-firefly-visible'],
  fanboyEnhancedTrackers: ['.open.pushModal', '#issuem-leaky-paywall-articles-zero-remaining-nag', 'div[style*="box-shadow: rgb(136, 136, 136) 0px 0px 12px; color: "]', 'div[class$="-hide"][zoompage-fontsize][style="display: block;"]', '.BlockNag__Card'],
  fanboySocial: ['.td-tags-and-social-wrapper-box', '.twitterContainer', '.youtube-social', 'a[title^="Like us on Facebook"]', 'img[alt^="Share on Digg"]'],
  frellwitSwedish: ['a[href*="casinopro.se"][target="_blank"]', 'a[href*="doktor-se.onelink.me"]', 'article.category-samarbete', 'div.holidAds', 'ul.adsmodern'],
  greekAdBlock: ['A[href*="adman.otenet.gr/click?"]', 'A[href*="http://axiabanners.exodus.gr/"]', 'A[href*="http://interactive.forthnet.gr/click?"]', 'DIV.agores300', 'TABLE.advright'],
  hungarian: ['A[href*="ad.eval.hu"]', 'A[href*="ad.netmedia.hu"]', 'A[href*="daserver.ultraweb.hu"]', '#cemp_doboz', '.optimonk-iframe-container'],
  iDontCareAboutCookies: ['.alert-info[data-block-track*="CookieNotice"]', '.ModuleTemplateCookieIndicator', '.o--cookies--container', '.cookie-msg-info-container', '#cookies-policy-sticky'],
  icelandicAbp: ['A[href^="/framework/resources/forms/ads.aspx"]'],
  latvian: ['a[href="http://www.salidzini.lv/"][style="display: block; width: 120px; height: 40px; overflow: hidden; position: relative;"]', 'a[href="http://www.salidzini.lv/"][style="display: block; width: 88px; height: 31px; overflow: hidden; position: relative;"]'],
  listKr: ['a[href*="//kingtoon.slnk.kr"]', 'a[href*="//playdsb.com/kr"]', 'div.logly-lift-adz', 'div[data-widget_id="ml6EJ074"]', 'ins.daum_ddn_area'],
  listeAr: ['.geminiLB1Ad', '.right-and-left-sponsers', 'a[href*=".aflam.info"]', 'a[href*="booraq.org"]', 'a[href*="dubizzle.com/ar/?utm_source="]'],
  listeFr: ['a[href^="http://promo.vador.com/"]', '#adcontainer_recherche', 'a[href*="weborama.fr/fcgi-bin/"]', '.site-pub-interstitiel', 'div[id^="crt-"][data-criteo-id]'],
  officialPolish: ['#ceneo-placeholder-ceneo-12', '[href^="https://aff.sendhub.pl/"]', 'a[href^="http://advmanager.techfun.pl/redirect/"]', 'a[href^="http://www.trizer.pl/?utm_source"]', 'div#skapiec_ad'],
  ro: ['a[href^="//afftrk.altex.ro/Counter/Click"]', 'a[href^="/magazin/"]', 'a[href^="https://blackfridaysales.ro/trk/shop/"]', 'a[href^="https://event.2performant.com/events/click"]', 'a[href^="https://l.profitshare.ro/"]'],
  ruAd: ['a[href*="//febrare.ru/"]', 'a[href*="//utimg.ru/"]', 'a[href*="://chikidiki.ru"]', '#pgeldiz', '.yandex-rtb-block'],
  thaiAds: ['a[href*=macau-uta-popup]', '#ads-google-middle_rectangle-group', '.ads300s', '.bumq', '.img-kosana'],
  webAnnoyancesUltralist: ['#mod-social-share-2', '#social-tools', '.ctpl-fullbanner', '.zergnet-recommend', '.yt.btn-link.btn-md.btn']
};

/***/ }),

/***/ "./src/main/collectors/static/adblock/AdblockerListsCollector.js":
/*!***********************************************************************!*\
  !*** ./src/main/collectors/static/adblock/AdblockerListsCollector.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AdblockerListsCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _AdBlockSelectors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdBlockSelectors */ "./src/main/collectors/static/adblock/AdBlockSelectors.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isAdblockerListsFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var AdblockerListsCollector = /*#__PURE__*/function (_DataCollector) {
  function AdblockerListsCollector(dataQ) {
    var _this;
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    _classCallCheck(this, AdblockerListsCollector);
    _this = _callSuper(this, AdblockerListsCollector);
    _this._dataQueue = dataQ;
    _this.debug = options.debug || false;
    return _this;
  }

  /**
   * Starts the ad blocker lists detection feature.
   * Waits for the page to fully load and then delays execution
   * to allow the ad blocker to hide/remove elements.
   */
  _inherits(AdblockerListsCollector, _DataCollector);
  return _createClass(AdblockerListsCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var activeLists;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Starting ad blocker lists detection");
              _context.prev = 1;
              _context.next = 4;
              return this.detectActiveAdblockLists();
            case 4:
              activeLists = _context.sent;
              //Sending it as array to enable extension in future versions if someone wants to add more lists.
              this._sendData([activeLists]);
              _context.next = 11;
              break;
            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error detecting ad blocker lists:", _context.t0);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[1, 8]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops the feature.
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      // No cleanup necessary in this version.
    }

    /**
     * Determines if detection can run.
     * @returns {boolean}
     */
  }, {
    key: "canRunDetection",
    value: function canRunDetection() {
      return true; // We assume the DOM is ready here.
    }
  }, {
    key: "_sendData",
    value: function _sendData(activeLists) {
      this._dataQueue.addToQueue('static_fields', ['adblock_lists', activeLists], false);
    }

    /**
     * Detects which ad blocker filter lists are active.
     * Each filter list is active if at least 50% of its selectors are blocked.
     *
     * @returns {Promise<string[]>} A promise that resolves to an array of active filter list names.
     */
  }, {
    key: "detectActiveAdblockLists",
    value: (function () {
      var _detectActiveAdblockLists = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _ref, allSelectors, blockedSelectors, activeLists, _i, _Object$entries, _Object$entries$_i, filterName, selectors, blockedCount, _iterator, _step, selector, finalList;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              // Gather all selectors from all filter lists.
              allSelectors = (_ref = []).concat.apply(_ref, _toConsumableArray(Object.values(_AdBlockSelectors__WEBPACK_IMPORTED_MODULE_2__.adblockSelectors))); // Get the set of blocked selectors inside an iframe.
              _context2.next = 4;
              return this.getBlockedSelectors(allSelectors);
            case 4:
              blockedSelectors = _context2.sent;
              activeLists = []; // Check each filter list.
              for (_i = 0, _Object$entries = Object.entries(_AdBlockSelectors__WEBPACK_IMPORTED_MODULE_2__.adblockSelectors); _i < _Object$entries.length; _i++) {
                _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), filterName = _Object$entries$_i[0], selectors = _Object$entries$_i[1];
                blockedCount = 0;
                _iterator = _createForOfIteratorHelper(selectors);
                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    selector = _step.value;
                    if (blockedSelectors.has(selector)) {
                      blockedCount++;
                      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace("Selector \"".concat(selector, "\" is blocked for filter \"").concat(filterName, "\"."));
                    } else {
                      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace("Selector \"".concat(selector, "\" is not blocked for filter \"").concat(filterName, "\"."));
                    }
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
                if (blockedCount >= 2) {
                  activeLists.push(filterName);
                  _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].trace("Filter \"".concat(filterName, "\" is considered active."));
                }
              }
              finalList = activeLists.sort();
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Active ad blocker lists: " + finalList);
              return _context2.abrupt("return", finalList);
            case 12:
              _context2.prev = 12;
              _context2.t0 = _context2["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error in detectActiveAdblockLists:", _context2.t0);
              return _context2.abrupt("return", []);
            case 16:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 12]]);
      }));
      function detectActiveAdblockLists() {
        return _detectActiveAdblockLists.apply(this, arguments);
      }
      return detectActiveAdblockLists;
    }()
    /**
     * Creates a hidden iframe, runs the detection logic inside it,
     * and returns a set of selectors that have been blocked.
     *
     * @param {string[]} selectors - An array of CSS selectors.
     * @returns {Promise<Set<string>>} A promise that resolves to a set of blocked selectors.
     */
    )
  }, {
    key: "getBlockedSelectors",
    value: (function () {
      var _getBlockedSelectors = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(selectors) {
        var iframe, d, body, root, elements, blockedSelectors, i, element, holder, _i2;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              // Create a hidden iframe.
              iframe = document.createElement("iframe");
              iframe.style.position = 'absolute';
              iframe.style.width = '0';
              iframe.style.height = '0';
              iframe.style.opacity = '0';
              document.body.appendChild(iframe);
              _context3.prev = 6;
              // Access the iframe's document.
              d = iframe.contentDocument || iframe.contentWindow.document; // Ensure the iframe has a body.
              if (!d.body) {
                body = d.createElement("body");
                d.documentElement.appendChild(body);
              }

              // Create a container for dummy elements.
              root = d.createElement("div");
              elements = new Array(selectors.length);
              blockedSelectors = new Set(); // Create dummy elements for each selector.
              for (i = 0; i < selectors.length; i++) {
                element = this.selectorToElement(selectors[i], d);
                holder = d.createElement("div"); // Protects from effects of sibling selectors.
                holder.appendChild(element);
                root.appendChild(holder);
                elements[i] = element;
              }
              d.body.appendChild(root);

              // Wait 200ms to let the ad blocker hide/remove the elements.
              _context3.next = 16;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 200);
              });
            case 16:
              // Check which elements are blocked (using offsetParent).
              for (_i2 = 0; _i2 < selectors.length; _i2++) {
                if (!elements[_i2].offsetParent) {
                  blockedSelectors.add(selectors[_i2]);
                }
              }
              return _context3.abrupt("return", blockedSelectors);
            case 20:
              _context3.prev = 20;
              _context3.t0 = _context3["catch"](6);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Error in getBlockedSelectors:", _context3.t0);
              return _context3.abrupt("return", new Set());
            case 24:
              _context3.prev = 24;
              // Clean up
              if (iframe.parentNode) {
                iframe.parentNode.removeChild(iframe);
              }
              return _context3.finish(24);
            case 27:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[6, 20, 24, 27]]);
      }));
      function getBlockedSelectors(_x) {
        return _getBlockedSelectors.apply(this, arguments);
      }
      return getBlockedSelectors;
    }()
    /**
     * Creates a DOM element that matches the given selector.
     * Only single element selectors are supported (without operators like space, +, >, etc).
     *
     * @param {string} selector - The CSS selector.
     * @param {Document} [d=document] - The document in which to create the element.
     * @returns {HTMLElement} The created element.
     */
    )
  }, {
    key: "selectorToElement",
    value: function selectorToElement(selector) {
      var d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      var _this$parseSimpleCssS = this.parseSimpleCssSelector(selector),
        _this$parseSimpleCssS2 = _slicedToArray(_this$parseSimpleCssS, 2),
        tag = _this$parseSimpleCssS2[0],
        attributes = _this$parseSimpleCssS2[1];
      var element = d.createElement(tag || "div");
      for (var name in attributes) {
        if (attributes.hasOwnProperty(name)) {
          element.setAttribute(name, attributes[name].join(" "));
        }
      }
      return element;
    }

    /**
     * Parses a CSS selector into a tag name with HTML attributes.
     * Only single element selectors are supported (without operators like space, +, >, etc).
     *
     * Multiple values can be returned for each attribute.
     *
     * @param {string} selector - The CSS selector.
     * @returns {[string, Object]} An array where the first item is the tag name and the second is an attributes object.
     */
  }, {
    key: "parseSimpleCssSelector",
    value: function parseSimpleCssSelector(selector) {
      var tagMatch = /^\s*([a-z-]*)(.*)$/i.exec(selector);
      if (!tagMatch) {
        var _errorMessage = "Unexpected syntax '".concat(selector, "'");
        throw new Error(_errorMessage);
      }
      var tag = tagMatch[1] || undefined;
      var attributes = {};
      var partsRegex = /([.:#][\w-]+|\[.+?\])/gi;
      var addAttribute = function addAttribute(name, value) {
        if (!attributes[name]) {
          attributes[name] = [];
        }
        attributes[name].push(value);
      };
      var match;
      while ((match = partsRegex.exec(tagMatch[2])) !== null) {
        var part = match[0];
        switch (part[0]) {
          case ".":
            addAttribute("class", part.slice(1));
            break;
          case "#":
            addAttribute("id", part.slice(1));
            break;
          case "[":
            {
              var attributeMatch = /^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(part);
              if (attributeMatch) {
                addAttribute(attributeMatch[1], attributeMatch[4] || attributeMatch[5] || "");
              } else {
                throw new Error(errorMessage);
              }
            }
            break;
          default:
            throw new Error(errorMessage);
        }
      }
      return [tag, attributes];
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/cpu/ArchitectureDetectorService.js":
/*!***********************************************************************!*\
  !*** ./src/main/collectors/static/cpu/ArchitectureDetectorService.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var ArchitectureDetectorService = /*#__PURE__*/function () {
  /**
   * @param {Object} logger - Logger instance for error logging
   * @param {Object} typedArrayFactory - Factory for creating typed arrays (for testing)
   */
  function ArchitectureDetectorService() {
    var logger = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var typedArrayFactory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, ArchitectureDetectorService);
    this._logger = logger;
    this._typedArrayFactory = typedArrayFactory || {
      createFloat32Array: function createFloat32Array(length) {
        return new Float32Array(length);
      },
      createUint8Array: function createUint8Array(buffer) {
        return new Uint8Array(buffer);
      },
      createUint32Array: function createUint32Array(array) {
        return new Uint32Array(array);
      },
      createBigInt64Array: function createBigInt64Array(length) {
        return new BigInt64Array(length);
      }
    };
  }

  /**
   * Detects CPU architecture using multiple methods for better reliability
   * 1. NaN sign bit behavior (IEEE 754)
   * 2. Pointer size detection
   * 3. Platform-specific indicators
   */
  return _createClass(ArchitectureDetectorService, [{
    key: "_getNaNSignByte",
    value: function _getNaNSignByte() {
      try {
        var f = this._typedArrayFactory.createFloat32Array(1);
        var u8 = this._typedArrayFactory.createUint8Array(f.buffer);
        f[0] = Infinity;
        f[0] = f[0] - f[0]; // NOSONAR: Intentional NaN creation for architecture detection

        // Check byte order and get the correct byte for sign bit
        // IEEE 754: sign bit is the most significant bit
        var isLittleEndian = this._typedArrayFactory.createUint8Array(this._typedArrayFactory.createUint32Array([0x12345678]).buffer)[0] === 0x78;
        return isLittleEndian ? u8[3] : u8[0];
      } catch (error) {
        if (this._logger) {
          this._logger.debug('ArchitectureDetectorService - Error getting NaN sign byte:', error);
        }
        return undefined;
      }
    }

    /**
     * Detects pointer size to help distinguish between 32-bit and 64-bit architectures
     */
  }, {
    key: "_getPointerSize",
    value: function _getPointerSize() {
      try {
        // Check if we can create a 64-bit typed array (indicates 64-bit support)
        this._typedArrayFactory.createBigInt64Array(1);
        return 64;
      } catch (error) {
        return 32;
      }
    }

    /**
     * Detects endianness of the system
     */
  }, {
    key: "_getEndianness",
    value: function _getEndianness() {
      try {
        return this._typedArrayFactory.createUint8Array(this._typedArrayFactory.createUint32Array([0x12345678]).buffer)[0] === 0x78;
      } catch (error) {
        if (this._logger) {
          this._logger.debug('ArchitectureDetectorService - Error detecting endianness:', error);
        }
        return undefined;
      }
    }

    /**
     * Detects CPU architecture using multiple detection methods
     * @returns {Promise<Object>} Object containing test values
     */
  }, {
    key: "detectArchitecture",
    value: (function () {
      var _detectArchitecture = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var signByte, pointerSize, isLittleEndian;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              signByte = this._getNaNSignByte();
              pointerSize = this._getPointerSize();
              isLittleEndian = this._getEndianness();
              return _context.abrupt("return", {
                signByte: signByte,
                pointerSize: pointerSize,
                isLittleEndian: isLittleEndian
              });
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              if (this._logger) {
                this._logger.debug('ArchitectureDetectorService - Error detecting architecture:', _context.t0);
              }
              return _context.abrupt("return", {
                signByte: undefined,
                pointerSize: undefined,
                isLittleEndian: undefined,
                error: _context.t0.message
              });
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 7]]);
      }));
      function detectArchitecture() {
        return _detectArchitecture.apply(this, arguments);
      }
      return detectArchitecture;
    }())
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (ArchitectureDetectorService);

/***/ }),

/***/ "./src/main/collectors/static/cpu/CPUCollector.js":
/*!********************************************************!*\
  !*** ./src/main/collectors/static/cpu/CPUCollector.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _ArchitectureDetectorService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ArchitectureDetectorService */ "./src/main/collectors/static/cpu/ArchitectureDetectorService.js");
/* harmony import */ var _CoreEstimatorService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CoreEstimatorService */ "./src/main/collectors/static/cpu/CoreEstimatorService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




var featureSettings = {
  configKey: 'isCPUFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var CPUDataCollector = /*#__PURE__*/function (_DataCollector) {
  function CPUDataCollector(dataQ) {
    var _this;
    _classCallCheck(this, CPUDataCollector);
    _this = _callSuper(this, CPUDataCollector);
    _this._dataQ = dataQ;
    return _this;
  }

  /**
   * Detects CPU architecture using the dedicated service
   * @returns {Promise<Object>} Object containing architecture test values
   */
  _inherits(CPUDataCollector, _DataCollector);
  return _createClass(CPUDataCollector, [{
    key: "detectArchitecture",
    value: (function () {
      var _detectArchitecture = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var detector;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              detector = new _ArchitectureDetectorService__WEBPACK_IMPORTED_MODULE_2__["default"]();
              _context.next = 4;
              return detector.detectArchitecture();
            case 4:
              return _context.abrupt("return", _context.sent);
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('CPUDataCollector - Error detecting architecture:', _context.t0);
              return _context.abrupt("return", {
                signByte: undefined,
                pointerSize: undefined,
                isLittleEndian: undefined,
                error: _context.t0.message
              });
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 7]]);
      }));
      function detectArchitecture() {
        return _detectArchitecture.apply(this, arguments);
      }
      return detectArchitecture;
    }()
    /**
     * Detects number of available cores using the dedicated service
     * @returns {Promise<number>} Number of available cores
     */
    )
  }, {
    key: "detectAvailableCores",
    value: (function () {
      var _detectAvailableCores = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var estimator;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              estimator = new _CoreEstimatorService__WEBPACK_IMPORTED_MODULE_3__["default"]();
              _context2.next = 4;
              return estimator.getCoreCount();
            case 4:
              return _context2.abrupt("return", _context2.sent);
            case 7:
              _context2.prev = 7;
              _context2.t0 = _context2["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('CPUDataCollector - Error detecting available cores:', _context2.t0);
              return _context2.abrupt("return", 1);
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[0, 7]]);
      }));
      function detectAvailableCores() {
        return _detectAvailableCores.apply(this, arguments);
      }
      return detectAvailableCores;
    }())
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _yield$Promise$all, _yield$Promise$all2, architectureData, availableCores, cpuData;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('CPUDataCollector - Starting CPU data collection');
              _context3.prev = 1;
              _context3.next = 4;
              return Promise.all([this.detectArchitecture(), this.detectAvailableCores()]);
            case 4:
              _yield$Promise$all = _context3.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);
              architectureData = _yield$Promise$all2[0];
              availableCores = _yield$Promise$all2[1];
              cpuData = {
                architecture: architectureData,
                availableCores: availableCores
              };
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('CPUDataCollector - CPU Data collected: ' + JSON.stringify(cpuData));
              this.sendData(cpuData);
              _context3.next = 16;
              break;
            case 13:
              _context3.prev = 13;
              _context3.t0 = _context3["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('CPUDataCollector - Error during data collection:', _context3.t0);
            case 16:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[1, 13]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "sendData",
    value: function sendData(cpuData) {
      this._dataQ.addToQueue('static_fields', ['cpu', cpuData], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (CPUDataCollector);

/***/ }),

/***/ "./src/main/collectors/static/cpu/CoreEstimatorService.js":
/*!****************************************************************!*\
  !*** ./src/main/collectors/static/cpu/CoreEstimatorService.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var SAMPLES = 20;
var WORKLOAD = 0x400000;
var T_TABLE = {
  1: 63.66,
  2: 9.925,
  3: 5.841,
  4: 4.604,
  5: 4.032,
  6: 3.707,
  7: 3.499,
  8: 3.355,
  9: 3.25,
  10: 3.169,
  11: 3.106,
  12: 3.055,
  13: 3.012,
  14: 2.977,
  15: 2.947,
  16: 2.921,
  17: 2.898,
  18: 2.878,
  19: 2.861,
  20: 2.845,
  21: 2.831,
  22: 2.819,
  23: 2.807,
  24: 2.797,
  25: 2.787,
  26: 2.779,
  27: 2.771,
  28: 2.763,
  29: 2.756,
  30: 2.75,
  32: 2.738,
  34: 2.728,
  36: 2.719,
  38: 2.712,
  40: 2.704,
  42: 2.698,
  44: 2.692,
  46: 2.687,
  48: 2.682,
  50: 2.678,
  55: 2.668,
  60: 2.66,
  65: 2.654,
  70: 2.648,
  80: 2.639,
  100: 2.626,
  150: 2.609,
  200: 2.601
};
var CoreEstimatorService = /*#__PURE__*/function () {
  function CoreEstimatorService() {
    _classCallCheck(this, CoreEstimatorService);
    this.performance = window.performance || Date;
    if (!this.performance.now) {
      this.performance.now = this.performance.webkitNow ? this.performance.webkitNow : function () {
        return +new Date();
      };
    }
    var workerCode = "\"use strict\";self.onmessage=function(e){for(var n=e.data;n;)n--;self.postMessage(null)};";
    try {
      var blob = new Blob([workerCode], {
        type: 'application/javascript'
      });
      this.workloadUrl = URL.createObjectURL(blob);
    } catch (e) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('CoreEstimatorService - Cannot create blob worker');
      this.workloadUrl = '';
    }
  }
  return _createClass(CoreEstimatorService, [{
    key: "getCoreCount",
    value: function getCoreCount() {
      var _this = this;
      return new Promise(function (resolve) {
        try {
          if (typeof Worker === 'undefined' || !_this.workloadUrl) {
            return resolve(1);
          }
          var workers = [];
          var control;
          var controldata = [];
          _this._iterate(function (workerSize, report) {
            _this._measure(workers, workerSize, SAMPLES, function (data) {
              if (workerSize === 1) {
                Array.prototype.push.apply(controldata, data);
                control = _this._analyse(controldata);
                report(true);
              } else {
                var group = _this._analyse(data);
                var gv_gs = group.uvariance / group.size;
                var cv_cs = control.uvariance / control.size;
                var tscore = (group.mean - control.mean) / Math.sqrt(gv_gs + cv_cs);
                var freedom = Math.pow(gv_gs + cv_cs, 2) / (Math.pow(group.uvariance, 2) / (Math.pow(group.size, 2) * (group.size - 1)) + Math.pow(control.uvariance, 2) / (Math.pow(control.size, 2) * (control.size - 1)));
                report(_this._accept(tscore, freedom));
              }
            });
          }, function (cores) {
            workers.forEach(function (w) {
              return w.terminate();
            });
            URL.revokeObjectURL(_this.workloadUrl);
            resolve(cores);
          });
        } catch (error) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('CoreEstimatorService - Error in getCoreCount:', error);
          resolve(1);
        }
      });
    }
  }, {
    key: "_measure",
    value: function _measure(workers, workerSize, sampleSize, callback) {
      var _this2 = this;
      var samples = [];
      for (var i = workers.length; i < workerSize; i++) {
        workers.push(new Worker(this.workloadUrl));
      }
      this._loop(function (_repeat) {
        var begin,
          left = workerSize;
        for (var _i = 0; _i < workerSize; _i++) {
          workers[_i].onmessage = function () {
            left--;
            if (!left) {
              sampleSize--;
              samples.push(_this2.performance.now() - begin);
              if (sampleSize) {
                _repeat();
              } else {
                callback(samples);
              }
            }
          };
        }
        for (var _i2 = 0; _i2 < workerSize; _i2++) {
          workers[_i2].postMessage(WORKLOAD);
        }
        begin = _this2.performance.now();
      });
    }
  }, {
    key: "_loop",
    value: function _loop(body) {
      (function next() {
        body(next);
      })();
    }
  }, {
    key: "_iterate",
    value: function _iterate(test, answer) {
      var min = 1,
        max = Infinity;
      var _repeat2 = function repeat(cores) {
        test(1, function () {
          test(cores, function (pass) {
            if (pass) {
              min = cores;
              _repeat2(2 * cores);
            } else {
              max = cores;
              if (min === 1) {
                return answer(min);
              }
              _search(min * 3 / 2, min / 4);
            }
          });
        });
      };
      var _search = function search(center, pivot) {
        test(1, function () {
          test(center, function (pass) {
            if (pass) {
              min = center;
              center += pivot;
            } else {
              max = center;
              center -= pivot;
            }
            if (max - min === 1) {
              return answer(min);
            }
            if (!pivot) {
              return answer(max - 1);
            }
            _search(center, pivot >> 1);
          });
        });
      };
      _repeat2(2);
    }
  }, {
    key: "_analyse",
    value: function _analyse(data) {
      var len = data.length;
      if (!len) return null;
      var min = Infinity,
        max = -Infinity,
        sum = 0,
        sum_squared_datum = 0;
      for (var i = 0; i < len; i++) {
        var datum = data[i];
        if (datum < min) min = datum;
        if (datum > max) max = datum;
        sum += datum;
        sum_squared_datum += Math.pow(datum, 2);
      }
      var mean = sum / len;
      var mean_squared = Math.pow(mean, 2);
      var unbiased_variance = 0;
      if (len > 1) {
        unbiased_variance = (sum_squared_datum - len * mean_squared) / (len - 1);
      }
      return {
        size: len,
        mean: mean,
        uvariance: unbiased_variance
      };
    }
  }, {
    key: "_accept",
    value: function _accept(tscore, freedom) {
      var keys = Object.keys(T_TABLE);
      var key_low = keys.reduce(function (p, c) {
        return freedom < c ? p : c;
      });
      var key_high = keys.reduce(function (p, c) {
        return freedom > c ? p : c;
      });
      var span = key_high - key_low;
      var critical = this._linear(T_TABLE[key_low], T_TABLE[key_high], (freedom - key_low) / span);
      return tscore < critical;
    }
  }, {
    key: "_linear",
    value: function _linear(a, b, t) {
      return a + (b - a) * t;
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (CoreEstimatorService);

/***/ }),

/***/ "./src/main/collectors/static/extensions/dom/BrowserExtensionsDomCollector.js":
/*!************************************************************************************!*\
  !*** ./src/main/collectors/static/extensions/dom/BrowserExtensionsDomCollector.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserExtensionsDomCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _RegularExtensionsScanner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RegularExtensionsScanner */ "./src/main/collectors/static/extensions/dom/RegularExtensionsScanner.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isBrowserExtensionsFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * Improved BrowserExtensionsDomCollector with better error handling and performance
 */
var BrowserExtensionsDomCollector = /*#__PURE__*/function (_DataCollector) {
  function BrowserExtensionsDomCollector(configurationRepository, utils, domUtils, dataQueue) {
    var _this;
    var regularExtensionsScanner = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
    _classCallCheck(this, BrowserExtensionsDomCollector);
    _this = _callSuper(this, BrowserExtensionsDomCollector);
    _this._configurationRepository = configurationRepository;
    _this._domUtils = domUtils;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._regularExtensionsScanner = regularExtensionsScanner || new _RegularExtensionsScanner__WEBPACK_IMPORTED_MODULE_2__["default"](window, document);
    return _this;
  }

  /**
   * Start the extension detection feature
   */
  _inherits(BrowserExtensionsDomCollector, _DataCollector);
  return _createClass(BrowserExtensionsDomCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var regularExtensions;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this._regularExtensionsScanner.scan();
            case 3:
              regularExtensions = _context.sent;
              if (regularExtensions.length > 0) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("[BrowserExtensionsDomCollector] Detected browser extensions: ".concat(regularExtensions.join(', ')));
                this._sendData(regularExtensions);
              } else {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('[BrowserExtensionsDomCollector] No browser extensions detected');
                this._sendData([]);
              }
              _context.next = 11;
              break;
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("[BrowserExtensionsDomCollector] Failed to detect browser extensions: ".concat(_context.t0.message));
              this._sendData([]);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 7]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Send the detected extensions data to the queue
     * @param {Array} extensionsList - List of detected extension names
     */
    )
  }, {
    key: "_sendData",
    value: function _sendData(extensionsList) {
      this._dataQueue.addToQueue('static_fields', ['browser_extensions', ["v1", extensionsList]], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/extensions/dom/RegularExtensionsScanner.js":
/*!*******************************************************************************!*\
  !*** ./src/main/collectors/static/extensions/dom/RegularExtensionsScanner.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ RegularExtensionsScanner; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }


/**
 * Extension definition with improved structure
 */
var ExtensionDefinition = /*#__PURE__*/_createClass(function ExtensionDefinition(name, detection) {
  _classCallCheck(this, ExtensionDefinition);
  this.name = name;
  this.detection = detection;
});
/**
 * Improved extension scanner with better organization and error handling
 */
var RegularExtensionsScanner = /*#__PURE__*/function () {
  function RegularExtensionsScanner(window, document) {
    _classCallCheck(this, RegularExtensionsScanner);
    this._window = window;
    this._document = document;
    this.extensions = this._initializeExtensions();
    this._detectionCache = new Map();
  }

  /**
   * Initialize all extension definitions
   * @returns {ExtensionDefinition[]} List of extension definitions
   */
  return _createClass(RegularExtensionsScanner, [{
    key: "_initializeExtensions",
    value: function _initializeExtensions() {
      return [
      //  Ad Blockers
      new ExtensionDefinition("Ad Blocker", this._detectAdBlocker.bind(this)),
      //  Password Managers
      new ExtensionDefinition("LastPass", this._detectLastPass.bind(this)), new ExtensionDefinition("1Password", this._detect1Password.bind(this)),
      //  Crypto Wallet Extensions
      new ExtensionDefinition("MetaMask", this._detectMetaMask.bind(this)), new ExtensionDefinition("Coinbase Wallet", this._detectCoinbaseWallet.bind(this)), new ExtensionDefinition("WalletConnect Wallet", this._detectWalletConnect.bind(this)), new ExtensionDefinition("Trust Wallet", this._detectTrustWallet.bind(this)), new ExtensionDefinition("Phantom Wallet", this._detectPhantomWallet.bind(this)), new ExtensionDefinition("Binance Wallet", this._detectBinanceWallet.bind(this)), new ExtensionDefinition("Brave Wallet", this._detectBraveWallet.bind(this)), new ExtensionDefinition("Apple Pay", this._detectApplePay.bind(this)), new ExtensionDefinition("Google Pay", this._detectGooglePay.bind(this)),
      //  Developer Tools
      new ExtensionDefinition("React Developer Tools", this._detectReactDevTools.bind(this)), new ExtensionDefinition("Vue.js DevTools", this._detectVueDevTools.bind(this)), new ExtensionDefinition("Redux DevTools", this._detectReduxDevTools.bind(this)), new ExtensionDefinition("Angular DevTools", this._detectAngularDevTools.bind(this)), new ExtensionDefinition("Svelte DevTools", this._detectSvelteDevTools.bind(this)),
      //  Grammar & Writing Extensions
      new ExtensionDefinition("Grammarly", this._detectGrammarly.bind(this)),
      //  Dark Mode Extensions
      new ExtensionDefinition("Dark Reader", this._detectDarkReader.bind(this)), new ExtensionDefinition("Super Dark Mode", this._detectSuperDarkMode.bind(this)), new ExtensionDefinition("Adobe Acrobat", this._detectAdobeAcrobat.bind(this))];
    }

    /**
     * Helper method to safely detect an extension with caching
     * @param {ExtensionDefinition} extension - The extension to detect
     * @returns {Promise<boolean>} - Whether the extension was detected
     */
  }, {
    key: "detectExtension",
    value: (function () {
      var _detectExtension = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(extension) {
        var result;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this._detectionCache.has(extension.name)) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", this._detectionCache.get(extension.name));
            case 2:
              _context.prev = 2;
              _context.next = 5;
              return extension.detection();
            case 5:
              result = _context.sent;
              // Cache the result
              this._detectionCache.set(extension.name, result);
              return _context.abrupt("return", result);
            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](2);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Error detecting ".concat(extension.name, ": ").concat(_context.t0.message));
              return _context.abrupt("return", false);
            case 14:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[2, 10]]);
      }));
      function detectExtension(_x) {
        return _detectExtension.apply(this, arguments);
      }
      return detectExtension;
    }()
    /**
     * Scan for all extensions with improved performance
     * @returns {Promise<Array>} - List of detected extension names
     */
    )
  }, {
    key: "scan",
    value: (function () {
      var _scan = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this = this;
        var detectionPromises, results;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              // Wait for extensions to initialize
              // await new Promise(resolve => setTimeout(resolve, 3000));
              // Run detections in parallel with improved error handling
              detectionPromises = this.extensions.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ext) {
                  var detected;
                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.prev = 0;
                        _context2.next = 3;
                        return _this.detectExtension(ext);
                      case 3:
                        detected = _context2.sent;
                        return _context2.abrupt("return", {
                          name: ext.name,
                          detected: detected
                        });
                      case 7:
                        _context2.prev = 7;
                        _context2.t0 = _context2["catch"](0);
                        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Failed to detect ".concat(ext.name, ": ").concat(_context2.t0.message));
                        return _context2.abrupt("return", {
                          name: ext.name,
                          detected: false
                        });
                      case 11:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2, null, [[0, 7]]);
                }));
                return function (_x2) {
                  return _ref.apply(this, arguments);
                };
              }());
              _context3.next = 3;
              return Promise.all(detectionPromises);
            case 3:
              results = _context3.sent;
              return _context3.abrupt("return", results.filter(function (ext) {
                return ext.detected;
              }).map(function (ext) {
                return ext.name;
              }));
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function scan() {
        return _scan.apply(this, arguments);
      }
      return scan;
    }() // Individual detection methods with improved reliability
    )
  }, {
    key: "_detectAdBlocker",
    value: function () {
      var _detectAdBlocker2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var bait, computedStyle, isBlocked;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              // Create a bait element with common ad-related class names
              bait = this._document.createElement("div");
              bait.className = "pub_300x250 ad_unit adsbox";
              bait.style.cssText = "height:50px;width:50px;position:absolute;left:-9999px;top:-9999px;z-index:-1;opacity:0;display:block;";
              this._document.body.appendChild(bait);

              // Get computed styles and dimensions
              computedStyle = this._window.getComputedStyle(bait);
              isBlocked = computedStyle.display === "none" || computedStyle.visibility === "hidden" || bait.offsetHeight === 0 || bait.offsetWidth === 0;
              this._document.body.removeChild(bait);
              return _context4.abrupt("return", isBlocked);
            case 11:
              _context4.prev = 11;
              _context4.t0 = _context4["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Ad blocker detection error: ".concat(_context4.t0.message));
              return _context4.abrupt("return", false);
            case 15:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[0, 11]]);
      }));
      function _detectAdBlocker() {
        return _detectAdBlocker2.apply(this, arguments);
      }
      return _detectAdBlocker;
    }()
  }, {
    key: "_detectLastPass",
    value: function () {
      var _detectLastPass2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              return _context5.abrupt("return", this._document.querySelectorAll('[data-lastpass-icon-root]').length > 0);
            case 1:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function _detectLastPass() {
        return _detectLastPass2.apply(this, arguments);
      }
      return _detectLastPass;
    }()
  }, {
    key: "_detect1Password",
    value: function () {
      var _detect1Password2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var _JSON$stringify;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              return _context6.abrupt("return", ((_JSON$stringify = JSON.stringify(this._window._sentryDebugIds)) === null || _JSON$stringify === void 0 ? void 0 : _JSON$stringify.includes("aeblfdkhhhdcdjpifhhbdiojplfjncoa")) || !!this._document.querySelector(".onepassword-fill-button"));
            case 1:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function _detect1Password() {
        return _detect1Password2.apply(this, arguments);
      }
      return _detect1Password;
    }()
  }, {
    key: "_detectMetaMask",
    value: function () {
      var _detectMetaMask2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              return _context7.abrupt("return", !!this._window.ethereum && this._window.ethereum.isMetaMask);
            case 1:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function _detectMetaMask() {
        return _detectMetaMask2.apply(this, arguments);
      }
      return _detectMetaMask;
    }()
  }, {
    key: "_detectCoinbaseWallet",
    value: function () {
      var _detectCoinbaseWallet2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              return _context8.abrupt("return", !!this._window.ethereum && this._window.ethereum.isCoinbaseWallet);
            case 1:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function _detectCoinbaseWallet() {
        return _detectCoinbaseWallet2.apply(this, arguments);
      }
      return _detectCoinbaseWallet;
    }()
  }, {
    key: "_detectWalletConnect",
    value: function () {
      var _detectWalletConnect2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              return _context9.abrupt("return", !!this._window.ethereum && this._window.ethereum.isWalletConnect);
            case 1:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function _detectWalletConnect() {
        return _detectWalletConnect2.apply(this, arguments);
      }
      return _detectWalletConnect;
    }()
  }, {
    key: "_detectTrustWallet",
    value: function () {
      var _detectTrustWallet2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {
        return _regeneratorRuntime().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              return _context10.abrupt("return", !!this._window.ethereum && this._window.ethereum.isTrust);
            case 1:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function _detectTrustWallet() {
        return _detectTrustWallet2.apply(this, arguments);
      }
      return _detectTrustWallet;
    }()
  }, {
    key: "_detectPhantomWallet",
    value: function () {
      var _detectPhantomWallet2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {
        return _regeneratorRuntime().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              return _context11.abrupt("return", !!this._window.solana && this._window.solana.isPhantom);
            case 1:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function _detectPhantomWallet() {
        return _detectPhantomWallet2.apply(this, arguments);
      }
      return _detectPhantomWallet;
    }()
  }, {
    key: "_detectBinanceWallet",
    value: function () {
      var _detectBinanceWallet2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
        return _regeneratorRuntime().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              return _context12.abrupt("return", !!this._window.BinanceChain && this._window.BinanceChain.isBinanceChain === true);
            case 1:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this);
      }));
      function _detectBinanceWallet() {
        return _detectBinanceWallet2.apply(this, arguments);
      }
      return _detectBinanceWallet;
    }()
  }, {
    key: "_detectBraveWallet",
    value: function () {
      var _detectBraveWallet2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {
        return _regeneratorRuntime().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              return _context13.abrupt("return", !!(this._window.navigator.brave && this._window.navigator.brave.isBrave));
            case 1:
            case "end":
              return _context13.stop();
          }
        }, _callee13, this);
      }));
      function _detectBraveWallet() {
        return _detectBraveWallet2.apply(this, arguments);
      }
      return _detectBraveWallet;
    }()
  }, {
    key: "_detectApplePay",
    value: function () {
      var _detectApplePay2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
        return _regeneratorRuntime().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              _context14.t0 = !!this._window.ApplePaySession && typeof this._window.ApplePaySession.canMakePayments === "function";
              if (!_context14.t0) {
                _context14.next = 5;
                break;
              }
              _context14.next = 4;
              return this._window.ApplePaySession.canMakePayments();
            case 4:
              _context14.t0 = _context14.sent;
            case 5:
              return _context14.abrupt("return", _context14.t0);
            case 6:
            case "end":
              return _context14.stop();
          }
        }, _callee14, this);
      }));
      function _detectApplePay() {
        return _detectApplePay2.apply(this, arguments);
      }
      return _detectApplePay;
    }()
  }, {
    key: "_detectGooglePay",
    value: function () {
      var _detectGooglePay2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {
        return _regeneratorRuntime().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              return _context15.abrupt("return", !!(this._window.google && this._window.google.payments && this._window.google.payments.api));
            case 1:
            case "end":
              return _context15.stop();
          }
        }, _callee15, this);
      }));
      function _detectGooglePay() {
        return _detectGooglePay2.apply(this, arguments);
      }
      return _detectGooglePay;
    }()
  }, {
    key: "_detectReactDevTools",
    value: function () {
      var _detectReactDevTools2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16() {
        return _regeneratorRuntime().wrap(function _callee16$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              return _context16.abrupt("return", !!this._window.__REACT_DEVTOOLS_GLOBAL_HOOK__);
            case 1:
            case "end":
              return _context16.stop();
          }
        }, _callee16, this);
      }));
      function _detectReactDevTools() {
        return _detectReactDevTools2.apply(this, arguments);
      }
      return _detectReactDevTools;
    }()
  }, {
    key: "_detectVueDevTools",
    value: function () {
      var _detectVueDevTools2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {
        return _regeneratorRuntime().wrap(function _callee17$(_context17) {
          while (1) switch (_context17.prev = _context17.next) {
            case 0:
              return _context17.abrupt("return", !!this._window.__VUE_DEVTOOLS_GLOBAL_HOOK__);
            case 1:
            case "end":
              return _context17.stop();
          }
        }, _callee17, this);
      }));
      function _detectVueDevTools() {
        return _detectVueDevTools2.apply(this, arguments);
      }
      return _detectVueDevTools;
    }()
  }, {
    key: "_detectReduxDevTools",
    value: function () {
      var _detectReduxDevTools2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {
        return _regeneratorRuntime().wrap(function _callee18$(_context18) {
          while (1) switch (_context18.prev = _context18.next) {
            case 0:
              return _context18.abrupt("return", !!this._window.__REDUX_DEVTOOLS_EXTENSION__);
            case 1:
            case "end":
              return _context18.stop();
          }
        }, _callee18, this);
      }));
      function _detectReduxDevTools() {
        return _detectReduxDevTools2.apply(this, arguments);
      }
      return _detectReduxDevTools;
    }()
  }, {
    key: "_detectAngularDevTools",
    value: function () {
      var _detectAngularDevTools2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {
        return _regeneratorRuntime().wrap(function _callee19$(_context19) {
          while (1) switch (_context19.prev = _context19.next) {
            case 0:
              return _context19.abrupt("return", !!this._window.ng);
            case 1:
            case "end":
              return _context19.stop();
          }
        }, _callee19, this);
      }));
      function _detectAngularDevTools() {
        return _detectAngularDevTools2.apply(this, arguments);
      }
      return _detectAngularDevTools;
    }()
  }, {
    key: "_detectSvelteDevTools",
    value: function () {
      var _detectSvelteDevTools2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {
        return _regeneratorRuntime().wrap(function _callee20$(_context20) {
          while (1) switch (_context20.prev = _context20.next) {
            case 0:
              return _context20.abrupt("return", !!this._window.__SVELTE_DEVTOOLS_GLOBAL_HOOK__);
            case 1:
            case "end":
              return _context20.stop();
          }
        }, _callee20, this);
      }));
      function _detectSvelteDevTools() {
        return _detectSvelteDevTools2.apply(this, arguments);
      }
      return _detectSvelteDevTools;
    }()
  }, {
    key: "_detectGrammarly",
    value: function () {
      var _detectGrammarly2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {
        var _this2 = this;
        var grammarlySelectors;
        return _regeneratorRuntime().wrap(function _callee21$(_context21) {
          while (1) switch (_context21.prev = _context21.next) {
            case 0:
              grammarlySelectors = ["grammarly-extension", "grammarly-desktop-integration", "grammarly-mirror", "grammarly-popups", "grammarly-extension-vbars", "grammarly-extension-vbar-cad", "grammarly-extension-vbars-feedback-form"];
              return _context21.abrupt("return", grammarlySelectors.some(function (selector) {
                return _this2._document.querySelector(selector) !== null;
              }));
            case 2:
            case "end":
              return _context21.stop();
          }
        }, _callee21);
      }));
      function _detectGrammarly() {
        return _detectGrammarly2.apply(this, arguments);
      }
      return _detectGrammarly;
    }()
  }, {
    key: "_detectDarkReader",
    value: function () {
      var _detectDarkReader2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {
        return _regeneratorRuntime().wrap(function _callee22$(_context22) {
          while (1) switch (_context22.prev = _context22.next) {
            case 0:
              return _context22.abrupt("return", this._detectDarkModeExtension(50));
            case 1:
            case "end":
              return _context22.stop();
          }
        }, _callee22, this);
      }));
      function _detectDarkReader() {
        return _detectDarkReader2.apply(this, arguments);
      }
      return _detectDarkReader;
    }()
  }, {
    key: "_detectSuperDarkMode",
    value: function () {
      var _detectSuperDarkMode2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {
        return _regeneratorRuntime().wrap(function _callee23$(_context23) {
          while (1) switch (_context23.prev = _context23.next) {
            case 0:
              return _context23.abrupt("return", this._detectDarkModeExtension(5));
            case 1:
            case "end":
              return _context23.stop();
          }
        }, _callee23, this);
      }));
      function _detectSuperDarkMode() {
        return _detectSuperDarkMode2.apply(this, arguments);
      }
      return _detectSuperDarkMode;
    }()
  }, {
    key: "_detectDarkModeExtension",
    value: function () {
      var _detectDarkModeExtension2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(brightnessThreshold) {
        var widget, computedStyle, bgColor, isDark;
        return _regeneratorRuntime().wrap(function _callee24$(_context24) {
          while (1) switch (_context24.prev = _context24.next) {
            case 0:
              _context24.prev = 0;
              // Create a widget with a white background
              widget = this._document.createElement("div");
              widget.style.cssText = "background-color:#ffffff;width:100px;height:100px;position:absolute;top:-9999px;left:-9999px;z-index:-1;visibility:hidden;opacity:0;";
              this._document.body.appendChild(widget);

              // Wait for dark mode extensions to apply their styles
              _context24.next = 6;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 500);
              });
            case 6:
              // Check the computed background color
              computedStyle = this._window.getComputedStyle(widget);
              bgColor = computedStyle.backgroundColor; // Clean up the widget
              this._document.body.removeChild(widget);

              // Determine if the background has been changed to a dark color
              isDark = bgColor === "rgb(0, 0, 0)" || function () {
                var match = bgColor.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
                if (match) {
                  var r = parseInt(match[1], 10);
                  var g = parseInt(match[2], 10);
                  var b = parseInt(match[3], 10);
                  // Calculate average brightness (0 = dark, 255 = bright)
                  var brightness = (r + g + b) / 3;
                  return brightness < brightnessThreshold;
                }
                return false;
              }();
              return _context24.abrupt("return", isDark);
            case 13:
              _context24.prev = 13;
              _context24.t0 = _context24["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Dark mode detection error: ".concat(_context24.t0.message));
              return _context24.abrupt("return", false);
            case 17:
            case "end":
              return _context24.stop();
          }
        }, _callee24, this, [[0, 13]]);
      }));
      function _detectDarkModeExtension(_x3) {
        return _detectDarkModeExtension2.apply(this, arguments);
      }
      return _detectDarkModeExtension;
    }()
  }, {
    key: "_detectAdobeAcrobat",
    value: function () {
      var _detectAdobeAcrobat2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {
        var _this$_window;
        return _regeneratorRuntime().wrap(function _callee25$(_context25) {
          while (1) switch (_context25.prev = _context25.next) {
            case 0:
              return _context25.abrupt("return", ((_this$_window = this._window) === null || _this$_window === void 0 || (_this$_window = _this$_window.sessionStorage) === null || _this$_window === void 0 ? void 0 : _this$_window.getItem("adobeCleanFontAdded")) === "true");
            case 1:
            case "end":
              return _context25.stop();
          }
        }, _callee25, this);
      }));
      function _detectAdobeAcrobat() {
        return _detectAdobeAcrobat2.apply(this, arguments);
      }
      return _detectAdobeAcrobat;
    }()
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlCollector.js":
/*!************************************************************************************!*\
  !*** ./src/main/collectors/static/extensions/url/BrowserExtensionsUrlCollector.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserExtensionsUrlCollector; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _BrowserExtensionsUrlScanner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BrowserExtensionsUrlScanner */ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlScanner.js");
/* harmony import */ var _contract_staticContracts_BrowserExtensionsUrlContract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../contract/staticContracts/BrowserExtensionsUrlContract */ "./src/main/contract/staticContracts/BrowserExtensionsUrlContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




var featureSettings = {
  configKey: 'isBrowserExtensionsUrlFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * BrowserExtensionsUrlCollector with URL-based detection
 */
var BrowserExtensionsUrlCollector = /*#__PURE__*/function (_DataCollector) {
  function BrowserExtensionsUrlCollector(configurationRepository, utils, domUtils, devDebugDataQueue) {
    var _this;
    var urlExtensionsScanner = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
    _classCallCheck(this, BrowserExtensionsUrlCollector);
    _this = _callSuper(this, BrowserExtensionsUrlCollector);
    _this._configurationRepository = configurationRepository;
    _this._domUtils = domUtils;
    _this._utils = utils;
    _this._devDebugDataQueue = devDebugDataQueue;
    _this._urlExtensionsScanner = urlExtensionsScanner || new _BrowserExtensionsUrlScanner__WEBPACK_IMPORTED_MODULE_2__["default"](window);
    return _this;
  }

  /**
   * Start the extension detection feature
   */
  _inherits(BrowserExtensionsUrlCollector, _DataCollector);
  return _createClass(BrowserExtensionsUrlCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var urlExtensions;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this._urlExtensionsScanner.scan();
            case 3:
              urlExtensions = _context.sent;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("[BrowserExtensionsUrlCollector] Browser extensions URL scan result: ".concat(JSON.stringify(urlExtensions)));
              this._sendData(urlExtensions);
              _context.next = 12;
              break;
            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("[BrowserExtensionsUrlCollector] Failed to detect browser extensions via URL: ".concat(_context.t0.message));
              this._sendData([]);
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 8]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Send the detected extensions data to the queue
     * @param {Array} extensionsList - List of detected extensions with id and timestamp
     */
    )
  }, {
    key: "_sendData",
    value: function _sendData(extensionsList) {
      var browserExtensionsUrlContract = new _contract_staticContracts_BrowserExtensionsUrlContract__WEBPACK_IMPORTED_MODULE_3__["default"](extensionsList);
      var contractData = browserExtensionsUrlContract.buildQueueMessage();
      this._devDebugDataQueue.addToQueue('static_fields', contractData, false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlConstants.js":
/*!************************************************************************************!*\
  !*** ./src/main/collectors/static/extensions/url/BrowserExtensionsUrlConstants.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DETECTION_RESPONSE_HEADERS: function() { return /* binding */ DETECTION_RESPONSE_HEADERS; },
/* harmony export */   getBrowserExtensionsUrls: function() { return /* binding */ getBrowserExtensionsUrls; }
/* harmony export */ });
/**
 * HTTP headers to extract from extension detection responses
 */
var DETECTION_RESPONSE_HEADERS = {
  LAST_MODIFIED: 'last-modified'
};

/**
 * Obfuscation key for URL encoding/decoding
 */
var OBFUSCATION_KEY = 0x42;

/**
 * Deobfuscates a string by base64 decoding, XOR decoding, and reversing
 * @param {string} obfuscated - The obfuscated string
 * @returns {string} The original string
 */
function _deobfuscate(obfuscated) {
  try {
    // Base64 decode
    var base64Decoded = atob(obfuscated);
    // Apply XOR with key to each character (XOR is reversible)
    var xorDecoded = base64Decoded.split('').map(function (_char) {
      return String.fromCharCode(_char.charCodeAt(0) ^ OBFUSCATION_KEY);
    }).join('');
    // Reverse the string
    return xorDecoded.split('').reverse().join('');
  } catch (error) {
    return '';
  }
}

/**
 * Obfuscated Google Docs Offline extension URL
 * Real URL: chrome-extension://ghbmnnjooekpmoecnnnilnnbdlolhkhi/page_embed_script.js
 */
var OBFUSCATED_GOOGLE_DOCS_OFFLINE_URL = "MShsNjIrMCExHSYnIC8nHSclIzJtKyopKi4tLiYgLCwuKywsLCEnLS8yKSctLSgsLC8gKiVtbXgsLSsxLCc2OidvJy8tMCoh";

/**
 * Obfuscated Adobe Acrobat extension URL
 * Real URL: chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/viewer.html
 */
var OBFUSCATED_ADOBE_ACROBAT_URL = "Li82KmwwJzUnKzRtKCMpLyYsKyQnLiEuJSEyKCMhMiArLCwsLyAsJisjJCdtbXgsLSsxLCc2OidvJy8tMCoh";

/**
 * Array of obfuscated browser extension URLs
 */
var OBFUSCATED_BROWSER_EXTENSIONS_URLS = [OBFUSCATED_GOOGLE_DOCS_OFFLINE_URL, OBFUSCATED_ADOBE_ACROBAT_URL];

/**
 * Returns the deobfuscated array of browser extension URLs to scan
 * @returns {string[]} Array of deobfuscated extension URLs
 */
function getBrowserExtensionsUrls() {
  return OBFUSCATED_BROWSER_EXTENSIONS_URLS.map(function (url) {
    return _deobfuscate(url);
  });
}

/***/ }),

/***/ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlScanner.js":
/*!**********************************************************************************!*\
  !*** ./src/main/collectors/static/extensions/url/BrowserExtensionsUrlScanner.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserExtensionsUrlScanner; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _BrowserExtensionsUrlConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BrowserExtensionsUrlConstants */ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlConstants.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * URL-based extension scanner that detects extensions by fetching their resources
 */
var BrowserExtensionsUrlScanner = /*#__PURE__*/function () {
  function BrowserExtensionsUrlScanner(window) {
    _classCallCheck(this, BrowserExtensionsUrlScanner);
    this._window = window;
    this.extensions = (0,_BrowserExtensionsUrlConstants__WEBPACK_IMPORTED_MODULE_1__.getBrowserExtensionsUrls)();
  }

  /**
   * Extract extension ID from extension URL
   * Extracts the ID from any protocol://id/path format
   * @param {string} url - The extension URL
   * @returns {string|null} - The extension ID or null if invalid format
   */
  return _createClass(BrowserExtensionsUrlScanner, [{
    key: "_extractExtensionId",
    value: function _extractExtensionId(url) {
      var match = url.match(/:\/\/([^\/]+)/);
      return match ? match[1] : null;
    }

    /**
     * Helper method to safely detect an extension by fetching its resource
     * @param {string} url - The extension URL to detect
     * @returns {Promise<{detected: boolean, id: string|null, timestamp: number|null}>} - Detection result with id and timestamp
     */
  }, {
    key: "detectExtension",
    value: (function () {
      var _detectExtension = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url) {
        var extensionId, response, detected, lastModified, timestamp, date, result, _result;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              extensionId = this._extractExtensionId(url);
              if (extensionId) {
                _context.next = 4;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[BrowserExtensionsUrlScanner] Invalid extension URL format: ".concat(url));
              return _context.abrupt("return", {
                detected: false,
                id: null,
                timestamp: null
              });
            case 4:
              _context.prev = 4;
              _context.next = 7;
              return fetch(url, {
                method: 'HEAD'
              });
            case 7:
              response = _context.sent;
              // If fetch succeeds (status 200-299), extension is likely installed
              detected = response.ok; // Extract last modified from response header and convert to timestamp
              lastModified = response.headers.get(_BrowserExtensionsUrlConstants__WEBPACK_IMPORTED_MODULE_1__.DETECTION_RESPONSE_HEADERS.LAST_MODIFIED);
              timestamp = null;
              if (lastModified) {
                date = new Date(lastModified);
                timestamp = isNaN(date.getTime()) ? null : date.getTime();
              }
              result = {
                detected: detected,
                id: extensionId,
                timestamp: timestamp
              };
              return _context.abrupt("return", result);
            case 16:
              _context.prev = 16;
              _context.t0 = _context["catch"](4);
              // Fetch will fail if extension is not installed or not in cache (CORS/network error)
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[BrowserExtensionsUrlScanner] Error detecting extension via URL ".concat(url, ": ").concat(_context.t0.message));
              _result = {
                detected: false,
                id: extensionId,
                timestamp: null
              };
              return _context.abrupt("return", _result);
            case 21:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[4, 16]]);
      }));
      function detectExtension(_x) {
        return _detectExtension.apply(this, arguments);
      }
      return detectExtension;
    }()
    /**
     * Scan for all extensions with improved performance
     * @returns {Promise<Array>} - List of detected extensions with id and timestamp (or null)
     */
    )
  }, {
    key: "scan",
    value: (function () {
      var _scan = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this = this;
        var detectionPromises, results;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              // Run detections in parallel with improved error handling
              detectionPromises = this.extensions.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url) {
                  var result;
                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.prev = 0;
                        _context2.next = 3;
                        return _this.detectExtension(url);
                      case 3:
                        result = _context2.sent;
                        return _context2.abrupt("return", result);
                      case 7:
                        _context2.prev = 7;
                        _context2.t0 = _context2["catch"](0);
                        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[BrowserExtensionsUrlScanner] Failed to detect extension via URL ".concat(url, ": ").concat(_context2.t0.message));
                        return _context2.abrupt("return", {
                          detected: false,
                          id: null,
                          timestamp: null
                        });
                      case 11:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2, null, [[0, 7]]);
                }));
                return function (_x2) {
                  return _ref.apply(this, arguments);
                };
              }());
              _context3.next = 3;
              return Promise.all(detectionPromises);
            case 3:
              results = _context3.sent;
              return _context3.abrupt("return", results.filter(function (result) {
                return result.detected && result.id !== null;
              }).map(function (result) {
                return {
                  id: result.id,
                  timestamp: result.timestamp
                };
              }));
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function scan() {
        return _scan.apply(this, arguments);
      }
      return scan;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/TypographyFrameUtils.js":
/*!*****************************************************************!*\
  !*** ./src/main/collectors/static/font/TypographyFrameUtils.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   boxFromRect: function() { return /* binding */ boxFromRect; },
/* harmony export */   createHiddenIframe: function() { return /* binding */ createHiddenIframe; },
/* harmony export */   ensureBody: function() { return /* binding */ ensureBody; },
/* harmony export */   measureInEphemeralIframe: function() { return /* binding */ measureInEphemeralIframe; },
/* harmony export */   nextFrame: function() { return /* binding */ nextFrame; },
/* harmony export */   quantizeBox: function() { return /* binding */ quantizeBox; },
/* harmony export */   waitFontsReady: function() { return /* binding */ waitFontsReady; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }

function createHiddenIframe(document) {
  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'cd__frame__tmp';
  var ifr = document.createElement('iframe');
  ifr.id = id;
  ifr.style.position = 'fixed';
  ifr.style.left = '0';
  ifr.style.top = '0';
  ifr.style.width = '0';
  ifr.style.height = '0';
  ifr.style.border = '0';
  ifr.style.opacity = '0';
  ifr.style.pointerEvents = 'none';
  ifr.setAttribute('aria-hidden', 'true');
  ifr.setAttribute('tabindex', '-1');
  try {
    ifr.setAttribute('inert', '');
  } catch (ex) {
    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('TypographyFrameUtils: failed to set inert attribute on iframe', ex);
  }
  ifr.srcdoc = '<!doctype html><meta charset="utf-8"><title>blank</title>';
  return ifr;
}
function ensureBody(doc) {
  if (!doc.body) {
    var body = doc.createElement('body');
    doc.documentElement.appendChild(body);
  }
}
function waitFontsReady(_x) {
  return _waitFontsReady.apply(this, arguments);
}
function _waitFontsReady() {
  _waitFontsReady = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(doc) {
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.prev = 0;
          if (!(doc.fonts && doc.fonts.ready && typeof doc.fonts.ready.then === 'function')) {
            _context.next = 4;
            break;
          }
          _context.next = 4;
          return doc.fonts.ready;
        case 4:
          _context.next = 9;
          break;
        case 6:
          _context.prev = 6;
          _context.t0 = _context["catch"](0);
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('TypographyFrameUtils: waiting for document.fonts.ready failed', _context.t0);
        case 9:
        case "end":
          return _context.stop();
      }
    }, _callee, null, [[0, 6]]);
  }));
  return _waitFontsReady.apply(this, arguments);
}
function nextFrame(win) {
  return new Promise(function (res) {
    return (win.requestAnimationFrame || win.setTimeout)(res, 16);
  });
}
function boxFromRect(r) {
  var fontFamily = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var width = r.width || 0;
  var height = r.height || 0;
  var left = r.left || 0;
  var top = r.top || 0;
  var right = 'right' in r ? r.right : left + width;
  var bottom = 'bottom' in r ? r.bottom : top + height;
  var x = 'x' in r ? r.x : left;
  var y = 'y' in r ? r.y : top;
  return {
    x: x,
    y: y,
    left: left,
    top: top,
    right: right,
    bottom: bottom,
    width: width,
    height: height,
    font: fontFamily || ''
  };
}
function quantizeBox(box) {
  var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.125;
  var shouldQuantize = Number.isFinite(step) && step > 0;
  var q = function q(v) {
    return typeof v === 'number' && shouldQuantize ? Math.round(v / step) * step : v;
  };
  return {
    x: q(box.x),
    y: q(box.y),
    left: q(box.left),
    top: q(box.top),
    right: q(box.right),
    bottom: q(box.bottom),
    width: q(box.width),
    height: q(box.height),
    font: box.font || ''
  };
}
function safeWaitFonts(_x2) {
  return _safeWaitFonts.apply(this, arguments);
}
function _safeWaitFonts() {
  _safeWaitFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(doc) {
    var _doc$fonts;
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          _context2.prev = 0;
          if (!((_doc$fonts = doc.fonts) !== null && _doc$fonts !== void 0 && (_doc$fonts = _doc$fonts.ready) !== null && _doc$fonts !== void 0 && _doc$fonts.then)) {
            _context2.next = 4;
            break;
          }
          _context2.next = 4;
          return doc.fonts.ready;
        case 4:
          _context2.next = 9;
          break;
        case 6:
          _context2.prev = 6;
          _context2.t0 = _context2["catch"](0);
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('TypographyFrameUtils: waiting for hostDocument.fonts.ready failed', _context2.t0);
        case 9:
        case "end":
          return _context2.stop();
      }
    }, _callee2, null, [[0, 6]]);
  }));
  return _safeWaitFonts.apply(this, arguments);
}
function attachAndLoadIframe(_x3, _x4) {
  return _attachAndLoadIframe.apply(this, arguments);
}
function _attachAndLoadIframe() {
  _attachAndLoadIframe = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(hostDocument, ifr) {
    var onLoad;
    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
      while (1) switch (_context3.prev = _context3.next) {
        case 0:
          onLoad = new Promise(function (resolve, reject) {
            var cleanup = function cleanup() {
              try {
                ifr.onload = null;
                ifr.onerror = null;
              } catch (ex) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('TypographyFrameUtils: iframe cleanup failed', ex);
              }
            };
            ifr.onload = function () {
              cleanup();
              resolve();
            };
            ifr.onerror = function (e) {
              cleanup();
              reject(e);
            };
          });
          (hostDocument.body || hostDocument.documentElement).appendChild(ifr);
          _context3.next = 4;
          return onLoad;
        case 4:
        case "end":
          return _context3.stop();
      }
    }, _callee3);
  }));
  return _attachAndLoadIframe.apply(this, arguments);
}
function getFrameContexts(ifr) {
  return {
    w: ifr.contentWindow,
    d: ifr.contentDocument
  };
}
function initNode(doc, win, buildNode) {
  ensureBody(doc);
  var node = buildNode({
    doc: doc,
    win: win
  });
  doc.body.appendChild(node);
  return node;
}
function isBoxValid(box) {
  return Number.isFinite(box.width) && box.width > 0 && Number.isFinite(box.height) && box.height > 0;
}
function withinTolerance(box, lastValid, absTolPx, relTol) {
  var dw = Math.abs(box.width - lastValid.width);
  var dh = Math.abs(box.height - lastValid.height);
  var tolW = Math.max(absTolPx, (box.width || 0) * relTol);
  var tolH = Math.max(absTolPx, (box.height || 0) * relTol);
  return dw <= tolW && dh <= tolH;
}
function measureBox(node, win) {
  var rect = node.getBoundingClientRect();
  var ff = win.getComputedStyle(node, null).getPropertyValue('font-family') || '';
  return boxFromRect(rect, ff);
}
function stabilizeMeasurements(_x5, _x6, _x7) {
  return _stabilizeMeasurements.apply(this, arguments);
}
function _stabilizeMeasurements() {
  _stabilizeMeasurements = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(node, win, _ref) {
    var maxFrames, minSamples, stableHitsTarget, absTolPx, relTol, validSamples, stableHits, lastValid, last, i, box;
    return _regeneratorRuntime().wrap(function _callee4$(_context4) {
      while (1) switch (_context4.prev = _context4.next) {
        case 0:
          maxFrames = _ref.maxFrames, minSamples = _ref.minSamples, stableHitsTarget = _ref.stableHitsTarget, absTolPx = _ref.absTolPx, relTol = _ref.relTol;
          validSamples = 0, stableHits = 0, lastValid = null, last = null;
          i = 0;
        case 3:
          if (!(i < maxFrames)) {
            _context4.next = 17;
            break;
          }
          _context4.next = 6;
          return nextFrame(win);
        case 6:
          box = measureBox(node, win);
          if (!isBoxValid(box)) {
            _context4.next = 13;
            break;
          }
          validSamples++;
          if (lastValid && withinTolerance(box, lastValid, absTolPx, relTol)) {
            stableHits++;
          } else {
            stableHits = 0;
          }
          lastValid = box;
          if (!(validSamples >= minSamples && stableHits >= stableHitsTarget)) {
            _context4.next = 13;
            break;
          }
          return _context4.abrupt("return", box);
        case 13:
          last = box;
        case 14:
          i++;
          _context4.next = 3;
          break;
        case 17:
          return _context4.abrupt("return", lastValid || last);
        case 18:
        case "end":
          return _context4.stop();
      }
    }, _callee4);
  }));
  return _stabilizeMeasurements.apply(this, arguments);
}
function safeRemove(el) {
  try {
    if (el) {
      el.remove();
    }
  } catch (ex) {
    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('TypographyFrameUtils: element.remove() failed', ex);
  }
}
function measureInEphemeralIframe(_x8) {
  return _measureInEphemeralIframe.apply(this, arguments);
}
function _measureInEphemeralIframe() {
  _measureInEphemeralIframe = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_ref2) {
    var hostWindow, hostDocument, frameId, buildNode, _ref2$maxFrames, maxFrames, _ref2$minSamples, minSamples, _ref2$stableHitsTarge, stableHitsTarget, _ref2$absTolPx, absTolPx, _ref2$relTol, relTol, _ref2$quantStep, quantStep, ifr, node, out, _getFrameContexts, w, d;
    return _regeneratorRuntime().wrap(function _callee5$(_context5) {
      while (1) switch (_context5.prev = _context5.next) {
        case 0:
          hostWindow = _ref2.hostWindow, hostDocument = _ref2.hostDocument, frameId = _ref2.frameId, buildNode = _ref2.buildNode, _ref2$maxFrames = _ref2.maxFrames, maxFrames = _ref2$maxFrames === void 0 ? 12 : _ref2$maxFrames, _ref2$minSamples = _ref2.minSamples, minSamples = _ref2$minSamples === void 0 ? 3 : _ref2$minSamples, _ref2$stableHitsTarge = _ref2.stableHitsTarget, stableHitsTarget = _ref2$stableHitsTarge === void 0 ? 2 : _ref2$stableHitsTarge, _ref2$absTolPx = _ref2.absTolPx, absTolPx = _ref2$absTolPx === void 0 ? 0.25 : _ref2$absTolPx, _ref2$relTol = _ref2.relTol, relTol = _ref2$relTol === void 0 ? 0.0005 : _ref2$relTol, _ref2$quantStep = _ref2.quantStep, quantStep = _ref2$quantStep === void 0 ? 0.125 : _ref2$quantStep;
          _context5.next = 3;
          return safeWaitFonts(hostDocument);
        case 3:
          ifr = createHiddenIframe(hostDocument, frameId);
          _context5.prev = 4;
          _context5.next = 7;
          return attachAndLoadIframe(hostDocument, ifr);
        case 7:
          _getFrameContexts = getFrameContexts(ifr), w = _getFrameContexts.w, d = _getFrameContexts.d;
          node = initNode(d, w, buildNode);
          _context5.next = 11;
          return waitFontsReady(d);
        case 11:
          _context5.next = 13;
          return stabilizeMeasurements(node, w, {
            maxFrames: maxFrames,
            minSamples: minSamples,
            stableHitsTarget: stableHitsTarget,
            absTolPx: absTolPx,
            relTol: relTol
          });
        case 13:
          out = _context5.sent;
          return _context5.abrupt("return", quantizeBox(out, quantStep));
        case 15:
          _context5.prev = 15;
          safeRemove(node);
          safeRemove(ifr);
          return _context5.finish(15);
        case 19:
        case "end":
          return _context5.stop();
      }
    }, _callee5, null, [[4,, 15, 19]]);
  }));
  return _measureInEphemeralIframe.apply(this, arguments);
}

/***/ }),

/***/ "./src/main/collectors/static/font/collection/FontCollectionFeature.js":
/*!*****************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/FontCollectionFeature.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontCollectionFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../contract/staticContracts/FontsDetectionContract */ "./src/main/contract/staticContracts/FontsDetectionContract.js");
/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/FontVersionType */ "./src/main/collectors/static/font/collection/types/FontVersionType.js");
/* harmony import */ var _FontCollector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./FontCollector */ "./src/main/collectors/static/font/collection/FontCollector.js");
/* harmony import */ var _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types/FontMigrationStage */ "./src/main/collectors/static/font/collection/types/FontMigrationStage.js");
/* harmony import */ var _FontsCache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./FontsCache */ "./src/main/collectors/static/font/collection/FontsCache.js");
/* harmony import */ var _FontsProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./FontsProvider */ "./src/main/collectors/static/font/collection/FontsProvider.js");
/* harmony import */ var _FontConfiguration__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./FontConfiguration */ "./src/main/collectors/static/font/collection/FontConfiguration.js");
/* harmony import */ var _v1_OldBatchFontsScanner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./v1/OldBatchFontsScanner */ "./src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js");
/* harmony import */ var _v1_OldOffloadFontsScanner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./v1/OldOffloadFontsScanner */ "./src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js");
/* harmony import */ var _v2_FontsScanner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./v2/FontsScanner */ "./src/main/collectors/static/font/collection/v2/FontsScanner.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }










//Scanners



var featureSettings = {
  configKey: 'isFonts',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * FontCollectionFeature
 *
 * Collects installed fonts using multiple detection strategies and manages the migration between different font collection versions.
 *
 * ## Detection Strategies:
 * - **Worker-based Detection**: Offloads font scanning to web workers for better performance and non-blocking execution.
 * 
 * ## Points To Know
 * - The amount of fonts on Safari is going to be higher than Chrome.
 * - The amount of fonts on old code is lower than the new code
 * - Old code had bug - OldOffLoadScanner provide 48 fonts - OldBatchScanner provides 45 fonts - it means different id for user
 * Update: we created remove duplicated fonts config so now it's the same amount of fonts
 * 
 * ## Resources
 * Background: https://biocatch.atlassian.net/wiki/spaces/~712020ea4044df5ae84c1db6c8150a825e5219/pages/edit-v2/5270142999?draftShareId=4672c69e-1654-4b31-800b-091a2b2c9df9
 * Migration Plan : https://biocatch.atlassian.net/wiki/pages/resumedraft.action?draftId=5298978821&draftShareId=e07d6273-5f3b-4dcd-b61f-38941df4f06e
 * Performance Measurements: https://biocatch.atlassian.net/wiki/spaces/~712020ea4044df5ae84c1db6c8150a825e5219/pages/5298815015/Fonts+Performance
 */
var FontCollectionFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * Constructor for FontCollectionFeature
   * @param {CDUtils} params.utils - Provides general utility methods.
   * @param {DOMUtils} params.domUtils - Handles DOM-related operations.
   * @param {DataQueue} params.dataQueue - Manages queuing and processing of font data.
   * @param {FontConfiguration} params.fontConfig - Provides configuration settings.
   * @param {FontCollector} [params.v1Collector=null] - Optional existing V1 collector.
   * @param {FontCollector} [params.v2Collector=null] - Optional existing V2 collector.
   * @param {FontTimingService} [params.fontTimingService=null] - Optional font timing service.
   * @throws {Error} If the font version is invalid or unsupported.
   */
  function FontCollectionFeature(_ref) {
    var _this;
    var utils = _ref.utils,
      domUtils = _ref.domUtils,
      dataQueue = _ref.dataQueue,
      fontConfig = _ref.fontConfig,
      _ref$v1Collector = _ref.v1Collector,
      v1Collector = _ref$v1Collector === void 0 ? null : _ref$v1Collector,
      _ref$v2Collector = _ref.v2Collector,
      v2Collector = _ref$v2Collector === void 0 ? null : _ref$v2Collector,
      _ref$fontTimingServic = _ref.fontTimingService,
      fontTimingService = _ref$fontTimingServic === void 0 ? null : _ref$fontTimingServic;
    _classCallCheck(this, FontCollectionFeature);
    _this = _callSuper(this, FontCollectionFeature);
    _this._logsTag = "[FONTS-COLLECTOR][MAIN]";
    _this._utils = utils;
    _this._domUtils = domUtils;
    _this._dataQueue = dataQueue;
    _this._fontConfig = fontConfig;
    _this._workerCommunicator = dataQueue._serverWorkerCommunicator;
    _this._v1Collector = v1Collector;
    _this._v2Collector = v2Collector;
    _this._fontTimingService = fontTimingService;
    return _this;
  }
  _inherits(FontCollectionFeature, _DataCollector);
  return _createClass(FontCollectionFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var fontCollectionConfig, migrationMode, collectedV1Fonts, _collectedV1Fonts, collectedV2Fonts, collectedV2FontsPhase2, collectedV1FontsPhase2, collectedV2FontsPhase3, _yield$Promise$all, _yield$Promise$all2, _collectedV1Fonts2, _collectedV2Fonts;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("".concat(this._logsTag, " Starting font feature."));

              // Ensures that the collectors are properly initialized with the correct configuration because config takes time to load.
              if (!this._v1Collector) {
                this._v1Collector = this._createFontCollector(_types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__["default"].VERSION1);
              }
              if (!this._v2Collector) {
                this._v2Collector = this._createFontCollector(_types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__["default"].VERSION2);
              }
              fontCollectionConfig = this._fontConfig.getFontCollectionConfig();
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("".concat(this._logsTag, " Font collection config: ").concat(JSON.stringify(fontCollectionConfig)));
              migrationMode = this._fontConfig.getMigrationMode(_types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].DUAL_COLLECTION_V1_PRIORITY);
              if (!(migrationMode === _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].V1_ONLY)) {
                _context.next = 12;
                break;
              }
              _context.next = 9;
              return this._v1Collector.collectFonts();
            case 9:
              collectedV1Fonts = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V1_ONLY, [collectedV1Fonts, null]);
              return _context.abrupt("return");
            case 12:
              if (!(migrationMode === _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].DUAL_COLLECTION_V1_PRIORITY)) {
                _context.next = 21;
                break;
              }
              _context.next = 15;
              return this._v1Collector.collectFonts();
            case 15:
              _collectedV1Fonts = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V1_ONLY, [_collectedV1Fonts, null]);
              _context.next = 19;
              return this._v2Collector.collectFonts();
            case 19:
              collectedV2Fonts = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V1_AND_V2, [_collectedV1Fonts, collectedV2Fonts]);
            case 21:
              if (!(migrationMode === _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].DUAL_COLLECTION_V2_PRIORITY)) {
                _context.next = 30;
                break;
              }
              _context.next = 24;
              return this._v2Collector.collectFonts();
            case 24:
              collectedV2FontsPhase2 = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V2_ONLY, [null, collectedV2FontsPhase2]);
              _context.next = 28;
              return this._v1Collector.collectFonts();
            case 28:
              collectedV1FontsPhase2 = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V1_AND_V2, [collectedV1FontsPhase2, collectedV2FontsPhase2]);
            case 30:
              if (!(migrationMode === _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].V2_ONLY)) {
                _context.next = 35;
                break;
              }
              _context.next = 33;
              return this._v2Collector.collectFonts();
            case 33:
              collectedV2FontsPhase3 = _context.sent;
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V2_ONLY, [null, collectedV2FontsPhase3]);
            case 35:
              if (!(migrationMode === _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_5__["default"].DUAL_COLLECTION_PARALLEL)) {
                _context.next = 43;
                break;
              }
              _context.next = 38;
              return Promise.all([this._v1Collector.collectFonts(), this._v2Collector.collectFonts()]);
            case 38:
              _yield$Promise$all = _context.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);
              _collectedV1Fonts2 = _yield$Promise$all2[0];
              _collectedV2Fonts = _yield$Promise$all2[1];
              // Then enqueue combined V1 and V2 fonts
              this._enqueueFontData(_contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontDataType.V1_AND_V2, [_collectedV1Fonts2, _collectedV2Fonts]);
            case 43:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      var _this$_v1Collector, _this$_v2Collector;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("".concat(this._logsTag, " Stopping font feature."));
      this._collectorHasStopped = true;
      (_this$_v1Collector = this._v1Collector) === null || _this$_v1Collector === void 0 || _this$_v1Collector.release();
      (_this$_v2Collector = this._v2Collector) === null || _this$_v2Collector === void 0 || _this$_v2Collector.release();
      this._v1Collector = null;
      this._v2Collector = null;
    }
  }, {
    key: "_enqueueFontData",
    value: function _enqueueFontData(dataType, fonts) {
      if (this._collectorHasStopped) return;
      if (!fonts) throw Error("IllegalState fonts undefined");
      var storedFontsMessage = new _contract_staticContracts_FontsDetectionContract__WEBPACK_IMPORTED_MODULE_2__.FontsDetectionContract(dataType, fonts).buildQueueMessage();
      this._dataQueue.addToQueue('static_fields', storedFontsMessage, false);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("".concat(this._logsTag, " Fonts enqueued: Data type: ").concat(dataType));
    }
  }, {
    key: "_createFontCollector",
    value: function _createFontCollector(fontVersion) {
      var fontScanner = this._getFontsScanner({
        domUtils: this._domUtils,
        fontVersion: fontVersion,
        workerCommunicator: this._workerCommunicator
      });

      // Create other dependencies
      var fontsProvider = new _FontsProvider__WEBPACK_IMPORTED_MODULE_7__["default"]();
      var fontsCache = new _FontsCache__WEBPACK_IMPORTED_MODULE_6__["default"](this._utils.StorageUtils);
      return new _FontCollector__WEBPACK_IMPORTED_MODULE_4__["default"]({
        fontVersion: fontVersion,
        utils: this._utils,
        fontConfig: this._fontConfig,
        fontScanner: fontScanner,
        fontsProvider: fontsProvider,
        fontsCache: fontsCache,
        fontTimingService: this._fontTimingService
      });
    }
  }, {
    key: "_getFontsScanner",
    value: function _getFontsScanner(_ref2) {
      var fontVersion = _ref2.fontVersion,
        domUtils = _ref2.domUtils,
        workerCommunicator = _ref2.workerCommunicator;
      // Handle legacy V1 scanners
      // Do not delete OldBatchFontsScanner, it is used for the old version of the font collection and changing it will cause to diff font list
      var v1Config = this._fontConfig.getV1ScannerConfig();
      if (fontVersion === _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__["default"].VERSION1) {
        if (v1Config.offloadFontsCollectionEnabled) {
          return new _v1_OldOffloadFontsScanner__WEBPACK_IMPORTED_MODULE_10__["default"](domUtils, v1Config.offloadFontsRemoveDuplicated);
        }
        return new _v1_OldBatchFontsScanner__WEBPACK_IMPORTED_MODULE_9__["default"](domUtils);
      }

      // Choose scanner based on detector type
      // Try worker scanner first (if workerCommunicator is provided)
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("".concat(this._logsTag, " Using worker scanner"));
      return new _v2_FontsScanner__WEBPACK_IMPORTED_MODULE_11__["default"]({
        workerCommunicator: workerCommunicator
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/font/collection/FontCollector.js":
/*!*********************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/FontCollector.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontCollector; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types/FontVersionType */ "./src/main/collectors/static/font/collection/types/FontVersionType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var FontCollector = /*#__PURE__*/function () {
  /**
   * Constructor for FontCollector
   * @param {Object} params - Constructor parameters
   * @param {CDUtils} params.utils - Provides general utility methods.
   * @param {FontConfiguration} params.fontConfig - Provides configuration settings.
   * @param {FontVersionType} params.fontVersion - Specifies the version of fonts to detect (use FontVersionType enum).
   * @param {Object} params.fontsProvider - Fonts provider instance.
   * @param {Object} params.fontsCache - Fonts cache instance.
   * @param {FontTimingService} [params.fontTimingService] - Optional font timing service for tracking scan performance.
   * @throws {Error} If required parameters are missing or the font version is invalid.
   */
  function FontCollector(_ref) {
    var fontVersion = _ref.fontVersion,
      utils = _ref.utils,
      fontConfig = _ref.fontConfig,
      fontScanner = _ref.fontScanner,
      fontsProvider = _ref.fontsProvider,
      fontsCache = _ref.fontsCache,
      fontTimingService = _ref.fontTimingService;
    _classCallCheck(this, FontCollector);
    if (!Object.values(_types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__["default"]).includes(fontVersion)) {
      throw new Error("Invalid font version type. Use one of: ".concat(Object.keys(_types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__["default"]).join(", ")));
    }
    if (!utils) throw new Error("CDUtils instance is required.");
    if (!fontConfig) throw new Error("FontConfiguration instance is required.");
    if (!fontScanner) throw new Error("FontScanner instance is required.");
    if (!fontsProvider) throw new Error("FontsProvider instance is required.");
    if (!fontsCache) throw new Error("FontsCache instance is required.");
    this._fontVersion = fontVersion;
    this._utils = utils;
    this._fontConfig = fontConfig;
    this._fontScanner = fontScanner;
    this._fontsProvider = fontsProvider;
    this._fontCache = fontsCache;
    this._fontTimingService = fontTimingService;
    this._collectorHasStopped = false;
    this._fontCacheExpiration = 24 * 60 * 60 * 1000; // 24 hours in milliseconds
    this._logsTag = "[FONTS-COLLECTOR][".concat(fontVersion, "]");
  }
  return _createClass(FontCollector, [{
    key: "collectFonts",
    value: function () {
      var _collectFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _cachedFontData$insta, _cachedFontData$scann;
        var cachedFontData, cachedFonts, lastCacheTimestamp, lastScanExpired, isCacheValid, _yield$this$_scanForI, installedFonts, scannedAt, scanTime, totalFontsScanned, totalFontsFound, fontsHash;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              // Log the initiation of the font collection process.
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Starting font collection.") + " | Font version: ".concat(this._fontVersion));

              // Retrieve cached font data based on the current font version.
              _context.next = 3;
              return this._fontCache.getStoredFonts(this._fontVersion);
            case 3:
              cachedFontData = _context.sent;
              cachedFonts = (_cachedFontData$insta = cachedFontData === null || cachedFontData === void 0 ? void 0 : cachedFontData.installedFonts) !== null && _cachedFontData$insta !== void 0 ? _cachedFontData$insta : cachedFontData; // Extract installed fonts from cache, or use the entire cache object.
              lastCacheTimestamp = (_cachedFontData$scann = cachedFontData === null || cachedFontData === void 0 ? void 0 : cachedFontData.scannedAt) !== null && _cachedFontData$scann !== void 0 ? _cachedFontData$scann : -1; // Extract the last scanned timestamp, defaulting to -1 if not available.
              // Log the retrieved cached fonts for debugging purposes.
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("".concat(this._logsTag, " Cached fonts retrieved: ").concat(JSON.stringify(cachedFonts)));
              _context.prev = 7;
              // Determine if the cached data is expired based on the last scanned timestamp.
              lastScanExpired = Date.now() - lastCacheTimestamp > this._fontCacheExpiration; // Validate the cache: it must exist, and not be expired.
              isCacheValid = cachedFonts && !lastScanExpired;
              if (!isCacheValid) {
                _context.next = 13;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Font collection complete using valid cache."));
              return _context.abrupt("return", cachedFonts);
            case 13:
              _context.next = 15;
              return this._scanForInstalledFonts();
            case 15:
              _yield$this$_scanForI = _context.sent;
              installedFonts = _yield$this$_scanForI.installedFonts;
              scannedAt = _yield$this$_scanForI.scannedAt;
              scanTime = _yield$this$_scanForI.scanTime;
              totalFontsScanned = _yield$this$_scanForI.totalFontsScanned;
              totalFontsFound = _yield$this$_scanForI.totalFontsFound;
              if (!this._collectorHasStopped) {
                _context.next = 23;
                break;
              }
              return _context.abrupt("return");
            case 23:
              // Log the detected fonts for debugging purposes.
              fontsHash = this._utils.getHash(JSON.stringify(installedFonts));
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("".concat(this._logsTag, " Detected fonts: ").concat(JSON.stringify(installedFonts), " | Hash: ").concat(fontsHash, " | Count: ").concat(totalFontsFound));

              // Save the newly scanned fonts to the cache for future use.
              _context.next = 27;
              return this._fontCache.saveFonts({
                installedFonts: installedFonts,
                scannedAt: scannedAt
              }, this._fontVersion);
            case 27:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("".concat(this._logsTag, " Font cache updated with new fonts."));

              // Enqueue the newly scanned font data for further processing.
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Font collection complete. Scan time: ").concat(scanTime, "ms. Total Fonts Scanned: ").concat(totalFontsScanned, " Total Installed Fonts: ").concat(installedFonts.length));
              return _context.abrupt("return", installedFonts);
            case 32:
              _context.prev = 32;
              _context.t0 = _context["catch"](7);
              // Log any errors that occur during the font collection process.
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("".concat(this._logsTag, " Error during font collection:"), _context.t0);
              // Return cached fonts if available, even if there was an error
              return _context.abrupt("return", cachedFonts || []);
            case 36:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[7, 32]]);
      }));
      function collectFonts() {
        return _collectFonts.apply(this, arguments);
      }
      return collectFonts;
    }()
  }, {
    key: "release",
    value: function release() {
      this._collectorHasStopped = true;
      this._fontScanner.release();
    }
  }, {
    key: "_scanForInstalledFonts",
    value: function () {
      var _scanForInstalledFonts2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var startTime, fontsToScan, ignoredFonts, scanConfig, installedFonts, _i, _Object$entries, _Object$entries$_i, fontFamily, fonts, cleanedFonts, result, endTime, scanTime, totalFontsScanned;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Starting font scanning process."));
              startTime = Date.now(); // Get the fonts to scan for the current font version
              fontsToScan = this._fontsProvider.getFontsByVersion(this._fontVersion); // Ignore fonts that can cause issues with the scanner
              ignoredFonts = this._fontConfig.getIgnoredFonts(); // Get the scanner configuration for the current font version
              scanConfig = this._fontConfig.getConfigByVersion(this._fontVersion);
              installedFonts = []; //Font V1 requires us to scan each font family separately. Font V2 scans all fonts at once.
              // Use a single scanner instance for all font families to avoid concurrent processing
              _i = 0, _Object$entries = Object.entries(fontsToScan);
            case 7:
              if (!(_i < _Object$entries.length)) {
                _context2.next = 17;
                break;
              }
              _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), fontFamily = _Object$entries$_i[0], fonts = _Object$entries$_i[1];
              // Filter out ignored fonts
              cleanedFonts = fonts.filter(function (font) {
                return !ignoredFonts.includes(font);
              }); // Scan the cleaned fonts
              _context2.next = 12;
              return this._fontScanner.scan({
                fonts: cleanedFonts,
                fontsFamily: fontFamily,
                fontsConfig: scanConfig
              });
            case 12:
              result = _context2.sent;
              installedFonts.push.apply(installedFonts, _toConsumableArray(result));
            case 14:
              _i++;
              _context2.next = 7;
              break;
            case 17:
              endTime = Date.now();
              scanTime = endTime - startTime; // Calculate total fonts to scan
              totalFontsScanned = Object.values(fontsToScan).reduce(function (sum, fonts) {
                return sum + fonts.length;
              }, 0); // Record timing data if font timing service is provided
              if (this._fontTimingService) {
                this._fontTimingService.recordFontScan({
                  scanTime: scanTime,
                  totalFontsScanned: totalFontsScanned,
                  totalFontsFound: installedFonts.length,
                  fontVersion: this._fontVersion,
                  scannedAt: endTime
                });
              }
              return _context2.abrupt("return", {
                installedFonts: installedFonts,
                scanTime: scanTime,
                scannedAt: endTime,
                totalFontsScanned: totalFontsScanned,
                totalFontsFound: installedFonts.length
              });
            case 22:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _scanForInstalledFonts() {
        return _scanForInstalledFonts2.apply(this, arguments);
      }
      return _scanForInstalledFonts;
    }()
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/collection/FontConfiguration.js":
/*!*************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/FontConfiguration.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FONT_COLLECTION_DEFAULT_CONFIG: function() { return /* binding */ FONT_COLLECTION_DEFAULT_CONFIG; },
/* harmony export */   "default": function() { return /* binding */ FontConfiguration; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/FontMigrationStage */ "./src/main/collectors/static/font/collection/types/FontMigrationStage.js");
/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/FontVersionType */ "./src/main/collectors/static/font/collection/types/FontVersionType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var FONT_COLLECTION_DEFAULT_CONFIG = {
  migrationMode: _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_2__["default"].V1_ONLY,
  v1: {
    offloadFontsCollectionEnabled: false,
    offloadFontsRemoveDuplicated: true
  },
  v2: {
    // undefined means use best available detector
    // we have to keep way to control detector type in any case of new browser limitations or some other limits
    detectorType: undefined,
    // can be undefined, 'canvas', 'native'

    fontsPerBatch: 100,
    delayBetweenBatchesMs: 0,
    adaptiveBatchEnabled: true,
    minFontsPerBatch: 100,
    maxFontsPerBatch: 1000,
    frameBudgetMs: 100,
    frameHistorySize: 3,
    ignoreFonts: ["STFangsong", "STHeiti", "STKaiti", "STXihei", "NanumGothic", "NanumMyeongjo", "Osaka", "Osaka-Mono", "YuppySC-Regular"]
  }
};

/**
 * Configuration manager for font collection settings
 */
var FontConfiguration = /*#__PURE__*/function () {
  function FontConfiguration(configurationRepository) {
    _classCallCheck(this, FontConfiguration);
    this._configurationRepository = configurationRepository;
    this._logsTag = "[FONTS-COLLECTOR][CONFIG-MANAGER]";
  }

  /**
   * Gets the V1 scanner configuration settings
   * @returns {Object} V1 scanner configuration
   */
  return _createClass(FontConfiguration, [{
    key: "getV1ScannerConfig",
    value: function getV1ScannerConfig() {
      var offloadFontsCollectionEnabled = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.offloadFontsCollectionEnabled);
      var offloadFontsRemoveDuplicated = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.offloadFontsRemoveDuplicated);
      return {
        offloadFontsCollectionEnabled: offloadFontsCollectionEnabled !== null && offloadFontsCollectionEnabled !== void 0 ? offloadFontsCollectionEnabled : FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsCollectionEnabled,
        offloadFontsRemoveDuplicated: offloadFontsRemoveDuplicated !== null && offloadFontsRemoveDuplicated !== void 0 ? offloadFontsRemoveDuplicated : FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsRemoveDuplicated
      };
    }

    /**
     * Gets the V2 scanner configuration settings
     * @returns {Object} V2 scanner configuration with detectorType support
     * @property {number} fontsPerBatch - Number of fonts to process per batch
     * @property {number} delayBetweenBatchesMs - Delay between batches in milliseconds
     * @property {boolean} adaptiveBatchEnabled - Whether adaptive batch processing is enabled
     * @property {number} minFontsPerBatch - Minimum fonts per batch for adaptive processing
     * @property {number} maxFontsPerBatch - Maximum fonts per batch for adaptive processing
     * @property {number} frameBudgetMs - Time budget per frame in milliseconds
     * @property {number} frameHistorySize - Number of frames to track for adaptive processing
     * @property {string|undefined} detectorType - Specific detector type ('native' or 'canvas') or undefined for best available
     */
  }, {
    key: "getV2ScannerConfig",
    value: function getV2ScannerConfig() {
      var _config$v2$detectorTy, _config$v, _config$v2$fontsPerBa, _config$v2, _config$v2$delayBetwe, _config$v3, _config$v2$adaptiveBa, _config$v4, _config$v2$minFontsPe, _config$v5, _config$v2$maxFontsPe, _config$v6, _config$v2$frameBudge, _config$v7, _config$v2$frameHisto, _config$v8;
      var config = this._getParsedFontCollectionConfig();
      return {
        detectorType: (_config$v2$detectorTy = config === null || config === void 0 || (_config$v = config.v2) === null || _config$v === void 0 ? void 0 : _config$v.detectorType) !== null && _config$v2$detectorTy !== void 0 ? _config$v2$detectorTy : FONT_COLLECTION_DEFAULT_CONFIG.v2.detectorType,
        fontsPerBatch: (_config$v2$fontsPerBa = config === null || config === void 0 || (_config$v2 = config.v2) === null || _config$v2 === void 0 ? void 0 : _config$v2.fontsPerBatch) !== null && _config$v2$fontsPerBa !== void 0 ? _config$v2$fontsPerBa : FONT_COLLECTION_DEFAULT_CONFIG.v2.fontsPerBatch,
        delayBetweenBatchesMs: (_config$v2$delayBetwe = config === null || config === void 0 || (_config$v3 = config.v2) === null || _config$v3 === void 0 ? void 0 : _config$v3.delayBetweenBatchesMs) !== null && _config$v2$delayBetwe !== void 0 ? _config$v2$delayBetwe : FONT_COLLECTION_DEFAULT_CONFIG.v2.delayBetweenBatchesMs,
        adaptiveBatchEnabled: (_config$v2$adaptiveBa = config === null || config === void 0 || (_config$v4 = config.v2) === null || _config$v4 === void 0 ? void 0 : _config$v4.adaptiveBatchEnabled) !== null && _config$v2$adaptiveBa !== void 0 ? _config$v2$adaptiveBa : FONT_COLLECTION_DEFAULT_CONFIG.v2.adaptiveBatchEnabled,
        minFontsPerBatch: (_config$v2$minFontsPe = config === null || config === void 0 || (_config$v5 = config.v2) === null || _config$v5 === void 0 ? void 0 : _config$v5.minFontsPerBatch) !== null && _config$v2$minFontsPe !== void 0 ? _config$v2$minFontsPe : FONT_COLLECTION_DEFAULT_CONFIG.v2.minFontsPerBatch,
        maxFontsPerBatch: (_config$v2$maxFontsPe = config === null || config === void 0 || (_config$v6 = config.v2) === null || _config$v6 === void 0 ? void 0 : _config$v6.maxFontsPerBatch) !== null && _config$v2$maxFontsPe !== void 0 ? _config$v2$maxFontsPe : FONT_COLLECTION_DEFAULT_CONFIG.v2.maxFontsPerBatch,
        frameBudgetMs: (_config$v2$frameBudge = config === null || config === void 0 || (_config$v7 = config.v2) === null || _config$v7 === void 0 ? void 0 : _config$v7.frameBudgetMs) !== null && _config$v2$frameBudge !== void 0 ? _config$v2$frameBudge : FONT_COLLECTION_DEFAULT_CONFIG.v2.frameBudgetMs,
        frameHistorySize: (_config$v2$frameHisto = config === null || config === void 0 || (_config$v8 = config.v2) === null || _config$v8 === void 0 ? void 0 : _config$v8.frameHistorySize) !== null && _config$v2$frameHisto !== void 0 ? _config$v2$frameHisto : FONT_COLLECTION_DEFAULT_CONFIG.v2.frameHistorySize
      };
    }

    /**
     * Gets the font collection configuration for migration and general settings
     * @returns {Object} Font collection configuration
     */
  }, {
    key: "getFontCollectionConfig",
    value: function getFontCollectionConfig() {
      return this._getParsedFontCollectionConfig();
    }

    /**
     * Gets the migration mode from configuration
     * @returns {string} Migration mode
     */
  }, {
    key: "getMigrationMode",
    value: function getMigrationMode(defaultMode) {
      var _this$_getParsedFontC;
      return (_this$_getParsedFontC = this._getParsedFontCollectionConfig().migrationMode) !== null && _this$_getParsedFontC !== void 0 ? _this$_getParsedFontC : defaultMode;
    }

    /**
     * Gets the detector type from V2 configuration
     * @returns {string|undefined} Detector type or undefined
     */
  }, {
    key: "getDetectorType",
    value: function getDetectorType() {
      var _this$_getParsedFontC2;
      return (_this$_getParsedFontC2 = this._getParsedFontCollectionConfig()) === null || _this$_getParsedFontC2 === void 0 || (_this$_getParsedFontC2 = _this$_getParsedFontC2.v2) === null || _this$_getParsedFontC2 === void 0 ? void 0 : _this$_getParsedFontC2.detectorType;
    }

    /**
     * Gets the list of fonts to ignore during font collection
     * @returns {Array<string>} Array of font names to ignore
     */
  }, {
    key: "getIgnoredFonts",
    value: function getIgnoredFonts() {
      var _config$v2$ignoreFont, _config$v9;
      var config = this._getParsedFontCollectionConfig();
      var serverIgnoreFonts = (_config$v2$ignoreFont = config === null || config === void 0 || (_config$v9 = config.v2) === null || _config$v9 === void 0 ? void 0 : _config$v9.ignoreFonts) !== null && _config$v2$ignoreFont !== void 0 ? _config$v2$ignoreFont : [];
      var defaultIgnoreFonts = FONT_COLLECTION_DEFAULT_CONFIG.v2.ignoreFonts;

      // Merge server and default ignore fonts, removing duplicates
      var mergedFonts = new Set([].concat(_toConsumableArray(serverIgnoreFonts), _toConsumableArray(defaultIgnoreFonts)));
      return Array.from(mergedFonts);
    }
  }, {
    key: "getConfigByVersion",
    value: function getConfigByVersion(version) {
      if (version === _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__["default"].VERSION1) {
        return this.getV1ScannerConfig();
      } else if (version === _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__["default"].VERSION2) {
        return this.getV2ScannerConfig();
      }
    }

    /**
     * Parses and returns the font collection configuration
     * @private
     * @returns {Object} Parsed font collection configuration
     */
  }, {
    key: "_getParsedFontCollectionConfig",
    value: function _getParsedFontCollectionConfig() {
      try {
        return JSON.parse(this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.fontCollection) || "{}");
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("".concat(this._logsTag, " Failed to parse font collection config: ").concat(error.message));
        return {};
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/collection/FontsCache.js":
/*!******************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/FontsCache.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontsCache; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types/FontVersionType */ "./src/main/collectors/static/font/collection/types/FontVersionType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var FontsCache = /*#__PURE__*/function () {
  /**
   * Constructor for FontsCache
   * @param {Object} storageUtils - Utility for handling storage operations.
   * @param {Object} versionKeys - Mapping of font versions to storage keys.
   */
  function FontsCache(storageUtils) {
    _classCallCheck(this, FontsCache);
    this._storageUtils = storageUtils;
    this._versionKeys = _defineProperty(_defineProperty({}, _types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__["default"].VERSION1, 'detectedFonts_2.1.5'), _types_FontVersionType__WEBPACK_IMPORTED_MODULE_1__["default"].VERSION2, 'detectedFonts_3');
  }

  /**
   * Saves detected fonts to local storage based on the font version.
   * @param {string} fonts - Comma-separated string of fonts to save.
   * @param {FontVersionType} fontVersion - The font version to determine the storage key.
   */
  return _createClass(FontsCache, [{
    key: "saveFonts",
    value: (function () {
      var _saveFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fonts, fontVersion) {
        var key;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              key = this._getKeyByVersion(fontVersion);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[FONTS-COLLECTOR][".concat(fontVersion, "] Saving fonts to localStorage under key: ").concat(key));
              _context.next = 4;
              return this._storageUtils.saveToLocalStorage(key, fonts);
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function saveFonts(_x, _x2) {
        return _saveFonts.apply(this, arguments);
      }
      return saveFonts;
    }()
    /**
     * Retrieves stored fonts from local storage based on the font version.
     * @param {FontVersionType} fontVersion - The font version to determine the storage key.
     * @returns {Promise<string|null>} - The stored fonts or null if none exist.
     */
    )
  }, {
    key: "getStoredFonts",
    value: (function () {
      var _getStoredFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(fontVersion) {
        var key, storedFonts;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              key = this._getKeyByVersion(fontVersion);
              _context2.next = 3;
              return this._storageUtils.getFromLocalStorage(key);
            case 3:
              storedFonts = _context2.sent;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[FONTS-COLLECTOR][".concat(fontVersion, "] Retrieved fonts from localStorage under key ").concat(key, ": ").concat(storedFonts));
              return _context2.abrupt("return", storedFonts);
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function getStoredFonts(_x3) {
        return _getStoredFonts.apply(this, arguments);
      }
      return getStoredFonts;
    }()
    /**
     * Private method to determine the storage key based on the font version.
     * @param {FontVersionType} fontVersion - The font version to determine the key.
     * @returns {string} - The corresponding storage key.
     * @throws {Error} - If the font version type is unsupported.
     */
    )
  }, {
    key: "_getKeyByVersion",
    value: function _getKeyByVersion(fontVersion) {
      var key = this._versionKeys[fontVersion];
      if (!key) {
        throw new Error("Unsupported font version type: ".concat(fontVersion));
      }
      return key;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/collection/FontsProvider.js":
/*!*********************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/FontsProvider.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types/FontVersionType */ "./src/main/collectors/static/font/collection/types/FontVersionType.js");
/* harmony import */ var _v1_FontsVersion1__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./v1/FontsVersion1 */ "./src/main/collectors/static/font/collection/v1/FontsVersion1.js");
/* harmony import */ var _v1_FontsVersion1__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_v1_FontsVersion1__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _v2_FontsVersion2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./v2/FontsVersion2 */ "./src/main/collectors/static/font/collection/v2/FontsVersion2.js");
/* harmony import */ var _v2_FontsVersion2__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_v2_FontsVersion2__WEBPACK_IMPORTED_MODULE_2__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Import font versions from external files




/**
 * FontsProvider
 * A class to manage font versions and provide font lists based on version type.
 */
var FontsProvider = /*#__PURE__*/function () {
  function FontsProvider() {
    _classCallCheck(this, FontsProvider);
    // Static font lists for different versions
    this.fontVersions = _defineProperty(_defineProperty({}, _types_FontVersionType__WEBPACK_IMPORTED_MODULE_0__["default"].VERSION1, (_v1_FontsVersion1__WEBPACK_IMPORTED_MODULE_1___default())), _types_FontVersionType__WEBPACK_IMPORTED_MODULE_0__["default"].VERSION2, (_v2_FontsVersion2__WEBPACK_IMPORTED_MODULE_2___default()));
  }

  /**
   * Get fonts by version type
   * @param {string} versionType - The type of font version (use FontVersionType enum)
   * @returns {string[]} - List of fonts for the specified version type
   * @throws {Error} - If an invalid version type is passed
   */
  return _createClass(FontsProvider, [{
    key: "getFontsByVersion",
    value: function getFontsByVersion(versionType) {
      if (this.fontVersions[versionType]) {
        return this.fontVersions[versionType];
      } else {
        throw new Error("Invalid version type. Use one of: ".concat(Object.keys(_types_FontVersionType__WEBPACK_IMPORTED_MODULE_0__["default"]).join(", ")));
      }
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (FontsProvider);

/***/ }),

/***/ "./src/main/collectors/static/font/collection/types/FontMigrationStage.js":
/*!********************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/types/FontMigrationStage.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * FontMigrationStage
 * 
 * Defines the different stages of font collection migration from V1 to V2.
 * Each stage represents a different phase in the migration process:
 * 
 * V1_ONLY (0): Only V1 collector is active
 * DUAL_COLLECTION_V1_PRIORITY (1): Both collectors active, V1 is primary
 * DUAL_COLLECTION_V2_PRIORITY (2): Both collectors active, V2 is primary
 * V2_ONLY (3): Only V2 collector is active
 * DUAL_COLLECTION_PARALLEL (5): Both collectors active, parallel
 */

var FontMigrationStage = {
  V1_ONLY: "0",
  DUAL_COLLECTION_PARALLEL: "5",
  DUAL_COLLECTION_V1_PRIORITY: "1",
  DUAL_COLLECTION_V2_PRIORITY: "2",
  V2_ONLY: "3",
  /**
   * Checks if a given stage is valid
   * @param {string} stage - The migration stage to validate
   * @returns {boolean} True if the stage is valid, false otherwise
   */
  isValid: function isValid(stage) {
    return Object.values(FontMigrationStage).includes(stage);
  },
  /**
   * Gets a description of what each stage represents
   * @param {string} stage - The migration stage to get description for
   * @returns {string} Description of the stage
   */
  getDescription: function getDescription(stage) {
    var descriptions = _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontMigrationStage.V1_ONLY, "Only V1 collector is active"), FontMigrationStage.DUAL_COLLECTION_V1_PRIORITY, "Both collectors active, V1 is primary"), FontMigrationStage.DUAL_COLLECTION_V2_PRIORITY, "Both collectors active, V2 is primary"), FontMigrationStage.V2_ONLY, "Only V2 collector is active");
    return descriptions[stage] || "Unknown stage";
  }
};
/* harmony default export */ __webpack_exports__["default"] = (FontMigrationStage);

/***/ }),

/***/ "./src/main/collectors/static/font/collection/types/FontVersionType.js":
/*!*****************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/types/FontVersionType.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Enum for font version types
var FontVersionType = Object.freeze({
  VERSION1: "VERSION1",
  VERSION2: "VERSION2"
});
/* harmony default export */ __webpack_exports__["default"] = (FontVersionType);

/***/ }),

/***/ "./src/main/collectors/static/font/collection/v1/FontsVersion1.js":
/*!************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v1/FontsVersion1.js ***!
  \************************************************************************/
/***/ (function(module) {

// fontsVersion1.js

var fontsVersion1 = {
  "serif": ['adobe jenson', 'adobe text', 'albertus', 'aldus', 'alexandria', 'algerian', 'american typewriter', 'antiqua', 'arno', 'aster', 'aurora', 'baskerville', 'bell', 'bembo', 'bembo schoolbook', 'benguiat', 'berkeley old style', 'bernhard modern', 'bodoni', 'book antiqua', 'bookman', 'bordeaux roman', 'californian fb', 'calisto', 'capitals', 'cambria', 'cartier', 'caslon', 'caslon antique', 'catull', 'centaur', 'century old style', 'century schoolbook', 'new century schoolbook', 'chaparral', 'charis sil', 'cheltenham', 'clearface', 'cochin', 'colonna', 'computer modern', 'concrete roman', 'constantia', 'cooper black', 'corona', 'dejavu fonts', 'ecotype', 'elephant', 'espy serif', 'excelsior', 'fairfield', 'ff scala', 'footlight', 'freeserif', 'friz quadrata', 'garamond', 'gentium', 'georgia', 'gloucester', 'goudy old style', 'goudy schoolbook', 'goudy pro font', 'granjon', 'heather', 'hercules', 'high tower text', 'hiroshige', 'hoefler text', 'humana serif', 'imprint', 'ionic no. 5', 'janson', 'jenson', 'joanna', 'korinna', 'kursivschrift', 'legacy serif', 'lexicon', 'liberation fonts', 'linux libertine', 'literaturnaya', 'lucida', 'melior', 'memphis', 'miller', 'minion', 'didone', 'mona lisa', 'mrs eaves', 'ms serif', 'new york', 'nimbus roman', 'nps rawlinson roadway', 'ocr a extended', 'palatino', 'perpetua', 'plantin', 'plantin schoolbook', 'playbill', 'poor richard', 'rawlinson roadway', 'renault', 'requiem', 'roman', 'rotis serif', 'sabon', 'seagull', 'sistina', 'souvenir', 'stix', 'stone informal', 'stone serif', 'sylfaen', 'times new roman', 'times', 'trajan', 'trinit', 'trump mediaeval', 'utopia', 'vale type', 'bitstream vera', 'versailles', 'wanted', 'weiss', 'wide latin', 'windsor', 'xits', 'apex', 'archer', 'athens', 'city', 'cholla slab', 'clarendon', 'courier', 'egyptienne', 'guardian egyptian', 'lexia', 'museo slab', 'rockwell', 'nilland', 'skeleton antique', 'tower', /* from Apr/2024 https://en.wikipedia.org/wiki/List_of_serif_typefaces */
  'allegro', 'amiri', 'athelas', 'belwe', 'bookerly', 'bulmer', 'caledonia', 'constructium', 'copperplate Gothic', 'dejaVu serif', 'didot', 'droid serif', 'emerson', 'galliard', 'iowan old style', 'itc lubalin graph', 'ibm plex', 'ibm plex serif', 'junicode', 'literata', 'lucida bright', 'rotis', 'serifa', 'source serif pro', 'theano', 'zilla slab', 'bitstream charter', 'roboto slab', 'university of california old style', 'berkeley old style', 'candida', 'doves', 'hightower', 'liberation sans', 'lucida grande', 'vera sans', 'vercetti regular', 'computer modern sans', 'rotis ii sans', 'sherbrooke', 'tilson', 'triplex'],
  "sans-serif": ['abadi', 'agency fb', 'akzidenz grotesk', 'aptifer', 'arial', 'arial unicode ms', 'avant garde', 'avenir', 'bank gothic', 'barmeno', 'bauhaus', 'bell centennial', 'bell gothic', 'benguiat gothic', 'berlin sans', 'beteckna', 'brandon grotesque', 'cabin', 'cafeteria', 'calibri', 'century gothic', 'charcoal', 'chicago', 'clearface gothic', 'clearview', 'co headline', 'co text', 'compacta', 'corbel', 'ff dax', 'dotum', 'droid', 'dyslexie', 'ecofont', 'eras', 'espy sans', 'nu sans', 'eurocrat', 'eurostile', 'ff meta', 'flama', 'formata', 'freesans', 'franklin gothic', 'frutiger', 'futura', 'geneva', 'gill sans', 'gill sans schoolbook', 'gotham', 'handel gothic', 'denmark', 'haettenschweiler', 'hei', 'helvetica', 'helvetica neue', 'swiss 721', 'highway gothic', 'hiroshige sans', 'hobo', 'impact', 'industria', 'interstate', 'johnston', 'kabel', 'lato', 'legacy sans', 'lexia readable', 'meiryo', 'microgramma', 'motorway', 'ms sans serif', 'museo sans', 'myriad', 'neutraface', 'neuzeit s', 'news gothic', 'nimbus sans l', 'nina', 'optima', 'parisine', 'pricedown', 'prima sans', 'pt sans', 'rail alphabet', 'revue', 'roboto', 'rotis sans', 'ff scala sans', 'segoe', 'skia', 'souvenir gothic', 'stone sans', 'syntax', 'tahoma', 'template gothic', 'tiresias', 'trade gothic', 'transport alphabet', 'trebuchet ms', 'trump gothic', 'tw cen', 'twentieth century', 'ubuntu font family', 'univers', 'zurich', 'verdana', 'virtue', /* from Apr/2024 https://en.wikipedia.org/wiki/List_of_sans_serif_typefaces */
  'acumin', 'akzidenz-grotesk', 'amplitude', 'andal sans', 'antique olive', 'archivo', 'austria', 'itc avant garde', 'itc avant garde gothic', 'averta', 'bahnschrift', 'barlow', 'bobcaygeon', 'breeze sans', 'cantarell', 'caractres', 'cera Pro', 'cisco sans', 'adobe clean', 'clear sans', 'comic neue', 'dejaVu sans', 'din 1451', 'dosis', 'drogowskaz', 'droid sans', 'dubai', 'e-ukraine', 'fira sans', 'folio', 'gerstner programm', 'grand slang', 'harmonyos sans', 'ibm plex sans', 'inter', 'ge inspira', 'karrik', 'klavika', 'libre franklin', 'linux biolinum', 'fs me', 'ff meta', 'montserrat', 'national trust', 'nokia pure', 'noto sans', 'nunito sans', 'open sans', 'overpass', 'oxygen', 'poppins', 'proxima nova', 'radis sans', 'raleway', 'Selawik', 'semplicit', 'seravek', 'oneplus', 'snv', 'source sans pro', 'sweden sans', 'thesis sans', 'transport', 'tratex', 'unica', 'universalis', 'vag rounded', 'whitney', 'aphont', 'ff clan', 'gilroy', 'greycliff', 'nobel'],
  "monospace": ['andale mono', 'anonymous', 'consolas', 'courierhp', 'courier new', 'courierps', 'fontcraft courier', 'everson mono', 'fedra mono', 'fixed', 'fixedsys', 'fixedsys excelsior', 'inconsolata', 'hyperfont', 'letter gothic', 'magnetic ink character recognition', 'menlo', 'miriam fixed', 'monaco', 'monofur', 'monospace', 'ms gothic', 'ms mincho', 'nimbus mono l', 'ocr-a', 'ocr-b', 'orator', 'ormaxx', 'pragmatapro', 'prestige elite', 'profont', 'proggy programming fonts', 'small fonts', 'sydnie', 'terminal', 'tex gyre cursor', 'um typewriter', 'william monospace', 'balloon', 'brush script', 'dragonwick', 'choc', 'dom casual', 'mistral', 'papyrus', 'tempus sans', 'amazone', 'ams euler', 'apple chancery', 'aristocrat', 'bickley script', 'civitype', 'codex', 'edwardian script', 'forte', 'french script', 'kuenstler script', 'monotype corsiva', 'old english text mt', 'palace script', 'park avenue', 'scriptina', 'shelley volante', 'vivaldi', 'vladimir script', 'zapf chancery', 'zapfino', 'andy', 'ashley script', 'chalkboard', 'comic sans', 'cezanne', 'fontoon', 'irregularis', 'jefferson', 'kristen', 'lucida handwriting', 'rage italic', 'rufscript', 'scribble', 'soupbone', 'tekton', 'alecko', 'cinderella', 'cupola', 'curlz', 'magnificat', 'script', 'american text', 'cloister black', 'fraktur', 'goudy text', 'old english text', 'wedding text', 'aegyptus', 'aharoni', 'aisha', 'amienne', 'batak script', 'chandas', 'hanacaraka', 'japanese gothic typeface', 'jomolhari', 'kochi font', 'lontara script', 'maiola', 'minch', 'mona font', 'nassim', 'nastaliq navees', 'neacademia', 'perpetua greek', 'simsun', 'skolar', 'skolar devanagari', 'sundanese unicode', 'sutturah', 'tai le valentinium', 'tengwar', 'tibetan machine uni', 'tunga', 'wadalab', 'apple symbols', 'bookshelf symbol 7', 'braille', 'commercial pi', 'corel', 'erler dingbats', 'hm phonetic', 'mathematical pi', 'morse code', 'opensymbol', 'richstyle', 'symbol', 'symbolps', 'wingdings', 'wingdings 2', 'wingdings 3', 'webdings', 'zapf dingbats', 'abracadabra', 'ad lib', 'allegro', 'andreas', 'arnold bcklin', 'astur', 'balloon pop outlaw black', 'banco', 'beat', 'braggadocio', 'broadway', 'ellington', 'exablock', 'exocet', 'fig script', 'gigi', 'harlow solid', 'harrington', 'horizon', 'jim crow', 'jokerman', 'juice', 'lo-type', 'magneto', 'megadeth', 'neuland', 'peignot', 'ravie', 'san francisco', 'showcard gothic', 'snap', 'stencil', 'umbra', 'westminster', 'willow', 'bagel', 'lithos', 'aldhabi', 'andalus', 'angsana new', 'angsanaupc', 'aparajita', 'arabic typesetting', 'arial black', 'arial narrow', 'arial rounded mt bold', 'baskerville old face', 'batang', 'batangche', 'bauhaus 93', 'bell mt', 'berlin sans fb', 'berlin sans fb demi', 'bernard mt condensed', 'blackadder itc', 'bodoni mt', 'bodoni mt black', 'bodoni mt condensed', 'bodoni mt poster compressed', 'bookman old style', 'bradley hand itc', 'britannic bold', 'browallia new', 'browalliaupc', 'brush script mt', 'buxton sketch', 'calibri light', 'calisto mt', 'cambria math', 'candara', 'castellar', 'century', 'chiller', 'colonna mt', 'comic sans ms', 'copperplate gothic bold', 'copperplate gothic light', 'cordia new', 'cordiaupc', 'curlz mt', 'daunpenh', 'david', 'dfkai-sb', 'dilleniaupc', 'dokchampa', 'dotumche', 'ebrima', 'edwardian script itc', 'engravers mt', 'eras bold itc', 'eras demi itc', 'eras light itc', 'eras medium itc', 'estrangelo edessa', 'eucrosiaupc', 'euphemia', 'fangsong', 'felix titling', 'footlight mt light', 'franklin gothic book', 'franklin gothic demi', 'franklin gothic demi cond', 'franklin gothic heavy', 'franklin gothic medium', 'franklin gothic medium cond', 'frankruehl', 'freesiaupc', 'freestyle script', 'french script mt', 'gabriola', 'gadugi', 'gautami', 'gill sans mt', 'gill sans mt condensed', 'gill sans mt ext condensed bold', 'gill sans ultra bold', 'gill sans ultra bold condensed', 'gisha', 'gloucester mt extra condensed', 'goudy stout', 'gulim', 'gulimche', 'gungsuh', 'gungsuhche', 'harlow solid italic', 'imprint mt shadow', 'informal roman', 'irisupc', 'iskoola pota', 'jasmineupc', 'javanese text', 'juice itc', 'kaiti', 'kalinga', 'kartika', 'khmer ui', 'kodchiangupc', 'kokila', 'kristen itc', 'kunstler script', 'lao ui', 'latha', 'leelawadee', 'leelawadee ui', 'leelawadee ui semilight', 'levenim mt', 'lilyupc', 'lucida bright', 'lucida calligraphy', 'lucida console', 'lucida fax', 'lucida sans', 'lucida sans typewriter', 'lucida sans unicode', 'maiandra gd', 'malgun gothic', 'mangal', 'marlett', 'matura mt script capitals', 'meiryo ui', 'microsoft himalaya', 'microsoft jhenghei', 'microsoft jhenghei light', 'microsoft jhenghei ui', 'microsoft jhenghei ui light', 'microsoft new tai lue', 'microsoft phagspa', 'microsoft sans serif', 'microsoft tai le', 'microsoft uighur', 'microsoft yahei', 'microsoft yahei light', 'microsoft yahei ui', 'microsoft yahei ui light', 'microsoft yi baiti', 'mingliu', 'mingliu-extb', 'mingliu_hkscs', 'mingliu_hkscs-extb', 'miriam', 'modern', 'modern no. 20', 'mongolian baiti', 'moolboran', 'ms outlook', 'ms pgothic', 'ms pmincho', 'ms reference sans serif', 'ms reference specialty', 'ms ui gothic', 'mt extra', 'mv boli', 'myanmar text', 'narkisim', 'niagara engraved', 'niagara solid', 'nirmala ui', 'nirmala ui semilight', 'nsimsun', 'nyala', 'onyx', 'palace script mt', 'palatino linotype', 'parchment', 'perpetua titling mt', 'plantagenet cherokee', 'pmingliu', 'pmingliu-extb', 'pristina', 'raavi', 'rockwell condensed', 'rockwell extra bold', 'rod', 'sakkal majalla', 'script mt bold', 'segoe marker', 'segoe print', 'segoe script', 'segoe ui', 'segoe ui black', 'segoe ui emoji', 'segoe ui light', 'segoe ui semibold', 'segoe ui semilight', 'segoe ui symbol', 'shonar bangla', 'shruti', 'simhei', 'simplified arabic', 'simplified arabic fixed', 'simsun-extb', 'sitka banner', 'sitka display', 'sitka heading', 'sitka small', 'sitka subheading', 'sitka text', 'sketchflow print', 'snap itc', 'system', 'tempus sans itc', 'traditional arabic', 'tw cen mt', 'tw cen mt condensed', 'tw cen mt condensed extra bold', 'urdu typesetting', 'utsaah', 'vani', 'vijaya', 'viner hand itc', 'vrinda', 'yu gothic', 'yu gothic light', 'yu mincho', 'yu mincho demibold', 'yu mincho light', /** from Apr/2024 https://en.wikipedia.org/wiki/List_of_monospaced_typefaces  */
  'bitstream vera sans mono', 'cascadia code', 'century schoolbook monospace', 'comic mono', 'computer modern mono', 'typewriter', 'curier', 'cousine', 'dejavu sans mono', 'droid sans mono', 'envy code r', 'fantasque sans', 'fira code', 'fira mono', 'freemono', 'gnu freefont', 'go mono', 'hack', 'ibm monochrome display adapter', 'ibm mda', 'ibm plex mono', 'input', 'iosevka', 'jetbrains mono', 'juliamono', 'liberation mono', 'nk57 monospace', 'noto mono', 'operator mono', 'overpass mono', 'oxygen mono', 'pt mono', 'recursive mono', 'roboto mono', 'sf mono', 'source code pro', 'spleen', 'terminus', 'ubuntu mono', 'victor mono', 'wumpus mono'],
  "rat_fonts": ['Teamviewer11',
  // capital letter is importent!
  'Teamviewer12', 'Teamviewer13', 'Teamviewer14', 'Teamviewer15']
};
module.exports = fontsVersion1;

/***/ }),

/***/ "./src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js":
/*!******************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SPAN_TAG: function() { return /* binding */ SPAN_TAG; },
/* harmony export */   "default": function() { return /* binding */ BaseFontsScanner; }
/* harmony export */ });
/* harmony import */ var _core_frames_SystemFrameName__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/frames/SystemFrameName */ "./src/main/core/frames/SystemFrameName.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var SPAN_TAG = 'span';
var BaseFontsScanner = /*#__PURE__*/function () {
  function BaseFontsScanner(domUtils) {
    _classCallCheck(this, BaseFontsScanner);
    this._domUtils = domUtils;
    // a font will be compared against all the four default fonts, base fonts.
    // and if it doesn't match all 4 then that font is not available.
    this._baseFonts = ['rat-fonts', 'monospace', 'sans-serif', 'serif'];
    // we use m or w because these two characters take up the maximum width.
    // And we use a LLi so that the same matching fonts can get separated
    this._testString = "mmmmmmmmmmlli";
    // we test using 72px font size, we may use any size. I guess larger the better.//
    this._testSize = '72px';
    this._chunkSize = 30;
    this._defaultWidth = {};
    this._defaultHeight = {};
    this._body = null;
    this._iframe = null;
    this._spanArray = null;
    this._allFontsDiffs = [];
  }
  return _createClass(BaseFontsScanner, [{
    key: "release",
    value: function release() {
      if (this._body && this._iframe) {
        this._body.removeChild(this._iframe);
      }
      this._iframe = null;
      this._spanArray = null;
      this._allFontsDiffs = [];
    }
  }, {
    key: "init",
    value: function init() {
      var _this = this;
      return new Promise(function (resolve, reject) {
        try {
          _this.initCallback(resolve);
        } catch (error) {
          reject(error);
        }
      });
    }

    /**
     * Prepare the Scanner for the font detection tests
     * @param callback - Called once the Scanner is initialized and ready for the test
     * @returns {string}
     */
  }, {
    key: "initCallback",
    value: function initCallback(callback) {
      var _this2 = this;
      this._body = document.body;
      if (!this._body) {
        return '';
      }

      // Create the iframe so we can do the fonts detection behind the scenes without being noticed
      // IFrame visibility is set to hidden with width & height of 0 so it will not take any space
      this._iframe = document.createElement('iframe');

      //use sandbox to allow the minimum level of capability necessary for the content of the iframe
      //to do it's job
      //in FontScanner usage - the iframe and the iframe's parent document are Same Origin
      //and we allow to reach up into the parent
      this._iframe.setAttribute('sandbox', 'allow-same-origin');
      this._iframe.id = _core_frames_SystemFrameName__WEBPACK_IMPORTED_MODULE_0__.SystemFrameName.fontDetectionFrame;
      this._iframe.style.visibility = 'hidden';
      this._iframe.style.zIndex = '-1';
      this._iframe.style.width = 0;
      this._iframe.style.height = 0;
      this._iframe.style.position = 'absolute';
      this._iframe.style.top = '-9999px';
      this._iframe.style.left = '-9999px';
      this._iframe.style.border = 'none';
      this._iframe.style.margin = '0';
      this._iframe.style.padding = '0';
      this._iframe.style.overflow = 'hidden';
      this._body.appendChild(this._iframe);

      // ie8 requires adding a body + frame must have a size do we null it...
      if (!this._iframe.contentDocument.body) {
        this._iframe.style.width = null;
        this._iframe.style.height = null;
        this._iframe.contentDocument.appendChild(document.createElement('body'));
      }
      this._domUtils.onWindowDocumentReady(this._iframe.contentWindow, function () {
        _this2._createCalculationElements(callback);
      });
    }

    /**
     * Create all the elements required for the font test
     * @param callback - Once all elements are created the callback is called to continue to process
     * @private
     */
  }, {
    key: "_createCalculationElements",
    value: function _createCalculationElements(callback) {
      // Create a SPAN in the document to get the width of the text we use to test
      var span = document.createElement('span');
      span.style.fontSize = this._testSize;
      span.style.visibility = 'hidden';
      span.style.position = 'absolute';
      span.style.zIndex = '-1';
      span.style.lineHeight = 'normal';
      span.innerHTML = this._testString;
      for (var i = 0; i < this._baseFonts.length; i++) {
        // get the default width for the three base fonts
        span.style.fontFamily = this._baseFonts[i];
        this._iframe.contentDocument.body.appendChild(span);
        this._defaultWidth[this._baseFonts[i]] = span.offsetWidth; // width for the default font
        this._defaultHeight[this._baseFonts[i]] = span.offsetHeight; // height for the default font
        this._iframe.contentDocument.body.removeChild(span);
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("FontsScanner:init - base fonts width: \n                ".concat(this._baseFonts[0], ":").concat(this._defaultWidth[this._baseFonts[0]], ";\n                ").concat(this._baseFonts[1], ":").concat(this._defaultWidth[this._baseFonts[1]], ";\n                ").concat(this._baseFonts[2], ":").concat(this._defaultWidth[this._baseFonts[2]], ";\n                ").concat(this._baseFonts[3], ":").concat(this._defaultWidth[this._baseFonts[3]]));
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("FontsScanner:init - base fonts height: \n                ".concat(this._baseFonts[0], ":").concat(this._defaultHeight[this._baseFonts[0]], ";\n                ").concat(this._baseFonts[1], ":").concat(this._defaultHeight[this._baseFonts[1]], ";\n                ").concat(this._baseFonts[2], ":").concat(this._defaultHeight[this._baseFonts[2]], ";\n                ").concat(this._baseFonts[3], ":").concat(this._defaultHeight[this._baseFonts[3]]));
      // the span array for all the tests
      this._createSpanArray();
      callback();
    }

    /**
     * create array of spans for testing in chunks
     */
  }, {
    key: "_createSpanArray",
    value: function _createSpanArray() {
      var currDiv = document.createElement('div');
      currDiv.id = 'currentDiv';
      currDiv.style.position = 'absolute';
      currDiv.style.visibility = 'hidden';
      for (var i = 0; i < this._chunkSize; i++) {
        var s1 = document.createElement('span');
        s1.style.lineHeight = 'normal';
        s1.style.position = 'absolute';
        s1.style.zIndex = '-1';
        s1.style.fontSize = this._testSize;
        s1.innerHTML = this._testString;
        currDiv.appendChild(s1);
        var br = document.createElement('br');
        currDiv.appendChild(br);
      }
      this._iframe.contentDocument.body.appendChild(currDiv);
      this._spanArray = currDiv;
    }
  }, {
    key: "getAllFontsDiffs",
    value: function getAllFontsDiffs() {
      return this._allFontsDiffs;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js":
/*!*******************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ OldBatchFontsScanner; }
/* harmony export */ });
/* harmony import */ var _OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OldBaseFontsScanner */ "./src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var OldBatchFontsScanner = /*#__PURE__*/function (_BaseFontsScanner) {
  function OldBatchFontsScanner(domUtils) {
    _classCallCheck(this, OldBatchFontsScanner);
    return _callSuper(this, OldBatchFontsScanner, [domUtils]);
  }
  _inherits(OldBatchFontsScanner, _BaseFontsScanner);
  return _createClass(OldBatchFontsScanner, [{
    key: "scan",
    value: function scan(_ref) {
      var _this = this;
      var fonts = _ref.fonts,
        fontsFamily = _ref.fontsFamily,
        fontsConfig = _ref.fontsConfig;
      return this.init() // Init from super base class
      .then(function () {
        return new Promise(function (resolve, reject) {
          try {
            _this.detectCallback(fonts, fontsFamily, resolve);
          } catch (error) {
            reject(error);
          }
        });
      })["catch"](function (error) {
        return Promise.reject(error);
      });
    }

    /**
     * @param {Array} fonts
     * @param {Number} fontFamily
     * @param {Function} callback
     */
  }, {
    key: "detectCallback",
    value: function detectCallback(fonts, fontFamily, callback) {
      var _this2 = this;
      var availableFonts = [];
      var index = 0;
      var currentLoopIndex = 0;
      if (!this._spanArray) {
        callback(availableFonts);
        return availableFonts;
      }
      var allSpans = this._spanArray.getElementsByTagName(_OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_0__.SPAN_TAG);
      var baseFontDefaultWidth = this._defaultWidth[fontFamily];
      var baseFontDefaultHeight = this._defaultHeight[fontFamily];
      var checkDetection = function checkDetection(arryOfSpans) {
        arryOfSpans.forEach(function (span) {
          var diffWidth = Math.abs(span.offsetWidth - baseFontDefaultWidth);
          var diffHeight = Math.abs(span.offsetHeight - baseFontDefaultHeight);
          // collect all the diffs of all fonts in case we see the issue of all fonts.
          // If it happens the FontDetectionFeature will take this and send to server for analysis
          _this2._allFontsDiffs.push([span.id, diffWidth, diffHeight]);
          if (diffWidth > 1 || diffHeight > 1) {
            availableFonts[index] = span.id;
            index++;
          }
        });
      };
      fonts.forEach(function (font) {
        if (currentLoopIndex >= _this2._chunkSize) {
          currentLoopIndex = 0;
          checkDetection(Array.from(allSpans));
        }
        allSpans[currentLoopIndex].style.fontFamily = font + ',' + fontFamily;
        allSpans[currentLoopIndex].id = font;
        currentLoopIndex++;
      });

      /** one more run for the rest of the tail */
      if (currentLoopIndex < this._chunkSize) {
        checkDetection(Array.from(allSpans).slice(0, currentLoopIndex));
      }
      callback(availableFonts);
    }
  }]);
}(_OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js":
/*!*********************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ OldOffloadFontsScanner; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OldBaseFontsScanner */ "./src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }




/**
 * Does the font calculation in an multi-task manner:
 * Instead of iterating the provided fonts synchronically - it posting dedicated window task per each font.
 * The intention was to fix Latency during page load for prospect users, reported by some of our customers.
 * see - https://biocatch.atlassian.net/browse/BC-38110
 * The idea was to keep the original synchronic behavior, while remotely configure for the problematic customers the alternative
 * behavior implemented on that class.   the 'legacy' behavior now captured within the BatchFontsScanner.
 */
var OldOffloadFontsScanner = /*#__PURE__*/function (_BaseFontsScanner) {
  /**
   * @param {CDUtils} domUtils
   * @param {boolean} removeDuplicatedFonts - Whether to remove duplicated fonts in the result
   * Added due to bug we had on production with duplicated fonts before
   */
  function OldOffloadFontsScanner(domUtils, removeDuplicatedFonts) {
    var _this;
    _classCallCheck(this, OldOffloadFontsScanner);
    _this = _callSuper(this, OldOffloadFontsScanner, [domUtils]);
    _this._getElementOffsetTask = _this._getElementOffsetTask.bind(_this);
    _this._lastChunck = true;
    _this._removeDuplicatedFonts = removeDuplicatedFonts;
    return _this;
  }
  _inherits(OldOffloadFontsScanner, _BaseFontsScanner);
  return _createClass(OldOffloadFontsScanner, [{
    key: "scan",
    value: function scan(_ref) {
      var _this2 = this;
      var fonts = _ref.fonts,
        fontsFamily = _ref.fontsFamily,
        fontsConfig = _ref.fontsConfig;
      return this.init().then(function () {
        return new Promise(function (resolve, reject) {
          try {
            _this2.detectCallback(fonts, fontsFamily, resolve);
          } catch (error) {
            reject(error);
          }
        });
      })["catch"](function (error) {
        return Promise.reject(error);
      });
    }

    /**
     * @param {Array} fonts
     * @param {Number} fontFamily
     * @param {Function} callback
     */
  }, {
    key: "detectCallback",
    value: function detectCallback(fonts, fontFamily, callback) {
      var _this3 = this;
      if (!this._spanArray) {
        callback([]);
        return [];
      }
      var allSpans = this._spanArray.getElementsByTagName(_OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_1__.SPAN_TAG);
      var createTaskIterator = function createTaskIterator(start, end, values) {
        var _nextIndex = start;
        var _availableFonts = [];
        var _callback = callback;
        var _fontsArray = fonts;
        var _fontFamily = fontFamily;
        var _removeDuplicatedFonts = _this3._removeDuplicatedFonts;
        var taskIterator = {
          next: function next() {
            var nextValue = null;
            if (_nextIndex < end) {
              nextValue = values[_nextIndex];
              _nextIndex++;
              return nextValue;
            }
            return null;
          },
          reset: function reset() {
            _nextIndex = 0;
          },
          addFont: function addFont(font) {
            if (_removeDuplicatedFonts && _availableFonts.includes(font)) {
              return; // Skip duplicate fonts if removeDuplicatedFonts is enabled
            }
            _availableFonts.push(font);
          },
          runCallback: function runCallback() {
            _callback(_availableFonts);
          },
          getFontsArray: function getFontsArray() {
            return _fontsArray;
          },
          getFontFamily: function getFontFamily() {
            return _fontFamily;
          },
          getAvailableFonts: function getAvailableFonts() {
            return _availableFonts;
          }
        };
        return taskIterator;
      };
      var taskIterator = createTaskIterator(0, Math.min(fonts.length, this._chunkSize), allSpans);

      // First execution
      this._lastChunck = true;
      this._applyFontsToSpanElements(taskIterator, 0);
    }

    /**
     *
     * @param {Object} spansTaskIterator
     * @param {Number} fontsLoopIndex
     */
  }, {
    key: "_applyFontsToSpanElements",
    value: function _applyFontsToSpanElements(spansTaskIterator, fontsLoopIndex) {
      var _this4 = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].trace("[FONTS-COLLECTOR][VERSION1] Checking font ".concat(fontsLoopIndex, "."));
      var nextElement = spansTaskIterator.next();
      var fontsArray = spansTaskIterator.getFontsArray();
      var fontFamily = spansTaskIterator.getFontFamily();
      while (nextElement !== null && fontsLoopIndex < fontsArray.length) {
        nextElement.style.fontFamily = fontsArray[fontsLoopIndex] + ', ' + fontFamily;
        nextElement.id = fontsArray[fontsLoopIndex];
        fontsLoopIndex++;
        nextElement = spansTaskIterator.next();
      }
      spansTaskIterator.reset();
      if (fontsLoopIndex >= fontsArray.length) {
        // console.log('calling callback', spansTaskIterator.getAvailableFonts());

        /** one more run for the rest of the tail */
        if (this._lastChunck) {
          this._lastChunck = false;
          return window.setTimeout(function () {
            _this4._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
          }, 0);
        }
        spansTaskIterator.runCallback();
      } else {
        window.setTimeout(function () {
          _this4._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
        }, 0);
      }
    }

    /**
     * Get the offset width/height information of the requested element
     * and execute the provided callback when finished
     * @param {Object} spansTaskIterator
     * @param {Number} fontsLoopIndex
     * @param {Number} indexOfBaseFonts
     */
  }, {
    key: "_getElementOffsetTask",
    value: function _getElementOffsetTask(spansTaskIterator, fontsLoopIndex) {
      var _this5 = this;
      var fontFamily = spansTaskIterator.getFontFamily();
      var baseFontDefaultWidth = this._defaultWidth[fontFamily];
      var baseFontDefaultHeight = this._defaultHeight[fontFamily];
      var element = spansTaskIterator.next();
      if (element && element.offsetWidth) {
        var diffWidth = Math.abs(element.offsetWidth - baseFontDefaultWidth);
        var diffHeight = Math.abs(element.offsetHeight - baseFontDefaultHeight);
        this._allFontsDiffs.push([element.id, diffWidth, diffHeight]);
        if (diffWidth > 1 || diffHeight > 1) {
          spansTaskIterator.addFont(element.id);
        }
        window.setTimeout(function () {
          _this5._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
        }, 0);
      } else {
        spansTaskIterator.reset();
        this._applyFontsToSpanElements(spansTaskIterator, fontsLoopIndex);
      }
    }
  }, {
    key: "isSupported",
    value: function isSupported() {
      return true;
    }
  }]);
}(_OldBaseFontsScanner__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/font/collection/v2/FontsScanner.js":
/*!***********************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v2/FontsScanner.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontsScanner; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _events_WorkerResponse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../events/WorkerResponse */ "./src/main/events/WorkerResponse.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




/**
 * FontsScanner - Scans font availability using the WUP worker
 * 
 * Flow:
 * Main Thread (FontsScanner)  Worker  FontsScannerWorker  
 * BatchProcessor  NativeFontDetector/CanvasFontDetector
 */
var FontsScanner = /*#__PURE__*/function () {
  function FontsScanner(_ref) {
    var workerCommunicator = _ref.workerCommunicator;
    _classCallCheck(this, FontsScanner);
    if (!workerCommunicator) {
      throw new Error('WorkerCommunicator is required for font scanning');
    }
    this._workerCommunicator = workerCommunicator;
    this._pendingRequests = new Map();
    this._requestId = 0;
    this._released = false;
    this._logsTag = "[FONTS-COLLECTOR][WORKER-FONT-SCANNER]";
  }

  /**
   * Scans multiple fonts using the WUP worker
   */
  return _createClass(FontsScanner, [{
    key: "scan",
    value: (function () {
      var _scan = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2) {
        var _this = this;
        var fonts, fontsFamily, fontsConfig, startTime, requestId;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              fonts = _ref2.fonts, fontsFamily = _ref2.fontsFamily, fontsConfig = _ref2.fontsConfig;
              if (!this._released) {
                _context.next = 3;
                break;
              }
              throw new Error('FontsScanner has been released');
            case 3:
              if (!(!Array.isArray(fonts) || fonts.length === 0)) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return", []);
            case 5:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].trace("".concat(this._logsTag, " Starting scan of ").concat(fonts.length, " fonts using WUP worker."));
              startTime = performance.now();
              requestId = ++this._requestId;
              return _context.abrupt("return", new Promise(function (resolve, reject) {
                _this._pendingRequests.set(requestId, {
                  resolve: resolve,
                  reject: reject
                });

                // Here the scan goes to worker will send the response back to main thread
                // main thread will return the result to the caller
                _this._workerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__.WorkerCommand.scanFontsCommand, {
                  fontNames: fonts,
                  requestId: requestId,
                  config: {
                    detectorType: fontsConfig.detectorType,
                    fontsPerBatch: fontsConfig.fontsPerBatch,
                    delayBetweenBatchesMs: fontsConfig.delayBetweenBatchesMs,
                    minFontsPerBatch: fontsConfig.minFontsPerBatch,
                    maxFontsPerBatch: fontsConfig.maxFontsPerBatch,
                    frameBudgetMs: fontsConfig.frameBudgetMs,
                    frameHistorySize: fontsConfig.frameHistorySize,
                    adaptiveBatchEnabled: fontsConfig.adaptiveBatchEnabled
                  }
                }, _events_WorkerResponse__WEBPACK_IMPORTED_MODULE_2__.WorkerResponse.fontDetectionResponse, function (response) {
                  return _this._handleResponse(requestId, response, startTime);
                }, true);
              }));
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function scan(_x) {
        return _scan.apply(this, arguments);
      }
      return scan;
    }())
  }, {
    key: "_handleResponse",
    value: function _handleResponse(requestId, response, startTime) {
      var pending = this._pendingRequests.get(requestId);
      if (!pending) return;
      this._pendingRequests["delete"](requestId);
      var resolve = pending.resolve,
        reject = pending.reject;
      if (response.success) {
        var duration = performance.now() - startTime;
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].trace("".concat(this._logsTag, " Worker scan completed in ").concat(duration.toFixed(2), "ms. Detected ").concat(response.detectedFonts.length, " fonts."));
        resolve(response.detectedFonts);
      } else {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("".concat(this._logsTag, " Worker scan failed:"), response.error);
        reject(new Error(response.error || 'Font scanning failed'));
      }
    }

    /**
     * Release resources
     */
  }, {
    key: "release",
    value: (function () {
      var _release = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this._released = true;
              this._pendingRequests.forEach(function (_ref3) {
                var reject = _ref3.reject;
                return reject(new Error("Scanner released"));
              });
              this._pendingRequests.clear();
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function release() {
        return _release.apply(this, arguments);
      }
      return release;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/font/collection/v2/FontsVersion2.js":
/*!************************************************************************!*\
  !*** ./src/main/collectors/static/font/collection/v2/FontsVersion2.js ***!
  \************************************************************************/
/***/ (function(module) {

// fontsVersion2.js

// === FONTS STATISTICS ===
// Total unique fonts: 3669

// It structured into map of font families and fonts because v1, but there is no real use for it in v2
var fontsVersion2 = {
  "unlabled": [
  // === FONTS FROM V1 ===
  "adobe jenson", "adobe text", "albertus", "aldus", "alexandria", "algerian", "american typewriter", "antiqua", "arno", "aster", "aurora", "baskerville", "bell", "bembo", "bembo schoolbook", "benguiat", "berkeley old style", "bernhard modern", "bodoni", "book antiqua", "bookman", "bordeaux roman", "californian fb", "calisto", "capitals", "cambria", "cartier", "caslon", "caslon antique", "catull", "centaur", "century old style", "century schoolbook", "new century schoolbook", "chaparral", "charis sil", "cheltenham", "clearface", "cochin", "colonna", "computer modern", "concrete roman", "constantia", "cooper black", "corona", "dejavu fonts", "ecotype", "elephant", "espy serif", "excelsior", "fairfield", "ff scala", "footlight", "freeserif", "friz quadrata", "garamond", "gentium", "georgia", "gloucester", "goudy old style", "goudy schoolbook", "goudy pro font", "granjon", "heather", "hercules", "high tower text", "hiroshige", "hoefler text", "humana serif", "imprint", "ionic no. 5", "janson", "jenson", "joanna", "korinna", "kursivschrift", "legacy serif", "lexicon", "liberation fonts", "linux libertine", "literaturnaya", "lucida", "melior", "memphis", "miller", "minion", "didone", "mona lisa", "mrs eaves", "ms serif", "new york", "nimbus roman", "nps rawlinson roadway", "ocr a extended", "palatino", "perpetua", "plantin", "plantin schoolbook", "playbill", "poor richard", "rawlinson roadway", "renault", "requiem", "roman", "rotis serif", "sabon", "seagull", "sistina", "souvenir", "stix", "stone informal", "stone serif", "sylfaen", "times new roman", "times", "trajan", "trinit", "trump mediaeval", "utopia", "vale type", "bitstream vera", "versailles", "wanted", "weiss", "wide latin", "windsor", "xits", "apex", "archer", "athens", "city", "cholla slab", "clarendon", "courier", "egyptienne", "guardian egyptian", "lexia", "museo slab", "rockwell", "nilland", "skeleton antique", "tower", "allegro", "amiri", "athelas", "belwe", "bookerly", "bulmer", "caledonia", "constructium", "copperplate Gothic", "dejaVu serif", "didot", "droid serif", "emerson", "galliard", "iowan old style", "itc lubalin graph", "ibm plex", "ibm plex serif", "junicode", "literata", "lucida bright", "rotis", "serifa", "source serif pro", "theano", "zilla slab", "bitstream charter", "roboto slab", "university of california old style", "berkeley old style", "candida", "doves", "hightower", "liberation sans", "lucida grande", "vera sans", "vercetti regular", "computer modern sans", "rotis ii sans", "sherbrooke", "tilson", "triplex", "abadi", "agency fb", "akzidenz grotesk", "aptifer", "arial", "arial unicode ms", "avant garde", "avenir", "bank gothic", "barmeno", "bauhaus", "bell centennial", "bell gothic", "benguiat gothic", "berlin sans", "beteckna", "brandon grotesque", "cabin", "cafeteria", "calibri", "century gothic", "charcoal", "chicago", "clearface gothic", "clearview", "co headline", "co text", "compacta", "corbel", "ff dax", "dotum", "droid", "dyslexie", "ecofont", "eras", "espy sans", "nu sans", "eurocrat", "eurostile", "ff meta", "flama", "formata", "freesans", "franklin gothic", "frutiger", "futura", "geneva", "gill sans", "gill sans schoolbook", "gotham", "handel gothic", "denmark", "haettenschweiler", "hei", "helvetica", "helvetica neue", "swiss 721", "highway gothic", "hiroshige sans", "hobo", "impact", "industria", "interstate", "johnston", "kabel", "lato", "legacy sans", "lexia readable", "meiryo", "microgramma", "motorway", "ms sans serif", "museo sans", "myriad", "neutraface", "neuzeit s", "news gothic", "nimbus sans l", "nina", "optima", "parisine", "pricedown", "prima sans", "pt sans", "rail alphabet", "revue", "roboto", "rotis sans", "ff scala sans", "segoe", "skia", "souvenir gothic", "stone sans", "syntax", "tahoma", "template gothic", "tiresias", "trade gothic", "transport alphabet", "trebuchet ms", "trump gothic", "tw cen", "twentieth century", "ubuntu font family", "univers", "zurich", "verdana", "virtue", "acumin", "akzidenz-grotesk", "amplitude", "andal sans", "antique olive", "archivo", "austria", "itc avant garde", "itc avant garde gothic", "averta", "bahnschrift", "barlow", "bobcaygeon", "breeze sans", "cantarell", "caractres", "cera Pro", "cisco sans", "adobe clean", "clear sans", "comic neue", "dejaVu sans", "din 1451", "dosis", "drogowskaz", "droid sans", "dubai", "e-ukraine", "fira sans", "folio", "gerstner programm", "grand slang", "harmonyos sans", "ibm plex sans", "inter", "ge inspira", "karrik", "klavika", "libre franklin", "linux biolinum", "fs me", "ff meta", "montserrat", "national trust", "nokia pure", "noto sans", "nunito sans", "open sans", "overpass", "oxygen", "poppins", "proxima nova", "radis sans", "raleway", "Selawik", "semplicit", "seravek", "oneplus", "snv", "source sans pro", "sweden sans", "thesis sans", "transport", "tratex", "unica", "universalis", "vag rounded", "whitney", "aphont", "ff clan", "gilroy", "greycliff", "nobel", "andale mono", "anonymous", "consolas", "courierhp", "courier new", "courierps", "fontcraft courier", "everson mono", "fedra mono", "fixed", "fixedsys", "fixedsys excelsior", "inconsolata", "hyperfont", "letter gothic", "magnetic ink character recognition", "menlo", "miriam fixed", "monaco", "monofur", "monospace", "ms gothic", "ms mincho", "nimbus mono l", "ocr-a", "ocr-b", "orator", "ormaxx", "pragmatapro", "prestige elite", "profont", "proggy programming fonts", "small fonts", "sydnie", "terminal", "tex gyre cursor", "um typewriter", "william monospace", "balloon", "brush script", "dragonwick", "choc", "dom casual", "mistral", "papyrus", "tempus sans", "amazone", "ams euler", "apple chancery", "aristocrat", "bickley script", "civitype", "codex", "edwardian script", "forte", "french script", "kuenstler script", "monotype corsiva", "old english text mt", "palace script", "park avenue", "scriptina", "shelley volante", "vivaldi", "vladimir script", "zapf chancery", "zapfino", "andy", "ashley script", "chalkboard", "comic sans", "cezanne", "fontoon", "irregularis", "jefferson", "kristen", "lucida handwriting", "rage italic", "rufscript", "scribble", "soupbone", "tekton", "alecko", "cinderella", "cupola", "curlz", "magnificat", "script", "american text", "cloister black", "fraktur", "goudy text", "old english text", "wedding text", "aegyptus", "aharoni", "aisha", "amienne", "batak script", "chandas", "hanacaraka", "japanese gothic typeface", "jomolhari", "kochi font", "lontara script", "maiola", "minch", "mona font", "nassim", "nastaliq navees", "neacademia", "perpetua greek", "simsun", "skolar", "skolar devanagari", "sundanese unicode", "sutturah", "tai le valentinium", "tengwar", "tibetan machine uni", "tunga", "wadalab", "apple symbols", "bookshelf symbol 7", "braille", "commercial pi", "corel", "erler dingbats", "hm phonetic", "mathematical pi", "morse code", "opensymbol", "richstyle", "symbol", "symbolps", "wingdings", "webdings", "zapf dingbats", "abracadabra", "ad lib", "allegro", "andreas", "arnold bcklin", "astur", "balloon pop outlaw black", "banco", "beat", "braggadocio", "broadway", "ellington", "exablock", "exocet", "fig script", "gigi", "harlow solid", "harrington", "horizon", "jim crow", "jokerman", "juice", "lo-type", "magneto", "megadeth", "neuland", "peignot", "ravie", "san francisco", "showcard gothic", "snap", "stencil", "umbra", "westminster", "willow", "bagel", "lithos", "aldhabi", "andalus", "angsana new", "angsanaupc", "aparajita", "arabic typesetting", "arial narrow", "arial rounded mt bold", "baskerville old face", "batang", "batangche", "bell mt", "berlin sans fb", "berlin sans fb demi", "bernard mt condensed", "blackadder itc", "bodoni mt", "bodoni mt poster compressed", "bookman old style", "bradley hand itc", "britannic bold", "browallia new", "browalliaupc", "brush script mt", "buxton sketch", "calisto mt", "cambria math", "candara", "castellar", "century", "chiller", "colonna mt", "comic sans ms", "cordia new", "cordiaupc", "curlz mt", "daunpenh", "david", "dfkai-sb", "dilleniaupc", "dokchampa", "dotumche", "ebrima", "edwardian script itc", "engravers mt", "eras bold itc", "eras demi itc", "eras light itc", "eras medium itc", "estrangelo edessa", "eucrosiaupc", "euphemia", "fangsong", "felix titling", "footlight mt light", "franklin gothic demi", "franklin gothic demi cond", "franklin gothic medium cond", "frankruehl", "freesiaupc", "freestyle script", "french script mt", "gabriola", "gadugi", "gautami", "gill sans mt", "gill sans mt ext condensed bold", "gisha", "gloucester mt extra condensed", "goudy stout", "gulim", "gulimche", "gungsuh", "gungsuhche", "imprint mt shadow", "informal roman", "irisupc", "iskoola pota", "jasmineupc", "javanese text", "juice itc", "kaiti", "kalinga", "kartika", "khmer ui", "kodchiangupc", "kokila", "kristen itc", "kunstler script", "lao ui", "latha", "leelawadee", "leelawadee ui", "levenim mt", "lilyupc", "lucida bright", "lucida calligraphy", "lucida console", "lucida fax", "lucida sans", "lucida sans typewriter", "lucida sans unicode", "maiandra gd", "malgun gothic", "mangal", "marlett", "matura mt script capitals", "meiryo ui", "microsoft himalaya", "microsoft jhenghei", "microsoft jhenghei ui", "microsoft new tai lue", "microsoft phagspa", "microsoft sans serif", "microsoft tai le", "microsoft uighur", "microsoft yahei", "microsoft yahei ui", "microsoft yi baiti", "mingliu", "mingliu-extb", "mingliu_hkscs", "mingliu_hkscs-extb", "miriam", "modern", "modern no. 20", "mongolian baiti", "moolboran", "ms outlook", "ms pgothic", "ms pmincho", "ms reference sans serif", "ms reference specialty", "ms ui gothic", "mt extra", "mv boli", "myanmar text", "narkisim", "niagara engraved", "niagara solid", "nirmala ui", "nsimsun", "nyala", "onyx", "palace script mt", "palatino linotype", "parchment", "perpetua titling mt", "plantagenet cherokee", "pmingliu", "pmingliu-extb", "pristina", "raavi", "rockwell extra bold", "rod", "sakkal majalla", "script mt bold", "segoe marker", "segoe print", "segoe script", "segoe ui", "segoe ui emoji", "segoe ui symbol", "shonar bangla", "shruti", "simhei", "simplified arabic", "simplified arabic fixed", "simsun-extb", "sitka banner", "sitka display", "sitka heading", "sitka small", "sitka subheading", "sitka text", "sketchflow print", "snap itc", "system", "tempus sans itc", "traditional arabic", "tw cen mt", "tw cen mt condensed extra bold", "urdu typesetting", "utsaah", "vani", "vijaya", "viner hand itc", "vrinda", "yu gothic", "yu mincho", "yu mincho demibold", "bitstream vera sans mono", "cascadia code", "century schoolbook monospace", "comic mono", "computer modern mono", "typewriter", "curier", "cousine", "dejavu sans mono", "droid sans mono", "envy code r", "fantasque sans", "fira code", "fira mono", "freemono", "gnu freefont", "go mono", "hack", "ibm monochrome display adapter", "ibm mda", "ibm plex mono", "input", "iosevka", "jetbrains mono", "juliamono", "liberation mono", "nk57 monospace", "noto mono", "operator mono", "overpass mono", "oxygen mono", "pt mono", "recursive mono", "roboto mono", "sf mono", "source code pro", "spleen", "terminus", "ubuntu mono", "victor mono", "wumpus mono", "Teamviewer11", "Teamviewer12", "Teamviewer13", "Teamviewer14", "Teamviewer15",
  // === FONTS FROM V2 ===
  "36p Kana Demibold", "8Pin Matrix", "A Sensible Armadillo", "A bite", "A.Lewis", "ABIGAIL", "ABSALOM", "ABeeZee", "ADMUI2Lg", "ADMUI2Sm", "ADMUI3Lg", "ADMUI3Sm", "AG", "AGA Arabesque", "AGA Arabesque Desktop", "AIGDT", "AL Cinderella", "ALS Script", "AMGDT", "ANDROID ROBOT", "AR BERKLEY", "AR BLANCA", "AR BONNIE", "AR CARTER", "AR CENA", "AR CHRISTY", "AR DARLING", "AR DECODE", "AR DELANEY", "AR DESTINE", "AR ESSENCE", "AR HERMANN", "AR JULIAN", "AR Sans Serif", "ARDS1", "AS-TTDurga", "AT*Fujiyama", "AT*Fujiyama2", "AV-Font-Ben1", "AV-Font-Guj1", "AV-Font-Hin1", "AV-Font-Kan1", "AV-Font-Mal1", "AV-Font-Sin", "AV-Font-Sin1", "AV-Font-Symbol", "AV-Font-Tam1", "AV-Web-Hin1", "AV-Web-Tam1", "AV-Web-Tel1", "AVGmdBU", "AajaxSurrealFreak", "Aardvark Cafe", "AardvarkBold", "Abduction2002", "Abel", "Aberration", "Aboriginal Sans", "Aboriginal Serif", "Abril Fatface", "Abscissa", "Abstrakt", "Abyssinica SIL", "AcadEref", "Academy Engraved LET Plain:1.0", "Accanthis ADF Std", "Accanthis ADF Std No2", "Accanthis ADF Std No3", "Accent SF", "Accord Heavy SF", "Accord Light SF", "Accord SF", "AcmeFont", "Action Jackson", "Adamsky SF", "AddJazz", "AdineKirnberg", "AdineKirnberg-Script", "Adler", "Admisi Display SSi", "Adobe Arabic", "Adobe Caslon", "Adobe Caslon Pro", "Adobe Caslon Pro SmBd", "Adobe Devanagari", "Adobe Fan Heiti Std", "Adobe Fan Heiti Std B", "Adobe Fangsong Std", "Adobe Fangsong Std R", "Adobe Garamond", "Adobe Garamond Pro", "Adobe Gothic Std", "Adobe Gothic Std B", "Adobe Gurmukhi", "Adobe Hebrew", "Adobe Heiti Std", "Adobe Heiti Std R", "Adobe Kaiti Std", "Adobe Kaiti Std R", "Adobe Ming Std", "Adobe Ming Std L", "Adobe Myungjo Std", "Adobe Myungjo Std M", "Adobe Naskh", "Adobe Pi Std", "Adobe Song Std", "Adobe Song Std L", "Aerovias Brasil NF", "African", "Aftermath", "Aftershock Debris", "Ahnberg", "Aileron", "Air Conditioner", "Airstream", "Airstream NF", "Akaash", "Akhbar MT", "Akshar Unicode", "AksharUnicode", "Al Bayan", "Al Bayan Plain", "Al Nile", "Al Tarikh", "Albany AMT", "Alegreya Sans SC", "AlekyaBold", "AlekyaExtraBold", "AlekyaMedium", "AlekyaThin", "Aleo", "Alex Brush", "Alexandra Script", "Alfredo", "Alfredo's Dance", "Alibi", "Alice and the Wicked Monster", "Alien Encounters", "All Caps", "Alligator Puree", "Allura", "Almonte Snow", "Alpha CLOWN", "Alternate Gothic No2 D", "AlternateGothic2 BT", "Amadeus", "Amatic", "Amatic SC", "Amazone BT", "Ambages", "AmdtSymbols", "AmerType Md BT", "Amerika", "Amerika Alternates", "Amerika Sans", "Amethyst", "Amethyst Zucchini", "Amiri Quran", "Amudham", "Analgesics", "AnandapatraCMJ", "AnastasiaScript", "Ancuu", "Andale Mono IPA", "Andale Sans for VST", "Andong", "Angelica", "Angiang", "Angioma AOE", "Angleterre Book - DGL", "Angostura", "Angstrom", "AnjaliOldLipi", "Annabelle", "Annie BTN", "Anonymice Powerline", "AntFarm GoneCamping", "AnticFont", "Antonio", "Apple Boy BTN", "Apple Braille", "Apple Casual", "Apple Color Emoji", "Apple LiGothic", "Apple LiSung", "Apple SD Gothic Neo", "AppleGothic", "AppleMyungjo", "Aquaduct Plain", "Aquaduct Warp", "Arabic Transparent", "Archicoco", "Architects Daughter", "Archive", "Arctic", "Argos MF", "ArhialkhanMJ", "ArhialkhanOMJ", "Arial (Arabic)", "Arial AMU", "Arial Baltic", "Arial CE", "Arial CYR", "Arial Greek", "Arial Hebrew", "Arial Hebrew Scholar", "Arial MT", "Arial Nova", "Arial Nova Cond", "Arial Symbol", "Arial TUR", "Arial monospaced for SAP", "Arimo", "Arimo Bold Italic for Powerline", "Arimo Bold for Powerline", "Arimo Italic for Powerline", "Arimo for Powerline", "Ariston", "Arkhip", "Army", "Arno Pro", "Arno Pro Smbd", "Arrobatherapy", "Arrus BT", "Arvo", "Asana Math", "Asenine", "Ashwariya", "Asimov", "Atlas", "AtraiMJ", "AtraiOMJ", "Atzur", "Augusta", "Aurora Cn BT", "Autour One", "Autumn", "AvantGarde Bk BT", "AvantGarde Md BT", "Avanti", "Avenir Next", "Avenir Next W1G Demi", "AvenirBlk_PFL", "AvenirLt_PFL", "AvenirMd_PFL", "Averia", "Averia Sans", "Averia Serif", "Avinor", "Ayuthaya", "B095", "BATAVIA", "BJCree Uni", "BN Jinx", "BN Machine", "BN-TTDurga", "BOUTON International Symbols", "BPG Classic 99U", "BPG Paata Khutsuri U", "BRADDON", "Baamini", "Baby Kruffy", "BacktalkSerif BTN", "Baclieu", "BadaBoom BB", "Baghdad", "Bahiana", "Baiduan Number", "BaluBold", "BaluBrush", "BaluScript", "Bamini", "Bangkok Cirilica", "Bangla MN", "Bangla Sangam MN", "BankGothic Lt BT", "BankGothic Md BT", "Banmai Times", "Baoli SC", "Baron Neue", "Barrio", "Bastion", "BauerBodni BT", "Bazooka", "Beatnik SF", "Becky", "Beirut", "Belfast Heavy SF", "Belfast Light SF", "Belfast SF", "Bellota", "Belwe Bd BT", "Belwe Cn BT", "Belwe Lt BT", "Benguiat Bk BT", "Bentham", "Berkshire Swash", "Berling", "BerlingRoman", "BernhardFashion BT", "BernhardMod BT", "Bevan", "BhagirathiMJ", "BhagirathiOMJ", "BhairabMJ", "BhairabOMJ", "Bhuma", "BiauKai", "Bickham Script One", "Bickham Script Pro 3", "Bickham Script Pro Semibold", "Bickham Script Two", "Bienhoa", "Bifurk", "Big Caslon", "Biko", "Binhdinh", "Binhlong", "BinnerD", "Birch Std", "Bitstream Vera Sans", "Bitstream Vera Serif", "BlackJackRegular", "Blackletter686 BT", "Blackmoor LET", "Blackmoor LET Plain:2.0", "Blackoak Std", "Blackout", "Blade Runner Movie Font", "BlairMdITC TT", "Blockbuster", "Bobcat", "Bodoni MT Poste...d", "Bodoni Ornaments", "Bold Italic Art", "BolsterBold", "BongshaiMJ", "BongshaiOMJ", "Boogaloo", "Bookshelf Symbol 1", "Bookshelf Symbol 2", "Bookshelf Symbol 3", "BorakMJ", "BorakOMJ", "Bordeaux Roman Bold LET", "Bordeaux Roman Bold LET Plain", "Bordeaux Roman Bold LET Plain:1.0", "Borealis", "BorhalMJ", "Bowlby One SC", "Bradley Hand", "BrahmaputraMJ", "Brandish", "Bree Serif", "BriLliant", "Broadway BT", "Broadway Copyist", "Broadway Copyist Perc", "Broadway Copyist Text Ext", "Broken Planewing", "Brush Script Std", "Brussels", "Bubblegum Sans", "BuiltTitlingRg-Bold", "BuiltTitlingRg-BoldItalic", "BuiltTitlingRg-Regular", "BurigangaKamalaOMJ", "BurigangaMJ", "BurigangaOMJ", "BurigangaSushreeMJ", "BurigangaSushreeOMJ", "Burst My Bubble", "C-Medium", "C-MediumHWL", "CAC Champagne", "CAMPBELL", "CASMIRA", "CATIA Symbols", "CDT Khmer", "CHANL", "CL", "CLARENCE", "CSD16", "CSongGB18030C-Light", "CSongGB18030C-LightHWL", "CZEC", "CabinSketch", "Caflisch Script Pro", "Cairo SF", "Caladea", "Calligraffitti", "Calligraph", "Calligraph421 BT", "Calligraphic", "Calvin", "Camau", "Camranh", "Candles", "Candy Round BTN", "Candy Round BTN Cond", "Canter Bold 3D", "Canter Bold Strips", "Cantho", "Carbon Block", "Carlito", "Carolina", "Carrois Gothic SC", "Castro Script PERSONAL USE ONLY", "Casual", "Cataneo BT", "Caviar Dreams", "CentSchbook BT", "Century Schoolbook L", "Ceremonious Two", "Chalkboard SE", "Chalkduster", "Chancery Cursive", "ChandrabatiMJ", "ChandrabatiMatraMJ", "ChandrabatiMatraOMJ", "ChandrabatiOMJ", "ChandrabatiSushreeMJ", "Chaparral Pro", "Charcoal CY", "Charis SIL Compact", "Charlemagne Std", "Charter", "Chess Alpha", "Chess Berlin", "Chess Marroquin", "Chess Maya", "Chess Merida", "Chewy", "Chinyen", "Chipotle", "ChitraMJ", "ChitraOMJ", "ChitraSMJ", "ChondanaMJ", "ChondanaOMJ", "Cinzel", "Cir Arial", "CityBlueprint", "Clarendon BT", "Clarendon Blk BT", "Clarendon Cn BT", "Clarendon Hv BT", "Clarendon Lt BT", "CloisterBlack BT", "Clubland", "Coda", "Code2000", "Code39AzaleaNarrow1", "Code39AzaleaNarrow2", "Code39AzaleaNarrow3", "Code39AzaleaRegular1", "Code39AzaleaRegular2", "Code39AzaleaRegular3", "Code39AzaleaWide1", "Code39AzaleaWide2", "Code39AzaleaWide3", "Colbert", "ColdSpaghetti BTN", "Comfortaa", "Comic Relief", "CommercialPi BT", "CommercialScript BT", "Commons", "Complete in Him", "Complex", "ConcursoItalian BTN", "Cookie", "Coolsville", "Coolvetica", "Cooper Std", "Copperplate", "CopprplGoth BT", "Copyist", "Corporate", "Corsiva Hebrew", "Cortoba", "CountryBlueprint", "Courier MM Screenwriter", "Courier MM Screenwriter BoldIt", "Courier New (Arabic)", "Courier New Baltic", "Courier New CE", "Courier New CYR", "Courier New Greek", "Courier New TUR", "Courier Std", "Courier10 BT", "Cousine Bold Italic for Powerline", "Cousine Bold for Powerline", "Cousine Italic for Powerline", "Cousine for Powerline", "Cracked", "Cracked Johnnie", "Creepygirl", "Cronos Pro", "Crystal", "Cumberland AMT", "Cut Me Out", "Cuulong", "DFKGothic-Md", "DFMaruGothic-Md", "DIN 1451 Mittelschrift", "DIN Alternate", "DIN-BlackAlternate", "DIN-Bold", "DIN-Light", "DIN-LightAlternate", "DIN-Medium", "DIN-MediumAlternate", "DIN-Regular", "DIN-RegularAlternate", "DINPro-Black", "DINPro-Bold", "DINPro-Light", "DINPro-Medium", "DINPro-Regular", "DS Crystal", "DV-TTYogesh", "DV1-TTYogesh", "DYMO Symbols", "DYMObvba", "Daclac", "Damascus", "Dancing Script", "Dancing Script OT", "Darlin BTN", "David Transparent", "Dayton", "DecoType Naskh", "DecoType Naskh Extensions", "DecoType Naskh Special", "DecoType Naskh Swashes", "DecoType Naskh Variants", "DecoType Thuluth", "Decor", "Deepa", "Deepak", "DejaVu Math TeX Gyre", "DejaVu Sans Mono Bold Oblique for Powerline", "DejaVu Sans Mono Bold for Powerline", "DejaVu Sans Mono Oblique for Powerline", "DejaVu Sans Mono for Powerline", "Deneane", "DengXian", "Desdemona", "Detente", "Devanagari MT", "Devanagari Sangam MN", "DhakarchithiMJ", "DhakarchithiOMJ", "DhanshirhiMJ", "DhanshirhiOMJ", "DholeshwariMJ", "DholeshwariOMJ", "DhonooMJ", "DhonooOMJ", "DhorolaMJ", "DhorolaOMJ", "DigifaceWide", "Digifit", "Digital Readout Upright", "Dingbats", "Dirty Headline", "Distant Galaxy", "Divya", "Diwan Kufi", "Diwan Thuluth", "Diwani Bent", "Diwani Letter", "Diwani Simple Outline 2", "Dollar", "Dominican", "Dot", "Dot-Matrix", "Doulos SIL", "Drivebye 1", "Drivebye 2", "Drivebye 3", "Drivebye 4", "Droid Arabic Naskh", "Droid Naskh Shift", "Droid Naskh Shift Alt", "Droid Naskh System UI", "Droid Naskh UI", "Droid Sans Arabic", "Droid Sans Armenian", "Droid Sans Ethiopic", "Droid Sans Fallback", "Droid Sans Georgian", "Droid Sans Hebrew", "Droid Sans Japanese", "Droid Sans Mono Dotted for Powerline", "Droid Sans Mono Slashed for Powerline", "Droid Sans Mono for Powerline", "Droid Sans Thai", "DroidSansFallback", "Ducmy", "Dutch801 Rm BT", "Dutch801 XBd BT", "Dynalight", "DynameBlackSSK", "Dyuthi", "ELANGO-TML-Panchali-Normal", "ELEGANCE", "ELLIS", "ENGL", "EQUIS", "ESTO", "EXCESS", "Eccentric Std", "Egyptian710 BT", "Ekushey Punarbhaba", "Ela Sans Light Caps", "ElegantIcons", "Embassy BT", "Emily Austin", "Emma Script Mvb", "Emmett", "English157 BT", "EngraverFontExtras", "EngraverFontSet", "EngraverTextH", "EngraverTextNCS", "EngraverTextT", "EngraverTime", "Enliven", "Ethiopia Jiret", "Ethnocentric", "Euclid", "Euclid Extra", "Euclid Fraktur", "Euclid Math One", "Euclid Math Two", "Euclid Symbol", "Euphemia UCAS", "Euro Sign", "EuroRoman", "Ezra SIL", "Ezra SIL SR", "FELIZ", "FFF Tusj", "FML-Akhila", "FML-Indulekha", "FML-IndulekhaHeavy", "FML-Karthika", "FML-Leela", "FML-LeelaHeavy", "FML-Mohini", "FML-Nanditha", "FML-Padmanabha", "FML-Revathi", "FML-Sruthy", "FML-TTAathira", "FML-TTAmbili", "FML-TTAnakha", "FML-TTAnjali", "FML-TTAparna", "FML-TTAshtamudi", "FML-TTAshtamudiExBold", "FML-TTAswathi", "FML-TTAtchu", "FML-TTAyilyamBold", "FML-TTBeckalBold", "FML-TTBhavana", "FML-TTChandrika", "FML-TTChithira", "FML-TTChithiraHeavy", "FML-TTDevika", "FML-TTGauri", "FML-TTGauriHeavy", "FML-TTGeethika", "FML-TTGopika", "FML-TTGuruvayur", "FML-TTIndulekha", "FML-TTIndulekhaHeavy", "FML-TTJaya", "FML-TTJyothy", "FML-TTJyotsna", "FML-TTKala", "FML-TTKamini", "FML-TTKanika", "FML-TTKarthika", "FML-TTKaumudi", "FML-TTKeerthi", "FML-TTLeela", "FML-TTLeelaHeavy", "FML-TTMadhaviExBold", "FML-TTMalavika", "FML-TTMangalaExBold", "FML-TTMayoori", "FML-TTNalini", "FML-TTNandini", "FML-TTNanditha", "FML-TTNarmadaExBold", "FML-TTNila", "FML-TTOnam", "FML-TTPeriyar", "FML-TTPooram", "FML-TTPoornima", "FML-TTRavivarma", "FML-TTRevathi", "FML-TTRohini", "FML-TTSabari", "FML-TTSankara", "FML-TTSarada", "FML-TTSruthy", "FML-TTSugatha", "FML-TTSuparna", "FML-TTSurya", "FML-TTSwathyBold", "FML-TTThakazhi", "FML-TTTheyyam", "FML-TTThiruvathira", "FML-TTThunchan", "FML-TTVaisali", "FML-TTVarsha", "FML-TTVeenaHeavy", "FML-TTVinay", "FML-TTVisakham", "FML-TTVishu", "FML-TTYashasri", "FMLTTAathira", "FREH", "FTEasci1", "FTEasci1-f", "FTEasci2", "FTEasci2-f", "FTEbaudo", "FTEbaudo-f", "FTEebcd1", "FTEebcd1-f", "FTEebcd2", "FTEebcd2-f", "FTEspec", "FTEspec-f", "FZLanTingHeiS-UL-GB", "Fabrica", "Fanwood", "Farah", "Farisi", "Fascinate", "Fences", "Ferro Rosso", "Finale AlphaNotes", "Finale Copyist Text Ext", "Finale Mallets", "Finale Numerics", "Finale Percussion", "Finger Paint", "Fingerpop", "Fira Mono Bold for Powerline", "Fira Mono Medium for Powerline", "Firenze SF", "Fixed Miriam Transparent", "Flamenco", "FlemishScript BT", "Floraless", "Flubber", "Fluffy Slacks BTN", "Folio XBd BT", "FontAwesome", "FordLineDraw", "Formal436 BT", "Francois One", "Frankfurter Venetian TT", "Fredericka the Great", "Freebooter Script", "Freehand", "Freehand521 BT", "Freehand575 BT", "Fren", "Futura Book BT", "Futura Book Italic BT", "Futura Light BT", "Futura Light Condensed BT", "Futura Light Italic BT", "Futura Md BT", "Futura Medium BT", "GB18030 Bitmap", "GDT", "GENISO", "GENUINE", "GF Zemen Unicode", "GFS Artemisia", "GFS Baskerville", "GFS BodoniClassic", "GFS Complutum", "GFS Didot", "GFS Didot Classic", "GFS Gazis", "GFS Neohellenic", "GFS Olga", "GFS Porson", "GFS Solomos", "GFS Theokritos", "GJ-TTAvantika", "GLYPHICONS Halflings", "GROBOLD", "Galatia SIL", "Galeforce BTN", "GaneshBlack", "GaneshBold", "GaneshExtraBold", "GaneshMedium", "GaneshNarrow", "GaneshThin", "GangaMJ", "GangaOMJ", "GangaSagarMJ", "Garamond Premier Pro", "Garamond Premr Pro", "Garamond Premr Pro Smbd", "Garuda", "Gauge", "Gayathri", "Gazzarelli", "Geeza Pro", "Gelfling SF", "Gen W01", "Gentium Basic", "Gentium Book Basic", "GentiumAlt", "Georgia Pro", "Georgia Pro Cond", "Geotype TT", "Germ", "Germanica", "GhorautraMJ", "GhorautraOMJ", "Giadinh", "Giddyup Std", "Gidole", "Gill Sans Nova", "Gill Sans Nova Cond", "Gill Sans Nova Cond XBd", "Gillius ADF", "Gillius ADF Cd", "Gillius ADF No2", "Gillius ADF No2 Cd", "Giolinh", "GiovanniITCTT", "Glegoo", "Glockenspiel", "Gocong", "Good Times", "GoomtiMJ", "GoraiMJ", "GoraiOMJ", "Gotham Narrow Ultra", "Gothic720 BT", "Gothic720 Lt BT", "GothicE", "GothicG", "GothicI", "GothicNo13 BT", "GoudyHandtooled BT", "Grand Hotel", "Gravity", "Great Vibes", "Greek Diner Inline TT", "GreekC", "GreekS", "Gridnik", "GrilledCheese BTN", "GrilledCheese BTN Toasted", "GrilledCheese BTN Wide Blk", "Gujarati MT", "Gujarati Sangam MN", "GungSeo", "Gunplay", "Gurmukhi MN", "Gurmukhi MT", "Gurmukhi Sangam MN", "Guttman Yad", "HANA", "HELTERSKELTER", "HERMAN", "HGHangle", "HGHeiseiKakugothictaiW3", "HGHeiseiKakugothictaiW5", "HGHeiseiKakugothictaiW9", "HGHeiseiMinchotaiW3", "HGHeiseiMinchotaiW9", "HGMinchoL", "HGP-AGothic2-Latin1K", "HGPHeiseiKakugothictaiW3", "HGPHeiseiKakugothictaiW5", "HGPHeiseiKakugothictaiW9", "HGPHeiseiMinchotaiW3", "HGPHeiseiMinchotaiW9", "HGPMinchoL", "HGSHeiseiKakugothictaiW3", "HGSHeiseiKakugothictaiW5", "HGSHeiseiKakugothictaiW9", "HGSHeiseiMinchotaiW3", "HGSHeiseiMinchotaiW9", "HGSMinchoL", "HKSCS", "HKSCS-ExtB", "HP PSG", "HP Simplified", "HUNTSON", "HYSWLongFangSong", "HYSerif", "Hadong", "HaldaMJ", "HaldaOMJ", "Halong", "Hand Me Down S (BRK)", "Handwriting - Dakota", "Hannotate SC", "Hannotate TC", "Hansen", "HanziPen SC", "HanziPen TC", "HariSree", "Harry P", "Harvest", "HarvestItal", "Haxton Logos TT", "HeadLineA", "Heather BTN", "Heather Script One", "Heavy", "Heavy Heap", "Hebar", "HeiT", "Heiti SC", "Heiti TC", "HelvLight", "HelveticaNeue", "HelveticaNeueLT Std", "HelveticaNeueVN-Bold", "Henny Penny", "Herculanum", "Highlight LET", "Hiragino Kaku Gothic Pro", "Hiragino Mincho Pro", "Hiragino Sans", "Hobo Std", "Hoefler Text Ornaments", "Hoian", "Holiday Springs BTN", "Holiday Springs BTN Quill", "HolidayPi BT", "Hollywood Hills", "Hombre", "HooglyMJ", "HooglyOMJ", "Hot Mustard BTN", "Hot Mustard BTN Poster", "HucklebuckJF", "Hue", "Humanist", "Humanst521 BT", "Humanst521 XBd BT", "Huxley Titling", "Hypatia Sans Pro", "IBM3270", "IDAutomationPDF417n2", "IDAutomationPDF417n3", "IDAutomationPDF417n4", "IDAutomationPDF417n5", "IM FELL DW Pica", "IMG Baby", "IMG Extreme", "IMG Love", "IMG Seasons", "IMG Symbols", "IMG Travel", "INSPECTIONXPERT GDT FRAMES", "INSPECTIONXPERT GDT NOFRMS", "IPAGothic", "IPAMincho", "IPAPGothic", "IPAPMincho", "IPAexGothic", "IPAexMincho", "IRIS", "ISABELLE", "ISOCP", "ISOCP2", "ISOCP3", "ISOCPEUR", "ISOCT", "ISOCT2", "ISOCT3", "ISOCTEUR", "ITAN", "ITF Devanagari", "ITF Devanagari Demi", "ITF Devanagari Marathi", "ITF Devanagari Marathi Demi", "Ice kingdom", "IchamotiMJ", "IchamotiOMJ", "IguanaLover BTN", "Impregnable Personal Use Only", "InaiMathi", "Incised901 BdCn BT", "Incised901 Ct BT", "Incised901 Nd BT", "Incised901 NdIt BT", "Inconsolata for Powerline", "Inconsolata-dz for Powerline", "Inconsolata-g for Powerline", "Inder", "Indie Flower", "Induction", "Industrial736 BT", "Iowan Old Style Titling", "Ital", "Italianate", "Italic", "Italic Outline Art", "ItalicC", "ItalicT", "JACKIE", "JF Armenian Serif", "JF Georgian Contrast", "JLS Data GothicC  NC", "JLS Data GothicR  NC", "JLS Space GothicC  NC", "JLS Space GothicR NC", "JUSTICE", "JaJaDiMJ", "JaJaDiOMJ", "Jameel Noori Nastaleeq", "Janaranjani", "JaneAusten", "Jayanthi", "Jazz", "Jazz LET", "Jazz LET Plain:1.0", "JazzCord", "JazzPerc", "JazzText", "JazzTextExtended", "Joan", "John Handy LET", "Jokerman Alts LET", "Jokerman LET", "JomunaMJ", "Josefin Slab", "Judson", "JugantorMJ", "Julius Sans One", "JumunaOMJ", "JuneBug", "Just Another Hand", "Jwala", "KB Vibrocentric", "KG Corner of the Sky", "KG Fall For You", "KG Neatly Printed", "KG Part of Me", "KG Primary Penmanship", "KG Shake it Off Chunky", "KN-TTUma", "KacstArt", "KacstBook", "KacstDecorative", "KacstDigital", "KacstFarsi", "KacstLetter", "KacstNaskh", "KacstOffice", "KacstOne", "KacstPen", "KacstPoster", "KacstQurn", "KacstScreen", "KacstTitle", "KacstTitleL", "KaiTi_GB2312", "Kailasa", "Kaiti SC", "Kaiti TC", "Kalakaumudi", "KalegongaMJ", "KalegongaOMJ", "KalindiMJ", "KalindiOMJ", "KalindiSMJ", "Kalpurush", "Kalpurush ANSI", "Kalyani", "Kanalisirung", "KanchanMJ", "KanchanOMJ", "Kannada Sangam MN", "KarnaphuliMJ", "KarnaphuliOMJ", "KasseFLF", "Kaushan Script", "Kedage", "Kefa", "Kerala", "Kh-SrokKhleang", "Khalid Art bold", "Khanhoa", "Khmer MN", "Khmer OS", "Khmer OS Fasthand", "Khmer OS Freehand", "Khmer OS Metal Chrieng", "Khmer OS Muol", "Khmer OS System", "Khmer Sangam MN", "Kievit Offc Pro", "KievitPro-Regular", "Kingthings Versalis", "Kinnari", "Kino MT", "Kiran", "Klee", "Klee Demibold", "Kohinoor Bangla", "Kohinoor Devanagari", "Kohinoor Devanagari Demi", "Kohinoor Telugu", "Kokonor", "Kozuka Gothic Pr6N", "Kozuka Gothic Pr6N B", "Kozuka Gothic Pr6N EL", "Kozuka Gothic Pr6N H", "Kozuka Gothic Pr6N L", "Kozuka Gothic Pr6N M", "Kozuka Gothic Pr6N R", "Kozuka Gothic Pro", "Kozuka Gothic Pro B", "Kozuka Gothic Pro EL", "Kozuka Gothic Pro H", "Kozuka Gothic Pro L", "Kozuka Gothic Pro M", "Kozuka Gothic Pro R", "Kozuka Mincho Pr6N", "Kozuka Mincho Pr6N B", "Kozuka Mincho Pr6N EL", "Kozuka Mincho Pr6N H", "Kozuka Mincho Pr6N L", "Kozuka Mincho Pr6N M", "Kozuka Mincho Pr6N R", "Kozuka Mincho Pro", "Kozuka Mincho Pro B", "Kozuka Mincho Pro EL", "Kozuka Mincho Pro H", "Kozuka Mincho Pro L", "Kozuka Mincho Pro M", "Kozuka Mincho Pro R", "Kristi", "Krungthep", "Kruti Astro", "Ktav", "KufiStandardGK", "Kumudam", "Kundli", "Kundli English", "LA Headlights BTN", "LCD", "LETT", "LIVINGWELL", "LKLUG", "LT-ET-Ramya", "LT-TM-Barani", "LT-TM-Lakshman", "LTHYSZK", "La Bamba LET", "Laksaman", "Langdon", "Lantinghei SC", "Lantinghei SC Demibold", "Lantinghei SC Extralight", "Lantinghei TC", "Lantinghei TC Demibold", "Lantinghei TC Extralight", "Lao MN", "Lao Sangam MN", "Lapidary333 Blk BT", "Latienne Pro", "Latin Modern Math", "Latin Modern Mono", "Latin Modern Mono Caps", "Latin Modern Mono Light Cond", "Latin Modern Mono Prop", "Latin Modern Mono Slanted", "Latin Modern Roman Caps", "Latin Modern Roman Demi", "Latin Modern Roman Dunhill", "Latin Modern Roman Slanted", "Latin Modern Roman Unslanted", "Latin Modern Sans", "Latin Modern Sans Demi Cond", "Latin Modern Sans Quotation", "Latino Elongated LET Plain:1.0", "Lato Hairline", "LaurenScript", "Lavanderia", "Learning Curve Dashed Pro", "Learning Curve Pro", "Led Italic Font", "Leitura Display Swashes", "Letter Gothic Std", "Letter Gothic Std Bold Slanted", "Letter Gothic Std Slanted", "LetterOMatic!", "LeviBrush", "LiHei Pro", "LiSong Pro", "Libel Suit", "Liberation Serfi", "Liberation Serif", "Libertinus Math", "Libian SC", "Light", "LightSC", "Likhan", "Limousine", "Linden Hill", "Lingoes Unicode", "Linowrite", "Linux Biolinum G", "Linux Biolinum Keyboard O", "Linux Biolinum O", "Linux Libertine Display G", "Linux Libertine Display O", "Linux Libertine G", "Linux Libertine Initials O", "Linux Libertine Mono O", "Linux Libertine O", "Literation Mono Powerline", "Lithos Pro", "LittleLordFontleroy", "Lobster", "Lobster Two", "Logo3Mtt", "Logo3Mv3tt", "Lohit Bengali", "Lohit Devanagari", "Lohit Gujarati", "Lohit Hindi", "Lohit Punjabi", "Lohit Tamil", "Loma", "Lucida Blackletter", "Lucida Bright Demibold", "Lucida Fax Demibold", "Luminari", "Luna Bar", "LuzSans-Book", "LuzSans-Light", "MAC C Times", "MANDELA", "MARKETPRO", "MATTEROFFACT", "MAXIMO", "ML-IndulekhaHeavy", "ML-NILA01", "ML-NILA02", "ML-NILA03", "ML-NILA04", "ML-NILA05", "ML-NILA06", "ML-NILA07", "ML-TTAathira", "ML-TTAmbili", "ML-TTAnakha", "ML-TTAnjali", "ML-TTAparna", "ML-TTAshtamudi", "ML-TTAshtamudiExBold", "ML-TTAswathi", "ML-TTAtchu", "ML-TTAyilyamBold", "ML-TTBeckalBold", "ML-TTBhavana", "ML-TTChandrika", "ML-TTChithira", "ML-TTChithiraHeavy", "ML-TTDevika", "ML-TTGauri", "ML-TTGauriHeavy", "ML-TTGeethika", "ML-TTGopika", "ML-TTGuruvayur", "ML-TTIndulekha", "ML-TTIndulekhaHeavy", "ML-TTJaya", "ML-TTJyothy", "ML-TTJyotsna", "ML-TTKala", "ML-TTKamini", "ML-TTKanika", "ML-TTKarthika", "ML-TTKaumudi", "ML-TTKeerthi", "ML-TTLeela", "ML-TTLeelaHeavy", "ML-TTMadhaviExBold", "ML-TTMalavika", "ML-TTMangalaExBold", "ML-TTMayoori", "ML-TTNalini", "ML-TTNandini", "ML-TTNanditha", "ML-TTNarmadaExBold", "ML-TTNila", "ML-TTOnam", "ML-TTPeriyar", "ML-TTPooram", "ML-TTPoornima", "ML-TTRavivarma", "ML-TTRevathi", "ML-TTRohini", "ML-TTSabari", "ML-TTSankara", "ML-TTSarada", "ML-TTSruthy", "ML-TTSugatha", "ML-TTSuparna", "ML-TTSurya", "ML-TTSwathyBold", "ML-TTThakazhi", "ML-TTTheyyam", "ML-TTThiruvathira", "ML-TTThunchan", "ML-TTVaisali", "ML-TTVarsha", "ML-TTVeenaHeavy", "ML-TTVinay", "ML-TTVisakham", "ML-TTVishu", "ML-TTYashasri", "ML1-TTAmbili", "ML1-TTAswathi", "ML1-TTIndulekha", "MLB-TTAmbili", "MLB-TTAswathi", "MLB-TTIndulekha", "MLU-Panini", "MLW-TTKarthika", "MMArrow", "MMBinary", "MMCenturyNew", "MMCenturyNewRD", "MMCenturyOld", "MMCenturyOldGreek", "MMEtc", "MMExtra", "MMGreek", "MMNegate", "MMRelation", "MMSchoolRD", "MMTextBook", "MMTextBookB", "MMTimes", "MMVariable", "MMVariable2", "MMVariableA", "MMVariableB", "MMVariableC", "MMVariableD", "MMVariableF", "MMa Arrow", "MMa Arrow S", "MMa Arrow SS", "MMa Binary", "MMa Binary S", "MMa Binary SS", "MMa Century", "MMa CenturyK", "MMa CenturyKS", "MMa CenturyKSS", "MMa CenturyS", "MMa CenturySS", "MMa Etc", "MMa Etc S", "MMa Etc SS", "MMa Extra", "MMa Extra S", "MMa Extra SS", "MMa Fermat", "MMa Fraktur", "MMa Gauss", "MMa Greek", "MMa GreekS", "MMa GreekSS", "MMa Negate", "MMa Negate S", "MMa Negate SS", "MMa Pascal", "MMa Relation", "MMa Relation S", "MMa Relation SS", "MMa TextBook", "MMa Variable", "MMa Variable S", "MMa Variable SS", "MMa Variable2", "MMa Variable2 S", "MMa Variable2 SS", "MMa VariableA", "MMa VariableA S", "MMa VariableA SS", "MMa VariableB", "MMa VariableB S", "MMa VariableB SS", "MMa VariableC", "MMa VariableC S", "MMa VariableC SS", "MMa VariableD", "MMa VariableD S", "MMa VariableD SS", "MMa VariableF", "MMa VariableF S", "MS Dialog", "MS Reference 1", "MS Reference 2", "MS Reference Serif", "MS Song", "MS SystemEx", "MT Extra Tiger", "MYRIAD PRO", "MYingHei", "Madre Script", "Mael", "Maestro", "Maestro Percussion", "MaestroTimes", "Magic School One", "Magic School Two", "Maiden Orange", "Malayalam MN", "Malayalam Sangam MN", "Mallige", "Manorama", "Manorly", "Map Symbols", "MapInfo Cartographic", "Marion", "Marker Felt", "Marquisette BTN", "Marquisette BTN Lined", "Martina", "Master Of Break", "Math1", "Math1Mono", "Math2", "Math2Mono", "Math3", "Math3Mono", "Math4", "Math4Mono", "Math5", "Math5Mono", "Mathilde", "Matisse ITC", "Mayence Premium", "Medlin", "Meera", "Mekanik LET", "MelodBold", "Merriweather UltraBold", "Meslo LG L DZ Regular for Powerline", "Meslo LG L Regular for Powerline", "Meslo LG M DZ Regular for Powerline", "Meslo LG M Regular for Powerline", "Meslo LG S DZ Regular for Powerline", "Meslo LG S Regular for Powerline", "Mesquite Std", "Metamorphous", "Miama", "Microdot", "Microsoft MHei", "Microsoft NeoGothic", "Milano LET", "Minerva", "Ming(for ISO10646)", "Minion Pro", "Minion Pro Bold Cond", "Minion Pro Cond", "Minion Pro Med", "Minion Pro SmBd", "Minisystem", "Miriam Transparent", "Mishafi", "Mishafi Gold", "MisterEarl BT", "Mitra Mono", "Ml", "Modena printed", "Modern Antiqua", "Modern No", "Mona Lisa Solid ITC TT", "Monospac821 BT", "Monoton", "Monotxt", "Monotype Koufi", "Monotype Sorts", "Monotype.com", "Montserrat Hairline", "Moon Flower", "Moonbeam", "MotoyaLCedar", "MotoyaLMaru", "MrsEavesRoman", "Mshtakan", "Mshtakan BoldOblique", "Mudir MT", "Muli", "Muna", "Myanmar MN", "Myanmar Sangam MN", "Mycalc", "Myriad Arabic", "Myriad CAD", "Myriad Hebrew", "Myriad Pro Black Cond", "Myriad Pro Black SemiCond", "Myriad Pro Black SemiCondensed", "Myriad Pro Black SemiExt", "Myriad Pro Black SemiExtended", "Myriad Pro Bold SemiCondensed", "Myriad Pro Bold SemiExtended", "Myriad Pro Cond", "Myriad Pro Cond It", "Myriad Pro It", "Myriad Pro Light Cond", "Myriad Pro Light Sans Hebrew", "Myriad Pro Light SemiCond", "Myriad Pro Light SemiCondensed", "Myriad Pro Light SemiExt", "Myriad Pro Light SemiExtended", "Myriad Pro Semi bold", "Myriad Pro SemiCond", "Myriad Pro SemiCondensed", "Myriad Pro SemiExt", "Myriad Pro SemiExtended", "Myriad Pro Semibold It", "Myriad Pro Semibold SemiCondensed", "Myriad Pro Semibold SemiExtended", "Myriad Web Pro", "MyriadPro-Semibold", "Mytho", "NATURALBORN", "NBP Informa FiveSix", "NBP Informa FiveThree", "NEOLITH", "NORMAL", "Nadeem", "Nafees Web Naskh", "Nanum Brush Script", "Nanum Gothic", "Nanum Myeongjo", "Nanum Pen Script", "NanumBarunGothic", "Napa SF", "Nasalization", "Neon Lights", "NeueHaasGroteskText Pro", "New Athena Unicode", "New Gulim", "New Peninim MT", "New Peninim MT Bold Inclined", "New Peninim MT Inclined", "New Renex Special Graphics", "New Renex Terminal", "NewRocker", "News Cycle", "News Gothic MT", "News Gothic MT Alt 1", "News Gothic MT Alt 2", "News Gothic MT Alt 3", "News Gothic MT Alt 4", "News Gothic MT Alt 5", "News Gothic MT Alt 6", "News GothicMT", "NewsGoth BT", "Newton Phonetic ABBYY", "Nexa XBold", "Nightclub BTN", "Nightclub BTN UltraCn", "Nimbus Roman No 9 L", "Nimbus Roman No9 L", "Nixie One", "NixieOneRegular", "No Flash", "Nobile", "Nonfiction", "Norasi", "Note this", "Noteworthy", "Noto Color Emoji", "Noto Emoji", "Noto Naskh Arabic", "Noto Sans Armenian", "Noto Sans Avestan", "Noto Sans Bamum", "Noto Sans Batak", "Noto Sans Brahmi", "Noto Sans Buhid", "Noto Sans CJK JP", "Noto Sans CJK KR", "Noto Sans CJK SC", "Noto Sans CJK TC", "Noto Sans Carian", "Noto Sans Coptic", "Noto Sans Cuneiform", "Noto Sans Cypriot", "Noto Sans Devanagari", "Noto Sans Devanagari UI", "Noto Sans Egyptian Hieroglyphs", "Noto Sans Ethiopic", "Noto Sans Georgian", "Noto Sans Glagolitic", "Noto Sans Gothic", "Noto Sans Gujarati", "Noto Sans Gurmukhi", "Noto Sans Hanunoo", "Noto Sans Hebrew", "Noto Sans Imperial Aramaic", "Noto Sans Inscriptional Pahlavi", "Noto Sans Inscriptional Parthian", "Noto Sans JP", "Noto Sans KR", "Noto Sans Kayah Li", "Noto Sans Kharoshthi", "Noto Sans Lao", "Noto Sans Lao UI", "Noto Sans Limbu", "Noto Sans Linear B", "Noto Sans Lisu", "Noto Sans Lycian", "Noto Sans Lydian", "Noto Sans Malayalam", "Noto Sans Mandaic", "Noto Sans Mongolian", "Noto Sans Mono CJK JP", "Noto Sans Mono CJK KR", "Noto Sans Mono CJK SC", "Noto Sans Mono CJK TC", "Noto Sans NKo", "Noto Sans New Tai Lue", "Noto Sans Ogham", "Noto Sans Ol Chiki", "Noto Sans Old Persian", "Noto Sans Old South Arabian", "Noto Sans Old Turkic", "Noto Sans Osmanya", "Noto Sans Phags Pa", "Noto Sans Phoenician", "Noto Sans Rejang", "Noto Sans Runic", "Noto Sans SC", "Noto Sans Samaritan", "Noto Sans Saurashtra", "Noto Sans Shavian", "Noto Sans Syloti Nagri", "Noto Sans Syriac Eastern", "Noto Sans TC", "Noto Sans Tagalog", "Noto Sans Tagbanwa", "Noto Sans Tai Le", "Noto Sans Tai Viet", "Noto Sans Tamil", "Noto Sans Tamil UI", "Noto Sans Thai", "Noto Sans Thai UI", "Noto Sans Tifinagh", "Noto Sans UI", "Noto Sans Ugaritic", "Noto Sans Vai", "Noto Sans Yi", "Noto Serif", "Noto Serif Ahom", "Noto Serif Armenian", "Noto Serif CJK JP", "Noto Serif CJK KR", "Noto Serif CJK SC", "Noto Serif CJK TC", "Noto Serif Georgian", "Noto Serif Lao", "Noto Serif Thai", "Notram", "Nova Cut", "Nova Flat", "Nova Oval", "Nova Round", "Nova Script", "Nova Slim", "Nova Square", "November", "Nueva Std", "Nueva Std Bold Cond", "Nueva Std Cond", "Nunito", "OCR A Std", "OCR B MT", "OCR-A BT", "OCR-A II", "OCRA", "OLF SimpleSansOC", "OLIVEOIL", "OPENCLASSIC", "OR-TTSarala", "Odessa LET", "Old Antic Decorative", "Old Century", "Old English", "One Stroke Script LET", "Onyx BT", "OpineHeavy", "Optima ExtraBlack", "Optima LT Std", "Opus", "Opus Chords", "Opus Chords Sans", "Opus Figured Bass", "Opus Figured Bass Extras", "Opus Function Symbols", "Opus Japanese Chords", "Opus Metronome", "Opus Note Names", "Opus Ornaments", "Opus Percussion", "Opus PlainChords", "Opus Roman Chords", "Opus Special", "Opus Special Extra", "Orator Std", "Orator Std Slanted", "Origin", "Oriya MN", "Oriya Sangam MN", "OskiDakelh", "Ostrich Sans", "Ostrich Sans Dashed", "Ostrich Sans Rounded", "Oswald", "Ouverture script", "OzHandicraft BT", "PAINTSTROKE", "PCMyungjo", "PFDaVinciScriptPro-Inked", "PFDaVinciScriptPro-Regular", "PFFuelPro-Regular", "PN-TTAmar", "POLI", "PRETEXT", "PT Bold Arch", "PT Bold Broken", "PT Bold Dusky", "PT Bold Heading", "PT Bold Mirror", "PT Bold Stars", "PT Separated Baloon", "PT Serif", "PT Simple Bold Ruled", "PTBarnum BT", "PUPPYLIKE", "Pacifico", "Padauk", "Pamela want a Bike to Ride", "Pamela wants to Ride", "PanRoman", "Parisian BT", "ParkAvenue BT", "Parry Hotter", "Party LET", "Party LET Plain:1.0", "ParvathiBold", "ParvathiMedium", "ParvathiThin", "Patrick Hand SC", "Pegasus", "Pegypta", "Penultimate", "PenultimateLight", "PenultimateLightItal", "Permanent Marker", "Persia BT", "Petrucci", "Phatdiem", "Phetsarath OT", "PhnomPenh OT", "Phosphate", "Photoshop Large", "Photoshop Small", "PhrasticMedium", "Pickwick", "Pigiarniq", "PilGi", "PingFang HK", "PingFang SC", "PingFang TC", "Piranesi It BT", "Pirate", "Playfair Display SC", "Pleasantly Plump", "PoetsenOne", "Pointedly Mad", "Poiret One", "PondAllRounder", "PondFreeBoss", "PondFreeMe", "PondFreeZoo", "Poplar Std", "PortagoITC TT", "Poster", "PosterBodoni BT", "Pothana", "Pothana2000", "Power Clear", "Power Green", "Power Green Small", "Power Red and Blue", "Power Red and Blue Intl", "Power Red and Green", "Praveen", "Praxis", "Prema", "Press Start 2P", "Prestige Elite Std", "Prestige Elite Std Bd", "Pricedown Bl", "PrimaSans BT", "Princetown LET", "Priori Serif OT", "Prisoner SF", "Proxima Nova Condensed Semibold", "Proxima Nova Rg", "Proxima Nova Soft Semibold", "Proxy 1", "Proxy 2", "Proxy 3", "Proxy 4", "Proxy 5", "Proxy 6", "Proxy 7", "Proxy 8", "Proxy 9", "Pujeeta", "PujeetaItalic", "PujeetaNarrow", "PujeetaSpecial", "Purisa", "Pythagoras", "Qaskin Black Personal Use", "Qaskin White Personal Use", "Quangngai", "QuickType II", "QuickType II Mono", "QuickType II Pi", "Quickpen", "Quicksand", "Quicksand Dash", "Quincho Script PERSONAL USE", "Quinhon", "QuiverItal", "Quixley LET", "QumpellkaNo12", "RADAGUND", "RUMA", "Raanana", "Rachana", "Rachana_w01", "Rachgia", "Racing Sans One", "Radha", "RadhaBold", "Rage Italic LET", "Raghindi", "RaghuMalayalam", "Raisin des Sables", "Rakesly Bk", "Rakesly El", "Rakesly Lt", "Rakesly Rg", "Rakesly Ul", "RamuBrush", "RamuScript", "RamuScriptMedium", "Realvirtue", "Redressed", "Reginet", "Rekha", "Remachine Script Personal Use", "Reswysokr", "Ribbon131 Bd BT", "Rock Salt", "Rocket Arabic Fixed", "Rockwell Nova", "Rockwell Nova Cond", "Rod Transparent", "Roman Mono", "RomanC", "RomanD", "RomanS", "RomanT", "Romantic", "Rondalo", "Rosewood Std", "Rouge Script", "RowdyHeavy", "Ruach LET", "Rumburak", "Rundkursiv", "Rupee Foradian", "Russel Write TT", "SAF", "SAPDings", "SAPGUI-Icons", "SAPIcons", "SAS Monospace", "SC", "SD-TTSurekh", "SERB", "SF Compact Rounded", "SF Compact Rounded Ultralight", "SF Distant Galaxy", "SF Distant Galaxy AltOutline", "SF Distant Galaxy Alternate", "SF Movie Poster", "SF Slapstick Comic", "SHELMAN", "SOLIDWORKS GDT", "SPAN", "STHupo", "STIX Math", "STIX Two Math", "STIXGeneral", "STIXIntegralsD", "STIXIntegralsSm", "STIXIntegralsUp", "STIXIntegralsUpD", "STIXIntegralsUpSm", "STIXNonUnicode", "STIXSizeFiveSym", "STIXSizeFourSym", "STIXSizeOneSym", "STIXSizeThreeSym", "STIXSizeTwoSym", "STIXVariants", "STLiti", "STSong", "STXingkai", "STXinwei", "STZhongsong", "SWAstro", "SWComp", "SWED", "SWGDT", "SWGamekeys MT", "SWGothe", "SWGothg", "SWGothi", "SWGrekc", "SWGreks", "SWIsop1", "SWIsop2", "SWIsop3", "SWIsot1", "SWIsot2", "SWIsot3", "SWItal", "SWItalc", "SWItalt", "SWLink", "SWMacro", "SWMap", "SWMath", "SWMeteo", "SWMono", "SWMusic", "SWRomnc", "SWRomnd", "SWRomns", "SWRomnt", "SWScrpc", "SWScrps", "SWSimp", "SWTOR Trajan", "SWTxt", "Saab", "Sabrina", "Sacred Geometry", "SaiEmbed", "SaiIndira", "SaiMeera", "SaiSai", "SaiVrishin", "Saint Andrew des Kiwis", "Salilam", "Salina", "Samathwa", "SamsungImagination", "SamsungImaginationBold", "Sana", "Sanpya", "Sans", "SansSerif", "Sanskrit", "Sanskrit New", "Santa Fe LET", "Santa Fe LET Plain:1.0", "Sasfont", "Sathu", "Sauce Code Powerline", "Savoye LET", "Savoye LET Plain", "Savoye LET Plain CC", "Savoye LET Plain CC.:1.0", "Savoye LET Plain:1.0", "Sawasdee", "Sceptre", "SchoolHouse Cursive B", "SchoolHouse Printed A", "ScriptC", "ScriptKleio", "ScriptS", "Seagull APL", "Segoe MDL2 Assets", "Segoe UI Historic", "Segoe WP", "Selena", "SemiBold", "Serifa BT", "Serifa Th BT", "Seville", "ShelleyVolante BT", "Sherwood", "Shree Devanagari 714", "Shree-Kan-0853", "Shree-Mal-0502", "Shree-Tel-0900", "Sigmar", "SignPainter", "SignPainter-HouseScript", "Signboard", "Silent Reaction", "Silom", "Simple Bold Jut Out", "Simple Outline Pat", "Simplex", "Sinhala MN", "Sinhala Sangam MN", "Six Caps", "Siyam Rupali", "Siyam Rupali ANSI", "Sketch Block", "Sketch Match", "Sketch Rockwell", "Skinny", "Skype UI Symbol", "SmartGothic", "Smarty Pants BTN", "Smokum", "Smooth", "Smudger Alts LET", "Smudger LET", "Sneakerhead BTN", "Snell Roundhand", "Sniglet", "Snowdrift", "Socket", "Sofia", "Soho Gothic Pro ExtraBold It", "Soho Gothic Pro Ultra", "Songti SC", "Songti TC", "Sonic XBd BT", "SonicCutThru Hv BT", "Sorts Mill Goudy", "Souvenir Lt BT", "Space Age", "Space Bd BT", "Special Elite", "Spicy Rice", "Spirituality", "Splash", "Square721 BT", "Staccato222 BT", "Standard Symbols L", "Starliner BTN", "Steamer", "Stencil Std", "Stephen", "Steppes TT", "Stez Sans", "Stone Sans ITC TT", "Stone Sans Sem ITC TT", "Storybook", "Stylus BT", "Subway", "Sue Ellen Francisco", "Sugarskin BTN", "Sukhumvit Set", "Sun-ExtA", "Superclarendon", "Supernatural Knight", "Suruma", "SutonnyMJ", "SutonnyOMJ", "Swis721 BT", "Swis721 BdCnOul BT", "Swis721 BdOul BT", "Swis721 Blk BT", "Swis721 BlkCn BT", "Swis721 BlkEx BT", "Swis721 BlkOul BT", "Swis721 Cn BT", "Swis721 Ex BT", "Swis721 Hv BT", "Swis721 Lt BT", "Swis721 LtCn BT", "Swis721 LtEx BT", "Swiss 721 Bold BT", "Swiss911 XCm BT", "Swiss921 BT", "Syastro", "Symap", "Symath", "Symbol MT", "Symbol Neu for Powerline", "Symbol Tiger", "Symbol Tiger Expert", "SymbolMono BT", "SymbolProp BT", "Symbola", "Symeteo", "Symusic", "Synchro LET", "System Font Bold G1", "TAB", "TAC-Barathi", "TAC-Kabilar", "TAC-Kambar", "TAC-Valluvar", "TAM", "TAM-Kavi", "TAM-Shree800", "TAMElango", "TAMILFIX", "TAMILNET", "TAMLKamban", "TAU-Barathi", "TAU-Kabilar", "TAU-Kambar", "TAU-Kaveri", "TAU-Valluvar", "TG Pagella Math", "TG Termes Math", "TITUS Cyberbit Basic", "TL-TTHemalatha", "TLArabic", "TLPashto", "TLUrdu", "TM-TTValluvar", "TMBW-TTValluvar", "TRIAL", "TSCu", "TURK", "Tahoma Negreta", "TakaoPGothic", "Tall Boy 3D", "Tall Boy West", "Tamburo", "Tamil MN", "Tamil-Aiswarya", "Tangerine", "TanglewoodTales", "Tarzan", "TeX", "TeX Gyre Adventor", "TeX Gyre Bonum", "TeX Gyre Bonum Math", "TeX Gyre Chorus", "TeX Gyre Heros", "TeX Gyre Pagella", "TeX Gyre Pagella Math", "TeX Gyre Schola", "TeX Gyre Termes", "TeX Gyre Termes Math", "TeamViewer10", "TeamViewer7", "TeamViewer8", "TeamViewer9", "Technic", "TechnicBold", "TechnicLite", "Technical", "Teen", "Tekton Pro", "Tele-Marines", "Teletype", "Telugu MN", "Tera Special", "Terminal Greek 737 (437G)", "Terminal Greek 869", "Terminator Real NFI", "Terminator Two", "TextilePiEF", "Thanhoa", "Theatre Antoine", "Thonburi", "ThoolikaUnicode", "Thorndale AMT", "Thorndale for VST", "Throw My Hands Up in the Air", "Tiger", "Tiger Expert", "TimeA1", "Timeless", "Times CE", "Times CY", "Times New Roman (Arabic)", "Times New Roman Baltic", "Times New Roman CE", "Times New Roman CYR", "Times New Roman Greek", "Times New Roman PS", "Times New Roman Symbol", "Times New Roman TUR", "Times New Roman Uni", "TimesTen", "Tinos for Powerline", "Tiranti Solid LET", "Titan One", "Titillium", "TitilliumText22L-Bold", "Tlwg Mono", "Tlwg Typewriter", "Tlwg Typist", "Tlwg Typo", "TlwgMono", "TlwgTypewriter", "Toledo", "Trade Gothic LT Std", "Trajan Pro", "Trattatello", "Trebuchet_PFL", "Tristan", "Trocchi", "True Lies", "Tsukushi A Round Gothic", "Tsukushi B Round Gothic", "TtsNote", "Tubular", "Tuyenduc", "Twemoji Mozilla", "Txt", "Type Embellishments One LET", "Type Embellishments One LET Embellishments One LET Plain:1.0", "TypoUpright BT", "URW Antiqua T", "URW Bookman L", "URW Chancery L", "URW Gothic L", "URW Grotesk T", "URW Palladio L", "Ubuntu", "Ubuntu Mono derivative Powerline", "Ultra", "Ume Gothic", "Ume Mincho", "Ume P Gothic", "Ume P Mincho", "Ume UI Gothic", "Umpush", "UnBatang", "UnDinaru", "UnDotum", "UnGraphic", "UnGungseo", "UnPilgi", "Uncial Antiqua", "Unicorn", "UnitedStates", "UniversalMath1 BT", "University Roman Alts LET", "University Roman LET", "Unknown Caller BTN SC", "Untitled1", "Uqammaq", "Urdu Naskh Asiatype", "Urvasi", "Uttara", "VAGRounded BT", "VANAVIL-Avvaiyar", "VISCII Sample Font", "VL Gothic", "VL PGothic", "VN-NTime", "VNI Aptima", "VNI Cambodia", "VNI Greece", "VNI Helve", "VNI Helve Condense", "VNI Laos", "VNI Russia", "VNI Times", "VNI-Algerian", "VNI-Allegie", "VNI-Aptima", "VNI-Arial Rounded", "VNI-Ariston", "VNI-Auchon", "VNI-Avo", "VNI-Awchon", "VNI-Aztek", "VNI-Bandit", "VNI-Bauhaus", "VNI-Baybuom", "VNI-Bazooka", "VNI-Bodon", "VNI-Bodon-Poster", "VNI-Book", "VNI-Bragga", "VNI-Briquet", "VNI-Broad", "VNI-Brush", "VNI-Butlong", "VNI-Centur", "VNI-Chaucer", "VNI-Colonna", "VNI-Commerce", "VNI-Cooper", "VNI-Coronet", "VNI-Couri", "VNI-DOS Sample Font", "VNI-DesdemonaU", "VNI-Disney", "VNI-Diudang", "VNI-Dom", "VNI-Duff", "VNI-Dur", "VNI-Fato", "VNI-Fillmore", "VNI-Franko", "VNI-Free", "VNI-Garam", "VNI-GlabXb", "VNI-Goudy", "VNI-HLThuphap", "VNI-Harrington", "VNI-Heather", "VNI-Helve", "VNI-Helve-Condense", "VNI-Hobo", "VNI-Internet Mail", "VNI-Jamai", "VNI-Juni", "VNI-Korin", "VNI-Kun", "VNI-Linus", "VNI-Lithos", "VNI-Lydi", "VNI-Maria", "VNI-Matisse", "VNI-Meli", "VNI-Murray", "VNI-Netbut", "VNI-Nhatban", "VNI-OngDoHL", "VNI-Palatin", "VNI-Park", "VNI-Present", "VNI-Revue", "VNI-Scribble", "VNI-Script", "VNI-Shadow", "VNI-ShellaL", "VNI-Slogan", "VNI-Souvir", "VNI-StageCoach", "VNI-Standout", "VNI-StencilU", "VNI-Stylus", "VNI-Swiss-Condense", "VNI-Tekon", "VNI-Thanhcao", "VNI-Thufap1", "VNI-Thufap2", "VNI-Thufap3", "VNI-Thufapfan", "VNI-Times", "VNI-Top", "VNI-Truck", "VNI-Tubes", "VNI-Univer", "VNI-Vari", "VNI-Viettay", "VNI-Vivi", "VNI-WIN Sample Font", "VNI-Whimsy", "VNI-Wide Latin", "VNI-Yahoo", "VNI-Zap", "VNtimes new roman", "Vagabond", "Valerie Hand", "Valken", "Valluvan", "Vanilla", "Vemana2000", "Ventilla Script", "Verdana Pro", "Verdana Pro Cond", "Verona", "Vikatan", "Vineta BT", "Vinhan", "Violetta", "Virtual DJ", "Visitor TT1 BRK", "Visitor TT2 BRK", "Visual Geez Unicode", "Visual Geez Unicode Agazian", "Visual Geez Unicode Title", "VnTimes", "VnTimes2", "Vodafone Rg", "Vogue", "Vonique 64", "Voyager NBP", "WP Arabic Sihafa", "WP ArabicScript Sihafa", "WP BoxDrawing", "WP CyrillicA", "WP CyrillicB", "WP Greek Century", "WP Greek Courier", "WP Greek Helve", "WP Hebrew David", "WP IconicSymbolsA", "WP IconicSymbolsB", "WP Japanese", "WP MathA", "WP MathB", "WP MathExtendedA", "WP MathExtendedB", "WP MultinationalA Courier", "WP MultinationalA Helve", "WP MultinationalB Courier", "WP MultinationalB Helve", "WP Phonetic", "WP TypographicSymbols", "WST", "WST_Czec", "WST_Engl", "WST_Fren", "WST_Germ", "WST_Ital", "WST_Span", "WST_Swed", "Walter", "Waree", "Warnock Pro", "Warnock Pro SmBd", "Warsaw", "Waseem", "Waverly", "Wawati SC", "Wawati TC", "Web Serveroff", "Webdunia", "Weibei SC", "Weibei TC", "Wellfleet", "WenQuanYi Micro Hei", "WenQuanYi Micro Hei Mono", "Western Bang Bang", "Whimsy TT", "Wolf in the City", "Woodcut", "X-Files", "XITS Math", "Xerox Malfunction BRK", "Xingkai SC", "Xirod", "Xpress Heavy SF", "Xpress SF", "YD2002", "Year supply of fairy cakes", "Yellowtail", "Yeseva One", "Yu Gothic UI", "YuCiril Helvetica", "YuGothic", "YuMincho", "YuMincho Demibold", "Yuanti SC", "Yuanti TC", "Yuppy SC", "Yuppy TC", "Z@R11F8.tmp", "Z@R120A.tmp", "Z@R123A.tmp", "Z@R13D5.tmp", "Z@R16EB.tmp", "Z@R16FD.tmp", "Z@R170E.tmp", "Z@R1720.tmp", "Z@R1751.tmp", "Z@R1762.tmp", "Z@R1774.tmp", "Z@R1816.tmp", "Z@R1828.tmp", "Z@R183A.tmp", "Z@R184B.tmp", "Z@R185D.tmp", "Z@R195D.tmp", "Z@R277C.tmp", "ZDingbats", "ZWAdobeF", "ZapfEllipt BT", "ZapfHumnst BT", "ZapfHumnst Dm BT", "ZapfHumnst Ult BT", "Zapfino Extra LT Four", "Zapfino Extra LT Ligatures", "Zapfino Extra LT One", "Zapfino Extra LT Two", "Zirkon", "Zolano Sans BTN", "Zolano Serif BTN", "Zurich BlkEx BT", "Zurich Ex BT", "Zuzumbo", "academy engraved let", "ae", "akaDora", "amaze", "at most sphere", "athletic", "balonez fantasia", "balonez fantasia br", "balthazar", "bart", "bimini", "boot", "cafeta", "ceriph 05", "ceriph 07", "chs", "cht", "classic 10", "cmb10", "cmbsy10", "cmbsy6", "cmbsy7", "cmbsy8", "cmbsy9", "cmbx10", "cmbx12", "cmbx5", "cmbx6", "cmbx7", "cmbx8", "cmbx9", "cmbxsl10", "cmbxti10", "cmcsc10", "cmcsc8", "cmcsc9", "cmdunh10", "cmex10", "cmex7", "cmex8", "cmex9", "cmff10", "cmfi10", "cmfib8", "cminch", "cmitt10", "cmmi10", "cmmi12", "cmmi5", "cmmi6", "cmmi7", "cmmi8", "cmmi9", "cmmib10", "cmmib6", "cmmib7", "cmmib8", "cmmib9", "cmr10", "cmr12", "cmr17", "cmr5", "cmr6", "cmr7", "cmr8", "cmr9", "cmsl10", "cmsl12", "cmsl8", "cmsl9", "cmsltt10", "cmss10", "cmss12", "cmss17", "cmss8", "cmss9", "cmssbx10", "cmssdc10", "cmssi10", "cmssi12", "cmssi17", "cmssi8", "cmssi9", "cmssq8", "cmssqi8", "cmsy10", "cmsy10orig", "cmsy5", "cmsy6", "cmsy7", "cmsy8", "cmsy9", "cmtcsc10", "cmtex10", "cmtex8", "cmtex9", "cmti10", "cmti12", "cmti7", "cmti8", "cmti9", "cmtt10", "cmtt12", "cmtt8", "cmtt9", "cmu10", "cmvtt10", "cnefont", "cnefonts", "copy 08", "copy 09", "copy 10", "croissant sandwich", "cursive", "dbldwrsw", "euex10", "euex7", "euex8", "euex9", "eufb10", "eufb5", "eufb6", "eufb7", "eufb8", "eufb9", "eufm10", "eufm5", "eufm6", "eufm7", "eufm8", "eufm9", "eurb10", "eurb5", "eurb6", "eurb7", "eurb8", "eurb9", "eurm10", "eurm5", "eurm6", "eurm7", "eurm8", "eurm9", "eusb10", "eusb5", "eusb6", "eusb7", "eusb8", "eusb9", "eusm10", "eusm5", "eusm6", "eusm7", "eusm8", "eusm9", "fakefont2", "fantasy", "fox in the snow", "future", "gargi", "header 08", "header 17", "hooge 04", "hooge 05", "hooge 06", "iso 08", "jpn", "kawoszeh", "kor", "kroeger 04", "kroeger 05", "kroeger 06", "kroeger 07", "lcircle10", "lcirclew10", "lcmss8", "lcmssb8", "lcmssi8", "lettau 06", "line10", "linew10", "mixtapeMike", "modstmary10", "mono 07", "mono 08", "monoeger 05", "monofur bold for Powerline", "monofur for Powerline", "monofur italic for Powerline", "monooge 05", "mry", "mry_KacstQurn", "msam10", "msam5", "msam6", "msam7", "msam8", "msam9", "msbm10", "msbm5", "msbm6", "msbm7", "msbm8", "msbm9", "olddreadfulno7 bt", "orange let", "ori1Uni", "pump demi bold let", "roland", "sans-serif", "saxMono", "schoenecker 10", "scruff let", "serif", "short hand", "signs normal", "simpson", "smart watch", "spinwerad", "standard 07", "standard 09", "stmary10", "superfrench", "surfer", "terk", "trendy", "type 07", "uni 05", "victorian let", "vivian", "w01", "western", "westwood let", "Univers CE 55 Medium", "Futura Bk BT", "AcademyEngravedLetPlain", "AlBayanPlain", "AlTarikh", "AppleSDGothicNeo-Regular", "Athelas-Regular", "AvenirNext-Regular", "Avenir-Roman", "BigCaslon-Medium", "BradleyHandITCTT-Bold", "BrushScriptMT", "ChalkboardSE-Regular", "Charter-Roman", "DecotypeNaskh", "DINAlternate-Bold", "DiwanKufi", "DiwanThuluth", "Futura-Medium", "GeezaPro", "STHeitiSC-Medium", "STHeitiTC-Medium", "HiraKakuPro-W3", "HiraMinPro-W3", "HiraginoSans-W3", "IowanOldStyle-Roman", "ITFDevanagariMarathi", "ITFDevanagari", "Kefa-Regular", "KohinoorDevanagari-Regular", "Marion-Regular", "MarkerFelt-Thin", "Menlo-Regular", "DiwanMishafiGold", "DiwanMishafi", "Noteworthy-Light", "NotoSansGothic-Regular", "NotoSansLinearB-Regular", "NotoSerifAhom-Regular", "Optima-Regular", "PartyLetPlain", "Phosphate-Regular", "PingFangHK-Regular", "PingFangSC-Regular", "PingFangTC-Regular", "SavoyeLetPlain", "SignPainter-HouseScript", "Skia-Regular", "SongtiSC-Regular", "SongtiTC-Regular", "STIXGeneral-Regular", "STIXIntegralsD-Regular", "STIXIntegralsSM-Regular", "STIXIntegralsUp-Regular", "STIXIntegralsUpD-Regular", "STIXIntegralsUpSM-Regular", "STIXNonUnicode-Regular", "STIXSizeFiveSym-Regular", "STIXSizeFourSym-Regular", "STIXSizeOneSym-Regular", "STIXSizeThreeSym-Regular", "STIXSizeTwoSym-Regular", "STIXVariants-Regular", "SukhumvitSet-Text", "Superclarendon-Regular", "Aptos", "Bebas Neue", "Bitter", "Chivo", "Crimson Pro", "DM Sans", "EB Garamond", "Exo 2", "Fraunces", "Gabarito", "Heebo", "Josefin Sans", "Karla", "Lora", "Manrope", "Merriweather", "Mulish", "Playfair Display", "Public Sans", "Red Hat Display", "Rubik", "Space Grotesk", "Spectral", "Syne", "Tinos", "Varela Round", "Work Sans", "Cardo", "Lexend", "Sora", "Nexa Rust", "HoloLens MDL2 Assets", "Ink Free", "Lucid Sans", "Neuropol", "Sitka",
  // === Windows 11 Fonts ===
  "Segoe Fluent Icons",
  // === macOS 10.10 (Yosemite) ===
  "Kohinoor Devanagari Medium",
  // === macOS 10.11 (El Capitan) ===
  "PingFang HK Light",
  // === macOS 10.12 (Sierra) ===
  "American Typewriter Semibold", "Futura Bold", "SignPainter-HouseScript Semibold",
  // === macOS 10.13-10.14 (High Sierra, Mojave) ===
  "InaiMathi Bold",
  // === macOS 10.15-11 (Catalina, Big Sur) ===
  "Galvji", "MuktaMahee Regular",
  // === macOS 12 (Monterey) ===
  "Noto Sans Gunjala Gondi Regular", "Noto Sans Masaram Gondi Regular", "Noto Serif Yezidi Regular",
  // === macOS 13 (Ventura) ===
  "Apple SD Gothic Neo ExtraBold", "STIX Two Math Regular", "STIX Two Text Regular", "Noto Sans Canadian Aboriginal Regular",
  // Sonoma: https://support.apple.com/en-us/HT213826
  'Akaya Kanadaka', 'Kannada MN',
  // Sequoia (macOS 15): Based on trends and available info
  'Adelle Sans Devanagari', 'Kohinoor Bangla',
  // Example: Apple often extends Kohinoor families
  "Baloo Bhaina 2", "Katari",
  // macOS 16: Placeholder (update with specific fonts when available)

  // === Linux Fonts ===
  "Chilanka", "MONO"]
};
module.exports = fontsVersion2;

/***/ }),

/***/ "./src/main/collectors/static/font/emoji/FontEmojiFeature.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/static/font/emoji/FontEmojiFeature.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontEmojiFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _TypographyFrameUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../TypographyFrameUtils */ "./src/main/collectors/static/font/TypographyFrameUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isFontEmojiFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var EMOJI_STYLE_RAW = Object.freeze({
  whiteSpace: 'nowrap',
  letterSpacing: 'normal',
  lineHeight: 'normal',
  textTransform: 'none',
  fontVariant: 'normal',
  fontFeatureSettings: 'normal',
  fontKerning: 'auto',
  direction: 'ltr',
  writingMode: 'horizontal-tb',
  fontSize: '16px'
});
var MEASURE_RAW = Object.freeze({
  maxFrames: 12,
  minSamples: 3,
  stableHitsTarget: 2,
  absTolPx: 0,
  relTol: 0,
  quantStep: 0
});
var FontEmojiFeature = /*#__PURE__*/function (_DataCollector) {
  function FontEmojiFeature(dataQ) {
    var _this;
    var window = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __webpack_require__.g.window;
    var document = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : __webpack_require__.g.document;
    _classCallCheck(this, FontEmojiFeature);
    _this = _callSuper(this, FontEmojiFeature);
    _this._dataQ = dataQ;
    _this._window = window;
    _this._document = document;
    return _this;
  }
  _inherits(FontEmojiFeature, _DataCollector);
  return _createClass(FontEmojiFeature, [{
    key: "_buildEmojiString",
    value: function _buildEmojiString() {
      // U+1F600..U+1F64F (80 code points), NFC
      return Array.from({
        length: 80
      }, function (_, i) {
        return String.fromCodePoint(0x1F600 + i);
      }).join('').normalize('NFC');
    }
  }, {
    key: "_buildSpan",
    value: function _buildSpan(doc, text, style) {
      var span = doc.createElement('span');
      try {
        span.style.all = 'initial';
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('applying span.style.all failed', ex);
      }
      Object.assign(span.style, style);
      span.textContent = text;
      return span;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var info;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return (0,_TypographyFrameUtils__WEBPACK_IMPORTED_MODULE_2__.measureInEphemeralIframe)(_objectSpread({
                hostWindow: this._window,
                hostDocument: this._document,
                frameId: 'cd__frame__font_emoji',
                buildNode: function buildNode(_ref) {
                  var doc = _ref.doc;
                  return _this2._buildSpan(doc, _this2._buildEmojiString(), EMOJI_STYLE_RAW);
                }
              }, MEASURE_RAW));
            case 3:
              info = _context.sent;
              if (info) {
                this._dataQ.addToQueue('static_fields', ['font_emoji_info', info], false);
              }
              _context.next = 10;
              break;
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed to collect emoji font information', _context.t0);
            case 10:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 7]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/font/fontmath/FontMathFeature.js":
/*!*********************************************************************!*\
  !*** ./src/main/collectors/static/font/fontmath/FontMathFeature.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontMathFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _TypographyFrameUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../TypographyFrameUtils */ "./src/main/collectors/static/font/TypographyFrameUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
// FontMathFeature.js (iframe-only)



var featureSettings = {
  configKey: 'isFontMathFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var FontMathFeature = /*#__PURE__*/function (_DataCollector) {
  function FontMathFeature(dataQ) {
    var _this;
    var window = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __webpack_require__.g.window;
    var document = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : __webpack_require__.g.document;
    _classCallCheck(this, FontMathFeature);
    _this = _callSuper(this, FontMathFeature);
    _this._dataQ = dataQ;
    _this._window = window;
    _this._document = document;
    return _this;
  }
  _inherits(FontMathFeature, _DataCollector);
  return _createClass(FontMathFeature, [{
    key: "_buildMathML",
    value: function _buildMathML(doc) {
      var M = 'http://www.w3.org/1998/Math/MathML';
      var math = doc.createElementNS(M, 'math');
      var mrow = doc.createElementNS(M, 'mrow');
      var munderover = doc.createElementNS(M, 'munderover');

      //  logical structure identical to the old code (no <none>, no <mprescripts>)
      var mmPi = doc.createElementNS(M, 'mmultiscripts');
      var moPi = doc.createElementNS(M, 'mo');
      moPi.textContent = '';
      mmPi.appendChild(moPi);
      munderover.appendChild(mmPi);
      var data = [["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""]];
      for (var _i = 0, _data = data; _i < _data.length; _i++) {
        var _data$_i = _slicedToArray(_data[_i], 5),
          main = _data$_i[0],
          sub1 = _data$_i[1],
          sub2 = _data$_i[2],
          pre1 = _data$_i[3],
          pre2 = _data$_i[4];
        var mm = doc.createElementNS(M, 'mmultiscripts');
        var miMain = doc.createElementNS(M, 'mi');
        miMain.textContent = main;
        var miSub1 = doc.createElementNS(M, 'mi');
        miSub1.textContent = sub1;
        var miSub2 = doc.createElementNS(M, 'mi');
        miSub2.textContent = sub2;
        var mpres = doc.createElementNS(M, 'mprescripts');
        var miPre1 = doc.createElementNS(M, 'mi');
        miPre1.textContent = pre1;
        var miPre2 = doc.createElementNS(M, 'mi');
        miPre2.textContent = pre2;
        mm.append(miMain, miSub1, miSub2, mpres, miPre1, miPre2);
        munderover.appendChild(mm);
      }
      mrow.appendChild(munderover);
      math.appendChild(mrow);
      try {
        math.style.all = 'initial';
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('FontMathFeature: applying math.style.all failed', ex);
      }
      math.style.whiteSpace = 'nowrap';
      math.style.display = 'inline-block';
      math.style.letterSpacing = 'normal';
      math.style.lineHeight = 'normal';
      math.style.textTransform = 'none';
      math.style.fontVariant = 'normal';
      math.style.fontFeatureSettings = 'normal';
      math.style.fontKerning = 'auto';
      math.style.direction = 'ltr';
      math.style.writingMode = 'horizontal-tb';
      math.style.fontSize = '16px';
      return math;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var info;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return (0,_TypographyFrameUtils__WEBPACK_IMPORTED_MODULE_2__.measureInEphemeralIframe)({
                hostWindow: this._window,
                hostDocument: this._document,
                frameId: 'cd__frame__font_math',
                buildNode: function buildNode(_ref) {
                  var doc = _ref.doc;
                  return _this2._buildMathML(doc);
                },
                maxFrames: 12,
                minSamples: 3,
                stableHitsTarget: 2,
                absTolPx: 0,
                relTol: 0,
                quantStep: 0
              });
            case 3:
              info = _context.sent;
              if (info) {
                this._dataQ.addToQueue('static_fields', ['font_math_info', info], false);
              }
              _context.next = 10;
              break;
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed to collect math font information', _context.t0);
            case 10:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 7]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/font/size-prefences/FontWidthFeature.js":
/*!****************************************************************************!*\
  !*** ./src/main/collectors/static/font/size-prefences/FontWidthFeature.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontWidthFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var featureSettings = {
  configKey: 'isFontWidthFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};

/**
  FontWidthFeature creates a clean <iframe>, renders the test string mmMwWLliI0fiflO&1 in seven common font families,
  measures each spans pixel width, and returns a JSON payload. The width values vary across operating systems, browser engines, 
  DPI, and zoom settings, producing a numeric width-fingerprint. 
  This complements FontEmojiFeature, which measures the bounding box of 80 emoji, 
  and FontMathFeature, which measures a complex MathML formula in a math font. 
  Together the three collectors build a richer typographic profile for fingerprinting and rendering diagnostics.
 */
var FontWidthFeature = /*#__PURE__*/function (_DataCollector) {
  function FontWidthFeature(dataQ) {
    var _this;
    var document = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.document;
    var devicePixelRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.devicePixelRatio;
    _classCallCheck(this, FontWidthFeature);
    _this = _callSuper(this, FontWidthFeature);
    _this._dataQ = dataQ;
    _this._document = document;
    _this._devicePixelRatio = devicePixelRatio;
    return _this;
  }
  _inherits(FontWidthFeature, _DataCollector);
  return _createClass(FontWidthFeature, [{
    key: "_measureFontWidths",
    value: function _measureFontWidths() {
      var _this2 = this;
      var fontStyles = {
        "default": [],
        apple: [{
          font: "-apple-system-body"
        }],
        serif: [{
          fontFamily: "serif"
        }],
        sans: [{
          fontFamily: "sans-serif"
        }],
        mono: [{
          fontFamily: "monospace"
        }],
        min: [{
          fontSize: "1px"
        }],
        system: [{
          fontFamily: "system-ui"
        }]
      };
      var testString = "mmMwWLliI0fiflO&1";
      var defaultWidth = 4000;
      function createTestEnvironment(callback) {
        var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultWidth;
        var iframe = this._document.createElement("iframe");
        this._document.body.appendChild(iframe);
        var doc = iframe.contentDocument;
        doc.open();
        doc.write('<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"></head><body></body></html>');
        doc.close();
        var result = callback(doc, doc.body, width);
        this._document.body.removeChild(iframe);
        return result;
      }
      function prepareDocument(doc, body, width) {
        body.style.width = "".concat(width, "px");
        body.style.webkitTextSizeAdjust = body.style.textSizeAdjust = "none";
        if (this._isZoomNeeded()) {
          body.style.zoom = "".concat(1 / this._devicePixelRatio);
        } else if (this._isZoomResetNeeded()) {
          body.style.zoom = "reset";
        }
        var testDiv = doc.createElement("div");
        testDiv.textContent = Array.from({
          length: width / 20 >> 0
        }, function () {
          return "word";
        }).join(" ");
        body.appendChild(testDiv);
      }
      function measureFonts(doc, body) {
        var elements = {};
        var results = {};
        var _loop = function _loop() {
          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
            key = _Object$entries$_i[0],
            styles = _Object$entries$_i[1];
          var style = styles[0] || {};
          var span = doc.createElement("span");
          span.textContent = testString;
          span.style.whiteSpace = "nowrap";
          Object.entries(style).forEach(function (_ref) {
            var _ref2 = _slicedToArray(_ref, 2),
              prop = _ref2[0],
              val = _ref2[1];
            if (val !== undefined) span.style[prop] = val;
          });
          elements[key] = span;
          body.append(doc.createElement("br"), span);
        };
        for (var _i = 0, _Object$entries = Object.entries(fontStyles); _i < _Object$entries.length; _i++) {
          _loop();
        }
        Object.keys(fontStyles).forEach(function (key) {
          results[key] = elements[key].getBoundingClientRect().width;
        });
        return results;
      }
      return createTestEnvironment.call(this, function (doc, body, width) {
        prepareDocument.call(_this2, doc, body, width);
        return measureFonts(doc, body);
      });
    }
  }, {
    key: "_isZoomNeeded",
    value: function _isZoomNeeded() {
      return true;
    }
  }, {
    key: "_isZoomResetNeeded",
    value: function _isZoomResetNeeded() {
      return false;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var fontWidthInfo;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              try {
                fontWidthInfo = this._measureFontWidths();
                this._dataQ.addToQueue('static_fields', ['font_width_info', fontWidthInfo], false);
              } catch (error) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed to collect font width information', error);
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/graphic/GfxRenderingFeature.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/static/graphic/GfxRenderingFeature.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CanvasModel: function() { return /* binding */ CanvasModel; },
/* harmony export */   "default": function() { return /* binding */ GfxRenderingFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _contract_staticContracts_GfxRenderingContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../contract/staticContracts/GfxRenderingContract */ "./src/main/contract/staticContracts/GfxRenderingContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }



var featureSettings = {
  configKey: 'isGfxRendering',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};

// Use a common font type to retain the same rendering across different browsers
var CANVAS_TEXT_FIRST_FONT = '11pt Times New Roman';
var CANVAS_TEXT_SECOND_FONT = '18pt Arial';
var CANVAS_TEXT_THIRD_FONT = '14pt Georgia';
var CANVAS_TEXT_FOURTH_FONT = '16pt Verdana';
var CANVAS_TEXT_WIDTH = 320;
var CANVAS_TEXT_HEIGHT = 120;
var CANVAS_GEOMETRY_WIDTH = 256;
var CANVAS_GEOMETRY_HEIGHT = 256;
var CANVAS_RENDERING_NOISE_DETECTED_VAL = "0";
var CanvasModel = /*#__PURE__*/_createClass(function CanvasModel() {
  _classCallCheck(this, CanvasModel);
  this.winding = false;
  this.text = "";
  this.geometry = "";
});

/**
 * The purpose of this class is to collect data about the rendering capabilities of the browser
 * The collector should report the following:
 * 1. Whether the browser supports the winding rule for canvas rendering
 * 2. A hash of the text rendering capabilities of the browser
 * 3. A hash of the geometry rendering capabilities of the browser
 * In case the browser has a plugin that applies noise to the rendering, for example alters a single pixel,
 * the second attempt to encode the canvas will result in a different hash - in that case "0" is assigned to both text and geometry
 */
var GfxRenderingFeature = /*#__PURE__*/function (_DataCollector) {
  /**
   * @param {DataQueue} dataQ
   * @param {Utils} CDUtils
   */
  function GfxRenderingFeature(dataQ, utils) {
    var _this;
    _classCallCheck(this, GfxRenderingFeature);
    _this = _callSuper(this, GfxRenderingFeature);
    _this._dataQ = dataQ;
    _this._utils = utils;
    _this._metric = 'GFX';

    // This element doesn't have to be added to the DOM
    _this.canvasElement = null;
    _this.canvasContext = null;
    _this._addToQueueAndCleanUp = _this.addToQueueAndCleanUp.bind(_this);
    return _this;
  }
  _inherits(GfxRenderingFeature, _DataCollector);
  return _createClass(GfxRenderingFeature, [{
    key: "startFeature",
    value: function startFeature() {
      this.initCanvasAndContext();
      if (this.isCanvas2DSupported(this.canvasElement, this.canvasContext)) {
        this.generateCanvasData();
      }
    }
  }, {
    key: "addToQueueAndCleanUp",
    value: function addToQueueAndCleanUp(canvasData) {
      var gfxContract = new _contract_staticContracts_GfxRenderingContract__WEBPACK_IMPORTED_MODULE_1__["default"](canvasData.winding, canvasData.text, canvasData.geometry);
      var gfxData = gfxContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', gfxData, false);
      this.cleanUp();
    }
  }, {
    key: "initCanvasAndContext",
    value: function initCanvasAndContext() {
      // Without exposing an initiator, proper spying and stubbing cannot be performed
      if (this.canvasElement === null || this.canvasContext === null) {
        this.canvasElement = document.createElement('canvas');
        this.canvasContext = this.buildCanvasContext(this.canvasElement);
      }
    }
  }, {
    key: "cleanUp",
    value: function cleanUp() {
      // Clean up
      this.canvasContext = null;
      this.canvasElement = null;
    }

    /**
     * Generates the data for the canvas rendering
     * @param callback
     */
  }, {
    key: "generateCanvasData",
    value: function generateCanvasData() {
      var _this2 = this;
      var canvasData = new CanvasModel();
      canvasData.winding = this.hasWinding(this.canvasContext);
      this.renderTextImage(this.canvasElement, this.canvasContext);
      var textImageFP1 = this.canvasToText(this.canvasElement);
      var textImageFP2 = this.canvasToText(this.canvasElement);
      // Compare between the results of the calls to dataToURL()
      // If noise is applied by the browser, it's useless to report the actual fingerprint
      // The change of a single pixel is enough to alter the signature
      if (textImageFP1.length === 0 || textImageFP2.length === 0 || textImageFP1 !== textImageFP2) {
        canvasData.text = CANVAS_RENDERING_NOISE_DETECTED_VAL;
        canvasData.geometry = CANVAS_RENDERING_NOISE_DETECTED_VAL;
        this._addToQueueAndCleanUp(canvasData);
      } else {
        this.hashCanvasText(textImageFP1).then(function (canvasDataText) {
          canvasData.text = canvasDataText || CANVAS_RENDERING_NOISE_DETECTED_VAL;
          _this2.renderGeometryImage(_this2.canvasElement, _this2.canvasContext);
          return _this2.hashCanvasText(_this2.canvasToText(_this2.canvasElement));
        }).then(function (canvasDataGeometry) {
          canvasData.geometry = canvasDataGeometry || CANVAS_RENDERING_NOISE_DETECTED_VAL;
          _this2._addToQueueAndCleanUp(canvasData);
        });
      }
    }

    /**
     * @param {HTMLCanvasElement} canvasElement
     */
  }, {
    key: "buildCanvasContext",
    value: function buildCanvasContext(canvasElement) {
      canvasElement.width = 1;
      canvasElement.height = 1;
      return canvasElement.getContext('2d');
    }

    /**
     * @param {HTMLCanvasElement} canvas
     * @param {CanvasRenderingContext2D} context
     */
  }, {
    key: "isCanvas2DSupported",
    value: function isCanvas2DSupported(canvas, context) {
      return !!(context && canvas.toDataURL);
    }

    /**
     * Renders a text image in the given context2D
     * @param {HTMLCanvasElement} canvasElement
     * @param {CanvasRenderingContext2D} canvasContext
     */
  }, {
    key: "renderTextImage",
    value: function renderTextImage(canvasElement, canvasContext) {
      canvasElement.width = CANVAS_TEXT_WIDTH;
      canvasElement.height = CANVAS_TEXT_HEIGHT;

      // Create gradient background
      var gradient = canvasContext.createLinearGradient(0, 0, CANVAS_TEXT_WIDTH, CANVAS_TEXT_HEIGHT);
      gradient.addColorStop(0, '#f60');
      gradient.addColorStop(1, '#069');
      canvasContext.fillStyle = gradient;
      canvasContext.fillRect(0, 0, CANVAS_TEXT_WIDTH, CANVAS_TEXT_HEIGHT);
      canvasContext.textBaseline = 'alphabetic';
      canvasContext.fillStyle = '#fff';

      // First text with first font
      canvasContext.font = CANVAS_TEXT_FIRST_FONT;
      // Add more diverse Unicode and Emojis
      var printedText = "DHO YbmPx KTGUL CQrSfJ iNvZAEW ".concat(String.fromCharCode(55357, 56835), " \uD83D\uDE04 \uD83D\uDCA9 \u2693 \u2194"); // Smiling face, Pile of Poo, Anchor, Left-right arrow
      canvasContext.fillText(printedText, 2, 15);

      // Second text with second font and rotation
      canvasContext.save();
      canvasContext.translate(4, 45);
      canvasContext.rotate(0.1);
      canvasContext.font = CANVAS_TEXT_SECOND_FONT;
      canvasContext.fillStyle = 'rgba(102, 204, 0, 0.7)';
      canvasContext.fillText(printedText, 0, 0);
      canvasContext.restore();

      // Third text with third font and shadow
      canvasContext.font = CANVAS_TEXT_THIRD_FONT;
      canvasContext.shadowColor = 'rgba(0, 0, 0, 0.5)';
      canvasContext.shadowBlur = 2;
      canvasContext.shadowOffsetX = 1;
      canvasContext.shadowOffsetY = 1;
      canvasContext.fillStyle = '#ff0';
      // Apply skew transformation
      canvasContext.save();
      canvasContext.transform(1, 0.1, 0, 1, 0, 0); // Skew horizontally
      canvasContext.fillText(printedText, 2, 75);
      canvasContext.restore();
      canvasContext.shadowColor = 'transparent'; // Reset shadow

      // Fourth text with fourth font and pattern
      var pattern = canvasContext.createPattern(this.createPatternCanvas(), 'repeat');
      canvasContext.font = CANVAS_TEXT_FOURTH_FONT;
      canvasContext.fillStyle = pattern;
      canvasContext.fillText(printedText, 2, 100);
    }
  }, {
    key: "createPatternCanvas",
    value: function createPatternCanvas() {
      var patternCanvas = document.createElement('canvas');
      patternCanvas.width = 20;
      patternCanvas.height = 20;
      var patternCtx = patternCanvas.getContext('2d');
      patternCtx.fillStyle = '#f00';
      patternCtx.fillRect(0, 0, 10, 10);
      patternCtx.fillStyle = '#00f';
      patternCtx.fillRect(10, 10, 10, 10);
      return patternCanvas;
    }

    /**
     *
     * @param {HTMLCanvasElement} canvasElement
     * @param {CanvasRenderingContext2D} canvasContext
     */
  }, {
    key: "renderGeometryImage",
    value: function renderGeometryImage(canvasElement, canvasContext) {
      canvasElement.width = CANVAS_GEOMETRY_WIDTH;
      canvasElement.height = CANVAS_GEOMETRY_HEIGHT;

      // Create complex gradient background
      var gradient = canvasContext.createRadialGradient(CANVAS_GEOMETRY_WIDTH / 2, CANVAS_GEOMETRY_HEIGHT / 2, 0, CANVAS_GEOMETRY_WIDTH / 2, CANVAS_GEOMETRY_HEIGHT / 2, CANVAS_GEOMETRY_WIDTH / 2);
      gradient.addColorStop(0, '#f2f');
      gradient.addColorStop(0.5, '#2ff');
      gradient.addColorStop(1, '#ff2');
      canvasContext.fillStyle = gradient;
      canvasContext.fillRect(0, 0, CANVAS_GEOMETRY_WIDTH, CANVAS_GEOMETRY_HEIGHT);

      // Draw complex shapes with different composite operations
      canvasContext.globalCompositeOperation = 'multiply';
      var pointsArray = [['#f2f', 40, 40], ['#2ff', 80, 40], ['#ff2', 60, 80]];
      for (var _i = 0, _pointsArray = pointsArray; _i < _pointsArray.length; _i++) {
        var _pointsArray$_i = _slicedToArray(_pointsArray[_i], 3),
          color = _pointsArray$_i[0],
          x = _pointsArray$_i[1],
          y = _pointsArray$_i[2];
        canvasContext.fillStyle = color;
        canvasContext.beginPath();
        canvasContext.arc(x, y, 40, 0, 2 * Math.PI, true);
        canvasContext.closePath();
        canvasContext.fill();
      }

      // Add more complex shapes
      canvasContext.globalCompositeOperation = 'screen';
      canvasContext.fillStyle = '#f9c';
      canvasContext.beginPath();
      canvasContext.arc(60, 60, 60, 0, 2 * Math.PI, true);
      canvasContext.arc(60, 60, 20, 0, 2 * Math.PI, true);
      canvasContext.fill('evenodd');

      // Add Bezier curves with a different blend mode
      canvasContext.globalCompositeOperation = 'difference'; // Changed from overlay
      canvasContext.beginPath();
      canvasContext.moveTo(20, 20);
      canvasContext.bezierCurveTo(40, 40, 60, 40, 80, 20);
      canvasContext.strokeStyle = '#0f0';
      canvasContext.lineWidth = 3;
      canvasContext.stroke();

      // Add more complex patterns with another blend mode
      canvasContext.globalCompositeOperation = 'luminosity'; // Changed from soft-light
      for (var i = 0; i < 5; i++) {
        canvasContext.beginPath();
        canvasContext.moveTo(0, i * 50);
        canvasContext.lineTo(CANVAS_GEOMETRY_WIDTH, i * 50);
        canvasContext.strokeStyle = "rgba(255, 255, 255, ".concat(0.2 + i * 0.1, ")");
        canvasContext.stroke();
      }
    }

    /**
     *
     * @param {HTMLCanvasElement} canvasElement
     */
  }, {
    key: "canvasToText",
    value: function canvasToText(canvasElement) {
      try {
        // toDataURL returns a base64 encoded string or throws an error (SecurityError, InvalidStateError, etc.)
        return canvasElement.toDataURL().split(',')[1];
      } catch (error) {
        // Handle all canvas errors 
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('Canvas toDataURL error:', error.name, error.message);
        return "";
      }
    }

    /**
     *
     * @param {string} data
     * @returns {Promise}
     */
  }, {
    key: "hashCanvasText",
    value: function hashCanvasText(data) {
      return this._utils.digest_sha256(data).then(function (hash) {
        return hash;
      })["catch"](function () {
        return "";
      });
    }

    /**
     *
     * @param {CanvasRenderingContext2D} canvasContext
     * @private
     * https://blog.coderfy.io/making-sense-of-canvas-winding-rules
     * Some machines/GPUs support winding and some do not.
     */
  }, {
    key: "hasWinding",
    value: function hasWinding(canvasContext) {
      canvasContext.rect(0, 0, 10, 10);
      canvasContext.rect(2, 2, 6, 6);
      return !canvasContext.isPointInPath(5, 5, 'evenodd');
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/graphic/GraphicDetectFeature.js":
/*!********************************************************************!*\
  !*** ./src/main/collectors/static/graphic/GraphicDetectFeature.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ GraphicDetectFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_staticContracts_GraphicDetectContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../contract/staticContracts/GraphicDetectContract */ "./src/main/contract/staticContracts/GraphicDetectContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



var featureSettings = {
  configKey: 'isVMDetection',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var GraphicDetectFeature = /*#__PURE__*/function (_DataCollector) {
  function GraphicDetectFeature(dataQ, configurations) {
    var _this;
    _classCallCheck(this, GraphicDetectFeature);
    _this = _callSuper(this, GraphicDetectFeature);
    _this._dataQ = dataQ;
    _this._configurations = configurations;
    _this.canvasId = 'cd_canvas';
    return _this;
  }
  _inherits(GraphicDetectFeature, _DataCollector);
  return _createClass(GraphicDetectFeature, [{
    key: "startFeature",
    value: function startFeature() {
      try {
        if (this._configurations && this._configurations.isGraphCardEnabled()) {
          this._getMappedRenderInfo();
        }
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed collecting Graphic Card information. ".concat(error));
      }
    }

    /**
     * Get rendering info - graphic card with version if exists
     * and send to server
     */
  }, {
    key: "_getMappedRenderInfo",
    value: function _getMappedRenderInfo() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Collecting Graphic Card props');
      var graphicInfo = {
        renderer: 'unknown',
        vendor: '',
        version: 'unknown',
        supportedExtensions: ''
      };
      if (window.WebGLRenderingContext || window.WebGL2RenderingContext) {
        var canvas = document.createElement('canvas');
        canvas.id = this.canvasId;
        var gl = canvas.getContext('experimental-webgl');
        if (gl) {
          var dbgRenderInfo = gl.getExtension('WEBGL_debug_renderer_info');
          if (dbgRenderInfo != null) {
            graphicInfo.renderer = gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);
            graphicInfo.vendor = gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL);
            graphicInfo.supportedExtensions = gl.getSupportedExtensions().join(',');
            var stringIntel = 'Intel';
            var stringHDgraphics = 'HD Graphics';
            var stringBDW = 'BDW (5th gen core)';
            var stringSKL = 'SKL (6th gen core)';
            if (graphicInfo.renderer.indexOf(stringIntel) > -1 && graphicInfo.renderer.indexOf(stringHDgraphics) > -1) {
              var numberPattern = /\d+/g;
              var matches = graphicInfo.renderer.match(numberPattern);
              if (matches) {
                var minVersion = matches[0];
                if (minVersion > 500 && minVersion < 599) {
                  graphicInfo.version = stringSKL;
                }
                if (minVersion > 5300 && minVersion < 6999) {
                  graphicInfo.version = stringBDW;
                }
              }
            }
          }
        }
      }
      var graphicDetectContract = new _contract_staticContracts_GraphicDetectContract__WEBPACK_IMPORTED_MODULE_2__["default"](graphicInfo.renderer, graphicInfo.vendor, graphicInfo.version, graphicInfo.supportedExtensions);
      var graphicDetectData = graphicDetectContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', graphicDetectData, false);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info('Graphic Card props collected');
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/graphic/WebglCollector.js":
/*!**************************************************************!*\
  !*** ./src/main/collectors/static/graphic/WebglCollector.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebGLFingerprint: function() { return /* binding */ WebGLFingerprint; },
/* harmony export */   "default": function() { return /* binding */ WebglCollector; }
/* harmony export */ });
/* harmony import */ var _technicalServices_Hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../technicalServices/Hash */ "./src/main/technicalServices/Hash.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * WebGLFingerprint class for generating unique browser fingerprints based on WebGL capabilities
 * and rendering characteristics.
 */
var WebGLFingerprint = /*#__PURE__*/function () {
  /**
   * Creates a new WebGLFingerprint instance and initializes the fingerprinting process.
   */
  function WebGLFingerprint() {
    _classCallCheck(this, WebGLFingerprint);
    // List of potential WebGL context names in order of preference
    this.contextNames = ["webgl2", "experimental-webgl2", "webgl", "experimental-webgl", "moz-webgl", "webkit-3d", "webgl2-compute"];

    // Store gathered context data
    this.data = {};
    // Keep track of context names that returned a valid context
    this.availableContexts = [];

    // Cache for computed hashes
    this._hashCache = {
      json: null,
      image: null
    };

    // Flag to track initialization status
    this._initialized = false;
  }

  /**
   * Start the WebGL fingerprinting process asynchronously
   * @returns {Promise<void>} A promise that resolves when fingerprinting is complete
   */
  return _createClass(WebGLFingerprint, [{
    key: "start",
    value: (function () {
      var _start = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this._initialized) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              _context.prev = 2;
              _context.next = 5;
              return this._initializeContexts();
            case 5:
              // Compute hashes
              this._computeHashes();
              this._initialized = true;
              _context.next = 13;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](2);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error during WebGL fingerprinting:", _context.t0);
              throw _context.t0;
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[2, 9]]);
      }));
      function start() {
        return _start.apply(this, arguments);
      }
      return start;
    }()
    /**
     * Initialize WebGL contexts and gather data
     * @private
     * @returns {Promise<void>} A promise that resolves when initialization is complete
     */
    )
  }, {
    key: "_initializeContexts",
    value: (function () {
      var _initializeContexts2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this = this;
        var contextPromises;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              contextPromises = this.contextNames.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ctxName) {
                  var info;
                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.prev = 0;
                        _context2.next = 3;
                        return _this.getContextData(ctxName);
                      case 3:
                        info = _context2.sent;
                        if (info) {
                          _this.availableContexts.push(ctxName);
                          _this.data[ctxName] = info;
                        }
                        _context2.next = 10;
                        break;
                      case 7:
                        _context2.prev = 7;
                        _context2.t0 = _context2["catch"](0);
                        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error retrieving context data for ".concat(ctxName, ":"), _context2.t0);
                      case 10:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2, null, [[0, 7]]);
                }));
                return function (_x) {
                  return _ref.apply(this, arguments);
                };
              }()); // Wait for all context initializations to complete
              _context3.next = 3;
              return Promise.all(contextPromises);
            case 3:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("WebGL fingerprint data:", this.data);
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _initializeContexts() {
        return _initializeContexts2.apply(this, arguments);
      }
      return _initializeContexts;
    }()
    /**
     * Compute JSON and image hashes from collected data
     * @private
     */
    )
  }, {
    key: "_computeHashes",
    value: function _computeHashes() {
      // Compute JSON hash from the collected data
      this.jsonString = JSON.stringify(this.data);
      this._hashCache.json = (0,_technicalServices_Hash__WEBPACK_IMPORTED_MODULE_0__.x64hash128)(this.jsonString);

      // Compute image hash from a rendered canvas if at least one valid context is available
      this._hashCache.image = this.availableContexts.length > 0 ? this.computeImageHash() : null;
    }

    /**
     * Get the JSON hash of the WebGL fingerprint data
     * @returns {string} The computed hash
     */
  }, {
    key: "jsonHash",
    get: function get() {
      return this._hashCache.json;
    }

    /**
     * Get the image hash of the WebGL fingerprint data
     * @returns {string|null} The computed hash or null if not available
     */
  }, {
    key: "imageHash",
    get: function get() {
      return this._hashCache.image;
    }

    /**
     * Creates a canvas, gets a WebGL context, and gathers various parameters,
     * including additional hardware limits to boost uniqueness.
     *
     * @param {string} contextType - A potential WebGL context name.
     * @returns {Promise<Object|null>} A promise that resolves to collected WebGL parameters or null.
     */
  }, {
    key: "getContextData",
    value: (function () {
      var _getContextData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(contextType) {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              return _context4.abrupt("return", new Promise(function (resolve) {
                try {
                  var _canvas$style;
                  var canvas = document.createElement("canvas");
                  canvas.width = 256;
                  canvas.height = 128;
                  canvas.style = (_canvas$style = canvas.style) !== null && _canvas$style !== void 0 ? _canvas$style : {};
                  canvas.style.backgroundColor = "#555";
                  canvas.style.borderRadius = "4px";
                  var gl = canvas.getContext(contextType);
                  if (!gl) {
                    resolve(null);
                    return;
                  }
                  var info = {};

                  // Capture and group context attributes
                  var attrs = gl.getContextAttributes();
                  if (attrs && Object.keys(attrs).length > 0) {
                    info.contextAttributes = attrs;
                  }

                  // Additional color space info
                  info.drawingBufferColorSpace = gl.drawingBufferColorSpace;
                  info.unpackColorSpace = gl.unpackColorSpace;

                  // Debug renderer info
                  var debugExt = gl.getExtension("WEBGL_debug_renderer_info");
                  if (debugExt) {
                    info.UNMASKED_RENDERER_WEBGL = gl.getParameter(debugExt.UNMASKED_RENDERER_WEBGL);
                    info.UNMASKED_VENDOR_WEBGL = gl.getParameter(debugExt.UNMASKED_VENDOR_WEBGL);
                  }

                  // Shader precision formats
                  info.VERTEX_SHADER_PRECISION = _this2.getShaderPrecision(gl, gl.VERTEX_SHADER);
                  info.FRAGMENT_SHADER_PRECISION = _this2.getShaderPrecision(gl, gl.FRAGMENT_SHADER);

                  // Additional extensions and limits
                  var drawBuffersExt = gl.getExtension("WEBGL_draw_buffers");
                  info.MAX_DRAW_BUFFERS_WEBGL = drawBuffersExt ? gl.getParameter(drawBuffersExt.MAX_DRAW_BUFFERS_WEBGL) : null;
                  var anisoExt = gl.getExtension("EXT_texture_filter_anisotropic") || gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
                  info.MAX_TEXTURE_MAX_ANISOTROPY_EXT = anisoExt ? gl.getParameter(anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : null;

                  // Query additional hardware limits
                  info.MAX_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
                  info.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
                  info.MAX_COMBINED_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
                  info.ALIASED_LINE_WIDTH_RANGE = gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE);
                  info.ALIASED_POINT_SIZE_RANGE = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);
                  info.SAMPLES = gl.getParameter(gl.SAMPLES);
                  info.RENDERER = gl.getParameter(gl.RENDERER);
                  info.VENDOR = gl.getParameter(gl.VENDOR);
                  info.VERSION = gl.getParameter(gl.VERSION);
                  info.SHADING_LANGUAGE_VERSION = gl.getParameter(gl.SHADING_LANGUAGE_VERSION);

                  // More hardware details
                  info.MAX_CUBE_MAP_TEXTURE_SIZE = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);
                  info.MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);
                  info.MAX_RENDERBUFFER_SIZE = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);
                  info.DEPTH_BITS = gl.getParameter(gl.DEPTH_BITS);
                  info.STENCIL_BITS = gl.getParameter(gl.STENCIL_BITS);
                  info.MAX_VERTEX_ATTRIBS = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
                  info.MAX_VIEWPORT_DIMS = gl.getParameter(gl.MAX_VIEWPORT_DIMS);
                  info.MAX_FRAGMENT_UNIFORM_VECTORS = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);
                  info.MAX_VERTEX_UNIFORM_VECTORS = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);

                  // Supported extensions sorted for consistency
                  var extensions = gl.getSupportedExtensions();
                  info.extensions = extensions ? extensions.sort() : [];
                  resolve(info);
                } catch (error) {
                  _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error in getContextData for ".concat(contextType, ":"), error);
                  resolve(null);
                }
              }));
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }));
      function getContextData(_x2) {
        return _getContextData.apply(this, arguments);
      }
      return getContextData;
    }()
    /**
     * Returns shader precision details for a given shader type.
     *
     * @param {WebGLRenderingContext} gl - The WebGL context.
     * @param {number} shaderType - gl.VERTEX_SHADER or gl.FRAGMENT_SHADER.
     * @returns {Object|null} Precision details or null.
     */
    )
  }, {
    key: "getShaderPrecision",
    value: function getShaderPrecision(gl, shaderType) {
      try {
        var high = gl.getShaderPrecisionFormat(shaderType, gl.HIGH_FLOAT);
        var medium = gl.getShaderPrecisionFormat(shaderType, gl.MEDIUM_FLOAT);
        var used = high.precision !== 0 ? high : medium;
        return {
          rangeMin: used.rangeMin,
          rangeMax: used.rangeMax,
          precision: used.precision
        };
      } catch (e) {
        return null;
      }
    }

    /**
     * Renders a complex scene (arc and rectangle) and returns a hash
     * based on the pixel data and WebGL-specific parameters.
     *
     * @returns {string|null} The computed hash or an error string.
     */
  }, {
    key: "computeImageHash",
    value: function computeImageHash() {
      if (this.availableContexts.length === 0) return null;

      // Use the first available context
      var contextType = this.availableContexts[0];
      var canvas = document.createElement("canvas");
      // Increase resolution for finer differences
      canvas.width = 512;
      canvas.height = 256;
      var gl = canvas.getContext(contextType);
      if (!gl) return null;

      // Resources to clean up
      var resources = {
        program: null,
        vertexShader: null,
        fragmentShader: null,
        buffer: null
      };
      try {
        // Helper: Convert ArrayBuffer to Base64 string
        var arrayBufferToBase64 = function arrayBufferToBase64(buffer) {
          var binary = '';
          var bytes = new Uint8Array(buffer);
          var len = bytes.byteLength;
          for (var _i = 0; _i < len; _i++) {
            binary += String.fromCharCode(bytes[_i]);
          }
          return btoa(binary);
        };
        gl.viewport(0, 0, canvas.width, canvas.height);

        // Vertex shader
        var vertexShaderSource = "\n        attribute vec2 attrVertex;\n        attribute vec4 attrColor;\n        varying vec4 varyinColor;\n        uniform mat4 transform;\n        void main(){\n          varyinColor = attrColor;\n          gl_Position = transform * vec4(attrVertex, 0.0, 1.0);\n        }\n      ";

        // Fragment shader
        var fragmentShaderSource = "\n        precision mediump float;\n        varying vec4 varyinColor;\n        void main(){\n          gl_FragColor = varyinColor;\n        }\n      ";

        // Helper to compile a shader
        var compileShader = function compileShader(type, source) {
          var shader = gl.createShader(type);
          gl.shaderSource(shader, source);
          gl.compileShader(shader);
          if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug((type === gl.VERTEX_SHADER ? "Vertex" : "Fragment") + " shader error:", gl.getShaderInfoLog(shader));
          }
          return shader;
        };

        // Compile and link shaders
        var program = gl.createProgram();
        resources.program = program;
        var vShader = compileShader(gl.VERTEX_SHADER, vertexShaderSource);
        resources.vertexShader = vShader;
        var fShader = compileShader(gl.FRAGMENT_SHADER, fragmentShaderSource);
        resources.fragmentShader = fShader;
        gl.attachShader(program, vShader);
        gl.attachShader(program, fShader);
        gl.linkProgram(program);
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Program link error:", gl.getProgramInfoLog(program));
        }
        gl.useProgram(program);

        // Locate attributes and uniforms
        var vertexPosAttrib = gl.getAttribLocation(program, "attrVertex");
        var colorAttrib = gl.getAttribLocation(program, "attrColor");
        var transformUniform = gl.getUniformLocation(program, "transform");
        gl.enableVertexAttribArray(vertexPosAttrib);
        gl.enableVertexAttribArray(colorAttrib);

        // Set a uniform transform
        gl.uniformMatrix4fv(transformUniform, false, new Float32Array([1.5, 0, 0, 0, 0, 1.5, 0, 0, 0, 0, 1, 0, 0.5, 0, 0, 1]));

        // --- Build vertex data ---
        // 1. Arc geometry (arc fan with 128 iterations)
        var arcCenter = [-0.25, 0.0];
        var steps = 128;
        var vertices = [];

        // The center vertex for the arc
        vertices.push(arcCenter[0], arcCenter[1], 1, 0.7, 0, 1);
        for (var i = 0; i < steps; i++) {
          var angle1 = (45 + i / steps * 270) / 360 * 2 * Math.PI;
          var angle2 = (45 + (i + 1) / steps * 270) / 360 * 2 * Math.PI;
          // First point on the arc
          vertices.push(arcCenter[0] + 0.5 * Math.cos(angle1), arcCenter[1] + 0.5 * Math.sin(angle1), 2, 1 - i / steps, 0, 1);
          // Second point on the arc
          vertices.push(arcCenter[0] + 0.5 * Math.cos(angle2), arcCenter[1] + 0.5 * Math.sin(angle2), 1, 1 - (i + 1) / steps, 0, 1);
        }

        // 2. Additional geometry: a rectangle (drawn as two triangles) in the top-right quadrant
        // Each vertex: [x, y, r, g, b, a]
        var rectVertices = [
        // First triangle
        0.2, 0.2, 0.8, 0.2, 0.2, 1, 0.8, 0.2, 0.2, 0.8, 0.8, 1, 0.2, 0.8, 0.5, 0.5, 0.2, 1,
        // Second triangle
        0.8, 0.2, 0.2, 0.8, 0.8, 1, 0.8, 0.8, 0.8, 0.8, 0.8, 1, 0.2, 0.8, 0.5, 0.5, 0.2, 1];

        // Combine the vertex data
        var combinedVertices = new Float32Array([].concat(vertices, rectVertices));

        // Create and bind buffer
        var buffer = gl.createBuffer();
        resources.buffer = buffer;
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, combinedVertices, gl.STATIC_DRAW);

        // Each vertex has 6 floats (2 for position, 4 for color)
        gl.vertexAttribPointer(vertexPosAttrib, 2, gl.FLOAT, false, 6 * 4, 0);
        gl.vertexAttribPointer(colorAttrib, 4, gl.FLOAT, false, 6 * 4, 2 * 4);

        // Clear and render the scene
        gl.clearColor(0, 0, 0, 0);
        gl.clear(gl.COLOR_BUFFER_BIT);

        // Draw the arc using a LINE_STRIP
        var arcVertexCount = vertices.length / 6;
        gl.drawArrays(gl.LINE_STRIP, 0, arcVertexCount);

        // Draw the rectangle using TRIANGLES
        var rectVertexCount = rectVertices.length / 6;
        gl.drawArrays(gl.TRIANGLES, arcVertexCount, rectVertexCount);

        // --- Read and process pixel data ---
        var pixelBuffer = new Uint8Array(canvas.width * canvas.height * 4);
        try {
          gl.readPixels(0, 0, canvas.width, canvas.height, gl.RGBA, gl.UNSIGNED_BYTE, pixelBuffer);
        } catch (e) {
          return "gl.readPixels: " + e;
        }
        var pixelBase64 = arrayBufferToBase64(pixelBuffer.buffer);

        // Incorporate WebGL parameters for enhanced uniqueness
        var vendor = gl.getParameter(gl.VENDOR) || '';
        var renderer = gl.getParameter(gl.RENDERER) || '';
        var extensions = (gl.getSupportedExtensions() || []).join(',');

        // Concatenate the pixel data with WebGL parameters
        var fingerprintData = pixelBase64 + vendor + renderer + extensions;

        // Compute and return the hash
        return (0,_technicalServices_Hash__WEBPACK_IMPORTED_MODULE_0__.x64hash128)(fingerprintData);
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error computing WebGL image hash:", error);
        return null;
      } finally {
        // Clean up WebGL resources
        this._cleanupWebGLResources(gl, resources);
      }
    }

    /**
     * Clean up WebGL resources to prevent memory leaks
     * @param {WebGLRenderingContext} gl - The WebGL context
     * @param {Object} resources - Resources to clean up
     * @private
     */
  }, {
    key: "_cleanupWebGLResources",
    value: function _cleanupWebGLResources(gl, resources) {
      if (!gl) return;
      try {
        // Delete shaders
        if (resources.vertexShader) {
          gl.deleteShader(resources.vertexShader);
        }
        if (resources.fragmentShader) {
          gl.deleteShader(resources.fragmentShader);
        }

        // Delete program
        if (resources.program) {
          gl.deleteProgram(resources.program);
        }

        // Delete buffer
        if (resources.buffer) {
          gl.deleteBuffer(resources.buffer);
        }
      } catch (e) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error cleaning up WebGL resources:", e);
      }
    }
  }]);
}();

var featureSettings = {
  configKey: 'isWebglFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};

/**
 * WebglCollector class for collecting WebGL fingerprint data
 * and sending it to the data queue.
 */
var WebglCollector = /*#__PURE__*/function (_DataCollector) {
  /**
   * Create a new WebglCollector instance
   * @param {Object} dataQ - The data queue to send data to
   */
  function WebglCollector(dataQ) {
    var _this3;
    _classCallCheck(this, WebglCollector);
    _this3 = _callSuper(this, WebglCollector);
    _this3._dataQ = dataQ;
    return _this3;
  }

  /**
   * Start the WebGL fingerprinting feature
   * @returns {Promise<void>} A promise that resolves when fingerprinting is complete
   */
  _inherits(WebglCollector, _DataCollector);
  return _createClass(WebglCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var webGLFingerprint;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              webGLFingerprint = new WebGLFingerprint();
              _context5.prev = 1;
              _context5.next = 4;
              return webGLFingerprint.start();
            case 4:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("WebGL JSON Hash:" + webGLFingerprint.jsonHash);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("WebGL Image Hash:" + webGLFingerprint.imageHash);
              this._dataQ.addToQueue('static_fields', ['webgl', [webGLFingerprint.jsonHash, webGLFingerprint.imageHash]], false);
              _context5.next = 12;
              break;
            case 9:
              _context5.prev = 9;
              _context5.t0 = _context5["catch"](1);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Error in WebGL fingerprinting:", _context5.t0);
            case 12:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[1, 9]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }())
  }], [{
    key: "getDefaultSettings",
    value:
    /**
     * Get the default settings for the WebGL collector
     * @returns {Object} The default settings
     */
    function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/incognito/IncognitoDetector.js":
/*!*******************************************************************!*\
  !*** ./src/main/collectors/static/incognito/IncognitoDetector.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IncognitoDetector; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Incognito Browsing Mode Detector
 * 
 * Detects incognito browsing mode using multiple detection techniques:
 * - FileSystem API detection
 * - Storage quota detection
 * - IndexedDB detection
 * - localStorage detection
 * - navigator.languages detection
 * - Screen resolution detection
 * - Performance.memory detection
 * - openDatabase detection
 * - storage.getDirectory() detection
 * - IndexedDB Blob detection
 * - webkitTemporaryStorage detection
 * - IndexedDB 'inPrivate' detection
 * 
 * Runs all detection methods on all browsers and combines results for maximum accuracy.
 */
var IncognitoDetector = /*#__PURE__*/function () {
  function IncognitoDetector() {
    var _options$window, _options$navigator, _options$document;
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, IncognitoDetector);
    // Inject dependencies for testing, with defaults for production use
    this._window = (_options$window = options.window) !== null && _options$window !== void 0 ? _options$window : globalThis;
    this._navigator = (_options$navigator = options.navigator) !== null && _options$navigator !== void 0 ? _options$navigator : navigator;
    this._document = (_options$document = options.document) !== null && _options$document !== void 0 ? _options$document : document;
  }
  return _createClass(IncognitoDetector, [{
    key: "detectIncognitoMode",
    value: function () {
      var _detectIncognitoMode = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", this._detectIncognitoModePromise());
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function detectIncognitoMode() {
        return _detectIncognitoMode.apply(this, arguments);
      }
      return detectIncognitoMode;
    }()
  }, {
    key: "_detectIncognitoModePromise",
    value: function () {
      var _detectIncognitoModePromise2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var detectionMethods, results, resultMap;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              detectionMethods = [{
                key: 'navigatorLanguages',
                promise: this._checkNavigatorLanguagesLength()
              }, {
                key: 'performanceMemory',
                promise: this._checkPerformanceMemoryAvailability()
              }, {
                key: 'localStorage',
                promise: this._checkLocalStorageAccess()
              }, {
                key: 'screenResolution',
                promise: this._checkScreenWidthEquality()
              }, {
                key: 'webSQLDatabase',
                promise: this._checkWebSQLDatabaseAccess()
              }, {
                key: 'indexedDBExistence',
                promise: this._checkIndexedDBExistence()
              }, {
                key: 'fileSystemAPI',
                promise: this._checkFileSystemAPIAccess()
              }, {
                key: 'storageQuota',
                promise: this._checkStorageQuotaLimits()
              }, {
                key: 'indexedDBOperations',
                promise: this._checkIndexedDBOperations()
              }, {
                key: 'storageDirectory',
                promise: this._checkStorageDirectoryAccess()
              }, {
                key: 'indexedDBBlob',
                promise: this._checkIndexedDBBlobCreation()
              }, {
                key: 'webkitStorageQuota',
                promise: this._checkWebkitTemporaryStorage()
              }, {
                key: 'storageDirectoryOrIndexedDB',
                promise: this._checkStorageDirectoryOrIndexedDB()
              }];
              _context2.next = 3;
              return Promise.allSettled(detectionMethods.map(function (m) {
                return m.promise;
              }));
            case 3:
              results = _context2.sent;
              // Return results as a map/object with named keys
              resultMap = {};
              detectionMethods.forEach(function (method, index) {
                var result = results[index];
                resultMap[method.key] = result.status === 'fulfilled' ? result.value : null;
              });
              return _context2.abrupt("return", resultMap);
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _detectIncognitoModePromise() {
        return _detectIncognitoModePromise2.apply(this, arguments);
      }
      return _detectIncognitoModePromise;
    }()
    /**
     * Detects incognito mode using the FileSystem API
     * 
     * In Chrome and Edge browsers, the webkitRequestFileSystem API throws an error
     * when accessed in incognito mode. This method attempts to request a temporary
     * file system and interprets any errors as an indication of incognito mode.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
  }, {
    key: "_checkFileSystemAPIAccess",
    value: (function () {
      var _checkFileSystemAPIAccess2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              return _context3.abrupt("return", new Promise(function (resolve) {
                if (!_this._window.webkitRequestFileSystem) {
                  resolve(null);
                  return;
                }
                try {
                  _this._window.webkitRequestFileSystem(_this._window.TEMPORARY, 1, function () {
                    // Success = not incognito
                    resolve(false);
                  }, function () {
                    // Error = likely incognito
                    resolve(true);
                  });
                } catch (e) {
                  // Error accessing FileSystem API suggests incognito
                  // Exception is intentionally caught and handled by resolving with incognito detection
                  if (e instanceof Error) {
                    // Error handled: FileSystem API access failed, treating as incognito
                  }
                  resolve(true);
                }
              }));
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }));
      function _checkFileSystemAPIAccess() {
        return _checkFileSystemAPIAccess2.apply(this, arguments);
      }
      return _checkFileSystemAPIAccess;
    }()
    /**
     * Detects incognito mode by checking storage quota limits
     * 
     * In Chrome and Edge browsers, incognito mode imposes strict storage quotas
     * compared to normal mode. This method uses two detection strategies:
     * 
     * 1. Primary method: Compares storage quota to performance.memory.jsHeapSizeLimit
     *    - In incognito mode: quota is typically much smaller than heap size limit
     *    - In normal mode: quota is usually larger than or close to heap size limit
     *    - This comparison provides higher accuracy than fixed thresholds
     * 
     * 2. Fallback method: Uses 120MB threshold if performance.memory is unavailable
     *    - In incognito mode: quota is typically around 120MB or less
     *    - In normal mode: quota is usually much higher (GBs)
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if quota suggests incognito, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkStorageQuotaLimits",
    value: (function () {
      var _checkStorageQuotaLimits2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var estimate, heapSizeLimit, _isIncognito, isIncognito;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!(!this._navigator.storage || !this._navigator.storage.estimate)) {
                _context4.next = 2;
                break;
              }
              return _context4.abrupt("return", null);
            case 2:
              _context4.prev = 2;
              _context4.next = 5;
              return this._navigator.storage.estimate();
            case 5:
              estimate = _context4.sent;
              if (!(this._window.performance && this._window.performance.memory && this._window.performance.memory.jsHeapSizeLimit)) {
                _context4.next = 10;
                break;
              }
              heapSizeLimit = this._window.performance.memory.jsHeapSizeLimit; // In incognito mode, quota is typically much smaller than heap size limit
              // In normal mode, quota is usually larger than or close to heap size limit
              // Using 0.8 as threshold to account for variations
              _isIncognito = estimate.quota < heapSizeLimit * 0.8;
              return _context4.abrupt("return", _isIncognito);
            case 10:
              // Fallback: Use fixed threshold if performance.memory is unavailable
              // In incognito mode, quota is typically around 120MB or less
              // In normal mode, quota is usually much higher (GBs)
              isIncognito = estimate.quota < 120000000; // 120MB threshold
              return _context4.abrupt("return", isIncognito);
            case 14:
              _context4.prev = 14;
              _context4.t0 = _context4["catch"](2);
              // Storage API unavailable or error accessing it - cannot determine incognito status
              // Exception is intentionally caught and handled by returning null
              if (_context4.t0 instanceof Error) {
                // Error handled: Storage API access failed, cannot determine incognito status
              }
              return _context4.abrupt("return", null);
            case 18:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[2, 14]]);
      }));
      function _checkStorageQuotaLimits() {
        return _checkStorageQuotaLimits2.apply(this, arguments);
      }
      return _checkStorageQuotaLimits;
    }()
    /**
     * Detects incognito mode by analyzing navigator.languages array
     * 
     * In Chrome 86+ browsers, incognito mode limits the navigator.languages array
     * to contain only a single value (matching navigator.language), whereas normal
     * mode typically includes multiple language preferences. This method checks
     * if the languages array has only one element matching the primary language.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkNavigatorLanguagesLength",
    value: (function () {
      var _checkNavigatorLanguagesLength2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var isIncognito;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (!(!this._navigator.languages || !Array.isArray(this._navigator.languages))) {
                _context5.next = 2;
                break;
              }
              return _context5.abrupt("return", null);
            case 2:
              // In incognito mode, languages array typically has only 1 element
              // In normal mode, it usually has multiple
              isIncognito = this._navigator.languages.length === 1 && this._navigator.languages[0] === this._navigator.language;
              return _context5.abrupt("return", isIncognito);
            case 4:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function _checkNavigatorLanguagesLength() {
        return _checkNavigatorLanguagesLength2.apply(this, arguments);
      }
      return _checkNavigatorLanguagesLength;
    }()
    /**
     * Detects incognito mode by checking Performance.memory API availability
     * 
     * In Chrome browsers, the performance.memory API is either undefined or
     * returns limited information (such as zero heap size) when accessed in
     * incognito mode. This method checks if the memory object exists and has
     * valid heap size information.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkPerformanceMemoryAvailability",
    value: (function () {
      var _checkPerformanceMemoryAvailability2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var memory;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              if (this._window.performance) {
                _context6.next = 3;
                break;
              }
              return _context6.abrupt("return", null);
            case 3:
              memory = this._window.performance.memory;
              if (memory) {
                _context6.next = 6;
                break;
              }
              return _context6.abrupt("return", true);
            case 6:
              return _context6.abrupt("return", memory.totalJSHeapSize === 0);
            case 9:
              _context6.prev = 9;
              _context6.t0 = _context6["catch"](0);
              // Error accessing performance.memory suggests incognito
              // Exception is intentionally caught and handled by returning incognito detection
              if (_context6.t0 instanceof Error) {
                // Error handled: performance.memory access failed, treating as incognito
              }
              return _context6.abrupt("return", true);
            case 13:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[0, 9]]);
      }));
      function _checkPerformanceMemoryAvailability() {
        return _checkPerformanceMemoryAvailability2.apply(this, arguments);
      }
      return _checkPerformanceMemoryAvailability;
    }()
    /**
     * Detects incognito mode by testing localStorage write access
     * 
     * In Safari browsers, localStorage operations throw errors when attempted
     * in private browsing mode. This method attempts to write and remove a test
     * item from localStorage and interprets any thrown errors as an indication
     * of private browsing mode.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if localStorage unavailable
     */
    )
  }, {
    key: "_checkLocalStorageAccess",
    value: (function () {
      var _checkLocalStorageAccess2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var test;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              if (this._window.localStorage) {
                _context7.next = 2;
                break;
              }
              return _context7.abrupt("return", null);
            case 2:
              _context7.prev = 2;
              test = '__private_browsing_test__';
              this._window.localStorage.setItem(test, '1');
              this._window.localStorage.removeItem(test);
              return _context7.abrupt("return", false);
            case 9:
              _context7.prev = 9;
              _context7.t0 = _context7["catch"](2);
              // localStorage access blocked in incognito mode
              // Exception is intentionally caught and handled by returning incognito detection
              if (_context7.t0 instanceof Error) {
                // Error handled: localStorage access blocked, treating as incognito
              }
              return _context7.abrupt("return", true);
            case 13:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this, [[2, 9]]);
      }));
      function _checkLocalStorageAccess() {
        return _checkLocalStorageAccess2.apply(this, arguments);
      }
      return _checkLocalStorageAccess;
    }()
    /**
     * Detects Safari 17+ private mode using screen resolution comparison
     * 
     * In Safari 17 and later versions, private browsing mode causes the screen
     * width to equal the document client width, which is an unusual condition
     * that doesn't occur in normal browsing mode. This method compares these
     * two values to detect private mode in modern Safari browsers.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if private mode detected, false if not, null if check unavailable
     */
    )
  }, {
    key: "_checkScreenWidthEquality",
    value: (function () {
      var _checkScreenWidthEquality2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              if (!(this._window.screen && this._window.screen.width === this._document.documentElement.clientWidth)) {
                _context8.next = 3;
                break;
              }
              return _context8.abrupt("return", true);
            case 3:
              _context8.next = 9;
              break;
            case 5:
              _context8.prev = 5;
              _context8.t0 = _context8["catch"](0);
              // Error accessing screen properties might indicate private mode
              // Exception is intentionally caught and handled by returning private mode detection
              if (_context8.t0 instanceof Error) {
                // Error handled: screen properties access failed, treating as private mode
              }
              return _context8.abrupt("return", true);
            case 9:
              return _context8.abrupt("return", null);
            case 10:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this, [[0, 5]]);
      }));
      function _checkScreenWidthEquality() {
        return _checkScreenWidthEquality2.apply(this, arguments);
      }
      return _checkScreenWidthEquality;
    }()
    /**
     * Detects incognito mode by testing Web SQL Database API access
     * 
     * In Safari iOS 11+ browsers, the deprecated openDatabase API throws errors
     * when accessed in private browsing mode. This method attempts to open a
     * database connection and interprets any thrown errors as an indication
     * of private browsing mode.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkWebSQLDatabaseAccess",
    value: (function () {
      var _checkWebSQLDatabaseAccess2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              if (this._window.openDatabase) {
                _context9.next = 2;
                break;
              }
              return _context9.abrupt("return", null);
            case 2:
              _context9.prev = 2;
              this._window.openDatabase(null, null, null, null);
              return _context9.abrupt("return", false);
            case 7:
              _context9.prev = 7;
              _context9.t0 = _context9["catch"](2);
              // Web SQL Database access blocked in incognito mode
              // Exception is intentionally caught and handled by returning incognito detection
              if (_context9.t0 instanceof Error) {
                // Error handled: Web SQL Database access blocked, treating as incognito
              }
              return _context9.abrupt("return", true);
            case 11:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this, [[2, 7]]);
      }));
      function _checkWebSQLDatabaseAccess() {
        return _checkWebSQLDatabaseAccess2.apply(this, arguments);
      }
      return _checkWebSQLDatabaseAccess;
    }()
    /**
     * Detects incognito mode by checking IndexedDB availability
     * 
     * In Internet Explorer and older Edge browsers, IndexedDB is completely
     * unavailable when accessed in private/InPrivate mode. This method performs
     * a check to see if the IndexedDB API exists, treating its absence as an
     * indication of incognito mode.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if IndexedDB unavailable (likely incognito), null if available
     */
    )
  }, {
    key: "_checkIndexedDBExistence",
    value: (function () {
      var _checkIndexedDBExistence2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {
        return _regeneratorRuntime().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              _context10.prev = 0;
              if (this._window.indexedDB) {
                _context10.next = 3;
                break;
              }
              return _context10.abrupt("return", true);
            case 3:
              _context10.next = 9;
              break;
            case 5:
              _context10.prev = 5;
              _context10.t0 = _context10["catch"](0);
              // Error accessing IndexedDB = likely incognito
              // Exception is intentionally caught and handled by returning incognito detection
              if (_context10.t0 instanceof Error) {
                // Error handled: IndexedDB access failed, treating as incognito
              }
              return _context10.abrupt("return", true);
            case 9:
              return _context10.abrupt("return", null);
            case 10:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this, [[0, 5]]);
      }));
      function _checkIndexedDBExistence() {
        return _checkIndexedDBExistence2.apply(this, arguments);
      }
      return _checkIndexedDBExistence;
    }()
    /**
     * Asynchronously detects incognito mode using IndexedDB with proper cleanup
     * 
     * In Firefox, IE, Edge, and Safari browsers, IndexedDB operations are blocked
     * or throw errors when accessed in private/incognito mode. This method attempts
     * to open a test database, and if successful, properly closes and deletes it
     * to avoid leaving test artifacts. Any errors during this process indicate
     * that IndexedDB access is blocked, suggesting incognito mode.
     * 
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkIndexedDBOperations",
    value: (function () {
      var _checkIndexedDBOperations2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              return _context11.abrupt("return", new Promise(function (resolve) {
                if (!_this2._window.indexedDB) {
                  resolve(null);
                  return;
                }
                try {
                  var indDB = _this2._window.indexedDB;
                  var request = indDB.open('__private_browsing_test__');
                  request.onerror = function () {
                    // IndexedDB access blocked = likely incognito
                    resolve(true);
                  };
                  request.onsuccess = function () {
                    // Close the database first
                    if (request.result) {
                      request.result.close();
                    }

                    // Try to delete test database
                    var deleteRequest = indDB.deleteDatabase('__private_browsing_test__');
                    deleteRequest.onsuccess = function () {
                      // IndexedDB accessible = not incognito
                      resolve(false);
                    };
                    deleteRequest.onerror = function () {
                      // Delete failed might indicate incognito
                      resolve(true);
                    };
                  };
                } catch (e) {
                  // Error accessing IndexedDB suggests incognito
                  // Exception is intentionally caught and handled by resolving with incognito detection
                  if (e instanceof Error) {
                    // Error handled: IndexedDB operation failed, treating as incognito
                  }
                  resolve(true);
                }
              }));
            case 1:
            case "end":
              return _context11.stop();
          }
        }, _callee11);
      }));
      function _checkIndexedDBOperations() {
        return _checkIndexedDBOperations2.apply(this, arguments);
      }
      return _checkIndexedDBOperations;
    }()
    /**
     * Safari current test (Safari 19+)
     * Uses navigator.storage.getDirectory() and checks for "unknown transient reason" error
     * @returns {Promise<boolean|null>} - Resolves to true if private mode detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkStorageDirectoryAccess",
    value: (function () {
      var _checkStorageDirectoryAccess2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
        var _this$_navigator$stor;
        var message, matchesExpectedError;
        return _regeneratorRuntime().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              if (!(typeof ((_this$_navigator$stor = this._navigator.storage) === null || _this$_navigator$stor === void 0 ? void 0 : _this$_navigator$stor.getDirectory) !== 'function')) {
                _context12.next = 2;
                break;
              }
              return _context12.abrupt("return", null);
            case 2:
              _context12.prev = 2;
              _context12.next = 5;
              return this._navigator.storage.getDirectory();
            case 5:
              return _context12.abrupt("return", false);
            case 8:
              _context12.prev = 8;
              _context12.t0 = _context12["catch"](2);
              message = _context12.t0 instanceof Error && typeof _context12.t0.message === 'string' ? _context12.t0.message : String(_context12.t0);
              matchesExpectedError = message.includes('unknown transient reason');
              return _context12.abrupt("return", matchesExpectedError);
            case 13:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this, [[2, 8]]);
      }));
      function _checkStorageDirectoryAccess() {
        return _checkStorageDirectoryAccess2.apply(this, arguments);
      }
      return _checkStorageDirectoryAccess;
    }()
    /**
     * Safari 13-18 test
     * Uses IndexedDB with Blob creation test
     * @returns {Promise<boolean|null>} - Resolves to true if private mode detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkIndexedDBBlobCreation",
    value: (function () {
      var _checkIndexedDBBlobCreation2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {
        var _this3 = this;
        return _regeneratorRuntime().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              return _context13.abrupt("return", new Promise(function (resolve) {
                if (!_this3._window.indexedDB) {
                  resolve(null);
                  return;
                }
                var tmp = String(Math.random());
                try {
                  var dbReq = _this3._window.indexedDB.open(tmp, 1);
                  dbReq.onupgradeneeded = function (ev) {
                    var db = ev.target.result;
                    var finish = function finish(priv) {
                      resolve(priv);
                    };
                    try {
                      db.createObjectStore('t', {
                        autoIncrement: true
                      }).put(new Blob());
                      finish(false); // Not private
                    } catch (err) {
                      var message = err instanceof Error && typeof err.message === 'string' ? err.message : String(err);
                      if (message.includes('are not yet supported')) {
                        finish(true); // Private mode
                      } else {
                        finish(false); // Not private
                      }
                    } finally {
                      db.close();
                      _this3._window.indexedDB.deleteDatabase(tmp);
                    }
                  };
                  dbReq.onerror = function () {
                    return resolve(false);
                  };
                } catch (_unused) {
                  resolve(false);
                }
              }));
            case 1:
            case "end":
              return _context13.stop();
          }
        }, _callee13);
      }));
      function _checkIndexedDBBlobCreation() {
        return _checkIndexedDBBlobCreation2.apply(this, arguments);
      }
      return _checkIndexedDBBlobCreation;
    }()
    /**
     * Gets quota limit from performance.memory.jsHeapSizeLimit
     * @returns {number} Quota limit in bytes, defaults to 1GB
     */
    )
  }, {
    key: "_getQuotaLimit",
    value: function _getQuotaLimit() {
      var _w$performance$memory, _w$performance;
      var w = this._window;
      return (_w$performance$memory = w === null || w === void 0 || (_w$performance = w.performance) === null || _w$performance === void 0 || (_w$performance = _w$performance.memory) === null || _w$performance === void 0 ? void 0 : _w$performance.jsHeapSizeLimit) !== null && _w$performance$memory !== void 0 ? _w$performance$memory : 1073741824;
    }

    /**
     * Chrome storage quota test (Chrome 76+)
     * Uses webkitTemporaryStorage.queryUsageAndQuota
     * @returns {Promise<boolean|null>} - Resolves to true if incognito detected, false if not, null if API unavailable
     */
  }, {
    key: "_checkWebkitTemporaryStorage",
    value: (function () {
      var _checkWebkitTemporaryStorage2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
        var _this4 = this;
        return _regeneratorRuntime().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              return _context14.abrupt("return", new Promise(function (resolve) {
                if (!_this4._navigator.webkitTemporaryStorage || typeof _this4._navigator.webkitTemporaryStorage.queryUsageAndQuota !== 'function') {
                  resolve(null);
                  return;
                }
                _this4._navigator.webkitTemporaryStorage.queryUsageAndQuota(function (usage, quota) {
                  var quotaInMib = Math.round(quota / (1024 * 1024));
                  var quotaLimitInMib = Math.round(_this4._getQuotaLimit() / (1024 * 1024)) * 2;
                  resolve(quotaInMib < quotaLimitInMib);
                }, function (e) {
                  // Error querying quota - cannot determine
                  resolve(null);
                });
              }));
            case 1:
            case "end":
              return _context14.stop();
          }
        }, _callee14);
      }));
      function _checkWebkitTemporaryStorage() {
        return _checkWebkitTemporaryStorage2.apply(this, arguments);
      }
      return _checkWebkitTemporaryStorage;
    }()
    /**
     * Firefox private test
     * Uses navigator.storage.getDirectory() or IndexedDB with 'inPrivate' database name
     * @returns {Promise<boolean|null>} - Resolves to true if private mode detected, false if not, null if API unavailable
     */
    )
  }, {
    key: "_checkStorageDirectoryOrIndexedDB",
    value: (function () {
      var _checkStorageDirectoryOrIndexedDB2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {
        var _this$_navigator$stor2,
          _this5 = this;
        var message, matchesExpectedError;
        return _regeneratorRuntime().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              if (!(typeof ((_this$_navigator$stor2 = this._navigator.storage) === null || _this$_navigator$stor2 === void 0 ? void 0 : _this$_navigator$stor2.getDirectory) === 'function')) {
                _context15.next = 12;
                break;
              }
              _context15.prev = 1;
              _context15.next = 4;
              return this._navigator.storage.getDirectory();
            case 4:
              return _context15.abrupt("return", false);
            case 7:
              _context15.prev = 7;
              _context15.t0 = _context15["catch"](1);
              message = _context15.t0 instanceof Error && typeof _context15.t0.message === 'string' ? _context15.t0.message : String(_context15.t0);
              matchesExpectedError = message.includes('Security error');
              return _context15.abrupt("return", matchesExpectedError);
            case 12:
              return _context15.abrupt("return", new Promise(function (resolve) {
                if (!_this5._window.indexedDB) {
                  resolve(null);
                  return;
                }
                try {
                  var request = _this5._window.indexedDB.open('inPrivate');
                  request.onerror = function (event) {
                    if (request.error && request.error.name === 'InvalidStateError') {
                      event.preventDefault();
                    }
                    resolve(true); // Private mode
                  };
                  request.onsuccess = function () {
                    _this5._window.indexedDB.deleteDatabase('inPrivate');
                    resolve(false); // Not private
                  };
                } catch (e) {
                  // IndexedDB operation failed - cannot determine private mode status
                  // Exception is intentionally caught and handled by resolving with null
                  if (e instanceof Error) {
                    // Error handled: IndexedDB operation failed, cannot determine private mode status
                  }
                  resolve(null);
                }
              }));
            case 13:
            case "end":
              return _context15.stop();
          }
        }, _callee15, this, [[1, 7]]);
      }));
      function _checkStorageDirectoryOrIndexedDB() {
        return _checkStorageDirectoryOrIndexedDB2.apply(this, arguments);
      }
      return _checkStorageDirectoryOrIndexedDB;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/incognito/IsPrivateBrowsingFeature.js":
/*!**************************************************************************!*\
  !*** ./src/main/collectors/static/incognito/IsPrivateBrowsingFeature.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IsPrivateBrowsingFeature; }
/* harmony export */ });
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _contract_staticContracts_IsPrivateBrowsingContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../contract/staticContracts/IsPrivateBrowsingContract */ "./src/main/contract/staticContracts/IsPrivateBrowsingContract.js");
/* harmony import */ var _contract_staticContracts_IsIncognitoContract__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../contract/staticContracts/IsIncognitoContract */ "./src/main/contract/staticContracts/IsIncognitoContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }





var featureSettings = {
  configKey: 'isPrivateBrowsing',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var IsPrivateBrowsingFeature = /*#__PURE__*/function (_DataCollector) {
  function IsPrivateBrowsingFeature(dataQ, privateBrowsingDetector, incognitoDetector, devDebugDataQ, configurationRepository) {
    var _this;
    _classCallCheck(this, IsPrivateBrowsingFeature);
    _this = _callSuper(this, IsPrivateBrowsingFeature);
    _this._dataQ = dataQ;
    _this._devDebugDataQ = devDebugDataQ;
    _this._privateBrowsingDetector = privateBrowsingDetector;
    _this._incognitoDetector = incognitoDetector;
    _this._configurationRepository = configurationRepository;
    return _this;
  }
  _inherits(IsPrivateBrowsingFeature, _DataCollector);
  return _createClass(IsPrivateBrowsingFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$_configurationR;
        var promises, enableIncognitoDetection;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              // Run detections in parallel - each handles its own detection, logging, and sending
              promises = [this._detectOldPrivateBrowsing()]; // Check if new incognito detection is enabled via configuration
              enableIncognitoDetection = ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.enableIncognitoDetection)) === true; // Only add new incognito detection if enabled via configuration
              if (enableIncognitoDetection) {
                promises.push(this._detectNewIncognito());
              }
              _context.next = 5;
              return Promise.allSettled(promises);
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Detects private browsing using the old detection method, logs result, and sends to queue
     * @returns {Promise<void>}
     */
  }, {
    key: "_detectOldPrivateBrowsing",
    value: (function () {
      var _detectOldPrivateBrowsing2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this2 = this;
        var isPrivate, isPrivateBrowsingContract, isPrivateData;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return new Promise(function (resolve) {
                _this2._privateBrowsingDetector.detectPrivateMode(function (result) {
                  resolve(result === true);
                });
              });
            case 3:
              isPrivate = _context2.sent;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("[IsPrivateBrowsing] Private browsing detection result: ".concat(isPrivate));

              // Send old is_private_browsing data
              isPrivateBrowsingContract = new _contract_staticContracts_IsPrivateBrowsingContract__WEBPACK_IMPORTED_MODULE_1__["default"](isPrivate);
              isPrivateData = isPrivateBrowsingContract.buildQueueMessage();
              this._dataQ.addToQueue('static_fields', isPrivateData, false);
              _context2.next = 13;
              break;
            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("[IsPrivateBrowsing] Old private browsing detection failed: ".concat(_context2.t0));
            case 13:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 10]]);
      }));
      function _detectOldPrivateBrowsing() {
        return _detectOldPrivateBrowsing2.apply(this, arguments);
      }
      return _detectOldPrivateBrowsing;
    }()
    /**
     * Detects incognito mode using the new detection method, logs result, and sends to queue
     * @returns {Promise<void>}
     */
    )
  }, {
    key: "_detectNewIncognito",
    value: (function () {
      var _detectNewIncognito2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var incognitoResults, isIncognitoContract, isIncognitoData;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return this._incognitoDetector.detectIncognitoMode();
            case 3:
              incognitoResults = _context3.sent;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("[IsPrivateBrowsing] Incognito detection results: ".concat(JSON.stringify(incognitoResults)));

              // Send new is_incognito data to dev debug queue
              isIncognitoContract = new _contract_staticContracts_IsIncognitoContract__WEBPACK_IMPORTED_MODULE_2__["default"](incognitoResults);
              isIncognitoData = isIncognitoContract.buildQueueMessage();
              this._devDebugDataQ.addToQueue('static_fields', isIncognitoData, false);
              _context3.next = 13;
              break;
            case 10:
              _context3.prev = 10;
              _context3.t0 = _context3["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].debug("[IsPrivateBrowsing] New incognito detection failed: ".concat(_context3.t0));
            case 13:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 10]]);
      }));
      function _detectNewIncognito() {
        return _detectNewIncognito2.apply(this, arguments);
      }
      return _detectNewIncognito;
    }())
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectors/static/incognito/PrivateBrowsingDetector.js":
/*!*************************************************************************!*\
  !*** ./src/main/collectors/static/incognito/PrivateBrowsingDetector.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PrivateBrowsingDetector; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * @deprecated This class is deprecated. Do not delete until migration is complete.
 * 
 * Note: This class was written a long time ago and is being phased out.
 * 
 * This class is based on https://gist.github.com/cou929/7973956
 * In Edge the results are not correct. In others it seems good
 */
var PrivateBrowsingDetector = /*#__PURE__*/function () {
  function PrivateBrowsingDetector() {
    _classCallCheck(this, PrivateBrowsingDetector);
  }
  return _createClass(PrivateBrowsingDetector, [{
    key: "detectPrivateMode",
    value: function detectPrivateMode(callback) {
      if (this._isWebkitBrowser()) {
        this._detectPrivateBrowsingOnWebkit(callback);
      } else if (this._isMozillaBrowser()) {
        this._detectPrivateBrowsingOnMozilla(callback);
      } else if (this._isIE10OrLater(globalThis.navigator.userAgent)) {
        this._detectPrivateBrowsingOnIESinceVersion10(callback);
      } else if (globalThis.localStorage && /Safari/.test(globalThis.navigator.userAgent)) {
        this._detectPrivateBrowsingOnSafari(callback);
      } else {
        // Undetermined result
        callback(null);
      }
    }
  }, {
    key: "_isWebkitBrowser",
    value: function _isWebkitBrowser() {
      return !!globalThis.webkitRequestFileSystem;
    }
  }, {
    key: "_isMozillaBrowser",
    value: function _isMozillaBrowser() {
      return 'MozAppearance' in document.documentElement.style;
    }
  }, {
    key: "_isIE10OrLater",
    value: function _isIE10OrLater(userAgent) {
      var ua = userAgent.toLowerCase();
      if (ua.indexOf('msie') === 0 && ua.indexOf('trident') === 0) {
        return false;
      }
      var match = /(?:msie|rv:)\s?([\d.]+)/.exec(ua);
      if (match && Number.parseInt(match[1], 10) >= 10) {
        return true;
      }
      // IE 10-11
      match = 'documentElement' in document && ('filters' in document.documentElement || 'documentMode' in document);
      if (match && document.documentMode) {
        var ver = Number.parseFloat((ua.match(/.+(?:ie|rv)[/: ]([\d.]+)/) || [])[1]);
        if (ver >= 10) {
          return true;
        }
      }
      // IE edge and compatibility
      match = /edge/.test(ua);
      var comp = !!ua.match(/trident\/7\./);
      if (match || comp) {
        // msieMaxVersion
        var _ver = Number.parseFloat((ua.match(/.+(?:edge|rv)[/: ]([\d.]+)/) || [])[1]);
        if (_ver >= 10) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: "_detectPrivateBrowsingOnWebkit",
    value: function _detectPrivateBrowsingOnWebkit(callback) {
      if (navigator.storage !== undefined && typeof navigator.storage.estimate === 'function') {
        this._storageEstimateDetectionOnWebkit(callback);
      } else {
        this._fileSystemDetectionOnWebkit(callback);
      }
    }
  }, {
    key: "_fileSystemDetectionOnWebkit",
    value: function _fileSystemDetectionOnWebkit(callback) {
      globalThis.webkitRequestFileSystem(globalThis.TEMPORARY, 1, function () {
        callback(false);
      }, function () {
        callback(true);
      });
    }
  }, {
    key: "_storageEstimateDetectionOnWebkit",
    value: function _storageEstimateDetectionOnWebkit(callback) {
      navigator.storage.estimate().then(function (_ref) {
        var quota = _ref.quota;
        callback(quota < 120000000);
      })["catch"](function (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('failed to detect private browsing', error);
        callback(null);
      });
    }
  }, {
    key: "_detectPrivateBrowsingOnMozilla",
    value: function _detectPrivateBrowsingOnMozilla(callback) {
      try {
        var indDB = indexedDB || globalThis.indexedDB;
        var db = indDB.open('test');
        db.onerror = function () {
          // catch on firefox
          callback(true);
        };
        db.onsuccess = function () {
          callback(false);
        };
      } catch (e) {
        if (e instanceof Error) {
          // Error handled: IndexedDB access failed, treating as private browsing
        }
        callback(true);
      }
    }
  }, {
    key: "_detectPrivateBrowsingOnIESinceVersion10",
    value: function _detectPrivateBrowsingOnIESinceVersion10(callback) {
      var isPrivate = false;
      try {
        if (!globalThis.indexedDB) {
          isPrivate = true;
        }
      } catch (e) {
        if (e instanceof Error) {
          // Error handled: IndexedDB access failed, treating as private browsing
        }
        isPrivate = true;
      }
      callback(isPrivate);
    }
  }, {
    key: "_detectPrivateBrowsingOnSafari",
    value: function _detectPrivateBrowsingOnSafari(callback) {
      var isPrivateBrowsing;
      // iOS 11 and newer Safari versions
      // Origin: https://gist.github.com/cou929/7973956#gistcomment-2272103
      try {
        globalThis.openDatabase(null, null, null, null);
      } catch (e) {
        if (e instanceof Error) {
          // Error handled: openDatabase access failed, treating as private browsing
        }
        isPrivateBrowsing = true;
      }

      // Older Safari
      try {
        globalThis.localStorage.setItem('test', 1);
      } catch (e) {
        if (e instanceof Error) {
          // Error handled: localStorage access failed, treating as private browsing
        }
        isPrivateBrowsing = true;
      }
      if (!isPrivateBrowsing) {
        isPrivateBrowsing = false;
        globalThis.localStorage.removeItem('test');
      }
      callback(isPrivateBrowsing);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/index.js":
/*!*********************************************!*\
  !*** ./src/main/collectors/static/index.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdblockerListsCollector: function() { return /* reexport safe */ _adblock_AdblockerListsCollector__WEBPACK_IMPORTED_MODULE_14__["default"]; },
/* harmony export */   AgenticBrowserDetectFeature: function() { return /* reexport safe */ _AgenticBrowserDetectFeature__WEBPACK_IMPORTED_MODULE_30__["default"]; },
/* harmony export */   AudioDetectFeature: function() { return /* reexport safe */ _AudioDetectFeature__WEBPACK_IMPORTED_MODULE_9__["default"]; },
/* harmony export */   AudioDetectFeature2: function() { return /* reexport safe */ _AudioDetectFeature2__WEBPACK_IMPORTED_MODULE_10__["default"]; },
/* harmony export */   BrowserDetect: function() { return /* reexport safe */ _BrowserDetect__WEBPACK_IMPORTED_MODULE_0__["default"]; },
/* harmony export */   BrowserExtensionsDomCollector: function() { return /* reexport safe */ _extensions_dom_BrowserExtensionsDomCollector__WEBPACK_IMPORTED_MODULE_18__["default"]; },
/* harmony export */   BrowserExtensionsUrlCollector: function() { return /* reexport safe */ _extensions_url_BrowserExtensionsUrlCollector__WEBPACK_IMPORTED_MODULE_19__["default"]; },
/* harmony export */   BrowserPropsFeature: function() { return /* reexport safe */ _BrowserPropsFeature__WEBPACK_IMPORTED_MODULE_1__["default"]; },
/* harmony export */   CPUDataCollector: function() { return /* reexport safe */ _cpu_CPUCollector__WEBPACK_IMPORTED_MODULE_28__["default"]; },
/* harmony export */   ClientHintsCollector: function() { return /* reexport safe */ _ClientHintsCollector__WEBPACK_IMPORTED_MODULE_13__["default"]; },
/* harmony export */   DRMDataCollector: function() { return /* reexport safe */ _DRMDataCollector__WEBPACK_IMPORTED_MODULE_20__["default"]; },
/* harmony export */   DoNotTrackFeature: function() { return /* reexport safe */ _DoNotTrackFeature__WEBPACK_IMPORTED_MODULE_2__["default"]; },
/* harmony export */   EncryptedMuidFeature: function() { return /* reexport safe */ _EncryptedMuidFeature__WEBPACK_IMPORTED_MODULE_11__["default"]; },
/* harmony export */   FontCollectionFeature: function() { return /* reexport safe */ _font_collection_FontCollectionFeature__WEBPACK_IMPORTED_MODULE_7__["default"]; },
/* harmony export */   FontEmojiFeature: function() { return /* reexport safe */ _font_emoji_FontEmojiFeature__WEBPACK_IMPORTED_MODULE_23__["default"]; },
/* harmony export */   FontMathFeature: function() { return /* reexport safe */ _font_fontmath_FontMathFeature__WEBPACK_IMPORTED_MODULE_24__["default"]; },
/* harmony export */   FontWidthFeature: function() { return /* reexport safe */ _font_size_prefences_FontWidthFeature__WEBPACK_IMPORTED_MODULE_25__["default"]; },
/* harmony export */   GfxRenderingFeature: function() { return /* reexport safe */ _graphic_GfxRenderingFeature__WEBPACK_IMPORTED_MODULE_8__["default"]; },
/* harmony export */   GraphicDetectFeature: function() { return /* reexport safe */ _graphic_GraphicDetectFeature__WEBPACK_IMPORTED_MODULE_3__["default"]; },
/* harmony export */   HeapCollector: function() { return /* reexport safe */ _HeapCollector__WEBPACK_IMPORTED_MODULE_27__["default"]; },
/* harmony export */   IsPrivateBrowsingFeature: function() { return /* reexport safe */ _incognito_IsPrivateBrowsingFeature__WEBPACK_IMPORTED_MODULE_6__["default"]; },
/* harmony export */   KeyboardLayoutFeature: function() { return /* reexport safe */ _KeyboardLayoutFeature__WEBPACK_IMPORTED_MODULE_22__["default"]; },
/* harmony export */   MediaDevicesFeature: function() { return /* reexport safe */ _MediaDevicesFeature__WEBPACK_IMPORTED_MODULE_4__["default"]; },
/* harmony export */   NavigatorFeature: function() { return /* reexport safe */ _NavigatorFeature__WEBPACK_IMPORTED_MODULE_12__["default"]; },
/* harmony export */   ScreenHighResFeature: function() { return /* reexport safe */ _ScreenHighResFeature__WEBPACK_IMPORTED_MODULE_26__["default"]; },
/* harmony export */   SpeechVoiceCollector: function() { return /* reexport safe */ _SpeechVoiceCollector__WEBPACK_IMPORTED_MODULE_17__["default"]; },
/* harmony export */   StorageFeature: function() { return /* reexport safe */ _StorageFeature__WEBPACK_IMPORTED_MODULE_21__["default"]; },
/* harmony export */   TimingCollector: function() { return /* reexport safe */ _timing_TimingCollector__WEBPACK_IMPORTED_MODULE_29__["default"]; },
/* harmony export */   UserPermissions: function() { return /* reexport safe */ _UserPermissions__WEBPACK_IMPORTED_MODULE_5__["default"]; },
/* harmony export */   WebRTCDataCollector: function() { return /* reexport safe */ _WebRTCDataCollector__WEBPACK_IMPORTED_MODULE_16__["default"]; },
/* harmony export */   WebglCollector: function() { return /* reexport safe */ _graphic_WebglCollector__WEBPACK_IMPORTED_MODULE_15__["default"]; }
/* harmony export */ });
/* harmony import */ var _BrowserDetect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BrowserDetect */ "./src/main/collectors/static/BrowserDetect.js");
/* harmony import */ var _BrowserPropsFeature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BrowserPropsFeature */ "./src/main/collectors/static/BrowserPropsFeature.js");
/* harmony import */ var _DoNotTrackFeature__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DoNotTrackFeature */ "./src/main/collectors/static/DoNotTrackFeature.js");
/* harmony import */ var _graphic_GraphicDetectFeature__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graphic/GraphicDetectFeature */ "./src/main/collectors/static/graphic/GraphicDetectFeature.js");
/* harmony import */ var _MediaDevicesFeature__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MediaDevicesFeature */ "./src/main/collectors/static/MediaDevicesFeature.js");
/* harmony import */ var _UserPermissions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./UserPermissions */ "./src/main/collectors/static/UserPermissions.js");
/* harmony import */ var _incognito_IsPrivateBrowsingFeature__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./incognito/IsPrivateBrowsingFeature */ "./src/main/collectors/static/incognito/IsPrivateBrowsingFeature.js");
/* harmony import */ var _font_collection_FontCollectionFeature__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./font/collection/FontCollectionFeature */ "./src/main/collectors/static/font/collection/FontCollectionFeature.js");
/* harmony import */ var _graphic_GfxRenderingFeature__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./graphic/GfxRenderingFeature */ "./src/main/collectors/static/graphic/GfxRenderingFeature.js");
/* harmony import */ var _AudioDetectFeature__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AudioDetectFeature */ "./src/main/collectors/static/AudioDetectFeature.js");
/* harmony import */ var _AudioDetectFeature2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AudioDetectFeature2 */ "./src/main/collectors/static/AudioDetectFeature2.js");
/* harmony import */ var _EncryptedMuidFeature__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./EncryptedMuidFeature */ "./src/main/collectors/static/EncryptedMuidFeature.js");
/* harmony import */ var _NavigatorFeature__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./NavigatorFeature */ "./src/main/collectors/static/NavigatorFeature.js");
/* harmony import */ var _ClientHintsCollector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ClientHintsCollector */ "./src/main/collectors/static/ClientHintsCollector.js");
/* harmony import */ var _adblock_AdblockerListsCollector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./adblock/AdblockerListsCollector */ "./src/main/collectors/static/adblock/AdblockerListsCollector.js");
/* harmony import */ var _graphic_WebglCollector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./graphic/WebglCollector */ "./src/main/collectors/static/graphic/WebglCollector.js");
/* harmony import */ var _WebRTCDataCollector__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./WebRTCDataCollector */ "./src/main/collectors/static/WebRTCDataCollector.js");
/* harmony import */ var _SpeechVoiceCollector__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./SpeechVoiceCollector */ "./src/main/collectors/static/SpeechVoiceCollector.js");
/* harmony import */ var _extensions_dom_BrowserExtensionsDomCollector__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./extensions/dom/BrowserExtensionsDomCollector */ "./src/main/collectors/static/extensions/dom/BrowserExtensionsDomCollector.js");
/* harmony import */ var _extensions_url_BrowserExtensionsUrlCollector__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./extensions/url/BrowserExtensionsUrlCollector */ "./src/main/collectors/static/extensions/url/BrowserExtensionsUrlCollector.js");
/* harmony import */ var _DRMDataCollector__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./DRMDataCollector */ "./src/main/collectors/static/DRMDataCollector.js");
/* harmony import */ var _StorageFeature__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./StorageFeature */ "./src/main/collectors/static/StorageFeature.js");
/* harmony import */ var _KeyboardLayoutFeature__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./KeyboardLayoutFeature */ "./src/main/collectors/static/KeyboardLayoutFeature.js");
/* harmony import */ var _font_emoji_FontEmojiFeature__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./font/emoji/FontEmojiFeature */ "./src/main/collectors/static/font/emoji/FontEmojiFeature.js");
/* harmony import */ var _font_fontmath_FontMathFeature__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./font/fontmath/FontMathFeature */ "./src/main/collectors/static/font/fontmath/FontMathFeature.js");
/* harmony import */ var _font_size_prefences_FontWidthFeature__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./font/size-prefences/FontWidthFeature */ "./src/main/collectors/static/font/size-prefences/FontWidthFeature.js");
/* harmony import */ var _ScreenHighResFeature__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ScreenHighResFeature */ "./src/main/collectors/static/ScreenHighResFeature.js");
/* harmony import */ var _HeapCollector__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./HeapCollector */ "./src/main/collectors/static/HeapCollector.js");
/* harmony import */ var _cpu_CPUCollector__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./cpu/CPUCollector */ "./src/main/collectors/static/cpu/CPUCollector.js");
/* harmony import */ var _timing_TimingCollector__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./timing/TimingCollector */ "./src/main/collectors/static/timing/TimingCollector.js");
/* harmony import */ var _AgenticBrowserDetectFeature__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./AgenticBrowserDetectFeature */ "./src/main/collectors/static/AgenticBrowserDetectFeature.js");
































/***/ }),

/***/ "./src/main/collectors/static/timing/TimingCache.js":
/*!**********************************************************!*\
  !*** ./src/main/collectors/static/timing/TimingCache.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ TimingCache; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var TimingCache = /*#__PURE__*/function () {
  /**
   * Constructor for TimingCache
   * @param {Object} storageUtils - Utility for handling storage operations.
   */
  function TimingCache(storageUtils) {
    _classCallCheck(this, TimingCache);
    this._storageUtils = storageUtils;
    this._cacheKey = 'timingData';
    this._cacheExpiration = 7 * 24 * 60 * 60 * 1000; // 1 week in milliseconds
  }

  /**
   * Saves timing data to local storage
   * @param {Object} timingData - The timing data to save
   */
  return _createClass(TimingCache, [{
    key: "saveTimingData",
    value: (function () {
      var _saveTimingData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(timingData) {
        var dataToSave;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              dataToSave = _objectSpread(_objectSpread({}, timingData), {}, {
                cachedAt: Date.now()
              });
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[TIMING-COLLECTOR] Saving timing data to localStorage under key: ".concat(this._cacheKey));
              _context.next = 4;
              return this._storageUtils.saveToLocalStorage(this._cacheKey, dataToSave);
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function saveTimingData(_x) {
        return _saveTimingData.apply(this, arguments);
      }
      return saveTimingData;
    }()
    /**
     * Retrieves stored timing data from local storage
     * @returns {Object|null} - The stored timing data or null if none exist or expired
     */
    )
  }, {
    key: "getStoredTimingData",
    value: function getStoredTimingData() {
      var storedData = this._storageUtils.getFromLocalStorage(this._cacheKey);
      if (!storedData) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[TIMING-COLLECTOR] No cached timing data found");
        return null;
      }

      // Check if cache is expired
      var isExpired = Date.now() - storedData.cachedAt > this._cacheExpiration;
      if (isExpired) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[TIMING-COLLECTOR] Cached timing data is expired");
        return null;
      }

      // Log.debug(`[TIMING-COLLECTOR] Retrieved timing data from localStorage: ${JSON.stringify(storedData)}`);
      return storedData;
    }

    /**
     * Clears the cached timing data
     */
  }, {
    key: "clearCache",
    value: function clearCache() {
      this._storageUtils.removeFromLocalStorage(this._cacheKey);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("[TIMING-COLLECTOR] Cleared timing data cache");
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectors/static/timing/TimingCollector.js":
/*!**************************************************************!*\
  !*** ./src/main/collectors/static/timing/TimingCollector.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _service_WebGLTimingService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./service/WebGLTimingService */ "./src/main/collectors/static/timing/service/WebGLTimingService.js");
/* harmony import */ var _service_BrowserTimingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./service/BrowserTimingService */ "./src/main/collectors/static/timing/service/BrowserTimingService.js");
/* harmony import */ var _service_CPUTimingService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./service/CPUTimingService */ "./src/main/collectors/static/timing/service/CPUTimingService.js");
/* harmony import */ var _service_FontTimingService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./service/FontTimingService */ "./src/main/collectors/static/timing/service/FontTimingService.js");
/* harmony import */ var _service_AnimationTimingService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./service/AnimationTimingService */ "./src/main/collectors/static/timing/service/AnimationTimingService.js");
/* harmony import */ var _TimingCache__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TimingCache */ "./src/main/collectors/static/timing/TimingCache.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _service_MemoryTimingService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./service/MemoryTimingService */ "./src/main/collectors/static/timing/service/MemoryTimingService.js");
/* harmony import */ var _service_StorageTimingService__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./service/StorageTimingService */ "./src/main/collectors/static/timing/service/StorageTimingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }











var featureSettings = {
  configKey: 'isTimingFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var TimingCollector = /*#__PURE__*/function (_DataCollector) {
  function TimingCollector(dataQ, fontTimingService) {
    var _this;
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    _classCallCheck(this, TimingCollector);
    _this = _callSuper(this, TimingCollector);
    _this._dataQ = dataQ;
    _this._fontTimingService = fontTimingService;

    // Inject services or create defaults
    _this._webglService = options.webglService || new _service_WebGLTimingService__WEBPACK_IMPORTED_MODULE_2__["default"]();
    _this._browserService = options.browserService || new _service_BrowserTimingService__WEBPACK_IMPORTED_MODULE_3__["default"]();
    _this._CPUTimingService = options.cpuTimingService || new _service_CPUTimingService__WEBPACK_IMPORTED_MODULE_4__["default"]();
    _this._animationTimingService = options.animationTimingService || new _service_AnimationTimingService__WEBPACK_IMPORTED_MODULE_6__["default"]();
    _this._memoryBandwidthService = options.memoryTimingService || new _service_MemoryTimingService__WEBPACK_IMPORTED_MODULE_9__["default"]();
    _this._storageTimingService = options.storageTimingService || new _service_StorageTimingService__WEBPACK_IMPORTED_MODULE_10__["default"]();

    // Inject storage utils or use default
    var storageUtils = options.storageUtils || _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_8__["default"].StorageUtils;
    _this._timingCache = options.timingCache || new _TimingCache__WEBPACK_IMPORTED_MODULE_7__["default"](storageUtils);

    // Inject logger or use default
    _this._logger = options.logger || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"];
    return _this;
  }
  _inherits(TimingCollector, _DataCollector);
  return _createClass(TimingCollector, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var cachedTimingData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this._logger.info('[TimingCollector] Starting timing data collection');

              // Check for cached timing data first
              cachedTimingData = this._timingCache.getStoredTimingData();
              if (!cachedTimingData) {
                _context.next = 6;
                break;
              }
              this._logger.info('[TimingCollector] Using cached timing data');
              this.sendData(cachedTimingData);
              return _context.abrupt("return");
            case 6:
              // Set up callback for when new font timing data is available
              this._fontTimingService.setOnNewRecordAvailableCallback(function () {
                _this2.collectFontTiming();
              });

              // Collect and send each timing data type independently
              this.collectWebGLTiming();
              this.collectBrowserTiming();
              this.collectCPUBenchmark();
              this.collectAnimationFrameTiming();
              this.collectMemoryBandwidthTiming();
              this.collectStorageTiming();
              // Don't collect font timing immediately - wait for callback
              // this.collectFontTiming();
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Collects and sends WebGL timing data independently
     */
  }, {
    key: "collectWebGLTiming",
    value: (function () {
      var _collectWebGLTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var webglTiming;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return this._webglService.collectWebGLTiming();
            case 3:
              webglTiming = _context2.sent;
              this._logger.debug('[TimingCollector] WebGL Timing Data collected: ' + JSON.stringify(webglTiming));
              this.sendData({
                graphicTiming: webglTiming
              });
              this._updateCache({
                graphicTiming: webglTiming
              });
              _context2.next = 12;
              break;
            case 9:
              _context2.prev = 9;
              _context2.t0 = _context2["catch"](0);
              this._logger.error('[TimingCollector] Error during WebGL timing collection:', _context2.t0);
            case 12:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 9]]);
      }));
      function collectWebGLTiming() {
        return _collectWebGLTiming.apply(this, arguments);
      }
      return collectWebGLTiming;
    }()
    /**
     * Collects and sends browser timing data independently
     */
    )
  }, {
    key: "collectBrowserTiming",
    value: (function () {
      var _collectBrowserTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var browserTiming;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              try {
                browserTiming = this._browserService.collectBrowserTiming();
                this._logger.debug('[TimingCollector] Browser Timing Data collected: ' + JSON.stringify(browserTiming));
                this.sendData({
                  browserTiming: browserTiming
                });
                this._updateCache({
                  browserTiming: browserTiming
                });
              } catch (error) {
                this._logger.error('[TimingCollector] Error during browser timing collection:', error);
              }
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function collectBrowserTiming() {
        return _collectBrowserTiming.apply(this, arguments);
      }
      return collectBrowserTiming;
    }()
    /**
     * Collects and sends CPU benchmark data independently
     */
    )
  }, {
    key: "collectCPUBenchmark",
    value: (function () {
      var _collectCPUBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var cpuBenchmark;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _context4.next = 3;
              return this._CPUTimingService.runBenchmarks();
            case 3:
              cpuBenchmark = _context4.sent;
              this._logger.debug('[TimingCollector] CPU Benchmark Data collected: ' + JSON.stringify(cpuBenchmark));
              this.sendData({
                cpuTiming: cpuBenchmark
              });
              this._updateCache({
                cpuTiming: cpuBenchmark
              });
              _context4.next = 12;
              break;
            case 9:
              _context4.prev = 9;
              _context4.t0 = _context4["catch"](0);
              this._logger.error('[TimingCollector] Error during CPU benchmark collection:', _context4.t0);
            case 12:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[0, 9]]);
      }));
      function collectCPUBenchmark() {
        return _collectCPUBenchmark.apply(this, arguments);
      }
      return collectCPUBenchmark;
    }()
    /**
     * Collects and sends FPS data independently
     */
    )
  }, {
    key: "collectAnimationFrameTiming",
    value: (function () {
      var _collectAnimationFrameTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var fps, fpsData;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              _context5.next = 3;
              return this._animationTimingService.getFPS();
            case 3:
              fps = _context5.sent;
              fpsData = {
                fps: fps
              };
              this._logger.debug('[TimingCollector] FPS Data collected: ' + JSON.stringify(fpsData));
              this.sendData({
                animationFrameTiming: fpsData
              });
              this._updateCache({
                animationFrameTiming: fpsData
              });
              _context5.next = 13;
              break;
            case 10:
              _context5.prev = 10;
              _context5.t0 = _context5["catch"](0);
              this._logger.error('[TimingCollector] Error during FPS collection:', _context5.t0);
            case 13:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 10]]);
      }));
      function collectAnimationFrameTiming() {
        return _collectAnimationFrameTiming.apply(this, arguments);
      }
      return collectAnimationFrameTiming;
    }()
    /**
     * Collects and sends memory bandwidth timing data independently
     */
    )
  }, {
    key: "collectMemoryBandwidthTiming",
    value: (function () {
      var _collectMemoryBandwidthTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var memoryTiming;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              _context6.next = 3;
              return this._memoryBandwidthService.measureMemoryBandwidth();
            case 3:
              memoryTiming = _context6.sent;
              this._logger.debug('[TimingCollector] Memory Bandwidth Timing Data collected: ' + JSON.stringify(memoryTiming));
              this.sendData({
                memoryBandwidthTiming: memoryTiming
              });
              this._updateCache({
                memoryBandwidthTiming: memoryTiming
              });
              _context6.next = 12;
              break;
            case 9:
              _context6.prev = 9;
              _context6.t0 = _context6["catch"](0);
              this._logger.error('[TimingCollector] Error during memory bandwidth timing collection:', _context6.t0);
            case 12:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[0, 9]]);
      }));
      function collectMemoryBandwidthTiming() {
        return _collectMemoryBandwidthTiming.apply(this, arguments);
      }
      return collectMemoryBandwidthTiming;
    }()
    /**
     * Collects and sends storage timing data independently
     */
    )
  }, {
    key: "collectStorageTiming",
    value: (function () {
      var _collectStorageTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var storageTiming;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              _context7.next = 3;
              return this._storageTimingService.measureAll();
            case 3:
              storageTiming = _context7.sent;
              this._logger.debug('[TimingCollector] Storage Timing Data collected: ' + JSON.stringify(storageTiming));
              this.sendData({
                storageTiming: storageTiming
              });
              this._updateCache({
                storageTiming: storageTiming
              });
              _context7.next = 12;
              break;
            case 9:
              _context7.prev = 9;
              _context7.t0 = _context7["catch"](0);
              this._logger.error('[TimingCollector] Error during storage timing collection:', _context7.t0);
            case 12:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this, [[0, 9]]);
      }));
      function collectStorageTiming() {
        return _collectStorageTiming.apply(this, arguments);
      }
      return collectStorageTiming;
    }()
    /**
     * Collects and sends font timing data independently
     */
    )
  }, {
    key: "collectFontTiming",
    value: (function () {
      var _collectFontTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {
        var fontTiming;
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              try {
                fontTiming = this._fontTimingService.collectFontTiming();
                this._logger.debug('[TimingCollector] Font Timing Data collected: ' + JSON.stringify(fontTiming));
                this.sendData({
                  fontTiming: fontTiming
                });
                this._updateCache({
                  fontTiming: fontTiming
                });
              } catch (error) {
                this._logger.error('[TimingCollector] Error during font timing collection:', error);
              }
            case 1:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function collectFontTiming() {
        return _collectFontTiming.apply(this, arguments);
      }
      return collectFontTiming;
    }()
    /**
     * Updates the cache with new timing data
     * @param {Object} newData - New timing data to add to cache
     */
    )
  }, {
    key: "_updateCache",
    value: (function () {
      var _updateCache2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(newData) {
        var existingData, updatedData;
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              existingData = this._timingCache.getStoredTimingData() || {};
              updatedData = _objectSpread(_objectSpread({}, existingData), newData);
              _context9.next = 5;
              return this._timingCache.saveTimingData(updatedData);
            case 5:
              _context9.next = 10;
              break;
            case 7:
              _context9.prev = 7;
              _context9.t0 = _context9["catch"](0);
              this._logger.error('[TimingCollector] Error updating cache:', _context9.t0);
            case 10:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this, [[0, 7]]);
      }));
      function _updateCache(_x) {
        return _updateCache2.apply(this, arguments);
      }
      return _updateCache;
    }()
    /**
     * Stops the timing collector and cleans up resources
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._logger.info('[TimingCollector] Stopped timing data collection');
    }
  }, {
    key: "sendData",
    value: function sendData(timingData) {
      this._dataQ.addToQueue('static_fields', ['timing', timingData], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (TimingCollector);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/AnimationTimingService.js":
/*!*****************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/AnimationTimingService.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Animation Timing Service for collecting FPS information
 */
var AnimationTimingService = /*#__PURE__*/function () {
  function AnimationTimingService() {
    _classCallCheck(this, AnimationTimingService);
  }

  /**
   * Gets the current FPS (frames per second)
   * @returns {Promise<number>} Current FPS value
   */
  return _createClass(AnimationTimingService, [{
    key: "getFPS",
    value: (function () {
      var _getFPS = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var lastFrameTime, frameCount, fps;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              lastFrameTime = performance.now();
              frameCount = 0;
              fps = 0;
              return _context.abrupt("return", new Promise(function (resolve) {
                function updateFPS(now) {
                  frameCount++;
                  var delta = now - lastFrameTime;
                  if (delta >= 1000) {
                    fps = frameCount / delta * 1000;
                    _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("AnimationTimingService - FPS calculated: ".concat(fps.toFixed(4)));
                    resolve(Math.round(fps * 10000) / 10000); // Return with 4 decimal places
                    return; // Stop measuring
                  }
                  requestAnimationFrame(updateFPS);
                }
                requestAnimationFrame(updateFPS);
              }));
            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('AnimationTimingService - Error collecting FPS:', _context.t0);
              return _context.abrupt("return", 0);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 7]]);
      }));
      function getFPS() {
        return _getFPS.apply(this, arguments);
      }
      return getFPS;
    }())
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (AnimationTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/BrowserTimingService.js":
/*!***************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/BrowserTimingService.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Browser Timing Service for collecting comprehensive runtime timing information
 * Enhanced for device spoofing detection and outlier identification
 */
var BrowserTimingService = /*#__PURE__*/function () {
  function BrowserTimingService(performance, log) {
    _classCallCheck(this, BrowserTimingService);
    this._performance = performance || window.performance;
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
  }

  /**
   * Collects comprehensive runtime computed timing information
   * @returns {Object} Enhanced browser timing data
   */
  return _createClass(BrowserTimingService, [{
    key: "collectBrowserTiming",
    value: function collectBrowserTiming() {
      try {
        var navigationTiming = this.collectNavigationTiming();
        var resourceTiming = this.collectResourceTiming();
        var paintTiming = this.collectPaintTiming();
        var performanceTiming = this.collectPerformanceTiming();
        var browserCapabilities = this.collectBrowserCapabilities();
        return {
          domContentLoadedTime: navigationTiming.domContentLoadedTime,
          loadCompleteTime: navigationTiming.loadCompleteTime,
          firstPaintTime: paintTiming.firstPaintTime,
          firstContentfulPaintTime: paintTiming.firstContentfulPaintTime,
          averageResourceLoadTime: resourceTiming.averageLoadTime,
          resourceCount: resourceTiming.count,
          timeOrigin: performanceTiming.timeOrigin,
          performanceNow: performanceTiming.now,
          navigationStart: performanceTiming.navigationStart,
          browserProcessingTime: browserCapabilities.processingTime,
          memoryUsage: browserCapabilities.memoryUsage
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting browser timing:', error);
        return this.getFallbackResult();
      }
    }

    /**
     * Collects navigation timing data
     * @returns {Object} Navigation timing metrics
     */
  }, {
    key: "collectNavigationTiming",
    value: function collectNavigationTiming() {
      try {
        var domContentLoadedTime = 0;
        var loadCompleteTime = 0;

        // Navigation timing using modern PerformanceNavigationTiming API
        if (this._performance.getEntriesByType) {
          var navigationEntries = this._performance.getEntriesByType('navigation');
          if (navigationEntries.length > 0) {
            var navigationEntry = navigationEntries[0];
            domContentLoadedTime = navigationEntry.domContentLoadedEventEnd - navigationEntry.startTime;
            loadCompleteTime = navigationEntry.loadEventEnd - navigationEntry.startTime;
          }
        } else {
          // Fallback to legacy API if modern API is not available
          if (this._performance.timing) {
            var timing = this._performance.timing;
            domContentLoadedTime = timing.domContentLoadedEventEnd - timing.navigationStart;
            loadCompleteTime = timing.loadEventEnd - timing.navigationStart;
          }
        }
        return {
          domContentLoadedTime: domContentLoadedTime || 0,
          loadCompleteTime: loadCompleteTime || 0
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting navigation timing:', error);
        return {
          domContentLoadedTime: 0,
          loadCompleteTime: 0
        };
      }
    }

    /**
     * Collects resource timing data
     * @returns {Object} Resource timing metrics
     */
  }, {
    key: "collectResourceTiming",
    value: function collectResourceTiming() {
      try {
        var averageLoadTime = 0;
        var count = 0;
        if (this._performance.getEntriesByType) {
          var resourceEntries = this._performance.getEntriesByType('resource');
          if (resourceEntries.length > 0) {
            var totalDuration = resourceEntries.reduce(function (sum, entry) {
              return sum + entry.duration;
            }, 0);
            averageLoadTime = totalDuration / resourceEntries.length;
            count = resourceEntries.length;
          }
        }
        return {
          averageLoadTime: averageLoadTime || 0,
          count: count || 0
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting resource timing:', error);
        return {
          averageLoadTime: 0,
          count: 0
        };
      }
    }

    /**
     * Collects paint timing data
     * @returns {Object} Paint timing metrics
     */
  }, {
    key: "collectPaintTiming",
    value: function collectPaintTiming() {
      try {
        var firstPaintTime = 0;
        var firstContentfulPaintTime = 0;
        if (this._performance.getEntriesByType) {
          var paintEntries = this._performance.getEntriesByType('paint');
          if (paintEntries.length > 0) {
            var firstPaint = paintEntries.find(function (entry) {
              return entry.name === 'first-paint';
            });
            var firstContentfulPaint = paintEntries.find(function (entry) {
              return entry.name === 'first-contentful-paint';
            });
            if (firstPaint) {
              firstPaintTime = firstPaint.startTime;
            }
            if (firstContentfulPaint) {
              firstContentfulPaintTime = firstContentfulPaint.startTime;
            }
          }
        }
        return {
          firstPaintTime: firstPaintTime || 0,
          firstContentfulPaintTime: firstContentfulPaintTime || 0
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting paint timing:', error);
        return {
          firstPaintTime: 0,
          firstContentfulPaintTime: 0
        };
      }
    }

    /**
     * Collects performance timing data
     * @returns {Object} Performance timing metrics
     */
  }, {
    key: "collectPerformanceTiming",
    value: function collectPerformanceTiming() {
      try {
        var timeOrigin = this._performance.timeOrigin || 0;
        var now = this._performance.now();
        var navigationStart = this._performance.timing ? this._performance.timing.navigationStart : 0;
        return {
          timeOrigin: timeOrigin,
          now: now,
          navigationStart: navigationStart
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting performance timing:', error);
        return {
          timeOrigin: 0,
          now: 0,
          navigationStart: 0
        };
      }
    }

    /**
     * Collects browser capabilities and processing time
     * @returns {Object} Browser capabilities metrics
     */
  }, {
    key: "collectBrowserCapabilities",
    value: function collectBrowserCapabilities() {
      try {
        // Measure browser processing time
        var startTime = this._performance.now();
        var result = 0;

        // Simple processing test
        for (var i = 0; i < 100000; i++) {
          result += Math.sqrt(i);
        }
        var processingTime = this._performance.now() - startTime;

        // Get memory usage if available
        var memoryUsage = 0;
        if (this._performance.memory) {
          memoryUsage = this._performance.memory.usedJSHeapSize / 1024 / 1024; // Convert to MB
        }
        return {
          processingTime: processingTime,
          memoryUsage: memoryUsage
        };
      } catch (error) {
        this._log.debug('BrowserTimingService - Error collecting browser capabilities:', error);
        return {
          processingTime: 0,
          memoryUsage: 0
        };
      }
    }

    /**
     * Returns fallback result when collection fails
     * @returns {Object} Fallback browser timing data
     */
  }, {
    key: "getFallbackResult",
    value: function getFallbackResult() {
      return {
        domContentLoadedTime: 0,
        loadCompleteTime: 0,
        firstPaintTime: 0,
        firstContentfulPaintTime: 0,
        averageResourceLoadTime: 0,
        resourceCount: 0,
        timeOrigin: 0,
        performanceNow: 0,
        navigationStart: 0,
        browserProcessingTime: 0,
        memoryUsage: 0
      };
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (BrowserTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/CPUTimingService.js":
/*!***********************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/CPUTimingService.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var CPUTimingService = /*#__PURE__*/function () {
  function CPUTimingService() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      performance = _ref.performance,
      log = _ref.log,
      worker = _ref.worker,
      blob = _ref.blob,
      url = _ref.url;
    _classCallCheck(this, CPUTimingService);
    this._performance = performance || window.performance || Date;
    if (!this._performance.now) {
      this._performance.now = this._performance.webkitNow ? this._performance.webkitNow : function () {
        return +new Date();
      };
    }
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
    this._Worker = worker || window.Worker;
    this._Blob = blob || window.Blob;
    this._URL = url || window.URL;
  }

  /**
   * Runs comprehensive CPU performance benchmarks
   * @returns {Promise<Object>} Simplified performance metrics
   */
  return _createClass(CPUTimingService, [{
    key: "runBenchmarks",
    value: (function () {
      var _runBenchmarks = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _yield$Promise$all, _yield$Promise$all2, basic, integer, _float, memory, crypto;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return Promise.all([this.basicBenchmark(), this.integerBenchmark(), this.floatBenchmark(), this.memoryBenchmark(), this.cryptoBenchmark()]);
            case 3:
              _yield$Promise$all = _context.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 5);
              basic = _yield$Promise$all2[0];
              integer = _yield$Promise$all2[1];
              _float = _yield$Promise$all2[2];
              memory = _yield$Promise$all2[3];
              crypto = _yield$Promise$all2[4];
              return _context.abrupt("return", {
                basicOpsPerMs: basic.opsPerMs,
                integerOpsPerMs: integer.opsPerMs,
                floatOpsPerMs: _float.opsPerMs,
                memoryOpsPerMs: memory.opsPerMs,
                cryptoOpsPerMs: crypto.opsPerMs
              });
            case 13:
              _context.prev = 13;
              _context.t0 = _context["catch"](0);
              this._log.debug('CPUTimingService - Error running benchmarks:', _context.t0);
              return _context.abrupt("return", this.getFallbackResult());
            case 17:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 13]]);
      }));
      function runBenchmarks() {
        return _runBenchmarks.apply(this, arguments);
      }
      return runBenchmarks;
    }()
    /**
     * Basic CPU benchmark using Web Worker
     * @returns {Promise<Object>} Basic performance metrics
     */
    )
  }, {
    key: "basicBenchmark",
    value: (function () {
      var _basicBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var workerCode;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              workerCode = "\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            for (let i = 0; i < 5000000; i++) {\n              result += Math.sqrt(i);\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 5000000,\n              opsPerMs: Number((5000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ";
              _context2.next = 4;
              return this.runWorkerBenchmark(workerCode);
            case 4:
              return _context2.abrupt("return", _context2.sent);
            case 7:
              _context2.prev = 7;
              _context2.t0 = _context2["catch"](0);
              this._log.debug('CPUTimingService - Error in basic benchmark:', _context2.t0);
              return _context2.abrupt("return", {
                executionTime: 0,
                operations: 0,
                opsPerMs: 0
              });
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 7]]);
      }));
      function basicBenchmark() {
        return _basicBenchmark.apply(this, arguments);
      }
      return basicBenchmark;
    }()
    /**
     * Integer arithmetic benchmark
     * @returns {Promise<Object>} Integer performance metrics
     */
    )
  }, {
    key: "integerBenchmark",
    value: (function () {
      var _integerBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var workerCode;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              workerCode = "\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            for (let i = 0; i < 10000000; i++) {\n              result = (result + i) * 31 | 0;\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 10000000,\n              opsPerMs: Number((10000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ";
              _context3.next = 4;
              return this.runWorkerBenchmark(workerCode);
            case 4:
              return _context3.abrupt("return", _context3.sent);
            case 7:
              _context3.prev = 7;
              _context3.t0 = _context3["catch"](0);
              this._log.debug('CPUTimingService - Error in integer benchmark:', _context3.t0);
              return _context3.abrupt("return", {
                executionTime: 0,
                operations: 0,
                opsPerMs: 0
              });
            case 11:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 7]]);
      }));
      function integerBenchmark() {
        return _integerBenchmark.apply(this, arguments);
      }
      return integerBenchmark;
    }()
    /**
     * Floating-point arithmetic benchmark
     * @returns {Promise<Object>} Float performance metrics
     */
    )
  }, {
    key: "floatBenchmark",
    value: (function () {
      var _floatBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var workerCode;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              workerCode = "\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0.1;\n            for (let i = 0; i < 5000000; i++) {\n              result += Math.sin(result) + Math.cos(i);\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 5000000,\n              opsPerMs: Number((5000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ";
              _context4.next = 4;
              return this.runWorkerBenchmark(workerCode);
            case 4:
              return _context4.abrupt("return", _context4.sent);
            case 7:
              _context4.prev = 7;
              _context4.t0 = _context4["catch"](0);
              this._log.debug('CPUTimingService - Error in float benchmark:', _context4.t0);
              return _context4.abrupt("return", {
                executionTime: 0,
                operations: 0,
                opsPerMs: 0
              });
            case 11:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[0, 7]]);
      }));
      function floatBenchmark() {
        return _floatBenchmark.apply(this, arguments);
      }
      return floatBenchmark;
    }()
    /**
     * Memory access benchmark
     * @returns {Promise<Object>} Memory performance metrics
     */
    )
  }, {
    key: "memoryBenchmark",
    value: (function () {
      var _memoryBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var workerCode;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              workerCode = "\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            const arr = new Uint32Array(1000000);\n            \n            // Sequential write\n            for (let i = 0; i < arr.length; i++) {\n              arr[i] = i;\n            }\n            \n            // Sequential read\n            let sum = 0;\n            for (let i = 0; i < arr.length; i++) {\n              sum += arr[i];\n            }\n            \n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: arr.length * 2, // write + read\n              opsPerMs: Number(((arr.length * 2) / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ";
              _context5.next = 4;
              return this.runWorkerBenchmark(workerCode);
            case 4:
              return _context5.abrupt("return", _context5.sent);
            case 7:
              _context5.prev = 7;
              _context5.t0 = _context5["catch"](0);
              this._log.debug('CPUTimingService - Error in memory benchmark:', _context5.t0);
              return _context5.abrupt("return", {
                executionTime: 0,
                operations: 0,
                opsPerMs: 0
              });
            case 11:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 7]]);
      }));
      function memoryBenchmark() {
        return _memoryBenchmark.apply(this, arguments);
      }
      return memoryBenchmark;
    }()
    /**
     * Cryptographic operations benchmark
     * @returns {Promise<Object>} Crypto performance metrics
     */
    )
  }, {
    key: "cryptoBenchmark",
    value: (function () {
      var _cryptoBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var workerCode;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              workerCode = "\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            \n            // Simple hash-like operations\n            for (let i = 0; i < 1000000; i++) {\n              let hash = i;\n              hash = ((hash << 5) - hash) + i;\n              hash = hash & hash; // Convert to 32-bit integer\n              result += hash;\n            }\n            \n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 1000000,\n              opsPerMs: Number((1000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ";
              _context6.next = 4;
              return this.runWorkerBenchmark(workerCode);
            case 4:
              return _context6.abrupt("return", _context6.sent);
            case 7:
              _context6.prev = 7;
              _context6.t0 = _context6["catch"](0);
              this._log.debug('CPUTimingService - Error in crypto benchmark:', _context6.t0);
              return _context6.abrupt("return", {
                executionTime: 0,
                operations: 0,
                opsPerMs: 0
              });
            case 11:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[0, 7]]);
      }));
      function cryptoBenchmark() {
        return _cryptoBenchmark.apply(this, arguments);
      }
      return cryptoBenchmark;
    }()
    /**
     * Runs a benchmark in a Web Worker
     * @param {string} workerCode - The worker code to execute
     * @returns {Promise<Object>} Benchmark results
     */
    )
  }, {
    key: "runWorkerBenchmark",
    value: (function () {
      var _runWorkerBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(workerCode) {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              return _context7.abrupt("return", new Promise(function (resolve) {
                try {
                  var blob = new _this._Blob([workerCode], {
                    type: 'application/javascript'
                  });
                  var workerUrl = _this._URL.createObjectURL(blob);
                  var worker = new _this._Worker(workerUrl);
                  worker.onmessage = function (e) {
                    worker.terminate();
                    _this._URL.revokeObjectURL(workerUrl);
                    if (e.data.success) {
                      resolve({
                        executionTime: e.data.executionTime,
                        opsPerMs: e.data.opsPerMs
                      });
                    } else {
                      _this._log.debug('CPUTimingService - Worker benchmark failed:', e.data.error);
                      resolve({
                        executionTime: 0,
                        operations: 0,
                        opsPerMs: 0
                      });
                    }
                  };
                  worker.onerror = function (error) {
                    worker.terminate();
                    _this._URL.revokeObjectURL(workerUrl);
                    _this._log.debug('CPUTimingService - Worker error:', error);
                    resolve({
                      executionTime: 0,
                      operations: 0,
                      opsPerMs: 0
                    });
                  };
                  worker.postMessage('start');
                } catch (error) {
                  _this._log.debug('CPUTimingService - Error creating worker:', error);
                  resolve({
                    executionTime: 0,
                    operations: 0,
                    opsPerMs: 0
                  });
                }
              }));
            case 1:
            case "end":
              return _context7.stop();
          }
        }, _callee7);
      }));
      function runWorkerBenchmark(_x) {
        return _runWorkerBenchmark.apply(this, arguments);
      }
      return runWorkerBenchmark;
    }()
    /**
     * Returns fallback result when benchmarks fail
     * @returns {Object} Fallback performance data
     */
    )
  }, {
    key: "getFallbackResult",
    value: function getFallbackResult() {
      return {
        basicOpsPerMs: 0,
        integerOpsPerMs: 0,
        floatOpsPerMs: 0,
        memoryOpsPerMs: 0,
        cryptoOpsPerMs: 0
      };
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (CPUTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/FontTimingService.js":
/*!************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/FontTimingService.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var FontTimingService = /*#__PURE__*/function () {
  function FontTimingService() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      log = _ref.log,
      date = _ref.date;
    _classCallCheck(this, FontTimingService);
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
    this._Date = date || Date;
    this._fontScanTimes = new Map();
    this._onNewRecordAvailableCallback = null;
  }

  /**
   * Sets a callback to be called when new font timing data is available
   * @param {Function} callback - Callback function to call when new data is available
   */
  return _createClass(FontTimingService, [{
    key: "setOnNewRecordAvailableCallback",
    value: function setOnNewRecordAvailableCallback(callback) {
      this._onNewRecordAvailableCallback = callback;
    }

    /**
     * Records font scan timing data directly
     * @param {Object} scanData - Font scan timing data
     * @param {number} scanData.scanTime - Time taken to scan fonts in milliseconds
     * @param {number} scanData.totalFontsScanned - Total number of fonts scanned
     * @param {number} scanData.totalFontsFound - Total number of fonts found
     * @param {string} scanData.fontVersion - Version of fonts scanned
     * @param {number} scanData.scannedAt - Timestamp when scan completed
     */
  }, {
    key: "recordFontScan",
    value: function recordFontScan(scanData) {
      try {
        var scanTime = scanData.scanTime,
          totalFontsScanned = scanData.totalFontsScanned,
          totalFontsFound = scanData.totalFontsFound,
          fontVersion = scanData.fontVersion,
          scannedAt = scanData.scannedAt;
        this._fontScanTimes.set(fontVersion || 'default', {
          scanTime: scanTime,
          totalFontsScanned: totalFontsScanned,
          totalFontsFound: totalFontsFound,
          scannedAt: scannedAt || this._Date.now()
        });
        this._log.debug("FontTimingService - Font scan recorded for ".concat(fontVersion, ": ").concat(scanTime, "ms, ").concat(totalFontsFound, "/").concat(totalFontsScanned, " fonts found"));

        // Trigger callback if provided
        if (this._onNewRecordAvailableCallback) {
          this._onNewRecordAvailableCallback();
        }
      } catch (error) {
        this._log.error('FontTimingService - Error recording font scan:', error);
      }
    }

    /**
     * Collects all accumulated font timing data
     * @returns {Object} Font timing data
     */
  }, {
    key: "collectFontTiming",
    value: function collectFontTiming() {
      var fontTimingData = {};
      var _iterator = _createForOfIteratorHelper(this._fontScanTimes),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _step$value = _slicedToArray(_step.value, 2),
            version = _step$value[0],
            timing = _step$value[1];
          fontTimingData[version] = timing;
        }

        // Clear the collected data after returning it
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      this._fontScanTimes.clear();
      return fontTimingData;
    }

    /**
     * Checks if any font timing data is available
     * @returns {boolean} True if font timing data exists
     */
  }, {
    key: "hasFontTimingData",
    value: function hasFontTimingData() {
      return this._fontScanTimes.size > 0;
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (FontTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/MemoryTimingService.js":
/*!**************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/MemoryTimingService.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Memory Bandwidth Timing Service for measuring memory access patterns
 * High device variation - different between mobile RAM (LPDDR4/5) vs desktop RAM (DDR4/5)
 */
var MemoryTimingService = /*#__PURE__*/function () {
  function MemoryTimingService() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      performance = _ref.performance,
      log = _ref.log;
    _classCallCheck(this, MemoryTimingService);
    this._performance = performance || window.performance;
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
  }

  /**
   * Measures memory bandwidth and access patterns
   * @returns {Promise<Object>} Memory bandwidth timing data
   */
  return _createClass(MemoryTimingService, [{
    key: "measureMemoryBandwidth",
    value: (function () {
      var _measureMemoryBandwidth = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var sequentialReadBandwidth, sequentialWriteBandwidth, randomAccessRate, cacheThroughput, memoryLatency;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this.measureSequentialReadBandwidth();
            case 3:
              sequentialReadBandwidth = _context.sent;
              _context.next = 6;
              return this.measureSequentialWriteBandwidth();
            case 6:
              sequentialWriteBandwidth = _context.sent;
              _context.next = 9;
              return this.measureRandomAccessRate();
            case 9:
              randomAccessRate = _context.sent;
              _context.next = 12;
              return this.measureCacheThroughput();
            case 12:
              cacheThroughput = _context.sent;
              _context.next = 15;
              return this.measureMemoryLatency();
            case 15:
              memoryLatency = _context.sent;
              return _context.abrupt("return", {
                sequentialReadBandwidth: Number(sequentialReadBandwidth.toPrecision(16)),
                // MB/s
                sequentialWriteBandwidth: Number(sequentialWriteBandwidth.toPrecision(16)),
                // MB/s
                randomAccessRate: Number(randomAccessRate.toPrecision(16)),
                // accesses per ms
                cacheThroughput: Number(cacheThroughput.toPrecision(16)),
                // bytes per ms
                memoryLatency: Number((memoryLatency * 1000000).toPrecision(16)) // nanoseconds
              });
            case 19:
              _context.prev = 19;
              _context.t0 = _context["catch"](0);
              this._log.debug('MemoryTimingService - Error measuring memory bandwidth:', _context.t0);
              return _context.abrupt("return", this.getFallbackResult());
            case 23:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 19]]);
      }));
      function measureMemoryBandwidth() {
        return _measureMemoryBandwidth.apply(this, arguments);
      }
      return measureMemoryBandwidth;
    }())
  }, {
    key: "measureSequentialReadBandwidth",
    value: function () {
      var _measureSequentialReadBandwidth = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var size, array, i, startTime, sum, _i, endTime, duration;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              size = 16 * 1024 * 1024; // 16MB
              array = new Uint8Array(size);
              for (i = 0; i < array.length; i++) array[i] = i & 0xFF;
              startTime = this._performance.now();
              sum = 0;
              for (_i = 0; _i < array.length; _i++) sum += array[_i];
              endTime = this._performance.now();
              duration = endTime - startTime;
              return _context2.abrupt("return", size / (duration / 1000) / (1024 * 1024));
            case 12:
              _context2.prev = 12;
              _context2.t0 = _context2["catch"](0);
              this._log.debug('MemoryTimingService - Error in sequential read:', _context2.t0);
              return _context2.abrupt("return", 0);
            case 16:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 12]]);
      }));
      function measureSequentialReadBandwidth() {
        return _measureSequentialReadBandwidth.apply(this, arguments);
      }
      return measureSequentialReadBandwidth;
    }()
  }, {
    key: "measureSequentialWriteBandwidth",
    value: function () {
      var _measureSequentialWriteBandwidth = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var size, array, startTime, i, endTime, duration;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              size = 16 * 1024 * 1024; // 16MB
              array = new Uint8Array(size);
              startTime = this._performance.now();
              for (i = 0; i < array.length; i++) array[i] = i & 0xFF;
              endTime = this._performance.now();
              duration = endTime - startTime;
              return _context3.abrupt("return", size / (duration / 1000) / (1024 * 1024));
            case 10:
              _context3.prev = 10;
              _context3.t0 = _context3["catch"](0);
              this._log.debug('MemoryTimingService - Error in sequential write:', _context3.t0);
              return _context3.abrupt("return", 0);
            case 14:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 10]]);
      }));
      function measureSequentialWriteBandwidth() {
        return _measureSequentialWriteBandwidth.apply(this, arguments);
      }
      return measureSequentialWriteBandwidth;
    }()
  }, {
    key: "measureRandomAccessRate",
    value: function () {
      var _measureRandomAccessRate = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var arraySize, array, indices, i, _i2, startTime, sum, _i3, endTime, duration;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              arraySize = 1024 * 1024;
              array = new Uint8Array(arraySize);
              indices = new Uint32Array(100000);
              for (i = 0; i < array.length; i++) array[i] = i & 0xFF;
              for (_i2 = 0; _i2 < indices.length; _i2++) indices[_i2] = Math.floor(Math.random() * arraySize);
              startTime = this._performance.now();
              sum = 0;
              for (_i3 = 0; _i3 < indices.length; _i3++) sum += array[indices[_i3]];
              endTime = this._performance.now();
              duration = endTime - startTime;
              return _context4.abrupt("return", indices.length / duration);
            case 14:
              _context4.prev = 14;
              _context4.t0 = _context4["catch"](0);
              this._log.debug('MemoryTimingService - Error in random access:', _context4.t0);
              return _context4.abrupt("return", 0);
            case 18:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[0, 14]]);
      }));
      function measureRandomAccessRate() {
        return _measureRandomAccessRate.apply(this, arguments);
      }
      return measureRandomAccessRate;
    }()
  }, {
    key: "measureCacheThroughput",
    value: function () {
      var _measureCacheThroughput = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var size, array, i, startTime, sum, pass, _i4, endTime, duration;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              size = 65536; // 64KB - fits in L1 cache
              array = new Uint8Array(size);
              for (i = 0; i < array.length; i++) array[i] = i & 0xFF;
              startTime = this._performance.now();
              sum = 0;
              for (pass = 0; pass < 10; pass++) {
                for (_i4 = 0; _i4 < array.length; _i4++) sum += array[_i4];
              }
              endTime = this._performance.now();
              duration = endTime - startTime;
              return _context5.abrupt("return", array.length * 10 / duration);
            case 12:
              _context5.prev = 12;
              _context5.t0 = _context5["catch"](0);
              this._log.debug('MemoryTimingService - Error in cache performance:', _context5.t0);
              return _context5.abrupt("return", 0);
            case 16:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 12]]);
      }));
      function measureCacheThroughput() {
        return _measureCacheThroughput.apply(this, arguments);
      }
      return measureCacheThroughput;
    }()
  }, {
    key: "measureMemoryLatency",
    value: function () {
      var _measureMemoryLatency = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var arraySize, array, i, startTime, current, steps, _i5, endTime, duration;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              arraySize = 1024 * 1024;
              array = new Uint32Array(arraySize);
              for (i = 0; i < array.length - 1; i++) array[i] = i + 1;
              array[array.length - 1] = 0;
              startTime = this._performance.now();
              current = 0;
              steps = 0;
              for (_i5 = 0; _i5 < 100000; _i5++) {
                current = array[current];
                steps++;
              }
              endTime = this._performance.now();
              duration = endTime - startTime;
              return _context6.abrupt("return", duration / steps);
            case 14:
              _context6.prev = 14;
              _context6.t0 = _context6["catch"](0);
              this._log.debug('MemoryTimingService - Error in memory latency:', _context6.t0);
              return _context6.abrupt("return", 0);
            case 18:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[0, 14]]);
      }));
      function measureMemoryLatency() {
        return _measureMemoryLatency.apply(this, arguments);
      }
      return measureMemoryLatency;
    }()
  }, {
    key: "getFallbackResult",
    value: function getFallbackResult() {
      return {
        sequentialReadBandwidth: 0,
        sequentialWriteBandwidth: 0,
        randomAccessRate: 0,
        cacheThroughput: 0,
        memoryLatency: 0
      };
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (MemoryTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/StorageTimingService.js":
/*!***************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/StorageTimingService.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Storage Timing Service for measuring storage operation timings
 * High device variation - SSD vs HDD, browser storage APIs
 */
var StorageTimingService = /*#__PURE__*/function () {
  function StorageTimingService() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      performance = _ref.performance,
      log = _ref.log,
      localStorage = _ref.localStorage,
      sessionStorage = _ref.sessionStorage,
      indexedDB = _ref.indexedDB,
      math = _ref.math;
    _classCallCheck(this, StorageTimingService);
    this._performance = performance || window.performance;
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
    this._localStorage = localStorage || window.localStorage;
    this._sessionStorage = sessionStorage || window.sessionStorage;
    this._indexedDB = indexedDB || window.indexedDB;
    this._Math = math || Math;
  }

  /**
   * Measures all storage timings
   * @returns {Promise<Object>} Storage timing data
   */
  return _createClass(StorageTimingService, [{
    key: "measureAll",
    value: (function () {
      var _measureAll = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var localStorageTime, sessionStorageTime, indexedDBTime, bulkLocalStorageTime, storageStressTest;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this.measureLocalStorageTime();
            case 3:
              localStorageTime = _context.sent;
              _context.next = 6;
              return this.measureSessionStorageTime();
            case 6:
              sessionStorageTime = _context.sent;
              _context.next = 9;
              return this.measureIndexedDBTime();
            case 9:
              indexedDBTime = _context.sent;
              _context.next = 12;
              return this.measureBulkLocalStorageTime();
            case 12:
              bulkLocalStorageTime = _context.sent;
              _context.next = 15;
              return this.measureStorageStressTest();
            case 15:
              storageStressTest = _context.sent;
              return _context.abrupt("return", {
                localStorageTime: Number(localStorageTime.toPrecision(16)),
                sessionStorageTime: Number(sessionStorageTime.toPrecision(16)),
                indexedDBTime: Number(indexedDBTime.toPrecision(16)),
                bulkLocalStorageTime: Number(bulkLocalStorageTime.toPrecision(16)),
                storageStressTest: Number(storageStressTest.toPrecision(16))
              });
            case 19:
              _context.prev = 19;
              _context.t0 = _context["catch"](0);
              this._log.debug('StorageTimingService - Error measuring storage:', _context.t0);
              return _context.abrupt("return", this.getFallbackResult());
            case 23:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 19]]);
      }));
      function measureAll() {
        return _measureAll.apply(this, arguments);
      }
      return measureAll;
    }())
  }, {
    key: "measureLocalStorageTime",
    value: function () {
      var _measureLocalStorageTime = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var testKey, testData, iterations, startTime, i, endTime;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              testKey = 'storage_timing_test';
              testData = this.generateTestData(1024); // 1KB instead of 256B
              iterations = 100; // More iterations for better measurement
              startTime = this._performance.now();
              for (i = 0; i < iterations; i++) {
                this._localStorage.setItem(testKey + i, testData);
                this._localStorage.getItem(testKey + i);
                this._localStorage.removeItem(testKey + i);
              }
              endTime = this._performance.now();
              return _context2.abrupt("return", endTime - startTime);
            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              this._log.debug('StorageTimingService - Error in localStorage:', _context2.t0);
              return _context2.abrupt("return", 0);
            case 14:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 10]]);
      }));
      function measureLocalStorageTime() {
        return _measureLocalStorageTime.apply(this, arguments);
      }
      return measureLocalStorageTime;
    }()
  }, {
    key: "measureSessionStorageTime",
    value: function () {
      var _measureSessionStorageTime = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var testKey, testData, iterations, startTime, i, endTime;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              testKey = 'storage_timing_test';
              testData = this.generateTestData(1024); // 1KB instead of 256B
              iterations = 100; // More iterations for better measurement
              startTime = this._performance.now();
              for (i = 0; i < iterations; i++) {
                this._sessionStorage.setItem(testKey + i, testData);
                this._sessionStorage.getItem(testKey + i);
                this._sessionStorage.removeItem(testKey + i);
              }
              endTime = this._performance.now();
              return _context3.abrupt("return", endTime - startTime);
            case 10:
              _context3.prev = 10;
              _context3.t0 = _context3["catch"](0);
              this._log.debug('StorageTimingService - Error in sessionStorage:', _context3.t0);
              return _context3.abrupt("return", 0);
            case 14:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 10]]);
      }));
      function measureSessionStorageTime() {
        return _measureSessionStorageTime.apply(this, arguments);
      }
      return measureSessionStorageTime;
    }()
  }, {
    key: "measureIndexedDBTime",
    value: function () {
      var _measureIndexedDBTime = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              return _context4.abrupt("return", new Promise(function (resolve) {
                var dbName = 'storage_timing_test_db';
                var storeName = 'testStore';
                var request = _this._indexedDB.open(dbName, 1);
                request.onupgradeneeded = function (event) {
                  var db = event.target.result;
                  db.createObjectStore(storeName);
                };
                request.onsuccess = function (event) {
                  var db = event.target.result;
                  var tx = db.transaction(storeName, 'readwrite');
                  var store = tx.objectStore(storeName);
                  var testData = 'x'.repeat(1024); // 1KB instead of 256B
                  var iterations = 50; // More iterations

                  var startTime = _this._performance.now();
                  var completed = 0;
                  var _loop = function _loop(i) {
                    var addReq = store.add(testData, 'key' + i);
                    addReq.onsuccess = function () {
                      var getReq = store.get('key' + i);
                      getReq.onsuccess = function () {
                        var delReq = store["delete"]('key' + i);
                        delReq.onsuccess = function () {
                          completed++;
                          if (completed === iterations) {
                            var endTime = _this._performance.now();
                            db.close();
                            _this._indexedDB.deleteDatabase(dbName);
                            resolve(endTime - startTime);
                          }
                        };
                      };
                    };
                  };
                  for (var i = 0; i < iterations; i++) {
                    _loop(i);
                  }
                };
                request.onerror = function () {
                  resolve(0);
                };
              }));
            case 4:
              _context4.prev = 4;
              _context4.t0 = _context4["catch"](0);
              this._log.debug('StorageTimingService - Error in IndexedDB:', _context4.t0);
              return _context4.abrupt("return", 0);
            case 8:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[0, 4]]);
      }));
      function measureIndexedDBTime() {
        return _measureIndexedDBTime.apply(this, arguments);
      }
      return measureIndexedDBTime;
    }()
  }, {
    key: "measureBulkLocalStorageTime",
    value: function () {
      var _measureBulkLocalStorageTime = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var testKeyPrefix, testData, count, startTime, i, _i, _i2, _i3, _i4, endTime;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              testKeyPrefix = 'bulk_storage_timing_test_';
              testData = this.generateTestData(2048); // 2KB instead of 256B
              count = 200; // More operations instead of 50
              startTime = this._performance.now(); // Write phase
              for (i = 0; i < count; i++) {
                this._localStorage.setItem(testKeyPrefix + i, testData);
              }

              // Read phase
              for (_i = 0; _i < count; _i++) {
                this._localStorage.getItem(testKeyPrefix + _i);
              }

              // Update phase (overwrite existing)
              for (_i2 = 0; _i2 < count; _i2++) {
                this._localStorage.setItem(testKeyPrefix + _i2, testData + '_updated');
              }

              // Read updated phase
              for (_i3 = 0; _i3 < count; _i3++) {
                this._localStorage.getItem(testKeyPrefix + _i3);
              }

              // Delete phase
              for (_i4 = 0; _i4 < count; _i4++) {
                this._localStorage.removeItem(testKeyPrefix + _i4);
              }
              endTime = this._performance.now();
              return _context5.abrupt("return", endTime - startTime);
            case 14:
              _context5.prev = 14;
              _context5.t0 = _context5["catch"](0);
              this._log.debug('StorageTimingService - Error in bulk localStorage:', _context5.t0);
              return _context5.abrupt("return", 0);
            case 18:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 14]]);
      }));
      function measureBulkLocalStorageTime() {
        return _measureBulkLocalStorageTime.apply(this, arguments);
      }
      return measureBulkLocalStorageTime;
    }()
  }, {
    key: "measureStorageStressTest",
    value: function () {
      var _measureStorageStressTest = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var testKeyPrefix, smallData, mediumData, largeData, startTime, i, _i5, _i6, _i7, _i8, _i9, _i10, endTime;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              testKeyPrefix = 'stress_test_';
              smallData = this.generateTestData(64); // 64B
              mediumData = this.generateTestData(1024); // 1KB
              largeData = this.generateTestData(8192); // 8KB
              startTime = this._performance.now(); // Small data operations (many small writes)
              for (i = 0; i < 500; i++) {
                this._localStorage.setItem(testKeyPrefix + 'small_' + i, smallData);
              }

              // Medium data operations
              for (_i5 = 0; _i5 < 100; _i5++) {
                this._localStorage.setItem(testKeyPrefix + 'medium_' + _i5, mediumData);
              }

              // Large data operations
              for (_i6 = 0; _i6 < 20; _i6++) {
                this._localStorage.setItem(testKeyPrefix + 'large_' + _i6, largeData);
              }

              // Mixed read operations
              for (_i7 = 0; _i7 < 200; _i7++) {
                this._localStorage.getItem(testKeyPrefix + 'small_' + _i7 % 500);
                this._localStorage.getItem(testKeyPrefix + 'medium_' + _i7 % 100);
                this._localStorage.getItem(testKeyPrefix + 'large_' + _i7 % 20);
              }

              // Cleanup
              for (_i8 = 0; _i8 < 500; _i8++) {
                this._localStorage.removeItem(testKeyPrefix + 'small_' + _i8);
              }
              for (_i9 = 0; _i9 < 100; _i9++) {
                this._localStorage.removeItem(testKeyPrefix + 'medium_' + _i9);
              }
              for (_i10 = 0; _i10 < 20; _i10++) {
                this._localStorage.removeItem(testKeyPrefix + 'large_' + _i10);
              }
              endTime = this._performance.now();
              return _context6.abrupt("return", endTime - startTime);
            case 17:
              _context6.prev = 17;
              _context6.t0 = _context6["catch"](0);
              this._log.debug('StorageTimingService - Error in storage stress test:', _context6.t0);
              return _context6.abrupt("return", 0);
            case 21:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[0, 17]]);
      }));
      function measureStorageStressTest() {
        return _measureStorageStressTest.apply(this, arguments);
      }
      return measureStorageStressTest;
    }()
  }, {
    key: "generateTestData",
    value: function generateTestData(size) {
      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      var result = '';
      for (var i = 0; i < size; i++) {
        result += chars.charAt(Math.floor(this._Math.random() * chars.length));
      }
      return result;
    }
  }, {
    key: "getFallbackResult",
    value: function getFallbackResult() {
      return {
        localStorageTime: 0,
        sessionStorageTime: 0,
        indexedDBTime: 0,
        bulkLocalStorageTime: 0,
        storageStressTest: 0
      };
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (StorageTimingService);

/***/ }),

/***/ "./src/main/collectors/static/timing/service/WebGLTimingService.js":
/*!*************************************************************************!*\
  !*** ./src/main/collectors/static/timing/service/WebGLTimingService.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * WebGL Timing Service for measuring WebGL performance using uniformMatrix4fv benchmark
 */
var WebGLTimingService = /*#__PURE__*/function () {
  function WebGLTimingService() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      log = _ref.log,
      document = _ref.document,
      performance = _ref.performance,
      math = _ref.math;
    _classCallCheck(this, WebGLTimingService);
    this._log = log || _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"];
    this._document = document || window.document;
    this._performance = performance || window.performance;
    this._math = math || Math;
    this.contextTypes = ['webgl2'];
  }

  /**
   * Collects WebGL timing information using uniformMatrix4fv benchmark
   * @returns {Object} WebGL timing data
   */
  return _createClass(WebGLTimingService, [{
    key: "collectWebGLTiming",
    value: (function () {
      var _collectWebGLTiming = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var canvas, gl, benchmark;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              canvas = this._document.createElement('canvas');
              canvas.width = 256;
              canvas.height = 128;
              gl = canvas.getContext('webgl2');
              if (gl) {
                _context.next = 7;
                break;
              }
              return _context.abrupt("return", {});
            case 7:
              _context.next = 9;
              return this.runUniformMatrixBenchmark(gl);
            case 9:
              benchmark = _context.sent;
              return _context.abrupt("return", benchmark.results.totalTime);
            case 13:
              _context.prev = 13;
              _context.t0 = _context["catch"](0);
              this._log.debug('WebGLTimingService - Error collecting WebGL timing:', _context.t0);
              return _context.abrupt("return", {});
            case 17:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 13]]);
      }));
      function collectWebGLTiming() {
        return _collectWebGLTiming.apply(this, arguments);
      }
      return collectWebGLTiming;
    }()
    /**
     * Runs the uniformMatrix4fv benchmark
     * @param {WebGLRenderingContext} gl - WebGL context
     * @returns {Object} Benchmark results
     */
    )
  }, {
    key: "runUniformMatrixBenchmark",
    value: (function () {
      var _runUniformMatrixBenchmark = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(gl) {
        var benchmark, matrices, program, uniformLocation, i, j, startTime, iteration, matrixIndex, endTime, totalTime, totalOperations, operationsPerSecond;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              benchmark = {
                iterations: 1000,
                matrixCount: 15,
                results: {}
              };
              _context2.prev = 1;
              // Create matrices for testing
              matrices = this.createTestMatrices(benchmark.matrixCount); // Get uniform location (we'll use a simple shader)
              program = this.createSimpleShaderProgram(gl);
              if (program) {
                _context2.next = 6;
                break;
              }
              throw new Error('Failed to create shader program');
            case 6:
              gl.useProgram(program);
              uniformLocation = gl.getUniformLocation(program, 'u_matrix'); // Warm up
              for (i = 0; i < 10; i++) {
                for (j = 0; j < matrices.length; j++) {
                  gl.uniformMatrix4fv(uniformLocation, false, matrices[j]);
                }
              }

              // Run benchmark
              startTime = this._performance.now();
              for (iteration = 0; iteration < benchmark.iterations; iteration++) {
                for (matrixIndex = 0; matrixIndex < matrices.length; matrixIndex++) {
                  gl.uniformMatrix4fv(uniformLocation, false, matrices[matrixIndex]);
                }
              }
              endTime = this._performance.now();
              totalTime = endTime - startTime; // Calculate metrics
              totalOperations = benchmark.iterations * benchmark.matrixCount;
              operationsPerSecond = totalOperations / totalTime * 1000;
              benchmark.results = {
                totalTime: totalTime,
                operationsPerSecond: operationsPerSecond
              };

              // Cleanup
              gl.deleteProgram(program);
              _context2.next = 23;
              break;
            case 19:
              _context2.prev = 19;
              _context2.t0 = _context2["catch"](1);
              this._log.debug('WebGLTimingService - Error running uniformMatrix benchmark:', _context2.t0);
              benchmark.results = {
                error: _context2.t0.message,
                totalTime: 0,
                operationsPerSecond: 0
              };
            case 23:
              return _context2.abrupt("return", benchmark);
            case 24:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[1, 19]]);
      }));
      function runUniformMatrixBenchmark(_x) {
        return _runUniformMatrixBenchmark.apply(this, arguments);
      }
      return runUniformMatrixBenchmark;
    }()
    /**
     * Creates test matrices for the benchmark
     * @param {number} count - Number of matrices to create
     * @returns {Array<Float32Array>} Array of test matrices
     */
    )
  }, {
    key: "createTestMatrices",
    value: function createTestMatrices(count) {
      var matrices = [];
      for (var i = 0; i < count; i++) {
        var matrix = new Float32Array(16);

        // Create a rotation matrix around different axes
        var angle = i / count * this._math.PI * 2;
        var cos = this._math.cos(angle);
        var sin = this._math.sin(angle);

        // Rotation around Y-axis
        matrix[0] = cos;
        matrix[1] = 0;
        matrix[2] = sin;
        matrix[3] = 0;
        matrix[4] = 0;
        matrix[5] = 1;
        matrix[6] = 0;
        matrix[7] = 0;
        matrix[8] = -sin;
        matrix[9] = 0;
        matrix[10] = cos;
        matrix[11] = 0;
        matrix[12] = 0;
        matrix[13] = 0;
        matrix[14] = 0;
        matrix[15] = 1;
        matrices.push(matrix);
      }
      return matrices;
    }

    /**
     * Creates a simple shader program for the benchmark
     * @param {WebGLRenderingContext} gl - WebGL context
     * @returns {WebGLProgram|null} Shader program or null if failed
     */
  }, {
    key: "createSimpleShaderProgram",
    value: function createSimpleShaderProgram(gl) {
      try {
        var vertexShaderSource = "\n        attribute vec4 a_position;\n        uniform mat4 u_matrix;\n        void main() {\n          gl_Position = u_matrix * a_position;\n        }\n      ";
        var fragmentShaderSource = "\n        precision mediump float;\n        void main() {\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n        }\n      ";
        var vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vertexShaderSource);
        gl.compileShader(vertexShader);
        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
          this._log.debug('WebGLTimingService - Vertex shader compilation failed:', gl.getShaderInfoLog(vertexShader));
          gl.deleteShader(vertexShader);
          return null;
        }
        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, fragmentShaderSource);
        gl.compileShader(fragmentShader);
        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
          this._log.debug('WebGLTimingService - Fragment shader compilation failed:', gl.getShaderInfoLog(fragmentShader));
          gl.deleteShader(vertexShader);
          gl.deleteShader(fragmentShader);
          return null;
        }
        var program = gl.createProgram();
        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
          this._log.debug('WebGLTimingService - Program linking failed:', gl.getProgramInfoLog(program));
          gl.deleteShader(vertexShader);
          gl.deleteShader(fragmentShader);
          gl.deleteProgram(program);
          return null;
        }

        // Cleanup shaders (they're now attached to the program)
        gl.deleteShader(vertexShader);
        gl.deleteShader(fragmentShader);
        return program;
      } catch (error) {
        this._log.debug('WebGLTimingService - Error creating shader program:', error);
        return null;
      }
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (WebGLTimingService);

/***/ }),

/***/ "./src/main/collectorsV2/FeatureServiceV2.js":
/*!***************************************************!*\
  !*** ./src/main/collectorsV2/FeatureServiceV2.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FeatureServiceV2; }
/* harmony export */ });
/* harmony import */ var _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FeaturesListV2 */ "./src/main/collectorsV2/FeaturesListV2.js");
/* harmony import */ var _detectors_iframes_IframesDetector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./detectors/iframes/IframesDetector */ "./src/main/collectorsV2/detectors/iframes/IframesDetector.js");
/* harmony import */ var _factories_DataCollectorsFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./factories/DataCollectorsFactory */ "./src/main/collectorsV2/factories/DataCollectorsFactory.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _detectors_elements_ElementsDetector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./detectors/elements/ElementsDetector */ "./src/main/collectorsV2/detectors/elements/ElementsDetector.js");
/* harmony import */ var _detectors_shadow_doms_ShadowDOMsDetector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./detectors/shadow-doms/ShadowDOMsDetector */ "./src/main/collectorsV2/detectors/shadow-doms/ShadowDOMsDetector.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _core_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _observers_MutationsEmitterV2__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./observers/MutationsEmitterV2 */ "./src/main/collectorsV2/observers/MutationsEmitterV2.js");
/* harmony import */ var _states_CollectorsState__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./states/CollectorsState */ "./src/main/collectorsV2/states/CollectorsState.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }













var FeatureServiceV2 = /*#__PURE__*/function () {
  // TODO: make sure that each shadow root detect iframes and vice versa
  function FeatureServiceV2(configurationRepository, elementsCollector, msgBus) {
    var _this = this;
    _classCallCheck(this, FeatureServiceV2);
    _defineProperty(this, "_elementsDetector", new _detectors_elements_ElementsDetector__WEBPACK_IMPORTED_MODULE_5__["default"]());
    _defineProperty(this, "_shadowDOMsDetector", new _detectors_shadow_doms_ShadowDOMsDetector__WEBPACK_IMPORTED_MODULE_6__["default"]());
    _defineProperty(this, "_dataCollectorsFactory", new _factories_DataCollectorsFactory__WEBPACK_IMPORTED_MODULE_2__["default"]());
    _defineProperty(this, "_mutationEmitter", new _observers_MutationsEmitterV2__WEBPACK_IMPORTED_MODULE_11__["default"]());
    _defineProperty(this, "_collectorsState", new _states_CollectorsState__WEBPACK_IMPORTED_MODULE_12__["default"]());
    _defineProperty(this, "_onMutation", function (evt) {
      var node = evt && evt.node;
      if (!node) return;
      if (evt.type === 'added') {
        if (_this._isShadowRoot(node)) {
          _this._scanElementsIn(node.shadowRoot, _this._sendElementToServer);
        }
        if (_this._isIframe(node)) {
          if (node.contentDocument) {
            // Iframe is Loaded
            _this._observeMutationsIn(node.contentDocument.body);
          } else {
            var onLoad = function onLoad() {
              _this._observeMutationsIn(node.contentDocument.body);
            };
            node.addEventListener('load', onLoad, {
              once: true
            });
          }
          _this._runCollectorsAndScanElementsInIframe(node);
        }
      } else if (evt.type === 'removed') {
        if (_this._isIframe(node)) {
          _this._cleanupIframe(node);
        }
      }
    });
    _defineProperty(this, "_observeAndScanShadowDOM", function (shadowDOM) {
      _this._observeMutationsIn(shadowDOM);
      _this._scanElementsIn(shadowDOM, _this._sendElementToServer);
    });
    _defineProperty(this, "_sendElementToServer", function (element) {
      _this._elementsCollector.getElement(element); // Sending the element to the server;
    });
    this._configurationRepository = configurationRepository;
    this._iframesDetector = new _detectors_iframes_IframesDetector__WEBPACK_IMPORTED_MODULE_1__["default"](configurationRepository);
    this._elementsCollector = elementsCollector;
    this._msgBus = msgBus;
  }
  return _createClass(FeatureServiceV2, [{
    key: "runDefaultCollectors",
    value: function runDefaultCollectors() {
      var _this2 = this;
      this._onWindowLoaded(function () {
        _this2._observeWindowMutations();
        _this2._runCollectorsOn(document, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.defaultCollectorsV2);
        _this2._scanElementsIn(document, _this2._sendElementToServer);
        _this2._scanShadowRootsIn(document, _this2._observeAndScanShadowDOM);
        _this2._scanIframesIn(document, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.framesRelatedCollectorsV2);
      });
    }
  }, {
    key: "updateRunByConfig",
    value: function updateRunByConfig(configurationRepository) {
      var collectors = _objectSpread(_objectSpread(_objectSpread({}, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.defaultCollectorsV2), _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.perContextCollectorsV2), _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.nonDefaultCollectorsV2);
      this._updateFeatures(collectors, configurationRepository);
    }
  }, {
    key: "runPerContextFeatures",
    value: function runPerContextFeatures(contextData) {
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.");
        return;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info('running per context feature');
      this._runCollectorsOn(document, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.perContextCollectorsV2);
      if (contextData.name !== 'cd_auto') {
        this._scanIframesIn(document, _objectSpread(_objectSpread({}, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.defaultCollectorsV2), _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.framesRelatedCollectorsV2));
      }
    }
  }, {
    key: "runPerSessionFeatures",
    value: function runPerSessionFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info('Running per session features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.");
        return;
      }

      // Start the per session features according to the configuration
      this._runCollectorsOn(document, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.perSessionCollectorsV2);
    }
  }, {
    key: "stopAllFeatures",
    value: function stopAllFeatures() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info('Stopping all features');
      //this.stopNonDefault();
      var collectorsToStop = _objectSpread(_objectSpread(_objectSpread({}, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.defaultCollectorsV2), _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.perContextCollectorsV2), _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.perSessionCollectorsV2);
      this._stopCollectors(collectorsToStop);
    }
  }, {
    key: "_runCollectorsOn",
    value: function _runCollectorsOn(doc, collectors) {
      var _this3 = this;
      Object.keys(collectors).forEach(function (collector) {
        _this3._runCollector(doc, collector);
      });
    }
  }, {
    key: "_runFeaturesWithConfig",
    value: function _runFeaturesWithConfig(doc, collectors, configurationRepository) {
      var _this4 = this;
      Object.keys(collectors).forEach(function (collector) {
        var key = _this4._dataCollectorsFactory.configKey(collector);
        if (configurationRepository.get(key)) {
          _this4._runCollector(doc, collector);
        }
      });
    }
  }, {
    key: "_runCollector",
    value: function _runCollector(doc, collectorName) {
      var collector = this._dataCollectorsFactory.create(collectorName);
      this._collectorsState.addCollector(doc, collectorName, collector);
      if (collector.getEvents().length === 0) {
        // TODO: refactor this code
        // TODO: meant to run static collectors
        collector.handleEvent();
      }
      collector.getEvents().forEach(function (eventType) {
        doc.addEventListener(eventType, collector.handleEvent);
      });
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info('Running Collector: ', collectorName, ' On: ', doc.URL);
    }
  }, {
    key: "_stopCollector",
    value: function _stopCollector(doc, collectorName) {
      try {
        var collector = this._collectorsState.getCollectorByName(doc, collectorName);
        this._collectorsState.removeCollectorForDoc(doc, collectorName);
        collector.getEvents().forEach(function (eventType) {
          doc.removeEventListener(eventType, collector.handleEvent);
        });
      } catch (e) {
        //Log.log(`Error stop collector: ${e}`);
      }
    }
  }, {
    key: "_stopCollectors",
    value: function _stopCollectors(collectors) {
      var _this5 = this;
      Object.keys(collectors).forEach(function (collector) {
        _this5._collectorsState.forEachDoc(function (doc) {
          _this5._stopCollector(doc, collector);
        });
      });
    }
  }, {
    key: "_updateFeatures",
    value: function _updateFeatures(features, configurationRepository) {
      var _this6 = this;
      Object.keys(features).forEach(function (collector) {
        var collectorShouldRun = _this6._collectorShouldRun(collector, configurationRepository);
        var collectorRunning = _this6._collectorsState.collectorExistsInAnyDoc(collector);
        if (collectorRunning && !collectorShouldRun) {
          _this6._collectorsState.forEachDoc(function (doc) {
            _this6._stopCollector(doc, collector);
          });
        } else if (!collectorRunning && collectorShouldRun) {
          _this6._collectorsState.forEachDoc(function (doc) {
            _this6._runCollector(doc, collector);
          });
        } else if (collectorRunning) {
          _this6._collectorsState.forEachDoc(function (doc) {
            _this6._updateCollector(doc, collector);
          });
        }
      });
    }
  }, {
    key: "_collectorShouldRun",
    value: function _collectorShouldRun(collector, configurationRepository) {
      var key = this._dataCollectorsFactory.configKey(collector);
      var config = configurationRepository.get(key);
      var collectorShouldRun = true;
      if (config === undefined) {
        collectorShouldRun = true;
      } else if (typeof config === 'boolean') {
        collectorShouldRun = config;
      }
      return collectorShouldRun;
    }
  }, {
    key: "_updateCollector",
    value: function _updateCollector(doc, collectorName) {
      try {
        var collector = this._collectorsState.getCollectorByName(doc, collectorName);
        collector.updateConfig();
      } catch (e) {
        //Log.log(`Tried to update collector ${e}`);
      }
    }
  }, {
    key: "_scanIframesIn",
    value: function _scanIframesIn(doc, collectors) {
      var _this7 = this;
      this._iframesDetector.detect(doc, function (iframe) {
        _this7._observeMutationsIn(iframe.body);
        _this7._runCollectorsOn(iframe, collectors);
        _this7._scanElementsIn(iframe, _this7._sendElementToServer);
      });
    }
  }, {
    key: "_isIframe",
    value: function _isIframe(node) {
      return node.nodeType === Node.ELEMENT_NODE && node.nodeName === 'IFRAME';
    }
  }, {
    key: "_runCollectorsAndScanElementsInIframe",
    value: function _runCollectorsAndScanElementsInIframe(node) {
      var _this8 = this;
      var onLoad = function onLoad() {
        var _node$contentWindow;
        var iframe = node.contentDocument || ((_node$contentWindow = node.contentWindow) === null || _node$contentWindow === void 0 ? void 0 : _node$contentWindow.document);
        _this8._iframesDetector.addIframeToCache(iframe); // TODO: figure out the depth of the iframe?
        _this8._runCollectorsOn(iframe, _FeaturesListV2__WEBPACK_IMPORTED_MODULE_0__.framesRelatedCollectorsV2);
        _this8._scanElementsIn(iframe, _this8._sendElementToServer);
      };
      node.addEventListener('load', onLoad, {
        once: true
      });
    }
  }, {
    key: "_isShadowRoot",
    value: function _isShadowRoot(node) {
      var shadowRoot = node.shadowRoot;
      return shadowRoot && shadowRoot.mode === 'open';
    }
  }, {
    key: "_observeMutationsIn",
    value: function _observeMutationsIn(element) {
      if (!element) return;
      this._mutationEmitter.observeElement(element, this._onMutation);
    }
  }, {
    key: "_observeWindowMutations",
    value: function _observeWindowMutations() {
      if (!this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_7__.ConfigurationFields.isMutationObserver)) return;
      this._mutationEmitter.observe(window, this._onMutation);
      //this._jQueryElementListenerSiteMapper.initTracking();
    }
  }, {
    key: "_scanElementsIn",
    value: function _scanElementsIn(rootNode, onElement) {
      this._elementsDetector.detect(rootNode, onElement);
    }
  }, {
    key: "_scanShadowRootsIn",
    value: function _scanShadowRootsIn(rootNode, onShadowRoot) {
      this._shadowDOMsDetector.detect(rootNode, onShadowRoot);
    }
  }, {
    key: "_onWindowLoaded",
    value: function _onWindowLoaded(func) {
      if (document.readyState === 'complete') {
        func();
        return;
      }
      window.addEventListener('load', function () {
        func();
      }, {
        once: true
      });
    }
  }, {
    key: "_cleanupIframe",
    value: function _cleanupIframe(iframeElement) {
      try {
        var _iframeElement$conten;
        var iframeDoc = iframeElement.contentDocument || ((_iframeElement$conten = iframeElement.contentWindow) === null || _iframeElement$conten === void 0 ? void 0 : _iframeElement$conten.document);
        if (!iframeDoc) return;
        this._cleanupDocument(iframeDoc);
      } catch (e) {
        // Cross-origin or already detached; best-effort cleanup
      }
    }
  }, {
    key: "_cleanupDocument",
    value: function _cleanupDocument(doc) {
      var _this9 = this;
      var collectorNames = [];
      this._collectorsState.forEachCollectorNameInDoc(doc, function (name) {
        return collectorNames.push(name);
      });
      collectorNames.forEach(function (name) {
        return _this9._stopCollector(doc, name);
      });
      this._collectorsState.removeDoc(doc);
      try {
        if (doc && doc.body) {
          this._mutationEmitter.unobserve(doc.body);
        }
      } catch (e) {
        // ignore
      }
      try {
        this._iframesDetector.removeIframeFromCache(doc);
      } catch (e) {
        // ignore
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].info('Cleaned up document:', doc === null || doc === void 0 ? void 0 : doc.URL);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectorsV2/FeaturesListV2.js":
/*!*************************************************!*\
  !*** ./src/main/collectorsV2/FeaturesListV2.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultCollectorsV2: function() { return /* binding */ defaultCollectorsV2; },
/* harmony export */   framesRelatedCollectorsV2: function() { return /* binding */ framesRelatedCollectorsV2; },
/* harmony export */   nonDefaultCollectorsV2: function() { return /* binding */ nonDefaultCollectorsV2; },
/* harmony export */   perContextCollectorsV2: function() { return /* binding */ perContextCollectorsV2; },
/* harmony export */   perSessionCollectorsV2: function() { return /* binding */ perSessionCollectorsV2; },
/* harmony export */   shouldRunCollectorsV2: function() { return /* binding */ shouldRunCollectorsV2; }
/* harmony export */ });
/* harmony import */ var _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collectors/events/KeyEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/KeyEventCollectorV2.js");
/* harmony import */ var _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collectors/events/ElementEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/ElementEventCollectorV2.js");
/* harmony import */ var _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collectors/events/MouseEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/MouseEventCollectorV2.js");




// Right now we are running only three collectors + Sending Elements to server (Elements Collector)
// Therefore we have some empty lists, because this three collectors should run only in the specified lists below

var defaultCollectorsV2 = {
  MouseEventCollectorV2: _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__["default"],
  ElementEventCollectorV2: _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__["default"],
  KeyEventCollectorV2: _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]
};
var framesRelatedCollectorsV2 = {
  MouseEventCollectorV2: _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__["default"],
  ElementEventCollectorV2: _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__["default"],
  KeyEventCollectorV2: _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]
};
var shouldRunCollectorsV2 = {
  MouseEventCollectorV2: _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__["default"],
  ElementEventCollectorV2: _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__["default"],
  KeyEventCollectorV2: _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]
};
var perContextCollectorsV2 = {};
var perSessionCollectorsV2 = {};
var nonDefaultCollectorsV2 = {};

/***/ }),

/***/ "./src/main/collectorsV2/collectors/DataCollectorV2.js":
/*!*************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/DataCollectorV2.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DataCollectorV2; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var DataCollectorV2 = /*#__PURE__*/function () {
  function DataCollectorV2() {
    _classCallCheck(this, DataCollectorV2);
    _defineProperty(this, "handleEvent", function (event) {});
  }
  return _createClass(DataCollectorV2, [{
    key: "getEvents",
    value: function getEvents() {}
  }, {
    key: "updateConfig",
    value: function updateConfig() {}
  }, {
    key: "getTimestampFromEvent",
    value: function getTimestampFromEvent(e) {
      return e.timeStamp ? _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cutDecimalPointDigits(e.timeStamp, 3) : 0;
    }
  }]);
}();
_defineProperty(DataCollectorV2, "configKey", "");


/***/ }),

/***/ "./src/main/collectorsV2/collectors/events/ElementEventCollectorV2.js":
/*!****************************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/events/ElementEventCollectorV2.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ElementEventCollectorV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../collectors/events/IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../collectors/events/ElementEventCollector */ "./src/main/collectors/events/ElementEventCollector.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var ElementEventCollectorV2 = /*#__PURE__*/function (_DataCollectorV) {
  function ElementEventCollectorV2(msgBus, utils, elements, maskingService, dataQ, configurationRepository) {
    var _this;
    _classCallCheck(this, ElementEventCollectorV2);
    _this = _callSuper(this, ElementEventCollectorV2);
    _defineProperty(_this, "handleEvent", function (event) {
      // Filter out elements that don't match the condition
      var inputSelectors = "input:not([type='color']):not([type='hidden']):not([type='file'])" + ":not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea";
      if (event.target.matches(inputSelectors)) {
        if (event.type === 'input') {
          _this._handleInputEvent(event);
        } else if (event.type === 'focusout' || event.type === 'focusin') {
          _this._handleFocusBlurEvent(event);
        }
      }
      var clickSelectors = "input[type='button'], input[type='radio'], input[type='checkbox'], button";
      if (event.target.matches(clickSelectors)) {
        _this._handleClickEvent(event);
      }
      var selectSelectors = 'select';
      if (event.target.matches(selectSelectors)) {
        if (event.type === 'change') {
          _this._handleSelectElementOnChangeEvent(event);
        } else if (_this._collectSelectElementBlurAndFocusEvents) {
          if (event.type === 'focusout' || event.type === 'focusin') {
            _this._handleFocusBlurEvent(event);
          }
        }
      }
    });
    _this._maxElemValLength = 200;
    _this._inputEventsPerElement = new WeakMap();
    _this._msgBus = msgBus;
    _this._utils = utils;
    _this._elements = elements;
    _this._maskingService = maskingService;
    _this._dataQ = dataQ;
    _this._configurationRepository = configurationRepository;
    _this._collectSelectElementBlurAndFocusEvents = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_5__.ConfigurationFields.collectSelectElementBlurAndFocusEvents);
    return _this;
  }
  _inherits(ElementEventCollectorV2, _DataCollectorV);
  return _createClass(ElementEventCollectorV2, [{
    key: "getEvents",
    value: function getEvents() {
      // focus and blur do not propagate
      // we are using focusin and focusout instead.
      return ['input', 'focusin', 'focusout',
      // Input events
      'click',
      // Click events
      'change' // Select events
      ];
    }
  }, {
    key: "updateConfig",
    value: function updateConfig() {
      this._hashTruncationLength = this._configurationRepository.get('elementHashTruncationLength') !== undefined ? this._configurationRepository.get('elementHashTruncationLength') : this._hashTruncationLength;
      this._elements.updateFeatureConfig();
      // this._selectElementEvents.updateSettings(browserContext); TODO: this update locally
    }
  }, {
    key: "_handleInputEvent",
    value: function _handleInputEvent(e) {
      if (e.constructor.name === 'InputEvent') {
        this._inputEventsPerElement.set(e.target, {});
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = this._maskingService.maskText(newValue, e.target.id);
      }
      this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    }
  }, {
    key: "_handleFocusBlurEvent",
    value: function _handleFocusBlurEvent(e) {
      this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    }
  }, {
    key: "_handleClickEvent",
    value: function _handleClickEvent(e) {
      // in input of type button we wish to see the value in the button,
      // in input of type radio the value of the element clicked is the value
      // in input of type checkbox the value is the value property,
      // in button tag the value in the innerHTML
      // we send whether the value is checked un the selected property
      var target = e.target;
      var newValue = target.value || target.innerHTML || '';
      newValue = this._maskingService.maskText(newValue, e.target.id);
      this._sendToQueue(e, {
        length: newValue.length,
        elementValues: newValue,
        selected: target.checked === undefined ? -1 : target.checked ? 1 : 0
      });
    }
  }, {
    key: "_handleSelectElementOnChangeEvent",
    value: function _handleSelectElementOnChangeEvent(e) {
      var optionsVals = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__["default"].getDropDownListValues(e.target, this._maskingService).join(';');
      optionsVals = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__["default"].clearTextFromNumbers(optionsVals);
      var selected = e.target.selectedIndex;
      var length = e.target.value.length;
      this._sendToQueue(e, {
        length: length,
        selected: selected,
        elementValues: optionsVals
      });
    }
  }, {
    key: "_handleSyntheticInputEvents",
    value: function _handleSyntheticInputEvents(e) {
      // jQuery autotab plugin special handling!
      // Backspace keys are not reported as custom input events in case of jQuery autotab plugin is applied on
      // the current target.
      // This allows any other subsequent custom key events (that are not backspace) to be reported as
      // input events despite having the current target hashed in _inputEventNameTags
      if (!!this._inputEventsPerElement.has(e.target) && !(typeof e.jQueryMask !== 'undefined' && (e.jQueryMask === 'autotab' || e.jQueryMask === 'prasleyValidator'))) {
        return;
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = this._maskingService.maskText(newValue, e.target.id);
      }
      this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    }
  }, {
    key: "_sendToQueue",
    value: function _sendToQueue(e, eventData) {
      var isTrusted = _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_2__.IsTrustedValue[e.isTrusted];
      var time = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__["default"].dateNow();
      var relativeTimestamp = this.getTimestampFromEvent(e);
      var type = _collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_3__.ElementEventType[e.type];
      if (this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      eventData = eventData || {};
      if (eventData.elementValues && eventData.elementValues.length > this._maxElemValLength) {
        eventData.elementValues = '';
      }
      var fullEventData = _objectSpread(_objectSpread({}, eventData), {
        eventType: type,
        eventSequence: eventSeq,
        timestamp: time,
        elementHash: element,
        isTrusted: isTrusted,
        hashedValue: '',
        relativeTime: relativeTimestamp
      });
      this._dataQ.addToQueue('customer_metadata', ['elements_events_v2', this._utils.convertToArrayByMap(_collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_3__.EventStructure, fullEventData)], true);
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(ElementEventCollectorV2, "configKey", "isElementsEvent");


/***/ }),

/***/ "./src/main/collectorsV2/collectors/events/KeyEventCollectorV2.js":
/*!************************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/events/KeyEventCollectorV2.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ KeyEventCollectorV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../collectors/events/IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _services_SameCharService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../services/SameCharService */ "./src/main/services/SameCharService.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../collectors/events/KeyEventCollector */ "./src/main/collectors/events/KeyEventCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _collectors_events_KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../collectors/events/KeyRegionsStringTable */ "./src/main/collectors/events/KeyRegionsStringTable.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }









var DEFAULT_KEY_REGION_VALUE = '-1';
var KeyEventCollectorV2 = /*#__PURE__*/function (_DataCollectorV) {
  function KeyEventCollectorV2(configurationRepository, utils, elements, dataQ, msgBus, sameCharService, maskingService) {
    var _this;
    _classCallCheck(this, KeyEventCollectorV2);
    _this = _callSuper(this, KeyEventCollectorV2);
    _defineProperty(_this, "handleEvent", function (e) {
      //get element id for masking
      var type = _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__.KeyEventType[e.type];
      if (type === _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__.KeyEventType.keydown || type === _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__.KeyEventType.keyup) {
        _this._msgBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_6__.MessageBusEventType.KeyEvent, {
          action: type
        });
      }
      var element = _this._elements.getRealEventTarget(e);
      var elementID = element.id;
      var eventType = _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__.KeyEventType[e.type];
      if (_this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var eventSequence = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_7__["default"].dateNow();
      var eventKey = e.key || _this._maskingService.getKeyFromLegacyProperties(e);
      var eventCode = e.code || '';
      var KeyMaskedParameters = _this._maskingService.maskKey(eventKey, eventCode, elementID);
      var character = KeyMaskedParameters.key.length > 1 ? '' : KeyMaskedParameters.key;
      var elementHash = _this._elements.getElementHashFromEvent(e);
      // make sure it doesn't count double
      var keyComboType = _this._getComboType(e, eventKey); // only on keydown
      var isTrusted = _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[e.isTrusted];
      var metaKey = e.key === 'Meta' || e.key === 'OS' || e.key === 'Win' || e.metaKey || e.keyCode === 91 || e.keyCode === 92;
      var keyRegion = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.collectKeyRegionValue) ? _this._getKeyRegion(eventCode) : DEFAULT_KEY_REGION_VALUE;
      var relativeTs = _this.getTimestampFromEvent(e);
      var isSameKey = _services_SameCharService__WEBPACK_IMPORTED_MODULE_3__.SameCharType.undefined;
      if (e.type === 'keypress') {
        isSameKey = _this._sameCharService.compare(e.target, e.key);
        _this._sameCharService.update(e.target, e.key);
      }
      _this._dataQueue.addToQueue('customer_metadata', ['key_events_v2', _this._utils.convertToArrayByMap(_collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_5__.EventStructure, {
        eventType: eventType,
        eventSequence: eventSequence,
        timestamp: timestamp,
        charCode: KeyMaskedParameters.charCode,
        character: character,
        elementHash: elementHash,
        keyComboType: keyComboType,
        isTrusted: isTrusted,
        isCtrl: e.ctrlKey || false,
        isShift: e.shiftKey || false,
        isAlt: e.altKey || false,
        isMetaKey: metaKey || false,
        keyLocation: e.location || 0,
        code: KeyMaskedParameters.code || '',
        key: KeyMaskedParameters.key || '',
        location: e.location || '',
        isRepeat: e.repeat || false,
        // is pressed repeatedly,
        keyRegion: keyRegion,
        relativeTime: relativeTs,
        isSameKey: isSameKey
      })]);
    });
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._elements = elements;
    _this._dataQueue = dataQ;
    _this._msgBus = msgBus;
    _this._sameCharService = sameCharService;
    _this._maskingService = maskingService;
    // ctrl+c, ctrl+v, ctrl+a, ctrl+x, ctrl+z, ctrl+p, ctrl+s
    _this.comboCodes = ['c', 'v', 'a', 'x', 'z', 'p', 's'];
    _this._useCaptureEvents = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.isCaptureKeyEvents);
    return _this;
  }
  _inherits(KeyEventCollectorV2, _DataCollectorV);
  return _createClass(KeyEventCollectorV2, [{
    key: "getEvents",
    value: function getEvents() {
      return ['keydown', 'keyup', 'keypress'];
    }
  }, {
    key: "_getKeyRegion",
    value: function _getKeyRegion(code) {
      return _collectors_events_KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_8__.KeyRegionsStringTable[code] ? _collectors_events_KeyRegionsStringTable__WEBPACK_IMPORTED_MODULE_8__.KeyRegionsStringTable[code] : DEFAULT_KEY_REGION_VALUE;
    }
  }, {
    key: "_getComboType",
    value: function _getComboType(e, eventKey) {
      return (e.ctrlKey || e.metaKey) && eventKey !== undefined ? this.comboCodes.indexOf(eventKey) : -1;
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(KeyEventCollectorV2, "configKey", 'isKeyCollector');


/***/ }),

/***/ "./src/main/collectorsV2/collectors/events/MouseEventCollectorV2.js":
/*!**************************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/events/MouseEventCollectorV2.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MouseEventType: function() { return /* binding */ MouseEventType; },
/* harmony export */   "default": function() { return /* binding */ MouseEventCollectorV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../collectors/events/IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var MouseEventType = {
  mousemove: 0,
  mousedown: 1,
  mouseup: 2,
  click: 3,
  dblclick: 4,
  mouseleave: 5,
  mouseenter: 6,
  wheel: 7,
  mouseout: 8,
  mouseover: 9
};
var MouseEventCollectorV2 = /*#__PURE__*/function (_DataCollectorV) {
  function MouseEventCollectorV2(utils, elements, dataQ, maskingService) {
    var _this;
    _classCallCheck(this, MouseEventCollectorV2);
    _this = _callSuper(this, MouseEventCollectorV2);
    _defineProperty(_this, "handleEvent", function (event) {
      // wheel delta is only in the case of mousewheel
      var button = event.which;
      if (event.type === 'mouseup') {
        // remembers the last button so that IE will know which click was clicked.
        _this._lastButton = button;
      } else if (event.type === 'click' && button === 0) {
        // So IE will know which click was clicked.
        button = _this._lastButton;
      }
      var eventType = MouseEventType[event.type];
      if (_this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var wheelDelta = event.deltaY || event.deltaX || event.deltaZ || event.wheelDelta || 0;
      var relativeTs = _this.getTimestampFromEvent(event);
      // we are not using CDUtils.convertToArrayByMap here for optimization reasons

      _this._dataQueue.addToQueue('customer_metadata', ['mouse_events_v2', [null, _this._utils.StorageUtils.getAndUpdateEventSequenceNumber(), _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].dateNow(), eventType, _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_1__.IsTrustedValue[event.isTrusted], event.type === 'mousemove' ? 0 : _this._elements.getElementHashFromEvent(event), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.pageX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.pageY), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.screenX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.screenY), button === null || button === undefined ? -1 : button, Math.round(wheelDelta), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.clientX), _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.clientY), event.detail || 0, event.button === null || event.button === undefined ? -1 : event.button, relativeTs]]);
    });
    _this._utils = utils;
    _this._elements = elements;
    _this._dataQueue = dataQ;
    _this._maskingService = maskingService;
    return _this;
  }
  _inherits(MouseEventCollectorV2, _DataCollectorV);
  return _createClass(MouseEventCollectorV2, [{
    key: "getEvents",
    value: function getEvents() {
      return ['mousemove', 'mousedown', 'mouseup', 'click', 'dblclick'];
    }
  }, {
    key: "_roundCoordinate",
    value: function _roundCoordinate(coordinate) {
      if (coordinate) {
        return Math.round(coordinate);
      }
      return -1;
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(MouseEventCollectorV2, "configKey", 'isMouseCollector');


/***/ }),

/***/ "./src/main/collectorsV2/collectors/events/StorageEventCollectorV2.js":
/*!****************************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/events/StorageEventCollectorV2.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageEventCollectorV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StorageEventType = {
  'storage': 0
};
var StorageEventCollectorV2 = /*#__PURE__*/function (_DataCollectorV) {
  function StorageEventCollectorV2(utils, dataQ, elements, msgBus) {
    var _this;
    _classCallCheck(this, StorageEventCollectorV2);
    _this = _callSuper(this, StorageEventCollectorV2);
    _defineProperty(_this, "handleEvent", function (event) {
      var tabs = false;
      var keys = null;
      var action = null;
      if (event.key === null) {
        keys = null;
      }
      if (typeof event.key === 'string' && event.newValue === null) {
        keys = event.key;
        action = 'delete';
      } else {
        keys = event.key;
        action = 'update';
      }
      var tabList = _this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (tabList && _typeof(tabList[0]) === 'object') {
        tabs = true;
      }
      tabs = tabs ? 1 : 0;
      _this._addToCommunicationQueue(event.type, keys, action, tabs, event);
    });
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    return _this;
  }
  _inherits(StorageEventCollectorV2, _DataCollectorV);
  return _createClass(StorageEventCollectorV2, [{
    key: "getEvents",
    value: function getEvents() {
      return ['storage'];
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, keys, action, tabsopened, e) {
      if (type === StorageEventType.storage) {
        this._msgBus.publish('storageEvent', {
          action: type
        });
      }
      var time = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_1__["default"].dateNow();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQ.addToQueue('storage_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        keys: keys,
        action: action,
        tabsOpened: tabsopened
      }));
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(StorageEventCollectorV2, "configKey", 'isStorageEvents');


/***/ }),

/***/ "./src/main/collectorsV2/collectors/static/ContextPropsFeatureV2.js":
/*!**************************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/static/ContextPropsFeatureV2.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ContextPropsFeatureV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../contract/AgentType */ "./src/main/contract/AgentType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }







var ContextPropsFeatureV2 = /*#__PURE__*/function (_DataCollectorV) {
  function ContextPropsFeatureV2(dataQ, perfMonitor, configurationRepository) {
    var _this;
    _classCallCheck(this, ContextPropsFeatureV2);
    _this = _callSuper(this, ContextPropsFeatureV2);
    _defineProperty(_this, "handleEvent", function (event) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_6__["default"].info('context props event: ', window.document);
      if (self.screen) {
        var xdpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        var ydpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        if (_this._shouldCollectStaticFields()) {
          _this._dataQ.addToQueue('static_fields', ['display', [screen.colorDepth, screen.width, screen.height, screen.availHeight || -1, screen.availWidth || -1, xdpi, ydpi]], false);
        }
      }
      _this.reportPageLoadTime();
    });
    _this._domUtils = _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_4__["default"];
    _this._dataQ = dataQ;
    _this._perfMonitor = perfMonitor;
    _this._configurationRepository = configurationRepository;
    _this._observerCallback = _this._observerCallback.bind(_this);
    _this.calcTime = _this.calcTime.bind(_this);
    _this._getEntriesByType = _this._getEntriesByType.bind(_this);
    _this.callMethod = _this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.useLegacyZeroTimeout) ? _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].asyncCall : _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].asyncTimeoutCall;
    return _this;
  }
  _inherits(ContextPropsFeatureV2, _DataCollectorV);
  return _createClass(ContextPropsFeatureV2, [{
    key: "getEvents",
    value: function getEvents() {
      return [];
    }
  }, {
    key: "_shouldCollectStaticFields",
    value: function _shouldCollectStaticFields() {
      var _this$_configurationR;
      return ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.agentType)) !== _contract_AgentType__WEBPACK_IMPORTED_MODULE_5__.AgentType.SECONDARY;
    }
  }, {
    key: "reportPageLoadTime",
    value: function reportPageLoadTime() {
      if (window.performance && "PerformanceNavigationTiming" in window) {
        var entryType = "navigation";
        // if either PerformanceObserver or entryType are not defined/supported we use a fallback
        if (!("PerformanceObserver" in window) || !this._isEntrySupportedByBrowser(entryType)) {
          this.reportPageLoadTimeFallback();
          return;
        }
        // create PerformanceObserver instance
        var performanceObserver = new PerformanceObserver(this._observerCallback);
        try {
          //as of today, there is no sufficient way to detect if a browser supports the type attribute or not
          //therefore we use the try&catch approach.
          performanceObserver.observe({
            type: entryType,
            buffered: true
          });
        } catch (e) {
          this.reportPageLoadTimeFallback();
        }
      } else {
        this.reportPageLoadTimeFallback();
      }
    }

    //fallback function to calculate page loading time
    //for old browsers we use the deprecated interface- https://developer.mozilla.org/en/docs/Web/API/Navigation_timing_API
  }, {
    key: "reportPageLoadTimeFallback",
    value: function reportPageLoadTimeFallback() {
      var _this2 = this;
      //sometimes the load event triggers before we subscribed to it.
      //this way we ensure calling the asyncCall function in case it has been missed
      if (_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_4__["default"].isWindowDocumentReady(window)) {
        this.callMethod.call(this._getEntriesByType);
        return;
      }
      _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].addEventListener(self, 'load', function () {
        //since a timeout is needed for getting all PerformanceNavigationTiming entries
        //we use the asyncCall
        _this2.callMethod.call(_this2._getEntriesByType);
      });
    }

    //Observer callback function for getting entries
  }, {
    key: "_observerCallback",
    value: function _observerCallback(list, observer) {
      var entries = list.getEntries()[0];
      if (entries.duration) {
        this.calcTime(entries);
        if ("disconnect" in observer) {
          observer.disconnect();
        }
      }
    }

    //checking if the entry type is supported by the useragent
  }, {
    key: "_isEntrySupportedByBrowser",
    value: function _isEntrySupportedByBrowser(entry) {
      //if the supportedEntryTypes is not available feature in browser I skip it and return true
      if (!("supportedEntryTypes" in window.PerformanceObserver)) {
        return true;
      }
      return PerformanceObserver.supportedEntryTypes.includes(entry);
    }

    //get the Performance Navigation API entries
  }, {
    key: "_getEntriesByType",
    value: function _getEntriesByType() {
      if (window.performance.timing) {
        if (window.performance.timing.loadEventEnd && window.performance.timing.navigationStart) {
          var entries = {
            duration: window.performance.timing.loadEventEnd - window.performance.timing.navigationStart
          };
          this.calcTime(entries);
        }
      }
    }

    //entries is an instance of the PerformanceNavigationTiming interface;
    // if not supported it fallback to Navigation Timing API: see class function _getEntriesByType
  }, {
    key: "calcTime",
    value: function calcTime(entries) {
      //when either entries or duration are not captured a warning log will be dispatched
      if (_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].isUndefinedNull(entries)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_6__["default"].warn("Context Props Feature: no entries of navigation timing were captured");
        return;
      }
      if (!_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].isUndefinedNull(entries)) {
        if (_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].isUndefinedNull(entries.duration)) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_6__["default"].warn("Context Props Feature: page duration loading was not calculated");
          return;
        }
      }
      this._perfMonitor.reportMonitor('t.timeTillPageLoad', Math.round(entries.duration));
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(ContextPropsFeatureV2, "configKey", 'isContextPropsFeature');


/***/ }),

/***/ "./src/main/collectorsV2/collectors/static/HeapCollectorV2.js":
/*!********************************************************************!*\
  !*** ./src/main/collectorsV2/collectors/static/HeapCollectorV2.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ HeapCollectorV2; }
/* harmony export */ });
/* harmony import */ var _DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataCollectorV2 */ "./src/main/collectorsV2/collectors/DataCollectorV2.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var HeapCollectorV2 = /*#__PURE__*/function (_DataCollectorV) {
  function HeapCollectorV2(dataQ) {
    var _this;
    _classCallCheck(this, HeapCollectorV2);
    _this = _callSuper(this, HeapCollectorV2);
    _defineProperty(_this, "handleEvent", /*#__PURE__*/function () {
      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {
        var heapData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('HeapCollector - Starting heap data collection');
              try {
                heapData = _this.collectHeapData();
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('HeapCollector - Heap Data collected: ' + JSON.stringify(heapData));
                _this.sendData(heapData);
              } catch (error) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error('HeapCollector - Error during data collection:', error);
              }
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());
    _this._dataQ = dataQ;
    _this._performance = window.performance;
    return _this;
  }
  _inherits(HeapCollectorV2, _DataCollectorV);
  return _createClass(HeapCollectorV2, [{
    key: "updateConfig",
    value: function updateConfig() {}
  }, {
    key: "getEvents",
    value: function getEvents() {
      return [];
    }
  }, {
    key: "sendData",
    value: function sendData(heapData) {
      this._dataQ.addToQueue('static_fields', ['heap', heapData], false);
    }
  }, {
    key: "collectHeapData",
    value: function collectHeapData() {
      var heapData = {
        timestamp: Date.now()
      };
      try {
        // Performance heap memory information
        if (this._performance && this._performance.memory) {
          var _this$_performance$me = this._performance.memory,
            usedJSHeapSize = _this$_performance$me.usedJSHeapSize,
            totalJSHeapSize = _this$_performance$me.totalJSHeapSize,
            jsHeapSizeLimit = _this$_performance$me.jsHeapSizeLimit;
          if (usedJSHeapSize !== undefined) {
            heapData.usedJSHeapSize = usedJSHeapSize;
          }
          if (totalJSHeapSize !== undefined) {
            heapData.totalJSHeapSize = totalJSHeapSize;
          }
          if (jsHeapSizeLimit !== undefined) {
            heapData.jsHeapSizeLimit = jsHeapSizeLimit;
          }
        }
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('HeapCollector - Error collecting heap data:', error);
      }
      return heapData;
    }
  }]);
}(_DataCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"]);
_defineProperty(HeapCollectorV2, "configKey", 'isHeapFeature');


/***/ }),

/***/ "./src/main/collectorsV2/detectors/Detector.js":
/*!*****************************************************!*\
  !*** ./src/main/collectorsV2/detectors/Detector.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Detector; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var Detector = /*#__PURE__*/function () {
  function Detector() {
    _classCallCheck(this, Detector);
  }
  return _createClass(Detector, [{
    key: "detect",
    value: function detect(document, onDetect) {
      // toImplement;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectorsV2/detectors/elements/ElementsDetector.js":
/*!**********************************************************************!*\
  !*** ./src/main/collectorsV2/detectors/elements/ElementsDetector.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ElementsDetector; }
/* harmony export */ });
/* harmony import */ var _Detector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Detector */ "./src/main/collectorsV2/detectors/Detector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var ElementsDetector = /*#__PURE__*/function (_Detector) {
  function ElementsDetector() {
    var _this;
    _classCallCheck(this, ElementsDetector);
    _this = _callSuper(this, ElementsDetector);
    _this._elementsToDetect = [];
    return _this;
  }
  _inherits(ElementsDetector, _Detector);
  return _createClass(ElementsDetector, [{
    key: "detect",
    value: function detect(document, onDetect) {
      var inputSelectors = "input:not([type='color']):not([type='hidden']):not([type='file'])" + ":not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea";
      document.querySelectorAll(inputSelectors).forEach(function (inputElement) {
        onDetect(inputElement);
      });
      var clickSelectors = "input[type='button'], input[type='radio'], input[type='checkbox'], button";
      document.querySelectorAll(clickSelectors).forEach(function (inputElement) {
        onDetect(inputElement);
      });
      var selectSelectors = 'select';
      document.querySelectorAll(selectSelectors).forEach(function (inputElement) {
        onDetect(inputElement);
      });
    }
  }]);
}(_Detector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectorsV2/detectors/iframes/IframesDetector.js":
/*!********************************************************************!*\
  !*** ./src/main/collectorsV2/detectors/iframes/IframesDetector.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IframeDetector; }
/* harmony export */ });
/* harmony import */ var _IframesQueue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./IframesQueue */ "./src/main/collectorsV2/detectors/iframes/IframesQueue.js");
/* harmony import */ var _Detector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Detector */ "./src/main/collectorsV2/detectors/Detector.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var IframeDetector = /*#__PURE__*/function (_Detector) {
  function IframeDetector(configurationRepository) {
    var _this;
    _classCallCheck(this, IframeDetector);
    _this = _callSuper(this, IframeDetector);
    // TODO: refactor this class: split it into IframeDetector and IframeCache
    // TODO: create Detector and Cache classes
    _defineProperty(_this, "_iframesQueue", new _IframesQueue__WEBPACK_IMPORTED_MODULE_0__["default"]());
    _defineProperty(_this, "_allFrames", []);
    _defineProperty(_this, "_iframeRefs", []);
    _defineProperty(_this, "_processedFrames", new WeakSet());
    _defineProperty(_this, "_processDone", false);
    _defineProperty(_this, "_processingStarted", false);
    _defineProperty(_this, "_pendingDocuments", 0);
    _defineProperty(_this, "_resolveDone", null);
    _defineProperty(_this, "_donePromise", null);
    _defineProperty(_this, "_drainingQueue", false);
    _this._enableFramesProcessing = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableFramesProcessing);
    return _this;
  }
  _inherits(IframeDetector, _Detector);
  return _createClass(IframeDetector, [{
    key: "detect",
    value: function detect(document, onDetect) {
      var _this2 = this;
      if (!this._enableFramesProcessing) {
        return;
      }
      if (this._processDone) {
        this._handleProcessedFrames(onDetect);
        return Promise.resolve(this._allFrames);
      }
      if (!this._processingStarted) {
        this._processingStarted = true;
        this._donePromise = new Promise(function (resolve) {
          _this2._resolveDone = resolve;
        });
        this._enqueueDocument(document, 0);
        this._scheduleQueueDrain(onDetect);
      }
      return this._donePromise;
    }
  }, {
    key: "addIframeToCache",
    value: function addIframeToCache(iframeOrDocument) {
      var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var _this$_resolveIframeI = this._resolveIframeInput(iframeOrDocument),
        doc = _this$_resolveIframeI.doc,
        iframeElement = _this$_resolveIframeI.iframeElement;
      if (!doc || this._processedFrames.has(doc)) return;
      this._processedFrames.add(doc);
      if (!this._allFrames.includes(doc)) {
        this._allFrames.push(doc);
      }
      if (iframeElement && !this._iframeRefs.find(function (ref) {
        return ref.iframe === iframeElement;
      })) {
        this._iframeRefs.push({
          iframe: iframeElement,
          depth: depth
        });
      }
    }
  }, {
    key: "removeIframeFromCache",
    value: function removeIframeFromCache(iframeOrDocument) {
      var _this$_resolveIframeI2 = this._resolveIframeInput(iframeOrDocument),
        doc = _this$_resolveIframeI2.doc,
        iframeElement = _this$_resolveIframeI2.iframeElement;
      if (!doc) return;
      this._processedFrames["delete"](doc);
      this._allFrames = this._allFrames.filter(function (frame) {
        return frame !== doc;
      });
      this._iframeRefs = this._iframeRefs.filter(function (_ref) {
        var iframe = _ref.iframe;
        if (iframeElement) {
          return iframe !== iframeElement;
        }
        try {
          var _iframe$contentWindow;
          var iframeDoc = (iframe === null || iframe === void 0 ? void 0 : iframe.contentDocument) || (iframe === null || iframe === void 0 || (_iframe$contentWindow = iframe.contentWindow) === null || _iframe$contentWindow === void 0 ? void 0 : _iframe$contentWindow.document);
          return iframeDoc !== doc;
        } catch (error) {
          return true;
        }
      });
    }
  }, {
    key: "_handleProcessedFrames",
    value: function _handleProcessedFrames(onDetect) {
      var _this3 = this;
      this._allFrames.forEach(function (frame) {
        if (_this3._processedFrames.has(frame)) {
          onDetect(frame);
        }
      });
    }
  }, {
    key: "_enqueueDocument",
    value: function _enqueueDocument(doc, depth) {
      if (!doc || this._processedFrames.has(doc)) return;
      this._pendingDocuments += 1;
      this._iframesQueue.enqueue({
        doc: doc,
        depth: depth
      });
    }
  }, {
    key: "_scheduleQueueDrain",
    value: function _scheduleQueueDrain(onDetect) {
      var _this4 = this;
      if (this._drainingQueue) return;
      this._drainingQueue = true;
      var _drainStep = function drainStep() {
        _this4._processNext(onDetect);
        if (!_this4._iframesQueue.isEmpty()) {
          setTimeout(_drainStep, 0);
        } else {
          _this4._drainingQueue = false;
          _this4._tryFinalize();
        }
      };
      setTimeout(_drainStep, 0);
    }
  }, {
    key: "_processNext",
    value: function _processNext(onDetect) {
      var next = this._iframesQueue.dequeue();
      if (!next) return;
      var doc = next.doc,
        depth = next.depth;
      try {
        this._processDocument(doc, onDetect, depth);
      } catch (error) {
        Log.warn("BioCatch SDK: Could not attach to document at depth ".concat(depth, ":"), error.message);
      } finally {
        this._markDocumentDone();
      }
    }
  }, {
    key: "_processDocument",
    value: function _processDocument(doc, onDetect, depth) {
      var _this5 = this;
      if (this._processedFrames.has(doc)) return;
      if (depth > 0) {
        this._processedFrames.add(doc);
        this._allFrames.push(doc);
        onDetect(doc);
      }
      if (!this._enableFramesProcessing) return;
      var iframes = doc.querySelectorAll('iframe');
      iframes.forEach(function (iframe) {
        _this5._iframeRefs.push({
          iframe: iframe,
          depth: depth
        });
        var processFrame = function processFrame() {
          try {
            var _iframe$contentWindow2;
            var iframeDoc = iframe.contentDocument || ((_iframe$contentWindow2 = iframe.contentWindow) === null || _iframe$contentWindow2 === void 0 ? void 0 : _iframe$contentWindow2.document);
            if (!iframeDoc) {
              Log.warn("BioCatch SDK: Cannot access iframe document at depth ".concat(depth + 1, " - likely cross-origin"));
              return;
            }
            _this5._enqueueDocument(iframeDoc, depth + 1);
            _this5._scheduleQueueDrain(onDetect);
          } catch (error) {
            Log.warn("BioCatch SDK: Could not access iframe at depth ".concat(depth + 1, ":"), error.message);
          }
        };

        // Process immediately if the iframe document is already available.
        processFrame();

        // Re-run when the iframe finishes loading in case the document was not ready.
        iframe.addEventListener('load', function () {
          return processFrame();
        });
      });
    }
  }, {
    key: "_markDocumentDone",
    value: function _markDocumentDone() {
      this._pendingDocuments = Math.max(0, this._pendingDocuments - 1);
      this._tryFinalize();
    }
  }, {
    key: "_tryFinalize",
    value: function _tryFinalize() {
      if (this._pendingDocuments === 0 && this._iframesQueue.isEmpty() && this._processingStarted && !this._processDone) {
        this._processDone = true;
        if (this._resolveDone) {
          this._resolveDone(this._allFrames);
          this._resolveDone = null;
        }
      }
    }
  }, {
    key: "_resolveIframeInput",
    value: function _resolveIframeInput(iframeOrDocument) {
      if (!iframeOrDocument) {
        return {
          doc: null,
          iframeElement: null
        };
      }
      if (iframeOrDocument.tagName === 'IFRAME') {
        try {
          var _iframeOrDocument$con;
          var doc = iframeOrDocument.contentDocument || ((_iframeOrDocument$con = iframeOrDocument.contentWindow) === null || _iframeOrDocument$con === void 0 ? void 0 : _iframeOrDocument$con.document);
          return {
            doc: doc,
            iframeElement: iframeOrDocument
          };
        } catch (error) {
          console.warn('BioCatch SDK: Cannot access iframe while updating cache:', error.message);
          return {
            doc: null,
            iframeElement: iframeOrDocument
          };
        }
      }
      if (iframeOrDocument.nodeType === Node.DOCUMENT_NODE) {
        return {
          doc: iframeOrDocument,
          iframeElement: null
        };
      }
      return {
        doc: null,
        iframeElement: null
      };
    }
  }]);
}(_Detector__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/collectorsV2/detectors/iframes/IframesQueue.js":
/*!*****************************************************************!*\
  !*** ./src/main/collectorsV2/detectors/iframes/IframesQueue.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IframesQueue; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var IframesQueue = /*#__PURE__*/function () {
  function IframesQueue() {
    _classCallCheck(this, IframesQueue);
    this.iframes = [];
  }
  return _createClass(IframesQueue, [{
    key: "enqueue",
    value: function enqueue(iframe) {
      this.iframes.push(iframe);
    }
  }, {
    key: "dequeue",
    value: function dequeue() {
      return this.isEmpty() ? null : this.iframes.shift();
    }
  }, {
    key: "peek",
    value: function peek() {
      if (this.isEmpty()) {
        return "No elements in queue";
      }
      return this.iframes[0];
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this.iframes.length === 0;
    }
  }, {
    key: "size",
    value: function size() {
      return this.iframes.length;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectorsV2/detectors/shadow-doms/ShadowDOMsDetector.js":
/*!***************************************************************************!*\
  !*** ./src/main/collectorsV2/detectors/shadow-doms/ShadowDOMsDetector.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ShadowDOMsDetector; }
/* harmony export */ });
/* harmony import */ var _Detector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Detector */ "./src/main/collectorsV2/detectors/Detector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ShadowDOMsDetector = /*#__PURE__*/function (_Detector) {
  function ShadowDOMsDetector() {
    var _this;
    _classCallCheck(this, ShadowDOMsDetector);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _callSuper(this, ShadowDOMsDetector, [].concat(args));
    _defineProperty(_this, "_rootsQueue", []);
    _defineProperty(_this, "_allShadowRoots", []);
    _defineProperty(_this, "_processedRoots", new WeakSet());
    _defineProperty(_this, "_processDone", false);
    _defineProperty(_this, "_processingStarted", false);
    _defineProperty(_this, "_pendingRoots", 0);
    _defineProperty(_this, "_resolveDone", null);
    _defineProperty(_this, "_donePromise", null);
    _defineProperty(_this, "_drainingQueue", false);
    return _this;
  }
  _inherits(ShadowDOMsDetector, _Detector);
  return _createClass(ShadowDOMsDetector, [{
    key: "detect",
    value: function detect(document, onDetect) {
      var _this2 = this;
      if (this._processDone) {
        this._handleProcessedRoots(onDetect);
        return Promise.resolve(this._allShadowRoots);
      }
      if (!this._processingStarted) {
        this._processingStarted = true;
        this._donePromise = new Promise(function (resolve) {
          _this2._resolveDone = resolve;
        });
        this._enqueueRoot(document, 0);
        this._scheduleQueueDrain(onDetect);
      }
      return this._donePromise;
    }
  }, {
    key: "_handleProcessedRoots",
    value: function _handleProcessedRoots(onDetect) {
      var _this3 = this;
      this._allShadowRoots.forEach(function (root) {
        if (_this3._processedRoots.has(root)) {
          onDetect(root);
        }
      });
    }
  }, {
    key: "_enqueueRoot",
    value: function _enqueueRoot(root, depth) {
      if (!root || this._processedRoots.has(root)) return;
      this._pendingRoots += 1;
      this._rootsQueue.push({
        root: root,
        depth: depth
      });
    }
  }, {
    key: "_scheduleQueueDrain",
    value: function _scheduleQueueDrain(onDetect) {
      var _this4 = this;
      if (this._drainingQueue) return;
      this._drainingQueue = true;
      var _drainStep = function drainStep() {
        _this4._processNext(onDetect);
        if (_this4._rootsQueue.length > 0) {
          setTimeout(_drainStep, 0);
        } else {
          _this4._drainingQueue = false;
          _this4._tryFinalize();
        }
      };
      setTimeout(_drainStep, 0);
    }
  }, {
    key: "_processNext",
    value: function _processNext(onDetect) {
      var next = this._rootsQueue.shift();
      if (!next) return;
      var root = next.root,
        depth = next.depth;
      try {
        this._processRoot(root, onDetect, depth);
      } catch (error) {
        console.warn("BioCatch SDK: Could not process shadow root at depth ".concat(depth, ":"), error.message);
      } finally {
        this._markRootDone();
      }
    }
  }, {
    key: "_processRoot",
    value: function _processRoot(root, onDetect, depth) {
      if (this._processedRoots.has(root)) return;
      if (depth > 0) {
        this._processedRoots.add(root);
        this._allShadowRoots.push(root);
        onDetect(root);
      }

      // Traverse elements inside the current root/document and enqueue open shadow roots.
      var doc = root.ownerDocument || root;
      var walker = doc.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);
      var node = walker.currentNode;
      while (node) {
        var shadowRoot = node.shadowRoot;
        if (shadowRoot && shadowRoot.mode === 'open' && !this._processedRoots.has(shadowRoot)) {
          this._enqueueRoot(shadowRoot, depth + 1);
          this._scheduleQueueDrain(onDetect);
        }
        node = walker.nextNode();
      }
    }
  }, {
    key: "_markRootDone",
    value: function _markRootDone() {
      this._pendingRoots = Math.max(0, this._pendingRoots - 1);
      this._tryFinalize();
    }
  }, {
    key: "_tryFinalize",
    value: function _tryFinalize() {
      if (this._pendingRoots === 0 && this._rootsQueue.length === 0 && this._processingStarted && !this._processDone) {
        this._processDone = true;
        if (this._resolveDone) {
          this._resolveDone(this._allShadowRoots);
          this._resolveDone = null;
        }
      }
    }
  }]);
}(_Detector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/collectorsV2/dto/CustomerMetadataObject.js":
/*!*************************************************************!*\
  !*** ./src/main/collectorsV2/dto/CustomerMetadataObject.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   collectorExperimental: function() { return /* binding */ collectorExperimental; },
/* harmony export */   dataToObject: function() { return /* binding */ dataToObject; }
/* harmony export */ });
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
var dataToObject = function dataToObject(data, someNumberWtf) {
  var d = {};
  d[data[0]] = data[1];
  var dataJson = JSON.parse(JSON.stringify(d));
  var dataScalars = _jsonToScalars(dataJson);
  // The Object Scheme the server is expecting for customer_metadata
  return {
    some_number_wtf: someNumberWtf,
    data: dataScalars
  };
};
var collectorExperimental = function collectorExperimental(eventName) {
  return eventName === 'key_events_v2' || eventName === 'mouse_events_v2' || eventName === 'elements_events_v2' || eventName === 'elements_v2';
};
var _jsonToScalars = function _jsonToScalars(json) {
  return Object.fromEntries(Object.entries(json).map(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
      k = _ref2[0],
      v = _ref2[1];
    return [k, v == null ? null : JSON.stringify(v)];
  }));
};

/***/ }),

/***/ "./src/main/collectorsV2/factories/DataCollectorsFactory.js":
/*!******************************************************************!*\
  !*** ./src/main/collectorsV2/factories/DataCollectorsFactory.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DataCollectorsFactory; }
/* harmony export */ });
/* harmony import */ var _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../collectors/events/ElementEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/ElementEventCollectorV2.js");
/* harmony import */ var _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../collectors/events/MouseEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/MouseEventCollectorV2.js");
/* harmony import */ var _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../collectors/events/KeyEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/KeyEventCollectorV2.js");
/* harmony import */ var _collectors_static_ContextPropsFeatureV2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../collectors/static/ContextPropsFeatureV2 */ "./src/main/collectorsV2/collectors/static/ContextPropsFeatureV2.js");
/* harmony import */ var _collectors_static_HeapCollectorV2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../collectors/static/HeapCollectorV2 */ "./src/main/collectorsV2/collectors/static/HeapCollectorV2.js");
/* harmony import */ var _collectors_events_StorageEventCollectorV2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../collectors/events/StorageEventCollectorV2 */ "./src/main/collectorsV2/collectors/events/StorageEventCollectorV2.js");
/* harmony import */ var _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }







var DataCollectorsFactory = /*#__PURE__*/function () {
  function DataCollectorsFactory() {
    _classCallCheck(this, DataCollectorsFactory);
  }
  return _createClass(DataCollectorsFactory, [{
    key: "create",
    value: function create(collector) {
      if (collector === 'ElementEventCollectorV2') {
        return new _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._msgBus, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._utils, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._elements, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._maskingService, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._configurationRepository);
      } else if (collector === 'MouseEventCollectorV2') {
        return new _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._utils, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._elements, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._maskingService);
      } else if (collector === 'KeyEventCollectorV2') {
        return new _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._configurationRepository, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._utils, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._elements, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._msgBus, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._sameCharService, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._maskingService);
      } else if (collector === 'ContextPropsFeatureV2') {
        return new _collectors_static_ContextPropsFeatureV2__WEBPACK_IMPORTED_MODULE_3__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._perfMonitor, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._configurationRepository);
      } else if (collector === 'HeapCollectorV2') {
        return new _collectors_static_HeapCollectorV2__WEBPACK_IMPORTED_MODULE_4__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue);
      } else if (collector === 'StorageEventCollectorV2') {
        return new _collectors_events_StorageEventCollectorV2__WEBPACK_IMPORTED_MODULE_5__["default"](_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._utils, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._devDebugDataQueue, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._elements, _injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_6__["default"]._msgBus);
      }
    }
  }, {
    key: "configKey",
    value: function configKey(collector) {
      switch (collector) {
        case 'ElementEventCollectorV2':
          return _collectors_events_ElementEventCollectorV2__WEBPACK_IMPORTED_MODULE_0__["default"].configKey;
        case 'MouseEventCollectorV2':
          return _collectors_events_MouseEventCollectorV2__WEBPACK_IMPORTED_MODULE_1__["default"].configKey;
        case 'KeyEventCollectorV2':
          return _collectors_events_KeyEventCollectorV2__WEBPACK_IMPORTED_MODULE_2__["default"].configKey;
        case 'ContextPropsFeatureV2':
          return _collectors_static_ContextPropsFeatureV2__WEBPACK_IMPORTED_MODULE_3__["default"].configKey;
        case 'HeapCollectorV2':
          return _collectors_static_HeapCollectorV2__WEBPACK_IMPORTED_MODULE_4__["default"].configKey;
        case 'StorageEventCollectorV2':
          return _collectors_events_StorageEventCollectorV2__WEBPACK_IMPORTED_MODULE_5__["default"].configKey;
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectorsV2/injectors/DependenciesContainer.js":
/*!******************************************************************!*\
  !*** ./src/main/collectorsV2/injectors/DependenciesContainer.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var instance;
var DependenciesContainer = /*#__PURE__*/function () {
  function DependenciesContainer() {
    _classCallCheck(this, DependenciesContainer);
    if (instance) {
      throw new Error("you can only create one instance!");
    }
    instance = this;
  }
  return _createClass(DependenciesContainer, [{
    key: "insert",
    value: function insert(allFeatures, configurationRepository, utils, elements, dataQueue, devDebugDataQ, configurations, sessionService, muidService, muidEncryptedService, perfMonitor, sensorDataQ, msgBus, cidCache, sameCharService, maskingService, categoryService, wasmModuleLoader, contextMgr, fontTimingService) {
      if (Object.isFrozen(this)) {
        // Container already initialized; ignore subsequent inserts (e.g., test reruns)
        return;
      }
      this._features = allFeatures;
      this._configurationRepository = configurationRepository; // Don't remove! Its used by the features
      this._utils = utils;
      this._elements = elements; // TODO: consider to change name to elementUtils
      this._dataQ = dataQueue;
      this._devDebugDataQueue = devDebugDataQ;
      this._sessionService = sessionService;
      this._muidService = muidService;
      this._muidEncryptedService = muidEncryptedService;
      this._perfMonitor = perfMonitor;
      this._sensorDataQ = sensorDataQ;
      this._msgBus = msgBus;
      this._cidCache = cidCache;
      this._sameCharService = sameCharService;
      this._maskingService = maskingService;
      this._categoryService = categoryService;
      this._configurations = configurations;
      this._wasmModuleLoader = wasmModuleLoader;
      this._contextMgr = contextMgr;
      this._fontTimingService = fontTimingService;
      Object.freeze(this);
    }
  }]);
}();
var DependenciesSingleton = new DependenciesContainer();
/* harmony default export */ __webpack_exports__["default"] = (DependenciesSingleton);

/***/ }),

/***/ "./src/main/collectorsV2/observers/MutationsEmitterV2.js":
/*!***************************************************************!*\
  !*** ./src/main/collectorsV2/observers/MutationsEmitterV2.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MutationsEmitterV2; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// TODO: remove observers?

var MutationsEmitterV2 = /*#__PURE__*/function () {
  function MutationsEmitterV2() {
    _classCallCheck(this, MutationsEmitterV2);
    _defineProperty(this, "_documentObservers", new WeakMap());
  }
  return _createClass(MutationsEmitterV2, [{
    key: "observe",
    value: function observe(window, onMutation) {
      var doc = window.document;
      if (this._documentObservers.has(doc)) return;
      var nextObserver = new window.MutationObserver(function (mutations) {
        mutations.forEach(function (mutationRecord) {
          mutationRecord.addedNodes.forEach(function (node) {
            onMutation({
              type: 'added',
              node: node
            });
          });
          mutationRecord.removedNodes.forEach(function (node) {
            onMutation({
              type: 'removed',
              node: node
            });
          });
        });
      });
      nextObserver.observe(doc, {
        childList: true,
        subtree: true
      });
      this._documentObservers.set(doc, {
        instance: nextObserver
      });
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Observing document:', doc.URL);
    }
  }, {
    key: "observeElement",
    value: function observeElement(element, onMutation) {
      if (this._documentObservers.has(element)) return;
      var nextObserver = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutationRecord) {
          mutationRecord.addedNodes.forEach(function (node) {
            onMutation({
              type: 'added',
              node: node
            });
          });
          mutationRecord.removedNodes.forEach(function (node) {
            onMutation({
              type: 'removed',
              node: node
            });
          });
        });
      });
      nextObserver.observe(element, {
        childList: true,
        subtree: true
      });
      this._documentObservers.set(element, {
        instance: nextObserver
      });
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Observing document:', element);
    }
  }, {
    key: "unobserve",
    value: function unobserve(target) {
      var record = this._documentObservers.get(target);
      if (!record) return;
      try {
        record.instance.disconnect();
      } catch (e) {
        // ignore
      }
      this._documentObservers["delete"](target);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Stopped observing:', target);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/collectorsV2/states/CollectorsState.js":
/*!*********************************************************!*\
  !*** ./src/main/collectorsV2/states/CollectorsState.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CollectorsState; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var CollectorsState = /*#__PURE__*/function () {
  function CollectorsState() {
    _classCallCheck(this, CollectorsState);
    _defineProperty(this, "_runningCollectorsPerDoc", new Map());
  }
  return _createClass(CollectorsState, [{
    key: "addCollector",
    value: function addCollector(doc, collectorName, collector) {
      var runningCollectors = this._runningCollectorsPerDoc.get(doc) || new Map();
      runningCollectors.set(collectorName, collector);
      this._runningCollectorsPerDoc.set(doc, runningCollectors);
    }
  }, {
    key: "forEachDoc",
    value: function forEachDoc(handle) {
      this._runningCollectorsPerDoc.forEach(function (collectors, doc) {
        handle(doc);
      });
    }
  }, {
    key: "forEachSavedCollector",
    value: function forEachSavedCollector(callback) {
      this._runningCollectorsPerDoc.forEach(function (collectors, doc) {
        collectors.forEach(function (collectorInstance, name) {
          callback(doc, name, collectorInstance);
        });
      });
    }

    // @Throws Exception
  }, {
    key: "getCollectorByName",
    value: function getCollectorByName(doc, name) {
      var collectors = this._runningCollectorsPerDoc.get(doc);
      if (collectors && collectors.has(name)) {
        return collectors.get(name);
      }
      throw new Error("Doc: ".concat(doc.location, ", didnt have collector named: \"").concat(name, "\""));
    }
  }, {
    key: "removeCollector",
    value: function removeCollector(collectorName) {
      var _this = this;
      this._runningCollectorsPerDoc.forEach(function (collectors, doc) {
        if (collectors.has(collectorName)) {
          collectors["delete"](collectorName);
          if (collectors.size === 0) {
            _this._runningCollectorsPerDoc["delete"](doc);
          }
        }
      });
    }
  }, {
    key: "collectorExistsInAnyDoc",
    value: function collectorExistsInAnyDoc(collectorName) {
      var exists = false;
      this._runningCollectorsPerDoc.forEach(function (collectors, doc) {
        if (collectors.has(collectorName)) {
          //Implement upon found
          exists = true;
        }
      });
      return exists;
    }
  }, {
    key: "removeCollectorForDoc",
    value: function removeCollectorForDoc(doc, collectorName) {
      var collectors = this._runningCollectorsPerDoc.get(doc);
      if (!collectors) return;
      if (collectors.has(collectorName)) {
        collectors["delete"](collectorName);
        if (collectors.size === 0) {
          this._runningCollectorsPerDoc["delete"](doc);
        } else {
          this._runningCollectorsPerDoc.set(doc, collectors);
        }
      }
    }
  }, {
    key: "forEachCollectorNameInDoc",
    value: function forEachCollectorNameInDoc(doc, callback) {
      var collectors = this._runningCollectorsPerDoc.get(doc);
      if (!collectors) return;
      collectors.forEach(function (collectorInstance, name) {
        callback(name);
      });
    }
  }, {
    key: "removeDoc",
    value: function removeDoc(doc) {
      this._runningCollectorsPerDoc["delete"](doc);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/common/polyfills/MapPolyfill.js":
/*!**************************************************!*\
  !*** ./src/main/common/polyfills/MapPolyfill.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyPolyfill: function() { return /* binding */ applyPolyfill; },
/* harmony export */   "default": function() { return /* binding */ apply; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function applyPolyfill(context) {
  if (context.WeakMap) {
    return;
  }
  var hasOwnProp = Object.prototype.hasOwnProperty;
  var setProp = function setProp(obj, propName, propValue) {
    if (Object.defineProperty) {
      Object.defineProperty(obj, propName, {
        configurable: true,
        writable: true,
        value: propValue
      });
    } else {
      obj[propName] = propValue;
    }
  };
  function isObj(x) {
    return Object(x) === x;
  }
  context.WeakMap = function () {
    function validateInstance(x, methodName) {
      if (!isObj(x) || !hasOwnProp.call(x, '_id')) {
        throw new TypeError(methodName + ' method called on incompatible receiver ' + _typeof(x));
      }
    }
    function randomNum() {
      return Math.random().toString().substring(2);
    }
    function generateId(prefix) {
      return prefix + '_' + randomNum() + '.' + randomNum();
    }

    // ECMA-262 23.3 WeakMap Objects
    function BioCatchWeakMap() {
      if (this === void 0) {
        throw new TypeError("Constructor WeakMap requires 'new'");
      }
      setProp(this, '_id', generateId('_WeakMap'));

      // ECMA-262 23.3.1.1 WeakMap([iterable])
      if (arguments.length > 0) {
        // Currently, WeakMap `iterable` argument is not supported
        throw new TypeError('WeakMap iterable is not supported');
      }
    }

    // ECMA-262 23.3.3.2 WeakMap.prototype.delete(key)
    setProp(BioCatchWeakMap.prototype, 'delete', function (key) {
      validateInstance(this, 'delete');
      if (!isObj(key)) {
        return false;
      }
      var mapEntry = key[this._id];
      if (mapEntry && mapEntry[0] === key) {
        delete key[this._id];
        return true;
      }
      return false;
    });

    // ECMA-262 23.3.3.3 WeakMap.prototype.get(key)
    setProp(BioCatchWeakMap.prototype, 'get', function (key) {
      validateInstance(this, 'get');
      if (!isObj(key)) {
        return void 0;
      }
      var mapEntry = key[this._id];
      if (mapEntry && mapEntry[0] === key) {
        return mapEntry[1];
      }
      return void 0;
    });

    // ECMA-262 23.3.3.4 WeakMap.prototype.has(key)
    setProp(BioCatchWeakMap.prototype, 'has', function (key) {
      validateInstance(this, 'has');
      if (!isObj(key)) {
        return false;
      }
      var mapEntry = key[this._id];
      if (mapEntry && mapEntry[0] === key) {
        return true;
      }
      return false;
    });

    // ECMA-262 23.3.3.5 WeakMap.prototype.set(key, value)
    setProp(BioCatchWeakMap.prototype, 'set', function (key, value) {
      validateInstance(this, 'set');
      if (!isObj(key)) {
        throw new TypeError('Invalid value used as weak map key');
      }
      var mapEntry = key[this._id];
      if (mapEntry && mapEntry[0] === key) {
        mapEntry[1] = value;
        return this;
      }
      setProp(key, this._id, [key, value]);
      return this;
    });
    setProp(BioCatchWeakMap, '_polyfill', true);
    return BioCatchWeakMap;
  }();
}
function apply(self) {
  return applyPolyfill(self);
}

/***/ }),

/***/ "./src/main/common/polyfills/PerformancePolyfill.js":
/*!**********************************************************!*\
  !*** ./src/main/common/polyfills/PerformancePolyfill.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ apply; }
/* harmony export */ });
/* eslint-disable */

/**
 * User Timing polyfill (http://www.w3.org/TR/user-timing/)
 * @author RubaXa <trash@rubaxa.org>
 */
function apply(scope) {
  var startOffset = Date.now ? Date.now() : +new Date(),
    performance = scope.performance || {},
    _entries = [],
    _marksIndex = {},
    _filterEntries = function _filterEntries(key, value) {
      var i = 0,
        n = _entries.length,
        result = [];
      for (; i < n; i++) {
        if (_entries[i][key] == value) {
          result.push(_entries[i]);
        }
      }
      return result;
    },
    _clearEntries = function _clearEntries(type, name) {
      var i = _entries.length,
        entry;
      while (i--) {
        entry = _entries[i];
        if (entry.entryType == type && (name === void 0 || entry.name == name)) {
          _entries.splice(i, 1);
        }
      }
    };
  if (!performance.now) {
    performance.now = performance.webkitNow || performance.mozNow || performance.msNow || function () {
      return (Date.now ? Date.now() : +new Date()) - startOffset;
    };
  }
  if (!performance.mark) {
    performance.mark = performance.webkitMark || function (name) {
      var mark = {
        name: name,
        entryType: 'mark',
        startTime: performance.now(),
        duration: 0
      };
      _entries.push(mark);
      _marksIndex[name] = mark;
    };
  }
  if (!performance.measure) {
    performance.measure = performance.webkitMeasure || function (name, startMark, endMark) {
      var startTime;
      var endTime;
      if (endMark !== undefined && _marksIndex[endMark] === undefined) {
        throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '" + endMark + "' does not exist.");
      }
      if (startMark !== undefined && _marksIndex[startMark] === undefined) {
        throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '" + startMark + "' does not exist.");
      }
      if (_marksIndex[startMark]) {
        startTime = _marksIndex[startMark].startTime;
      } else {
        startTime = 0;
      }
      if (_marksIndex[endMark]) {
        endTime = _marksIndex[endMark].startTime;
      } else {
        endTime = performance.now();
      }
      _entries.push({
        name: name,
        entryType: 'measure',
        startTime: startTime,
        duration: endTime - startTime
      });
    };
  }
  if (!performance.getEntriesByType) {
    performance.getEntriesByType = performance.webkitGetEntriesByType || function (type) {
      return _filterEntries('entryType', type);
    };
  }
  if (!performance.getEntriesByName) {
    performance.getEntriesByName = performance.webkitGetEntriesByName || function (name) {
      return _filterEntries('name', name);
    };
  }
  if (!performance.clearMarks) {
    performance.clearMarks = performance.webkitClearMarks || function (name) {
      _clearEntries('mark', name);
    };
  }
  if (!performance.clearMeasures) {
    performance.clearMeasures = performance.webkitClearMeasures || function (name) {
      _clearEntries('measure', name);
    };
  }

  // exports
  scope.performance = performance;
  if (typeof define === 'function' && (__webpack_require__.amdO || 0)) {
    define('performance', [], function () {
      return performance;
    });
  }
}

/* eslint-enable */

/***/ }),

/***/ "./src/main/common/polyfills/Polyfills.js":
/*!************************************************!*\
  !*** ./src/main/common/polyfills/Polyfills.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ apply; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
/* eslint-disable */
function apply() {
  if (!Object.getOwnPropertyNames) {
    Object.getOwnPropertyNames = function (obj) {
      var arr = [];
      for (var k in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, k)) arr.push(k);
      }
      return arr;
    };
  }
  // ES 15.2.3.6 Object.defineProperty ( O, P, Attributes )
  // Partial support for most common case - getters, setters, and values
  if (!Object.defineProperty || !function () {
    try {
      Object.defineProperty({}, 'x', {});
      return true;
    } catch (e) {
      return false;
    }
  }()) {
    var orig = Object.defineProperty;
    Object.defineProperty = function (o, prop, desc) {
      // In IE8 try built-in implementation for defining properties on DOM prototypes.
      if (orig) {
        try {
          return orig(o, prop, desc);
        } catch (e) {}
      }
      if (o !== Object(o)) {
        throw TypeError("Object.defineProperty called on non-object");
      }
      if (Object.prototype.__defineGetter__ && 'get' in desc) {
        Object.prototype.__defineGetter__.call(o, prop, desc.get);
      }
      if (Object.prototype.__defineSetter__ && 'set' in desc) {
        Object.prototype.__defineSetter__.call(o, prop, desc.set);
      }
      if ('value' in desc) {
        o[prop] = desc.value;
      }
      return o;
    };
  }

  // ES 15.2.3.7 Object.defineProperties ( O, Properties )
  if (typeof Object.defineProperties !== "function") {
    Object.defineProperties = function (o, properties) {
      if (o !== Object(o)) {
        throw TypeError("Object.defineProperties called on non-object");
      }
      var name;
      for (name in properties) {
        if (Object.prototype.hasOwnProperty.call(properties, name)) {
          Object.defineProperty(o, name, properties[name]);
        }
      }
      return o;
    };
  }

  // ES5 15.2.3.5 Object.create ( O [, Properties] )
  if (typeof Object.create !== "function") {
    Object.create = function (prototype, properties) {
      if (_typeof(prototype) !== "object") {
        throw TypeError();
      }
      function Ctor() {}
      Ctor.prototype = prototype;
      var o = new Ctor();
      if (prototype) {
        o.constructor = Ctor;
      }
      if (properties !== undefined) {
        if (properties !== Object(properties)) {
          throw TypeError();
        }
        Object.defineProperties(o, properties);
      }
      return o;
    };
  }

  // ES5 15.2.3.14 Object.keys ( O )
  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys
  if (!Object.keys) {
    Object.keys = function (o) {
      if (o !== Object(o)) {
        throw TypeError('Object.keys called on non-object');
      }
      var ret = [],
        p;
      for (p in o) {
        if (Object.prototype.hasOwnProperty.call(o, p)) {
          ret.push(p);
        }
      }
      return ret;
    };
  }

  // Production steps of ECMA-262, Edition 5, 15.4.4.18
  // Reference: http://es5.github.io/#x15.4.4.18
  // from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach
  if (!Array.prototype.forEach) {
    Array.prototype.forEach = function (callback, thisArg) {
      var T, k;
      if (this == null) {
        throw new TypeError(' this is null or not defined');
      }

      // 1. Let O be the result of calling toObject() passing the
      // |this| value as the argument.
      var O = Object(this);

      // 2. Let lenValue be the result of calling the Get() internal
      // method of O with the argument "length".
      // 3. Let len be toUint32(lenValue).
      var len = O.length >>> 0;

      // 4. If isCallable(callback) is false, throw a TypeError exception.
      // See: http://es5.github.com/#x9.11
      if (typeof callback !== "function") {
        throw new TypeError(callback + ' is not a function');
      }

      // 5. If thisArg was supplied, let T be thisArg; else let
      // T be undefined.
      if (arguments.length > 1) {
        T = thisArg;
      }

      // 6. Let k be 0
      k = 0;

      // 7. Repeat, while k < len
      while (k < len) {
        var kValue;

        // a. Let Pk be ToString(k).
        //    This is implicit for LHS operands of the in operator
        // b. Let kPresent be the result of calling the HasProperty
        //    internal method of O with argument Pk.
        //    This step can be combined with c
        // c. If kPresent is true, then
        if (k in O) {
          // i. Let kValue be the result of calling the Get internal
          // method of O with argument Pk.
          kValue = O[k];

          // ii. Call the Call internal method of callback with T as
          // the this value and argument list containing kValue, k, and O.
          callback.call(T, kValue, k, O);
        }
        // d. Increase k by 1.
        k++;
      }
      // 8. return undefined
    };
  }
  if (!Array.isArray) {
    Array.isArray = function (obj) {
      return Object.prototype.toString.call(obj) === "[object Array]";
    };
  }
  // ES5 15.3.4.5 Function.prototype.bind ( thisArg [, arg1 [, arg2, ... ]] )
  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (o) {
      if (typeof this !== 'function') {
        throw TypeError("Bind must be called on a function");
      }
      var slice = [].slice,
        args = slice.call(arguments, 1),
        self = this,
        bound = function bound() {
          return self.apply(this.prototype && this instanceof nop ? this : o, args.concat(slice.call(arguments)));
        };
      function nop() {}
      nop.prototype = self.prototype;
      bound.prototype = new nop();
      return bound;
    };
  }

  // if (!Date.now) {
  //     Date.now = function now() {
  //         return new Date().getTime();
  //     };
  // }
  if (typeof String.prototype.trim !== 'function') {
    String.prototype.trim = function () {
      return this.replace(/^\s+|\s+$/g, '');
    };
  }

  // Production steps of ECMA-262, Edition 6, 22.1.2.1
  if (!Array.from) {
    Array.from = function () {
      var toStr = Object.prototype.toString;
      var isCallable = function isCallable(fn) {
        return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
      };
      var toInteger = function toInteger(value) {
        var number = Number(value);
        if (isNaN(number)) {
          return 0;
        }
        if (number === 0 || !isFinite(number)) {
          return number;
        }
        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
      };
      var maxSafeInteger = Math.pow(2, 53) - 1;
      var toLength = function toLength(value) {
        var len = toInteger(value);
        return Math.min(Math.max(len, 0), maxSafeInteger);
      };

      // The length property of the from method is 1.
      return function from(arrayLike /*, mapFn, thisArg */) {
        // 1. Let C be the this value.
        var C = this;

        // 2. Let items be ToObject(arrayLike).
        var items = Object(arrayLike);

        // 3. ReturnIfAbrupt(items).
        if (arrayLike == null) {
          throw new TypeError('Array.from requires an array-like object - not null or undefined');
        }

        // 4. If mapfn is undefined, then let mapping be false.
        var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
        var T;
        if (typeof mapFn !== 'undefined') {
          // 5. else
          // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.
          if (!isCallable(mapFn)) {
            throw new TypeError('Array.from: when provided, the second argument must be a function');
          }

          // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.
          if (arguments.length > 2) {
            T = arguments[2];
          }
        }

        // 10. Let lenValue be Get(items, "length").
        // 11. Let len be ToLength(lenValue).
        var len = toLength(items.length);

        // 13. If IsConstructor(C) is true, then
        // 13. a. Let A be the result of calling the [[Construct]] internal method
        // of C with an argument list containing the single item len.
        // 14. a. Else, Let A be ArrayCreate(len).
        var A = isCallable(C) ? Object(new C(len)) : new Array(len);

        // 16. Let k be 0.
        var k = 0;
        // 17. Repeat, while k < len (also steps a - h)
        var kValue;
        while (k < len) {
          kValue = items[k];
          if (mapFn) {
            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
          } else {
            A[k] = kValue;
          }
          k += 1;
        }
        // 18. Let putStatus be Put(A, "length", len, true).
        A.length = len;
        // 20. Return A.
        return A;
      };
    }();
  }

  // https://tc39.github.io/ecma262/#sec-array.prototype.find
  if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, 'find', {
      value: function value(predicate) {
        // 1. Let O be ? ToObject(this value).
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }
        var o = Object(this);

        // 2. Let len be ? ToLength(? Get(O, "length")).
        var len = o.length >>> 0;

        // 3. If IsCallable(predicate) is false, throw a TypeError exception.
        if (typeof predicate !== 'function') {
          throw new TypeError('predicate must be a function');
        }

        // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
        var thisArg = arguments[1];

        // 5. Let k be 0.
        var k = 0;

        // 6. Repeat, while k < len
        while (k < len) {
          // a. Let Pk be ! ToString(k).
          // b. Let kValue be ? Get(O, Pk).
          // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).
          // d. If testResult is true, return kValue.
          var kValue = o[k];
          if (predicate.call(thisArg, kValue, k, o)) {
            return kValue;
          }
          // e. Increase k by 1.
          k++;
        }

        // 7. Return undefined.
        return undefined;
      },
      configurable: true,
      writable: true
    });
  }

  // https://tc39.github.io/ecma262/#sec-array.prototype.includes
  if (!Array.prototype.includes) {
    Object.defineProperty(Array.prototype, 'includes', {
      value: function value(searchElement, fromIndex) {
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }

        // 1. Let O be ? ToObject(this value).
        var o = Object(this);

        // 2. Let len be ? ToLength(? Get(O, "length")).
        var len = o.length >>> 0;

        // 3. If len is 0, return false.
        if (len === 0) {
          return false;
        }

        // 4. Let n be ? ToInteger(fromIndex).
        //    (If fromIndex is undefined, this step produces the value 0.)
        var n = fromIndex | 0;

        // 5. If n  0, then
        //  a. Let k be n.
        // 6. Else n < 0,
        //  a. Let k be len + n.
        //  b. If k < 0, let k be 0.
        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);
        function sameValueZero(x, y) {
          return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);
        }

        // 7. Repeat, while k < len
        while (k < len) {
          // a. Let elementK be the result of ? Get(O, ! ToString(k)).
          // b. If SameValueZero(searchElement, elementK) is true, return true.
          if (sameValueZero(o[k], searchElement)) {
            return true;
          }
          // c. Increase k by 1.
          k++;
        }

        // 8. Return false
        return false;
      },
      configurable: true,
      writable: true
    });
  }
  if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (s) {
      var matches = (this.document || this.ownerDocument).querySelectorAll(s),
        i = matches.length;
      while (--i >= 0 && matches.item(i) !== this) {}
      return i > -1;
    };
  }
  if (typeof Object.assign != 'function') {
    // Must be writable: true, enumerable: false, configurable: true
    Object.defineProperty(Object, "assign", {
      value: function assign(target, varArgs) {
        // .length of function is 2
        'use strict';

        if (target == null) {
          // TypeError if undefined or null
          throw new TypeError('Cannot convert undefined or null to object');
        }
        var to = Object(target);
        for (var index = 1; index < arguments.length; index++) {
          var nextSource = arguments[index];
          if (nextSource != null) {
            // Skip over if undefined or null
            for (var nextKey in nextSource) {
              // Avoid bugs when hasOwnProperty is shadowed
              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                to[nextKey] = nextSource[nextKey];
              }
            }
          }
        }
        return to;
      },
      writable: true,
      configurable: true
    });
  }
  if (!String.prototype.startsWith) {
    String.prototype.startsWith = function (search, pos) {
      return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;
    };
  }
  if (!String.prototype.includes) {
    String.prototype.includes = function (search, start) {
      'use strict';

      if (search instanceof RegExp) {
        throw TypeError('first argument must not be a RegExp');
      }
      if (start === undefined) {
        start = 0;
      }
      return this.indexOf(search, start) !== -1;
    };
  }
  self.MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
}
/* eslint-enable */

/***/ }),

/***/ "./src/main/common/polyfills/PolyfillsApplier.js":
/*!*******************************************************!*\
  !*** ./src/main/common/polyfills/PolyfillsApplier.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ apply; }
/* harmony export */ });
/* harmony import */ var _PerformancePolyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PerformancePolyfill */ "./src/main/common/polyfills/PerformancePolyfill.js");
/* harmony import */ var _Polyfills__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Polyfills */ "./src/main/common/polyfills/Polyfills.js");
/* harmony import */ var _MapPolyfill__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MapPolyfill */ "./src/main/common/polyfills/MapPolyfill.js");



function apply() {
  (0,_PerformancePolyfill__WEBPACK_IMPORTED_MODULE_0__["default"])(self);
  (0,_Polyfills__WEBPACK_IMPORTED_MODULE_1__["default"])();
  (0,_MapPolyfill__WEBPACK_IMPORTED_MODULE_2__["default"])(typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : this);
}

/***/ }),

/***/ "./src/main/const/communication.js":
/*!*****************************************!*\
  !*** ./src/main/const/communication.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   POST: function() { return /* binding */ POST; },
/* harmony export */   bioCatchPreservedPaths: function() { return /* binding */ bioCatchPreservedPaths; },
/* harmony export */   minifiedUrlV3Path: function() { return /* binding */ minifiedUrlV3Path; },
/* harmony export */   minifiedUrlV4Path: function() { return /* binding */ minifiedUrlV4Path; },
/* harmony export */   serverProtocolV3: function() { return /* binding */ serverProtocolV3; },
/* harmony export */   serverProtocolV4: function() { return /* binding */ serverProtocolV4; },
/* harmony export */   wupUrlV3Path: function() { return /* binding */ wupUrlV3Path; },
/* harmony export */   wupUrlV4Path: function() { return /* binding */ wupUrlV4Path; }
/* harmony export */ });
// wup url constants
var wupUrlV4Path = 'api/v4/wup';
var wupUrlV3Path = 'client/v3.1/web/wup';
var minifiedUrlV3Path = 'v3.1';
var minifiedUrlV4Path = 'v4';
var serverProtocolV3 = 3;
var serverProtocolV4 = 4;

// server request methods constants
var POST = 'POST';

/**
 * Background:
 *
 * To support dynamic WUP URL modificationssuch as enabling the `enableMinifiedWupUri` featurewhile maintaining backward compatibility,
 * classes like `ServerUrlResolver` and `ServerUrlCache` decompose the configured `cdApi` or manual-start URL into three parts:
 *   - baseUrl
 *   - protocolType
 *   - cid
 *
 * These parts are later reassembled using classes like `WupServerClient` and `WupUrlBuilder` based on current configuration.
 *
 * For example:
 *   Given the configured URL:
 *     https://wup-dtrackers.bc2.customers.biocatch.com/client/v3.1/web/wup?cid=dtrackers
 *
 *   It is decomposed as:
 *     - baseUrl: https://wup-dtrackers.bc2.customers.biocatch.com
 *     - protocolType: V3
 *     - cid: dtrackers
 *
 * This constant defines which known WUP path segments should be **excluded** from the `baseUrl`.
 * It ensures that only the protocol-specific suffix (e.g., `/client/.../wup` or `/api/v4/wup`) is stripped
 * while preserving any **custom path prefixes** that are part of a proxy setup.
 *
 * Example of a proxy setup (path should not be stripped):
 *   https://empresarial.banamex.com/clvntw/wup?cid=calvintest
 */
var bioCatchPreservedPaths = [wupUrlV4Path, wupUrlV3Path, 'wup'];

/***/ }),

/***/ "./src/main/contract/APIConfigurationKey.js":
/*!**************************************************!*\
  !*** ./src/main/contract/APIConfigurationKey.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   APIConfigurationKey: function() { return /* binding */ APIConfigurationKey; }
/* harmony export */ });
var APIConfigurationKey = {
  wupServerURL: 'wupServerURL',
  recoveryServerURL: 'recoveryServerURL',
  logServerURL: 'logServerURL',
  enableMinifiedLogUri: 'enableMinifiedLogUri',
  enableFramesProcessing: 'enableFramesProcessing',
  enableCustomElementsProcessing: 'enableCustomElementsProcessing',
  enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
  maskElementsAttributes: 'maskElementsAttributes',
  serverURL: 'serverURL',
  customerID: 'customerID',
  useUrlWorker: 'useUrlWorker',
  workerUrl: 'workerUrl',
  clientSettings: 'clientSettings',
  collectionSettings: 'collectionSettings',
  elementSettings: 'elementSettings',
  enableCustomElementDetector: 'enableCustomElementDetector',
  attributeSettings: 'attributeSettings',
  isWupServerURLProxy: 'isWupServerURLProxy',
  enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
  inputElementSettings: 'inputElementSettings',
  customInputElementSettings: 'customInputElementSettings',
  agentType: 'agentType',
  mode: 'mode',
  collectionMode: 'collectionMode',
  enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
  mutationMaxChunkSize: 'mutationMaxChunkSize',
  mutationChunkDelayMs: 'mutationChunkDelayMs',
  isFlutterApp: 'isFlutterApp',
  enableMinifiedWupUri: 'enableMinifiedWupUri',
  maxShadowDepth: 'maxShadowDepth',
  iframeLoadingTimeout: 'iframeLoadingTimeout',
  elementCategories: 'elementCategories',
  elementAttributes: 'elementAttributes',
  enableMathDetect: 'enableMathDetect',
  enableBrowserDisplayDetect: 'enableBrowserDisplayDetect',
  enableGraphCard: 'enableGraphCard',
  useLegacyZeroTimeout: 'useLegacyZeroTimeout',
  useMessageChannelForSlaveComm: 'useMessageChannelForSlaveComm',
  externalWASMModules: 'externalWASMModules',
  elementSelectors: 'elementSelectors',
  restrictedCookieDomains: 'restrictedCookieDomains',
  crossBrandSharedCookieDomain: 'crossBrandSharedCookieDomain'
};

/***/ }),

/***/ "./src/main/contract/AgentType.js":
/*!****************************************!*\
  !*** ./src/main/contract/AgentType.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AgentType: function() { return /* binding */ AgentType; }
/* harmony export */ });
var AgentType = {
  PRIMARY: "primary",
  SECONDARY: "secondary"
};
Object.freeze(AgentType);

/***/ }),

/***/ "./src/main/contract/BCProtocolType.js":
/*!*********************************************!*\
  !*** ./src/main/contract/BCProtocolType.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BCProtocolType: function() { return /* binding */ BCProtocolType; }
/* harmony export */ });
var BCProtocolType = {
  V3: 3,
  V4: 4
};

/***/ }),

/***/ "./src/main/contract/ClientSettingsKey.js":
/*!************************************************!*\
  !*** ./src/main/contract/ClientSettingsKey.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClientSettingsKey: function() { return /* binding */ ClientSettingsKey; }
/* harmony export */ });
var ClientSettingsKey = {
  enableRestart: 'enableRestart',
  enableFlush: 'enableFlush',
  enableCustomElements: 'enableCustomElements',
  enableCoordinatesMasking: 'enableCoordinatesMasking'
};

/***/ }),

/***/ "./src/main/contract/CollectionMode.js":
/*!*********************************************!*\
  !*** ./src/main/contract/CollectionMode.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollectionMode: function() { return /* binding */ CollectionMode; }
/* harmony export */ });
var CollectionMode = {
  FULL: 'full',
  LEAN: 'lean'
};
Object.freeze(CollectionMode);

/***/ }),

/***/ "./src/main/contract/staticContracts/AgenticBrowserDetectContract.js":
/*!***************************************************************************!*\
  !*** ./src/main/contract/staticContracts/AgenticBrowserDetectContract.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgenticBrowserDetectContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var AgenticBrowserDetectContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param {string} detectedFonts - Detected font names
   */
  function AgenticBrowserDetectContract(detectedFonts) {
    var _this;
    _classCallCheck(this, AgenticBrowserDetectContract);
    _this = _callSuper(this, AgenticBrowserDetectContract);
    _this.detectedFonts = detectedFonts;
    return _this;
  }
  _inherits(AgenticBrowserDetectContract, _StaticContract);
  return _createClass(AgenticBrowserDetectContract, [{
    key: "validateParams",
    value: function validateParams() {
      var isValid = typeof this.detectedFonts === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in AgenticBrowserDetect parameters. detectedFonts: {expected: string, received: ".concat(_typeof(this.detectedFonts), "}"));
      }
    }

    /**
     * @return {[string, string]} for example: ['agentic_browser_detect', ['FontA,FontB']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.detectedFonts]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 1;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('AgenticBrowserDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'agentic_browser_detect';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/AudioDetectContract.js":
/*!******************************************************************!*\
  !*** ./src/main/contract/staticContracts/AudioDetectContract.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AudioDetectContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var AudioDetectContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} acoustic
   */
  function AudioDetectContract(acoustic) {
    var _this;
    _classCallCheck(this, AudioDetectContract);
    _this = _callSuper(this, AudioDetectContract);
    _this.validateParams(acoustic);
    _this.acoustic = acoustic;
    return _this;
  }
  _inherits(AudioDetectContract, _StaticContract);
  return _createClass(AudioDetectContract, [{
    key: "validateParams",
    value: function validateParams(acoustic) {
      var isValid = typeof acoustic === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in AudioDetect parameters. renderer: {expected: string, received: ".concat(_typeof(acoustic), "}"));
      }
    }

    /**
     * @return  {[string, string]} for example: ['audio_detect', 'acoustic']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.acoustic];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('AudioDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'audio_detect';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/BrowserDetectContract.js":
/*!********************************************************************!*\
  !*** ./src/main/contract/staticContracts/BrowserDetectContract.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserDetectContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var BrowserDetectContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {boolean} isChrome
   * @param  {boolean} isFirefox
   * @param  {boolean} isEdge
   * @param  {boolean} isIE
   * @param  {boolean} isSafari
   * @param  {boolean} isOpera
   * @param  {boolean} isBlink
   */
  function BrowserDetectContract(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink) {
    var _this;
    _classCallCheck(this, BrowserDetectContract);
    _this = _callSuper(this, BrowserDetectContract);
    _this.validateParams(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink);
    _this.isChrome = isChrome;
    _this.isFirefox = isFirefox;
    _this.isEdge = isEdge;
    _this.isIE = isIE;
    _this.isSafari = isSafari;
    _this.isOpera = isOpera;
    _this.isBlink = isBlink;
    return _this;
  }
  _inherits(BrowserDetectContract, _StaticContract);
  return _createClass(BrowserDetectContract, [{
    key: "validateParams",
    value: function validateParams(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink) {
      var isValid = typeof isChrome === 'boolean' && typeof isFirefox === 'boolean' && typeof isEdge === 'boolean' && typeof isIE === 'boolean' && typeof isSafari === 'boolean' && typeof isOpera === 'boolean' && typeof isBlink === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: ".concat(_typeof(isChrome), "},\n            isFirefox : {expected: boolean, received: ").concat(_typeof(isFirefox), "},isEdge : {expected: boolean, received: ").concat(_typeof(isEdge), "},isIE : {expected: boolean, received: ").concat(_typeof(isIE), "},\n            isSafari : {expected: boolean, received: ").concat(_typeof(isSafari), "},isOpera : {expected: boolean, received: ").concat(_typeof(isOpera), "} ,isBlink : {expected: boolean, received: ").concat(_typeof(isBlink), "}"));
      }
    }

    /**
     * @return  {[string,[...boolean]]} for example: ['browser_spoofing', [true, false, false, false,  false,  false,  false]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.isChrome, this.isFirefox, this.isEdge, this.isIE, this.isSafari, this.isOpera, this.isBlink]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 7;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('BrowserDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'browser_spoofing';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/BrowserExtensionsUrlContract.js":
/*!***************************************************************************!*\
  !*** ./src/main/contract/staticContracts/BrowserExtensionsUrlContract.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserExtensionsUrlContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var BrowserExtensionsUrlContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {Array<{id: string, timestamp: number|null}>} extensions, Array of objects with id and timestamp
   */
  function BrowserExtensionsUrlContract(extensions) {
    var _this;
    _classCallCheck(this, BrowserExtensionsUrlContract);
    _this = _callSuper(this, BrowserExtensionsUrlContract);
    _this.validateParams(extensions);
    _this.extensions = extensions;
    return _this;
  }
  _inherits(BrowserExtensionsUrlContract, _StaticContract);
  return _createClass(BrowserExtensionsUrlContract, [{
    key: "validateParams",
    value: function validateParams(extensions) {
      var isValid = Array.isArray(extensions) && this._eachExtensionIsValid(extensions);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in BrowserExtensionsUrlContract parameters. extensions : {expected: Array<{id: string, timestamp: number|null}>, received: ".concat(extensions, "}"));
      }
    }
  }, {
    key: "_eachExtensionIsValid",
    value: function _eachExtensionIsValid(extensions) {
      var _iterator = _createForOfIteratorHelper(extensions),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var ext = _step.value;
          if (!(_typeof(ext) === 'object' && ext !== null)) {
            return false;
          }
          if (typeof ext.id !== 'string') {
            return false;
          }
          if (ext.timestamp !== null && typeof ext.timestamp !== 'number') {
            return false;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return true;
    }

    /**
     * @return  {[string, [string, Array]]} for example : ['browser_extensions_url', ["v1", [{id: 'ghbmnnjooekpmoecnnnilnnbdlolhkhi', timestamp: 1234567890}, ...]]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, ["v1", this.extensions]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 2 && typeof message[1][0] === 'string' && Array.isArray(message[1][1]);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('BrowserExtensionsUrl - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'browser_extensions_url';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/ClientHintsContract.js":
/*!******************************************************************!*\
  !*** ./src/main/contract/staticContracts/ClientHintsContract.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ClientHintsContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var ClientHintsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {Object} clientHintsData - Object containing all client hints data (brands, mobile, platform, etc.)
   */
  function ClientHintsContract(clientHintsData) {
    var _this;
    _classCallCheck(this, ClientHintsContract);
    _this = _callSuper(this, ClientHintsContract);
    _this.fieldName = 'client_hints_user_agent';
    _this.value = clientHintsData;
    _this.validateParams(clientHintsData);
    return _this;
  }
  _inherits(ClientHintsContract, _StaticContract);
  return _createClass(ClientHintsContract, [{
    key: "validateParams",
    value: function validateParams(data) {
      var _this2 = this;
      if (data === null || _typeof(data) !== 'object' || Array.isArray(data)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("ClientHintsContract: Invalid data object. Expected non-null object, received: ".concat(_typeof(data)));
        return;
      }

      // Validate each field in the object
      Object.entries(data).forEach(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
          fieldName = _ref2[0],
          value = _ref2[1];
        _this2.validateField(fieldName, value);
      });
    }
  }, {
    key: "validateField",
    value: function validateField(fieldName, value) {
      // Allow undefined values (optional fields)
      if (value === undefined) {
        return;
      }

      // Field-specific validation
      var fieldValidations = {
        'brands': function brands(val) {
          return Array.isArray(val) && val.every(function (item) {
            return _typeof(item) === 'object' && item !== null && typeof item.brand === 'string' && typeof item.version === 'string';
          });
        },
        'is_mobile': function is_mobile(val) {
          return typeof val === 'boolean';
        },
        'platform': function platform(val) {
          return typeof val === 'string';
        },
        'architecture': function architecture(val) {
          return typeof val === 'string';
        },
        'bitness': function bitness(val) {
          return typeof val === 'string';
        },
        'model': function model(val) {
          return typeof val === 'string';
        },
        'platform_version': function platform_version(val) {
          return typeof val === 'string';
        },
        'user_agent_full_version': function user_agent_full_version(val) {
          return typeof val === 'string';
        },
        'full_version_list': function full_version_list(val) {
          return Array.isArray(val) && val.every(function (item) {
            return _typeof(item) === 'object' && item !== null && typeof item.brand === 'string' && typeof item.version === 'string';
          });
        },
        'wow64': function wow64(val) {
          return typeof val === 'boolean';
        }
      };
      var validator = fieldValidations[fieldName];
      if (!validator) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("ClientHintsContract: unknown field name: ".concat(fieldName));
        return;
      }
      var isValidValue = validator(value);
      if (!isValidValue) {
        var expectedType = this._getExpectedType(fieldName);
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("ClientHintsContract: wrong value type for ".concat(fieldName, ". {expected: ").concat(expectedType, ", received: ").concat(_typeof(value), ", value: ").concat(JSON.stringify(value)));
      }
    }
  }, {
    key: "_getExpectedType",
    value: function _getExpectedType(fieldName) {
      var typeMap = {
        'brands': 'Array',
        'is_mobile': 'boolean',
        'platform': 'string',
        'architecture': 'string',
        'bitness': 'string',
        'model': 'string',
        'platform_version': 'string',
        'user_agent_full_version': 'string',
        'full_version_list': 'Array',
        'wow64': 'boolean'
      };
      return typeMap[fieldName] || 'unknown';
    }

    /**
     * @return  {[string, Object]} for example: ['client_hints_user_agent', {brands: [...], is_mobile: false, ...}]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.value];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValidKey = typeof message[0] === 'string' && message[0] === this.fieldName;
      var isValidValue = _typeof(message[1]) === 'object' && message[1] !== null && !Array.isArray(message[1]);
      if (!isValidKey || !isValidValue) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("ClientHintsContract - Contract verification failed. Expected field name: ".concat(this.fieldName, ", received: ").concat(message[0], ", value type: ").concat(_typeof(message[1])));
        return;
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return this.fieldName;
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/DevDebugInfoContract.js":
/*!*******************************************************************!*\
  !*** ./src/main/contract/staticContracts/DevDebugInfoContract.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DevDebugInfoContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var DevDebugInfoContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {Object} data - The data object to be used in the contract.
   */
  function DevDebugInfoContract(data) {
    var _this;
    _classCallCheck(this, DevDebugInfoContract);
    _this = _callSuper(this, DevDebugInfoContract);
    _this.validateParams(data);
    _this.data = data;
    return _this;
  }

  /**
   * Validates the parameters passed to the constructor.
   * @param {Object} data - The data object to validate.
   * @throws {Error} If the data is not valid.
   */
  _inherits(DevDebugInfoContract, _StaticContract);
  return _createClass(DevDebugInfoContract, [{
    key: "validateParams",
    value: function validateParams(data) {
      if (data === null || _typeof(data) !== 'object' || Array.isArray(data)) {
        throw new Error("DevDebugInfoContract - Invalid parameter: data should be a non-null object. Received: ".concat(JSON.stringify(data)));
      }
    }

    /**
     * Builds the queue message to be used for logging or further processing.
     * @return {[string, Object]} A tuple containing the name and data.
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.data];
      this.validateMessage(message);
      return message;
    }

    /**
     * Validates the message structure.
     * @param {Array} message - The message array to validate.
     * @throws {Error} If the message is not valid.
     */
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var _message = _slicedToArray(message, 2),
        name = _message[0],
        data = _message[1];
      var isValid = typeof name === 'string' && _typeof(data) === 'object' && data !== null;
      if (!isValid) {
        throw new Error("DevDebugInfoContract - Message validation failed. Invalid message structure: ".concat(JSON.stringify(message)));
      }
    }

    /**
     * Retrieves the name for the contract.
     * @return {string} The name of the contract.
     */
  }, {
    key: "getName",
    value: function getName() {
      return 'client_debug_info';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/DoNotTrackContract.js":
/*!*****************************************************************!*\
  !*** ./src/main/contract/staticContracts/DoNotTrackContract.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DoNotTrackContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var DoNotTrackContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} dnt
   */
  function DoNotTrackContract(dnt) {
    var _this;
    _classCallCheck(this, DoNotTrackContract);
    _this = _callSuper(this, DoNotTrackContract);
    _this.validateParams(dnt);
    _this.dnt = dnt;
    return _this;
  }
  _inherits(DoNotTrackContract, _StaticContract);
  return _createClass(DoNotTrackContract, [{
    key: "validateParams",
    value: function validateParams(dnt) {
      var isValid = typeof dnt === 'number' && (dnt === 0 || dnt === 1 || dnt === 2);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: ".concat(_typeof(dnt), ", value: ").concat(dnt));
      }
    }

    /**
     * @return  {[string,number]} for example: ['dnt', 1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.dnt];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('DoNotTrack - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'dnt';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/FontsDetectionContract.js":
/*!*********************************************************************!*\
  !*** ./src/main/contract/staticContracts/FontsDetectionContract.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FontDataType: function() { return /* binding */ FontDataType; },
/* harmony export */   FontsDetectionContract: function() { return /* binding */ FontsDetectionContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }



/**
 * Font Detection Contract
 * Handles the payload structure for font detection during migration phases.
 */
var FontsDetectionContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} dataType - Specifies the type of data being handled (e.g., 'v1', 'v2', 'v1+v2').
   * @param  {Array} fontList - A tuple containing font data in the format [v1Fonts (string), v2Fonts (array)].
   */
  function FontsDetectionContract(dataType, fontList) {
    var _this;
    _classCallCheck(this, FontsDetectionContract);
    _this = _callSuper(this, FontsDetectionContract);
    _this.validateParams(dataType, fontList);
    _this.dataType = dataType;
    _this.fontList = fontList;
    return _this;
  }

  /**
   * Validates the parameters passed to the constructor.
   * @param {string} dataType - Type of font data (e.g., 'v1', 'v2', 'v1+v2').
   * @param {Array} fontList - Tuple containing font data, e.g., ['Arial, Verdana, Tahoma', ['Roboto', 'Open Sans']].
   */
  _inherits(FontsDetectionContract, _StaticContract);
  return _createClass(FontsDetectionContract, [{
    key: "validateParams",
    value: function validateParams(dataType, fontList) {
      var isValid = Array.isArray(fontList) && fontList.length === 2 && Object.values(FontDataType).includes(dataType);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Invalid parameters in FontsDetectionContract. \n                dataType: {expected: ".concat(Object.keys(FontDataType).join(", "), ", received: ").concat(dataType, "},\n                fontList: {expected: tuple [string, array], received: ").concat(JSON.stringify(fontList), "}"));
        throw new Error("Invalid parameters provided to FontsDetectionContract.");
      }
    }

    /**
     * Builds a queue message for font detection.
     * The structure is a tuple: [key, payload].
     * - Key is derived from `getName()`.
     * - Payload varies based on `dataType`:
     *   - "v1": A single string representing V1 fonts.
     *   - "v2": An array of strings representing V2 fonts.
     *   - "v1+v2": A tuple of [V1 fonts (string), V2 fonts (array)].
     * 
     * @return {Array} - Tuple [key, payload] for font detection.
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var payload;

      // Determine the payload structure based on `dataType`
      if (this.dataType === FontDataType.V1_ONLY) {
        payload = this.fontList[0].join(','); // V1 as a single string
      } else if (this.dataType === FontDataType.V2_ONLY) {
        payload = this.fontList[1]; // V2 as an array of strings
      } else if (this.dataType === FontDataType.V1_AND_V2) {
        payload = [this.fontList[0].join(','), this.fontList[1]]; // Tuple of V1 and V2
      } else {
        throw new Error("Invalid dataType: ".concat(this.dataType));
      }
      var message = [this.getName(), [this.dataType, payload]];
      this.validateMessage(message);
      return message;
    }

    /**
    * Validates the generated message structure.
    * - Ensures the key is a valid string.
    * - Ensures the payload is structured as [dataType, payload]:
    *   - For "v1": payload should be a string.
    *   - For "v2": payload should be an array of strings.
    *   - For "v1+v2": payload should be a tuple [string, array].
    * 
    * @param {Array} message - The generated message array in the format [key, [dataType, payload]].
    */
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      // Validate the key (message[0])
      var isKeyValid = typeof message[0] === "string";

      // Validate the payload structure (message[1])
      var _ref = message[1] || [],
        _ref2 = _slicedToArray(_ref, 2),
        dataType = _ref2[0],
        payload = _ref2[1];
      var isPayloadValid = false;
      if (dataType === FontDataType.V1_ONLY) {
        isPayloadValid = typeof payload === "string";
      } else if (dataType === FontDataType.V2_ONLY) {
        isPayloadValid = Array.isArray(payload) && payload.every(function (font) {
          return typeof font === "string";
        });
      } else if (dataType === FontDataType.V1_AND_V2) {
        isPayloadValid = Array.isArray(payload) && payload.length === 2 && typeof payload[0] === "string" && Array.isArray(payload[1]) && payload[1].every(function (font) {
          return typeof font === "string";
        });
      }

      // Combined validation
      if (!isKeyValid || !isPayloadValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("FontsDetectionContract - Queue message validation failed.");
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Invalid message: ".concat(JSON.stringify(message)));
        throw new Error("Invalid message structure.");
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "fonts";
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);
/**
 * Enum for font data types.
 */
var FontDataType = Object.freeze({
  V1_ONLY: "v1",
  // Data from V1 only
  V2_ONLY: "v2",
  // Data from V2 only
  V1_AND_V2: "v1+v2" // Data from both V1 and V2 combined,
});


/***/ }),

/***/ "./src/main/contract/staticContracts/GfxRenderingContract.js":
/*!*******************************************************************!*\
  !*** ./src/main/contract/staticContracts/GfxRenderingContract.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ GfxRenderingContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var GfxRenderingContract = /*#__PURE__*/function (_StaticContract) {
  /*
   * @param {boolean} winding
   * @param {string} text
   * @param {string} geometry
   */
  function GfxRenderingContract(winding, text, geometry) {
    var _this;
    _classCallCheck(this, GfxRenderingContract);
    _this = _callSuper(this, GfxRenderingContract);
    _this.validateParams(winding, text, geometry);
    _this.winding = winding;
    _this.text = text;
    _this.geometry = geometry;
    return _this;
  }

  /*
   * @param {boolean} winding
   * @param {string} text
   * @param {string} geometry
   */
  _inherits(GfxRenderingContract, _StaticContract);
  return _createClass(GfxRenderingContract, [{
    key: "validateParams",
    value: function validateParams(winding, text, geometry) {
      var isValid = typeof winding === 'boolean' && typeof text === 'string' && typeof geometry === 'string';
      if (!isValid) {
        var logMsg = "wrong type in GfxRenderingContract parameters. winding: {expected: boolean, received: ".concat(_typeof(winding), "}, text: {expected: string, received: ").concat(_typeof(text), "},\n            geometry: {expected: string, received: ").concat(_typeof(geometry), "}");
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn(logMsg);
      }
    }

    /**
     * @return  {[string,[boolean, string, string]]} for example: ['gfx', [true, 'abcdefg' , 'a1b2c3']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.winding, this.text, this.geometry]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 3;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('GfxRendering - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'gfx';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/GraphicDetectContract.js":
/*!********************************************************************!*\
  !*** ./src/main/contract/staticContracts/GraphicDetectContract.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ GraphicDetectContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var GraphicDetectContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} renderer
   * @param  {string} vendor
   * @param  {string} version
   * @param  {string} supportedExtensions
   */
  function GraphicDetectContract(renderer, vendor, version, supportedExtensions) {
    var _this;
    _classCallCheck(this, GraphicDetectContract);
    _this = _callSuper(this, GraphicDetectContract);
    _this.validateParams(renderer, vendor, version, supportedExtensions);
    _this.renderer = renderer;
    _this.vendor = vendor;
    _this.version = version;
    _this.supportedExtensions = supportedExtensions;
    return _this;
  }
  _inherits(GraphicDetectContract, _StaticContract);
  return _createClass(GraphicDetectContract, [{
    key: "validateParams",
    value: function validateParams(renderer, vendor, version, supportedExtensions) {
      var isValid = typeof renderer === 'string' && typeof vendor === 'string' && typeof version === 'string' && typeof supportedExtensions === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: ".concat(_typeof(renderer), "}, vendor: {expected: string, received: ").concat(_typeof(vendor), "},\n            version: {expected: string, received: ").concat(_typeof(version), "}, supportedExtensions: {expected: string, received: ").concat(_typeof(supportedExtensions), "}"));
      }
    }

    /**
     * @return  {[string,[...string]]} for example: ['grph_card', ['renderer', 'vendor' , 'version', 'supportedExtensions']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.renderer, this.vendor, this.version, this.supportedExtensions]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 4;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('GraphicDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'grph_card';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/IsIncognitoContract.js":
/*!******************************************************************!*\
  !*** ./src/main/contract/staticContracts/IsIncognitoContract.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IsIncognitoContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var IsIncognitoContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {Object<string, boolean|null>} incognitoResults - Object containing detection results from multiple detection methods.
   *
   * The object contains boolean results from various incognito detection techniques with the following keys:
   *
   * navigatorLanguages - Navigator Languages Detection (Chrome 86+)
   *   - Checks if navigator.languages array has only 1 element matching navigator.language
   *   - In incognito: typically limited to single language
   *
   * performanceMemory - Performance Memory Detection (Chrome)
   *   - Checks if performance.memory API is available and has valid heap size
   *   - In incognito: API may be undefined or return zero heap size
   *
   * localStorage - LocalStorage Detection (Safari)
   *   - Attempts to write/remove test item from localStorage
   *   - In incognito: operations throw errors in Safari private mode
   *
   * safariScreenResolution - Safari Screen Resolution Detection (Safari 17+)
   *   - Compares screen.width with document.clientWidth
   *   - In incognito: these values are equal in Safari 17+ private mode
   *
   * webSQLDatabase - Web SQL Database Detection (Safari iOS 11+)
   *   - Tests Web SQL Database API access via openDatabase
   *   - In incognito: API throws errors in Safari private mode
   *
   * indexedDBExistence - IndexedDB Availability Detection (IE/Edge)
   *   - Checks if IndexedDB API exists
   *   - In incognito: IndexedDB unavailable in IE/Edge InPrivate mode
   *
   * fileSystemAPI - FileSystem API Detection (Chrome/Edge)
   *   - Attempts to request temporary file system via webkitRequestFileSystem
   *   - In incognito: API throws errors in Chrome/Edge incognito mode
   *
   * storageQuota - Storage Quota Detection (Chrome/Edge)
   *   - Checks storage quota against thresholds
   *   - In incognito: quota typically much smaller than in normal mode
   *
   * indexedDBOperations - IndexedDB Operations Detection (Firefox/Safari/IE/Edge)
   *   - Attempts to open and delete a test IndexedDB database
   *   - In incognito: operations blocked or throw errors
   *
   * safariStorageDirectory - Safari Current Test (Safari 19+)
   *   - Uses navigator.storage.getDirectory() and checks for specific error
   *
   * safariIndexedDBBlob - Safari 13-18 Test
   *   - Uses IndexedDB with Blob creation test
   *
   * chromeStorageQuota - Chrome Storage Quota Test (Chrome 76+)
   *   - Uses webkitTemporaryStorage.queryUsageAndQuota
   *
   * firefoxStorageDirectory - Firefox Private Test
   *   - Uses navigator.storage.getDirectory() or IndexedDB with specific name
   *
   * Each value is boolean or null. null indicates the detection method's API was unavailable.
   * This allows comparing patterns between normal and incognito sessions to measure per-method accuracy.
   */
  function IsIncognitoContract(incognitoResults) {
    var _this;
    _classCallCheck(this, IsIncognitoContract);
    _this = _callSuper(this, IsIncognitoContract);
    _this.validateParams(incognitoResults);
    _this.incognitoResults = incognitoResults;
    return _this;
  }
  _inherits(IsIncognitoContract, _StaticContract);
  return _createClass(IsIncognitoContract, [{
    key: "validateParams",
    value: function validateParams(incognitoResults) {
      var isValid = _typeof(incognitoResults) === 'object' && incognitoResults !== null && !Array.isArray(incognitoResults) && Object.values(incognitoResults).every(function (result) {
        return typeof result === 'boolean' || result === null;
      });
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('wrong type in IsIncognitoContract parameters. incognitoResults : {expected: Object<string, boolean|null>, received: ' + _typeof(incognitoResults) + '}');
      }
    }

    /**
     * @return  {[string,Object<string, boolean|null>]} for example: ['is_incognito', {navigatorLanguages: true, performanceMemory: false, ...}]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.incognitoResults];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && _typeof(message[1]) === 'object' && message[1] !== null && !Array.isArray(message[1]) && Object.values(message[1]).every(function (result) {
        return typeof result === 'boolean' || result === null;
      });
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('IsIncognito - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'is_incognito';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/IsPrivateBrowsingContract.js":
/*!************************************************************************!*\
  !*** ./src/main/contract/staticContracts/IsPrivateBrowsingContract.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IsPrivateBrowsingContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var IsPrivateBrowsingContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {boolean} isPrivate,
   */
  function IsPrivateBrowsingContract(isPrivate) {
    var _this;
    _classCallCheck(this, IsPrivateBrowsingContract);
    _this = _callSuper(this, IsPrivateBrowsingContract);
    _this.validateParams(isPrivate);
    _this.isPrivate = isPrivate;
    return _this;
  }
  _inherits(IsPrivateBrowsingContract, _StaticContract);
  return _createClass(IsPrivateBrowsingContract, [{
    key: "validateParams",
    value: function validateParams(isPrivate) {
      var isValid = typeof isPrivate === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: ".concat(_typeof(isPrivate), "}"));
      }
    }

    /**
     * @return  {[string,boolean]} for example: ['is_private_browsing', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isPrivate];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('IsPrivateBrowsing - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'is_private_browsing';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/KeyboardLayoutContract.js":
/*!*********************************************************************!*\
  !*** ./src/main/contract/staticContracts/KeyboardLayoutContract.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ KeyboardLayoutContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var KeyboardLayoutContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} keyboardLayout
   */
  function KeyboardLayoutContract(keyboardLayout) {
    var _this;
    _classCallCheck(this, KeyboardLayoutContract);
    _this = _callSuper(this, KeyboardLayoutContract);
    _this.validateParams(keyboardLayout);
    _this.keyboardLayout = keyboardLayout;
    return _this;
  }
  _inherits(KeyboardLayoutContract, _StaticContract);
  return _createClass(KeyboardLayoutContract, [{
    key: "validateParams",
    value: function validateParams(keyboardLayout) {
      var isValid = typeof keyboardLayout === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in KeyboardLayout parameters. keyboardLayout : {expected: string, received: ".concat(_typeof(keyboardLayout), "}"));
      }
    }

    /**
     * @return  {[string, string]} for example: ['keyboard_layout', 'b0e106ee1de7ce5ea7bcc1bd50542ddd']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.keyboardLayout];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('KeyboardLayout - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'keyboard_layout';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/MathDetectContract.js":
/*!*****************************************************************!*\
  !*** ./src/main/contract/staticContracts/MathDetectContract.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MathDetectContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var MathDetectContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} math
   */
  function MathDetectContract(math) {
    var _this;
    _classCallCheck(this, MathDetectContract);
    _this = _callSuper(this, MathDetectContract);
    _this.validateParams(math);
    _this.math = math;
    return _this;
  }
  _inherits(MathDetectContract, _StaticContract);
  return _createClass(MathDetectContract, [{
    key: "validateParams",
    value: function validateParams(math) {
      var isValid = typeof math === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in MathDetect parameters. renderer: {expected: string, received: ".concat(_typeof(math), "}"));
      }
    }

    /**
     * @return  {[string, string]} for example: ['math_detect', 'math']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.math];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('MathDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'math_detect';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/MediaDevicesContract.js":
/*!*******************************************************************!*\
  !*** ./src/main/contract/staticContracts/MediaDevicesContract.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MediaDevicesContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var MediaDevicesContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {[[...string]]} mediaDevices, Array of Arrays of strings : [['kind':string, 'label':string, 'deviceId':string, 'groupId':string],...]
   */
  function MediaDevicesContract(mediaDevices) {
    var _this;
    _classCallCheck(this, MediaDevicesContract);
    _this = _callSuper(this, MediaDevicesContract);
    _this.validateParams(mediaDevices);
    _this.mediaDevices = mediaDevices;
    return _this;
  }
  _inherits(MediaDevicesContract, _StaticContract);
  return _createClass(MediaDevicesContract, [{
    key: "validateParams",
    value: function validateParams(mediaDevices) {
      var isValid = Array.isArray(mediaDevices) && this._eachDeviceIsValid(mediaDevices);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: ".concat(mediaDevices, "}"));
      }
    }
  }, {
    key: "_eachDeviceIsValid",
    value: function _eachDeviceIsValid(mediaDevices) {
      var validArrays = true;
      var validStrings = true;
      var validLengths = true;
      var _iterator = _createForOfIteratorHelper(mediaDevices),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (!Array.isArray(i)) {
            validArrays = false;
          } else {
            if (i.length !== 4) {
              validLengths = false;
            }
            var _iterator2 = _createForOfIteratorHelper(i),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                if (typeof j !== 'string') {
                  validStrings = false;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validArrays && validLengths && validStrings;
    }

    /**
     * @return  {[string,[[...string]]]} for example : ['media_devices',[['kind1', 'label1', 'deviceId1', 'groupId1'], ['kind2', 'label2', 'deviceId2', 'groupId2']]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.mediaDevices];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('MediaDevices - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'media_devices';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/ScreenHighResContract.js":
/*!********************************************************************!*\
  !*** ./src/main/contract/staticContracts/ScreenHighResContract.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ScreenHighResContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var ScreenHighResContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {boolean} isHighRes
   */
  function ScreenHighResContract(isHighRes) {
    var _this;
    _classCallCheck(this, ScreenHighResContract);
    _this = _callSuper(this, ScreenHighResContract);
    _this.validateParams(isHighRes);
    _this.isHighRes = isHighRes;
    return _this;
  }
  _inherits(ScreenHighResContract, _StaticContract);
  return _createClass(ScreenHighResContract, [{
    key: "validateParams",
    value: function validateParams(isHighRes) {
      var isValid = typeof isHighRes === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in ScreenHighRes parameters. isHighRes : {expected: boolean, received: ".concat(_typeof(isHighRes), "}"));
      }
    }

    /**
     * @return  {[string, boolean]} for example: ['screen_high_res', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isHighRes];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('ScreenHighRes - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'screen_high_res';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/StaticContract.js":
/*!*************************************************************!*\
  !*** ./src/main/contract/staticContracts/StaticContract.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StaticContract; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var StaticContract = /*#__PURE__*/function () {
  function StaticContract() {
    _classCallCheck(this, StaticContract);
  }
  return _createClass(StaticContract, [{
    key: "validateParams",
    value:
    //the message should insert to queue regardless of the param validation.
    //upon receiving invalid values- a log should be send
    function validateParams() {
      throw new Error('_validateParams should be overridden');
    }
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      throw new Error('buildQueueMessage should be overridden');
    }
    //the message should insert to queue regardless of the message validation.
    //upon receiving invalid value- a log should be send
  }, {
    key: "validateMessage",
    value: function validateMessage() {
      throw new Error('_validateMessage should be overridden');
    }
  }, {
    key: "getName",
    value: function getName() {
      throw new Error('_getName should be overridden');
    }
  }]);
}();


/***/ }),

/***/ "./src/main/contract/staticContracts/StorageDirectoryContract.js":
/*!***********************************************************************!*\
  !*** ./src/main/contract/staticContracts/StorageDirectoryContract.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageDirectoryContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var StorageDirectoryContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} directoryName
   */
  function StorageDirectoryContract(directoryName) {
    var _this;
    _classCallCheck(this, StorageDirectoryContract);
    _this = _callSuper(this, StorageDirectoryContract);
    _this.validateParams(directoryName);
    _this.directoryName = directoryName;
    return _this;
  }
  _inherits(StorageDirectoryContract, _StaticContract);
  return _createClass(StorageDirectoryContract, [{
    key: "validateParams",
    value: function validateParams(directoryName) {
      var isValid = typeof directoryName === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in StorageDirectory parameters. directoryName : {expected: string, received: ".concat(_typeof(directoryName), "}"));
      }
    }

    /**
     * @return  {[string, string]} for example: ['storage_directory', 'root']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.directoryName];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('StorageDirectory - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'storage_directory';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/StorageEstimateContract.js":
/*!**********************************************************************!*\
  !*** ./src/main/contract/staticContracts/StorageEstimateContract.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageEstimateContract; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var StorageEstimateContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} usage
   * @param  {number} quota
   */
  function StorageEstimateContract(usage, quota) {
    var _this;
    _classCallCheck(this, StorageEstimateContract);
    _this = _callSuper(this, StorageEstimateContract);
    _this.validateParams(usage, quota);
    _this.usage = usage;
    _this.quota = quota;
    return _this;
  }
  _inherits(StorageEstimateContract, _StaticContract);
  return _createClass(StorageEstimateContract, [{
    key: "validateParams",
    value: function validateParams(usage, quota) {
      var isValid = typeof usage === 'number' && typeof quota === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("wrong type in StorageEstimate parameters. usage : {expected: number, received: ".concat(_typeof(usage), "}, quota : {expected: number, received: ").concat(_typeof(quota), "}"));
      }
    }

    /**
     * @return  {[string, [number, number]]} for example: ['storage_estimate', [2126, 296630877388]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.usage, this.quota]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 2;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('StorageEstimate - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'storage_estimate';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js":
/*!*****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PerKindUserPermissionContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var PerKindUserPermissionContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} kind
   * @param {number} perm
   */
  function PerKindUserPermissionContract(kind, perm) {
    var _this;
    _classCallCheck(this, PerKindUserPermissionContract);
    _this = _callSuper(this, PerKindUserPermissionContract);
    _this.validateParams(kind, perm);
    _this.kind = kind;
    _this.perm = perm;
    return _this;
  }
  _inherits(PerKindUserPermissionContract, _StaticContract);
  return _createClass(PerKindUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(kind, perm) {
      var isValid = typeof kind === 'string' && typeof perm === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: ".concat(_typeof(kind), "}, perm : {expected: number, received: ").concat(_typeof(perm), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['per_kind', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.perm];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('PerKind, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_".concat(this.kind);
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js":
/*!********************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js ***!
  \********************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PerStorageUserPermissionContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var PerStorageUserPermissionContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param {number} persistent
   */
  function PerStorageUserPermissionContract(persistent) {
    var _this;
    _classCallCheck(this, PerStorageUserPermissionContract);
    _this = _callSuper(this, PerStorageUserPermissionContract);
    _this.validateParams(persistent);
    _this.persistent = persistent;
    return _this;
  }
  _inherits(PerStorageUserPermissionContract, _StaticContract);
  return _createClass(PerStorageUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(persistent) {
      var isValid = typeof persistent === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: ".concat(_typeof(persistent), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['per_storage', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.persistent];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('per_storage, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_storage";
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js":
/*!*************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PerUserPermissionContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var PerUserPermissionContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} per
   * @param {number} state
   */
  function PerUserPermissionContract(per, state) {
    var _this;
    _classCallCheck(this, PerUserPermissionContract);
    _this = _callSuper(this, PerUserPermissionContract);
    _this.validateParams(per, state);
    _this.per = per;
    _this.state = state;
    return _this;
  }
  _inherits(PerUserPermissionContract, _StaticContract);
  return _createClass(PerUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(per, state) {
      var isValid = typeof per === 'string' && typeof state === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: ".concat(_typeof(per), "}, state : {expected: number, received: ").concat(_typeof(state), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['per_per', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.state];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('per, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_".concat(this.per);
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js":
/*!******************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BrowserDisplayBrowserPropsContract: function() { return /* binding */ BrowserDisplayBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var BrowserDisplayBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} browserDisplay,
   */
  function BrowserDisplayBrowserPropsContract(browserDisplay) {
    var _this;
    _classCallCheck(this, BrowserDisplayBrowserPropsContract);
    _this = _callSuper(this, BrowserDisplayBrowserPropsContract);
    _this.validateParams(browserDisplay);
    _this.browserDisplay = browserDisplay;
    return _this;
  }
  _inherits(BrowserDisplayBrowserPropsContract, _StaticContract);
  return _createClass(BrowserDisplayBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(browserDisplay) {
      var isValid = typeof browserDisplay === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in BrowserDisplay, BrowserProps parameters. BrowserDisplay : {expected: string, received: ".concat(_typeof(browserDisplay), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['browser_display', '']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.browserDisplay];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('TransparencyReduced, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'browser_display_detect';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js":
/*!***********************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BuildIDBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var BuildIDBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param {string} buildID, indicates the representing string of the build identifier of the browser.
   * The build ID is in the form YYYYMMDDHHMMSS. in Firefox 64 onwards.
   */
  function BuildIDBrowserPropsContract(buildID) {
    var _this;
    _classCallCheck(this, BuildIDBrowserPropsContract);
    _this = _callSuper(this, BuildIDBrowserPropsContract);
    _this.validateParams(buildID);
    _this.buildID = buildID;
    return _this;
  }
  _inherits(BuildIDBrowserPropsContract, _StaticContract);
  return _createClass(BuildIDBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(buildID) {
      var isValid = buildID !== undefined && typeof buildID === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("The buildID is either undefined or of a wrong type. Expected string, received: ".concat(_typeof(buildID)));
      }
    }

    /**
     * @return  {[string, string]} for example: ['navigator_build_id', 20220308175500]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.buildID];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('navigator_build_id, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'navigator_build_id';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js":
/*!*****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CookieEnabledBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var CookieEnabledBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {boolean} isCookie,
   */
  function CookieEnabledBrowserPropsContract(isCookie) {
    var _this;
    _classCallCheck(this, CookieEnabledBrowserPropsContract);
    _this = _callSuper(this, CookieEnabledBrowserPropsContract);
    _this.validateParams(isCookie);
    _this.isCookie = isCookie;
    return _this;
  }
  _inherits(CookieEnabledBrowserPropsContract, _StaticContract);
  return _createClass(CookieEnabledBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(isCookie) {
      var isValid = typeof isCookie === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: ".concat(_typeof(isCookie), "}"));
      }
    }

    /**
     * @return  {[string,boolean]} for example: ['cookie_enabled', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isCookie];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('CookieEnabled,BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'cookie_enabled';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js":
/*!*********************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CoresBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var CoresBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} hardwareConcurrency, A number between 1 and the number of logical processors potentially available to the user agent || 0 if not supported in the browser.
   */
  function CoresBrowserPropsContract(hardwareConcurrency) {
    var _this;
    _classCallCheck(this, CoresBrowserPropsContract);
    _this = _callSuper(this, CoresBrowserPropsContract);
    _this.validateParams(hardwareConcurrency);
    _this.hardwareConcurrency = hardwareConcurrency;
    return _this;
  }
  _inherits(CoresBrowserPropsContract, _StaticContract);
  return _createClass(CoresBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(hardwareConcurrency) {
      var isValid = typeof hardwareConcurrency === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: ".concat(_typeof(hardwareConcurrency), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['cores',12]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.hardwareConcurrency];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('cores,BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'cores';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js":
/*!****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DeviceMemoryBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var DeviceMemoryBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {float} memory, A floating point number; one of 0.25, 0.5, 1, 2, 4, 8,|| 0 if the browser is not supporting the method
   */
  function DeviceMemoryBrowserPropsContract(memory) {
    var _this;
    _classCallCheck(this, DeviceMemoryBrowserPropsContract);
    _this = _callSuper(this, DeviceMemoryBrowserPropsContract);
    _this.validateParams(memory);
    _this.memory = memory;
    return _this;
  }
  _inherits(DeviceMemoryBrowserPropsContract, _StaticContract);
  return _createClass(DeviceMemoryBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(memory) {
      var isValid = typeof memory === 'number' && (memory === 0.25 || memory === 0.5 || memory === 1 || memory === 2 || memory === 4 || memory === 8 || memory === 0);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:".concat(_typeof(memory), " value:").concat(memory, "}"));
      }
    }

    /**
     * @return  {[string,float]} for example : ['device_memory', 0.25]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.memory];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('device_memory, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'device_memory';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js":
/*!****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DeviceSourceBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var DeviceSourceBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} source, for example:'js'
   */
  function DeviceSourceBrowserPropsContract(source) {
    var _this;
    _classCallCheck(this, DeviceSourceBrowserPropsContract);
    _this = _callSuper(this, DeviceSourceBrowserPropsContract);
    _this.validateParams(source);
    _this.source = source;
    return _this;
  }
  _inherits(DeviceSourceBrowserPropsContract, _StaticContract);
  return _createClass(DeviceSourceBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(source) {
      var isValid = typeof source === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: ".concat(_typeof(source), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['device_source', 'js']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.source];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('device_source, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'device_source';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js":
/*!*************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ InputMechBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var InputMechBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} pointer, , for example: 1
   * @param  {number} hover , for example: 2
   */
  function InputMechBrowserPropsContract(pointer, hover) {
    var _this;
    _classCallCheck(this, InputMechBrowserPropsContract);
    _this = _callSuper(this, InputMechBrowserPropsContract);
    _this.validateParams(pointer, hover);
    _this.pointer = pointer;
    _this.hover = hover;
    return _this;
  }
  _inherits(InputMechBrowserPropsContract, _StaticContract);
  return _createClass(InputMechBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(pointer, hover) {
      var isValid = typeof pointer === 'number' && (pointer === 1 || pointer === 2 || pointer === 3 || pointer === 4 || pointer === 5) && typeof hover === 'number' && (hover === 1 || hover === 2 || hover === 3 || hover === 4 || hover === 5);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: ".concat(_typeof(pointer), "}, hover : {expected: number, received: ").concat(_typeof(hover), "}"));
      }
    }

    /**
     * @return  {[string,[...number]]} for example:['input_mech', [1,2]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.pointer, this.hover]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 2;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('input_mech, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'input_mech';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js":
/*!********************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ JsUaBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var JsUaBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} userAgent,
   */
  function JsUaBrowserPropsContract(userAgent) {
    var _this;
    _classCallCheck(this, JsUaBrowserPropsContract);
    _this = _callSuper(this, JsUaBrowserPropsContract);
    _this.validateParams(userAgent);
    _this.userAgent = userAgent;
    return _this;
  }
  _inherits(JsUaBrowserPropsContract, _StaticContract);
  return _createClass(JsUaBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(userAgent) {
      var isValid = typeof userAgent === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: ".concat(_typeof(userAgent), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['js_ua', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) ApML, like Gecko) Chrome/97.0.4692.71 Safari/537.36']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.userAgent];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('js_ua, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'js_ua';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js":
/*!********************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ LangBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var LangBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} language for example: 'en-US'
   */
  function LangBrowserPropsContract(language) {
    var _this;
    _classCallCheck(this, LangBrowserPropsContract);
    _this = _callSuper(this, LangBrowserPropsContract);
    _this.validateParams(language);
    _this.language = language;
    return _this;
  }
  _inherits(LangBrowserPropsContract, _StaticContract);
  return _createClass(LangBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(language) {
      var isValid = typeof language === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in Lang, BrowserProps parameters. language : {expected: string, received: ".concat(_typeof(language), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['main_lang', 'en-US']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.language];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('main_lang, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'main_lang';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js":
/*!*****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ LanguagesListBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var LanguagesListBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {[...string]} languagesList for example: ['en-US', 'en']
   */
  function LanguagesListBrowserPropsContract(languagesList) {
    var _this;
    _classCallCheck(this, LanguagesListBrowserPropsContract);
    _this = _callSuper(this, LanguagesListBrowserPropsContract);
    _this.validateParams(languagesList);
    _this.languagesList = languagesList;
    return _this;
  }
  _inherits(LanguagesListBrowserPropsContract, _StaticContract);
  return _createClass(LanguagesListBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(languagesList) {
      var isValid = Array.isArray(languagesList) && this._eachLangIsValid(languagesList);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: ".concat(_typeof(languagesList), "}"));
      }
    }
  }, {
    key: "_eachLangIsValid",
    value: function _eachLangIsValid(languagesList) {
      var validStrings = true;
      var _iterator = _createForOfIteratorHelper(languagesList),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (typeof i !== 'string') {
            validStrings = false;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validStrings;
    }

    /**
     * @return  {[string,string]} for example: ['main_lang', ['en-US', 'en']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.languagesList];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('languages, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'languages';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js":
/*!******************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MaxTouchPointsBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var MaxTouchPointsBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} maxTouchPoints, indicates the maximum number of simultaneous touch contact points that are supported by the current device.
   */
  function MaxTouchPointsBrowserPropsContract(maxTouchPoints) {
    var _this;
    _classCallCheck(this, MaxTouchPointsBrowserPropsContract);
    _this = _callSuper(this, MaxTouchPointsBrowserPropsContract);
    _this.validateParams(maxTouchPoints);
    _this.maxTouchPoints = maxTouchPoints;
    return _this;
  }
  _inherits(MaxTouchPointsBrowserPropsContract, _StaticContract);
  return _createClass(MaxTouchPointsBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(maxTouchPoints) {
      var isValid = maxTouchPoints !== undefined && typeof maxTouchPoints === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in MaxTouchPointsContract parameters. Expected: number, received: ".concat(_typeof(maxTouchPoints)));
      }
    }

    /**
     * @return  {[string, number]} for example: ['navigator_max_touch_points', 0]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.maxTouchPoints];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("navigator_max_touch_points, BrowserPropsContract - Contract verification failed");
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'navigator_max_touch_points';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js":
/*!******************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ OSBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var OSBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} platform string of type DOMString. for example: 'MacIntel'
   */
  function OSBrowserPropsContract(platform) {
    var _this;
    _classCallCheck(this, OSBrowserPropsContract);
    _this = _callSuper(this, OSBrowserPropsContract);
    _this.validateParams(platform);
    _this.platform = platform;
    return _this;
  }
  _inherits(OSBrowserPropsContract, _StaticContract);
  return _createClass(OSBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(platform) {
      var isValid = typeof platform === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in OS, BrowserProps parameters. platform : {expected: string, received: ".concat(_typeof(platform), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['os', 'Win32']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.platform];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('os, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js":
/*!************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ OSFamilyBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var OSFamilyBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} osName, for example: 'Macintosh'
   */
  function OSFamilyBrowserPropsContract(osName) {
    var _this;
    _classCallCheck(this, OSFamilyBrowserPropsContract);
    _this = _callSuper(this, OSFamilyBrowserPropsContract);
    _this.validateParams(osName);
    _this.osName = osName;
    return _this;
  }
  _inherits(OSFamilyBrowserPropsContract, _StaticContract);
  return _createClass(OSFamilyBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(osName) {
      var isValid = typeof osName === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: ".concat(_typeof(osName), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['os_version', 'posix']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.osName];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('os_family, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os_family';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js":
/*!*************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ OSVersionBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var OSVersionBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} version, for example: 10.157 or null
   */
  function OSVersionBrowserPropsContract(version) {
    var _this;
    _classCallCheck(this, OSVersionBrowserPropsContract);
    _this = _callSuper(this, OSVersionBrowserPropsContract);
    _this.validateParams(version);
    _this.version = version;
    return _this;
  }
  _inherits(OSVersionBrowserPropsContract, _StaticContract);
  return _createClass(OSVersionBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(version) {
      var isValid = typeof version === 'number' || version === null;
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: ".concat(_typeof(version), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['os_version', 10.157]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.version];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && (typeof message[1] === 'number' || message[1] === null);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('os_version, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os_version';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js":
/*!***********************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PluginsBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var PluginsBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {[[...string]]} plugins, Array of Arrays of strings : [['name':string, 'filename':string, 'description':string, 'version':string],...]
   */
  function PluginsBrowserPropsContract(plugins) {
    var _this;
    _classCallCheck(this, PluginsBrowserPropsContract);
    _this = _callSuper(this, PluginsBrowserPropsContract);
    _this.validateParams(plugins);
    _this.plugins = plugins;
    return _this;
  }
  _inherits(PluginsBrowserPropsContract, _StaticContract);
  return _createClass(PluginsBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(plugins) {
      var isValid = Array.isArray(plugins) && this._eachPluginIsValid(plugins);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: ".concat(_typeof(plugins), "}"));
      }
    }
  }, {
    key: "_eachPluginIsValid",
    value: function _eachPluginIsValid(plugins) {
      var validArrays = true;
      var validStrings = true;
      var validLengths = true;
      var _iterator = _createForOfIteratorHelper(plugins),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (!Array.isArray(i)) {
            validArrays = false;
          } else {
            if (i.length !== 4) {
              validLengths = false;
            }
            var _iterator2 = _createForOfIteratorHelper(i),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                if (typeof j !== 'string') {
                  validStrings = false;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validArrays && validLengths && validStrings;
    }

    /**
     * @return  {[string,[[...string]]]} for example : ['plugins',[['PDF Viewer', 'internal-pdf-viewer', 'Portable Document Format', ''], ['name2', 'filename2', 'description2', 'version2']]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.plugins];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('plugins, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'plugins';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js":
/*!************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ TimeZoneBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var TimeZoneBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {number} tz, positive number, for example: 180
   */
  function TimeZoneBrowserPropsContract(tz) {
    var _this;
    _classCallCheck(this, TimeZoneBrowserPropsContract);
    _this = _callSuper(this, TimeZoneBrowserPropsContract);
    _this.validateParams(tz);
    _this.tz = tz;
    return _this;
  }
  _inherits(TimeZoneBrowserPropsContract, _StaticContract);
  return _createClass(TimeZoneBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(tz) {
      var isValid = typeof tz === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: ".concat(_typeof(tz), "}"));
      }
    }

    /**
     * @return  {[string,number]} for example: ['time_zone', 180]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.tz];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('time_zone, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'time_zone';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js":
/*!*****************************************************************************************************!*\
  !*** ./src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ VersionClientBrowserPropsContract; }
/* harmony export */ });
/* harmony import */ var _StaticContract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StaticContract */ "./src/main/contract/staticContracts/StaticContract.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var VersionClientBrowserPropsContract = /*#__PURE__*/function (_StaticContract) {
  /**
   * @param  {string} scriptVersion, for example:'dev-version.0.18c28ea0'
   */
  function VersionClientBrowserPropsContract(scriptVersion) {
    var _this;
    _classCallCheck(this, VersionClientBrowserPropsContract);
    _this = _callSuper(this, VersionClientBrowserPropsContract);
    _this.validateParams(scriptVersion);
    _this.scriptVersion = scriptVersion;
    return _this;
  }
  _inherits(VersionClientBrowserPropsContract, _StaticContract);
  return _createClass(VersionClientBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(scriptVersion) {
      var isValid = typeof scriptVersion === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn(" wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: ".concat(_typeof(scriptVersion), "}"));
      }
    }

    /**
     * @return  {[string,string]} for example: ['version_client', 'dev-version.0.18c28ea0']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.scriptVersion];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn('version_client, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'version_client';
    }
  }]);
}(_StaticContract__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/ConfigMapper.js":
/*!***************************************!*\
  !*** ./src/main/core/ConfigMapper.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConfigMapper: function() { return /* binding */ ConfigMapper; }
/* harmony export */ });
/* harmony import */ var _api_StartupConfigurations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/StartupConfigurations */ "./src/main/api/StartupConfigurations.js");
/* harmony import */ var _contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./src/main/contract/APIConfigurationKey.js");
/* harmony import */ var _api_CollectionSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/CollectionSettings */ "./src/main/api/CollectionSettings.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var ConfigMapper = /*#__PURE__*/function () {
  function ConfigMapper() {
    _classCallCheck(this, ConfigMapper);
  }
  return _createClass(ConfigMapper, [{
    key: "mapStartupConfigurations",
    value: function mapStartupConfigurations(wupServerUrl, configurations) {
      return new _api_StartupConfigurations__WEBPACK_IMPORTED_MODULE_0__["default"](wupServerUrl, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.logServerURL], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableFramesProcessing], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableCustomElementsProcessing], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableSameSiteNoneAndSecureCookies], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.useUrlWorker] || false, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.workerUrl] || '', configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.isWupServerURLProxy] || false, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.clientSettings], new _api_CollectionSettings__WEBPACK_IMPORTED_MODULE_2__["default"](configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.collectionSettings]), configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableStartupCustomerSessionId], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.mutationMaxChunkSize] || 0, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.mutationChunkDelayMs] || 100, configurations[_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.passwordIdMaskingList], configurations[_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.enableUnmaskedValues] || false, configurations[_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.allowedUnmaskedValuesList] || [], configurations[_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.enableCoordinatesMasking] || false, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.isFlutterApp] || false, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMinifiedWupUri] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMinifiedWupUri] : true, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMinifiedLogUri] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMinifiedLogUri] : false, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.maxShadowDepth] || 0, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.iframeLoadingTimeout] || 5000, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.elementCategories], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.elementAttributes], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.recoveryServerURL] || '', configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMathDetect] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableMathDetect] : true, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableBrowserDisplayDetect] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableBrowserDisplayDetect] : true, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableGraphCard] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.enableGraphCard] : true, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.useLegacyZeroTimeout] !== undefined ? configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.useLegacyZeroTimeout] : true, configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.externalWASMModules] || [], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.elementSelectors], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.restrictedCookieDomains] || [], configurations[_contract_APIConfigurationKey__WEBPACK_IMPORTED_MODULE_1__.APIConfigurationKey.crossBrandSharedCookieDomain]);
    }
  }]);
}();

/***/ }),

/***/ "./src/main/core/DynamicCdApiLoader.js":
/*!*********************************************!*\
  !*** ./src/main/core/DynamicCdApiLoader.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DynamicCdApiLoader: function() { return /* binding */ DynamicCdApiLoader; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var DynamicCdApiLoader = /*#__PURE__*/function () {
  function DynamicCdApiLoader() {
    _classCallCheck(this, DynamicCdApiLoader);
  }
  return _createClass(DynamicCdApiLoader, [{
    key: "attachCdApi",
    value: function attachCdApi(window) {
      var cdApi = this.createCdApi(window);
      window.cdApi = cdApi;
      window.cdApi.listenToEvents();
    }
  }, {
    key: "createCdApi",
    value: function createCdApi(window) {
      // Create the "cdApi" object in the browser:
      return {
        // Map of events and their subscribed listeners
        _eventListeners: {},
        /**
         * Handle messages arriving from the SDK library
         * @param e - The message event
         */
        onMessage: function onMessage(e) {
          var eventListeners = this._eventListeners[e.data.type];

          // If there are no listeners, abort at this point
          if (!eventListeners) {
            return;
          }
          for (var i = 0; i < eventListeners.length; i++) {
            eventListeners[i](e.data.event);
          }
        },
        listenToEvents: function listenToEvents() {
          if (window.addEventListener) {
            window.addEventListener('message', this.onMessage.bind(this), true);
          } else {
            window.attachEvent('onmessage', this.onMessage.bind(this));
          }
        },
        registerSessionNumberChange: function registerSessionNumberChange(callback) {
          function onNotification(e) {
            var msg = e.data;
            if (msg.type === 'SNumNotification') {
              callback(msg.cdSNum);
            }
          }
          if (window.addEventListener) {
            window.addEventListener('message', onNotification, true);
          } else {
            window.attachEvent('onmessage', onNotification);
          }
        },
        addEventListener: function addEventListener(eventType, listenerFunction) {
          var listenersList = this._eventListeners[eventType];
          if (!listenersList) {
            listenersList = [];
            this._eventListeners[eventType] = listenersList;
          }
          listenersList.push(listenerFunction);
        },
        removeEventListener: function removeEventListener(eventType, listenerFunction) {
          var listenersList = this._eventListeners[eventType];

          // If nothing is subscribed for this event, return
          if (!listenersList) {
            return;
          }
          for (var i = 0; i < listenersList.length; i++) {
            if (listenersList[i] === listenerFunction) {
              listenersList.splice(i, 1); // Corrected to remove only the specific function
              break; // Exit loop after removing the listener
            }
          }
        },
        changeContext: function changeContext(contextName) {
          window.postMessage({
            type: 'ContextChange',
            context: contextName
          }, window.location.href);
        },
        startNewSession: function startNewSession(csid) {
          window.postMessage({
            type: 'ResetSession',
            resetReason: 'customerApi',
            csid: csid
          }, window.location.href);
        },
        pauseCollection: function pauseCollection() {
          window.postMessage({
            type: 'cdChangeState',
            toState: 'pause'
          }, window.location.href);
        },
        resumeCollection: function resumeCollection() {
          window.postMessage({
            type: 'cdChangeState',
            toState: 'run'
          }, window.location.href);
        },
        sendMetadata: function sendMetadata(data) {
          window.postMessage({
            type: 'cdCustomerMetadata',
            data: data
          }, window.location.href);
        },
        setCustomerSessionId: function setCustomerSessionId(csid) {
          window.postMessage({
            type: 'cdSetCsid',
            csid: csid
          }, window.location.href);
        },
        setCustomerBrand: function setCustomerBrand(brand) {
          window.postMessage({
            type: 'cdSetCustomerBrand',
            brand: brand
          }, window.location.href);
        }
      };
    }
  }]);
}();

/***/ }),

/***/ "./src/main/core/EncryptedMuidService.js":
/*!***********************************************!*\
  !*** ./src/main/core/EncryptedMuidService.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ EncryptedMuidService; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_storage_EncryptedIndexedDBStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../technicalServices/storage/EncryptedIndexedDBStorage */ "./src/main/technicalServices/storage/EncryptedIndexedDBStorage.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * A service for managing the Machine/User ID (MUID), which is encrypted and stored
 * securely in IndexedDB. The service handles MUID generation, validation, retrieval,
 * and queuing for server-side processing.
 */
var EncryptedMuidService = /*#__PURE__*/function () {
  function EncryptedMuidService(_ref) {
    var domUtils = _ref.domUtils,
      utils = _ref.utils,
      configurationRepository = _ref.configurationRepository,
      _ref$keys = _ref.keys,
      keys = _ref$keys === void 0 ? {
        indexedDBKey: "emuid"
      } : _ref$keys,
      _ref$encryptedIndexed = _ref.encryptedIndexedDB,
      encryptedIndexedDB = _ref$encryptedIndexed === void 0 ? new _technicalServices_storage_EncryptedIndexedDBStorage__WEBPACK_IMPORTED_MODULE_1__["default"]({
        storeName: "emuid"
      }) : _ref$encryptedIndexed;
    _classCallCheck(this, EncryptedMuidService);
    this._domUtils = domUtils;
    this._utils = utils;
    this._configurationRepository = configurationRepository;
    this._encryptedStorage = encryptedIndexedDB;
    this._keys = keys;
  }

  /**
   * Initializes the encrypted MUID. If a valid MUID exists, it is retrieved
   * from storage; otherwise, a new MUID is generated.
   *
   * @return {!Promise<string>} A promise that resolves to the initialized MUID.
   * @throws {Error} If the MUID initialization fails.
   */
  return _createClass(EncryptedMuidService, [{
    key: "getEncryptedMuid",
    value: (function () {
      var _getEncryptedMuid = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var muid;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Fetching existing Encrypted MUID from storage...");
              _context.next = 4;
              return this._fetchMuidFromStorage();
            case 4:
              muid = _context.sent;
              if (this._isValidMuid(muid)) {
                _context.next = 12;
                break;
              }
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("No valid Encrypted MUID found. Generating a new one...");
              _context.next = 9;
              return this._generateNewMuid();
            case 9:
              muid = _context.sent;
              _context.next = 12;
              return this._saveMuidToStorage(muid);
            case 12:
              return _context.abrupt("return", muid);
            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to initialize MUID:", _context.t0);
              return _context.abrupt("return", null);
            case 19:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 15]]);
      }));
      function getEncryptedMuid() {
        return _getEncryptedMuid.apply(this, arguments);
      }
      return getEncryptedMuid;
    }()
    /**
     * Fetches the encrypted MUID from storage.
     *
     * @return {!Promise<string|null>} A promise that resolves to the stored MUID,
     *     or null if no MUID exists.
     */
    )
  }, {
    key: "_fetchMuidFromStorage",
    value: (function () {
      var _fetchMuidFromStorage2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var data;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return this._encryptedStorage.getRecord(this._keys.indexedDBKey);
            case 3:
              data = _context2.sent;
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Fetched Encrypted MUID from storage.");
              return _context2.abrupt("return", (data === null || data === void 0 ? void 0 : data.emuid) || null);
            case 8:
              _context2.prev = 8;
              _context2.t0 = _context2["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Error retrieving Encrypted MUID from storage:", _context2.t0);
              return _context2.abrupt("return", null);
            case 12:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 8]]);
      }));
      function _fetchMuidFromStorage() {
        return _fetchMuidFromStorage2.apply(this, arguments);
      }
      return _fetchMuidFromStorage;
    }()
    /**
     * Saves the encrypted MUID to storage.
     *
     * @param {string} newEmuid The MUID to save.
     * @return {!Promise<void>} A promise that resolves when the MUID is saved.
     */
    )
  }, {
    key: "_saveMuidToStorage",
    value: (function () {
      var _saveMuidToStorage2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(newEmuid) {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return this._encryptedStorage.updateRecord(this._keys.indexedDBKey, {
                emuid: newEmuid
              });
            case 3:
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Encrypted MUID saved to storage.");
              _context3.next = 9;
              break;
            case 6:
              _context3.prev = 6;
              _context3.t0 = _context3["catch"](0);
              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Error saving Encrypted MUID to storage:", _context3.t0);
            case 9:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[0, 6]]);
      }));
      function _saveMuidToStorage(_x) {
        return _saveMuidToStorage2.apply(this, arguments);
      }
      return _saveMuidToStorage;
    }())
  }, {
    key: "_generateNewMuid",
    value: function _generateNewMuid() {
      return this._utils.dateNow() + '-' + this._utils.generateUUID().toUpperCase();
    }

    /**
     * Checks if the provided MUID is valid.
     *
     * @param {string} muid The MUID to validate.
     * @return {boolean} True if the MUID is valid; otherwise, false.
     */
  }, {
    key: "_isValidMuid",
    value: function _isValidMuid(muid) {
      if (!muid) return false;
      return /^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(muid);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/MuidService.js":
/*!**************************************!*\
  !*** ./src/main/core/MuidService.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MuidService; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var MuidService = /*#__PURE__*/function () {
  function MuidService(utils, dataQ, storageUtilsWrapper, configurationRepository) {
    _classCallCheck(this, MuidService);
    this.muid = null;
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this.EXPIRATION = utils.minutesToMilliseconds(365 * 24 * 60);
  }

  /**
   * Try and keep the muid - machine uid for ever. save in cookie and storage, and
   * use the one that exists if it does, and always save again for a year expiration
   * and eventually send to server
   */
  return _createClass(MuidService, [{
    key: "initMuid",
    value: function initMuid() {
      // Try to find muid in either cookie or local storage
      var tempCookie = this._storageUtilsWrapper.getCookie('bmuid');
      var tempStorage = this._storageUtilsWrapper.getFromLocalStorage('bmuid');
      this.muid = tempCookie || tempStorage; // if either one of them exists
      this.muid = this._utils.StorageUtils.validateBcId(this.muid);

      // If muid was not found in storage we generate one
      if (!this.muid) {
        this.muid = this._utils.dateNow() + '-' + this._utils.generateUUID().toUpperCase();
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("Generated a new muid: ".concat(this.muid));
      }
      this._saveAndSendMuid();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("Muid is: ".concat(this.muid));
    }
  }, {
    key: "updateMuid",
    value: function updateMuid(restoredMuid) {
      if (!restoredMuid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('MUID is not defined');
        return;
      }
      this.muid = restoredMuid;
      this.muid = this._utils.StorageUtils.validateBcId(this.muid);
      if (!this.muid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Invalid format of restored MUID');
        return;
      }
      this._saveAndSendMuid();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("Restored MUID is: ".concat(this.muid));
    }
  }, {
    key: "_saveAndSendMuid",
    value: function _saveAndSendMuid() {
      this._setStorageAndCookieKey();
      this._addMuidToQueue();
    }

    // Save muid to cookie and local storage
  }, {
    key: "_setStorageAndCookieKey",
    value: function _setStorageAndCookieKey() {
      this._storageUtilsWrapper.setCrossBrandCookie('bmuid', this.muid, this.EXPIRATION);
      this._storageUtilsWrapper.saveToLocalStorage('bmuid', this.muid);
    }

    // Send muid to server
  }, {
    key: "_addMuidToQueue",
    value: function _addMuidToQueue() {
      this._dataQ.addToQueue('static_fields', ['muid', this.muid], false);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/ServerUrlResolver.js":
/*!********************************************!*\
  !*** ./src/main/core/ServerUrlResolver.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ServerUrlResolver: function() { return /* binding */ ServerUrlResolver; }
/* harmony export */ });
/* harmony import */ var _contract_BCProtocolType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../contract/BCProtocolType */ "./src/main/contract/BCProtocolType.js");
/* harmony import */ var _const_communication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const/communication */ "./src/main/const/communication.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var ServerUrlResolver = /*#__PURE__*/function () {
  function ServerUrlResolver() {
    _classCallCheck(this, ServerUrlResolver);
  }
  return _createClass(ServerUrlResolver, [{
    key: "resolve",
    value:
    /**
     * Resolves the final URL by appending or replacing the protocol-specific path (v3/v4),
     * preserving customer-specific segments, and optionally updating the `cid` query param.
     *
     * @param {string} serverUrl - The full URL, which may include customer-specific segments.
     * @param {string} configuredCustomerID - The customer ID to set as `cid` param.
     * @param {BCProtocolType} configuredProtocolType - Determines which path (v3 or v4) to use.
     * @returns {string} - The fully resolved URL string.
     */
    function resolve(serverUrl, configuredCustomerID, configuredProtocolType) {
      var url = new URL(serverUrl);

      // Paths to identify and work with
      var currentPath = url.pathname;
      var knownPaths = _const_communication__WEBPACK_IMPORTED_MODULE_1__.bioCatchPreservedPaths;

      // Compute the new protocol path
      var newPathSegment = '';
      if (configuredProtocolType === _contract_BCProtocolType__WEBPACK_IMPORTED_MODULE_0__.BCProtocolType.V4) {
        newPathSegment = "/".concat(_const_communication__WEBPACK_IMPORTED_MODULE_1__.wupUrlV4Path);
      } else if (configuredProtocolType === _contract_BCProtocolType__WEBPACK_IMPORTED_MODULE_0__.BCProtocolType.V3) {
        newPathSegment = "/".concat(_const_communication__WEBPACK_IMPORTED_MODULE_1__.wupUrlV3Path);
      }

      // Find if current path includes a known protocol path, and slice before it
      var updatedPath = currentPath;
      var _iterator = _createForOfIteratorHelper(knownPaths),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var knownPath = _step.value;
          var index = currentPath.indexOf('/' + knownPath);
          if (index !== -1) {
            updatedPath = currentPath.substring(0, index);
            break;
          }
        }

        // Safely join base path with the desired protocol path (avoids double slashes)
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      url.pathname = updatedPath.replace(/\/+$/, '') + newPathSegment;

      // Handle `cid` query param
      if (configuredCustomerID) {
        url.searchParams.set('cid', configuredCustomerID);
      } else if (!url.searchParams.has('cid')) {
        console.warn('No cid found, and configuredCustomerID is undefined.');
      }
      return url.toString();
    }
  }]);
}();

/***/ }),

/***/ "./src/main/core/SystemBootstrapper.js":
/*!*********************************************!*\
  !*** ./src/main/core/SystemBootstrapper.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SystemBootstrapper; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _state_State__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./state/State */ "./src/main/core/state/State.js");
/* harmony import */ var _technicalServices_WorkerWrapperFactory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../technicalServices/WorkerWrapperFactory */ "./src/main/technicalServices/WorkerWrapperFactory.js");
/* harmony import */ var _technicalServices_WorkerCommunicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../technicalServices/WorkerCommunicator */ "./src/main/technicalServices/WorkerCommunicator.js");
/* harmony import */ var _technicalServices_DataQ__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../technicalServices/DataQ */ "./src/main/technicalServices/DataQ.js");
/* harmony import */ var _technicalServices_PerfMonitor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../technicalServices/PerfMonitor */ "./src/main/technicalServices/PerfMonitor.js");
/* harmony import */ var _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../technicalServices/SiteMapper */ "./src/main/technicalServices/SiteMapper.js");
/* harmony import */ var _technicalServices_externalLoaders_wasmModuleLoader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../technicalServices/externalLoaders/wasmModuleLoader */ "./src/main/technicalServices/externalLoaders/wasmModuleLoader.js");
/* harmony import */ var _context_ContextMgr__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./context/ContextMgr */ "./src/main/core/context/ContextMgr.js");
/* harmony import */ var _infrastructure_GlobalExceptionHandler__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../infrastructure/GlobalExceptionHandler */ "./src/main/infrastructure/GlobalExceptionHandler.js");
/* harmony import */ var _technicalServices_MessageBus__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../technicalServices/MessageBus */ "./src/main/technicalServices/MessageBus.js");
/* harmony import */ var _session_CidCache__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./session/CidCache */ "./src/main/core/session/CidCache.js");
/* harmony import */ var _state_ServerStateMgr__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./state/ServerStateMgr */ "./src/main/core/state/ServerStateMgr.js");
/* harmony import */ var _configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./configuration/ConfigurationRepository */ "./src/main/core/configuration/ConfigurationRepository.js");
/* harmony import */ var _configuration_ConfigurationService__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./configuration/ConfigurationService */ "./src/main/core/configuration/ConfigurationService.js");
/* harmony import */ var _collectors_events_SensorsDataQueue__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../collectors/events/SensorsDataQueue */ "./src/main/collectors/events/SensorsDataQueue.js");
/* harmony import */ var _collectors_events_ElementsCollector__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../collectors/events/ElementsCollector */ "./src/main/collectors/events/ElementsCollector.js");
/* harmony import */ var _frames_FramesHandlerFactory__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./frames/FramesHandlerFactory */ "./src/main/core/frames/FramesHandlerFactory.js");
/* harmony import */ var _collectors_FeatureService__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../collectors/FeatureService */ "./src/main/collectors/FeatureService.js");
/* harmony import */ var _state_PauseResumeManager__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./state/PauseResumeManager */ "./src/main/core/state/PauseResumeManager.js");
/* harmony import */ var _api_CustomerApiBridge__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../api/CustomerApiBridge */ "./src/main/api/CustomerApiBridge.js");
/* harmony import */ var _MuidService__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./MuidService */ "./src/main/core/MuidService.js");
/* harmony import */ var _session_PsidCache__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./session/PsidCache */ "./src/main/core/session/PsidCache.js");
/* harmony import */ var _session_PsidService__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./session/PsidService */ "./src/main/core/session/PsidService.js");
/* harmony import */ var _session_SidRepository__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./session/SidRepository */ "./src/main/core/session/SidRepository.js");
/* harmony import */ var _session_CsidCache__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./session/CsidCache */ "./src/main/core/session/CsidCache.js");
/* harmony import */ var _session_CsidService__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./session/CsidService */ "./src/main/core/session/CsidService.js");
/* harmony import */ var _session_SessionService__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./session/SessionService */ "./src/main/core/session/SessionService.js");
/* harmony import */ var _metadata_MetadataService__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./metadata/MetadataService */ "./src/main/core/metadata/MetadataService.js");
/* harmony import */ var _services_SlaveListener__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../services/SlaveListener */ "./src/main/services/SlaveListener.js");
/* harmony import */ var _collectors_FeaturesBuilder__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../collectors/FeaturesBuilder */ "./src/main/collectors/FeaturesBuilder.js");
/* harmony import */ var _context_ContextApiHandler__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./context/ContextApiHandler */ "./src/main/core/context/ContextApiHandler.js");
/* harmony import */ var _state_StateService__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./state/StateService */ "./src/main/core/state/StateService.js");
/* harmony import */ var _api_ClientEventService__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../api/ClientEventService */ "./src/main/api/ClientEventService.js");
/* harmony import */ var _events_ApiContextChangeEventHandler__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../events/ApiContextChangeEventHandler */ "./src/main/events/ApiContextChangeEventHandler.js");
/* harmony import */ var _events_ApiResetSessionEventHandler__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../events/ApiResetSessionEventHandler */ "./src/main/events/ApiResetSessionEventHandler.js");
/* harmony import */ var _events_ApiCustomerMetadataEventHandler__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../events/ApiCustomerMetadataEventHandler */ "./src/main/events/ApiCustomerMetadataEventHandler.js");
/* harmony import */ var _events_ApiChangeStateEventHandler__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../events/ApiChangeStateEventHandler */ "./src/main/events/ApiChangeStateEventHandler.js");
/* harmony import */ var _events_ApiSetCsidEventHandler__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../events/ApiSetCsidEventHandler */ "./src/main/events/ApiSetCsidEventHandler.js");
/* harmony import */ var _events_ApiSetPsidEventHandler__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../events/ApiSetPsidEventHandler */ "./src/main/events/ApiSetPsidEventHandler.js");
/* harmony import */ var _events_NewSessionStartedEventHandler__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../events/NewSessionStartedEventHandler */ "./src/main/events/NewSessionStartedEventHandler.js");
/* harmony import */ var _events_ConfigurationLoadedEventHandler__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../events/ConfigurationLoadedEventHandler */ "./src/main/events/ConfigurationLoadedEventHandler.js");
/* harmony import */ var _events_StateChangedEventHandler__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../events/StateChangedEventHandler */ "./src/main/events/StateChangedEventHandler.js");
/* harmony import */ var _events_ApiSetCustomerBrandEventHandler__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../events/ApiSetCustomerBrandEventHandler */ "./src/main/events/ApiSetCustomerBrandEventHandler.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
/* harmony import */ var _services_SameCharService__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../services/SameCharService */ "./src/main/services/SameCharService.js");
/* harmony import */ var _services_HeartBeatService__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../services/HeartBeatService */ "./src/main/services/HeartBeatService.js");
/* harmony import */ var _state_HeartBeatErrorsState__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./state/HeartBeatErrorsState */ "./src/main/core/state/HeartBeatErrorsState.js");
/* harmony import */ var _session_SessionInfoService__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./session/SessionInfoService */ "./src/main/core/session/SessionInfoService.js");
/* harmony import */ var _collectors_SensorGateKeeper__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ../collectors/SensorGateKeeper */ "./src/main/collectors/SensorGateKeeper.js");
/* harmony import */ var _customelements_CustomElementsDetector__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./customelements/CustomElementsDetector */ "./src/main/core/customelements/CustomElementsDetector.js");
/* harmony import */ var _browsercontexts_BrowserContextsCache__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./browsercontexts/BrowserContextsCache */ "./src/main/core/browsercontexts/BrowserContextsCache.js");
/* harmony import */ var _browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
/* harmony import */ var _configuration_StartupConfigurationLoader__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./configuration/StartupConfigurationLoader */ "./src/main/core/configuration/StartupConfigurationLoader.js");
/* harmony import */ var _masking_MaskingService__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
/* harmony import */ var _technicalServices_log_LogBridge__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ../technicalServices/log/LogBridge */ "./src/main/technicalServices/log/LogBridge.js");
/* harmony import */ var _technicalServices_log_LogDataQ__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ../technicalServices/log/LogDataQ */ "./src/main/technicalServices/log/LogDataQ.js");
/* harmony import */ var _technicalServices_StorageUtilsWrapper__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ../technicalServices/StorageUtilsWrapper */ "./src/main/technicalServices/StorageUtilsWrapper.js");
/* harmony import */ var _branding_BrandService__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./branding/BrandService */ "./src/main/core/branding/BrandService.js");
/* harmony import */ var _branding_BrandRepository__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./branding/BrandRepository */ "./src/main/core/branding/BrandRepository.js");
/* harmony import */ var _events_RestoredMuidEventHandler__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ../events/RestoredMuidEventHandler */ "./src/main/events/RestoredMuidEventHandler.js");
/* harmony import */ var _api_CoordinatesMaskingConfigurationUpdater__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ../api/CoordinatesMaskingConfigurationUpdater */ "./src/main/api/CoordinatesMaskingConfigurationUpdater.js");
/* harmony import */ var _session_AgentIdCache__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./session/AgentIdCache */ "./src/main/core/session/AgentIdCache.js");
/* harmony import */ var _session_AgentIdService__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./session/AgentIdService */ "./src/main/core/session/AgentIdService.js");
/* harmony import */ var _collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ../collectors/FeaturesList */ "./src/main/collectors/FeaturesList.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ../contract/AgentType */ "./src/main/contract/AgentType.js");
/* harmony import */ var _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ../contract/CollectionMode */ "./src/main/contract/CollectionMode.js");
/* harmony import */ var _flutter_FlutterSdkBridge__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ../flutter/FlutterSdkBridge */ "./src/main/flutter/FlutterSdkBridge.js");
/* harmony import */ var _session_ProtocolTypeCache__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./session/ProtocolTypeCache */ "./src/main/core/session/ProtocolTypeCache.js");
/* harmony import */ var _session_ServerUrlCache__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./session/ServerUrlCache */ "./src/main/core/session/ServerUrlCache.js");
/* harmony import */ var _EncryptedMuidService__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./EncryptedMuidService */ "./src/main/core/EncryptedMuidService.js");
/* harmony import */ var _technicalServices_categories_CategoryService__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ../technicalServices/categories/CategoryService */ "./src/main/technicalServices/categories/CategoryService.js");
/* harmony import */ var _technicalServices_dev_collectors_DevDebugDataQ__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ../technicalServices/dev_collectors/DevDebugDataQ */ "./src/main/technicalServices/dev_collectors/DevDebugDataQ.js");
/* harmony import */ var _collectors_static_timing_service_FontTimingService__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ../collectors/static/timing/service/FontTimingService */ "./src/main/collectors/static/timing/service/FontTimingService.js");
/* harmony import */ var _technicalServices_categories_ContextCategoryService__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ../technicalServices/categories/ContextCategoryService */ "./src/main/technicalServices/categories/ContextCategoryService.js");
/* harmony import */ var _collectorsV2_FeatureServiceV2__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ../collectorsV2/FeatureServiceV2 */ "./src/main/collectorsV2/FeatureServiceV2.js");
/* harmony import */ var _collectorsV2_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ../collectorsV2/injectors/DependenciesContainer */ "./src/main/collectorsV2/injectors/DependenciesContainer.js");
/* harmony import */ var _worker_fonts_detector_FontDetectorProvider__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ../../worker/fonts/detector/FontDetectorProvider */ "./src/worker/fonts/detector/FontDetectorProvider.js");
/* harmony import */ var _technicalServices_agenticDomInjection_AgenticDomInjectionDetector__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ../technicalServices/agenticDomInjection/AgenticDomInjectionDetector */ "./src/main/technicalServices/agenticDomInjection/AgenticDomInjectionDetector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// eslint-disable-next-line max-classes-per-file


















































































var SystemBootstrapper = /*#__PURE__*/function () {
  function SystemBootstrapper() {
    _classCallCheck(this, SystemBootstrapper);
    this._serverWorker = null;
    this._serverWorkerCommunicator = null;
    this._configurationService = null;
    this._featureBuilder = null;
    this._featureService = null;
    this._dataQ = null;
    this._frameHandler = null;
    this._eventHandlers = [];
    this._contextMgr = null;
    this._runWorker = function (configurations) {
      var workerWrapperFactory = new _technicalServices_WorkerWrapperFactory__WEBPACK_IMPORTED_MODULE_4__["default"](configurations.getUseUrlWorker(), configurations.getWorkerUrl());
      return workerWrapperFactory.create();
    };
  }
  return _createClass(SystemBootstrapper, [{
    key: "start",
    value: function start(cdApiFacade, configurations) {
      var customerSessionID = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      this._loadSystem(cdApiFacade, configurations, customerSessionID);
    }
  }, {
    key: "stop",
    value: function stop() {
      if (this._serverWorker) {
        this._serverWorker.close();
      }
      if (this.heartBeatService) {
        this.heartBeatService.stop();
      }
    }
  }, {
    key: "registerPostLoadEvents",
    value: function registerPostLoadEvents() {
      this._slaveListener.onResetSessionTrigger.subscribe(this._sessionService.resetSession.bind(this._sessionService));
    }
  }, {
    key: "flushAllMessages",
    value: function flushAllMessages() {
      this._dataQ.flushAllMessages();
    }
  }, {
    key: "handleCoordinatesMaskingConfigurationUpdate",
    value: function handleCoordinatesMaskingConfigurationUpdate(isEnabled) {
      this._coordinatesMaskingConfigurationUpdater.updateConfig(isEnabled);
    }
  }, {
    key: "getServerWorkerCommunicator",
    value: function getServerWorkerCommunicator() {
      return this._serverWorkerCommunicator;
    }
  }, {
    key: "getFeatureBuilder",
    value: function getFeatureBuilder() {
      return this._featureBuilder;
    }
  }, {
    key: "getFeatureService",
    value: function getFeatureService() {
      return this._featureService;
    }
  }, {
    key: "getConfigurationService",
    value: function getConfigurationService() {
      return this._configurationService;
    }
  }, {
    key: "getConfigurationRepository",
    value: function getConfigurationRepository() {
      return this._configurationRepository;
    }
  }, {
    key: "getSessionService",
    value: function getSessionService() {
      return this._sessionService;
    }
  }, {
    key: "getContextMgr",
    value: function getContextMgr() {
      return this._contextMgr;
    }
  }, {
    key: "getMuidService",
    value: function getMuidService() {
      return this._muidService;
    }
  }, {
    key: "getEncryptedMuidService",
    value: function getEncryptedMuidService() {
      return this._muidEncryptedService;
    }
  }, {
    key: "getApiBridge",
    value: function getApiBridge() {
      return this._customerApiBridge;
    }
  }, {
    key: "getPerfMonitor",
    value: function getPerfMonitor() {
      return this._perfMonitor;
    }
  }, {
    key: "getServerStateMgr",
    value: function getServerStateMgr() {
      return this._serverStateMgr;
    }
  }, {
    key: "getMessageBus",
    value: function getMessageBus() {
      return this._msgBus;
    }
  }, {
    key: "getAgentIdService",
    value: function getAgentIdService() {
      return this._agentIdService;
    }
  }, {
    key: "getExternalWasmModuleLoader",
    value: function getExternalWasmModuleLoader() {
      return this._wasmModuleLoader;
    }
  }, {
    key: "_loadSystem",
    value: function _loadSystem(cdApiFacade, configurations, customerSessionID) {
      var _this$_configurationR, _this$_configurationR2, _this$_configurationR3;
      this._runServerWorker(configurations);
      this._serverWorkerCommunicator = new _technicalServices_WorkerCommunicator__WEBPACK_IMPORTED_MODULE_5__["default"]();
      this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);
      var logPerfDataQ = new _technicalServices_log_LogDataQ__WEBPACK_IMPORTED_MODULE_59__["default"](_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], this._serverWorkerCommunicator, null, 'logPerfQPassWorkerInterval', _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__.WorkerCommand.sendLogCommand);
      this._perfMonitor = new _technicalServices_PerfMonitor__WEBPACK_IMPORTED_MODULE_7__["default"](logPerfDataQ);
      this._configurationRepository = new _configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_15__["default"]();
      var startUpConfigurationLoader = new _configuration_StartupConfigurationLoader__WEBPACK_IMPORTED_MODULE_56__["default"](this._configurationRepository, configurations);
      startUpConfigurationLoader.loadStartUpConfigurations();
      var enableWupMessagesHashing = (_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableWupMessagesHashing);
      this._shouldEnableWorkerWupMessagesHashing(enableWupMessagesHashing, this._serverWorkerCommunicator);
      var storageUtilsWrapper = new _technicalServices_StorageUtilsWrapper__WEBPACK_IMPORTED_MODULE_60__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._configurationRepository, configurations);
      var contextSiteMapper = new _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_8__["default"](self.MutationObserver, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], 'contextConfiguration', null, true, 400);
      this._contextCategoryService = new _technicalServices_categories_ContextCategoryService__WEBPACK_IMPORTED_MODULE_77__["default"](this._configurationRepository);
      this._contextMgr = new _context_ContextMgr__WEBPACK_IMPORTED_MODULE_10__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], contextSiteMapper, this._serverWorkerCommunicator, storageUtilsWrapper, this._contextCategoryService);
      var mainLogBridge = new _technicalServices_log_LogBridge__WEBPACK_IMPORTED_MODULE_58__["default"](logPerfDataQ, this._contextMgr.url);
      var logger = new _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__.Logger(mainLogBridge);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__["default"].setLogger(logger);
      var externalWasmModules = (_this$_configurationR2 = this._configurationRepository) === null || _this$_configurationR2 === void 0 ? void 0 : _this$_configurationR2.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.externalWASMModules);
      this._wasmModuleLoader = new _technicalServices_externalLoaders_wasmModuleLoader__WEBPACK_IMPORTED_MODULE_9__["default"](externalWasmModules);
      var collectionMode = (_this$_configurationR3 = this._configurationRepository) === null || _this$_configurationR3 === void 0 ? void 0 : _this$_configurationR3.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.collectionMode);
      this._registerFeatures(collectionMode);
      this._currScriptName = document.currentScript ? document.currentScript.src : '';
      this._globalexceptionHandler = new _infrastructure_GlobalExceptionHandler__WEBPACK_IMPORTED_MODULE_11__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._currScriptName);
      this._msgBus = new _technicalServices_MessageBus__WEBPACK_IMPORTED_MODULE_12__["default"]();
      this._dataQ = new _technicalServices_DataQ__WEBPACK_IMPORTED_MODULE_6__["default"](_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], this._serverWorkerCommunicator, this._contextMgr, 'dataQPassWorkerInterval', _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__.WorkerCommand.sendDataCommand);
      this._devDebugDataQueue = new _technicalServices_dev_collectors_DevDebugDataQ__WEBPACK_IMPORTED_MODULE_75__.DevDebugDataQ(this._configurationRepository, this._dataQ);
      this._agentIdCache = new _session_AgentIdCache__WEBPACK_IMPORTED_MODULE_65__["default"](storageUtilsWrapper);
      this._agentIdService = new _session_AgentIdService__WEBPACK_IMPORTED_MODULE_66__["default"](this._agentIdCache, this._serverWorkerCommunicator);
      this._cidCache = new _session_CidCache__WEBPACK_IMPORTED_MODULE_13__["default"](configurations.getWupServerURL());
      this._serverStateMgr = new _state_ServerStateMgr__WEBPACK_IMPORTED_MODULE_14__["default"](this._serverWorkerCommunicator, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._agentIdService);
      this._sessionInfoService = new _session_SessionInfoService__WEBPACK_IMPORTED_MODULE_51__["default"]();
      this._sensorGateKeeper = new _collectors_SensorGateKeeper__WEBPACK_IMPORTED_MODULE_52__["default"](this._sessionInfoService, this._configurationRepository);
      this._configurationService = new _configuration_ConfigurationService__WEBPACK_IMPORTED_MODULE_16__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._configurationRepository, this._msgBus, this._cidCache, this._serverWorkerCommunicator);
      this._sensorDataQ = new _collectors_events_SensorsDataQueue__WEBPACK_IMPORTED_MODULE_17__["default"](this._configurationRepository, this._dataQ, this._msgBus, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._sensorGateKeeper);
      this._maskingService = new _masking_MaskingService__WEBPACK_IMPORTED_MODULE_57__["default"](this._configurationRepository);
      var elementCategories = configurations.getElementCategories();
      var elementAttributes = configurations.getElementAttributes();
      var elementSelectors = configurations.getElementSelectors();
      this._categoryService = new _technicalServices_categories_CategoryService__WEBPACK_IMPORTED_MODULE_74__["default"](elementCategories, elementAttributes, elementSelectors);
      this._elementsUtils = new _collectors_events_ElementsCollector__WEBPACK_IMPORTED_MODULE_18__["default"](this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._dataQ, this._contextMgr, this._maskingService, this._categoryService, false);
      this._elementsUtilsV2 = new _collectors_events_ElementsCollector__WEBPACK_IMPORTED_MODULE_18__["default"](this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._devDebugDataQueue, this._contextMgr, this._maskingService, this._categoryService, true);
      var browserContextCache = new _browsercontexts_BrowserContextsCache__WEBPACK_IMPORTED_MODULE_54__["default"]();
      var framesHandlerFactory = new _frames_FramesHandlerFactory__WEBPACK_IMPORTED_MODULE_19__["default"](this._configurationRepository, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"]);
      this._frameHandler = framesHandlerFactory.create();
      this._sameChar = new _services_SameCharService__WEBPACK_IMPORTED_MODULE_48__["default"](); // eslint-disable-next-line max-len
      _collectorsV2_injectors_DependenciesContainer__WEBPACK_IMPORTED_MODULE_79__["default"].insert(_collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__["default"], this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._elementsUtilsV2, this._dataQ, this._devDebugDataQueue, configurations, this._sessionService, this._muidService, this._muidEncryptedService, this._perfMonitor, this._sensorDataQ, this._msgBus, this._cidCache, this._sameChar, this._maskingService, this._categoryService, this._wasmModuleLoader, this._contextMgr, this._fontTimingService);
      this._featureServiceV2 = new _collectorsV2_FeatureServiceV2__WEBPACK_IMPORTED_MODULE_78__["default"](this._configurationRepository, this._elementsUtilsV2, this._msgBus);
      this._featureService = new _collectors_FeatureService__WEBPACK_IMPORTED_MODULE_20__["default"](_collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__["default"], this._frameHandler, this._configurationRepository, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], browserContextCache);
      var customElementsDetector = new _customelements_CustomElementsDetector__WEBPACK_IMPORTED_MODULE_53__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._msgBus, this._configurationRepository);

      // Create the state service which is holding the current state of the SDK
      this._stateService = new _state_StateService__WEBPACK_IMPORTED_MODULE_34__["default"](this._msgBus);
      this._pauseResumeMgr = new _state_PauseResumeManager__WEBPACK_IMPORTED_MODULE_21__["default"](this._featureService, this._configurationRepository, this._dataQ, this._stateService, this._serverWorkerCommunicator);
      this._customerApiBridge = new _api_CustomerApiBridge__WEBPACK_IMPORTED_MODULE_22__["default"](this._pauseResumeMgr, this._msgBus, cdApiFacade, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"]);
      if (this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.agentType) !== _contract_AgentType__WEBPACK_IMPORTED_MODULE_68__.AgentType.SECONDARY) {
        this._muidService = new _MuidService__WEBPACK_IMPORTED_MODULE_23__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._dataQ, storageUtilsWrapper, this._configurationRepository);
        this._muidEncryptedService = new _EncryptedMuidService__WEBPACK_IMPORTED_MODULE_73__["default"]({
          domUtils: _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"],
          utils: _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"],
          storage: storageUtilsWrapper,
          configurationRepository: this._configurationRepository
        });
      }
      this._psidCache = new _session_PsidCache__WEBPACK_IMPORTED_MODULE_24__["default"]();
      var psidService = new _session_PsidService__WEBPACK_IMPORTED_MODULE_25__["default"](this._psidCache, this._serverWorkerCommunicator);
      var resetSessionSiteMapper = new _technicalServices_SiteMapper__WEBPACK_IMPORTED_MODULE_8__["default"](self.MutationObserver, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], 'resetSessionConfig');
      var sidRepository = new _session_SidRepository__WEBPACK_IMPORTED_MODULE_26__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], storageUtilsWrapper, this._configurationRepository);
      this._csidCache = new _session_CsidCache__WEBPACK_IMPORTED_MODULE_27__["default"]();
      if (customerSessionID) {
        this._csidCache.set(customerSessionID);
      }
      var csidService = new _session_CsidService__WEBPACK_IMPORTED_MODULE_28__["default"](this._customerApiBridge, this._csidCache, this._serverWorkerCommunicator);
      var brandRepository = new _branding_BrandRepository__WEBPACK_IMPORTED_MODULE_62__["default"](_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], storageUtilsWrapper);
      this._brandService = new _branding_BrandService__WEBPACK_IMPORTED_MODULE_61__["default"](this._serverWorkerCommunicator, brandRepository);
      this._coordinatesMaskingConfigurationUpdater = new _api_CoordinatesMaskingConfigurationUpdater__WEBPACK_IMPORTED_MODULE_64__["default"](this._configurationRepository);
      var serverUrlCache = new _session_ServerUrlCache__WEBPACK_IMPORTED_MODULE_72__["default"](configurations.getWupServerURL());
      var protocolTypeCache = new _session_ProtocolTypeCache__WEBPACK_IMPORTED_MODULE_71__["default"](configurations.getWupServerURL());
      var minifiedWupUriEnabled = configurations.isMinifiedWupUriEnabled();
      this._sessionService = new _session_SessionService__WEBPACK_IMPORTED_MODULE_29__["default"](this._msgBus, this._configurationService, this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"], this._serverWorkerCommunicator, this._contextMgr, this._muidService, this._serverStateMgr, resetSessionSiteMapper, sidRepository, serverUrlCache, this._cidCache, protocolTypeCache, minifiedWupUriEnabled, csidService, this._csidCache, this._psidCache, this._brandService, this._agentIdService, configurations.getRecoveryServerURL());
      this._metadataService = new _metadata_MetadataService__WEBPACK_IMPORTED_MODULE_30__["default"](this._configurationRepository, this._dataQ);

      // create the slave listener that will manage slaves slow and communication
      this._slaveListener = new _services_SlaveListener__WEBPACK_IMPORTED_MODULE_31__["default"](this._dataQ, this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], logPerfDataQ, this._contextMgr);
      this._slaveListener.listen();
      this._fontTimingService = new _collectors_static_timing_service_FontTimingService__WEBPACK_IMPORTED_MODULE_76__["default"]();
      this._fontDetectorProvider = new _worker_fonts_detector_FontDetectorProvider__WEBPACK_IMPORTED_MODULE_80__["default"]();
      this._agenticDomInjectionDetector = new _technicalServices_agenticDomInjection_AgenticDomInjectionDetector__WEBPACK_IMPORTED_MODULE_81__["default"](this._configurationRepository);

      // Use the default MutationObserver on the window since this is the one that did not created issues
      this._featureBuilder = new _collectors_FeaturesBuilder__WEBPACK_IMPORTED_MODULE_32__["default"](_collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__["default"], this._configurationRepository, _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"], this._elementsUtils, self.MutationObserver, this._dataQ, this._devDebugDataQueue, configurations, this._sessionService, this._muidService, this._muidEncryptedService, this._perfMonitor, this._sensorDataQ, this._msgBus, this._cidCache, this._sameChar, this._maskingService, this._categoryService, this._wasmModuleLoader, this._contextMgr, this._fontTimingService, this._fontDetectorProvider, this._agenticDomInjectionDetector);

      // Leave this crappy class until we remove its implementation to a better place.
      this._contextApiHandler = new _context_ContextApiHandler__WEBPACK_IMPORTED_MODULE_33__["default"](this._contextMgr, this._dataQ);

      // subscribe the FeatureService to context changes
      this._contextMgr.onContextChange.subscribe(this._featureService.runPerContextFeatures.bind(this._featureService));

      // Create the service for client events (API events)
      var clientEventService = new _api_ClientEventService__WEBPACK_IMPORTED_MODULE_35__["default"]();

      // Create the heartBeat postMessage service
      this.heartBeatService = new _services_HeartBeatService__WEBPACK_IMPORTED_MODULE_49__["default"](this._serverWorkerCommunicator, new _state_HeartBeatErrorsState__WEBPACK_IMPORTED_MODULE_50__["default"](), this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.heartBeatMessageInterval));
      this.heartBeatService.start();

      // Create the event handlers
      this._eventHandlers.push(new _events_RestoredMuidEventHandler__WEBPACK_IMPORTED_MODULE_63__["default"](this._msgBus, this._muidService, clientEventService, this._serverWorkerCommunicator));
      this._eventHandlers.push(new _events_ApiContextChangeEventHandler__WEBPACK_IMPORTED_MODULE_36__["default"](this._msgBus, this._contextMgr));
      this._eventHandlers.push(new _events_ApiResetSessionEventHandler__WEBPACK_IMPORTED_MODULE_37__["default"](this._msgBus, this._sessionService));
      this._eventHandlers.push(new _events_ApiCustomerMetadataEventHandler__WEBPACK_IMPORTED_MODULE_38__["default"](this._msgBus, this._metadataService));
      this._eventHandlers.push(new _events_ApiChangeStateEventHandler__WEBPACK_IMPORTED_MODULE_39__["default"](this._msgBus, this._pauseResumeMgr, this._slaveListener));
      this._eventHandlers.push(new _events_ApiSetCsidEventHandler__WEBPACK_IMPORTED_MODULE_40__["default"](this._msgBus, csidService));
      this._eventHandlers.push(new _events_ApiSetPsidEventHandler__WEBPACK_IMPORTED_MODULE_41__["default"](this._msgBus, psidService));
      this._eventHandlers.push(new _events_ApiSetCustomerBrandEventHandler__WEBPACK_IMPORTED_MODULE_45__["default"](this._msgBus, this._brandService));
      this._eventHandlers.push(new _events_StateChangedEventHandler__WEBPACK_IMPORTED_MODULE_44__["default"](this._msgBus, clientEventService));
      this._eventHandlers.push(new _events_ConfigurationLoadedEventHandler__WEBPACK_IMPORTED_MODULE_43__["default"](this._msgBus, this._featureService, this._featureServiceV2, this._dataQ, this._pauseResumeMgr, this._metadataService, logger, this._contextMgr, this._sessionService, this._sensorDataQ, this._slaveListener, this._stateService, this._perfMonitor, this.heartBeatService, this._sensorGateKeeper, sidRepository, this._coordinatesMaskingConfigurationUpdater));
      this._eventHandlers.push(new _events_NewSessionStartedEventHandler__WEBPACK_IMPORTED_MODULE_42__["default"](this._msgBus, this._featureService, this._customerApiBridge, this._contextMgr, clientEventService, this._sessionInfoService));
      if (this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableCustomElementsProcessing)) {
        customElementsDetector.start(new _browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_55__["default"](window.self, _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_47__["default"]));
      }

      // Set the default log address if available
      if (configurations.getLogServerURL()) {
        this._configurationService.updateLogUrlToWorker(this._sessionService.sessionId, this._csidCache.get(), this._serverWorkerCommunicator);
      }
      if (configurations.isFlutterApp()) {
        if (window.bcClient) {
          window.bcClient.flutterBridge = new _flutter_FlutterSdkBridge__WEBPACK_IMPORTED_MODULE_70__.FlutterSdkBridge(this._msgBus);
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__["default"].error('Cannot initiate FlutterSdkBridge: bcClient object not found.');
        }
      }

      // Mark the state as starting
      this._stateService.updateState(_state_State__WEBPACK_IMPORTED_MODULE_3__.State.starting);
    }
  }, {
    key: "_runServerWorker",
    value: function _runServerWorker(configurations) {
      this._serverWorker = this._runWorker(configurations);
    }
  }, {
    key: "_registerFeatures",
    value: function _registerFeatures(collectionMode) {
      switch (collectionMode) {
        case _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_69__.CollectionMode.LEAN:
          {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__["default"].info('Build features per collection mode: LEAN');
            _collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__["default"].registerLeanFeatures();
            break;
          }
        default:
          {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_46__["default"].info('Build features per collection mode: FULL');
            _collectors_FeaturesList__WEBPACK_IMPORTED_MODULE_67__["default"].register();
            return;
          }
      }
    }
  }, {
    key: "_shouldEnableWorkerWupMessagesHashing",
    value: function _shouldEnableWorkerWupMessagesHashing(enableWupMessagesHashing, serverWorkerCommunicator) {
      if (!enableWupMessagesHashing) return;
      serverWorkerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__.WorkerCommand.enableWupMessagesHashingCommand, {
        enableWupMessagesHashing: enableWupMessagesHashing
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/branding/BrandRepository.js":
/*!***************************************************!*\
  !*** ./src/main/core/branding/BrandRepository.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrandRepository; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var BrandRepository = /*#__PURE__*/function () {
  function BrandRepository(utils, storageUtilsWrapper) {
    _classCallCheck(this, BrandRepository);
    this.brandKey = 'brand';
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this.COOKIE_EXPIRATION_IN_MILLISECONDS = this._utils.minutesToMilliseconds(365 * 24 * 60);
  }
  return _createClass(BrandRepository, [{
    key: "get",
    value: function get() {
      // First try to get the brand from the cookie and validate it.
      var brandFromCookie = this._storageUtilsWrapper.getCookie(this.brandKey);
      var brand = this._validateBrand(brandFromCookie);

      // If the sid doesn't exist or was not valid we try to get it from the local storage
      if (!brand) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Brand was not found in cookie. Trying to get it from the local storage.');
        var brandFromLocalStorage = this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);
        brand = this._validateBrand(brandFromLocalStorage);
        if (!brand) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Brand was not found in local storage.');
          return null;
        }
      }
      return brand;
    }
  }, {
    key: "set",
    value: function set(brand) {
      var val = this._validateBrand(brand);
      if (!val) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Brand ".concat(brand, " is invalid. Will not save it."));
        return;
      }

      // Save both to local storage and to cookie
      if (!this._storageUtilsWrapper.saveToLocalStorage(this.brandKey, val)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed saving brand ".concat(brand, " to local storage."));
      }

      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this.brandKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed saving brand ".concat(brand, " to cookie."));
      }
    }
  }, {
    key: "_validateBrand",
    value: function _validateBrand(brandFull) {
      return brandFull || null;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/branding/BrandService.js":
/*!************************************************!*\
  !*** ./src/main/core/branding/BrandService.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrandService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var BrandService = /*#__PURE__*/function () {
  /**
   *
   * @param workerCommunicator
   * @param brandRepository {BrandRepository}
   */
  function BrandService(workerCommunicator, brandRepository) {
    _classCallCheck(this, BrandService);
    this._workerCommunicator = workerCommunicator;
    this._brandRepository = brandRepository;
  }
  return _createClass(BrandService, [{
    key: "set",
    value: function set(brand) {
      if (!this._validateBrand(brand)) {
        return;
      }
      this._brandRepository.set(brand);
      this._workerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateBrandCommand, {
        brand: brand
      });
    }
  }, {
    key: "update",
    value: function update() {
      var foundBrand = this._brandRepository.get();
      if (foundBrand) {
        this.set(foundBrand);
      }
    }
  }, {
    key: "_validateBrand",
    value: function _validateBrand(brand) {
      if (brand.length > 200) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("The received brand name length is greater than 200. It is illegal. Ignoring the API call");
        return false;
      }
      if (!/^[a-zA-Z0-9.\-,_ ]+$/.test(brand)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call");
        return false;
      }
      return true;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/browsercontexts/BrowserContext.js":
/*!*********************************************************!*\
  !*** ./src/main/core/browsercontexts/BrowserContext.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserContext; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/DOMUtils */ "./src/main/technicalServices/DOMUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * Represents a browser context with custom access to it's private DOM
 */
var BrowserContext = /*#__PURE__*/function () {
  /**
   * @param {Window} context A DOM containing a document
   * @param {DOMUtils} domUtils DOM utilities for frame detection
   */
  function BrowserContext(context, domUtils) {
    _classCallCheck(this, BrowserContext);
    this.context = context || window.self;
    this.domUtils = domUtils || _technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_1__["default"];
  }
  return _createClass(BrowserContext, [{
    key: "Context",
    get: function get() {
      return this.context;
    }

    /**
     *
     * @returns {Document} an accessible browser context document
     */
  }, {
    key: "getDocument",
    value: function getDocument() {
      return this.context.document;
    }
  }, {
    key: "collectAllElementsBySelectorAsync",
    value: function () {
      var _collectAllElementsBySelectorAsync = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(elementSelectors) {
        var _this = this,
          _this$getDocument;
        var maxShadowDepth,
          iframeLoadingTimeout,
          collected,
          _collectFromRoot,
          waitForIframe,
          rootDoc,
          _args2 = arguments;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              waitForIframe = function _waitForIframe(iframe) {
                return new Promise(function (resolve, reject) {
                  try {
                    // Already loaded?
                    var doc = iframe.contentDocument;
                    if (doc && doc.readyState === 'complete') return resolve();
                    iframe.addEventListener('load', function () {
                      return resolve();
                    }, {
                      once: true
                    });

                    // Optional fallback timeout
                    setTimeout(function () {
                      return reject(new Error('Iframe load timeout'));
                    }, iframeLoadingTimeout);
                  } catch (err) {
                    reject(err);
                  }
                });
              };
              maxShadowDepth = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 0;
              iframeLoadingTimeout = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 5000;
              collected = [];
              _collectFromRoot = /*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(root) {
                  var currentShadowDepth,
                    matches,
                    _iterator,
                    _step,
                    element,
                    allElements,
                    _iterator2,
                    _step2,
                    el,
                    iframeDoc,
                    _args = arguments;
                  return _regeneratorRuntime().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        currentShadowDepth = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;
                        if (!(!root || typeof root.querySelectorAll !== 'function')) {
                          _context.next = 3;
                          break;
                        }
                        return _context.abrupt("return");
                      case 3:
                        // Collect matching elements from current root, filtering out non-accessible iframes
                        matches = root.querySelectorAll(elementSelectors);
                        _iterator = _createForOfIteratorHelper(matches);
                        _context.prev = 5;
                        _iterator.s();
                      case 7:
                        if ((_step = _iterator.n()).done) {
                          _context.next = 14;
                          break;
                        }
                        element = _step.value;
                        if (!(element.tagName === 'IFRAME' && !_this.domUtils.canAccessIFrame(element))) {
                          _context.next = 11;
                          break;
                        }
                        return _context.abrupt("continue", 12);
                      case 11:
                        collected.push(element);
                      case 12:
                        _context.next = 7;
                        break;
                      case 14:
                        _context.next = 19;
                        break;
                      case 16:
                        _context.prev = 16;
                        _context.t0 = _context["catch"](5);
                        _iterator.e(_context.t0);
                      case 19:
                        _context.prev = 19;
                        _iterator.f();
                        return _context.finish(19);
                      case 22:
                        // Traverse shadow roots and iframes
                        allElements = root.querySelectorAll('*');
                        _iterator2 = _createForOfIteratorHelper(allElements);
                        _context.prev = 24;
                        _iterator2.s();
                      case 26:
                        if ((_step2 = _iterator2.n()).done) {
                          _context.next = 46;
                          break;
                        }
                        el = _step2.value;
                        if (!(el.shadowRoot && currentShadowDepth < maxShadowDepth)) {
                          _context.next = 31;
                          break;
                        }
                        _context.next = 31;
                        return _collectFromRoot(el.shadowRoot, currentShadowDepth + 1);
                      case 31:
                        if (!(el.tagName === 'IFRAME' && _this.domUtils.canAccessIFrame(el))) {
                          _context.next = 44;
                          break;
                        }
                        _context.prev = 32;
                        _context.next = 35;
                        return waitForIframe(el);
                      case 35:
                        iframeDoc = el.contentDocument;
                        if (!iframeDoc) {
                          _context.next = 39;
                          break;
                        }
                        _context.next = 39;
                        return _collectFromRoot(iframeDoc, currentShadowDepth);
                      case 39:
                        _context.next = 44;
                        break;
                      case 41:
                        _context.prev = 41;
                        _context.t1 = _context["catch"](32);
                        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Skipped iframe:', _context.t1.message, el.title);
                      case 44:
                        _context.next = 26;
                        break;
                      case 46:
                        _context.next = 51;
                        break;
                      case 48:
                        _context.prev = 48;
                        _context.t2 = _context["catch"](24);
                        _iterator2.e(_context.t2);
                      case 51:
                        _context.prev = 51;
                        _iterator2.f();
                        return _context.finish(51);
                      case 54:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee, null, [[5, 16, 19, 22], [24, 48, 51, 54], [32, 41]]);
                }));
                return function collectFromRoot(_x2) {
                  return _ref.apply(this, arguments);
                };
              }(); // Helper: returns a Promise that resolves when iframe is loaded
              rootDoc = ((_this$getDocument = this.getDocument) === null || _this$getDocument === void 0 ? void 0 : _this$getDocument.call(this)) || document;
              _context2.next = 8;
              return _collectFromRoot(rootDoc);
            case 8:
              return _context2.abrupt("return", collected);
            case 9:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function collectAllElementsBySelectorAsync(_x) {
        return _collectAllElementsBySelectorAsync.apply(this, arguments);
      }
      return collectAllElementsBySelectorAsync;
    }()
  }]);
}();


/***/ }),

/***/ "./src/main/core/browsercontexts/BrowserContextMutationObserver.js":
/*!*************************************************************************!*\
  !*** ./src/main/core/browsercontexts/BrowserContextMutationObserver.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserContextMutationObserver; }
/* harmony export */ });
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _ElementsMutationObserverFactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementsMutationObserverFactory */ "./src/main/core/browsercontexts/ElementsMutationObserverFactory.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Instances of this class can monitor and observe window mutations
 * Directly used by FramesDetector and CustomElementsDetector to respond DOM mutations
 * when detecting browser contexts that expose custom access to their private DOM.
 */


var BrowserContextMutationObserver = /*#__PURE__*/function () {
  /**
   *
   * @param elementsMutationObserverFactory
   * @param windowMutationObservers
   * @param messageBus
   * @param configurationRepository
   */
  function BrowserContextMutationObserver(windowMutationObservers, messageBus, configurationRepository) {
    _classCallCheck(this, BrowserContextMutationObserver);
    this._windowMutationObservers = windowMutationObservers;
    this._messageBus = messageBus;
    this._configurationRepository = configurationRepository;
    this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BrowserContextAdded, this._processNewContext.bind(this));
    this._elementsMutationObserverFactory = new _ElementsMutationObserverFactory__WEBPACK_IMPORTED_MODULE_1__["default"]();
  }

  /**
   * A designated observer that handles newly added contexts
   * @private
   * @param browserContext
   */
  return _createClass(BrowserContextMutationObserver, [{
    key: "_processNewContext",
    value: function _processNewContext(browserContext) {
      this.monitorWindow(browserContext);
    }

    /**
     *
     * @param {BrowserContext} browserContext
     * @public
     */
  }, {
    key: "monitorWindow",
    value: function monitorWindow(browserContext) {
      if (this._windowMutationObservers.has(browserContext)) {
        return;
      }
      var elementsMutationObserver = this._elementsMutationObserverFactory.create(browserContext, self.MutationObserver, this._configurationRepository);
      elementsMutationObserver.observe(browserContext.getDocument());
      elementsMutationObserver.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this));
      elementsMutationObserver.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this));
      this._windowMutationObservers.set(browserContext, elementsMutationObserver);
    }

    /**
     *
     * @param {ShadowRoot} browserContext
     * @public
     */
  }, {
    key: "unMonitorWindow",
    value: function unMonitorWindow(browserContext) {
      var mutationObserver = this._windowMutationObservers.get(browserContext);
      if (mutationObserver) {
        mutationObserver.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this));
        mutationObserver.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this));
        mutationObserver.disconnect();
      }
      this._windowMutationObservers["delete"](browserContext);
    }

    /**
     * Callback once a nodes added mutation\s is observed
     * @param nodesAddedMutationEvent
     * @private
     */
  }, {
    key: "_nodesAddedMutationObserved",
    value: function _nodesAddedMutationObserved(nodesAddedMutationEvent) {
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.MutationAddedNodes, nodesAddedMutationEvent);
    }

    /**
     * Callback once a nodes removed mutation\s is observed
     * @param nodesRemovedMutationEvent
     * @private
     */
  }, {
    key: "_nodesRemovedMutationObserved",
    value: function _nodesRemovedMutationObserved(nodesRemovedMutationEvent) {
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.MutationRemovedNodes, nodesRemovedMutationEvent);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/browsercontexts/BrowserContextsCache.js":
/*!***************************************************************!*\
  !*** ./src/main/core/browsercontexts/BrowserContextsCache.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ BrowserContextsCache; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Instances of this class expose a Map (CDMap) interface for storing and retrieving of
 * browser contexts detected by the BrowserContextDetector(s)
 */
var BrowserContextsCache = /*#__PURE__*/function () {
  function BrowserContextsCache() {
    _classCallCheck(this, BrowserContextsCache);
    this._contexts = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
  }
  return _createClass(BrowserContextsCache, [{
    key: "contexts",
    get: function get() {
      var contexts = [];
      this._contexts.forEach(function (value, key) {
        contexts.push(key);
      });
      return contexts;
    }

    /**
     * Returns a list of available browser contexts
     * @returns {[]}
     */
  }, {
    key: "browserContexts",
    get: function get() {
      var contexts = [];
      this._contexts.forEach(function (value) {
        contexts.push(value.browserContext);
      });
      return contexts;
    }
  }, {
    key: "count",
    get: function get() {
      return this._contexts.size;
    }
  }, {
    key: "add",
    value: function add(context) {
      this._contexts.set(context, {
        registered: true,
        features: _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create()
      });
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "addBrowserContext",
    value: function addBrowserContext(browserContext) {
      this._contexts.set(browserContext.Context, {
        registered: true,
        features: _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create(),
        browserContext: browserContext
      });
    }
  }, {
    key: "remove",
    value: function remove(context) {
      if (this.exists(context) && this._contexts.get(context).features.size === 0) {
        this._contexts["delete"](context);
      }
    }
  }, {
    key: "get",
    value: function get(context) {
      return this._contexts.get(context);
    }
  }, {
    key: "exists",
    value: function exists(context) {
      return this._contexts.has(context) && this._contexts.get(context).registered;
    }
  }, {
    key: "registerContextFeature",
    value: function registerContextFeature(context, feature) {
      if (this.exists(context)) {
        this._contexts.get(context).features.set(feature.configKey, true);
      }
    }
  }, {
    key: "unRegisterContextFeature",
    value: function unRegisterContextFeature(context, feature) {
      if (this.exists(context, feature)) {
        this._contexts.get(context).features["delete"](feature.configKey);
      }
    }
  }, {
    key: "unRegisterContextFeatures",
    value: function unRegisterContextFeatures(context, features) {
      for (var i = 0; i < features.length; i++) {
        var feature = features[i];
        this.unRegisterContextFeature(context, feature);
      }
    }
  }, {
    key: "hasFeature",
    value: function hasFeature(context, feature) {
      return this.exists(context) && this._contexts.get(context).features.has(feature.configKey);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/browsercontexts/ElementsMutationObserver.js":
/*!*******************************************************************!*\
  !*** ./src/main/core/browsercontexts/ElementsMutationObserver.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ElementsMutationObserver; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../infrastructure/CDEvent */ "./src/main/infrastructure/CDEvent.js");
/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../infrastructure/CDSet */ "./src/main/infrastructure/CDSet.js");
/* harmony import */ var _events_NodesRemovedMutationEvent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/NodesRemovedMutationEvent */ "./src/main/events/NodesRemovedMutationEvent.js");
/* harmony import */ var _events_NodesAddedMutationEvent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../events/NodesAddedMutationEvent */ "./src/main/events/NodesAddedMutationEvent.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





var ElementsMutationObserver = /*#__PURE__*/function () {
  function ElementsMutationObserver(context, mutationObserver, configurationRepository) {
    _classCallCheck(this, ElementsMutationObserver);
    _defineProperty(this, "ignoreNodeTypes", _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create([Node.COMMENT_NODE, Node.TEXT_NODE, Node.ATTRIBUTE_NODE, Node.CDATA_SECTION_NODE]));
    this._mutationObserver = new mutationObserver(this._mutationObserved.bind(this, context));
    this.nodesAdded = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this.nodesRemoved = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this.nodeAdded = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this.nodeRemoved = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this._configurationRepository = configurationRepository;

    // Mutation queue to process in idle time
    this.mutationQueue = [];
    this.processingQueue = false;
  }
  return _createClass(ElementsMutationObserver, [{
    key: "observe",
    value: function observe(document) {
      this._mutationObserver.observe(document, {
        childList: true,
        subtree: true
      });
    }
  }, {
    key: "disconnect",
    value: function disconnect() {
      this._mutationObserver.disconnect();
    }

    /**
     * Callback once a mutation\s is observed
     */
  }, {
    key: "_mutationObserved",
    value: function _mutationObserved(context, mutations) {
      var _this$_configurationR,
        _this$_configurationR2,
        _this = this;
      var chunkSize = ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.mutationMaxChunkSize)) || 0;
      var chunkDelayMs = ((_this$_configurationR2 = this._configurationRepository) === null || _this$_configurationR2 === void 0 ? void 0 : _this$_configurationR2.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.mutationChunkDelayMs)) || 100;
      // Filter only element node mutations
      var filteredMutations = mutations.filter(function (mutation) {
        if (mutation.type === 'childList') {
          // Ensure added/removed nodes are ELEMENT_NODEs
          return [].concat(_toConsumableArray(mutation.addedNodes), _toConsumableArray(mutation.removedNodes)).some(function (node) {
            return _this._isValidNodeType(node);
          });
        }
        return false;
      });
      if (chunkSize && filteredMutations.length > chunkSize) {
        var _loop = function _loop() {
          var chunkOfMutations = filteredMutations.slice(i, i + Math.min(chunkSize, filteredMutations.length - i));
          setTimeout(function () {
            chunkOfMutations.forEach(function (mutation) {
              _this._processMutation(context, mutation);
            });
          }, chunkDelayMs);
        };
        // split it to chunks and defer each
        for (var i = 0; i < filteredMutations.length; i += chunkSize) {
          _loop();
        }
      } else {
        var _this$mutationQueue;
        //Now we store mutations in a queue and process them using `requestIdleCallbackSafe`
        (_this$mutationQueue = this.mutationQueue).push.apply(_this$mutationQueue, _toConsumableArray(filteredMutations));
        if (!this.processingQueue) {
          this.processingQueue = true;
          this.requestIdleCallbackSafe(function () {
            return _this._processMutationQueue(context);
          });
        }
      }
    }

    /**
     * Processes mutations in small batches when the browser is idle.
     */
  }, {
    key: "_processMutationQueue",
    value: function _processMutationQueue(context) {
      var _this$_configurationR3,
        _this2 = this;
      var chunkSize = ((_this$_configurationR3 = this._configurationRepository) === null || _this$_configurationR3 === void 0 ? void 0 : _this$_configurationR3.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__.ConfigurationFields.mutationMaxChunkSize)) || 50;
      while (this.mutationQueue.length > 0) {
        var chunk = this.mutationQueue.splice(0, chunkSize);
        chunk.forEach(function (mutation) {
          return _this2._processMutation(context, mutation);
        });
      }
      this.processingQueue = false;
    }

    /**
     * Process a mutation (a change) we are listening to
     */
  }, {
    key: "_processMutation",
    value: function _processMutation(context, mutation) {
      var addedNodes = this._processNodes(mutation.addedNodes, this.nodeAdded);
      var removedNodes = this._processNodes(mutation.removedNodes, this.nodeRemoved);
      this._publishNodesMutationEvents(context, addedNodes, removedNodes);
    }
  }, {
    key: "_publishNodesMutationEvents",
    value: function _publishNodesMutationEvents(context, addedNodes, removedNodes) {
      var _this3 = this;
      if (addedNodes.length > 0) {
        this.requestIdleCallbackSafe(function () {
          return _this3.nodesAdded.publish(new _events_NodesAddedMutationEvent__WEBPACK_IMPORTED_MODULE_3__["default"](context, addedNodes));
        });
      }
      if (removedNodes.length > 0) {
        this.requestIdleCallbackSafe(function () {
          return _this3.nodesRemoved.publish(new _events_NodesRemovedMutationEvent__WEBPACK_IMPORTED_MODULE_2__["default"](context, removedNodes));
        });
      }
    }

    /**
     * Process the added nodes of a single mutation record
     */
  }, {
    key: "_processNodes",
    value: function _processNodes(nodes, nodeEvent) {
      var validNodes = [];
      for (var i = 0; i < nodes.length; i++) {
        var node = nodes[i];
        if (this._isValidNodeType(node)) {
          validNodes.push(node);
          nodeEvent.publish(node);
        }
      }
      return validNodes;
    }

    /**
     * Verify the node has a valid nodeType and should be processed.
     */
  }, {
    key: "_isValidNodeType",
    value: function _isValidNodeType(node) {
      return !this.ignoreNodeTypes.has(node.nodeType);
    }

    /**
     * Fallback implementation for browsers that don't support requestIdleCallback
     */
  }, {
    key: "requestIdleCallbackSafe",
    value: function requestIdleCallbackSafe(cb) {
      return (window.requestIdleCallback || function (cb) {
        return setTimeout(function () {
          cb({
            timeRemaining: function timeRemaining() {
              return 0;
            },
            didTimeout: true
          });
        }, 1);
      })(cb);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/browsercontexts/ElementsMutationObserverFactory.js":
/*!**************************************************************************!*\
  !*** ./src/main/core/browsercontexts/ElementsMutationObserverFactory.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ElementsMutationObserverFactory; }
/* harmony export */ });
/* harmony import */ var _ElementsMutationObserver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ElementsMutationObserver */ "./src/main/core/browsercontexts/ElementsMutationObserver.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ElementsMutationObserverFactory = /*#__PURE__*/function () {
  function ElementsMutationObserverFactory() {
    _classCallCheck(this, ElementsMutationObserverFactory);
  }
  return _createClass(ElementsMutationObserverFactory, [{
    key: "create",
    value: function create(context, mutationObserver, configurationRepository) {
      return new _ElementsMutationObserver__WEBPACK_IMPORTED_MODULE_0__["default"](context, mutationObserver, configurationRepository);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/configuration/ConfigurationFields.js":
/*!************************************************************!*\
  !*** ./src/main/core/configuration/ConfigurationFields.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConfigurationFields: function() { return /* binding */ ConfigurationFields; }
/* harmony export */ });
var ConfigurationFields = {
  resetSessionApiThreshold: 'resetSessionApiThreshold',
  dataWupDispatchRateSettings: 'dataWupDispatchRateSettings',
  logWupDispatchRateSettings: 'logWupDispatchRateSettings',
  logServerURL: 'logAddress',
  enableMinifiedLogUri: 'enableMinifiedLogUri',
  forceDynamicDataWupDispatchSettings: 'forceDynamicDataWupDispatchSettings',
  wupStatisticsLogIntervalMs: 'wupStatisticsLogIntervalMs',
  serverCommunicationSettings: 'serverCommunicationSettings',
  wupResponseTimeout: 'wupResponseTimeout',
  // Deprecated
  wupMessageRequestTimeout: 'wupMessageRequestTimeout',
  logMessageRequestTimeout: 'logMessageRequestTimeout',
  collectKeyRegionValue: 'collectKeyRegionValue',
  crossDomainsList: 'crossDomainsList',
  crossDomainsTimeout: 'crossDomainsTimeout',
  isMutationObserver: 'isMutationObserver',
  isEnabled: 'isEnabled',
  slaveChannelHandshakeTimeout: 'slaveChannelHandshakeTimeout',
  slaveAliveMessageInterval: 'slaveAliveMessageInterval',
  collectCustomElementAttribute: 'collectCustomElementAttribute',
  customElementAttribute: 'customElementAttribute',
  enableFramesProcessing: 'enableFramesProcessing',
  enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
  wupServerURL: 'wupServerURL',
  recoveryServerURL: 'recoveryServerURL',
  logAddress: 'logAddress',
  isCaptureKeyEvents: 'isCaptureKeyEvents',
  locationEventsTimeoutMsec: 'locationEventsTimeoutMsec',
  heartBeatMessageInterval: 'heartBeatMessageInterval',
  isMotionAroundTouchEnabled: 'isMotionAroundTouchEnabled',
  motionPaddingAroundTouchMSec: 'motionPaddingAroundTouchMSec',
  isMotionOnSessionStart: 'isMotionOnSessionStart',
  motionPaddingOnSessionStartMSec: 'motionPaddingOnSessionStartMSec',
  isVMDetection: 'isVMDetection',
  isScrollCollect: 'isScrollCollect',
  isContextPropsFeature: 'isContextPropsFeature',
  isCrossDomain: 'isCrossdomain',
  gyroEventsThreshold: 'gyroEventsThreshold',
  gyroEventsSamplePeriod: 'gyroEventsSamplePeriod',
  dataQPassWorkerInterval: 'dataQPassWorkerInterval',
  accelerometerEventsSamplePeriod: 'accelerometerEventsSamplePeriod',
  orientationEventsThreshold: 'orientationEventsThreshold',
  orientationEventsSamplePeriod: 'orientationEventsSamplePeriod',
  isAudioDetection: 'isAudioDetection',
  stateChangeEnabled: 'stateChangeEnabled',
  logLevel: 'logLevel',
  enableCustomElementsProcessing: 'enableCustomElementsProcessing',
  keyEventsMaskSpecialChars: 'keyEventsMaskSpecialChars',
  collectSelectElementBlurAndFocusEvents: 'collectSelectElementBlurAndFocusEvents',
  allowedUnmaskedValuesList: 'allowedUnmaskedValuesList',
  enableUnmaskedValues: 'enableUnmaskedValues',
  wupMessageNumToRetry: 'wupMessageNumToRetry',
  wupRetryOnNetworkFailureOnly: 'wupRetryOnNetworkFailureOnly',
  wupMessageRetryInterval: 'wupMessageRetryInterval',
  wupIncrementalGrowthBetweenFailures: 'wupIncrementalGrowthBetweenFailures',
  wupMaxIntervalBetweenFailures: 'wupMaxIntervalBetweenFailures',
  logMessageNumToRetry: 'logMessageNumToRetry',
  logRetryOnNetworkFailureOnly: 'logRetryOnNetworkFailureOnly',
  logMessageRetryInterval: 'logMessageRetryInterval',
  logIncrementalGrowthBetweenFailures: 'logIncrementalGrowthBetweenFailures',
  logMaxIntervalBetweenFailures: 'logMaxIntervalBetweenFailures',
  cdsNumExpirationTime: 'cdsNumExpirationTime',
  enableCoordinatesMasking: 'enableCoordinatesMasking',
  maskElementsAttributes: 'maskElementsAttributes',
  enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
  timeTillClearingElementsBufferQueueTimeout: 'timeTillClearingElementsBufferQueueTimeout',
  acknowledgeDataDispatchingRate: 'acknowledgeDataDispatchingRate',
  isChannelSupportsAckMessageLogic: 'isChannelSupportsAckMessageLogic',
  parentElementSelector: 'parentElementSelector',
  childElementWithCustomAttribute: 'childElementWithCustomAttribute',
  elementDataAttribute: 'elementDataAttribute',
  customButtons: 'customButtons',
  enableElementHierarchy: 'enableElementHierarchy',
  enableElementCategory: 'enableElementCategory',
  agentType: 'agentType',
  collectionMode: 'collectionMode',
  enableWupMessagesHashing: 'enableWupMessagesHashing',
  enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
  offloadFontsCollectionEnabled: 'offloadFontsCollectionEnabled',
  offloadFontsRemoveDuplicated: 'offloadFontsRemoveDuplicated',
  mutationMaxChunkSize: 'mutationMaxChunkSize',
  mutationChunkDelayMs: 'mutationChunkDelayMs',
  passwordIdMaskingList: 'passwordIdMaskingList',
  elementUniqueIDConfiguration: 'elementUniqueIDConfiguration',
  fontCollection: 'fontCollection',
  useLegacyZeroTimeout: 'useLegacyZeroTimeout',
  useMessageChannelForSlaveComm: 'useMessageChannelForSlaveComm',
  enableAutoContextCategory: 'enableAutoContextCategory',
  contextCategories: 'contextCategories',
  elementCategories: 'elementCategories',
  elementAttributes: 'elementAttributes',
  elementSelectors: 'elementSelectors',
  externalWASMModules: 'externalWASMModules',
  enableIncognitoDetection: 'enableIncognitoDetection',
  isCollectorsV2: 'isCollectorsV2',
  agenticBrowserFonts: 'agenticBrowserFonts',
  agenticDomInjectionBlinkThresholdMs: 'agenticDomInjectionBlinkThresholdMs',
  agenticDomInjectionBlinkTags: 'agenticDomInjectionBlinkTags',
  collectAgenticPasteSignal: 'collectAgenticPasteSignal'
};

/***/ }),

/***/ "./src/main/core/configuration/ConfigurationRepository.js":
/*!****************************************************************!*\
  !*** ./src/main/core/configuration/ConfigurationRepository.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConfigurationDefaultTemplates: function() { return /* binding */ ConfigurationDefaultTemplates; },
/* harmony export */   "default": function() { return /* binding */ ConfigurationRepository; }
/* harmony export */ });
/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/LogLevel */ "./src/main/technicalServices/log/LogLevel.js");
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../collectors/static/font/collection/FontConfiguration */ "./src/main/collectors/static/font/collection/FontConfiguration.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var ConfigurationDefaultTemplates = {
  defaultDynamicWupDispatchRateConfiguration: {
    type: 'dynamic'
  },
  defaultIncrementalWupDispatchRateConfiguration: {
    type: 'incremental',
    // (incremental, constant)
    initialRateValueMs: 500,
    // The initial rate
    incrementStepMs: 500,
    // The rate increment rate
    incrementStopMs: 5000,
    // At what rate value do we stop incrementing
    incrementStartWupSendCount: 20 // After how many wups do we start increasing
  }
};

/**
 * List of config keys allowed to be modified only via local configuration.
 *
 * @type {string[]}
 */
var configOverrideBlackList = [
/**
 * This keys should be modified only from local configuration, to prevent security treat
 * in which sensitive inputs masking could be disabled remotely.
 * For example, by man-in-the middle attack.
 */
_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.keyEventsMaskSpecialChars, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.passwordIdMaskingList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.maskElementsAttributes, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableUnmaskedValues, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableCoordinatesMasking];
var ConfigurationRepository = /*#__PURE__*/function () {
  function ConfigurationRepository() {
    _classCallCheck(this, ConfigurationRepository);
    // Dictionary holds the config values which require parsing so we can parse them when they arrive from the server
    this._requireParseFields = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_2__.create();
    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.dataWupDispatchRateSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.dataWupDispatchRateSettings);
    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logWupDispatchRateSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logWupDispatchRateSettings);
    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.crossDomainsList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.crossDomainsList);
    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList);
    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings);
    this._configurationList = {};
    // For subscribing to configuration updates
    this.configDefault = {
      logLevel: _technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_1__.LogLevel.INFO,
      isCrossdomain: false,
      isGfxRendering: false,
      isAudioDetectFeature: false,
      enableEmuidFeature: false,
      crossDomainsList: [],
      crossDomainsTimeout: 5000,
      orientationEventsSamplePeriod: 300,
      orientationEventsThreshold: 1,
      stateChangeEnabled: false,
      accelerometerEventsSamplePeriod: 0,
      dataQPassWorkerInterval: 500,
      gyroEventsSamplePeriod: 0,
      gyroEventsThreshold: 0.3,
      isContextPropsFeature: true,
      isEnabled: true,
      isResetEveryLoad: false,
      isScrollCollect: true,
      isVMDetection: true,
      isAudioDetection: false,
      wupStatisticsLogIntervalMs: 30000,
      heartBeatMessageInterval: 5000,
      resetSessionApiThreshold: 20000,
      wupMessageRequestTimeout: 5000,
      logMessageRequestTimeout: 5000,
      slaveChannelHandshakeTimeout: 60000,
      slaveAliveMessageInterval: 100,
      forceDynamicDataWupDispatchSettings: true,
      dataWupDispatchRateSettings: ConfigurationDefaultTemplates.defaultDynamicWupDispatchRateConfiguration,
      logWupDispatchRateSettings: {
        type: 'constant',
        // (incremental, constant)
        initialRateValueMs: 2500 // The initial rate
      },
      serverCommunicationSettings: {
        queueLoadThreshold: 100
      },
      collectKeyRegionValue: false,
      isMutationObserver: true,
      collectCustomElementAttribute: true,
      isCaptureKeyEvents: false,
      locationEventsTimeoutMsec: 10000,
      isMotionAroundTouchEnabled: true,
      motionPaddingAroundTouchMSec: 3000,
      isMotionOnSessionStart: true,
      motionPaddingOnSessionStartMSec: 20000,
      keyEventsMaskSpecialChars: false,
      collectSelectElementBlurAndFocusEvents: false,
      enableUnmaskedValues: false,
      allowedUnmaskedValuesList: [],
      wupMessageNumToRetry: 5,
      wupMessageRetryInterval: 1000,
      wupRetryOnNetworkFailureOnly: false,
      wupIncrementalGrowthBetweenFailures: 3500,
      wupMaxIntervalBetweenFailures: 16000,
      logMessageNumToRetry: 5,
      logMessageRetryInterval: 1000,
      logRetryOnNetworkFailureOnly: false,
      logIncrementalGrowthBetweenFailures: 3500,
      logMaxIntervalBetweenFailures: 16000,
      cdsNumExpirationTime: 60,
      enableCoordinatesMasking: false,
      acknowledgeDataDispatchingRate: 3000,
      passwordIdMaskingList: [],
      isFontWidthFeature: false,
      isFontMathFeature: false,
      isFontEmojiFeature: false,
      isStorageFeature: false,
      isKeyboardLayoutFeature: false,
      isScreenHighResFeature: false,
      isBatteryStatusFeature: false,
      isNavigatorFeature: false,
      isWebglFeature: false,
      isWebRTCFeature: false,
      isSpeechVoicesFeature: false,
      isDRMFeature: false,
      isBrowserExtensionsFeature: false,
      isAdblockerListsFeature: false,
      isAudioDetectFeature2: false,
      enableIncognitoDetection: false,
      elementUniqueIDConfiguration: {
        componentsFormat: "{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",
        hierarchyFormat: "{tagName}_{index}",
        enabledTags: ["input", "textarea", "button", "select", "div", "span"]
      },
      offloadFontsCollectionEnabled: _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsCollectionEnabled,
      offloadFontsRemoveDuplicated: _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsRemoveDuplicated,
      fontCollection: JSON.stringify(_collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG),
      enableElementHierarchy: false,
      enableElementCategory: true,
      isCPUFeature: false,
      enableAutoContextCategory: true,
      contextCategories: __webpack_require__(/*! ../../technicalServices/categories/ContextCategories.json */ "./src/main/technicalServices/categories/ContextCategories.json"),
      enableWupSendDataFields: false,
      //Shared config param with server and client
      embedding_minimal_collectors: ["grph_card", "cores", "os", "fonts", "main_lang", "languages"],
      isCollectorsV2: false,
      isAgenticBrowserDetectFeature: false,
      agenticBrowserFonts: ["FKGroteskNeue"],
      isAgenticDomInjectionFeature: false,
      agenticDomInjectionBlinkThresholdMs: 100,
      agenticDomInjectionBlinkTags: ["div", "style"],
      collectAgenticPasteSignal: false
    };
    this.loadConfigurations(this.configDefault);
  }

  /**
   * Indicates if we are using the a configuration which was updated from the server or not
   * @returns boolean True if update configuration is used. False if default one is used
   */
  return _createClass(ConfigurationRepository, [{
    key: "isConfigurationUpdatedFromServer",
    value: function isConfigurationUpdatedFromServer() {
      return !this._isDefaultConfiguration;
    }

    /**
     * get a list of configurations and sets them all
     * @param config
     * @param forceOverride
     */
  }, {
    key: "loadConfigurations",
    value: function loadConfigurations(config, forceOverride) {
      var _this = this;
      if (!config) {
        return;
      }
      this._isDefaultConfiguration = config === this.configDefault;
      Object.keys(config).forEach(function (key) {
        if (forceOverride || _this._isDefaultConfiguration || !configOverrideBlackList.includes(key)) {
          var configurationValue = config[key];
          if (_this._requireParseFields.has(key)) {
            var parsedValue = _this._tryParseConfigurationValue(configurationValue);
            if (parsedValue) {
              configurationValue = parsedValue;
            }
          }
          _this._configurationList[key] = configurationValue;
        }
      });
    }

    /**
     * get specific feature value
     * @param featureName
     * @constructor
     */
  }, {
    key: "get",
    value: function get(configurationName) {
      return this._configurationList[configurationName];
    }
  }, {
    key: "set",
    value: function set(name, value) {
      this._configurationList[name] = value;
    }
  }, {
    key: "getAll",
    value: function getAll() {
      return this._configurationList;
    }
  }, {
    key: "_tryParseConfigurationValue",
    value: function _tryParseConfigurationValue(configurationValue) {
      if (typeof configurationValue !== 'string') {
        return null;
      }
      try {
        return JSON.parse(configurationValue);
      } catch (ex) {
        // swallow error
      }
      return null;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/configuration/ConfigurationService.js":
/*!*************************************************************!*\
  !*** ./src/main/core/configuration/ConfigurationService.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ConfigurationService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerEvent */ "./src/main/events/WorkerEvent.js");
/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





var ConfigurationService = /*#__PURE__*/function () {
  function ConfigurationService(utils, configurationRepository, messageBus, cidCache, workerCommunicator) {
    _classCallCheck(this, ConfigurationService);
    if (!messageBus) {
      throw new Error('messageBus param must be defined');
    }
    this._configurationLoadedCallback = null;
    this._utils = utils;
    this._configurationRepository = configurationRepository;
    this._messageBus = messageBus;
    this._cidCache = cidCache;

    // Register for the event only if we have a worker communicator. This hack should be removed and isntead the config manager, should only be used
    // by the main thread. Worker, Slave should use a configuration repository of some sort.
    if (workerCommunicator) {
      workerCommunicator.addMessageListener(_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__.WorkerEvent.ConfigurationLoadedEvent, this._onConfigurationLoadedEvent.bind(this));
    }
  }
  return _createClass(ConfigurationService, [{
    key: "updateLogUrlToWorker",
    value: function updateLogUrlToWorker(sid, csid, workerComm) {
      var logAddress = this._configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logAddress);
      if (this._isValidLogUrl(logAddress)) {
        var minify = this._configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableMinifiedLogUri);
        if (minify) {
          var logAddressUrl = new URL(logAddress);
          // When minify configured - strip all path from the url.
          // The incentive for doing so is to make it less likely that Add-Blockers would block our url path pattern.
          logAddress = logAddressUrl.protocol + '//' + logAddressUrl.host;
        }
        var sessionIdentifiers = {
          cid: this._cidCache.get(),
          sid: sid,
          csid: csid,
          ds: 'js',
          sdkVer: this._utils.scriptVersion
        };

        /**
         *
         * Attach the session identifiers to the sdk main context Logger.
         *
         * By legacy - these parameters were set on the url as REST params.
         * The easiest why for AddBlockers to block network requests is by black-listing sub-path patterns contain specific args.
         *
         *  Log.attachSessionIdentifiers is insuring these params will be sent as part of the data in the request's body instead.
         */
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_4__["default"].attachSessionIdentifiers(sessionIdentifiers);
        var message = {
          logAddress: logAddress,
          // attaching the sessionIdentifiers so that the worker could use them for updating it own Logger as well.
          sessionIdentifiers: sessionIdentifiers
        };
        workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__.WorkerCommand.updateLogUrlCommand, message);
      }
    }
  }, {
    key: "_isValidLogUrl",
    value: function _isValidLogUrl(url) {
      try {
        new URL(url);
        return true;
      } catch (e) {
        // Nothing to do. received invalid log url.
        // Therefore, logging this error will also would be useless
        return false;
      }
    }

    /**
     * Another hack to comply with the current requirement for a callback to be triggered once configuration is loaded
     * @param callback
     */
  }, {
    key: "setConfigurationLoadedCallback",
    value: function setConfigurationLoadedCallback(callback) {
      this._configurationLoadedCallback = callback;
    }
  }, {
    key: "_onConfigurationLoadedEvent",
    value: function _onConfigurationLoadedEvent(configurationsStructure) {
      // Load the configurations into the repository
      this._configurationRepository.loadConfigurations(configurationsStructure);

      // Should be removed ASAP. Ugly ugly ugly!!!!
      if (this._configurationLoadedCallback) {
        this._configurationLoadedCallback(this._configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.isEnabled));
      }

      // Notify the system that configuration was loaded
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_2__.MessageBusEventType.ConfigurationLoadedEvent, this._configurationRepository);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/configuration/StartupConfigurationLoader.js":
/*!*******************************************************************!*\
  !*** ./src/main/core/configuration/StartupConfigurationLoader.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StartupConfigurationLoader; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contract/AgentType */ "./src/main/contract/AgentType.js");
/* harmony import */ var _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contract/CollectionMode */ "./src/main/contract/CollectionMode.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var StartupConfigurationLoader = /*#__PURE__*/function () {
  function StartupConfigurationLoader(configurationRepository, startUpConfigurations) {
    _classCallCheck(this, StartupConfigurationLoader);
    this._configurationRepository = configurationRepository;
    this._startUpConfigurations = startUpConfigurations;
  }

  /**
   * Sets certain local startupConfiguration's values into their equivalent values in the remote configurationRepository.
   * By design - all configurations available both in remote and local - should be addressed explicitly within this function's body.
   */
  return _createClass(StartupConfigurationLoader, [{
    key: "loadStartUpConfigurations",
    value: function loadStartUpConfigurations() {
      var _this$_startUpConfigu, _this$_startUpConfigu2;
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logAddress, this._startUpConfigurations.getLogServerURL(), null);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableMinifiedLogUri, this._startUpConfigurations.isMinifiedLogUriEnabled(), false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableFramesProcessing, this._startUpConfigurations.getEnableFramesProcessing(), true);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableCustomElementsProcessing, this._startUpConfigurations.getEnableCustomElementsProcessing(), false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.customElementAttribute, this._startUpConfigurations.getCollectionSettings().getElementSettings().getCustomElementAttribute(), 'data-automation-id');
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableSameSiteNoneAndSecureCookies, this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(), true);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.maskElementsAttributes, this._startUpConfigurations.getCollectionSettings().getElementSettings().getAttributesToMask(), []);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.parentElementSelector, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getParentElementSelector(), '');
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.childElementWithCustomAttribute, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getChildElementWithCustomAttribute(), '');
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.elementDataAttribute, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getElementDataAttribute(), '');
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.customButtons, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getCustomButtons(), []);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.agentType, this._startUpConfigurations.getCollectionSettings().getAgentType(), _contract_AgentType__WEBPACK_IMPORTED_MODULE_2__.AgentType.PRIMARY);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.collectionMode, this._startUpConfigurations.getCollectionSettings().getAgentMode(), _contract_CollectionMode__WEBPACK_IMPORTED_MODULE_3__.CollectionMode.FULL);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.keyEventsMaskSpecialChars, this._startUpConfigurations.getCollectionSettings().getElementSettings().getKeyEventsMaskSpecialChars(), false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableWupMessagesHashing, (_this$_startUpConfigu = this._startUpConfigurations.getClientSettings()) === null || _this$_startUpConfigu === void 0 ? void 0 : _this$_startUpConfigu.enableWupMessagesHashing, false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableCoordinatesMasking, (_this$_startUpConfigu2 = this._startUpConfigurations.getClientSettings()) === null || _this$_startUpConfigu2 === void 0 ? void 0 : _this$_startUpConfigu2.enableCoordinatesMasking, false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableStartupCustomerSessionId, this._startUpConfigurations.getEnableStartupCustomerSessionId(), false);
      this._setNumberConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.mutationMaxChunkSize, this._startUpConfigurations.getMutationMaxChunkSize(), 0);
      this._setNumberConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.mutationChunkDelayMs, this._startUpConfigurations.getMutationChunkDelayMs(), 100);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.passwordIdMaskingList, this._startUpConfigurations.getPasswordIdMaskingList(), []);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableUnmaskedValues, this._startUpConfigurations.isUnmaskedValuesEnabled(), false);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.allowedUnmaskedValuesList, this._startUpConfigurations.getAllowedUnmaskedValuesList(), []);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.useLegacyZeroTimeout, this._startUpConfigurations.getUseLegacyZeroTimeout(), []);
      this._setConfigurationOrDefault(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.externalWASMModules, this._startUpConfigurations.getExternalWASMModules(), []);
    }
  }, {
    key: "_setConfigurationOrDefault",
    value: function _setConfigurationOrDefault(ConfigurationField, startupConfiguration, defaultValue) {
      if (!_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].isUndefinedNull(startupConfiguration)) {
        this._configurationRepository.set(ConfigurationField, startupConfiguration);
      } else {
        this._configurationRepository.set(ConfigurationField, defaultValue);
      }
    }
  }, {
    key: "_setNumberConfigurationOrDefault",
    value: function _setNumberConfigurationOrDefault(ConfigurationField, startupConfiguration, defaultValue) {
      if (_technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].isNumber(startupConfiguration)) {
        this._configurationRepository.set(ConfigurationField, startupConfiguration);
      } else {
        this._configurationRepository.set(ConfigurationField, defaultValue);
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/context/ContextApiHandler.js":
/*!****************************************************!*\
  !*** ./src/main/core/context/ContextApiHandler.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ContextApiHandler; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * This class is for handling api call from the CustomerApiBridge.
 * It is not handled in the ContextMgr since handling it there will require the context mgr to know
 * the DataQ which will cause circular reference
 */
var ContextApiHandler = /*#__PURE__*/function () {
  function ContextApiHandler(contextMgr, dataQ) {
    _classCallCheck(this, ContextApiHandler);
    this._contextMgr = contextMgr;
    this._dataQ = dataQ;
    // subscribe to context changes
    this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this));
    // generate a report of context change when the page first reloads in order to report the url
    this.handleContextChange({
      context: 'cd_auto'
    });
  }
  return _createClass(ContextApiHandler, [{
    key: "handleContextChange",
    value: function handleContextChange(apiMsg) {
      // activityType is for backward compatibility with 1.4 api
      this._contextMgr.changeContext(apiMsg.context || apiMsg.activityType);
    }
  }, {
    key: "sendContextToServer",
    value: function sendContextToServer(newContext) {
      if (newContext) {
        this._dataQ.addToQueue('contextChange', [null, newContext.url, newContext.name, newContext.timestamp, newContext.referrer, newContext.hLength, newContext.context_mapping]);
      }
    }
  }]);
}(); // Better to do it with static (ES6) but Babel is unable to handle it in IE8, so for now...

ContextApiHandler.apiName = 'ContextChange';

/***/ }),

/***/ "./src/main/core/context/ContextMgr.js":
/*!*********************************************!*\
  !*** ./src/main/core/context/ContextMgr.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ContextMgr; }
/* harmony export */ });
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../infrastructure/CDEvent */ "./src/main/infrastructure/CDEvent.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




/**
 * The context is changing in the following logic:
 * - a new contextId on every page reload
 * - a url is taken on every page reload
 * - contextName is null unless the user updates about the context and then
 *   we are updating the server with an event. In the next page reload we will loose the state.
 *   The creation of ContextApiHandler will cause this class to generate the first context and since
 *   this is happening before reporting any data it is OK
 */
var ContextMgr = /*#__PURE__*/function () {
  function ContextMgr(utils, siteMapper, workerComm, storageUtilsWrapper, contextCategoryService) {
    _classCallCheck(this, ContextMgr);
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._contextSiteMapper = siteMapper;
    // every time ContextMgr is created we are creating new context id (page load on non SPA).
    // on SPA this will stay fixed :(
    this.contextName = '';
    this.referrer = '';
    this.historyLen = -1;
    this.onContextChange = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_1__["default"]();
    this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this));
    this._workerComm = workerComm;
    this._contextIdKey = 'cdContextId';
    this.context_mapping = "0";

    // Generate a random value during initialization
    this.randomValue = Math.floor(Math.random() * 1000000); // Adjust the range as needed
    this._contextCategoryService = contextCategoryService;
  }
  return _createClass(ContextMgr, [{
    key: "contextData",
    value: function contextData() {
      // not a getter because of IE8
      return {
        contextId: this.contextId,
        contextHash: this.contextHash,
        url: this.url,
        name: this.contextName,
        referrer: this.referrer,
        hLength: this.historyLen,
        timestamp: this.timestamp,
        context_mapping: this.context_mapping
      };
    }
  }, {
    key: "getContextName",
    value: function getContextName() {
      return this.contextName;
    }
  }, {
    key: "setContext",
    value: function setContext(contextData) {
      // call changeContext in order to generate and save new context id.
      // Now keep the url, referrer and history of the context that was sent -
      // from the slave
      this.contextName = contextData.name;
      this._genContext();
      this.url = contextData.url;
      this.referrer = contextData.referrer;
      this.historyLen = contextData.hLength;
      this.timestamp = contextData.timestamp;
      this._publishContext();
    }

    /**
     * Publish the context change for every module registered
     * @param contextName
     */
  }, {
    key: "changeContext",
    value: function changeContext(contextName) {
      if (!contextName) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Received an invalid context name ".concat(contextName, ". Aborting context change operation"));
        return;
      }
      if (contextName === this.contextName) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Received context ".concat(contextName, " but this is already the current context. Aborting operation."));
        return;
      }
      this.contextName = contextName;
      this._updateContext();
      this._publishContext();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info("Context changed to ".concat(contextName, " and Context hash its ").concat(this.contextHash));
    }
  }, {
    key: "onSiteMapperMatch",
    value: function onSiteMapperMatch(matchedMapping) {
      // If a trigger happened and we are about to change context to our current context, we abort at this stage
      // No need for the extra processing...
      if (matchedMapping.contextName === this.contextName) {
        return;
      }
      this.changeContext(matchedMapping.contextName);
    }
  }, {
    key: "_updateContext",
    value: function _updateContext() {
      this._genContext();
      this.url = this._utils.getDocUrl();
      this.referrer = this._utils.clearTextFromNumbers(document.referrer);
      this.historyLen = window.history.length;
      this.timestamp = this._utils.dateNow();
      this.context_mapping = this._contextCategoryService.getCategory();
    }
  }, {
    key: "_genContext",
    value: function _genContext() {
      // moved from random number as context id to a running number, to keep track
      // save the id in a cookie in order to share across tabs but will not keep state between sessions
      this.contextId = this._storageUtilsWrapper.getCookie(this._contextIdKey);
      if (!this.contextId || isNaN(this.contextId)) {
        this.contextId = this._storageUtilsWrapper.getFromLocalStorage(this._contextIdKey);
        if (!this.contextId || isNaN(this.contextId)) {
          this.contextId = 0;
        }
      }
      this.contextId = parseInt(this.contextId);
      var val = this.contextId + 1;
      if (!this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey, val)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Failed saving contextId ".concat(this.contextId, " to local storage."));
      }

      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this._contextIdKey, val.toString())) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Failed saving contextId ".concat(this.contextId, " to cookie."));
      }
      this.contextHash = this._toInt32Hash(this.contextId);
    }

    // Helper function to create a 32-bit integer hash
  }, {
    key: "_toInt32Hash",
    value: function _toInt32Hash(val) {
      // Incorporate the random value into the hash computation
      val ^= this.randomValue; // XOR with the random value

      // Simple hash function example (bitwise operations)
      var hash = val;
      hash = (hash >>> 16 ^ hash) * 0x45d9f3b;
      hash = (hash >>> 16 ^ hash) * 0x45d9f3b;
      hash = hash >>> 16 ^ hash;
      return hash & 0xFFFFFFFF; // Ensure it's a 32-bit integer
    }
  }, {
    key: "_publishContext",
    value: function _publishContext() {
      // Need to change this to a specific message relevant for context change and remove the update Params...
      var msgToWorker = {
        contextName: this.contextName
      };
      // when the context manager is loaded in slave this message will be sent to parent and ignored (no one listens)
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.changeContextCommand, msgToWorker);
      this.onContextChange.publish(this.contextData());
    }
  }, {
    key: "initContextHandling",
    value: function initContextHandling() {
      this._contextSiteMapper.initTracking();
    }
  }, {
    key: "clearContextHandling",
    value: function clearContextHandling() {
      this._contextSiteMapper.stopTracking();
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      this._contextCategoryService.onConfigUpdate(configurationRepository);
      this._contextSiteMapper.onConfigUpdate(configurationRepository);
    }
  }, {
    key: "onSessionReset",
    value: function onSessionReset() {
      this._publishContext();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/customelements/CustomElementEventMessage.js":
/*!*******************************************************************!*\
  !*** ./src/main/core/customelements/CustomElementEventMessage.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CustomElementEventMessageActions: function() { return /* binding */ CustomElementEventMessageActions; },
/* harmony export */   "default": function() { return /* binding */ CustomElementEventMessage; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var CustomElementEventMessageActions = {
  added: 'added',
  removed: 'removed'
};

/**
 * Represents a Custom Element message emitted by CustomElementsDetector
 */
var CustomElementEventMessage = /*#__PURE__*/_createClass(
/**
 * @param {BrowserContext} browserContext
 * @param {string} message
 */
function CustomElementEventMessage(browserContext, message) {
  _classCallCheck(this, CustomElementEventMessage);
  this.browserContext = browserContext;
  this.message = message;
});


/***/ }),

/***/ "./src/main/core/customelements/CustomElementsClosedContext.js":
/*!*********************************************************************!*\
  !*** ./src/main/core/customelements/CustomElementsClosedContext.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CustomElementsClosedContext; }
/* harmony export */ });
/* harmony import */ var _browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * An instance of this class represents a Custom Element's direct access to the it's shadowRoot
 * Allows the representation of Custom Elements that their mode is set to closed
 * @example
 * const customElement = new CustomElementsClosedContext(someElement);
 * shadowRoot = customElement.getDocument();
 */
var CustomElementsClosedContext = /*#__PURE__*/function (_BrowserContext) {
  function CustomElementsClosedContext() {
    _classCallCheck(this, CustomElementsClosedContext);
    return _callSuper(this, CustomElementsClosedContext, arguments);
  }
  _inherits(CustomElementsClosedContext, _BrowserContext);
  return _createClass(CustomElementsClosedContext, [{
    key: "getDocument",
    value:
    /**
     *
     * @returns {Document}
     */
    function getDocument() {
      return this.context;
    }
  }]);
}(_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/customelements/CustomElementsDetector.js":
/*!****************************************************************!*\
  !*** ./src/main/core/customelements/CustomElementsDetector.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CustomElementsDetector; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _CustomElementsOpenContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CustomElementsOpenContext */ "./src/main/core/customelements/CustomElementsOpenContext.js");
/* harmony import */ var _CustomElementsClosedContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CustomElementsClosedContext */ "./src/main/core/customelements/CustomElementsClosedContext.js");
/* harmony import */ var _browsercontexts_BrowserContextMutationObserver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../browsercontexts/BrowserContextMutationObserver */ "./src/main/core/browsercontexts/BrowserContextMutationObserver.js");
/* harmony import */ var _CustomElementEventMessage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CustomElementEventMessage */ "./src/main/core/customelements/CustomElementEventMessage.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }







/**
 * Detection of custom elements (e.g. <my-custom-element> created using the
 * WebComponent and Shadow DOM API)
 * Detector should start before related event handlers (custom element) are started
 */
var CustomElementsDetector = /*#__PURE__*/function () {
  /**
   * @param {MutationObserver} elementsMutationObserverFactory
   * @param {CDUtils} domUtils
   * @param {MessageBus} messageBus
   * @param {ConfigurationRepository} configurationRepository
   */
  function CustomElementsDetector(domUtils, messageBus, configurationRepository) {
    _classCallCheck(this, CustomElementsDetector);
    this._domUtils = domUtils;
    this._messageBus = messageBus;

    // The detector use this Map to store previously detected elements so custom elements detected upon
    // the root context loading can be handled
    this._loadedCustomElements = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
    this._windowMutationObservers = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
    this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.MutationAddedNodes, this._processAddedNodes.bind(this));
    this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.MutationRemovedNodes, this._processRemovedNodes.bind(this));
    this._messageBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomElementSubmitted, this._processSubmittedCustomElement.bind(this));
    this._browserContextMutationObserver = new _browsercontexts_BrowserContextMutationObserver__WEBPACK_IMPORTED_MODULE_4__["default"](this._windowMutationObservers, this._messageBus, configurationRepository);
    // Cache results for elements we've already checked
    this.customElementCache = new WeakMap();
  }

  /**
   *
   * @returns {Array}
   */
  return _createClass(CustomElementsDetector, [{
    key: "customElements",
    get: function get() {
      var customElements = [];
      this._loadedCustomElements.forEach(function (value, key) {
        customElements.push(key);
      });
      return customElements;
    }

    /**
     * @param customElement
     * @returns {boolean} true if the custom element exists in cache
     */
  }, {
    key: "hasCustomElement",
    value: function hasCustomElement(customElement) {
      if (this._loadedCustomElements.has(customElement)) {
        return true;
      }
      return false;
    }

    /**
     * @param customElement
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "addCustomElementToLoadedList",
    value: function addCustomElementToLoadedList(customElement, browserContext) {
      this._loadedCustomElements.set(customElement, browserContext);
    }

    /**
     * Start custom elements detection - this should be applied on the current (self/window) only!
     * @param {BrowserContext} rootWindow
     */
  }, {
    key: "start",
    value: function start(rootWindow) {
      var _this = this;
      this._browserContextMutationObserver.monitorWindow(rootWindow);
      this._findCustomElementsInBrowserContext(rootWindow.getDocument(), function (element) {
        _this._processNewElement(element);
      });
    }
  }, {
    key: "stop",
    value: function stop() {
      this.customElementCache = new WeakMap();
      this._windowMutationObservers.forEach(function (value) {
        value.disconnect();
      });
    }

    /**
     * Support the processing of a custom element that it's
     * shadowRoot is closed/inaccessible when obtained using the SDKs customer's API.
     * The element itself is the actual shadowRoot property of the
     * requested custom element.
     * @param element
     * @private
     */
  }, {
    key: "_processSubmittedCustomElement",
    value: function _processSubmittedCustomElement(element) {
      if (this._loadedCustomElements.has(element)) {
        return;
      }
      this._addCustomElement(element, new _CustomElementsClosedContext__WEBPACK_IMPORTED_MODULE_3__["default"](element), 'closed');
    }

    /**
     * Process a newly added custom element context
     * @override
     * @param context
     * @private
     */
  }, {
    key: "_processNewElement",
    value: function _processNewElement(element) {
      // Ignore previously added custom elements
      if (this._loadedCustomElements.has(element)) {
        return;
      }

      // Nothing to do when shadowRoot is inaccessible
      if (element.shadowRoot == null) {
        // We should still report an inaccessible custom element
        // as we might respond to an external message to process the requested element
        this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomElementInaccessible, element);
        return;
      }
      this._addCustomElement(element, new _CustomElementsOpenContext__WEBPACK_IMPORTED_MODULE_2__["default"](element));
    }

    /**
     * Append a custom element collected from the current window document
     * @param {Element} element
     * @param {BrowserContext} browserContext
     * @param {string} mode
     * @private
     */
  }, {
    key: "_addCustomElement",
    value: function _addCustomElement(element, browserContext) {
      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'open';
      // Continue to monitor the shadowRoot of the custom element
      if (mode === 'open') {
        this._browserContextMutationObserver.monitorWindow(browserContext);
        this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.MutationSingleEvent, {
          element: element,
          browserContext: browserContext
        });
      }
      this.addCustomElementToLoadedList(element, browserContext);
    }

    /**
     * Remove and report a custom element
     * @param {Element} element
     * @private
     */
  }, {
    key: "_removeCustomElement",
    value: function _removeCustomElement(element) {
      this._browserContextMutationObserver.unMonitorWindow(element.shadowRoot);
      this._loadedCustomElements["delete"](element);
    }

    /**
     * Process the added nodes of a single mutation record
     * @param {NodeAddedMutationEvent} nodeAddedMutationEvent
     * @private
     */
  }, {
    key: "_processAddedNodes",
    value: function _processAddedNodes(nodeAddedMutationEvent) {
      var _this2 = this;
      var doc = nodeAddedMutationEvent.addedNodes[0].ownerDocument;
      var elements = doc.querySelectorAll('*');
      var uniqueElements = Array.from(new Set([].concat(_toConsumableArray(Array.from(nodeAddedMutationEvent.addedNodes)), _toConsumableArray(Array.from(elements))))).filter(function (node) {
        return node.nodeType === Node.ELEMENT_NODE;
      });
      uniqueElements.forEach(function (node) {
        if (!_this2._isCustomElement(node)) return;
        _this2._processNewElement(node);
        if (node.shadowRoot) {
          _this2._findCustomElementsInBrowserContext(node.shadowRoot, function (elem) {
            _this2._processNewElement(elem);
          });
        } else {
          _this2._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomElementInaccessible, node);
        }
      });
    }

    /**
     * Process the removed nodes of a single mutation record
     * @param nodeRemovedMutationEvent
     * @private
     */
  }, {
    key: "_processRemovedNodes",
    value: function _processRemovedNodes(nodeRemovedMutationEvent) {
      var _this3 = this;
      var removedNodes = nodeRemovedMutationEvent.removedNodes;
      var customElementsToRemove = [];
      // Go over nodes which were removed and check if there are custom elements in it
      for (var i = 0; i < removedNodes.length; i++) {
        var removedNode = removedNodes[i];
        if (!removedNode.hasChildNodes()) {
          if (this._isCustomElement(removedNode)) {
            if (removedNode.shadowRoot) {
              customElementsToRemove.push(removedNode);
            }
          }
        } else {
          this._findCustomElementsInBrowserContext(removedNode, function (elem) {
            _this3._removeCustomElement(elem);
          });
        }
      }
      if (customElementsToRemove.length === 0) return;
      customElementsToRemove.forEach(function (element) {
        _this3._removeCustomElement(element);
      });
    }

    /**
     * Returns true if an element is a custom element
     * e.g. - it's name contains dashes ('-')
     * e.g. <my-custom-element>
     * The private DOM of the custom element may or may no be accessible - depends
     * on the mode of the WebComponent (mode: "open" VS mode: "closed")
     * @private
     *
     * Optimized _isCustomElement()
     *  Uses a Set for quick lookups (O(1) instead of O(n)).
     *  Caches previously checked elements to prevent duplicate work.
     *  Avoids unnecessary function calls.
     */
  }, {
    key: "_isCustomElement",
    value: function _isCustomElement(element) {
      if (!element || typeof element.localName !== 'string') return false;

      // Use cache for repeated elements
      if (this.customElementCache.has(element)) {
        return this.customElementCache.get(element);
      }

      // Check if it's a custom element (contains '-')
      var isCustom = element.localName.includes('-') || element.shadowRoot != null;

      // Store result in cache
      this.customElementCache.set(element, isCustom);
      return isCustom;
    }

    /**
     * Query the dom for elements that has public shadowRoot attribute
     * In case the a Web Component is created in mode: closed, the shadowRoot is null
     * and there is no way to query.
     * @todo Report a private shadowRoot
     * Custom elements will be detected by querying the window context for elements with
     * occurrences of at least one dash in their names.
     * e.g. <my-custom-element>
     */
  }, {
    key: "_findCustomElementsInBrowserContext",
    value: (function () {
      var _findCustomElementsInBrowserContext2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(document, process) {
        var _this4 = this;
        var customElementsList, queryElements, shadowPromises;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              customElementsList = new Set();
              queryElements = document.querySelectorAll('*');
              if (!(queryElements.length === 0)) {
                _context.next = 4;
                break;
              }
              return _context.abrupt("return", _toConsumableArray(customElementsList));
            case 4:
              // Collect Promises for processing shadow DOM elements
              shadowPromises = [];
              queryElements.forEach(function (nextElement) {
                if (nextElement.shadowRoot) {
                  // Store the async result of processing the shadow DOM
                  var shadowProcessing = _this4._findCustomElementsInBrowserContext(nextElement.shadowRoot, function (elem) {
                    process(elem);
                  });
                  shadowPromises.push(shadowProcessing);
                } else {
                  _this4._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.CustomElementInaccessible, nextElement);
                }
                if (!_this4._isCustomElement(nextElement)) return;
                process(nextElement);
              });

              // Wait for all shadow-root processing to complete
              _context.next = 8;
              return Promise.all(shadowPromises);
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function _findCustomElementsInBrowserContext(_x, _x2) {
        return _findCustomElementsInBrowserContext2.apply(this, arguments);
      }
      return _findCustomElementsInBrowserContext;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/core/customelements/CustomElementsOpenContext.js":
/*!*******************************************************************!*\
  !*** ./src/main/core/customelements/CustomElementsOpenContext.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CustomElementsOpenContext; }
/* harmony export */ });
/* harmony import */ var _browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * An instance of this class represents a WebComponent/Shadow DOM context
 * @example
 * const customElement = new CustomElementsContext(someElement);
 * shadowRoot = customElement.getDocument();
 */
var CustomElementsOpenContext = /*#__PURE__*/function (_BrowserContext) {
  function CustomElementsOpenContext() {
    _classCallCheck(this, CustomElementsOpenContext);
    return _callSuper(this, CustomElementsOpenContext, arguments);
  }
  _inherits(CustomElementsOpenContext, _BrowserContext);
  return _createClass(CustomElementsOpenContext, [{
    key: "getDocument",
    value:
    /**
     *
     * @returns {Document} ShadowRoot
     */
    function getDocument() {
      return this.context.shadowRoot;
    }
  }]);
}(_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/exceptions/CDAPIException.js":
/*!****************************************************!*\
  !*** ./src/main/core/exceptions/CDAPIException.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CDAPIException; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _wrapNativeSuper(t) { var r = "function" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }
function _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf("[native code]"); } catch (n) { return "function" == typeof t; } }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
var CDAPIException = /*#__PURE__*/function (_Error) {
  function CDAPIException() {
    _classCallCheck(this, CDAPIException);
    return _callSuper(this, CDAPIException, arguments);
  }
  _inherits(CDAPIException, _Error);
  return _createClass(CDAPIException);
}(/*#__PURE__*/_wrapNativeSuper(Error));


/***/ }),

/***/ "./src/main/core/frames/FrameContext.js":
/*!**********************************************!*\
  !*** ./src/main/core/frames/FrameContext.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FrameContext; }
/* harmony export */ });
/* harmony import */ var _browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../browsercontexts/BrowserContext */ "./src/main/core/browsercontexts/BrowserContext.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * Represents a FRAME/IFRAME based browser context
 */
var FrameContext = /*#__PURE__*/function (_BrowserContext) {
  function FrameContext() {
    _classCallCheck(this, FrameContext);
    return _callSuper(this, FrameContext, arguments);
  }
  _inherits(FrameContext, _BrowserContext);
  return _createClass(FrameContext, [{
    key: "getDocument",
    value:
    /**
     * Return the private DOM of this context
     * @returns {Document}
     */
    function getDocument() {
      return this.context.document || this.context.contentDocument;
    }
  }]);
}(_browsercontexts_BrowserContext__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/frames/FramesDetector.js":
/*!************************************************!*\
  !*** ./src/main/core/frames/FramesDetector.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FramesDetector; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../infrastructure/CDSet */ "./src/main/infrastructure/CDSet.js");
/* harmony import */ var _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../infrastructure/CDEvent */ "./src/main/infrastructure/CDEvent.js");
/* harmony import */ var _SystemFrameName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SystemFrameName */ "./src/main/core/frames/SystemFrameName.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var FramesDetector = /*#__PURE__*/function () {
  function FramesDetector(elementsMutationObserverFactory, domUtils, configurationRepository) {
    _classCallCheck(this, FramesDetector);
    this._elementsMutationObserverFactory = elementsMutationObserverFactory;
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._windowMutationObservers = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
    this._loadedFrames = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
    this._framesToIgnore = _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create();
    this._frameSelector = 'frame, iframe';
    this._frameLoadedCallback = this._onFrameLoad.bind(this);

    // Triggered when a frame is added to our internal structures (after it is loaded and ready for use)
    this.frameAdded = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_2__["default"]();
    // Triggered when a frame is removed from the DOM and our internal structures (should not be used after this point)
    this.frameRemoved = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_2__["default"]();
    // Inaccessible Frames event. Triggered for frames which for some reason we are unable to access (cross domain for example)
    this.frameInaccessible = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_2__["default"]();
  }
  return _createClass(FramesDetector, [{
    key: "frames",
    get: function get() {
      var frames = [];
      this._loadedFrames.forEach(function (value, key) {
        frames.push(key);
      });
      return frames;
    }

    /**
     * Starts the frame detector.
     * @param rootWindow - The main window to monitor. Subtree of this window will be monitored for frames.
     */
  }, {
    key: "start",
    value: function start(rootWindow) {
      var _this = this;
      this._monitorWindow(rootWindow);
      var rootWindowSubFrames = this._findFrames(rootWindow.document);
      rootWindowSubFrames.forEach(function (frame) {
        _this._processNewFrame(frame);
      });
    }
  }, {
    key: "stop",
    value: function stop() {
      this._windowMutationObservers.forEach(function (value) {
        value.disconnect();
      });
      this._windowMutationObservers.clear();
      this._loadedFrames.clear();
      this._framesToIgnore.clear();
    }

    /**
     * Add a frame id to the ignore list. Frames in the ignore list will not be monitored
     * @param frameId
     */
  }, {
    key: "addToIgnoreList",
    value: function addToIgnoreList(frameId) {
      this._framesToIgnore.add(frameId);
    }
  }, {
    key: "_monitorWindow",
    value: function _monitorWindow(window) {
      if (this._windowMutationObservers.has(window)) {
        return;
      }
      var elementsMutationObserver = this._elementsMutationObserverFactory.create(window, self.MutationObserver, this._configurationRepository);
      elementsMutationObserver.observe(window.document);
      elementsMutationObserver.nodeAdded.subscribe(this._processAddedNode.bind(this));
      elementsMutationObserver.nodeRemoved.subscribe(this._processRemovedNode.bind(this));
      this._windowMutationObservers.set(window, elementsMutationObserver);
    }
  }, {
    key: "_unMonitorWindow",
    value: function _unMonitorWindow(window) {
      var mutationObserver = this._windowMutationObservers.get(window);
      if (mutationObserver) {
        mutationObserver.disconnect();
      }
      this._windowMutationObservers["delete"](window);
    }

    /**
     * Process the added nodes of a single mutation record
     * @param addedNode
     * @private
     */
  }, {
    key: "_processAddedNode",
    value: function _processAddedNode(addedNode) {
      var _this2 = this;
      // check if added node have child frames
      if (this._domUtils.matches(addedNode, this._frameSelector)) {
        this._processNewFrame(addedNode);
      } else {
        if (!addedNode.hasChildNodes()) {
          return;
        }
        var elementSubFrames = this._findFrames(addedNode);
        elementSubFrames.forEach(function (frame) {
          _this2._processNewFrame(frame);
        });
      }
    }

    /**
     * Process a new frame which was detected by the mutation observer
     * @param newFrame
     * @private
     */
  }, {
    key: "_processNewFrame",
    value: function _processNewFrame(newFrame) {
      // Make sure the frame id is not in the ignore list or does not contain a predefined prefix. If it is we abort the operation
      if (this._framesToIgnore.has(newFrame.id) || newFrame.id.startsWith(_SystemFrameName__WEBPACK_IMPORTED_MODULE_3__.SystemFrameName.ignorePrefixFrame)) {
        return;
      }

      // If frame was already added we abort at this point because there is no need to add it again
      // Saw at least one scenario in which this could happen (adding a legacy frameset to the dom and than adding a frame to it)
      if (this._loadedFrames.has(newFrame)) {
        return;
      }

      // Subscribe for the load event listener because we want to know when a frame is loaded\reloaded
      // We want to subscribe even for inaccessible frames since they might reload with different content which is
      // of the same origin at some point
      this._domUtils.addEventListener(newFrame, 'load', this._frameLoadedCallback);

      // If the frame is inaccessible for some reason we abort at this point
      if (!this._domUtils.canAccessIFrame(newFrame)) {
        this.frameInaccessible.publish(newFrame);
        return;
      }

      // If the frame is not ready (readyState=complete) we will abort at this point and the frame will be added once it is loaded (in the load event callback)
      // Note: canAccessIFrame already ensures we can safely access contentWindow
      if (!this._domUtils.isWindowDocumentReady(newFrame.contentWindow)) {
        return;
      }

      // Add the new frame by monitoring it and adding it to our internal structures
      this._addFrame(newFrame);
    }

    /**
     * Processes a frame. Function checks if the frame is accessible and ready to be monitored
     * @param frame
     * @private
     */
  }, {
    key: "_addFrame",
    value: function _addFrame(frame) {
      var _this3 = this;
      // Monitor for mutations on the frame window
      this._monitorWindow(frame.contentWindow);
      // Search for sub frames and add them as well
      var frameSubFrames = this._findFrames(frame.contentWindow.document);
      frameSubFrames.forEach(function (subFrame) {
        _this3._processNewFrame(subFrame);
      });
      this._loadedFrames.set(frame, frame.contentDocument);
      this.frameAdded.publish(frame);
    }

    /**
     * Process the removed nodes of a single mutation record
     * @param removedNode
     * @private
     */
  }, {
    key: "_processRemovedNode",
    value: function _processRemovedNode(removedNode) {
      var _this4 = this;
      if (this._domUtils.matches(removedNode, this._frameSelector)) {
        this._removeFrame(removedNode);
      } else {
        if (!removedNode.hasChildNodes()) {
          return;
        }
        var elementSubFrames = this._findFrames(removedNode);
        elementSubFrames.forEach(function (frame) {
          _this4._removeFrame(frame);
        });
      }
    }
  }, {
    key: "_removeFrame",
    value: function _removeFrame(frameToRemove) {
      // Only try to unmonitor the window if we can access it
      if (this._domUtils.canAccessIFrame(frameToRemove)) {
        this._unMonitorWindow(frameToRemove.contentWindow);
      }

      // Always remove the load event listener first, regardless of accessibility
      this._domUtils.removeEventListener(frameToRemove, 'load', this._frameLoadedCallback);

      // Always try to delete from loaded frames and publish event if it was loaded
      if (this._loadedFrames["delete"](frameToRemove)) {
        this.frameRemoved.publish(frameToRemove);
      }
    }

    /**
     * Callback for frame load event
     * @param event
     * @private
     */
  }, {
    key: "_onFrameLoad",
    value: function _onFrameLoad(event) {
      var frame = event.target;

      // Remove the current frame subscription if exists so we can add it once again
      if (this._loadedFrames.has(frame)) {
        this._removeFrame(frame);
      }
      this._processNewFrame(frame);
    }

    /**
     * Recursively find all frames in page and bind unbind frames to key event handler.
     * @param element
     * @returns [Array] list pointer which will hold all the frames, should contain an array
     * @private
     */
  }, {
    key: "_findFrames",
    value: function _findFrames(element) {
      var frameList = [];

      // using querySelectorAll and not window.Frames since we need to listen to the frame and not
      // its content, which changes. if we listen to window.frames we do not get the event.
      var innerFrames = [];
      // use loops and not array conversion since Array.from in babel does not exist for ie11
      var frames = element.querySelectorAll(this._frameSelector);
      for (var i = 0; i < frames.length; i++) {
        innerFrames.push(frames[i]);
      }
      for (var _i = 0; _i < innerFrames.length; _i++) {
        var currentFrameSubFramesList = [];
        var innerFrame = innerFrames[_i];
        frameList.push(innerFrame);

        // Make sure the frame is accessible before trying to get its sub frames. Otherwise we will get some nice error...
        if (!this._domUtils.canAccessIFrame(innerFrame)) {
          this.frameInaccessible.publish(innerFrame);
          continue;
        }
        currentFrameSubFramesList = this._findFrames(innerFrame.contentWindow.document);
        if (currentFrameSubFramesList.length > 0) {
          frameList = frameList.concat(currentFrameSubFramesList);
        }
      }
      return frameList;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/frames/FramesHandler.js":
/*!***********************************************!*\
  !*** ./src/main/core/frames/FramesHandler.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FramesHandler; }
/* harmony export */ });
/* harmony import */ var _FramesHandlerBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FramesHandlerBase */ "./src/main/core/frames/FramesHandlerBase.js");
/* harmony import */ var _SystemFrameName__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SystemFrameName */ "./src/main/core/frames/SystemFrameName.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _FrameContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FrameContext */ "./src/main/core/frames/FrameContext.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }





var FramesHandler = /*#__PURE__*/function (_FramesHandlerBase) {
  function FramesHandler(framesCache, framesDetector, domUtils, utils, useLegacyZeroTimeout) {
    var _this;
    _classCallCheck(this, FramesHandler);
    _this = _callSuper(this, FramesHandler);
    _this._framesCache = framesCache;
    _this._framesDetector = framesDetector;
    _this._framesDetector.frameAdded.subscribe(_this._onFrameAdded.bind(_this));
    _this._framesDetector.frameRemoved.subscribe(_this._onFrameRemoved.bind(_this));
    _this._framesDetector.frameInaccessible.subscribe(_this._onFrameInaccessible.bind(_this));
    _this._featuresList = [];
    _this._domUtils = domUtils;
    _this._utils = utils;
    _this._framesDetector.addToIgnoreList(_SystemFrameName__WEBPACK_IMPORTED_MODULE_1__.SystemFrameName.rtcframe);
    _this._framesDetector.addToIgnoreList(_SystemFrameName__WEBPACK_IMPORTED_MODULE_1__.SystemFrameName.fontDetectionFrame);
    _this.callMethod = useLegacyZeroTimeout ? _this._utils.asyncCall : _this._utils.asyncTimeoutCall;

    // Startup the frames detector
    _this._framesDetector.start(window.self);

    // Create the frames cache so it will be up to date with the current frames state.
    // from now on it will be updated in the frames detector events
    _this._buildFramesCache();
    return _this;
  }
  _inherits(FramesHandler, _FramesHandlerBase);
  return _createClass(FramesHandler, [{
    key: "startFeatures",
    value: function startFeatures(features) {
      try {
        this._buildFeaturesMap(features);
        if (this._featuresList.length === 0) {
          return;
        }
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("startFeatures:Running features on ".concat(this._framesCache.count, " frames"));
        this._startFeaturesOnFrames(this._framesCache.contexts, features);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Failed to start features in FrameHandler.startFeatures: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature(feature) {
      try {
        // Add the feature to the features map
        this._featuresList.push(feature);
        feature.isRunning = true;
        this._startFeaturesOnFrames(this._framesCache.contexts, [feature]);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Failed to start feature in FrameHandler.startFeature: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "stopFeatures",
    value: function stopFeatures(features) {
      try {
        this._stopFeaturesOnFrames(features, this._framesCache.contexts);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Failed to stop features in FrameHandler.stopFeatures: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(feature) {
      try {
        feature.isRunning = false;
        this._stopFeaturesOnFrames([feature], this._framesCache.contexts);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Failed to stop feature in FrameHandler.stopFeature: ".concat(ex.message), ex);
      }
    }

    /**
     * After server configuration - features that might change inner behaviour need to
     * recheck configuration (stop/start mutation obeserver)
     * @param feature
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(feature) {
      if (feature.instance.updateFeatureConfig) {
        this._updateFeaturesConfigOnFrames([feature], this._framesCache.contexts);
      }
    }
  }, {
    key: "_onFrameAdded",
    value: function _onFrameAdded(frame) {
      try {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was loaded."));
        if (!this._framesCache.exists(frame)) {
          this._framesCache.add(frame);
        } else {
          // If the frame already existed in the cache we unregister the features
          // so we can run them on the frame again
          // This can happen if the frame was reloaded
          this._framesCache.unRegisterContextFeatures(frame, this._featuresList);
        }
        this._startFeaturesOnFrames([frame], this._featuresList);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Failed to start features on frame ".concat(frame.id, ": ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_onFrameRemoved",
    value: function _onFrameRemoved(frame) {
      try {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was removed."));
        this._stopFeaturesOnFrames(this._featuresList, [frame]);
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Failed to stop features on frame ".concat(frame.id, ": ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_onFrameInaccessible",
    value: function _onFrameInaccessible(frame) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was detected as inaccessible."));
    }

    /**
     * Builds the features map structure
     * @param features - the list of features from which the structure is built
     * @private
     */
  }, {
    key: "_buildFeaturesMap",
    value: function _buildFeaturesMap(features) {
      var _this2 = this;
      this._featuresList = [];
      features.forEach(function (feature) {
        _this2._featuresList.push(feature);
      });
    }

    /**
     * Updates the frames cache from the frames detector
     * @private
     */
  }, {
    key: "_buildFramesCache",
    value: function _buildFramesCache() {
      var _this3 = this;
      this._framesDetector.frames.forEach(function (frame) {
        if (!_this3._framesCache.exists(frame)) {
          _this3._framesCache.add(frame);
        }
      });
    }

    /**
     * Start features on the frames
     * @param frames - the frames to start the features on
     * @param features - features to start on each frame
     * @private
     */
  }, {
    key: "_startFeaturesOnFrames",
    value: function _startFeaturesOnFrames(frames, features) {
      var _this4 = this;
      frames.forEach(function (innerFrame) {
        try {
          if (!_this4._domUtils.canAccessIFrame(innerFrame)) {
            return;
          }
          for (var i = 0; i < features.length; i++) {
            var feature = features[i];
            if (feature.shouldRun && !_this4._framesCache.hasFeature(innerFrame, feature)) {
              _this4._framesCache.registerContextFeature(innerFrame, feature);
              if (_this4._domUtils.isWindowDocumentReady(innerFrame.contentWindow)) {
                _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("_startFeaturesOnFrames: run feature on frame:".concat(innerFrame.name, ", id:").concat(innerFrame.id, ". feature:").concat(feature.configKey));
                _this4.callMethod.call(_this4._runFeatureOnFrame, _this4, innerFrame, feature);
                feature.isRunning = true;
              }
            }
          }
        } catch (e) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while starting features on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
        }
      });
    }
  }, {
    key: "_runFeatureOnFrame",
    value: function _runFeatureOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.startFeature(new _FrameContext__WEBPACK_IMPORTED_MODULE_3__["default"](frame.contentWindow));
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Not starting features on frame ".concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while starting feature ".concat(feature.configKey, " on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_stopFeaturesOnFrames",
    value: function _stopFeaturesOnFrames(features, frames) {
      var _this5 = this;
      try {
        // I am using forEach and not iterator since IE 11 does not support
        frames.forEach(function (innerFrame) {
          try {
            if (!_this5._domUtils.canAccessIFrame(innerFrame)) {
              return;
            }
            if (innerFrame.contentWindow && innerFrame.contentWindow.document) {
              for (var j = 0, len = features.length; j < len; j++) {
                if (_this5._framesCache.hasFeature(innerFrame, features[j])) {
                  _this5.callMethod.call(_this5._stopFeatureOnFrame, _this5, innerFrame, features[j]);
                }
                features[j].isRunning = false;
              }
            }
          } catch (e) {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while stopping features on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
          }
          if (_this5._framesCache.exists(innerFrame)) {
            _this5._framesCache.unRegisterContextFeatures(innerFrame, features);
          }
          _this5._framesCache.remove(innerFrame);
        });
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].warn("Failed stopping features on frames ".concat(err.message), err);
      }
    }
  }, {
    key: "_stopFeatureOnFrame",
    value: function _stopFeatureOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.stopFeature(new _FrameContext__WEBPACK_IMPORTED_MODULE_3__["default"](frame.contentWindow));
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Not stopping feature ".concat(feature.configKey, " on frame ").concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while stopping feature ".concat(feature.configKey, " ").concat(func, " on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_updateFeaturesConfigOnFrames",
    value: function _updateFeaturesConfigOnFrames(features, frames) {
      var _this6 = this;
      // I am using forEach and not iterator since IE 11 does not support
      frames.forEach(function (innerFrame) {
        try {
          // If we can't access the iframe for some reason (cross domain...) we don't continue past this point
          if (!_this6._domUtils.canAccessIFrame(innerFrame)) {
            return;
          }
          for (var j = 0, len = features.length; j < len; j++) {
            if (_this6._framesCache.hasFeature(innerFrame, features[j])) {
              _this6.callMethod.call(_this6._updateFeatureConfigOnFrame, _this6, innerFrame, features[j]);
            }
          }
        } catch (e) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while updating features configuration on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
        }
      });
    }
  }, {
    key: "_updateFeatureConfigOnFrame",
    value: function _updateFeatureConfigOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.updateFeatureConfig(new _FrameContext__WEBPACK_IMPORTED_MODULE_3__["default"](frame.contentWindow));
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("Not updating feature ".concat(feature.configKey, " config on frame ").concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("An error has occurred while updating feature ".concat(feature.configKey, " config on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }]);
}(_FramesHandlerBase__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/frames/FramesHandlerBase.js":
/*!***************************************************!*\
  !*** ./src/main/core/frames/FramesHandlerBase.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FramesHandlerBase; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var FramesHandlerBase = /*#__PURE__*/function () {
  function FramesHandlerBase() {
    _classCallCheck(this, FramesHandlerBase);
  }
  return _createClass(FramesHandlerBase, [{
    key: "startFeatures",
    value: function startFeatures() {}
  }, {
    key: "startFeature",
    value: function startFeature() {}
  }, {
    key: "stopFeatures",
    value: function stopFeatures() {}
  }, {
    key: "stopFeature",
    value: function stopFeature() {}
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}
  }]);
}();


/***/ }),

/***/ "./src/main/core/frames/FramesHandlerFactory.js":
/*!******************************************************!*\
  !*** ./src/main/core/frames/FramesHandlerFactory.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FramesHandlerFactory; }
/* harmony export */ });
/* harmony import */ var _FramesDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FramesDetector */ "./src/main/core/frames/FramesDetector.js");
/* harmony import */ var _FramesHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FramesHandler */ "./src/main/core/frames/FramesHandler.js");
/* harmony import */ var _NullFramesHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NullFramesHandler */ "./src/main/core/frames/NullFramesHandler.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _browsercontexts_BrowserContextsCache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../browsercontexts/BrowserContextsCache */ "./src/main/core/browsercontexts/BrowserContextsCache.js");
/* harmony import */ var _browsercontexts_ElementsMutationObserverFactory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../browsercontexts/ElementsMutationObserverFactory */ "./src/main/core/browsercontexts/ElementsMutationObserverFactory.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }







/**
 * The class creates the appropriate FramesHandler. He takes into consideration:
 * 1. If enableFramesProcessing configuration is enabled it creates the default FramesHandler
 * 2. If enableFramesProcessing configuration is disabled it creates the NullFramesHandler
 */
var FramesHandlerFactory = /*#__PURE__*/function () {
  function FramesHandlerFactory(configurationRepository, domUtils, utils) {
    _classCallCheck(this, FramesHandlerFactory);
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._utils = utils;
  }
  return _createClass(FramesHandlerFactory, [{
    key: "create",
    value: function create() {
      var enableFramesProcessing = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.enableFramesProcessing);
      var useLegacyZeroTimeout = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.useLegacyZeroTimeout);
      if (enableFramesProcessing) {
        var framesCache = new _browsercontexts_BrowserContextsCache__WEBPACK_IMPORTED_MODULE_4__["default"]();
        var framesDetector = new _FramesDetector__WEBPACK_IMPORTED_MODULE_0__["default"](new _browsercontexts_ElementsMutationObserverFactory__WEBPACK_IMPORTED_MODULE_5__["default"](), this._domUtils, this._configurationRepository);
        return new _FramesHandler__WEBPACK_IMPORTED_MODULE_1__["default"](framesCache, framesDetector, this._domUtils, this._utils, useLegacyZeroTimeout);
      }

      // Create the NullFramesHandler which is an empty skeleton implementation
      return new _NullFramesHandler__WEBPACK_IMPORTED_MODULE_2__["default"]();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/frames/NullFramesHandler.js":
/*!***************************************************!*\
  !*** ./src/main/core/frames/NullFramesHandler.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NullFramesHandler; }
/* harmony export */ });
/* harmony import */ var _FramesHandlerBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FramesHandlerBase */ "./src/main/core/frames/FramesHandlerBase.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
/**
 * The class is a skeleton implementation of the FramesHandler
 */

var NullFramesHandler = /*#__PURE__*/function (_FramesHandlerBase) {
  function NullFramesHandler() {
    _classCallCheck(this, NullFramesHandler);
    return _callSuper(this, NullFramesHandler, arguments);
  }
  _inherits(NullFramesHandler, _FramesHandlerBase);
  return _createClass(NullFramesHandler);
}(_FramesHandlerBase__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/core/frames/SystemFrameName.js":
/*!*************************************************!*\
  !*** ./src/main/core/frames/SystemFrameName.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SystemFrameName: function() { return /* binding */ SystemFrameName; }
/* harmony export */ });
var SystemFrameName = {
  rtcframe: 'cd__rtcframe',
  fontDetectionFrame: 'cd__fontDetectionFrame',
  ignorePrefixFrame: 'cd__frame__'
};

/***/ }),

/***/ "./src/main/core/masking/MaskingService.js":
/*!*************************************************!*\
  !*** ./src/main/core/masking/MaskingService.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MaskingService; },
/* harmony export */   defaultMaskedCoordinates: function() { return /* binding */ defaultMaskedCoordinates; }
/* harmony export */ });
/* harmony import */ var _collectors_events_ControlsKeyTable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../collectors/events/ControlsKeyTable */ "./src/main/collectors/events/ControlsKeyTable.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var defaultMaskedCoordinates = -1000;
var MaskingService = /*#__PURE__*/function () {
  function MaskingService(configurationRepository) {
    _classCallCheck(this, MaskingService);
    this._configurationRepository = configurationRepository;
    this._attributesToMask = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.maskElementsAttributes);
    this.maskedCodeMapping = {
      original: function original(code, charCode, key) {
        return {
          code: code,
          charCode: charCode,
          key: key
        };
      },
      numpadKey: function numpadKey(key) {
        return {
          code: 'Numpad',
          charCode: 96,
          key: key
        };
      },
      letter: function letter() {
        return {
          code: 'Key',
          charCode: 65,
          key: 'A'
        };
      },
      digit: function digit() {
        return {
          code: 'Digit',
          charCode: 49,
          key: '1'
        };
      },
      specialChar: function specialChar() {
        return {
          code: 'SpecialChar',
          charCode: 42,
          key: '*'
        };
      },
      other: function other() {
        return {
          code: 'Other',
          charCode: 66,
          key: 'B'
        };
      },
      masked: function masked() {
        return {
          code: 'Masked',
          charCode: 'a'.charCodeAt(0),
          key: 'a'
        };
      }
    };
    this.digitMaskValue = "1";
    this.letterMaskValueLowerCase = "a";
    this.unicodeMaskValue = "B";
    this.specialCharMaskValue = "*";
    this.customPasswordMaskValue = "a";

    // Sets for faster lookup
    this.specialConfigurationChars = new Set([",", ".", " ", "@", ";", ":", "-", "+", "$"]);
    this.specialChars = new Set(["_", "!", "%", "^", "&", "*", "#", "(", ")", "=", "{", "}", "[", "]", "", "\\", "|", "/", "?", ">", "<", "~", "\"", "", "", "'"]);
    this.lettersSet = new Set(_toConsumableArray(Array(26)).map(function (_, i) {
      return String.fromCharCode(65 + i);
    }) // A-Z
    .concat(_toConsumableArray(Array(26)).map(function (_, i) {
      return String.fromCharCode(97 + i);
    })) // a-z
    .concat(_toConsumableArray(Array(27)).map(function (_, i) {
      return String.fromCharCode(0x05D0 + i);
    })) // Hebrew (-)
    );
    this.digitsSet = new Set(_toConsumableArray(Array(10)).map(function (_, i) {
      return String(i);
    })); // "0-9"
    this.cjkNumbersSet = new Set(["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]);
    this.allowedUnmaskedChars = new Set([",", ".", "@", ";", ":", "-", "+", "$", " "]);
    this.allowedMaskedChars = new Set(["a", "1", "*"]); // Allowed after masking
  }
  return _createClass(MaskingService, [{
    key: "maskKey",
    value: function maskKey(key, code, elementID) {
      if (this._isPasswordMaskedElementId(elementID)) {
        return this.maskedCodeMapping.masked();
      }
      if (_collectors_events_ControlsKeyTable__WEBPACK_IMPORTED_MODULE_0__.ControlsKeyTable[key]) {
        var controlsCode = _collectors_events_ControlsKeyTable__WEBPACK_IMPORTED_MODULE_0__.ControlsKeyTable[key];
        return this.maskedCodeMapping.original(code, controlsCode, key);
      }
      if (this._isANumberOrDigit(key)) {
        return code.includes('Numpad') ? this.maskedCodeMapping.numpadKey('1') : this.maskedCodeMapping.digit();
      }
      if (this._isALetter(key)) {
        return this.maskedCodeMapping.letter();
      }
      if (!this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.keyEventsMaskSpecialChars) && this.specialConfigurationChars.has(key)) {
        return this.maskedCodeMapping.original(code, key.charCodeAt(0), key);
      }
      if (this.specialChars.has(key) || this.specialConfigurationChars.has(key)) {
        return code.includes('Numpad') ? this.maskedCodeMapping.numpadKey('*') : this.maskedCodeMapping.specialChar();
      }
      return this.maskedCodeMapping.other();
    }

    /**
     * If the browser is not supporting e.key we will fallback to Legacy Properties(keycode and which)
     * Convert legacy to key value String
     * Pay attention that this will cause difference between keyDown/Up to Press
     * @returns String
     */
  }, {
    key: "getKeyFromLegacyProperties",
    value: function getKeyFromLegacyProperties(e) {
      var key = e.keyCode || e.which;
      if (key === 0 || key === undefined) {
        return '';
      }
      return String.fromCharCode(key);
    }
  }, {
    key: "_isALetter",
    value: function _isALetter(key) {
      return /^[a-zA-Z]$/.test(key) || this._isJapaneseOrChineseLetter(key) || this._isHebrewLetter(key);
    }
  }, {
    key: "_isANumberOrDigit",
    value: function _isANumberOrDigit(key) {
      return /[0-9]/.test(key) || this.cjkNumbersSet.has(key);
    }
  }, {
    key: "_isJapaneseOrChineseLetter",
    value: function _isJapaneseOrChineseLetter(key) {
      return this._isCJKUnifiedIdeographs(key) || this._isCJKUnifiedIdeographsExtenA(key) || this._isCJKUnifiedIdeographsExtenB(key) || this._isSmallKatakanaLetter(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographsExtenB",
    value: function _isCJKUnifiedIdeographsExtenB(key) {
      return /[\u3041-\u309F]/.test(key);
    }
  }, {
    key: "_isSmallKatakanaLetter",
    value: function _isSmallKatakanaLetter(key) {
      return /[\u30A1-\u30FF]/.test(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographsExtenA",
    value: function _isCJKUnifiedIdeographsExtenA(key) {
      return /[\u3400-\u4DB5]/.test(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographs",
    value: function _isCJKUnifiedIdeographs(key) {
      return /[\u4E00-\u9FCC]/.test(key);
    }
  }, {
    key: "_isHebrewLetter",
    value: function _isHebrewLetter(key) {
      return /[\u05D0-\u05EA]/.test(key);
    }
  }, {
    key: "_isPasswordMaskedElementId",
    value: function _isPasswordMaskedElementId(elementID) {
      var passwordIdMaskingList = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.passwordIdMaskingList);
      return typeof elementID !== 'undefined' && Array.isArray(passwordIdMaskingList) && passwordIdMaskingList.includes(elementID);
    }
  }, {
    key: "getDropDownListValues",
    value: function getDropDownListValues(selectElem) {
      var options = [];
      for (var i = 0; i < selectElem.length; i++) {
        var optionTxt = selectElem.options[i].text || selectElem.options[i].value || '';
        options.push(this.maskText(optionTxt, selectElem.id));
      }
      return options;
    }

    /**
     * maskText
     * letters shall be masked as  a 
     * numbers / Numpads should be masked as   1 
     * special characters shall be masked as  * 
     * if keyEventsMaskSpecialChars is "true" Special Configuration characters will masked as  *  else they will not be masked original
     * all other characters 'B';
     * @param text - text to be masked
     * @returns string
     */
  }, {
    key: "maskText",
    value: function maskText(text, elementID) {
      var _this = this;
      if (!text) return "";
      if (this._isPasswordMaskedElementId(elementID)) {
        return text.replace(/./g, this.customPasswordMaskValue);
      }
      var result = _toConsumableArray(text).map(function (_char) {
        if (_this.digitsSet.has(_char)) return _this.digitMaskValue; // Numbers  "1"
        if (_this.lettersSet.has(_char)) return _this.letterMaskValueLowerCase; // Letters  "a"
        if (_this.cjkNumbersSet.has(_char)) return _this.digitMaskValue; // CJK Numbers  "1"
        if (_this.specialChars.has(_char)) return _this.specialCharMaskValue; // Special Chars  "*"
        if (_this.allowedUnmaskedChars.has(_char)) return _char; // Exception Chars  Keep as is
        return _this.unicodeMaskValue; // All other Unicode  "B"
      }).join("");

      // Handling masking configuration
      if (this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.keyEventsMaskSpecialChars)) {
        // If keyEventsMaskSpecialChars is enabled, mask exception characters and apply strict masking
        result = _toConsumableArray(result).map(function (_char2) {
          return _this.allowedUnmaskedChars.has(_char2) ? _this.specialCharMaskValue : _char2;
        }).map(function (_char3) {
          return !_this.allowedMaskedChars.has(_char3) ? _this.unicodeMaskValue : _char3;
        }).join("");
        return result;
      }
      return result;
    }
  }, {
    key: "maskAbsoluteIfRequired",
    value: function maskAbsoluteIfRequired(elementValue, elemID) {
      if (elementValue !== '' && this._shouldMask(elementValue)) {
        return this.maskText(elementValue, elemID);
      }
      return elementValue;
    }
  }, {
    key: "shouldMaskCoordinates",
    value: function shouldMaskCoordinates() {
      return this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.enableCoordinatesMasking);
    }
  }, {
    key: "_shouldMask",
    value: function _shouldMask(elementValue) {
      var _this2 = this;
      if (typeof this._attributesToMask === 'undefined') {
        return false;
      }
      return this._attributesToMask.some(function (element) {
        return _this2._isConformsRegex(element.regexPattern, elementValue) || element.name.toLowerCase() === (elementValue === null || elementValue === void 0 ? void 0 : elementValue.toLowerCase());
      });
    }
  }, {
    key: "_isConformsRegex",
    value: function _isConformsRegex(regexPattern, stringToCheck) {
      try {
        if (new RegExp(regexPattern).test(stringToCheck)) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("The string ".concat(stringToCheck, " matches the pattern ").concat(regexPattern, "."));
          return true;
        }
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error("Invalid regex pattern: ".concat(error));
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("The string ".concat(stringToCheck, " does not match the pattern. ").concat(regexPattern, "."));
      return false;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/metadata/MetadataService.js":
/*!***************************************************!*\
  !*** ./src/main/core/metadata/MetadataService.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MetadataService; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var MetadataService = /*#__PURE__*/function () {
  function MetadataService(configurationRepository, dataQ) {
    _classCallCheck(this, MetadataService);
    _defineProperty(this, "_dataQ", void 0);
    this._configurationRepository = configurationRepository;
    this._dataQ = dataQ;
    this._isEnabled = this._configurationRepository.get('isCustMetadata');
  }

  /**
   * Receive customer specific data from customer api implementation
   * and send to server
   * @param msg - the msg received from cdApi contains type and data
   */
  return _createClass(MetadataService, [{
    key: "onCustomerMetadata",
    value: function onCustomerMetadata(msg) {
      if (this._isEnabled === undefined || this._isEnabled == null || this._isEnabled === true) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug('HandleMetadata:onCustomerMetadata. data=' + JSON.stringify(msg.data));
        if (msg.data) {
          this._dataQ.addToQueue('customer_metadata', [null, msg.data]);
        }
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._isEnabled = this._configurationRepository.get('isCustMetadata');
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/AgentIdCache.js":
/*!***********************************************!*\
  !*** ./src/main/core/session/AgentIdCache.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgentIdCache; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var AGENT_ID_STORAGE_KEY = 'cdAgentId';

/**
 * A class that caches the agentId in local storage.
 * The agentId is determined by the server and they responsible for managing and generate it.
 * agentId is unique per agent, so if a session starts on mobile and then continues on web, each session will have
 * a different agentId.
 * The agentId will be used by the server in cases where they need to restore the 'ott' (one time token) of the session
 * in a case a wup is sent with an empty 'ott'
 */
var AgentIdCache = /*#__PURE__*/function () {
  function AgentIdCache(storageUtilsWrapper) {
    _classCallCheck(this, AgentIdCache);
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._agentId = null;
    this._loadAgentIdFromStorage();
  }

  /**
   * Gets the cached agentId.
   * @returns {string|null} The cached agentId or null if not set.
   */
  return _createClass(AgentIdCache, [{
    key: "get",
    value: function get() {
      return this._agentId;
    }
    /**
     * Sets and caches the agentId.
     * @param {string} agentId The agentId to set and cache.
     */
  }, {
    key: "set",
    value: function set(agentId) {
      if (!agentId || typeof agentId !== 'string') {
        throw new Error('Invalid agentId value');
      }
      this._agentId = agentId;
      this._saveAgentIdToStorage();
    }

    /**
     * Saves the agentId to local storage.
     * @private
     */
  }, {
    key: "_saveAgentIdToStorage",
    value: function _saveAgentIdToStorage() {
      this._storageUtilsWrapper.saveToLocalStorage(AGENT_ID_STORAGE_KEY, this._agentId);
    }

    /**
     * Loads the agentId from local storage.
     * @private
     */
  }, {
    key: "_loadAgentIdFromStorage",
    value: function _loadAgentIdFromStorage() {
      this._agentId = this._storageUtilsWrapper.getFromLocalStorage(AGENT_ID_STORAGE_KEY) || null;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/AgentIdService.js":
/*!*************************************************!*\
  !*** ./src/main/core/session/AgentIdService.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgentIdService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var AgentIdService = /*#__PURE__*/function () {
  function AgentIdService(agentIdCache, serverWorkerCommunicator) {
    _classCallCheck(this, AgentIdService);
    this._agentIdCache = agentIdCache;
    this._serverWorkerCommunicator = serverWorkerCommunicator;
  }
  return _createClass(AgentIdService, [{
    key: "updateAgentIdWithServer",
    value: function updateAgentIdWithServer() {
      var agentId = this._agentIdCache.get();
      this._serverWorkerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateAgentIdCommand, {
        agentId: agentId
      });
    }
  }, {
    key: "set",
    value: function set(agentId) {
      if (!agentId) {
        throw new Error('Invalid agentId value of undefined');
      }
      this._agentIdCache.set(agentId);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/CidCache.js":
/*!*******************************************!*\
  !*** ./src/main/core/session/CidCache.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CidCache; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var CidCache = /*#__PURE__*/function () {
  /**
   *
   *
   * @param url full server url containing the cid.
   * example input: https://wup-dtrackers.bc2.customers.biocatch.com/client/v3.1/web/wup?cid=dtrackers
   *
   * By contract, the sdk receives full url containing the protocol path and cid.
   * In practice - the cid provided on the url is used as standalone param.
   * for example - it is attached in certain cases to the log url.
   *
   * Pay Attention:  the serverUrl provided by the public SDK interface/cdApi will not necessarily be used at his exact form for the actual requests:
   * Instead, it will be recontacted by the WupServerClient based on certain API/cdApi configurations.
   *
   */
  function CidCache(url) {
    _classCallCheck(this, CidCache);
    var parsedUrl = new URL(url);
    this._cid = parsedUrl.searchParams.get('cid');
    if (!this._cid) {
      throw new Error('cid was not found on provided url.');
    }
  }

  /**
   * Get the cid from the cache.
   * @returns The cached cid or null if not available
   */
  return _createClass(CidCache, [{
    key: "get",
    value: function get() {
      return this._cid;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/CsidCache.js":
/*!********************************************!*\
  !*** ./src/main/core/session/CsidCache.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CsidCache; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var CsidCache = /*#__PURE__*/function () {
  function CsidCache() {
    _classCallCheck(this, CsidCache);
    this._csid = null;
  }

  /**
   * Get the csid from the cache.
   * @returns The cached csid or null if not available
   */
  return _createClass(CsidCache, [{
    key: "get",
    value: function get() {
      return this._csid;
    }

    /**
     * store the csid in the cache
     * @param csid - The new csid
     */
  }, {
    key: "set",
    value: function set(csid) {
      if (csid === undefined) {
        throw new Error('Invalid csid value of undefined');
      }
      this._csid = csid;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/CsidService.js":
/*!**********************************************!*\
  !*** ./src/main/core/session/CsidService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CsidService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../worker/communication/ConfigurationDefaultValues */ "./src/worker/communication/ConfigurationDefaultValues.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Class is responsible for getting the csid
 */



var CsidService = /*#__PURE__*/function () {
  function CsidService(customerApi, csidCache, workerCommunicator) {
    _classCallCheck(this, CsidService);
    this._customerApi = customerApi;
    this._csidCache = csidCache;
    this._workerCommunicator = workerCommunicator;
  }

  /**
   * store the csid in the csid cache and send an update message to the server
   * @param csid - The new csid
   */
  return _createClass(CsidService, [{
    key: "set",
    value: function set(csid) {
      if (csid === undefined) {
        throw new Error('Invalid csid value of undefined');
      }
      this._csidCache.set(csid);
      this._workerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateCsidCommand, {
        csid: csid
      });
    }

    /**
     * Get the csid from the customer api. If fails it will retry several times.
     * This is the legacy way of getting the csid and should not be used
     * method is deprecated and is left until migrations to the new method are complete
     */
  }, {
    key: "get",
    value: function get(callback) {
      if (!this._customerApi.isApiAvailable('getCustomerSessionID')) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug('getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used');
        return;
      }
      this._getCsidWithRetries(0, callback);
    }

    /**
     * The function is responsible for getting the customer session id from the cdApi.
     * If there was a failure in getting it in the first time, it will keep trying until the retryCount
     * @param retryCount
     * @param callback
     */
  }, {
    key: "_getCsidWithRetries",
    value: function _getCsidWithRetries(retryCount, callback) {
      var _this = this;
      var maxRetries = _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_2__.ConfigurationDefaultValues.MAX_CSID_RETRY_COUNT;
      if (retryCount > maxRetries && this._customerApi.getCustomerSessionID) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("Failed to get csid after all ".concat(maxRetries, " retries."));
        return;
      }

      // get customer session from the customer api
      try {
        this._customerApi.getCustomerSessionID(function (csid) {
          if (!csid) {
            _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warnRetry("Failed to get csid on attempt ".concat(retryCount + 1, "/").concat(maxRetries, ". Retrying..."), retryCount + 1, maxRetries);
            // the bind is for the callback to pass
            setTimeout(_this._getCsidWithRetries.bind(_this, retryCount + 1, callback), 200);
            return;
          }
          // we have csid
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("Got csid after ".concat(retryCount, " retries. csid: ").concat(csid));
          _this._csidCache.set(csid);
          callback();
        });
      } catch (ex) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warnRetry("Exception while getting csid on attempt ".concat(retryCount + 1, "/").concat(maxRetries, ". Retrying..."), retryCount + 1, maxRetries, ex);
        // the bind is for the callback to pass
        setTimeout(this._getCsidWithRetries.bind(this, retryCount + 1, callback), 200);
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/ProtocolTypeCache.js":
/*!****************************************************!*\
  !*** ./src/main/core/session/ProtocolTypeCache.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ProtocolTypeCache; }
/* harmony export */ });
/* harmony import */ var _const_communication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../const/communication */ "./src/main/const/communication.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Convenient class for extracting the wupServer protocol type from the configured wupServerURL, and hold it in-memory.
 *
 * By legacy, the protocol type was given as part the configured wupServerUrl path.
 * In practice - there is a code logic in WupServerClient which behaves differently for v3 and v4.
 * This logic includes for now:
 * 1. different request and response headers handling (see WupServerClient.js)
 * 2. re-composing (with or without minification) the final wupUrl (see WupUrlBuilder.js)
 */
var ProtocolTypeCache = /*#__PURE__*/function () {
  function ProtocolTypeCache(configuredUrl) {
    _classCallCheck(this, ProtocolTypeCache);
    this._protocolType = configuredUrl.includes(_const_communication__WEBPACK_IMPORTED_MODULE_0__.wupUrlV4Path) ? _const_communication__WEBPACK_IMPORTED_MODULE_0__.serverProtocolV4 : _const_communication__WEBPACK_IMPORTED_MODULE_0__.serverProtocolV3;
  }

  /**
   *
   * @returns
   * the number 3 for v3.1 protocol
   * and the number 4 for v4 protocol
   */
  return _createClass(ProtocolTypeCache, [{
    key: "get",
    value: function get() {
      return this._protocolType;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/PsidCache.js":
/*!********************************************!*\
  !*** ./src/main/core/session/PsidCache.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PsidCache; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var PsidCache = /*#__PURE__*/function () {
  function PsidCache() {
    _classCallCheck(this, PsidCache);
    this._psid = null;
  }

  /**
   * Get the psid from the cache.
   * @returns The cached psid or null if not available
   */
  return _createClass(PsidCache, [{
    key: "get",
    value: function get() {
      return this._psid;
    }

    /**
     * store the psid in the cache
     * @param psid - The new psid
     */
  }, {
    key: "set",
    value: function set(psid) {
      if (psid === undefined) {
        throw new Error('Invalid psid value of undefined');
      }
      this._psid = psid;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/PsidService.js":
/*!**********************************************!*\
  !*** ./src/main/core/session/PsidService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PsidService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var PsidService = /*#__PURE__*/function () {
  function PsidService(psidCache, workerCommunicator) {
    _classCallCheck(this, PsidService);
    this._psidCache = psidCache;
    this._workerCommunicator = workerCommunicator;
  }

  /**
   * store the psid in the psid cache and send an update message to the server
   * @param psid - The new psid
   */
  return _createClass(PsidService, [{
    key: "set",
    value: function set(psid) {
      if (psid === undefined) {
        throw new Error('Invalid psid value of undefined');
      }
      this._psidCache.set(psid);
      this._workerCommunicator.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updatePsidCommand, {
        psid: psid
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/SIDChangeType.js":
/*!************************************************!*\
  !*** ./src/main/core/session/SIDChangeType.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SIDChangeType: function() { return /* binding */ SIDChangeType; }
/* harmony export */ });
var SIDChangeType = {
  none: 'none',
  init: 'init',
  configuration: 'config',
  configurationFromSlave: 'configFromSlave',
  customerApi: 'customerApi',
  pageTimeout: 'timeout',
  unknown: 'unknown'
};

/***/ }),

/***/ "./src/main/core/session/ServerUrlCache.js":
/*!*************************************************!*\
  !*** ./src/main/core/session/ServerUrlCache.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ServerUrlCache; }
/* harmony export */ });
/* harmony import */ var _const_communication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../const/communication */ "./src/main/const/communication.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ServerUrlCache = /*#__PURE__*/function () {
  function ServerUrlCache(configuredUrl) {
    _classCallCheck(this, ServerUrlCache);
    var url = new URL(configuredUrl);
    var fullPath = url.pathname;

    // List of known paths to trim before
    var knownPaths = _const_communication__WEBPACK_IMPORTED_MODULE_0__.bioCatchPreservedPaths;
    var basePath = fullPath;
    var _iterator = _createForOfIteratorHelper(knownPaths),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var knownPath = _step.value;
        var index = fullPath.indexOf('/' + knownPath);
        if (index !== -1) {
          // keep only what appears before the known Biocatch-API paths.
          // This is needed, for making sure we do not drop any customer's proxy specific path.
          basePath = fullPath.substring(0, index);
          break;
        }
      }

      // Remove any trailing slash from basePath for clean joining
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    basePath = basePath.replace(/\/+$/, '');

    // Construct the full base address
    this._baseServerAddress = url.origin + basePath;
  }
  return _createClass(ServerUrlCache, [{
    key: "get",
    value: function get() {
      return this._baseServerAddress;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/SessionInfoService.js":
/*!*****************************************************!*\
  !*** ./src/main/core/session/SessionInfoService.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SessionInfoService; }
/* harmony export */ });
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var SessionInfoService = /*#__PURE__*/function () {
  function SessionInfoService() {
    _classCallCheck(this, SessionInfoService);
    this.markStartTime();
  }
  return _createClass(SessionInfoService, [{
    key: "markStartTime",
    value: function markStartTime() {
      this.startTime = _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].dateNow();
    }
  }, {
    key: "getStartTime",
    value: function getStartTime() {
      return this.startTime;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/SessionService.js":
/*!*************************************************!*\
  !*** ./src/main/core/session/SessionService.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SessionService; }
/* harmony export */ });
/* harmony import */ var _events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerEvent */ "./src/main/events/WorkerEvent.js");
/* harmony import */ var _SIDChangeType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SIDChangeType */ "./src/main/core/session/SIDChangeType.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _contract_AgentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../contract/AgentType */ "./src/main/contract/AgentType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }







var SessionService = /*#__PURE__*/function () {
  function SessionService(messageBus, configurationService, configurationRepository, utils, domUtils, workerComm, contextMgr, muidService, serverStateMgr, resetSessionSiteMapper, sidRepository, serverUrlCache, cidCache, protocolTypeCache, minifiedWupUriEnabled, csidService, csidCache, psidCache, brandService, agentIdService, recoveryServerURL) {
    _classCallCheck(this, SessionService);
    this._messageBus = messageBus;
    this._configurationService = configurationService;
    this._configurationRepository = configurationRepository;
    this._utils = utils;
    this._domUtils = domUtils;
    this._workerComm = workerComm;
    this._contextMgr = contextMgr;
    this._muidService = muidService;
    this._serverStateMgr = serverStateMgr;
    this._resetSessionSiteMapper = resetSessionSiteMapper;
    this._sidRepository = sidRepository;
    this._csidService = csidService;
    this._csidCache = csidCache;
    this._serverAddress = serverUrlCache.get();
    this._cidCache = cidCache;
    this._protocolType = protocolTypeCache.get();
    this._minifiedWupUriEnabled = minifiedWupUriEnabled;
    this._psidCache = psidCache;
    this._brandService = brandService;
    this._agentIdService = agentIdService;
    this._agentType = configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.agentType);
    this._enableStartupCustomerSessionId = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.enableStartupCustomerSessionId);

    // External reset is either an api call for reset or a trigger by configuration
    // we use this parameter to prevent consecutive resets from occurring
    this.lastExternalResetCallTime = null;
    this.sessionId = null;
    this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this));
    this._recoveryServerURL = recoveryServerURL;
    workerComm.addMessageListener(_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__.WorkerEvent.NewSessionStartedEvent, this._onNewSessionStartedEvent.bind(this));
    // set the session agent type by sending a message to the worker that updates the wup request payload
    this._setSessionStartupData();
  }
  return _createClass(SessionService, [{
    key: "resumeOrStartSession",
    value: function resumeOrStartSession() {
      var csid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      // Get existing sid if we have one available in storage. If we have a sid we will resume the session.
      // Otherwise we will send an empty sid to start a new session
      var sid = this._getSessionId();

      // We need to get rid of this idiotic isResetEveryLoad configuration.
      if (sid) {
        this._resumeSession(sid);
      } else {
        this._startNewSession(csid);
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(confMgr) {
      this._resetSessionSiteMapper.onConfigUpdate(confMgr);
      if (this._configurationRepository.get('logAddress')) {
        this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
      }
    }
  }, {
    key: "resetSession",
    value: function resetSession(msg) {
      this.onResetSession(msg);
    }

    /**
     * called by:
     * * the api of the customer in the cdApi
     * * onSiteMapperMatch
     * @param msg - should be in this structure { resetReason: 'my_reason'}
     */
  }, {
    key: "onResetSession",
    value: function onResetSession(msg) {
      var resetReason = msg.resetReason ? msg.resetReason : _SIDChangeType__WEBPACK_IMPORTED_MODULE_1__.SIDChangeType.unknown;
      // we can't control the cdApi make sure it's customerApi - the only option for other reset reason
      if (!_SIDChangeType__WEBPACK_IMPORTED_MODULE_1__.SIDChangeType.hasOwnProperty(resetReason)) {
        resetReason = _SIDChangeType__WEBPACK_IMPORTED_MODULE_1__.SIDChangeType.customerApi;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Received a Reset Session event, reason: ".concat(resetReason));

      // if from the last time we re-generated session number until now less then 20 seconds passed,
      // do not reset the session.
      // We want to avoid this re-generation
      // if the server requests we need to regenerate anyway because it expects it and will not save session correctly
      if (this._utils.dateNow() - this.lastExternalResetCallTime > this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.resetSessionApiThreshold)) {
        this._startNewSession(msg === null || msg === void 0 ? void 0 : msg.csid);
        // we need to update the sid in the log
        this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
        this.lastExternalResetCallTime = this._utils.dateNow();
      } else {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Ignoring external reset session call since resetSessionApiThreshold hasn't passed");
      }
    }
  }, {
    key: "startNewSession",
    value: function startNewSession() {
      var csid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      this._startNewSession(csid);
    }
  }, {
    key: "_startNewSession",
    value: function _startNewSession() {
      var csid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Starting a new session. Previous session was ".concat(this.sessionId));
      // Reset the sessionId until we get a new one from server
      this.sessionId = null;

      // If we have a csid from the api call we set it, otherwise we fetch it from the api
      // In case of manual start we might get a csid from the customer api
      // in this case we want to set it and not fetch a one from the CDAPI
      this._enableStartupCustomerSessionId ? this._setOrFetchCsid(csid) : this._csidCache.set(csid || null);
      this._psidCache.set(null);

      // If sid has changed, we don't want the server state anymore. We want to get a new one from server
      this._serverStateMgr.onSessionIdChange();
      this._onStartedNewSession();
    }
  }, {
    key: "_setOrFetchCsid",
    value: function _setOrFetchCsid(csid) {
      if (csid) {
        this._csidCache.set(csid);
      } else {
        this._csidService.get();
      }
    }
  }, {
    key: "_resumeSession",
    value: function _resumeSession(sid) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Resuming an existing session with sid ".concat(sid));
      // Update the session id
      this.sessionId = sid;
      this._saveSidToStorage(this.sessionId);
      this._handleBrandResume();
      this._onResumedSession();
      this._handleCsid();
    }

    /**
     * Get an exising session number from the storage
     * @returns {*}
     * @private
     */
  }, {
    key: "_getSessionId",
    value: function _getSessionId() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info('Attempting to get sid from storage');
      var sid = this._sidRepository.get();
      if (sid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Read sid ".concat(sid, " from storage"));
      }
      return sid;
    }
  }, {
    key: "_saveSidToStorage",
    value: function _saveSidToStorage(sid) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Saving sid ".concat(sid, " to storage"));

      // Save the session id to a persistent storage
      this._sidRepository.set(sid);
    }
  }, {
    key: "_onStartedNewSession",
    value: function _onStartedNewSession() {
      var _this$_muidService;
      // We need to get rid of this crap. This creates a very unclear behavior... We shouldn't even get here
      // without a server address.
      if (!this._serverAddress) {
        return;
      }
      var message = {
        serverAddress: this._serverAddress,
        csid: this._csidCache.get(),
        cid: this._cidCache.get(),
        protocolType: this._protocolType,
        minifiedUri: this._minifiedWupUriEnabled,
        psid: this._psidCache.get(),
        muid: (_this$_muidService = this._muidService) === null || _this$_muidService === void 0 ? void 0 : _this$_muidService.muid,
        contextName: this._contextMgr.getContextName(),
        recoveryServerURL: this._recoveryServerURL
      };
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__.WorkerCommand.startNewSessionCommand, message);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }
  }, {
    key: "_onResumedSession",
    value: function _onResumedSession() {
      var _this$_muidService2;
      // We need to get rid of this crap. This creates a very unclear behavior... We shouldn't even get here
      // without a server address.
      if (!this._serverAddress) {
        return;
      }
      var srvState = this._serverStateMgr.getServerState(this.sessionId);
      var message = {
        serverAddress: this._serverAddress,
        csid: this._csidCache.get(),
        cid: this._cidCache.get(),
        protocolType: this._protocolType,
        minifiedUri: this._minifiedWupUriEnabled,
        psid: this._psidCache.get(),
        cdsnum: this.sessionId,
        muid: (_this$_muidService2 = this._muidService) === null || _this$_muidService2 === void 0 ? void 0 : _this$_muidService2.muid,
        contextName: this._contextMgr.getContextName(),
        // notify the server for change by customer
        serverState: srvState,
        recoveryServerURL: this._recoveryServerURL
      };
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__.WorkerCommand.resumeSessionCommand, message);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }

    /**
     * The below function should be deprecated and removed
     */
  }, {
    key: "_handleCsid",
    value: function _handleCsid() {
      var _this = this;
      this._domUtils.onDocumentBody(self, function () {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].debug("SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: ".concat(_this.sessionId));
        _this._csidService.get(function () {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Received csid from client. csid: ".concat(_this._csidCache.get(), ", sid:").concat(_this === null || _this === void 0 ? void 0 : _this.sessionId));
          _this._sendCsidToServer();
        });
      });
    }
  }, {
    key: "_sendCsidToServer",
    value: function _sendCsidToServer() {
      // If there is no server address we don't continue since we have nowhere to send the data to
      if (!this._serverAddress) {
        return;
      }
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("Sending csid to worker. csid: ".concat(this._csidCache.get(), ", sid:").concat(this.sessionId));
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__.WorkerCommand.updateCsidCommand, {
        csid: this._csidCache.get()
      });
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }
  }, {
    key: "_handleBrandResume",
    value: function _handleBrandResume() {
      this._brandService.update();
    }

    /**
     * Sent to SiteMapper to be called on match for resetSession
     */
  }, {
    key: "_onSiteMapperMatch",
    value: function _onSiteMapperMatch() {
      this.onResetSession({
        resetReason: _SIDChangeType__WEBPACK_IMPORTED_MODULE_1__.SIDChangeType.configuration
      });
    }

    /**
     * Event is triggered once a new session is started and we receive the notification from the server
     * @param newSid - the new sid received from the server
     * @private
     */
  }, {
    key: "_onNewSessionStartedEvent",
    value: function _onNewSessionStartedEvent(newSid) {
      this.sessionId = newSid;
      this._saveSidToStorage(this.sessionId);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
      this._notifyNewSessionStarted();
      // When agentType is Secondary, we should not act upon receiving "NewSessionStartedEvent" event.
      // The Primary is responsible for setting/resetting the Secondary CSID
      if (this._agentType !== _contract_AgentType__WEBPACK_IMPORTED_MODULE_6__.AgentType.SECONDARY) this._handleCsid();
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_5__["default"].info("A new session ".concat(newSid, " has started"));
    }
  }, {
    key: "_notifyNewSessionStarted",
    value: function _notifyNewSessionStarted() {
      // Notify subscribers about the session reset
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__.MessageBusEventType.NewSessionStartedEvent, this.sessionId);
    }
  }, {
    key: "_setSessionStartupData",
    value: function _setSessionStartupData() {
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_3__.WorkerCommand.setAgentTypeCommand, {
        agentType: this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.agentType)
      });
      this._agentIdService.updateAgentIdWithServer();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/session/SidRepository.js":
/*!************************************************!*\
  !*** ./src/main/core/session/SidRepository.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SidRepository; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../worker/communication/ConfigurationDefaultValues */ "./src/worker/communication/ConfigurationDefaultValues.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




/**
 * Class handles work with the persistent storage of the sid. It works with both localstorage and cookie to provide
 * read and write operations
 */
var SidRepository = /*#__PURE__*/function () {
  function SidRepository(utils, storageUtilsWrapper, configurationRepository) {
    _classCallCheck(this, SidRepository);
    this.sidKey = 'cdSNum';
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this.COOKIE_EXPIRATION_IN_MILLISECONDS = this.getExpirationTime(configurationRepository);
  }
  return _createClass(SidRepository, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      var updatedExpirationTime = this.getExpirationTime(configurationRepository);
      if (this._setExpirationTime(updatedExpirationTime)) {
        this.COOKIE_EXPIRATION_IN_MILLISECONDS = updatedExpirationTime;
      }
    }
  }, {
    key: "getExpirationTime",
    value: function getExpirationTime(configurationRepository) {
      var cdsNumExpirationTime = configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_2__.ConfigurationFields.cdsNumExpirationTime);
      return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(cdsNumExpirationTime));
    }
  }, {
    key: "_validateCDSNumExpirationTime",
    value: function _validateCDSNumExpirationTime(cdsNumExpirationTime) {
      if (cdsNumExpirationTime < _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.MIN_CDS_NUM_EXPIRATION_TIME || cdsNumExpirationTime > _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.MAX_CDS_NUM_EXPIRATION_TIME) {
        return _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.DEFAULT_CDS_NUM_EXPIRATION_TIME;
      }
      return cdsNumExpirationTime;
    }
  }, {
    key: "_setExpirationTime",
    value: function _setExpirationTime(expirationTime) {
      // Set expiration both to local storage and to cookie
      if (this._storageUtilsWrapper.setExpirationInCookie(this.sidKey, expirationTime) === _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed set expiration time ".concat(expirationTime, " in cookie."));
        return false;
      }
      if (this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey, expirationTime) === _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed set expiration time ".concat(expirationTime, " in local storage."));
        this._storageUtilsWrapper.setExpirationInCookie(this.sidKey, this._utils.minutesToMilliseconds(_worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.DEFAULT_CDS_NUM_EXPIRATION_TIME));
        return false;
      }
      return true;
    }

    /**
     * Get the sid from the storage. Will try to load it from the cookie and if not found will try the local storage
     * Reason for this order is that cookies are more resilient to domain changes
     * @returns The stored sid or null if not found
     */
  }, {
    key: "get",
    value: function get() {
      // First try to get the sid from the cookie and validate it.
      var sidFromCookie = this._storageUtilsWrapper.getCookie(this.sidKey);
      var sid = this._validateSid(sidFromCookie);

      // If the sid doesn't exist or was not valid we try to get it from the local storage
      if (!sid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Sid was not found in cookie. Trying to get it from the local storage.');
        var sidFromLocalStorage = this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);
        sid = this._validateSid(sidFromLocalStorage);
        if (!sid) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Sid was not found in local storage.');
          return null;
        }
      }
      return sid;
    }

    /**
     * store the data in localStorage or in cookie for session
     * @param sid - The updated sid
     */
  }, {
    key: "set",
    value: function set(sid) {
      var val = sid;
      val = this._validateSid(val);
      if (!val) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Sid ".concat(sid, " is invalid. Will not save it."));
        return;
      }

      // Save both to local storage and to cookie
      if (!this._storageUtilsWrapper.saveToLocalStorage(this.sidKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed saving sid ".concat(sid, " to local storage."));
      }

      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this.sidKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed saving sid ".concat(sid, " to cookie."));
      }
    }

    /**
     * validates the sid
     * @param sidFull
     */
  }, {
    key: "_validateSid",
    value: function _validateSid(sidFull) {
      return sidFull || null;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/state/HeartBeatErrorsState.js":
/*!*****************************************************!*\
  !*** ./src/main/core/state/HeartBeatErrorsState.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ HeartBeatErrorsState; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/HeartBeatEvent */ "./src/main/events/HeartBeatEvent.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var HeartBeatErrorsState = /*#__PURE__*/function () {
  function HeartBeatErrorsState() {
    _classCallCheck(this, HeartBeatErrorsState);
    this._errors = [];
  }
  return _createClass(HeartBeatErrorsState, [{
    key: "updateState",
    value: function updateState(heartBeatStatusEvent) {
      var category = heartBeatStatusEvent.category;
      var status = heartBeatStatusEvent.status;
      if (this._errors.length !== 0 && status === _events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_1__.statusTypes.Ok) {
        // Recovered from previous error state, so clearing the errors array
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Received heart beat recovery event', heartBeatStatusEvent);
        this._errors = [];
      } else if (status !== _events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_1__.statusTypes.Ok) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Received heart beat error event', heartBeatStatusEvent);
        var errorMessage;
        if (status === _events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_1__.statusTypes.Error) {
          errorMessage = "ERROR(".concat(category, ")");
        } else {
          errorMessage = "REQUEST_ERROR(".concat(category, ")");
        }
        if (!this._errors.includes(errorMessage)) {
          this._errors.push(errorMessage);
        }
      }
    }
  }, {
    key: "getErrors",
    value: function getErrors() {
      return this._errors;
    }
  }, {
    key: "hasErrors",
    value: function hasErrors() {
      return this._errors.length !== 0;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/state/PauseResumeManager.js":
/*!***************************************************!*\
  !*** ./src/main/core/state/PauseResumeManager.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PauseResumeState: function() { return /* binding */ PauseResumeState; },
/* harmony export */   "default": function() { return /* binding */ PauseResumeManager; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
/* harmony import */ var _State__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./State */ "./src/main/core/state/State.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





// TODO: Remove this and use the state enum instead
var PauseResumeState = {
  RUNNING: 0,
  PAUSED: 1
};

/**
 * This class manages the sdk state of RUNNING or PAUSED.
 * While sdk is paused as a result of API call (cdApi.pauseCollection()) no other API can be called
 * (beside cdApi.resumeCollection()). The CustomerApiBridge will query the isCustomerApiEnabled() to
 * check it.
 * The ability to pause / resume is configurable through the 'stateChangeEnabled' configuration.
 * By default it will be false and will be enabled only to customers who need it.
 * If someone called the api and he should not (maybe fraudster?) we are reporting it to the server side.
 */
var PauseResumeManager = /*#__PURE__*/function () {
  function PauseResumeManager(featureMgr, configurationRepository, dataQ, stateService, workerComm) {
    _classCallCheck(this, PauseResumeManager);
    this._featureMgr = featureMgr;
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this._pauseResumeEnabled = configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.stateChangeEnabled) || false;
    this._sdkState = PauseResumeState.RUNNING;
    this._stateService = stateService;
    this._workerComm = workerComm;
  }
  return _createClass(PauseResumeManager, [{
    key: "onResume",
    value: function onResume() {
      if (this._sdkState === PauseResumeState.PAUSED) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Resuming JS SDK');
        // This will start all the feature based on the configuration
        this._featureMgr.updateRunByConfig(this._configurationRepository);
        this._sdkState = PauseResumeState.RUNNING;
        this._stateService.updateState(_State__WEBPACK_IMPORTED_MODULE_3__.State.started);
      } else {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('PauseResumeManager:onResume - resume api called when SDK already running');
      }
    }
  }, {
    key: "onPause",
    value: function onPause() {
      if (this._sdkState === PauseResumeState.RUNNING) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info('Pausing JS SDK');
        this._featureMgr.stopAllFeatures();
        this._sdkState = PauseResumeState.PAUSED;
        this._stateService.updateState(_State__WEBPACK_IMPORTED_MODULE_3__.State.paused);
      } else {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Pause api called when SDK already paused');
      }
    }
  }, {
    key: "onStateChange",
    value: function onStateChange(msg) {
      if (msg.toState && this._verifyApiAllowed(msg.toState)) {
        if (msg.toState === 'pause') {
          this.onPause();
          this.updateSDKStateToWorker(PauseResumeState.PAUSED);
        } else if (msg.toState === 'run') {
          this.onResume();
          this.updateSDKStateToWorker(PauseResumeState.RUNNING);
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('stateChange api called with non valid toState: ' + msg.toState);
        }
      }
    }
  }, {
    key: "updateSDKStateToWorker",
    value: function updateSDKStateToWorker(state) {
      var message = {
        SDK_state: state
      };
      this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_2__.WorkerCommand.updateSDKStateCommand, message);
    }

    /**
     * Related to the APIs that are not pause/resume
     * @returns {boolean}
     */
  }, {
    key: "isCustomerApiEnabled",
    value: function isCustomerApiEnabled() {
      return this._sdkState === PauseResumeState.RUNNING;
    }
  }, {
    key: "_verifyApiAllowed",
    value: function _verifyApiAllowed(funcName) {
      if (!this._pauseResumeEnabled) {
        this._dataQ.addToQueue('forbidden_api_call', [null, funcName]);
        return false;
      }
      return true;
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._pauseResumeEnabled = this._configurationRepository.get(_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.stateChangeEnabled) || false;
      if (this._configurationRepository.get('isEnabled') === false) {
        this.onPause();
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/state/ServerStateMgr.js":
/*!***********************************************!*\
  !*** ./src/main/core/state/ServerStateMgr.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ServerStateMgr; }
/* harmony export */ });
/* harmony import */ var _events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../events/WorkerEvent */ "./src/main/events/WorkerEvent.js");
/* harmony import */ var _events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/WorkerCommand */ "./src/main/events/WorkerCommand.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * structure of the state:
 * requestId: int
 * sid: _me.messageStruct.cdsnum
 * sts: _me.messageStruct.sts,
 * std: _me.messageStruct.std,
 */
var ServerStateMgr = /*#__PURE__*/function () {
  function ServerStateMgr(workerCommunicator, utils, agentIdService) {
    _classCallCheck(this, ServerStateMgr);
    this._workerComm = workerCommunicator;
    this._utils = utils;
    this._currState = null;
    this._agentIdService = agentIdService;
    workerCommunicator.addMessageListener(_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__.WorkerEvent.ServerStateUpdatedEvent, this._onStateUpdateFromWorker.bind(this));
    workerCommunicator.addMessageListener(_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__.WorkerEvent.ServerNewAgentIdEvent, this._onNewAgentIdFromWorker.bind(this));
    // listen to changes in storage in case other tabs changed the data
    utils.addEventListener(window, 'storage', this._onStateUpdateFromStorage.bind(this), true);
  }

  /**
   * Get the server state we have cached. The state will be returned only if the expected sid param is equal to the cached state sid
   * @param expectedStateSid - The expected sid of the state
   * @returns {*}
   */
  return _createClass(ServerStateMgr, [{
    key: "getServerState",
    value: function getServerState(expectedStateSid) {
      // We require an expected sid so we can compare it to the sid of the state
      if (this._utils.isUndefinedNull(expectedStateSid)) {
        throw new Error("Invalid sid param of ".concat(expectedStateSid));
      }
      this._currState = this._currState || this._utils.StorageUtils.getFromLocalStorage('cdSrvrState');

      // Make sure the state we have is of the sid we expect
      if (this._currState && this._currState.sid !== expectedStateSid) {
        return null;
      }
      return this._currState;
    }
  }, {
    key: "onSessionIdChange",
    value: function onSessionIdChange() {
      this._utils.StorageUtils.removeFromLocalStorage('cdSrvrState');
      this._currState = null;
    }
  }, {
    key: "_onStateUpdateFromWorker",
    value: function _onStateUpdateFromWorker(state) {
      this._updateServerState(state);
    }
  }, {
    key: "_updateServerState",
    value: function _updateServerState(state) {
      this._currState = state;
      this._utils.StorageUtils.saveToLocalStorage('cdSrvrState', state);
    }

    /**
     * This method is called when we get a storage event from another tab
     * we update the storage of this tab with the new state
     * @param e
     * @private
     */
  }, {
    key: "_onStateUpdateFromStorage",
    value: function _onStateUpdateFromStorage(e) {
      if (e && e.storageArea && e.storageArea.cdSrvrState) {
        var serverState = JSON.parse(e.storageArea.cdSrvrState);
        this._workerComm.sendAsync(_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_1__.WorkerCommand.stateUpdateFromStorage, {
          requestId: serverState.val.requestId,
          sts: serverState.val.sts,
          std: serverState.val.std,
          ott: serverState.val.ott
        });
      }
    }
  }, {
    key: "_onNewAgentIdFromWorker",
    value: function _onNewAgentIdFromWorker(agentId) {
      this._agentIdService.set(agentId);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/core/state/State.js":
/*!**************************************!*\
  !*** ./src/main/core/state/State.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   State: function() { return /* binding */ State; }
/* harmony export */ });
var State = {
  stopped: 'stopped',
  starting: 'starting',
  started: 'started',
  paused: 'paused',
  faulted: 'faulted'
};

/***/ }),

/***/ "./src/main/core/state/StateService.js":
/*!*********************************************!*\
  !*** ./src/main/core/state/StateService.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StateService; }
/* harmony export */ });
/* harmony import */ var _State__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./State */ "./src/main/core/state/State.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StateService = /*#__PURE__*/function () {
  function StateService(messageBus) {
    _classCallCheck(this, StateService);
    this._messageBus = messageBus;
    this._state = _State__WEBPACK_IMPORTED_MODULE_0__.State.stopped;
  }
  return _createClass(StateService, [{
    key: "getState",
    value: function getState() {
      return this._state;
    }
  }, {
    key: "updateState",
    value: function updateState(newState) {
      var state = _State__WEBPACK_IMPORTED_MODULE_0__.State[newState];
      if (!state) {
        throw new Error("Unknown state ".concat(newState));
      }
      this._state = state;
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StateChangedEvent, {
        state: state
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/emitters/BeforeInstallPromptEventEmitter.js":
/*!**************************************************************!*\
  !*** ./src/main/emitters/BeforeInstallPromptEventEmitter.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var BeforeInstallPromptEventEmitter = /*#__PURE__*/function () {
  function BeforeInstallPromptEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, BeforeInstallPromptEventEmitter);
    _defineProperty(this, "handleBeforeInstallPrompt", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BeforeInstallPromptEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(BeforeInstallPromptEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'beforeinstallprompt', this.handleBeforeInstallPrompt);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'beforeinstallprompt', this.handleBeforeInstallPrompt);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (BeforeInstallPromptEventEmitter);

/***/ }),

/***/ "./src/main/emitters/BlurEventEmitter.js":
/*!***********************************************!*\
  !*** ./src/main/emitters/BlurEventEmitter.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var BlurEventEmitter = /*#__PURE__*/function () {
  function BlurEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, BlurEventEmitter);
    _defineProperty(this, "handleBlurEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(BlurEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'blur', this.handleBlurEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'blur', this.handleBlurEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (BlurEventEmitter);

/***/ }),

/***/ "./src/main/emitters/CopyEventEmitter.js":
/*!***********************************************!*\
  !*** ./src/main/emitters/CopyEventEmitter.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var CopyEventEmitter = /*#__PURE__*/function () {
  function CopyEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, CopyEventEmitter);
    _defineProperty(this, "handleCopyEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CopyEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(CopyEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'copy', this.handleCopyEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'copy', this.handleCopyEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (CopyEventEmitter);

/***/ }),

/***/ "./src/main/emitters/CutEventEmitter.js":
/*!**********************************************!*\
  !*** ./src/main/emitters/CutEventEmitter.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var CutEventEmitter = /*#__PURE__*/function () {
  function CutEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, CutEventEmitter);
    _defineProperty(this, "handleCutEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CutEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(CutEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'cut', this.handleCutEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'cut', this.handleCutEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (CutEventEmitter);

/***/ }),

/***/ "./src/main/emitters/DOMContentLoadedEventEmitter.js":
/*!***********************************************************!*\
  !*** ./src/main/emitters/DOMContentLoadedEventEmitter.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var DOMContentLoadedEventEmitter = /*#__PURE__*/function () {
  function DOMContentLoadedEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, DOMContentLoadedEventEmitter);
    _defineProperty(this, "handleDOMContentLoadedEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.DOMContentLoadedEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(DOMContentLoadedEventEmitter, [{
    key: "start",
    value: function start(documentInstance) {
      if (!documentInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(documentInstance, 'DOMContentLoaded', this.handleDOMContentLoadedEvent);
    }
  }, {
    key: "stop",
    value: function stop(documentInstance) {
      if (!documentInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(documentInstance, 'DOMContentLoaded', this.handleDOMContentLoadedEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (DOMContentLoadedEventEmitter);

/***/ }),

/***/ "./src/main/emitters/DeviceOrientationEventEmitter.js":
/*!************************************************************!*\
  !*** ./src/main/emitters/DeviceOrientationEventEmitter.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var DeviceOrientationEventEmitter = /*#__PURE__*/function () {
  function DeviceOrientationEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, DeviceOrientationEventEmitter);
    _defineProperty(this, "handleDeviceOrientationEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.DeviceOrientationEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(DeviceOrientationEventEmitter, [{
    key: "start",
    value: function start() {
      this._eventAggregator.addEventListener(window, 'deviceorientation', this.handleDeviceOrientationEvent);
    }
  }, {
    key: "stop",
    value: function stop() {
      this._eventAggregator.removeEventListener(window, 'deviceorientation', this.handleDeviceOrientationEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (DeviceOrientationEventEmitter);

/***/ }),

/***/ "./src/main/emitters/ElementBlurEventEmitter.js":
/*!******************************************************!*\
  !*** ./src/main/emitters/ElementBlurEventEmitter.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ElementBlurEventEmitter = /*#__PURE__*/function () {
  function ElementBlurEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ElementBlurEventEmitter);
    _defineProperty(this, "handleElementBlurEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ElementBlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ElementBlurEventEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        _this2._eventAggregator.addEventListener(elem, 'blur', _this2.handleElementBlurEvents);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        _this3._eventAggregator.removeEventListener(elem, 'blur', _this3.handleElementBlurEvents);
      });
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (ElementBlurEventEmitter);

/***/ }),

/***/ "./src/main/emitters/ElementFocusEventEmitter.js":
/*!*******************************************************!*\
  !*** ./src/main/emitters/ElementFocusEventEmitter.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ElementFocusEventEmitter = /*#__PURE__*/function () {
  function ElementFocusEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ElementFocusEventEmitter);
    _defineProperty(this, "handleElementFocusEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ElementFocusEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ElementFocusEventEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        _this2._eventAggregator.addEventListener(elem, 'focus', _this2.handleElementFocusEvents);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        _this3._eventAggregator.removeEventListener(elem, 'focus', _this3.handleElementFocusEvents);
      });
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (ElementFocusEventEmitter);

/***/ }),

/***/ "./src/main/emitters/FocusEventEmitter.js":
/*!************************************************!*\
  !*** ./src/main/emitters/FocusEventEmitter.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var FocusEventEmitter = /*#__PURE__*/function () {
  function FocusEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, FocusEventEmitter);
    _defineProperty(this, "handleFocusEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.FocusEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(FocusEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'focus', this.handleFocusEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'focus', this.handleFocusEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (FocusEventEmitter);

/***/ }),

/***/ "./src/main/emitters/PasteEventEmitter.js":
/*!************************************************!*\
  !*** ./src/main/emitters/PasteEventEmitter.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var PasteEventEmitter = /*#__PURE__*/function () {
  function PasteEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, PasteEventEmitter);
    _defineProperty(this, "handlePasteEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.PasteEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(PasteEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'paste', this.handlePasteEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'paste', this.handlePasteEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (PasteEventEmitter);

/***/ }),

/***/ "./src/main/emitters/ResizeEventEmitter.js":
/*!*************************************************!*\
  !*** ./src/main/emitters/ResizeEventEmitter.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ResizeEventEmitter = /*#__PURE__*/function () {
  function ResizeEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ResizeEventEmitter);
    _defineProperty(this, "handleResizeEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ResizeEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ResizeEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'resize', this.handleResizeEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'resize', this.handleResizeEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (ResizeEventEmitter);

/***/ }),

/***/ "./src/main/emitters/ScrollEventEmitter.js":
/*!*************************************************!*\
  !*** ./src/main/emitters/ScrollEventEmitter.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ScrollEventEmitter = /*#__PURE__*/function () {
  function ScrollEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ScrollEventEmitter);
    _defineProperty(this, "handleScrollEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ScrollEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ScrollEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'scroll', this.handleScrollEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'scroll', this.handleScrollEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (ScrollEventEmitter);

/***/ }),

/***/ "./src/main/emitters/VisibilityChangeEventEmitter.js":
/*!***********************************************************!*\
  !*** ./src/main/emitters/VisibilityChangeEventEmitter.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var VisibilityChangeEventEmitter = /*#__PURE__*/function () {
  function VisibilityChangeEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, VisibilityChangeEventEmitter);
    _defineProperty(this, "handleVisibilityChangeEvent", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.VisibilityChangeEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(VisibilityChangeEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'visibilitychange', this.handleVisibilityChangeEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'visibilitychange', this.handleVisibilityChangeEvent);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (VisibilityChangeEventEmitter);

/***/ }),

/***/ "./src/main/events/ApiChangeStateEventHandler.js":
/*!*******************************************************!*\
  !*** ./src/main/events/ApiChangeStateEventHandler.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiChangeStateEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ApiChangeStateEventHandler = /*#__PURE__*/function () {
  function ApiChangeStateEventHandler(messageBus, pauseResumeManager, slaveListener) {
    _classCallCheck(this, ApiChangeStateEventHandler);
    this._messageBus = messageBus;
    this._pauseResumeManager = pauseResumeManager;
    this._slaveListener = slaveListener;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiChangeStateEvent, this._handle.bind(this));
  }
  return _createClass(ApiChangeStateEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      // Forward api message to both pause resume manager so state will be changed locally + the slave listener so slaves will receive the state change
      this._pauseResumeManager.onStateChange(event);
      this._slaveListener.notifyStateChange(event);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiContextChangeEventHandler.js":
/*!*********************************************************!*\
  !*** ./src/main/events/ApiContextChangeEventHandler.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiContextChangeEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ApiContextChangeEventHandler = /*#__PURE__*/function () {
  function ApiContextChangeEventHandler(messageBus, contextMgr) {
    _classCallCheck(this, ApiContextChangeEventHandler);
    this._messageBus = messageBus;
    this._contextMgr = contextMgr;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiContextChangeEvent, this._handle.bind(this));
  }
  return _createClass(ApiContextChangeEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      // activityType is for backward compatibility with 1.4 api
      this._contextMgr.changeContext(event.context || event.activityType);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiCustomerMetadataEventHandler.js":
/*!************************************************************!*\
  !*** ./src/main/events/ApiCustomerMetadataEventHandler.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiCustomerMetadataEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ApiCustomerMetadataEventHandler = /*#__PURE__*/function () {
  function ApiCustomerMetadataEventHandler(messageBus, handleMetadata) {
    _classCallCheck(this, ApiCustomerMetadataEventHandler);
    this._messageBus = messageBus;
    this._handleMetadata = handleMetadata;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiCustomerMetadataEvent, this._handle.bind(this));
  }
  return _createClass(ApiCustomerMetadataEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      this._handleMetadata.onCustomerMetadata(event);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiResetSessionEventHandler.js":
/*!********************************************************!*\
  !*** ./src/main/events/ApiResetSessionEventHandler.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiResetSessionEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ApiResetSessionEventHandler = /*#__PURE__*/function () {
  function ApiResetSessionEventHandler(messageBus, sessionService) {
    _classCallCheck(this, ApiResetSessionEventHandler);
    this._messageBus = messageBus;
    this._sessionService = sessionService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiResetSessionEvent, this._handle.bind(this));
  }
  return _createClass(ApiResetSessionEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      this._sessionService.onResetSession(event);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiSetCsidEventHandler.js":
/*!***************************************************!*\
  !*** ./src/main/events/ApiSetCsidEventHandler.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiSetCsidEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var ApiSetCsidEventHandler = /*#__PURE__*/function () {
  function ApiSetCsidEventHandler(messageBus, csidService) {
    _classCallCheck(this, ApiSetCsidEventHandler);
    this._messageBus = messageBus;
    this._csidService = csidService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiSetCsidEvent, this._handle.bind(this));
  }
  return _createClass(ApiSetCsidEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.csid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Received an invalid csid of ".concat(event.csid, ". Ignoring api call"));
        return;
      }
      this._csidService.set(event.csid);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiSetCustomerBrandEventHandler.js":
/*!************************************************************!*\
  !*** ./src/main/events/ApiSetCustomerBrandEventHandler.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiSetCustomerBrandEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var ApiSetCustomerBrandEventHandler = /*#__PURE__*/function () {
  /**
   *
   * @param messageBus {MessageBus}
   * @param brandService {BrandService}
   */
  function ApiSetCustomerBrandEventHandler(messageBus, brandService) {
    _classCallCheck(this, ApiSetCustomerBrandEventHandler);
    this._messageBus = messageBus;
    this._brandService = brandService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiSetCustomerBrand, this._handle.bind(this));
  }
  return _createClass(ApiSetCustomerBrandEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.brand) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Received an empty brand name. Ignoring the API call");
        return;
      }
      this._brandService.set(event.brand);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ApiSetPsidEventHandler.js":
/*!***************************************************!*\
  !*** ./src/main/events/ApiSetPsidEventHandler.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ApiSetPsidEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var ApiSetPsidEventHandler = /*#__PURE__*/function () {
  function ApiSetPsidEventHandler(messageBus, psidService) {
    _classCallCheck(this, ApiSetPsidEventHandler);
    this._messageBus = messageBus;
    this._psidService = psidService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ApiSetPsidEvent, this._handle.bind(this));
  }
  return _createClass(ApiSetPsidEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.psid) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Received an invalid psid of ".concat(event.psid, ". Ignoring api call"));
        return;
      }
      this._psidService.set(event.psid);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/ConfigurationLoadedEventHandler.js":
/*!************************************************************!*\
  !*** ./src/main/events/ConfigurationLoadedEventHandler.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ConfigurationLoadedEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _core_state_State__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/state/State */ "./src/main/core/state/State.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../technicalServices/CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






/**
 * This class is for handling the configuration loaded event
 */
var ConfigurationLoadedEventHandler = /*#__PURE__*/function () {
  function ConfigurationLoadedEventHandler(messageBus, featureService, featureServiceV2, dataQ, pauseResumeMgr, handleMetadata, logger, contextMgr, sessionService, sensorDataQ, slaveListener, stateService, performanceMonitor, heartBeatMessageService, sensorGateKeeper, sidRepository, coordinatesMaskingConfigurationUpdater) {
    _classCallCheck(this, ConfigurationLoadedEventHandler);
    this._messageBus = messageBus;
    this._featureService = featureService;
    this._dataQ = dataQ;
    this._pauseResumeMgr = pauseResumeMgr;
    this._handleMetadata = handleMetadata;
    this._logger = logger;
    this._contextMgr = contextMgr;
    this._sessionService = sessionService;
    this._sensorDataQ = sensorDataQ;
    this._slaveListener = slaveListener;
    this._stateService = stateService;
    this._performanceMonitor = performanceMonitor;
    this._heartBeatMessageService = heartBeatMessageService;
    this._sensorGateKeeper = sensorGateKeeper;
    this._sidRepository = sidRepository;
    this._featureServiceV2 = featureServiceV2;
    this._coordinatesMaskingConfigurationUpdater = coordinatesMaskingConfigurationUpdater;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ConfigurationLoadedEvent, this._handle.bind(this));
  }
  return _createClass(ConfigurationLoadedEventHandler, [{
    key: "_handle",
    value: function _handle(configurationRepository) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Configurations were loaded from the server.');
      this._performanceMonitor.stopMonitor('t.timeTillServerConfig');
      this._featureService.updateRunByConfig(configurationRepository);
      this._dataQ.updateWithConfig(configurationRepository);
      this._pauseResumeMgr.onConfigUpdate(configurationRepository);
      this._handleMetadata.onConfigUpdate(configurationRepository);
      this._logger.updateLogConfig(configurationRepository);
      this._contextMgr.onConfigUpdate(configurationRepository);
      this._sessionService.onConfigUpdate(configurationRepository);
      this._sensorDataQ.onConfigUpdate(configurationRepository);
      this._slaveListener.onConfigUpdate(configurationRepository);
      this._heartBeatMessageService.updateConfig(configurationRepository);
      this._sensorGateKeeper.configure();
      this._sidRepository.onConfigUpdate(configurationRepository);
      this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(configurationRepository);

      // Mark the state as started
      this._stateService.updateState(_core_state_State__WEBPACK_IMPORTED_MODULE_1__.State.started);
      this._tryToRunCollectorsV2(configurationRepository);
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Successfully configured system');
    }
  }, {
    key: "_tryToRunCollectorsV2",
    value: function _tryToRunCollectorsV2(configurationRepository) {
      try {
        this._runCollectorsV2(configurationRepository);
      } catch (error) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error('Could not start Feature Service V2, Error: ', error);
      }
    }
  }, {
    key: "_runCollectorsV2",
    value: function _runCollectorsV2(configurationRepository) {
      var isCollectorsV2 = configurationRepository && typeof configurationRepository.get === 'function' && configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_3__.ConfigurationFields.isCollectorsV2);
      if (isCollectorsV2) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Starting Feature Service V2, Timestamp: ', _technicalServices_CDUtils__WEBPACK_IMPORTED_MODULE_4__["default"].dateNow());
        this._featureServiceV2.runDefaultCollectors();
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/HeartBeatEvent.js":
/*!*******************************************!*\
  !*** ./src/main/events/HeartBeatEvent.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ HeartBeatEvent; },
/* harmony export */   statusTypes: function() { return /* binding */ statusTypes; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var statusTypes = {
  Ok: 'oK',
  Error: 'Error',
  RequestError: 'RequestError'
};
var HeartBeatEvent = /*#__PURE__*/_createClass(function HeartBeatEvent(category, status) {
  _classCallCheck(this, HeartBeatEvent);
  this.category = category;
  this.status = status;
});


/***/ }),

/***/ "./src/main/events/MessageBusEventType.js":
/*!************************************************!*\
  !*** ./src/main/events/MessageBusEventType.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageBusEventType: function() { return /* binding */ MessageBusEventType; }
/* harmony export */ });
var MessageBusEventType = {
  TouchEvent: 'touchEvent',
  KeyEvent: 'keyEvent',
  MainThreadBlocking: 'MainThreadBlocking',
  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
  NewSessionStartedEvent: 'NewSessionStartedEvent',
  WupDispatchRateUpdatedEvent: 'WupDispatchRateUpdatedEvent',
  ApiContextChangeEvent: 'ApiContextChangeEvent',
  ApiResetSessionEvent: 'ApiResetSessionEvent',
  ApiCustomerMetadataEvent: 'ApiCustomerMetadataEvent',
  ApiChangeStateEvent: 'ApiChangeStateEvent',
  ApiSetCsidEvent: 'ApiSetCsidEvent',
  ApiSetPsidEvent: 'ApiSetPsidEvent',
  ApiSetCustomerBrand: 'ApiSetCustomerBrand',
  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent',
  StateChangedEvent: 'StateChangedEvent',
  MutationSingleEvent: 'MutationSingleEvent',
  MutationAddedNodes: 'MutationAddedNodes',
  MutationRemovedNodes: 'MutationRemovedNodes',
  StandardInputEvent: 'StandardInputEvent',
  StandardInputFocusEvent: 'StandardInputFocusEvent',
  StandardInputBlurEvent: 'StandardInputBlurEvent',
  StandardOnClickEvent: 'StandardOnClickEvent',
  StandardOnSelectEvent: 'StandardOnSelectEvent',
  ElementFocusEvent: 'ElementFocusEvent',
  ElementBlurEvent: 'ElementBlurEvent',
  StandardOnFormSubmitEvent: 'StandardOnFormSubmitEvent',
  SyntheticInputMaskEvent: 'SyntheticInputMaskEvent',
  CutEvent: 'CutEvent',
  CopyEvent: 'CopyEvent',
  PasteEvent: 'PasteEvent',
  DeviceOrientationEvent: 'DeviceOrientationEvent',
  BeforeInstallPromptEvent: 'BeforeInstallPromptEvent',
  FocusEvent: 'FocusEvent',
  BlurEvent: 'BlurEvent',
  ResizeEvent: 'ResizeEvent',
  DOMContentLoadedEvent: 'DOMContentLoadedEvent',
  VisibilityChangeEvent: 'VisibilityChangeEvent',
  ScrollEvent: 'ScrollEvent',
  WindowMessageEvent: 'WindowMessageEvent',
  WorkerSystemStatusEvent: 'WorkerSystemStatusEvent',
  CustomElementDetectedEvent: 'CustomElementDetectedEvent',
  CustomElementAddedEvent: 'CustomElementAddedEvent',
  CustomElementRemovedEvent: 'CustomElementRemovedEvent',
  CustomElementInaccessible: 'CustomElementInaccessible',
  CustomElementSubmitted: 'CustomElementSubmitted',
  BrowserContextAdded: 'BrowserContextAdded',
  RunDefaultFeatures: 'RunDefaultFeatures',
  StopDefaultFeatures: 'StopDefaultFeatures',
  CustomInputElement: 'CustomInputElement',
  BCTracker: {
    ElementsEvent: 'BCTrackerElementsEvent',
    ElementEventsEvent: 'BCTrackerElementEventsEvent',
    KeyEvent: 'BCTrackerKeyEvent',
    TouchEvent: 'BCTrackerTouchEvent',
    MouseEvent: 'BCTrackerMouseEvent'
  }
};

/***/ }),

/***/ "./src/main/events/NewSessionStartedEventHandler.js":
/*!**********************************************************!*\
  !*** ./src/main/events/NewSessionStartedEventHandler.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NewSessionStartedEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * This class is for handling a new session start event. This event occurs once per session once the session starts.
 * The event is triggered after a new session id is received from the server. This can be due to the server deciding
 * that the session should be reset, or due to a request from the SDK.
 */

var NewSessionStartedEventHandler = /*#__PURE__*/function () {
  function NewSessionStartedEventHandler(messageBus, featureService, customerApiBridge, contextMgr, clientEventService, sessionInfoService) {
    _classCallCheck(this, NewSessionStartedEventHandler);
    this._messageBus = messageBus;
    this._featureService = featureService;
    this._customerApiBridge = customerApiBridge;
    this._contextMgr = contextMgr;
    this._clientEventService = clientEventService;
    this._sessionInfoService = sessionInfoService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.NewSessionStartedEvent, this._handle.bind(this));
  }
  return _createClass(NewSessionStartedEventHandler, [{
    key: "_handle",
    value: function _handle(sessionId) {
      // Mark the session start time on the client side.
      this._sessionInfoService.markStartTime();
      this._featureService.runPerSessionFeatures();
      // Send the legacy session started event
      this._customerApiBridge.notifySessionReset(sessionId);
      this._contextMgr.onSessionReset();

      // Publish the new event
      this._clientEventService.publishNewSessionStartedEvent(sessionId);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/NodesAddedMutationEvent.js":
/*!****************************************************!*\
  !*** ./src/main/events/NodesAddedMutationEvent.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NodesAddedMutationEvent; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var NodesAddedMutationEvent = /*#__PURE__*/_createClass(function NodesAddedMutationEvent(browserContext, addedNodes) {
  _classCallCheck(this, NodesAddedMutationEvent);
  this.browserContext = browserContext;
  this.addedNodes = addedNodes;
});


/***/ }),

/***/ "./src/main/events/NodesRemovedMutationEvent.js":
/*!******************************************************!*\
  !*** ./src/main/events/NodesRemovedMutationEvent.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NodesRemovedMutationEvent; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var NodesRemovedMutationEvent = /*#__PURE__*/_createClass(function NodesRemovedMutationEvent(browserContext, removedNodes) {
  _classCallCheck(this, NodesRemovedMutationEvent);
  this.browserContext = browserContext;
  this.removedNodes = removedNodes;
});


/***/ }),

/***/ "./src/main/events/RestoredMuidEventHandler.js":
/*!*****************************************************!*\
  !*** ./src/main/events/RestoredMuidEventHandler.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ RestoredMuidEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WorkerEvent */ "./src/main/events/WorkerEvent.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var RestoredMuidEventHandler = /*#__PURE__*/function () {
  function RestoredMuidEventHandler(messageBus, muidService, clientEventService, workerCommunicator) {
    _classCallCheck(this, RestoredMuidEventHandler);
    this._messageBus = messageBus;
    this._muidService = muidService;
    this._clientEventService = clientEventService;
    this._workerCommunicator = workerCommunicator;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerRestoredMuidEvent, this._handler.bind(this), true);
    this._workerCommunicator.addMessageListener(_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.ServerRestoredMuidEvent, this._publish.bind(this), true);
  }

  /**
   * When getting a restored muid event from the Worker
   * the function gets the restored muid and update the client side with the restored one
   * also, event is dispatching notifying the event
   * @param restoredMuid - The restored muid
   */
  return _createClass(RestoredMuidEventHandler, [{
    key: "_handler",
    value: function _handler(restoredMuid) {
      var _this$_muidService;
      //updating session muid in cookie and storage
      (_this$_muidService = this._muidService) === null || _this$_muidService === void 0 || _this$_muidService.updateMuid(restoredMuid);
      this._clientEventService.publishRestoredMuidEvent(restoredMuid);
    }
  }, {
    key: "_publish",
    value: function _publish(muid) {
      this._messageBus.publish(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerRestoredMuidEvent, muid);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/StateChangedEventHandler.js":
/*!*****************************************************!*\
  !*** ./src/main/events/StateChangedEventHandler.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StateChangedEventHandler; }
/* harmony export */ });
/* harmony import */ var _MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * This class is for handling state changes
 */


var StateChangedEventHandler = /*#__PURE__*/function () {
  function StateChangedEventHandler(messageBus, clientEventService) {
    _classCallCheck(this, StateChangedEventHandler);
    this._messageBus = messageBus;
    this._clientEventService = clientEventService;
    this._messageBus.subscribe(_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.StateChangedEvent, this._handle.bind(this));
  }
  return _createClass(StateChangedEventHandler, [{
    key: "_handle",
    value: function _handle(stateChangedEvent) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].info("SDK state changed to ".concat(stateChangedEvent.state));
      this._clientEventService.publishStateChangedEvent(stateChangedEvent.state);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/events/WorkerCommand.js":
/*!******************************************!*\
  !*** ./src/main/events/WorkerCommand.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WorkerCommand: function() { return /* binding */ WorkerCommand; }
/* harmony export */ });
var WorkerCommand = {
  requestConfigurationsCommand: 'requestConfigurationsCommand',
  startNewSessionCommand: 'startNewSessionCommand',
  resumeSessionCommand: 'resumeSessionCommand',
  changeContextCommand: 'changeContextCommand',
  updateCsidCommand: 'updateCsidCommand',
  updatePsidCommand: 'updatePsidCommand',
  updateLogUrlCommand: 'updateLogUrl',
  sendDataCommand: 'sendDataCommand',
  sendLogCommand: 'sendLogCommand',
  updateBrandCommand: 'updateBrandCommand',
  stateUpdateFromStorage: 'stateUpdateFromStorage',
  setAgentTypeCommand: 'setAgentTypeCommand',
  updateAgentIdCommand: 'updateAgentIdCommand',
  enableWupMessagesHashingCommand: 'enableWupMessagesHashingCommand',
  updateSDKStateCommand: 'updateSDKState',
  scanFontsCommand: 'scanFontsCommand'
};

/***/ }),

/***/ "./src/main/events/WorkerEvent.js":
/*!****************************************!*\
  !*** ./src/main/events/WorkerEvent.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WorkerEvent: function() { return /* binding */ WorkerEvent; }
/* harmony export */ });
var WorkerEvent = {
  NewSessionStartedEvent: 'NewSessionStartedEvent',
  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
  HeartBeatStatusEvent: 'HeartBeatStatusEvent',
  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
  SetAgentTypeEvent: 'SetAgentTypeEvent',
  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent'
};

/***/ }),

/***/ "./src/main/events/WorkerResponse.js":
/*!*******************************************!*\
  !*** ./src/main/events/WorkerResponse.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WorkerResponse: function() { return /* binding */ WorkerResponse; }
/* harmony export */ });
var WorkerResponse = {
  fontDetectionResponse: 'fontDetectionResponse'
};

/***/ }),

/***/ "./src/main/flutter/FlutterSdkBridge.js":
/*!**********************************************!*\
  !*** ./src/main/flutter/FlutterSdkBridge.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlutterSdkBridge: function() { return /* binding */ FlutterSdkBridge; }
/* harmony export */ });
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var FlutterSdkBridge = /*#__PURE__*/function () {
  function FlutterSdkBridge(messageBus) {
    _classCallCheck(this, FlutterSdkBridge);
    this.messageBus = messageBus;
  }
  return _createClass(FlutterSdkBridge, [{
    key: "collectElement",
    value: function collectElement(hashCode, elementId, widthElement, heightElement, dxPosition, dyPosition, widgetType, elementValue, timestamp) {
      this.messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BCTracker.ElementsEvent, {
        hashCode: hashCode,
        elementId: elementId,
        widthElement: widthElement,
        heightElement: heightElement,
        dxPosition: dxPosition,
        dyPosition: dyPosition,
        widgetType: widgetType,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectElementEvent",
    value: function collectElementEvent(hashCode, elementId, eventType, elementValue, timestamp) {
      this.messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BCTracker.ElementEventsEvent, {
        hashCode: hashCode,
        elementId: elementId,
        eventType: eventType,
        elementValue: elementValue,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectTouchEvent",
    value: function collectTouchEvent(hashCode, touchState, x, y, pointer, sourceName, size, radiusMajor, radiusMinor, pressure, orientation, timestamp) {
      this.messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BCTracker.TouchEvent, {
        hashCode: hashCode,
        touchState: touchState,
        x: x,
        y: y,
        pointer: pointer,
        radiusMajor: radiusMajor,
        radiusMinor: radiusMinor,
        pressure: pressure,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectKeyEvent",
    value: function collectKeyEvent(hashCode, elementId, _char, timestamp) {
      this.messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BCTracker.KeyEvent, {
        hashCode: hashCode,
        elementId: elementId,
        "char": _char,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectOnMouseEvent",
    value: function collectOnMouseEvent(hashCode, touchState, x, y, pointer, sourceName, size, radiusMajor, radiusMinor, pressure, orientation, timestamp) {
      this.messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.BCTracker.MouseEvent, {
        hashCode: hashCode,
        type: touchState,
        screenX: x,
        screenY: y,
        pointer: pointer,
        radiusMajor: radiusMajor,
        radiusMinor: radiusMinor,
        pressure: pressure,
        timeStamp: timestamp
      });
    }
  }]);
}();

/***/ }),

/***/ "./src/main/flutter/collectors/elements/FlutterElementEventsCollector.js":
/*!*******************************************************************************!*\
  !*** ./src/main/flutter/collectors/elements/FlutterElementEventsCollector.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FlutterElementEventsCollector; }
/* harmony export */ });
/* harmony import */ var _collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../collectors/DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../collectors/events/ElementEventCollector */ "./src/main/collectors/events/ElementEventCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var FlutterElementEventsCollector = /*#__PURE__*/function (_DataCollector) {
  function FlutterElementEventsCollector(msgBus, dataQueue, utils, contextMgr, maskingService) {
    var _this;
    _classCallCheck(this, FlutterElementEventsCollector);
    _this = _callSuper(this, FlutterElementEventsCollector);
    _defineProperty(_this, "_collectEventElement", function (event) {
      var eventSequence = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = _this.getEventTimestamp();
      var relativeTs = _this.getTimestampFromEvent(event);
      var maskedValue = _this._maskingService.maskText(event.elementValue, event.elementId);
      var type = _collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_2__.ElementEventType[event.eventType];
      if (maskedValue && maskedValue.length > _this._maxElemValLength) {
        maskedValue = '';
      }
      _this._dataQueue.addToQueue('element_events', _this._utils.convertToArrayByMap(_collectors_events_ElementEventCollector__WEBPACK_IMPORTED_MODULE_2__.EventStructure, {
        eventSequence: eventSequence,
        timestamp: timestamp,
        eventType: type,
        isTrusted: -1,
        elementHash: event.hashCode,
        length: maskedValue.length,
        elementValues: maskedValue,
        selected: -1,
        hashedValue: '',
        relativeTime: relativeTs
      }));
    });
    _defineProperty(_this, "_collectElement", function (event) {
      if (!_this._utils.isUndefinedNull(event.hashCode) && !_this._elementWMap.has(event.hashCode)) {
        _this._elementWMap.add(event.hashCode);
        var elemId = _this._maskingService.maskAbsoluteIfRequired(event.elementId, event.elementId);
        _this._dataQueue.addToQueue('elements', [_this._contextMgr.contextHash, event.hashCode, '', elemId || '', '', event.widgetType || '', event.dxPosition || 0, event.dyPosition || 0, event.widthElement || 0, event.heightElement || 0, '', '', '', '', '', '', 0, event.timeStamp, '', '', '']);
      }
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._contextMgr = contextMgr;
    _this._maskingService = maskingService;
    _this._elementWMap = new Set();
    _this._maxElemValLength = 200;
    return _this;
  }
  _inherits(FlutterElementEventsCollector, _DataCollector);
  return _createClass(FlutterElementEventsCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterElementEventsCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.ElementEventsEvent, this._collectEventElement);
      this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.ElementsEvent, this._collectElement);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.ElementEventsEvent, this._collectEventElement);
      this._msgBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.ElementsEvent, this._collectElement);
      _superPropGet(FlutterElementEventsCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(_collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/flutter/collectors/key/FlutterKeyEventCollector.js":
/*!*********************************************************************!*\
  !*** ./src/main/flutter/collectors/key/FlutterKeyEventCollector.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FlutterKeyEventCollector; }
/* harmony export */ });
/* harmony import */ var _collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../collectors/DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../collectors/events/KeyEventCollector */ "./src/main/collectors/events/KeyEventCollector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var FlutterKeyEventCollector = /*#__PURE__*/function (_DataCollector) {
  function FlutterKeyEventCollector(msgBus, dataQueue, utils, maskingService) {
    var _this;
    _classCallCheck(this, FlutterKeyEventCollector);
    _this = _callSuper(this, FlutterKeyEventCollector);
    _defineProperty(_this, "_onKeyEvent", function (event) {
      var eventSequence = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = _this.getEventTimestamp();
      var eventKey = event["char"];
      var KeyMaskedParameters = _this._maskingService.maskKey(eventKey, '', event.elementId);
      var character = KeyMaskedParameters.key.length > 1 ? '' : KeyMaskedParameters.key;
      var relativeTs = _this.getTimestampFromEvent(event);
      _this._dataQueue.addToQueue('key_events', _this._utils.convertToArrayByMap(_collectors_events_KeyEventCollector__WEBPACK_IMPORTED_MODULE_2__.EventStructure, {
        eventSequence: eventSequence,
        timestamp: timestamp,
        eventType: 2,
        /*KeyEventType.KEY_PRESS?*/
        isTrusted: -1,
        elementHash: event.hashCode,
        charCode: KeyMaskedParameters.charCode,
        character: character,
        keyComboType: -1,
        isCtrl: false,
        isShift: false,
        isAlt: false,
        isMetaKey: false,
        keyLocation: 0,
        code: KeyMaskedParameters.code || '',
        key: KeyMaskedParameters.key || '',
        isRepeat: false,
        keyRegion: "-1",
        relativeTime: relativeTs,
        isSameKey: -1
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    return _this;
  }
  _inherits(FlutterKeyEventCollector, _DataCollector);
  return _createClass(FlutterKeyEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterKeyEventCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.KeyEvent, this._onKeyEvent);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.KeyEvent, this._onKeyEvent);
      _superPropGet(FlutterKeyEventCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(_collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js":
/*!*************************************************************************!*\
  !*** ./src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlutterMouseEventType: function() { return /* binding */ FlutterMouseEventType; },
/* harmony export */   "default": function() { return /* binding */ FlutterMouseEventCollector; }
/* harmony export */ });
/* harmony import */ var _collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../collectors/DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _collectors_events_MouseEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../collectors/events/MouseEventCollector */ "./src/main/collectors/events/MouseEventCollector.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../collectors/events/IsTrustedValue */ "./src/main/collectors/events/IsTrustedValue.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var FlutterMouseEventType = {
  mousemove: 0,
  onTapDown: 1,
  onTapUp: 2
};
var FlutterMouseEventCollector = /*#__PURE__*/function (_DataCollector) {
  function FlutterMouseEventCollector(msgBus, dataQueue, utils, maskingService, domUtils, configuration) {
    var _this;
    _classCallCheck(this, FlutterMouseEventCollector);
    _this = _callSuper(this, FlutterMouseEventCollector);
    _defineProperty(_this, "_onMouseEvent", function (event) {
      var eventType = FlutterMouseEventType[event.type];
      var relativeTs = _this.getTimestampFromEvent(event);
      _this._dataQueue.addToQueue('mouse_events', _this._utils.convertToArrayByMap(_collectors_events_MouseEventCollector__WEBPACK_IMPORTED_MODULE_2__.EventStructure, {
        eventSequence: _this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
        timestamp: _this.getEventTimestamp(),
        eventType: eventType,
        isTrusted: event.type === 'mousemove' ? _collectors_events_IsTrustedValue__WEBPACK_IMPORTED_MODULE_4__.IsTrustedValue[event.isTrusted] : -1,
        elementHash: event.type === 'mousemove' ? 0 : event.hashCode,
        pageX: _this._resolveCoordinate(event.type, event.pageX),
        pageY: _this._resolveCoordinate(event.type, event.pageY),
        // we get only screen coordinates (and not page and client) for non-'mousemove' events.
        screenX: _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.screenX),
        screenY: _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates : _this._roundCoordinate(event.screenY),
        button: 0,
        wheelDelta: 0,
        clientX: _this._resolveCoordinate(event.type, event.clientX),
        clientY: _this._resolveCoordinate(event.type, event.clientY),
        eventDetail: event.type === 'mousemove' ? event.detail || 0 : 0,
        buttonNew: 0,
        relativeTime: relativeTs
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    _this._domUtils = domUtils;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }

  // BcTracker listens to mouse events (up, down) only at the widget level.
  // For 'mousemove' events, it listens at the browser's document context level.
  _inherits(FlutterMouseEventCollector, _DataCollector);
  return _createClass(FlutterMouseEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      _superPropGet(FlutterMouseEventCollector, "startFeature", this, 3)([]);
      try {
        var currDocument = browserContext.getDocument();
        this._domUtils.addEventListener(currDocument, 'mousemove', this._onMouseEvent, true);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            _this2._domUtils.addEventListener(iframe.contentDocument, 'mousemove', _this2._onMouseEvent, true);
          });
        });
        this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.MouseEvent, this._onMouseEvent);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].error("MouseEvents:startFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._domUtils.removeEventListener(currDocument, 'mousemove', this._onMouseEvent, true);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            _this3._domUtils.removeEventListener(iframe.contentDocument, 'mousemove', _this3._onMouseEvent, true);
          });
        });
        this._msgBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.MouseEvent, this._onMouseEvent);
      } catch (err) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_3__["default"].error("MouseEvents:stopFeature failed. msg: ".concat(err.message), err);
      }
      _superPropGet(FlutterMouseEventCollector, "stopFeature", this, 3)([]);
    }
  }, {
    key: "_resolveCoordinate",
    value: function _resolveCoordinate(eventType, coordinate) {
      if (eventType === 'mousemove') {
        if (this._maskingService.shouldMaskCoordinates()) {
          return _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_5__.defaultMaskedCoordinates;
        }

        // we get only screen coordinates (and not page and client) for non-'mousemove' events.
        return this._roundCoordinate(coordinate);
      }
      return 0;
    }
  }, {
    key: "_roundCoordinate",
    value: function _roundCoordinate(coordinate) {
      if (coordinate) {
        return Math.round(coordinate);
      }
      return -1;
    }
  }]);
}(_collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/flutter/collectors/touch/FlutterTouchEventCollector.js":
/*!*************************************************************************!*\
  !*** ./src/main/flutter/collectors/touch/FlutterTouchEventCollector.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlutterTouchEventType: function() { return /* binding */ FlutterTouchEventType; },
/* harmony export */   "default": function() { return /* binding */ FlutterTouchEventCollector; }
/* harmony export */ });
/* harmony import */ var _collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../collectors/DataCollector */ "./src/main/collectors/DataCollector.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
/* harmony import */ var _collectors_events_TouchEventCollector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../collectors/events/TouchEventCollector */ "./src/main/collectors/events/TouchEventCollector.js");
/* harmony import */ var _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/masking/MaskingService */ "./src/main/core/masking/MaskingService.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




var FlutterTouchEventType = {
  onTapDown: 0,
  onTapUp: 2
};
var FlutterTouchEventCollector = /*#__PURE__*/function (_DataCollector) {
  function FlutterTouchEventCollector(msgBus, dataQueue, utils, maskingService) {
    var _this;
    _classCallCheck(this, FlutterTouchEventCollector);
    _this = _callSuper(this, FlutterTouchEventCollector);
    _defineProperty(_this, "_onTouchEvent", function (event) {
      var type = FlutterTouchEventType[event.touchState];
      if (type === FlutterTouchEventType.onTapDown || type === FlutterTouchEventType.onTapUp) {
        _this._msgBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.TouchEvent, {
          action: type
        });
      }
      var time = _this.getEventTimestamp();
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var relativeTs = _this.getTimestampFromEvent(event);
      if (_this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      _this._dataQueue.addToQueue('touch_events', _this._utils.convertToArrayByMap(_collectors_events_TouchEventCollector__WEBPACK_IMPORTED_MODULE_2__.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        eventType: type,
        isTrusted: -1,
        elementHash: event.hashCode,
        clientX: _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : event.x ? Math.round(event.x) : 0,
        clientY: _this._maskingService.shouldMaskCoordinates() ? _core_masking_MaskingService__WEBPACK_IMPORTED_MODULE_3__.defaultMaskedCoordinates : event.y ? Math.round(event.y) : 0,
        touchIndex: event.pointer,
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: event.radiusMajor ? event.radiusMajor * 2 : 0,
        touchSizeMinor: event.radiusMinor ? event.radiusMinor * 2 : 0,
        pageX: 0,
        pageY: 0,
        screenX: 0,
        screenY: 0,
        relativeTime: relativeTs,
        touchPressure: event.pressure || -1
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    return _this;
  }
  _inherits(FlutterTouchEventCollector, _DataCollector);
  return _createClass(FlutterTouchEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterTouchEventCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.TouchEvent, this._onTouchEvent);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.BCTracker.TouchEvent, this._onTouchEvent);
      _superPropGet(FlutterTouchEventCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(_collectors_DataCollector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/infrastructure/CDEvent.js":
/*!********************************************!*\
  !*** ./src/main/infrastructure/CDEvent.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CDEvent; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var CDEvent = /*#__PURE__*/function () {
  function CDEvent() {
    _classCallCheck(this, CDEvent);
    this._listeners = [];
  }
  return _createClass(CDEvent, [{
    key: "subscribe",
    value: function subscribe(listener) {
      this._listeners.push(listener);
    }
  }, {
    key: "publish",
    value: function publish(args) {
      for (var i = 0, len = this._listeners.length; i < len; i++) {
        this._listeners[i](args);
      }
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe(callback) {
      for (var i = 0, len = this._listeners.length; i < len; i++) {
        if (callback === this._listeners[i]) {
          this._listeners.splice(i, 1);
          break;
        }
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/infrastructure/CDMap.js":
/*!******************************************!*\
  !*** ./src/main/infrastructure/CDMap.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   create: function() { return /* binding */ create; },
/* harmony export */   createLocal: function() { return /* binding */ createLocal; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/*
 * A polyfill for unsupported mode. This polyfill has O(n) on all methods so its a big piece of junk but will due for our needs
 * @constructor
 */
var CDMap = /*#__PURE__*/function () {
  function CDMap() {
    _classCallCheck(this, CDMap);
    this._pairs = [];
    this.size = 0;
  }
  return _createClass(CDMap, [{
    key: "has",
    value: function has(key) {
      return this._indexOf(key) > -1;
    }
  }, {
    key: "get",
    value: function get(key) {
      var index = this._indexOf(key);
      if (index > -1) {
        return this._pairs[index][1];
      }
      return undefined;
    }
  }, {
    key: "set",
    value: function set(key, value) {
      var index = this._indexOf(key);
      if (index > -1) {
        this._pairs[index][1] = value;
      } else {
        this._pairs.push([key, value]);
        this.size++;
      }
    }
  }, {
    key: "delete",
    value: function _delete(key) {
      var index = this._indexOf(key);
      if (index > -1) {
        this._pairs.splice(index, 1);
        this.size--;
        return true;
      }
      return false;
    }
  }, {
    key: "forEach",
    value: function forEach(cb) {
      for (var i = 0; i < this._pairs.length; i++) {
        cb(this._pairs[i][1], this._pairs[i][0]);
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      this._pairs = [];
    }
  }, {
    key: "_indexOf",
    value: function _indexOf(key) {
      for (var i = 0; i < this._pairs.length; i++) {
        if (this._pairs[i][0] === key) {
          return i;
        }
      }
      return -1;
    }
  }]);
}();
var create = function create() {
  var Ctor = self.Map || CDMap;
  return new Ctor();
};
var createLocal = function createLocal() {
  return new CDMap();
};

/***/ }),

/***/ "./src/main/infrastructure/CDPort.js":
/*!*******************************************!*\
  !*** ./src/main/infrastructure/CDPort.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CDPort; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var CDPort = /*#__PURE__*/function () {
  function CDPort(nativeWorker) {
    _classCallCheck(this, CDPort);
    this._portNativeWorker = nativeWorker;
  }

  /* eslint-disable prefer-rest-params */
  return _createClass(CDPort, [{
    key: "postMessage",
    value: function postMessage() {
      this._portNativeWorker.postMessage.apply(this._portNativeWorker, arguments);
    }

    /* eslint-enable prefer-rest-params */
  }, {
    key: "close",
    value: function close() {
      this._portNativeWorker.terminate();
    }

    // in the original is was set onmessage using a setter but since IE8 does not support setters I changed
  }, {
    key: "setonmessage",
    value: function setonmessage(cb) {
      this._portNativeWorker.onmessage = cb;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/infrastructure/CDSet.js":
/*!******************************************!*\
  !*** ./src/main/infrastructure/CDSet.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   create: function() { return /* binding */ create; },
/* harmony export */   createLocal: function() { return /* binding */ createLocal; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/*
 * A polyfill for unsupported mode. It is not a full polyfill since it does not support Object as a value and more,
 * but enough for our needs...
 * @constructor
 */
var CDSet = /*#__PURE__*/function () {
  function CDSet() {
    _classCallCheck(this, CDSet);
    this._set = [];
    this.size = 0;
  }
  return _createClass(CDSet, [{
    key: "add",
    value: function add(val) {
      this._set.push(val);
      this.size++;
      return this; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/add
    }
  }, {
    key: "has",
    value: function has(val) {
      return this._set.indexOf(val) > -1;
    }
  }, {
    key: "delete",
    value: function _delete(val) {
      for (var i = 0; i < this._set.length; i++) {
        if (this._set[i] === val) {
          this._set.splice(i, 1);
          this.size--;
          return true; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/delete
        }
      }
      return false;
    }
  }, {
    key: "forEach",
    value: function forEach(cb) {
      for (var i = 0; i < this._set.length; i++) {
        cb(this._set[i]);
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      this._set = [];
    }
  }]);
}();
var create = function create() {
  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var Ctor = self.Set || CDSet;
  var set = new Ctor();
  for (var i = 0; i < initial_values.length; i++) {
    set.add(initial_values[i]);
  }
  return set;
};
var createLocal = function createLocal() {
  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var set = new CDSet();
  for (var i = 0; i < initial_values.length; i++) {
    set.add(initial_values[i]);
  }
  return set;
};

/***/ }),

/***/ "./src/main/infrastructure/GlobalExceptionHandler.js":
/*!***********************************************************!*\
  !*** ./src/main/infrastructure/GlobalExceptionHandler.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ GlobalExceptionHandler; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Class catches global exceptions from our script and sends log
 */
var GlobalExceptionHandler = /*#__PURE__*/function () {
  function GlobalExceptionHandler(cdUtils, scriptName) {
    _classCallCheck(this, GlobalExceptionHandler);
    this._cdUtils = cdUtils;
    this._scriptName = scriptName;
    this._cdUtils.addEventListener(window, 'error', this._handleException.bind(this));
  }

  /**
   * validates the sid has the predefined value of timestamp-sid
   * @param error
   */
  return _createClass(GlobalExceptionHandler, [{
    key: "_handleException",
    value: function _handleException(errorEvent) {
      if (this._scriptName && this._scriptName === errorEvent.filename) {
        var errorMessage = this._buildErrorMessage(errorEvent);
        if (errorEvent.error) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("caught unhandled exception. ".concat(errorMessage));
        } else {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("caught unhandled exception. ".concat(errorMessage)); //Browser security restrictions, not actionable SDK errors
        }
      }
    }
  }, {
    key: "_buildErrorMessage",
    value: function _buildErrorMessage(errorEvent) {
      if (!errorEvent.error) {
        return errorEvent.message;
      }
      var errorString = errorEvent.error.toString();
      var callStack = errorEvent.error.stack ? errorEvent.error.stack : '';
      return "".concat(errorString, ", Line: ").concat(errorEvent.lineno, ", Column: ").concat(errorEvent.colno, ". Stacktrace: ").concat(callStack);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/infrastructure/HttpRequestFactory.js":
/*!*******************************************************!*\
  !*** ./src/main/infrastructure/HttpRequestFactory.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ HttpRequestFactory; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Factory for creating an http request object. If XmlHttpRequest with cors support is available it is used. Otherwise if XDomainRequest is supported it is used.
 * If both are not supported we use XmlHttpRequest...
 */
var HttpRequestFactory = /*#__PURE__*/function () {
  function HttpRequestFactory() {
    _classCallCheck(this, HttpRequestFactory);
  }
  return _createClass(HttpRequestFactory, null, [{
    key: "create",
    value: function create() {
      // Notice that the order of the conditions is important!
      // Best option is if we have XMLHttpRequest with CORS support
      if (self.XMLHttpRequest && Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype, 'withCredentials')) {
        return new XMLHttpRequest();
      }
      if (self.XDomainRequest) {
        // Second option is if we have XDomainRequest which also supports CORS (God bless Microsoft)
        return new XDomainRequest();
      }
      if (!self.XMLHttpRequest) {
        throw new Error('There is no supported http request object');
      }

      // If non of the above is available and the XmlHttpRequest is available we use it without the CORS support
      return new XMLHttpRequest();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/HeartBeatService.js":
/*!***********************************************!*\
  !*** ./src/main/services/HeartBeatService.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ HeartBeatService; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/WorkerEvent */ "./src/main/events/WorkerEvent.js");
/* harmony import */ var _api_ApiEventType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/ApiEventType */ "./src/main/api/ApiEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




/**
 * This class is for posting heartBeat messages to the customer
 */
var HeartBeatService = /*#__PURE__*/function () {
  function HeartBeatService(workerCommunicator, heartBeatErrorsState, heartBeatPostMessageInterval) {
    _classCallCheck(this, HeartBeatService);
    _defineProperty(this, "_dataOrigin", 'BC');
    this._heartBeatErrorsState = heartBeatErrorsState;
    this._heartBeatPostMessageInterval = heartBeatPostMessageInterval;
    workerCommunicator.addMessageListener(_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.HeartBeatStatusEvent, this._handle.bind(this));
  }
  return _createClass(HeartBeatService, [{
    key: "start",
    value: function start() {
      this._clear();
      this._periodicPostMessageIntervalId = setInterval(this._postHeartBeatMessage.bind(this), this._heartBeatPostMessageInterval);
    }
  }, {
    key: "stop",
    value: function stop() {
      this._clear();
    }
  }, {
    key: "updateConfig",
    value: function updateConfig(configurationRepository) {
      this._heartBeatPostMessageInterval = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.heartBeatMessageInterval);
      this.start();
    }
  }, {
    key: "_clear",
    value: function _clear() {
      if (this._periodicPostMessageIntervalId) {
        clearInterval(this._periodicPostMessageIntervalId);
      }
    }
  }, {
    key: "_handle",
    value: function _handle(heartBeatStatusEvent) {
      this._heartBeatErrorsState.updateState(heartBeatStatusEvent);
    }
  }, {
    key: "_postHeartBeatMessage",
    value: function _postHeartBeatMessage() {
      if (this._heartBeatErrorsState.hasErrors()) {
        window.postMessage({
          type: _api_ApiEventType__WEBPACK_IMPORTED_MODULE_2__.ApiEventType.HeartBeatEvent,
          data: this._heartBeatErrorsState.getErrors(),
          origin: this._dataOrigin
        }, window.location.href);
        return;
      }
      window.postMessage({
        type: _api_ApiEventType__WEBPACK_IMPORTED_MODULE_2__.ApiEventType.HeartBeatEvent,
        data: 'Ok',
        origin: this._dataOrigin
      }, window.location.href);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/MutationEmitter.js":
/*!**********************************************!*\
  !*** ./src/main/services/MutationEmitter.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ MutationEmitter; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Emit mutation observer events/mutations.
 * Started by Element related data collectors
 */
var MutationEmitter = /*#__PURE__*/function () {
  function MutationEmitter(messageBus) {
    var _this = this;
    _classCallCheck(this, MutationEmitter);
    /**
     *
     * @param mutation
     * @param {BrowserContext} browserContext
     */
    _defineProperty(this, "handleMutationEvent", function (mutation, browserContext) {
      mutation && browserContext && _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.MutationSingleEvent, {
        mutation: mutation,
        browserContext: browserContext
      });
    });
    this._messageBus = messageBus;
    if (_typeof(this._messageBus) !== 'object') {
      throw new Error('Bootstrap aborted! MessageBus missing for MutationEmitter');
    }
    this._documentObservers = new WeakMap();
  }

  /**
   * @param {BrowserContext} browserContext
   */
  return _createClass(MutationEmitter, [{
    key: "startObserver",
    value: function startObserver(browserContext) {
      var _this2 = this;
      var document = browserContext.getDocument();
      if (this._documentObservers.has(document)) return;
      var nextObserver = new window.MutationObserver(function (mutations) {
        try {
          for (var i = 0; i < mutations.length; i++) {
            var mutation = mutations[i];
            if (mutation.addedNodes.length > 0) {
              _this2.handleMutationEvent(mutation, browserContext);
              break;
            }
          }
        } catch (e) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("An error has occurred: ".concat(e.message));
        }
      });
      nextObserver.observe(document, {
        childList: true,
        subtree: true
      });
      this._documentObservers.set(document, {
        instance: nextObserver
      });
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopObserver",
    value: function stopObserver(browserContext) {
      var document = browserContext.getDocument();
      var observerInstance;
      // eslint-disable-next-line
      if (this._documentObservers.has(document) && (observerInstance = this._documentObservers.get(document))) {
        observerInstance.instance && observerInstance.instance.disconnect();
        this._documentObservers["delete"](document);
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/SameCharService.js":
/*!**********************************************!*\
  !*** ./src/main/services/SameCharService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SameCharType: function() { return /* binding */ SameCharType; },
/* harmony export */   "default": function() { return /* binding */ SameCharService; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// import Log from '../technicalServices/log/Logger';
// import { MessageBusEventType } from '../events/MessageBusEventType';
/**
 * saves currently used elements and their data.
 */
var SameCharType = {
  "true": 1,
  "false": 0,
  undefined: -1
};
var SameCharService = /*#__PURE__*/function () {
  function SameCharService() {
    _classCallCheck(this, SameCharService);
    this._elementList = new WeakMap();
  }
  return _createClass(SameCharService, [{
    key: "update",
    value: function update(key, value) {
      this._elementList.set(key, value);
    }
  }, {
    key: "compare",
    value: function compare(key, newValue) {
      return SameCharType[newValue === this._elementList.get(key)];
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/SlaveListener.js":
/*!********************************************!*\
  !*** ./src/main/services/SlaveListener.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SlaveListener; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDEvent */ "./src/main/infrastructure/CDEvent.js");
/* harmony import */ var _slave_MasterSlaveMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../slave/MasterSlaveMessage */ "./src/slave/MasterSlaveMessage.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * This class is loaded in the master side. It listens to messages from slaves and sending them messages back.
 * The main messages are data and logs that the slaves send. In addition context change messages that will cause
 * the master to change context.
 * The _slaves array contains all the direct slaves (children iframes) that communicates with the master.
 * @type {SlaveListener}
 */



var SlaveListener = /*#__PURE__*/function () {
  function SlaveListener(dataQ, configurationRepository, utils, logPerfDataQ, contextMgr, sessionService) {
    _classCallCheck(this, SlaveListener);
    this._slaves = [];
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this._utils = utils;
    this._logPerfDataQ = logPerfDataQ;
    this._contextMgr = contextMgr;
    this._sessionService = sessionService;
    this.onResetSessionTrigger = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this.onMouseChallengeTrigger = new _infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this._msgRouter = {
      dataFromSlave: this._onDataFromSlave,
      registerSlave: this._onRegisterSlave,
      logPerfSlave: this._onLogPerfSlave,
      updateMasterContext: this._onUpdateMasterContext,
      resetSessionTriggerFromSlave: this._onResetSessionTriggerFromSlave,
      mouseChallengeTriggerFromSlave: this._onMouseChallengeTriggerFromSlave,
      updateSlaveConf: this.onConfigUpdate
    };
  }
  return _createClass(SlaveListener, [{
    key: "listen",
    value: function listen() {
      var _this = this;
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SlaveListener:listen');
      this._utils.addEventListener(window, 'message', function (e) {
        var msgType = e.data.msgType;
        msgType && _this._msgRouter[msgType] && _this._msgRouter[msgType].call(_this, e);
      });
    }
  }, {
    key: "sendToSlaves",
    value: function sendToSlaves(msgType, data) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SlaveListener:sendToSlaves');
      this._slaves.forEach(function (slave) {
        if (slave.port) {
          slave.port.postMessage({
            msgType: msgType,
            data: data
          });
        } else {
          slave.source.postMessage({
            msgType: msgType,
            data: data
          }, slave.origin);
        }
      });
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug("SlaveListener:onConfigUpdate, updating ".concat(this._slaves.length, " slaves"));
      this.sendToSlaves(_slave_MasterSlaveMessage__WEBPACK_IMPORTED_MODULE_1__.MasterSlaveMessage.updateSlaveConf, this._configurationRepository.getAll());
    }
  }, {
    key: "notifyStateChange",
    value: function notifyStateChange(stateChangeMessage) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info("SlaveListener:notifyStateChange, updating ".concat(this._slaves.length, " slaves that the new state is ").concat(stateChangeMessage.toState));
      this.sendToSlaves(_slave_MasterSlaveMessage__WEBPACK_IMPORTED_MODULE_1__.MasterSlaveMessage.updateSlaveState, stateChangeMessage);
    }
  }, {
    key: "_onDataFromSlave",
    value: function _onDataFromSlave(e) {
      var msg = e.data;
      if (msg.data.eventName === 'flushData') return;
      if (this._isScriptVersionMessage(msg)) {
        msg.data.eventName && this._dataQ.addToQueue(msg.data.eventName, msg.data.data, false);
        return;
      }
      msg.data.eventName && this._dataQ.addToQueue(msg.data.eventName, msg.data.data);
    }
  }, {
    key: "_isScriptVersionMessage",
    value: function _isScriptVersionMessage(msg) {
      if (msg.data.eventName === 'static_fields' && msg.msgType === 'dataFromSlave') {
        return msg.data && msg.data.data && (msg.data.data[0] === 'slave_version_client' || msg.data.data[0] === 'device_source');
      }
      return false;
    }
  }, {
    key: "_onRegisterSlave",
    value: function _onRegisterSlave(e) {
      var _this2 = this;
      if (e.data.useMessageChannelForSlaveComm) {
        var channel = new MessageChannel();
        this._slaves.push({
          source: e.source,
          origin: e.origin,
          port: channel.port1
        });

        // Send the MessagePort via transfer list (second argument)
        e.source.postMessage({
          msgType: _slave_MasterSlaveMessage__WEBPACK_IMPORTED_MODULE_1__.MasterSlaveMessage.setupPort,
          isNative: true
        }, e.origin, [channel.port2] // must transfer the port here
        );

        //listen to port
        channel.port1.onmessage = function (e) {
          var msgType = e.data.msgType;
          msgType && _this2._msgRouter[msgType] && _this2._msgRouter[msgType].call(_this2, e);
        };
      } else {
        this._slaves.push({
          source: e.source,
          origin: e.origin
        });
        e.source.postMessage({
          msgType: 'updateSlaveConf',
          isNative: true,
          data: this._configurationRepository.getAll()
        }, e.origin);
      }
    }
  }, {
    key: "_onLogPerfSlave",
    value: function _onLogPerfSlave(e) {
      var msg = e.data;
      if (msg.data.eventName === 'flushData') return;

      // when the slave is unloaded its DataQ sends a flushData message ("data":[{"eventName":"flushData"}])
      // which is not relevant to the main
      msg.data.eventName && this._logPerfDataQ.addToQueue(msg.data.eventName, msg.data.data);
    }

    /**
     * Handle notification from slave about a context update.
     * @param e
     */
  }, {
    key: "_onUpdateMasterContext",
    value: function _onUpdateMasterContext(e) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SlaveListener:_onUpdateMasterContext');
      var msg = e.data;
      this._contextMgr.setContext(msg.data);
    }

    /**
     * Handle notification from slave about a reset session detection.
     * @param e
     */
  }, {
    key: "_onResetSessionTriggerFromSlave",
    value: function _onResetSessionTriggerFromSlave(e) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SlaveListener:_onResetSessionTriggerFromSlave');
      var msg = e.data;
      this.onResetSessionTrigger.publish(msg.data);
    }

    /**
     * Handle notification from slave about a mouse challenge detection.
     * @param e
     */
  }, {
    key: "_onMouseChallengeTriggerFromSlave",
    value: function _onMouseChallengeTriggerFromSlave(e) {
      _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].debug('SlaveListener:_onMouseChallengeTriggerFromSlave');
      var msg = e.data;
      this.onMouseChallengeTrigger.publish(msg.data);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/StandardCustomInputEmitter.js":
/*!*********************************************************!*\
  !*** ./src/main/services/StandardCustomInputEmitter.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var StandardCustomInputEmitter = /*#__PURE__*/function () {
  function StandardCustomInputEmitter(messageBus, eventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardCustomInputEmitter);
    _defineProperty(this, "mousemove", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "keydown", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "mouseleave", function (e) {
      _this._eventAggregator.removeEventListener(e.target, 'mousemove', _this.mousemove);
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "mouseup", function (e) {
      _this._eventAggregator.removeEventListener(e.target, 'mousemove', _this.mousemove);
      _this._eventAggregator.removeEventListener(e.target, 'mouseleave', _this.mouseleave);
    });
    _defineProperty(this, "mousedown", function (e) {
      _this._eventAggregator.addEventListener(e.target, 'mousemove', _this.mousemove);
      _this._eventAggregator.addEventListener(e.target, 'mouseleave', _this.mouseleave);
      _this._eventAggregator.addEventListener(e.target, 'mouseup', _this.mouseup);
      _this._eventAggregator.addEventListener(e.target, 'keydown', _this.keydown);
    });
    _defineProperty(this, "handleFocus", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "handleMouseEnter", function (e) {
      _this._eventAggregator.addEventListener(e.target, 'mousedown', _this.mousedown);
    });
    _defineProperty(this, "handleOnClickEvents", function () {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.CustomInputElement, _this._mainElm);
    });
    this._messageBus = messageBus;
    this._eventAggregator = eventAggregator;
    this._utils = utils;
    this._elementsBindingWMap = new WeakMap();
    this.customInputEventListener = [{
      event: 'mouseenter',
      handler: this.handleMouseEnter
    }, {
      event: 'focus',
      handler: this.handleFocus
    }];
    this.defaultOnClickEventListener = [{
      event: 'click',
      handler: this.handleOnClickEvents
    }];
    this._mainElm = '';
    this._mainTagName = ['SPAN', 'DIV'];
    this._btnTagName = 'BUTTON';
    this._btnInnerText = ['+', '-'];
  }
  return _createClass(StandardCustomInputEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      if (elements) {
        elements.forEach(function (element) {
          if (_this2._elementsBindingWMap.has(element)) {
            // already binded
            return;
          }
          if (element !== null && element !== void 0 && element.tagName && _this2._mainTagName.includes(element.tagName)) {
            _this2._mainElm = element;
            _this2.customInputEventListener.forEach(function (defaultEvent) {
              _this2._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
            });
            _this2._elementsBindingWMap.set(element, {
              isBinded: true,
              listeners: [_this2.handleMouseEnter, _this2.handleFocus],
              isUsingJQuery: false
            });
          }
          if (element !== null && element !== void 0 && element.tagName && element.tagName === _this2._btnTagName || element !== null && element !== void 0 && element.innerText && _this2._btnInnerText.includes(element.innerText)) {
            _this2.defaultOnClickEventListener.forEach(function (defaultEvent) {
              _this2._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
            });
            _this2._elementsBindingWMap.set(element, {
              isBinded: true,
              listeners: [_this2.handleOnClickEvents],
              isUsingJQuery: false
            });
          }
        });
      }
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (element) {
        var elementBinding = _this3._elementsBindingWMap.get(element);
        if (!(elementBinding !== null && elementBinding !== void 0 && elementBinding.isBinded)) {
          return;
        }
        if (element !== null && element !== void 0 && element.tagName && _this3._mainTagName.includes(element.tagName)) {
          _this3.customInputEventListener.forEach(function (defaultEvent) {
            _this3._eventAggregator.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
          });
        }
        if (element !== null && element !== void 0 && element.tagName && element.tagName === _this3._btnTagName || element !== null && element !== void 0 && element.innerText && _this3._btnInnerText.includes(element.innerText)) {
          _this3.defaultOnClickEventListener.forEach(function (defaultEvent) {
            _this3._eventAggregator.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
          });
        }
        _this3._elementsBindingWMap["delete"](element);
      });
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (StandardCustomInputEmitter);

/***/ }),

/***/ "./src/main/services/StandardInputEventsEmitter.js":
/*!*********************************************************!*\
  !*** ./src/main/services/StandardInputEventsEmitter.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StandardInputEventsEmitter; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StandardInputEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new Input Events Emitter that supports emitting
   * input, focus and blur events
   */
  function StandardInputEventsEmitter(messageBus, EventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardInputEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleInputEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputEvent, e);
    });
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleFocusEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputFocusEvent, e);
    });
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleBlurEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardInputBlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = utils;
    this.defaultInputEventListener = [{
      event: 'input',
      handler: this.handleInputEvents
    }, {
      event: 'focus',
      handler: this.handleFocusEvents
    }, {
      event: 'blur',
      handler: this.handleBlurEvents
    }];
  }
  return _createClass(StandardInputEventsEmitter, [{
    key: "start",
    value: function start(elements, context, shouldSkipElement) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        var finalEvents = [];

        // Custom behavior of input event binding for special elements that should not report input event
        // This logic is currently related to input events only and supports the SyntheticParsely (parselyjs) assertion
        if (typeof shouldSkipElement !== 'undefined') {
          if (typeof shouldSkipElement.func === 'function' && Array.isArray(shouldSkipElement.allowedEvents) && shouldSkipElement.allowedEvents.length > 0) {
            // If provided func asserts this element should be skipped, move forward with allowed events only
            if (shouldSkipElement.func(context, elem)) {
              _this2.defaultInputEventListener.forEach(function (event) {
                if (shouldSkipElement.allowedEvents.includes(event.event)) {
                  finalEvents.push(event);
                }
              });
            } else {
              finalEvents = Array.from(_this2.defaultInputEventListener);
            }
          }
        } else {
          finalEvents = Array.from(_this2.defaultInputEventListener);
        }
        finalEvents.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleInputEvents, _this2.handleFocusEvents, _this2.handleBlurEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultInputEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }

    /**
     * Includes support for standard EventAggregator and jQuery utils legacy event listener
     * @param element
     * @param isUseJQuery
     */
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleInputEvents, this.handleFocusEvents, this.handleBlurEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/StandardOnChangeEventsEmitter.js":
/*!************************************************************!*\
  !*** ./src/main/services/StandardOnChangeEventsEmitter.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StandardOnChangeEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnChange Events Emitter that supports emitting
   * change events
   */
  function StandardOnChangeEventsEmitter(messageBus, EventAggregator, CDUtils) {
    var _this = this;
    _classCallCheck(this, StandardOnChangeEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleOnChangeEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnSelectEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultOnChangeEventListener = [{
      event: 'change',
      handler: this.handleOnChangeEvents
    }];
  }
  return _createClass(StandardOnChangeEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnChangeEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnChangeEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (StandardOnChangeEventsEmitter);

/***/ }),

/***/ "./src/main/services/StandardOnClickEventsEmitter.js":
/*!***********************************************************!*\
  !*** ./src/main/services/StandardOnClickEventsEmitter.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StandardOnClickEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnClick Events Emitter that supports emitting
   * click events
   */
  function StandardOnClickEventsEmitter(messageBus, EventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardOnClickEventsEmitter);
    _defineProperty(this, "handleOnClickEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnClickEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = utils;
    this.defaultOnClickEventListener = [{
      event: 'click',
      handler: this.handleOnClickEvents
    }];
  }
  return _createClass(StandardOnClickEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnClickEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnClickEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (StandardOnClickEventsEmitter);

/***/ }),

/***/ "./src/main/services/StandardOnFormEventsEmitter.js":
/*!**********************************************************!*\
  !*** ./src/main/services/StandardOnFormEventsEmitter.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var StandardOnFormEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnForm Events Emitter that supports emitting
   * submit events
   */
  function StandardOnFormEventsEmitter(messageBus, EventAggregator, CDUtils) {
    var _this = this;
    _classCallCheck(this, StandardOnFormEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleOnFormSubmitEvents", function (e) {
      _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.StandardOnFormSubmitEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultOnFormEventListener = [{
      event: 'submit',
      handler: this.handleOnFormSubmitEvents
    }];
  }
  return _createClass(StandardOnFormEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnFormSubmitEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnFormSubmitEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (StandardOnFormEventsEmitter);

/***/ }),

/***/ "./src/main/services/SyntheticAutotabInputEventsHandler.js":
/*!*****************************************************************!*\
  !*** ./src/main/services/SyntheticAutotabInputEventsHandler.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SyntheticAutotabInputEventsHandler; }
/* harmony export */ });
/* harmony import */ var _SyntheticInputEventsHandlerBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SyntheticInputEventsHandlerBase */ "./src/main/services/SyntheticInputEventsHandlerBase.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * Produce synthetic input events from keypress events
 */
var SyntheticAutotabInputEventsHandler = /*#__PURE__*/function (_SyntheticInputEvents) {
  function SyntheticAutotabInputEventsHandler() {
    _classCallCheck(this, SyntheticAutotabInputEventsHandler);
    return _callSuper(this, SyntheticAutotabInputEventsHandler, arguments);
  }
  _inherits(SyntheticAutotabInputEventsHandler, _SyntheticInputEvents);
  return _createClass(SyntheticAutotabInputEventsHandler, [{
    key: "start",
    value: function start(elements, context) {
      var _this = this;
      elements.forEach(function (elem) {
        if (!_this.isJQueryDataSupported(context) || !_this.hasjQueryAutoTab(elem, context)) return;
        _this.registerElement(elem, context);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      this.unregisterElements(elements);
    }

    /**
     * The purpose of this method is to try and fetch jQuery registered
     * events and report if autotab is detected.
     * @returns {boolean}
     */
  }, {
    key: "hasjQueryAutoTab",
    value: function hasjQueryAutoTab(element, frame) {
      var jQueryEvents = frame.jQuery._data(element, 'events');
      if (typeof jQueryEvents === 'undefined') return false;
      var targetEvents = Object.keys(frame.jQuery._data(element, 'events'));
      for (var i = 0; i < targetEvents.length; i++) {
        if (targetEvents[i].indexOf('autotab') !== -1) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {
      if (!this.isJQueryDataSupported(frame) || !this.hasjQueryAutoTab(event.target, frame)) return;
      var jQueryMask = 'autotab';
      var inputType = 'insertText';
      var data = event.key;
      if (event.keyCode === 8) {
        // Prevent double input events report in case of autotab that reports both input event
        // and key event in case of pressing the backspace (keyCode 8)
        return;
      }
      this.publishEvent(event, jQueryMask, inputType, data);
    }
  }]);
}(_SyntheticInputEventsHandlerBase__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/services/SyntheticInputEventsHandlerBase.js":
/*!**************************************************************!*\
  !*** ./src/main/services/SyntheticInputEventsHandlerBase.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SyntheticInputEventsHandlerBase; }
/* harmony export */ });
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Produce synthetic input events from keypress events
 */
var SyntheticInputEventsHandlerBase = /*#__PURE__*/function () {
  function SyntheticInputEventsHandlerBase(messageBus, EventAggregator, CDUtils) {
    _classCallCheck(this, SyntheticInputEventsHandlerBase);
    _defineProperty(this, "isJQueryDataSupported", function (frame) {
      return !(!frame.jQuery || !frame.jQuery._data);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultEventListener = [{
      event: 'keypress',
      handler: this.handleKeypressEvents.bind(this)
    }];
  }
  return _createClass(SyntheticInputEventsHandlerBase, [{
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {}
  }, {
    key: "registerElement",
    value: function registerElement(element, frame) {
      var _this = this;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      var _listeners = {};
      this.defaultEventListener.forEach(function (defaultEvent) {
        var _listener = function _listener(e) {
          defaultEvent.handler(e, frame);
        };
        _listeners[defaultEvent.event] = _listener;
        _this._eventAggregator.addEventListener(element, defaultEvent.event, _listener);
      });
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: _listeners
      });
    }
  }, {
    key: "unregisterElements",
    value: function unregisterElements(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this2._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this2.defaultEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.removeEventListener(elem, defaultEvent.event, elementBinding.listeners[defaultEvent.event]);
        });
        _this2._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "publishEvent",
    value: function publishEvent(event, jqueryMask, inputType, data) {
      var inputEvent = {
        bubbles: true,
        cancelBubble: false,
        cancelable: false,
        composed: true,
        currentTarget: null,
        data: data,
        dataTransfer: null,
        defaultPrevented: false,
        detail: 0,
        eventPhase: 0,
        inputType: inputType,
        isComposing: false,
        isTrusted: true,
        jqueryMask: jqueryMask,
        returnValue: true,
        sourceCapabilities: null,
        srcElement: Object.assign(event.target || event.srcElement, {}),
        target: Object.assign(event.target, {}),
        timeStamp: event.timeStamp,
        type: 'input',
        view: null,
        which: 0
      };
      this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.SyntheticInputMaskEvent, inputEvent);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/services/SyntheticMaskInputEventsHandler.js":
/*!**************************************************************!*\
  !*** ./src/main/services/SyntheticMaskInputEventsHandler.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SyntheticMaskInputEventsHandler; }
/* harmony export */ });
/* harmony import */ var _SyntheticInputEventsHandlerBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SyntheticInputEventsHandlerBase */ "./src/main/services/SyntheticInputEventsHandlerBase.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * Produce synthetic input events from keypress events
 */
var SyntheticMaskInputEventsHandler = /*#__PURE__*/function (_SyntheticInputEvents) {
  function SyntheticMaskInputEventsHandler() {
    _classCallCheck(this, SyntheticMaskInputEventsHandler);
    return _callSuper(this, SyntheticMaskInputEventsHandler, arguments);
  }
  _inherits(SyntheticMaskInputEventsHandler, _SyntheticInputEvents);
  return _createClass(SyntheticMaskInputEventsHandler, [{
    key: "start",
    value: function start(elements, frame) {
      var _this = this;
      frame = frame || window.self;
      elements.forEach(function (elem) {
        if (!_this.isJQueryDataSupported(frame) || !_this.hasMaskEventSupported(elem, frame)) return;
        _this.registerElement(elem, frame);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      this.unregisterElements(elements);
    }

    /**
     * Detect whether the requested element has the "events" property
     * defined by the jQuery _data method
     * @param element
     * @param frame
     * @returns {boolean}
     */
  }, {
    key: "hasMaskEventSupported",
    value: function hasMaskEventSupported(element, frame) {
      var jQueryEvents = frame.jQuery._data(element, 'events');
      if (typeof jQueryEvents === 'undefined') return false;
      var targetEvents = Object.keys(jQueryEvents);
      for (var i = 0; i < targetEvents.length; i++) {
        if (targetEvents[i] === 'unmask') {
          return true;
        }
      }
      return false;
    }

    /**
     *
     * @param event
     * @param frame
     */
  }, {
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {
      if (!this.isJQueryDataSupported(frame) || !this.hasMaskEventSupported(event.target, frame)) return;
      var jQueryMask = 'maskedInput';
      var inputType = 'insertText';
      var data = event.key;
      this.publishEvent(event, jQueryMask, inputType, data);
    }
  }]);
}(_SyntheticInputEventsHandlerBase__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/services/WindowMessageEventEmitter.js":
/*!********************************************************!*\
  !*** ./src/main/services/WindowMessageEventEmitter.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ WindowMessageEventEmitter; }
/* harmony export */ });
/* harmony import */ var _events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../events/MessageBusEventType */ "./src/main/events/MessageBusEventType.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Registers and emits window "message" events which are registered
 * on windows/frames
 */
var WindowMessageEventEmitter = /*#__PURE__*/function () {
  // User arguments() to dynamically extract the params names and have the container inject the dependencies based on
  // their keys
  function WindowMessageEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, WindowMessageEventEmitter);
    _defineProperty(this, "handleWindowMessage", function (message) {
      message && _this._messageBus.publish(_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.WindowMessageEvent, {
        message: message
      });
    });
    this._messageBus = messageBus;
    this._EventAggregator = EventAggregator;
    this._windowListeners = new WeakMap();
    this.defaultPostMessageEventListener = [{
      event: 'message',
      handler: this.handleWindowMessage
    }];
  }

  /**
   * @param {BrowserContext} browserContext
   */
  return _createClass(WindowMessageEventEmitter, [{
    key: "startObserver",
    value: function startObserver(browserContext) {
      var _this2 = this;
      if (this._windowListeners.has(browserContext.Context)) return;
      this.defaultPostMessageEventListener.forEach(function (defaultEvent) {
        _this2._EventAggregator.addEventListener(browserContext.Context, defaultEvent.event, defaultEvent.handler);
      });
      this._windowListeners.set(browserContext.Context, {
        isBinded: true,
        listeners: [this.handleWindowMessage]
      });
    }

    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopObserver",
    value: function stopObserver(browserContext) {
      var _this3 = this;
      var windowBinding = this._windowListeners.get(browserContext.Context);
      if (!windowBinding || !windowBinding.isBinded) {
        return;
      }
      this.defaultPostMessageEventListener.forEach(function (defaultEvent) {
        _this3._EventAggregator.removeEventListener(browserContext.Context, defaultEvent.event, defaultEvent.handler);
      });
      this._windowListeners["delete"](browserContext.Context);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/system/EventAggregator.js":
/*!********************************************!*\
  !*** ./src/main/system/EventAggregator.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ EventAggregator; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var isPassiveSupported = false;
(function () {
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassiveSupported = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
})();

/**
 * Static class for performing the actual binding between the element[s] and the handler
 */
var EventAggregator = /*#__PURE__*/function () {
  function EventAggregator() {
    _classCallCheck(this, EventAggregator);
  }
  return _createClass(EventAggregator, null, [{
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/CDUtils.js":
/*!***********************************************!*\
  !*** ./src/main/technicalServices/CDUtils.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CDUtils; }
/* harmony export */ });
/* harmony import */ var _infrastructure_HttpRequestFactory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/HttpRequestFactory */ "./src/main/infrastructure/HttpRequestFactory.js");
/* harmony import */ var _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../worker/communication/ConfigurationDefaultValues */ "./src/worker/communication/ConfigurationDefaultValues.js");
var _CDUtils;
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


function isPassiveSupported() {
  var isPassive = false;
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassive = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
  return isPassive;
}

/**
 * This function brings the original implementation of a function. Used for cases
 * that the website is overriding one of the window functions such as Date.now (PurePoint).
 * The function is only good for functions and objects on the window and not on the document since
 * it is not waiting for the iframe document to be in readyState == 4. If we will wait we will have to
 * make this function async and it breaks the flow of the code.
 */
var getNativeWindowFn = function () {
  var iFrame = null;
  return function (objectName, objectImplementation, callback) {
    var getNativeCode = function getNativeCode() {
      return objectImplementation;
    };
    var testNativeCode = function testNativeCode() {
      return objectImplementation.toString().indexOf('[native code]') > -1;
    };
    if (!testNativeCode()) {
      var timerInterval = 0;

      // a timer function to check if the contentWindow's readyState is complete
      var _timerFunction = function timerFunction() {
        if (iFrame.contentWindow) {
          var contentWindow = iFrame.contentWindow;
          var objPropsArray = objectName.split('.');
          var returnedObject = contentWindow;
          for (var objPropIndex = 0; objPropIndex < objPropsArray.length; objPropIndex++) {
            returnedObject = returnedObject[objPropsArray[objPropIndex]];
          }
          // document.documentElement.removeChild(iFrame);
          callback(returnedObject);
        } else if (timerInterval < 45) {
          // This part should never happen, since the iFrame.contentWindow should always exist, but...
          setTimeout(_timerFunction, timerInterval);
          timerInterval++;
        } else {
          // The iFrame is not loaded
          callback(getNativeCode()); // return the current obj
        }
      };
      if (!iFrame) {
        iFrame = document.createElement('IFRAME');
        //use sandbox to allow the minimum level of capability necessary for the content of the iframe
        //to do it's job
        iFrame.setAttribute('sandbox', 'allow-same-origin');
        iFrame.style.display = 'none';
        document.documentElement.appendChild(iFrame);
      }
      _timerFunction();
    } else {
      callback(getNativeCode());
    }
  };
}();
var CDUtils = /*#__PURE__*/function () {
  function CDUtils() {
    _classCallCheck(this, CDUtils);
  }
  return _createClass(CDUtils, null, [{
    key: "isUndefinedNull",
    value: function isUndefinedNull(x) {
      return x === null || x === undefined || typeof x === 'undefined';
    }
  }, {
    key: "isBoolean",
    value: function isBoolean(x) {
      return typeof x === 'boolean';
    }
  }, {
    key: "isNumber",
    value: function isNumber(x) {
      return typeof x === 'number';
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (this.isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }
  }, {
    key: "hasProtocol",
    value: function hasProtocol(serverURL) {
      return serverURL.toLowerCase().startsWith('http://') || serverURL.toLowerCase().startsWith('https://');
    }
  }, {
    key: "clearTextFromNumbers",
    value: function clearTextFromNumbers(text) {
      if (text) {
        return text.replace(/(\d)/g, '*');
      }
      return '';
    }
  }, {
    key: "getDropDownListValues",
    value: function getDropDownListValues(selectElem, maskingService) {
      var options = [];
      for (var i = 0; i < selectElem.length; i++) {
        var optionTxt = selectElem.options[i].text || selectElem.options[i].value || '';
        options.push(maskingService.maskText(optionTxt, selectElem.id));
      }
      return options;
    }
  }, {
    key: "getDocUrl",
    value: function getDocUrl() {
      var winLocation = window.location;
      // we do not take the 'search' part since it may contain private data
      return winLocation.protocol + '//' + winLocation.hostname + (winLocation.port ? ':' + winLocation.port : '')
      // in case the pathname contains a series of numbers we fear that it may contain private data and we replace it
      + CDUtils.clearTextFromNumbers(winLocation.pathname);
    }
  }, {
    key: "getHash",
    value: function getHash(e) {
      // https://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/
      var r = 0;
      for (var i = 0, len = e.length; i < len; i++) {
        r = (r << 5) - r + e.charCodeAt(i);
        r &= r;
      }
      return r;
    }
  }, {
    key: "getTruncatedHash",
    value: function getTruncatedHash(e, index) {
      if (!e) {
        return '';
      }
      var hash = this.murmurhash3(e);
      return hash.toString().substring(index);
    }

    /**
     * Provide a digest method for the given algorithm.
     * @param algorithm
     * @returns {null|digestMethod} - the digest method for the given algorithm or null if not supported
     */
  }, {
    key: "getDigestMethod",
    value: function getDigestMethod(algorithm) {
      if (algorithm === 'SHA-256') {
        // window.crypto.subtle.digest is available in secure mode only
        if (window.crypto.subtle && window.crypto.subtle.digest) {
          var digestMethod = window.crypto.subtle.digest.bind(crypto.subtle);
          return digestMethod;
        }
      }
      return null;
    }

    /**
     * This function is used to hash the given key using SHA-256 algorithm.
     * @param key
     * @returns {Promise|Promise<string>|*}
     */
  }, {
    key: "digest_sha256",
    value: function digest_sha256(key) {
      var digestMethod = CDUtils.getDigestMethod('SHA-256');
      var msgUint8 = new TextEncoder().encode(key);
      if (digestMethod) {
        return digestMethod("SHA-256", msgUint8).then(function (hashBuffer) {
          var hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array
          var hashHex = hashArray.map(function (b) {
            return b.toString(16).padStart(2, "0");
          }).join("");
          return hashHex;
        })["catch"](function () {
          return "";
        });
      } else {
        // The window.crypto.subtly.digest method IS NOT AVAILABLE in non-secure modes
        return new Promise(function (resolve) {
          resolve("");
        });
      }
    }
  }, {
    key: "murmurhash3",
    value: function murmurhash3(key, seed) {
      var h1;
      var h1b;
      var k1;
      var i;
      var remainder = key.length & 3; // key.length % 4
      var bytes = key.length - remainder;
      h1 = seed;
      var c1 = 0xcc9e2d51;
      var c2 = 0x1b873593;
      i = 0;
      while (i < bytes) {
        k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(++i) & 0xff) << 8 | (key.charCodeAt(++i) & 0xff) << 16 | (key.charCodeAt(++i) & 0xff) << 24;
        ++i;
        k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;
        h1 ^= k1;
        h1 = h1 << 13 | h1 >>> 19;
        h1b = (h1 & 0xffff) * 5 + (((h1 >>> 16) * 5 & 0xffff) << 16) & 0xffffffff;
        h1 = (h1b & 0xffff) + 0x6b64 + (((h1b >>> 16) + 0xe654 & 0xffff) << 16);
      }
      k1 = 0;
      switch (remainder) {
        case 3:
          k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
          break;
        case 2:
          k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
          break;
        case 1:
          k1 ^= key.charCodeAt(i) & 0xff;
          k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
          k1 = k1 << 15 | k1 >>> 17;
          k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;
          h1 ^= k1;
          break;
        default:
        // Well this shouldn't happen!!!
      }
      h1 ^= key.length;
      h1 ^= h1 >>> 16;
      h1 = (h1 & 0xffff) * 0x85ebca6b + (((h1 >>> 16) * 0x85ebca6b & 0xffff) << 16) & 0xffffffff;
      h1 ^= h1 >>> 13;
      h1 = (h1 & 0xffff) * 0xc2b2ae35 + (((h1 >>> 16) * 0xc2b2ae35 & 0xffff) << 16) & 0xffffffff;
      h1 ^= h1 >>> 16;
      return h1 >>> 0;
    }
  }, {
    key: "generateUUID",
    value: function generateUUID() {
      var d = CDUtils.dateNow();
      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);
      });
      return uuid;
    }

    /**
     * Converts a json with event data to an array according to the order given in the arrMap.
     * Returns a new array
     * @param arrMap - the array with the prop names with the order
     * @param jsonData - the data to convert to array
     */
  }, {
    key: "convertToArrayByMap",
    value: function convertToArrayByMap(arrMap, jsonData) {
      var converted = [null];
      for (var i = 0, len = arrMap.length; i < len; i++) {
        converted[i + 1] = jsonData[arrMap[i]];
      }
      return converted;
    }
  }, {
    key: "getPostUrl",
    value: function getPostUrl(url, method, data, onSuccess, onError, withCredentials, timeout) {
      var httpRequest = _infrastructure_HttpRequestFactory__WEBPACK_IMPORTED_MODULE_0__["default"].create();
      if (httpRequest instanceof self.XMLHttpRequest) {
        httpRequest.open(method, url, true);
        if (timeout !== undefined) {
          httpRequest.timeout = timeout;
        }
        httpRequest.withCredentials = withCredentials !== false;
        if (method === 'POST') {
          // get messages should not have content type, this causes options message
          httpRequest.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        }
        httpRequest.onreadystatechange = function () {
          if (httpRequest.readyState === 4) {
            // 204 is no response, only relevant for non wups
            if (httpRequest.status === 204) {
              return;
            }
            if (httpRequest.status === 200) {
              onSuccess && onSuccess(httpRequest.responseText);
            } else {
              onError && onError(httpRequest.responseText);
            }
          }
        };
        httpRequest.ontimeout = function () {
          onError && onError('timeout', data);
        };
        httpRequest.send(data);
      } else {
        httpRequest.onload = function () {
          onSuccess && onSuccess(httpRequest.responseText);
        };
        httpRequest.onerror = function () {
          onError && onError();
        };
        httpRequest.onprogress = function () {};
        httpRequest.ontimeout = function () {};
        httpRequest.open(method, url, true);
        // This is a workaround in IE<10 bug that aborts Cross-Domain XHR sometimes. See Commit a2ccf977b75cabce7582b4cbb45a06caa5d08f86
        setTimeout(function () {
          httpRequest.send(data);
        }, 0);
      }
    }
  }, {
    key: "minutesToMilliseconds",
    value: function minutesToMilliseconds(minutes) {
      return minutes * 60 * 1000;
    }
  }, {
    key: "cutDecimalPointDigits",
    value: function cutDecimalPointDigits(number, lenOfDigits) {
      var prod = Math.pow(10, lenOfDigits);
      return Math.round(number * prod) / prod;
    }
  }]);
}();
_CDUtils = CDUtils;
_defineProperty(CDUtils, "scriptVersion", "dev-version.0.7e8daa94e");
_defineProperty(CDUtils, "isPassiveSupported", isPassiveSupported());
_defineProperty(CDUtils, "dateNow", Date.now);
_defineProperty(CDUtils, "setZeroTimeout", function () {
  // this is inside the returned function closure
  var timeouts = [];
  var windowId = 'Window_' + _CDUtils.generateUUID();

  // this is inside the returned function closure
  function receiveMessage(e) {
    if (e.data === windowId) {
      e.stopPropagation && e.stopPropagation();
      e.returnValue && (e.returnValue = false); // IE8
      e.cancelBubble && (e.cancelBubble = true); // IE8
      timeouts.shift()(); // executes the function stored in first element of timeouts array.
    }
  }
  _CDUtils.addEventListener(window, 'message', receiveMessage, true);

  // this is the function that will be called when setZeroTimeout is called
  return function (func) {
    timeouts.push(func);
    // We are using postMessage and not setTimeout with 0 since in FF there is a minimum time of 4ms
    window.postMessage(windowId, self.location.href);
  };
}());
_defineProperty(CDUtils, "asyncCall", function (thisParam) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  var me = this;
  _CDUtils.setZeroTimeout(function () {
    me.apply(thisParam || window, args);
  });
});
_defineProperty(CDUtils, "asyncTimeoutCall", function (thisParam) {
  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    args[_key2 - 1] = arguments[_key2];
  }
  var me = this;
  setTimeout(function () {
    me.apply(thisParam || window, args);
  }, 0);
});
_defineProperty(CDUtils, "StorageUtils", {
  // TODO: temp until StorageUtils will be refactored
  counter: 0,
  // safari outputs console error for security error on trying to reach storage when disabled
  getAndUpdateEventSequenceNumber: function getAndUpdateEventSequenceNumber() {
    return this.counter++;
  },
  deserialize: function deserialize(value) {
    if (typeof value !== 'string') {
      return null;
    }
    try {
      return JSON.parse(value);
    } catch (e) {
      return value || null;
    }
  },
  getFromLocalStorage: function getFromLocalStorage(key) {
    var useVal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;
    try {
      var data = this.deserialize(window.localStorage.getItem(key));
      if (!data) {
        return null;
      }
      // If time has expired we abort at this point with a null result
      var isExpired = data.exp && _CDUtils.dateNow() - data.time > data.exp;
      if (isExpired) {
        this.removeFromLocalStorage(key);
        return null;
      }
      if (useVal === undefined || useVal) {
        return data.val;
      }
      return data;
    } catch (e) {
      return null;
    }
  },
  saveToLocalStorage: function saveToLocalStorage(key, value, expiration) {
    var dataObj = {
      val: value
    };
    if (expiration) {
      dataObj.exp = expiration;
      dataObj.time = _CDUtils.dateNow();
    }
    try {
      // fails on safari private browsing
      window.localStorage.setItem(key, JSON.stringify(dataObj));
    } catch (e) {
      return null;
    }
    return dataObj;
  },
  removeFromLocalStorage: function removeFromLocalStorage(key) {
    try {
      window.localStorage.removeItem(key);
    } catch (e) {
      return null;
    }
  },
  setExpirationInLocalStorage: function setExpirationInLocalStorage(key, expirationTime) {
    var val = this.getFromLocalStorage(key);
    if (val === '' || val === null) {
      return _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.VALUE_DID_NOT_EXIST;
    }
    return this.saveToLocalStorage(key, val, expirationTime) ? _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.SUCCESS_IN_CHANGED_EXPIRATION : _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION;
  },
  getFromSessionStorage: function getFromSessionStorage(key) {
    try {
      var data = this.deserialize(window.sessionStorage.getItem(key));
      if (!data) {
        return null;
      }
      return data;
    } catch (e) {
      return null;
    }
  },
  saveToSessionStorage: function saveToSessionStorage(key, value) {
    try {
      if (!value) {
        return window.sessionStorage.removeItem(key);
      }
      // fails on safari private browsing
      window.sessionStorage.setItem(key, JSON.stringify(value));
      return value;
    } catch (e) {
      return null;
    }
  },
  removeFromSessionStorage: function removeFromSessionStorage(key) {
    try {
      window.sessionStorage.removeItem(key);
    } catch (e) {
      return null;
    }
  },
  getCookie: function getCookie(key) {
    var result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie);
    return result ? decodeURIComponent(result[1]) : '';
  },
  setCookie: function setCookie(key, value, miliSec, isSecureSameSite, restrictedCookieDomains) {
    // we are trying to set the cookie on the domain that will include also sub-domains.
    // But if the upper domain is a top level domain (e.g co.il) we will fail so we set on the current
    // host. See https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/

    // Prepare the expires attribute of the cookie string
    var expiresAttribute = '';
    if (miliSec) {
      var d = new Date();
      d.setTime(d.getTime() + miliSec);
      expiresAttribute = '; expires=' + d.toUTCString();
    }
    var i = 0;
    var domainName = location.hostname;
    var domainParts = domainName.split('.');
    var domainAttribute = '';
    var isCookieSetSuccessfully = false;

    // Go over the domain sub labels until we either reach the end of the parts list or are able to get the cookie which means it was set successfully
    while (i <= domainParts.length - 1 && !isCookieSetSuccessfully) {
      // Get domain parts starting from end
      domainName = domainParts.slice(-1 - ++i).join('.');

      /**
       * Skip restricted cookie domains (e.g., '.bank.in', '.nab.com.au')
       * to prevent the SDK from writing cookies on shared or parent domains that could
       * expose cookies across brands or tenants.
       *
       * The restriction applies to the domain itself and any of its parent domains,
       * but still allows writing to more specific child subdomains.
       *
       * Example:
       *   restrictedCookieDomains = ['nab.com.au']
       *
       *   Skipped:
       *     - nab.com.au
       *     - com.au
       *
       *   Allowed:
       *     - ib.nab.com.au
       *     - nabconnect.nab.com.au
       *
       * This ensures cookies remain scoped safely under the active tenant subdomain,
       * while avoiding shared storage across unrelated customer environments.
       */
      if (restrictedCookieDomains !== null && restrictedCookieDomains !== void 0 && restrictedCookieDomains.some(function (restricted) {
        return domainName === restricted || restricted.endsWith(".".concat(domainName));
      })) {
        continue;
      }

      // If its localhost we don't define a domain attribute because it doesn't work and is not needed
      if (domainName === 'localhost') {
        domainAttribute = '';
      } else if (domainName !== '') {
        domainAttribute = '; domain=.' + domainName;
      }
      isCookieSetSuccessfully = this.setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite);
    }

    // In case we failed setting the cookie until now we remove the domain attribute
    // so that the default host of the current document be used
    if (!isCookieSetSuccessfully) {
      domainAttribute = '';
      isCookieSetSuccessfully = this.setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite);
    }
    return isCookieSetSuccessfully;
  },
  setCookieWithAttributes: function setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite) {
    var sameSite = 'SameSite=None;';
    var secure = 'Secure';
    var cookieString = encodeURIComponent(key) + '=' + encodeURIComponent(value) + expiresAttribute + domainAttribute + '; path=/;';
    document.cookie = isSecureSameSite ? cookieString + " ".concat(sameSite, " ").concat(secure) : cookieString;
    return this.getCookie(key) === value;
  },
  setExpirationInCookie: function setExpirationInCookie(key, expirationTime, isSecureSameSite, restrictedCookieDomains) {
    var val = this.getCookie(key);
    if (val === '' || val === null) {
      return _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.VALUE_DID_NOT_EXIST;
    }
    return this.setCookie(key, val, expirationTime, isSecureSameSite, restrictedCookieDomains) ? _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.SUCCESS_IN_CHANGED_EXPIRATION : _worker_communication_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION;
  },
  removeCookie: function removeCookie(key) {
    try {
      document.cookie = key + '=; Max-Age=0';
    } catch (e) {
      return null;
    }
  },
  validateBcId: function validateBcId(bcId) {
    // first part - optional timestamp and then the structure for GUID
    if (/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(bcId)) {
      return bcId;
    }
    return null;
  }
});
_defineProperty(CDUtils, "getNativeWindowFn", getNativeWindowFn);
_defineProperty(CDUtils, "JQueryUtils", {
  /**
   * Check if JQuery scripts are loaded
   * @returns {boolean}
   */
  isJQueryAvailable: function isJQueryAvailable() {
    return window.jQuery !== undefined;
  },
  /**
   * Add an event listener using jQuery
   * @param element
   * @param type
   * @param handler
   */
  addEventListener: function addEventListener(element, type, handler) {
    jQuery(element).on(type, handler);
  },
  /**
   * Remove an event listener using jQuery
   * @param element
   * @param type
   * @param handler
   */
  removeEventListener: function removeEventListener(element, type, handler) {
    jQuery(element).off(type, handler);
  }
});

(function dateNowFixer() {
  if (!Date.now) {
    CDUtils.dateNow = function now() {
      return new Date().getTime();
    };
  } else {
    getNativeWindowFn('Date.now', Date.now, function (dateNow) {
      CDUtils.dateNow = dateNow;
    });
  }
})();

/***/ }),

/***/ "./src/main/technicalServices/DOMUtils.js":
/*!************************************************!*\
  !*** ./src/main/technicalServices/DOMUtils.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DOMUtils; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function isPassiveSupported() {
  var isPassive = false;
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassive = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
  return isPassive;
}
var DOMUtils = /*#__PURE__*/function () {
  function DOMUtils() {
    _classCallCheck(this, DOMUtils);
  }
  return _createClass(DOMUtils, null, [{
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (this.isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }

    // getting the HTML so that it will also work on FF
  }, {
    key: "outerHTML",
    value: function outerHTML(node) {
      return node.outerHTML || new XMLSerializer().serializeToString(node);
    }
  }, {
    key: "onDocumentBody",
    value: function onDocumentBody(frame, callback) {
      if (frame.document.body) {
        callback();
      } else {
        window.addEventListener ? window.addEventListener('DOMContentLoaded', callback, true) : window.attachEvent('onload', callback); // Old IE does not support DOMContentLoaded
      }
    }
  }, {
    key: "onPageLoad",
    value: function onPageLoad(frame, callback) {
      DOMUtils.addEventListener(frame, 'load', callback, true);
      if (frame.contentWindow && frame.contentWindow.document.readyState === 'complete' || frame.document && frame.document.readyState === 'complete') {
        // since we still want to listen every time a frame is loaded
        callback();
      }
    }
  }, {
    key: "awaitWindowDocumentReady",
    value: function awaitWindowDocumentReady(contentWindow) {
      var _this = this;
      return new Promise(function (resolve, reject) {
        try {
          _this.onWindowDocumentReady(contentWindow, function () {
            resolve();
          });
        } catch (error) {
          reject(error);
        }
      });
    }
  }, {
    key: "onWindowDocumentReady",
    value: function onWindowDocumentReady(contentWindow, callback) {
      var eventType = window.addEventListener ? 'DOMContentLoaded' : 'load';

      // We consider both states good since they both mean the dom was already loaded and we can work on the document
      if (contentWindow.document.readyState === 'complete' || contentWindow.document.readyState === 'interactive') {
        callback();
      } else {
        var onLoaded = function onLoadedWindowEvent() {
          DOMUtils.removeEventListener(contentWindow, eventType, onLoaded, true);
          callback();
        };
        DOMUtils.addEventListener(contentWindow, eventType, onLoaded, true);
      }
    }
  }, {
    key: "isWindowDocumentReady",
    value: function isWindowDocumentReady(contentWindow) {
      return contentWindow && contentWindow.document.readyState === 'complete';
    }
  }, {
    key: "canAccessIFrame",
    value: function canAccessIFrame(iframe) {
      // If there's no contentWindow, it's not ready
      if (!iframe.contentWindow) return false;

      // Compare origins *before* touching .document
      var parentOrigin = window.location.origin;
      var childOrigin;
      try {
        // Some browsers expose it safely via location.origin
        childOrigin = iframe.contentWindow.location.origin;
      } catch (_unused) {
        // Cross-origin => cannot read
        return false;
      }

      // If same origin or null origin (for local files), safe to touch
      if (childOrigin === parentOrigin || childOrigin === "null") {
        try {
          return !!(iframe.contentDocument && iframe.contentDocument.body);
        } catch (_unused2) {
          return false;
        }
      }

      // Different origin
      return false;
    }

    // Some browsers (for example IE11) have prefixed implementation of matches function but a pollyfill is not good enough
    // since in some cases the matches function is still missing (for example, removed nodes received from mutation observer)
    // so we use this function instead...
  }, {
    key: "matches",
    value: function matches(element, selector) {
      var matchesFunc = element.matches || element.matchesSelector || element.mozMatchesSelector || element.msMatchesSelector || element.oMatchesSelector || element.webkitMatchesSelector || function (s) {
        // Get the document from the element
        var currentDocument = this.document || this.ownerDocument;

        // If we don't have a document we can't match...
        if (!currentDocument) {
          return false;
        }
        var matches = currentDocument.querySelectorAll(s);
        var i = matches.length;
        while (--i >= 0) {
          // Get the current item and check if it equals the element
          // If item property is not available we use the index access (some old browsers have issues sometimes)
          var currentItem = matches.item ? matches.item(i) : matches[i];
          if (currentItem === this) {
            break;
          }
        }
        return i > -1;
      };
      return matchesFunc.call(element, selector);
    }

    //Check if the WebWorker supports fetch API: return true || false
  }, {
    key: "isWebWorkerFetchSupported",
    value: function isWebWorkerFetchSupported() {
      var request = "Request" in self;
      var fetchInSelf = "fetch" in self;
      //IE does not support the "Request" object at all, so the if statement is for IE browsers
      if (!request) return false;
      var keepAliveInRequestPrototype = "keepalive" in Request.prototype;
      return fetchInSelf && keepAliveInRequestPrototype;
    }
  }, {
    key: "isSubtleCryptoSupported",
    value: function isSubtleCryptoSupported() {
      return _typeof(self.crypto) === 'object' && _typeof(self.crypto.subtle) === 'object' && typeof self.crypto.subtle.digest === 'function';
    }
  }]);
}();
_defineProperty(DOMUtils, "isPassiveSupported", isPassiveSupported());


/***/ }),

/***/ "./src/main/technicalServices/DataQ.js":
/*!*********************************************!*\
  !*** ./src/main/technicalServices/DataQ.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DataQ; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Used for sending messages from main code to worker code
 * @param serverWorkerCommunicator
 * @param contextManager
 * @param intervalConfigKey
 * @param msgToWorker
 * @param passToWorkerInterval
 * @constructor
 */
var DataQ = /*#__PURE__*/function () {
  function DataQ(domUtils, serverWorkerCommunicator, contextManager, intervalConfigKey, msgToWorker, passToWorkerInterval) {
    var _this = this;
    _classCallCheck(this, DataQ);
    _defineProperty(this, "_dataOrigin", 'BC');
    this._serverWorkerCommunicator = serverWorkerCommunicator;
    this._contextManager = contextManager;
    this._passToWorkerInterval = passToWorkerInterval || 0; // 0 means no interval, pass directly
    this._intervalConfigKey = intervalConfigKey;
    this._msgToWorker = msgToWorker;
    this._Q = [];
    if (this._passToWorkerInterval) {
      this._intervalId = setInterval(this._sendQToServerWorker.bind(this), this._passToWorkerInterval);
    }

    // Make sure no data is left unsent when refreshing/moving window the window,
    // the worker is suppose to still be running
    domUtils.addEventListener(window, 'beforeunload', function () {
      _this._onUnload();
    }, true);
  }
  return _createClass(DataQ, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      addCtxId = !!(addCtxId === undefined || addCtxId === null || addCtxId === true);
      // the data is not array when sending logs
      addCtxId && data.push && (data[0] = this._contextManager.contextHash); // always in the 0 index

      if (this._passToWorkerInterval !== 0) {
        this._Q.push({
          eventName: name,
          data: data,
          shouldFlush: isImmediateWup,
          origin: this._dataOrigin
        });
        // Discovered in #TCI-121 - Bradesco report about performance issues with our system in Firefox
        // Therefore we try and limit the Q size
        if (isImmediateWup) {
          this._sendQToServerWorker();
        }
      } else {
        this._serverWorkerCommunicator.sendAsync(this._msgToWorker, {
          eventName: name,
          data: data,
          shouldFlush: isImmediateWup,
          origin: this._dataOrigin
        });
      }
    }
  }, {
    key: "updateWithConfig",
    value: function updateWithConfig(configurationRepository) {
      var newInterval = configurationRepository.get(this._intervalConfigKey);
      if (newInterval !== undefined && newInterval !== this._passToWorkerInterval) {
        this._passToWorkerInterval = newInterval;
        clearInterval(this._intervalId);
        this._intervalId = null;
        if (this._passToWorkerInterval !== 0) {
          this._intervalId = setInterval(this._sendQToServerWorker.bind(this), this._passToWorkerInterval);
        }
      }
    }
  }, {
    key: "flushAllMessages",
    value: function flushAllMessages() {
      // empty the queue and send the data to be first
      this._Q.push({
        eventName: 'flushData'
      });
      this._sendQToServerWorker();
    }
  }, {
    key: "registerOnPreSendToWorker",
    value: function registerOnPreSendToWorker(onPreSendToWorker) {
      this._onPreSendToWorker = onPreSendToWorker;
    }
  }, {
    key: "_sendQToServerWorker",
    value: function _sendQToServerWorker() {
      try {
        if (this._onPreSendToWorker) {
          this._onPreSendToWorker();
        }
        if (this._Q.length) {
          this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q);
          this._Q = []; // faster then splice...
        }
      } catch (error) {
        // Batch send failed, fall back to sending messages individually
        var errorName = (error === null || error === void 0 ? void 0 : error.name) || 'Error';
        var errorMsg = (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.toString()) || 'Unknown error';
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed sending batch data to worker (".concat(errorName, " - ").concat(errorMsg, "). Retrying with individual messages."));
        this._sendQInSingleMessagesToServerWorker();
      }
    }

    /**
     * Adds the data to the Queue like addToQueue() does, but without triggering any ServerCommunicator.sendAsync invocation.
     * Designed to be used by DevDebugDataQ which adds the aggregated debug-info data during onPreSentToWorker interception.
     */
  }, {
    key: "appendData",
    value: function appendData(name, data) {
      this._Q.push({
        eventName: name,
        data: data,
        shouldFlush: false,
        origin: this._dataOrigin
      });
    }

    /**
     * Sends the Q in single messages. Used in case of an error in sending one of the messages due to its content.
     * In this case we don't want to loss all the data so we separate the sending to single message at a time
     * @private
     */
  }, {
    key: "_sendQInSingleMessagesToServerWorker",
    value: function _sendQInSingleMessagesToServerWorker() {
      for (var i = 0; i < this._Q.length; i++) {
        try {
          this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q[i]);
        } catch (error) {
          var _this$_Q$i;
          // Log with more context for debugging
          var eventName = ((_this$_Q$i = this._Q[i]) === null || _this$_Q$i === void 0 ? void 0 : _this$_Q$i.eventName) || 'unknown';
          var errorName = (error === null || error === void 0 ? void 0 : error.name) || 'Error';
          var errorMsg = (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.toString()) || 'Unknown error';

          // Use warn instead of error since this is a fallback scenario and some data
          // may legitimately fail serialization (e.g., non-cloneable objects)
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed to send message to worker (eventName: ".concat(eventName, ", error: ").concat(errorName, " - ").concat(errorMsg, "). Message will be discarded."));
        }
      }
      this._Q = [];
    }

    /**
     * Clear queues and notify worker on window closing to verify all data will be sent to server
     */
  }, {
    key: "_onUnload",
    value: function _onUnload() {
      this.flushAllMessages();
    }
  }, {
    key: "filterOut",
    value: function filterOut(filter) {
      this._Q = this._Q.filter(filter);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/ElementStrengthen.js":
/*!*********************************************************!*\
  !*** ./src/main/technicalServices/ElementStrengthen.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElementStrengthen: function() { return /* binding */ ElementStrengthen; },
/* harmony export */   ElementStrengthenInstance: function() { return /* binding */ ElementStrengthenInstance; }
/* harmony export */ });
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var ElementStrengthen = /*#__PURE__*/function () {
  function ElementStrengthen() {
    _classCallCheck(this, ElementStrengthen);
    this._weights = {
      input: 5,
      fieldset: 4,
      form: 3,
      textarea: 3,
      label: 2
    };
    this._interactiveElementsTag = ['input', 'fieldset', 'textarea', 'label'];
    this._classlist = ['container', 'wrapper', 'section', 'content', 'main-content', 'main_content'];
    this._containerTagName = ['main', 'article', 'aside', 'div'];
  }
  return _createClass(ElementStrengthen, [{
    key: "isElementVisible",
    value: function isElementVisible(el) {
      if (!(el instanceof HTMLElement)) return false;
      if (el.hasAttribute('hidden')) return false;
      var style = window.getComputedStyle(el);
      if (style.display === 'none' || style.visibility === 'hidden' || parseFloat(style.opacity) === 0) {
        return false;
      }

      // if it has no offset size AND no client rects, it's not visible
      var hasSize = el.offsetWidth > 0 || el.offsetHeight > 0;
      var hasClientRect = el.getClientRects().length > 0;
      if (!hasSize && !hasClientRect) {
        return false;
      }

      // ensure none of its ancestors hide it
      var parent = el.parentElement;
      while (parent) {
        var pStyle = window.getComputedStyle(parent);
        if (pStyle.display === 'none' || pStyle.visibility === 'hidden' || parent.hasAttribute('hidden')) {
          return false;
        }
        parent = parent.parentElement;
      }
      return true;
    }
  }, {
    key: "isInExcludedArea",
    value: function isInExcludedArea(element) {
      var currentElement = element;
      while (currentElement) {
        if (currentElement.tagName) {
          var tagName = currentElement.tagName.toLowerCase();
          if (tagName === 'footer' || tagName === 'header' || tagName === 'nav') {
            return true;
          }
        }
        currentElement = currentElement.parentElement;
      }
      return false;
    }
  }, {
    key: "isContainer",
    value: function isContainer(element) {
      var _this = this;
      var tagName = element.tagName.toLowerCase();
      var classList = element.className.split(' ');
      var ariaLabel = element.getAttribute('aria-label') ? "_".concat(element.getAttribute('aria-label')) : '';
      var dataAttributes = Array.from(element.attributes).filter(function (attr) {
        return attr.name.startsWith('data-');
      }).map(function (attr) {
        return "_".concat(attr.name);
      });
      if (this._containerTagName.includes(tagName)) {
        return true;
      }
      return classList.some(function (cls) {
        return _this._classlist.includes(cls);
      }) || element.hasAttribute('role') && element.getAttribute('role') === 'region' || ariaLabel.length > 0 || dataAttributes.length > 0;
    }
  }, {
    key: "isCustomElement",
    value: function isCustomElement(element) {
      if (typeof element.localName === 'string') {
        return element.localName.indexOf('-') > 0;
      }
      return false;
    }
  }, {
    key: "calculateScore",
    value: function calculateScore(element) {
      var weights = this._weights;
      var bonus = 0;
      if (element.id && element.id.includes('username')) {
        bonus = 20;
      } else if (element.name && element.name.includes('username')) {
        bonus = 10;
      }
      return weights[element.tagName.toLowerCase()] + bonus + (element.type === 'text' ? 10 : 0);
    }
  }, {
    key: "findInteractiveArea",
    value: function findInteractiveArea(document) {
      var _this2 = this;
      var interactiveElements = document.querySelectorAll(this._interactiveElementsTag);
      var areas = {};
      interactiveElements.forEach(function (element) {
        var _parent$className, _element$id;
        if (!_this2.isElementVisible(element) || _this2.isInExcludedArea(element)) return;
        var parent = element.parentElement;
        var parentKey = "".concat(parent.tagName, ".").concat(((_parent$className = parent.className) === null || _parent$className === void 0 ? void 0 : _parent$className.split(' ')[0]) || '');
        if (!areas[parentKey]) {
          areas[parentKey] = {
            score: 0,
            parent: parent,
            types: new Set()
          };
        }
        areas[parentKey].types.add(element.tagName.toLowerCase());
        areas[parentKey].score += _this2.calculateScore(element);
        areas[parentKey].score += (_element$id = element.id) !== null && _element$id !== void 0 && _element$id.includes('maincontent') ? 20 : 0;
        areas[parentKey].score -= element.disabled ? 20 : 0;
      });
      var maxArea = Object.values(areas).reduce(function (max, area) {
        return area.score + area.types.size * 2 > max.score ? area : max;
      }, {
        score: 0
      });
      return maxArea.parent;
    }
  }, {
    key: "findPotentialContainer",
    value: function findPotentialContainer(interactiveArea) {
      var currentElement = interactiveArea;
      var potentialContainer = null;
      while (currentElement && currentElement.tagName.toLowerCase() !== 'body') {
        if (this.isContainer(currentElement)) {
          var _currentElement;
          potentialContainer = currentElement;
          var tagName = (_currentElement = currentElement) === null || _currentElement === void 0 || (_currentElement = _currentElement.tagName) === null || _currentElement === void 0 ? void 0 : _currentElement.toLowerCase();
          var classList = currentElement.className.split(' ');
          if (tagName === 'div' && (classList.includes('containerWrapper') || classList.includes('container'))) {
            return currentElement;
          }
          if (this._containerTagName.includes(tagName) && tagName !== 'div') {
            return currentElement;
          }
        }
        currentElement = currentElement.parentElement;
      }
      return potentialContainer;
    }
  }, {
    key: "interactiveContainer",
    value: function interactiveContainer() {
      var interactiveArea = this.findInteractiveArea(document);
      if (interactiveArea) {
        var container = this.findPotentialContainer(interactiveArea);
        if (container) {
          return container;
        }
      } else {
        return _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("No significant interactive area.");
      }
    }
  }, {
    key: "getUniqueElementId",
    value: function getUniqueElementId(element, uniqueIDConfiguration) {
      var numToLimit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 30;
      if (!element || !uniqueIDConfiguration) return '';
      var componentsFormat = uniqueIDConfiguration.componentsFormat,
        hierarchyFormat = uniqueIDConfiguration.hierarchyFormat;
      if (!uniqueIDConfiguration.isTagEnabled(element.tagName)) {
        return '-1';
      }
      var interactiveArea = this.findInteractiveArea(document);
      var potentialContainer = interactiveArea ? this.findPotentialContainer(interactiveArea) : null;
      var containerInfo = potentialContainer ? "".concat(potentialContainer.tagName.toLowerCase(), "_").concat(potentialContainer.className || '') : '';
      var hierarchyPath = this._buildFullHierarchyPath(element, hierarchyFormat, numToLimit);
      var valuesMap = {
        "{tagName}": element.tagName.toLowerCase(),
        "{index}": "[".concat(this._getSiblingIndex(element), "]"),
        "{id}": element.id || '',
        "{className}": element.className || '',
        "{ariaLabel}": element.getAttribute('aria-label') || '',
        "{hierarchyPath}": hierarchyPath,
        "{containerInfo}": containerInfo
      };
      var uniqueID = componentsFormat;

      // Replace placeholders in the components format
      for (var _i = 0, _Object$entries = Object.entries(valuesMap); _i < _Object$entries.length; _i++) {
        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
          key = _Object$entries$_i[0],
          value = _Object$entries$_i[1];
        uniqueID = uniqueID.replace(key, value);
      }
      uniqueID = uniqueID
      // strip any {} placeholders
      .replace(/\{[^}]+\}/g, '')
      // collapse runs of _ or : into a single _
      .replace(/[_:]+/g, '_')
      // trim any leading OR trailing underscore (grouped alternation)
      .replace(/(^_|_$)/g, '');
      return uniqueID;
    }
  }, {
    key: "_getSiblingIndex",
    value: function _getSiblingIndex(element) {
      var _element$parentNode;
      return String(Array.from(((_element$parentNode = element.parentNode) === null || _element$parentNode === void 0 ? void 0 : _element$parentNode.children) || []).indexOf(element));
    }
  }, {
    key: "_buildFullHierarchyPath",
    value: function _buildFullHierarchyPath(element, hierarchyFormat, numToLimit) {
      var pathComponents = [];
      var currentElement = element.parentNode; // Start from parentNode
      var depth = 0;
      while (currentElement && ((_currentElement$tagNa = currentElement.tagName) === null || _currentElement$tagNa === void 0 ? void 0 : _currentElement$tagNa.toLowerCase()) !== 'body' && depth < numToLimit) {
        var _currentElement$tagNa, _currentElement$tagNa2;
        var tagName = (_currentElement$tagNa2 = currentElement.tagName) === null || _currentElement$tagNa2 === void 0 ? void 0 : _currentElement$tagNa2.toLowerCase();
        var index = this._getSiblingIndex(currentElement);

        // Replace placeholders in the hierarchy format
        var hierarchy = hierarchyFormat.replace("{tagName}", tagName ? tagName : '').replace("{index}", index >= 0 ? "[".concat(index, "]") : '');

        // Add additional attributes for uniqueness
        var attributes = [];
        if (currentElement.id) attributes.push(currentElement.id);
        if (currentElement.name) attributes.push(currentElement.name);
        if (currentElement.className) attributes.push(currentElement.className);
        if (attributes.length > 0) {
          hierarchy += "".concat(attributes.join(''));
        }
        pathComponents.unshift(hierarchy);
        currentElement = currentElement.parentNode instanceof ShadowRoot ? currentElement.parentNode.host : currentElement.parentElement;
        depth++;
      }
      return pathComponents.join('');
    }
  }, {
    key: "getUniqueElementXpath",
    value: function getUniqueElementXpath(element) {
      var numToLimit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Infinity;
      if (!element) return '';
      var path = [];
      var depth = 0;

      // Loop instead of recursion for better performance
      while (element && depth < numToLimit) {
        var tagName = element.tagName ? element.tagName.toLowerCase() : element.nodeName.toLowerCase();

        // If the element has an ID, use it, otherwise calculate sibling index
        if (element.id) {
          path.unshift("".concat(tagName, "#").concat(element.id));
        } else {
          var siblingIndex = 1;
          var sibling = element;

          // Find the position of this element among its siblings
          while (sibling.previousElementSibling) {
            sibling = sibling.previousElementSibling;
            siblingIndex++;
          }
          path.unshift("".concat(tagName, ":").concat(siblingIndex));
        }

        // Traverse through the shadow DOM host if the element is in a shadow root
        if (element.assignedSlot) {
          element = element.assignedSlot;
        } else if (element.parentNode instanceof ShadowRoot) {
          element = element.parentNode.host;
        } else {
          element = element.parentElement;
        }
        depth++;
      }
      return path.join('/');
    }
  }]);
}();
var ElementStrengthenInstance = Object.freeze(new ElementStrengthen());


/***/ }),

/***/ "./src/main/technicalServices/Hash.js":
/*!********************************************!*\
  !*** ./src/main/technicalServices/Hash.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x64hash128: function() { return /* binding */ x64hash128; }
/* harmony export */ });
/*
 * Based on https://github.com/karanlyons/murmurHash3.js/blob/a33d0723127e2e5415056c455f8aed2451ace208/murmurHash3.js
 */

function getUTF8Bytes(input) {
  // Benchmark: https://jsbench.me/b6klaaxgwq/1
  // If you want to just count bytes, see solutions at https://jsbench.me/ehklab415e/1
  var result = new Uint8Array(input.length);
  for (var i = 0; i < input.length; i++) {
    // `charCode` is faster than encoding, so we prefer that when it's possible
    var charCode = input.charCodeAt(i);

    // In case of non-ASCII symbols we use proper encoding
    if (charCode > 127) {
      return new TextEncoder().encode(input);
    }
    result[i] = charCode;
  }
  return result;
}

/**
 * Adds two 64-bit values (provided as tuples of 32-bit values)
 * and updates (mutates) first value to write the result
 */
function x64Add(m, n) {
  var m0 = m[0] >>> 16,
    m1 = m[0] & 0xffff,
    m2 = m[1] >>> 16,
    m3 = m[1] & 0xffff;
  var n0 = n[0] >>> 16,
    n1 = n[0] & 0xffff,
    n2 = n[1] >>> 16,
    n3 = n[1] & 0xffff;
  var o0 = 0,
    o1 = 0,
    o2 = 0,
    o3 = 0;
  o3 += m3 + n3;
  o2 += o3 >>> 16;
  o3 &= 0xffff;
  o2 += m2 + n2;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o1 += m1 + n1;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o0 += m0 + n0;
  o0 &= 0xffff;
  m[0] = o0 << 16 | o1;
  m[1] = o2 << 16 | o3;
}

/**
 * Multiplies two 64-bit values (provided as tuples of 32-bit values)
 * and updates (mutates) first value to write the result
 */
function x64Multiply(m, n) {
  var m0 = m[0] >>> 16,
    m1 = m[0] & 0xffff,
    m2 = m[1] >>> 16,
    m3 = m[1] & 0xffff;
  var n0 = n[0] >>> 16,
    n1 = n[0] & 0xffff,
    n2 = n[1] >>> 16,
    n3 = n[1] & 0xffff;
  var o0 = 0,
    o1 = 0,
    o2 = 0,
    o3 = 0;
  o3 += m3 * n3;
  o2 += o3 >>> 16;
  o3 &= 0xffff;
  o2 += m2 * n3;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o2 += m3 * n2;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o1 += m1 * n3;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o1 += m2 * n2;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o1 += m3 * n1;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o0 += m0 * n3 + m1 * n2 + m2 * n1 + m3 * n0;
  o0 &= 0xffff;
  m[0] = o0 << 16 | o1;
  m[1] = o2 << 16 | o3;
}

/**
 * Provides left rotation of the given int64 value (provided as tuple of two int32)
 * by given number of bits. Result is written back to the value
 */
function x64Rotl(m, bits) {
  var m0 = m[0];
  bits %= 64;
  if (bits === 32) {
    m[0] = m[1];
    m[1] = m0;
  } else if (bits < 32) {
    m[0] = m0 << bits | m[1] >>> 32 - bits;
    m[1] = m[1] << bits | m0 >>> 32 - bits;
  } else {
    bits -= 32;
    m[0] = m[1] << bits | m0 >>> 32 - bits;
    m[1] = m0 << bits | m[1] >>> 32 - bits;
  }
}

/**
 * Provides a left shift of the given int32 value (provided as tuple of [0, int32])
 * by given number of bits. Result is written back to the value
 */
function x64LeftShift(m, bits) {
  bits %= 64;
  if (bits === 0) {
    return;
  } else if (bits < 32) {
    m[0] = m[1] >>> 32 - bits;
    m[1] = m[1] << bits;
  } else {
    m[0] = m[1] << bits - 32;
    m[1] = 0;
  }
}
/**
 * Provides a XOR of the given int64 values(provided as tuple of two int32).
 * Result is written back to the first value
 */
function x64Xor(m, n) {
  m[0] ^= n[0];
  m[1] ^= n[1];
}
var F1 = [0xff51afd7, 0xed558ccd];
var F2 = [0xc4ceb9fe, 0x1a85ec53];
/**
 * Calculates murmurHash3's final x64 mix of that block and writes result back to the input value.
 * (`[0, h[0] >>> 1]` is a 33 bit unsigned right shift. This is the
 * only place where we need to right shift 64bit ints.)
 */
function x64Fmix(h) {
  var shifted = [0, h[0] >>> 1];
  x64Xor(h, shifted);
  x64Multiply(h, F1);
  shifted[1] = h[0] >>> 1;
  x64Xor(h, shifted);
  x64Multiply(h, F2);
  shifted[1] = h[0] >>> 1;
  x64Xor(h, shifted);
}
var C1 = [0x87c37b91, 0x114253d5];
var C2 = [0x4cf5ad43, 0x2745937f];
var M = [0, 5];
var N1 = [0, 0x52dce729];
var N2 = [0, 0x38495ab5];
/**
 * Given a string and an optional seed as an int, returns a 128 bit
 * hash using the x64 flavor of MurmurHash3, as an unsigned hex.
 * All internal functions mutates passed value to achieve minimal memory allocations and GC load
 *
 * Benchmark https://jsbench.me/p4lkpaoabi/1
 */
function x64hash128(input, seed) {
  var key = getUTF8Bytes(input);
  seed = seed || 0;
  var length = [0, key.length];
  var remainder = length[1] % 16;
  var bytes = length[1] - remainder;
  var h1 = [0, seed];
  var h2 = [0, seed];
  var k1 = [0, 0];
  var k2 = [0, 0];
  var i;
  for (i = 0; i < bytes; i = i + 16) {
    k1[0] = key[i + 4] | key[i + 5] << 8 | key[i + 6] << 16 | key[i + 7] << 24;
    k1[1] = key[i] | key[i + 1] << 8 | key[i + 2] << 16 | key[i + 3] << 24;
    k2[0] = key[i + 12] | key[i + 13] << 8 | key[i + 14] << 16 | key[i + 15] << 24;
    k2[1] = key[i + 8] | key[i + 9] << 8 | key[i + 10] << 16 | key[i + 11] << 24;
    x64Multiply(k1, C1);
    x64Rotl(k1, 31);
    x64Multiply(k1, C2);
    x64Xor(h1, k1);
    x64Rotl(h1, 27);
    x64Add(h1, h2);
    x64Multiply(h1, M);
    x64Add(h1, N1);
    x64Multiply(k2, C2);
    x64Rotl(k2, 33);
    x64Multiply(k2, C1);
    x64Xor(h2, k2);
    x64Rotl(h2, 31);
    x64Add(h2, h1);
    x64Multiply(h2, M);
    x64Add(h2, N2);
  }
  k1[0] = 0;
  k1[1] = 0;
  k2[0] = 0;
  k2[1] = 0;
  var val = [0, 0];
  switch (remainder) {
    case 15:
      val[1] = key[i + 14];
      x64LeftShift(val, 48);
      x64Xor(k2, val);
    // fallthrough
    case 14:
      val[1] = key[i + 13];
      x64LeftShift(val, 40);
      x64Xor(k2, val);
    // fallthrough
    case 13:
      val[1] = key[i + 12];
      x64LeftShift(val, 32);
      x64Xor(k2, val);
    // fallthrough
    case 12:
      val[1] = key[i + 11];
      x64LeftShift(val, 24);
      x64Xor(k2, val);
    // fallthrough
    case 11:
      val[1] = key[i + 10];
      x64LeftShift(val, 16);
      x64Xor(k2, val);
    // fallthrough
    case 10:
      val[1] = key[i + 9];
      x64LeftShift(val, 8);
      x64Xor(k2, val);
    // fallthrough
    case 9:
      val[1] = key[i + 8];
      x64Xor(k2, val);
      x64Multiply(k2, C2);
      x64Rotl(k2, 33);
      x64Multiply(k2, C1);
      x64Xor(h2, k2);
    // fallthrough
    case 8:
      val[1] = key[i + 7];
      x64LeftShift(val, 56);
      x64Xor(k1, val);
    // fallthrough
    case 7:
      val[1] = key[i + 6];
      x64LeftShift(val, 48);
      x64Xor(k1, val);
    // fallthrough
    case 6:
      val[1] = key[i + 5];
      x64LeftShift(val, 40);
      x64Xor(k1, val);
    // fallthrough
    case 5:
      val[1] = key[i + 4];
      x64LeftShift(val, 32);
      x64Xor(k1, val);
    // fallthrough
    case 4:
      val[1] = key[i + 3];
      x64LeftShift(val, 24);
      x64Xor(k1, val);
    // fallthrough
    case 3:
      val[1] = key[i + 2];
      x64LeftShift(val, 16);
      x64Xor(k1, val);
    // fallthrough
    case 2:
      val[1] = key[i + 1];
      x64LeftShift(val, 8);
      x64Xor(k1, val);
    // fallthrough
    case 1:
      val[1] = key[i];
      x64Xor(k1, val);
      x64Multiply(k1, C1);
      x64Rotl(k1, 31);
      x64Multiply(k1, C2);
      x64Xor(h1, k1);
    // fallthrough
  }
  x64Xor(h1, length);
  x64Xor(h2, length);
  x64Add(h1, h2);
  x64Add(h2, h1);
  x64Fmix(h1);
  x64Fmix(h2);
  x64Add(h1, h2);
  x64Add(h2, h1);
  return ("00000000" + (h1[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h1[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[1] >>> 0).toString(16)).slice(-8);
}

/***/ }),

/***/ "./src/main/technicalServices/MessageBus.js":
/*!**************************************************!*\
  !*** ./src/main/technicalServices/MessageBus.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../infrastructure/CDSet */ "./src/main/infrastructure/CDSet.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 *
 */
var MessageBus = /*#__PURE__*/function () {
  function MessageBus() {
    _classCallCheck(this, MessageBus);
    this.subscribers = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
  }

  /**
   *
   * @param messageType
   * @param handler
   * @param isOneTime
   */
  return _createClass(MessageBus, [{
    key: "subscribe",
    value: function subscribe(messageType, handler) {
      var isOneTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var listenersSet;
      var foundHandler = false;
      if (this.subscribers.has(messageType)) {
        listenersSet = this.subscribers.get(messageType);
        listenersSet && listenersSet.forEach(function (listener) {
          if (handler === listener.handler) {
            foundHandler = true;
          }
        });
      } else {
        listenersSet = _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create();
        this.subscribers.set(messageType, listenersSet);
      }
      if (!foundHandler) {
        listenersSet.add({
          handler: handler,
          isOneTime: isOneTime
        });
      }
    }

    /**
     *
     * @param messageType
     * @param handler
     */
  }, {
    key: "unsubscribe",
    value: function unsubscribe(messageType, handler) {
      if (messageType && this.subscribers.has(messageType)) {
        var listenersSet = this.subscribers.get(messageType);
        listenersSet && listenersSet.forEach(function (listener) {
          if (handler === listener.handler) {
            listenersSet["delete"](listener);
          }
        });
        if (listenersSet.size === 0) {
          this.subscribers["delete"](messageType);
        }
      }
    }

    /**
     *
     * @param messageType
     * @param message
     */
  }, {
    key: "publish",
    value: function publish(messageType, message) {
      if (!messageType) {
        throw new Error('invalid argument messageType must be defined');
      }
      this._notifySubscribers(messageType, message);
    }

    /**
     *
     * @param messageType
     * @param message
     */
  }, {
    key: "_notifySubscribers",
    value: function _notifySubscribers(messageType, message) {
      var listenersSet = this.subscribers.get(messageType);
      listenersSet && listenersSet.forEach(function (listener) {
        listener.handler(message);
        if (listener.isOneTime) {
          listenersSet["delete"](listener);
        }
      });
    }
  }]);
}();
/* harmony default export */ __webpack_exports__["default"] = (MessageBus);

/***/ }),

/***/ "./src/main/technicalServices/PerfMonitor.js":
/*!***************************************************!*\
  !*** ./src/main/technicalServices/PerfMonitor.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ PerfMonitor; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _CDUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var PerfMonitor = /*#__PURE__*/function () {
  function PerfMonitor(perfDataQ) {
    _classCallCheck(this, PerfMonitor);
    this._perfDataQ = perfDataQ;
    this._now = window.performance && window.performance.now ? window.performance.now.bind(window.performance) : _CDUtils__WEBPACK_IMPORTED_MODULE_2__["default"].dateNow.bind(Date);
    this._monitors = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
  }
  return _createClass(PerfMonitor, [{
    key: "startMonitor",
    value: function startMonitor(counterName) {
      _log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("PerfMonitor:startMonitor on ".concat(counterName));
      this._monitors.set(counterName, this._now());
    }
  }, {
    key: "stopMonitor",
    value: function stopMonitor(counterName) {
      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'main';
      if (this._monitors.has(counterName)) {
        var time = this._now() - this._monitors.get(counterName);
        this._perfDataQ.addToQueue('perf', {
          orig: origin,
          name: counterName,
          val: time
        });
        _log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("PerfMonitor:stopMonitor on ".concat(counterName, ": time = ").concat(time));
        this._monitors["delete"](counterName);
      }
    }
  }, {
    key: "cancelMonitor",
    value: function cancelMonitor(counterName) {
      _log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("PerfMonitor:cancelMonitor on ".concat(counterName));
      if (this._monitors.has(counterName)) {
        this._monitors["delete"](counterName);
      }
    }

    /**
     * report a monitor directly without storing in _monitors
     */
  }, {
    key: "reportMonitor",
    value: function reportMonitor(counterName, time) {
      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'main';
      _log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].debug("PerfMonitor:reportMonitor on ".concat(counterName, ", time: ").concat(time));
      this._perfDataQ.addToQueue('perf', {
        orig: origin,
        name: counterName,
        val: time
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/SiteMapper.js":
/*!**************************************************!*\
  !*** ./src/main/technicalServices/SiteMapper.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SiteMapper; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * This class is meant for working with configuration of the type { triggers:[], mappings:[] }
 * (see https://docs.google.com/a/biocatch.com/document/d/1onukKn6caLeiA20miRg_lFQB1-oyyv7HPF7z8IBTifw/edit?usp=sharing )
 * for more details.
 * The class will call the _onMatchCB with the matched mapping when a match is found.
 * Currently the class is being used by the ContextMgr for reporting contexts and by the SessionService for
 * resetting the session number in case the customer does not call the startNewSession API.
 */
var SiteMapper = /*#__PURE__*/function () {
  function SiteMapper(mutationObserver, cdUtils, domUtils, siteMappingKey, matchCallback) {
    var stopOnFirstMappingMatch = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;
    var maxMappings = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 200;
    _classCallCheck(this, SiteMapper);
    this._mutationObserver = mutationObserver;
    this._siteMapKey = siteMappingKey;
    this._keyUrl = siteMappingKey + '_isUrlNonMasked';
    // Determines if after a first mapping match we continue to process additional mappings or not
    this._stopOnFirstMappingMatch = stopOnFirstMappingMatch;
    this._siteMap = null;
    this._observers = [];
    this._utils = cdUtils;
    this._domUtils = domUtils;
    this._onMatchCB = matchCallback;
    this._maxMappings = maxMappings;
    this._maxTriggers = 10;
    this._loggedErrorSelectors = {};
  }
  return _createClass(SiteMapper, [{
    key: "updateObserver",
    value: function updateObserver(observerCallback) {
      this._onMatchCB = observerCallback;
    }
  }, {
    key: "_observeChange",
    value: function _observeChange(selector, handler) {
      if (selector) {
        try {
          var result = window.document.querySelector(selector);
          if (result) {
            var obs = new this._mutationObserver(function (mutations) {
              if (mutations.length > 0) {
                handler();
              }
            });
            // we need the subtree in order to follow changes on textNodes
            obs.observe(result, {
              childList: true,
              characterData: true,
              attributes: true,
              subtree: true
            });
            this._observers.push(obs);
          } else {
            _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Selector:".concat(JSON.stringify(selector), " not found on page. Check ").concat(this._siteMapKey, " configuration"));
          }
        } catch (ex) {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("SiteMapper._observeChange: ".concat(ex.message), ex);
        }
      }
    }
  }, {
    key: "initTracking",
    value: function initTracking() {
      var _this = this;
      var testQuerySelector = function testQuerySelector() {
        // Guard against race condition where stopTracking() may have been called
        if (!_this._siteMap || !_this._siteMap.mappings) {
          return;
        }
        for (var j = 0; j < _this._siteMap.mappings.length; j++) {
          try {
            var _mapping = _this._siteMap.mappings[j];
            // if no url check selector, if no selector, only url
            if (!_mapping.url || _this._url.indexOf(_mapping.url) > -1) {
              if (_mapping.selector) {
                var result = window.document.querySelector(_mapping.selector);
                if (result) {
                  if (_mapping.byText) {
                    // selector & byText both expressions should be true
                    if (result.innerText !== undefined && result.innerText.indexOf(_mapping.byText) !== -1 || result.value === _mapping.byText || result.textContent === _mapping.byText) {
                      // by text can be either in inner text or in the value field(entered by user)
                      _this._onMatchCB(_mapping);
                      if (_this._stopOnFirstMappingMatch) {
                        return;
                      }
                    }
                  } else {
                    // only selector - which exists
                    _this._onMatchCB(_mapping);
                    if (_this._stopOnFirstMappingMatch) {
                      return;
                    }
                  }
                }
              } else if (_this._url.indexOf(_mapping.url) > -1) {
                // only url
                _this._onMatchCB(_mapping);
                if (_this._stopOnFirstMappingMatch) {
                  return;
                }
              }
            }
          } catch (ex) {
            var _mapping2;
            // Only log each problematic selector once to prevent log spam
            var selectorKey = ((_mapping2 = mapping) === null || _mapping2 === void 0 ? void 0 : _mapping2.selector) || 'no-selector';
            if (!_this._loggedErrorSelectors[selectorKey]) {
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("SiteMapper:testQuerySelector failed for mapping index ".concat(j, ". Selector: \"").concat(selectorKey, "\". ex: ").concat(ex.message), ex);
              _this._loggedErrorSelectors[selectorKey] = true;
            }
            // Continue to next mapping instead of breaking the entire loop
          }
        }
      };
      if (!this._siteMap) {
        var siteMap = this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey);
        if (siteMap && siteMap.triggers.length <= this._maxTriggers && siteMap.mappings.length <= this._maxMappings) {
          this._siteMap = siteMap;
        }
        this._isNonMaskedUrl = this._utils.StorageUtils.getFromSessionStorage(this._keyUrl);
      }
      if (this._siteMap) {
        this._url = this._isNonMaskedUrl ? window.document.location.href : this._utils.getDocUrl();
        this._domUtils.onDocumentBody(window, function () {
          // Guard against race condition where stopTracking() may have been called
          if (!_this._siteMap) {
            return;
          }

          // run module for mutationObserver
          if (_this._mutationObserver && _this._siteMap.triggers) {
            _this._siteMap.triggers.forEach(function (trigger) {
              if (!trigger.url || _this._url.indexOf(trigger.url) > -1) {
                _this._observeChange(trigger.selector, testQuerySelector);
              }
            });
          }
          testQuerySelector();
        });
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      try {
        var configValue = configurationRepository.get(this._siteMapKey);
        if (!this._siteMap && configValue) {
          this.stopTracking();
          var siteMap = null;

          // Handle both string (JSON) and object formats
          if (typeof configValue === 'string') {
            siteMap = JSON.parse(configValue);
          } else if (_typeof(configValue) === 'object' && configValue !== null) {
            siteMap = configValue;
          }
          this._isNonMaskedUrl = configurationRepository.get('useNonMaskedUrlInMappings');
          if (siteMap && siteMap.triggers && siteMap.mappings && siteMap.triggers.length <= this._maxTriggers && siteMap.mappings.length <= this._maxMappings) {
            this._siteMap = siteMap;
            // save config
            this._utils.StorageUtils.saveToSessionStorage(this._siteMapKey, this._siteMap);
            this._utils.StorageUtils.saveToSessionStorage(this._keyUrl, this._isNonMaskedUrl);
            this.initTracking();
          } else if (siteMap) {
            // Provide specific feedback about what went wrong
            if (!siteMap.triggers || !siteMap.mappings) {
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Configuration ".concat(this._siteMapKey, " is missing required fields. Expected: { triggers: [], mappings: [] }. ") + "Found: { triggers: ".concat(siteMap.triggers ? 'present' : 'missing', ", mappings: ").concat(siteMap.mappings ? 'present' : 'missing', " }"));
            } else {
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Configuration ".concat(this._siteMapKey, " contains an illegal amount of triggers or mappings. ") + "Max Allowed Triggers: ".concat(this._maxTriggers, " (found: ").concat(siteMap.triggers.length, "), ") + "Max Allowed Mappings: ".concat(this._maxMappings, " (found: ").concat(siteMap.mappings.length, ")"));
            }
          }
        }
      } catch (ex) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("An error occurred while loading ".concat(this._siteMapKey, " configuration. Make sure the configuration value is valid. ").concat(ex.message), ex);
      }
    }
  }, {
    key: "stopTracking",
    value: function stopTracking() {
      for (var i = 0; i < this._observers.length; i++) {
        this._observers[i].disconnect();
      }
      this._observers = [];
      this._siteMap = null;
      this._loggedErrorSelectors = {};
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/StorageUtilsWrapper.js":
/*!***********************************************************!*\
  !*** ./src/main/technicalServices/StorageUtilsWrapper.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ StorageUtilsWrapper; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var StorageUtilsWrapper = /*#__PURE__*/function () {
  function StorageUtilsWrapper(utils, configurationRepository, startupConfiguration) {
    _classCallCheck(this, StorageUtilsWrapper);
    this._isSecureSameSite = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableSameSiteNoneAndSecureCookies);
    this._restrictedCookieDomains = startupConfiguration.getRestrictedCookieDomains();
    this._crossBrandSharedCookieDomain = startupConfiguration.getCrossBrandSharedCookieDomain();
    this._utils = utils;
  }
  return _createClass(StorageUtilsWrapper, [{
    key: "getCookie",
    value: function getCookie(key) {
      return this._utils.StorageUtils.getCookie(key);
    }

    /**
     *  Write cookies specifically meant to be shared across brands.
     *  Typically, to share muid across two brands. (like NAB & NAB Connect)
     *
     *  If startupConfiguration.crossBrandSharedCookieDomain haven't set - works exactly like the "regular" setCookie function.
     */
  }, {
    key: "setCrossBrandCookie",
    value: function setCrossBrandCookie(key, value, expiresAttribute) {
      return this._utils.StorageUtils.setCookie(key, value, expiresAttribute, this._isSecureSameSite, this._restrictedCookieDomains //  intentionally ignore crossBrandSharedCookieDomain check so that the cookie can be shared across brands.
      );
    }
  }, {
    key: "setCookie",
    value: function setCookie(key, value, miliSec) {
      // Merge restrictedCookieDomains and crossBrandSharedCookieDomain (if defined)
      var restrictedCookieDomains = this._getEffectiveRestrictedCookieDomains();
      return this._utils.StorageUtils.setCookie(key, value, miliSec, this._isSecureSameSite, restrictedCookieDomains);
    }

    //returns 0 upon set success, -1 upon set failure, 0 if cookie dose not exist
  }, {
    key: "setExpirationInCookie",
    value: function setExpirationInCookie(key, expirationTime) {
      // Merge restrictedCookieDomains and crossBrandSharedCookieDomain (if defined)
      var restrictedCookieDomains = this._getEffectiveRestrictedCookieDomains();
      return this._utils.StorageUtils.setExpirationInCookie(key, expirationTime, this._isSecureSameSite, restrictedCookieDomains);
    }

    /**
     * Merge restrictedCookieDomains and crossBrandSharedCookieDomain (if defined)
     * @returns {*[]}
     * @private
     */
  }, {
    key: "_getEffectiveRestrictedCookieDomains",
    value: function _getEffectiveRestrictedCookieDomains() {
      return [].concat(_toConsumableArray(this._restrictedCookieDomains || []), _toConsumableArray(this._crossBrandSharedCookieDomain ? [this._crossBrandSharedCookieDomain] : []));
    }
  }, {
    key: "getFromLocalStorage",
    value: function getFromLocalStorage(key) {
      return this._utils.StorageUtils.getFromLocalStorage(key);
    }
  }, {
    key: "saveToLocalStorage",
    value: function saveToLocalStorage(key, value, expiration) {
      return this._utils.StorageUtils.saveToLocalStorage(key, value, expiration);
    }
    //returns 0 upon set success, -1 upon set failure, 0 if cookie dose not exist
  }, {
    key: "setExpirationInLocalStorage",
    value: function setExpirationInLocalStorage(key, expirationTime) {
      return this._utils.StorageUtils.setExpirationInLocalStorage(key, expirationTime);
    }
  }, {
    key: "removeFromLocalStorage",
    value: function removeFromLocalStorage(key) {
      return this._utils.StorageUtils.removeFromLocalStorage(key);
    }
  }, {
    key: "removeCookie",
    value: function removeCookie(key) {
      return this._utils.StorageUtils.removeCookie(key);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/SupportedBrowserChecker.js":
/*!***************************************************************!*\
  !*** ./src/main/technicalServices/SupportedBrowserChecker.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ SupportedBrowserChecker; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var SupportedBrowserChecker = /*#__PURE__*/function () {
  function SupportedBrowserChecker() {
    _classCallCheck(this, SupportedBrowserChecker);
  }
  return _createClass(SupportedBrowserChecker, null, [{
    key: "isSupported",
    value: function isSupported() {
      if (typeof WeakMap === 'undefined' || !window.Worker || !window.MutationObserver) {
        return false;
      }
      return true;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/URLBuilder.js":
/*!**************************************************!*\
  !*** ./src/main/technicalServices/URLBuilder.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ URLBuilder; }
/* harmony export */ });
/* harmony import */ var _CDUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CDUtils */ "./src/main/technicalServices/CDUtils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var URLBuilder = /*#__PURE__*/function () {
  function URLBuilder() {
    _classCallCheck(this, URLBuilder);
  }
  return _createClass(URLBuilder, null, [{
    key: "build",
    value: function build(serverURL, cid) {
      var route = '/client/v3.1/web/wup';
      var protocol = 'https';
      if (!serverURL) {
        throw new Error('Invalid server URL. Parameter is empty');
      }
      var newURL;
      if (_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].hasProtocol(serverURL)) {
        newURL = serverURL.toString().concat(route, '?cid=', cid);
      } else {
        newURL = protocol.concat('://', serverURL, route, '?cid=', cid);
      }
      return newURL;
    }
  }, {
    key: "buildCustomServerUrl",
    value: function buildCustomServerUrl(serverURL) {
      var protocol = 'https';
      var newURL;
      //if serverURL is empty we throw an error
      if (!serverURL) {
        throw new Error('Invalid server URL. Parameter is empty');
      }
      if (_CDUtils__WEBPACK_IMPORTED_MODULE_0__["default"].hasProtocol(serverURL)) {
        newURL = serverURL;
      } else {
        //https protocol is added when serverURL does not include one
        newURL = protocol.concat('://', serverURL);
      }
      return newURL;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/URLFieldsExtractor.js":
/*!**********************************************************!*\
  !*** ./src/main/technicalServices/URLFieldsExtractor.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ URLFieldsExtractor; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var URLFieldsExtractor = /*#__PURE__*/function () {
  function URLFieldsExtractor() {
    _classCallCheck(this, URLFieldsExtractor);
  }
  return _createClass(URLFieldsExtractor, null, [{
    key: "extract",
    value: function extract(wupServerURL) {
      if (!wupServerURL) {
        throw new Error('Invalid wupServerURL. Parameter is empty');
      }
      var urlFields = {};
      urlFields.cid = this.getCID(wupServerURL);
      urlFields.serverURL = this.getServerURL(wupServerURL);
      if (!urlFields.serverURL) {
        throw new Error("Invalid field. Failed extracting the address parameter: ".concat(wupServerURL));
      }
      if (!urlFields.cid) {
        throw new Error("Invalid field. Failed extracting the cid parameter: ".concat(wupServerURL));
      }
      return urlFields;
    }
  }, {
    key: "getCID",
    value: function getCID(wupServerURL) {
      // Check and extract CID parameter
      var cid = URLFieldsExtractor.extractCid(wupServerURL);
      if (!cid) {
        return null;
      }
      return cid;
    }
  }, {
    key: "extractCid",
    value: function extractCid(url) {
      var cidIndex = url.indexOf('cid=');
      if (cidIndex === -1) {
        return null;
      }
      cidIndex += 4;
      var nextParamIndex = url.indexOf('&', cidIndex);
      nextParamIndex = nextParamIndex === -1 ? undefined : nextParamIndex;
      var cid = url.substring(cidIndex, nextParamIndex);
      return cid;
    }
  }, {
    key: "getServerURL",
    value: function getServerURL(url) {
      var routeIndex = url.indexOf('/client/v', url);
      routeIndex = routeIndex === -1 ? null : routeIndex;
      if (!routeIndex) {
        return null;
      }
      var serverURL = url.substring(0, routeIndex);
      return serverURL;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/UniqueIDConfiguration.js":
/*!*************************************************************!*\
  !*** ./src/main/technicalServices/UniqueIDConfiguration.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UniqueIDConfiguration: function() { return /* binding */ UniqueIDConfiguration; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var UniqueIDConfiguration = /*#__PURE__*/function () {
  function UniqueIDConfiguration(componentsFormat, hierarchyFormat, enabledTags) {
    _classCallCheck(this, UniqueIDConfiguration);
    this.componentsFormat = componentsFormat;
    this.hierarchyFormat = hierarchyFormat;
    this.enabledTags = enabledTags;
  }

  /**
    * Cleans a format string by removing words that are NOT inside `{}` while retaining separators.
    * @param {string} format
    * @returns {string}
    */
  return _createClass(UniqueIDConfiguration, [{
    key: "isTagEnabled",
    value:
    /**
     * Validates if the given tag is enabled in the configuration.
     * @param {string} tagName
     * @returns {boolean}
     */
    function isTagEnabled(tagName) {
      if (typeof tagName !== 'string') {
        return false;
      }
      return this.enabledTags.length > 0 && this.enabledTags.includes(tagName.toLowerCase());
    }
  }], [{
    key: "cleanFormat",
    value: function cleanFormat(format) {
      if (!format) return '';
      // Retain valid placeholders enclosed in curly brackets and separators
      var regexPattern = /{[^}]+}|[:_]/g;
      return (format.match(regexPattern) || []).join('');
    }
  }, {
    key: "parse",
    value: function parse(config) {
      try {
        // If config is a string, parse it as JSON
        if (typeof config === 'string') {
          config = JSON.parse(config);
        }
        // Ensure config is an object before proceeding
        if (_typeof(config) !== 'object' || config === null) {
          throw new Error("Invalid configuration format");
        }
        return new UniqueIDConfiguration(UniqueIDConfiguration.cleanFormat(config.componentsFormat), UniqueIDConfiguration.cleanFormat(config.hierarchyFormat), config.enabledTags);
      } catch (error) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to parse UniqueIDConfiguration:", error);
        return null;
      }
    }
  }]);
}();

/***/ }),

/***/ "./src/main/technicalServices/WorkerCommunicator.js":
/*!**********************************************************!*\
  !*** ./src/main/technicalServices/WorkerCommunicator.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ WorkerCommunicator; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDMap */ "./src/main/infrastructure/CDMap.js");
/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../infrastructure/CDSet */ "./src/main/infrastructure/CDSet.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



// The WorkerCommunicator can communicate between the main and the worker and also can
// exist in the worker and communicate with the main. All depends on the implementation
// of messagePort. messagePort is an object that must implement onmessage and potMessage functions
var WorkerCommunicator = /*#__PURE__*/function () {
  function WorkerCommunicator() {
    _classCallCheck(this, WorkerCommunicator);
    this._msgListeners = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();
  }
  return _createClass(WorkerCommunicator, [{
    key: "setMessagingPort",
    value: function setMessagingPort(messagePort) {
      var _this = this;
      this._messagePort = messagePort;
      messagePort.setonmessage(function (e) {
        var msg = e.data;
        var oneTimeListeners = [];
        // call the relevant msg listeners by the msgType
        var listenersSet = _this._msgListeners.get(msg.msgType);
        listenersSet && listenersSet.forEach(function (listener) {
          listener.callback(msg.data);
          if (listener.isOneTime) {
            oneTimeListeners.push(listener);
          }
        });

        // Remove one time listeners out side of the main foreach since otherwise you get unexpected results (think about it)
        oneTimeListeners.forEach(function (item) {
          listenersSet["delete"](item);
        });
      });
    }

    // All the parameters after data are optional. Using them is just a shortcut for calling addMessageListener separately
  }, {
    key: "sendAsync",
    value: function sendAsync(msgType, data, responseMsgType, onResponse, isOneTime) {
      if (onResponse && responseMsgType) {
        this.addMessageListener(responseMsgType, onResponse, isOneTime);
      }
      this._messagePort.postMessage({
        msgType: msgType,
        data: data
      });
    }
  }, {
    key: "addMessageListener",
    value: function addMessageListener(msgType, callback, isOneTime) {
      var listenersSet = null;
      if (this._msgListeners.has(msgType)) {
        listenersSet = this._msgListeners.get(msgType);
      } else {
        listenersSet = _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create();
        this._msgListeners.set(msgType, listenersSet);
      }
      listenersSet.add({
        callback: callback,
        isOneTime: isOneTime
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/WorkerWrapper.js":
/*!*****************************************************!*\
  !*** ./src/main/technicalServices/WorkerWrapper.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ WorkerWrapper; }
/* harmony export */ });
/* harmony import */ var _infrastructure_CDPort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDPort */ "./src/main/infrastructure/CDPort.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Wraps a worker implementation
 */

var WorkerWrapper = /*#__PURE__*/function () {
  function WorkerWrapper(nativeWorker) {
    _classCallCheck(this, WorkerWrapper);
    this._nativeWorker = nativeWorker;
    this.port = new _infrastructure_CDPort__WEBPACK_IMPORTED_MODULE_0__["default"](this._nativeWorker);
  }
  return _createClass(WorkerWrapper, [{
    key: "close",
    value: function close() {
      this.port.close();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/WorkerWrapperFactory.js":
/*!************************************************************!*\
  !*** ./src/main/technicalServices/WorkerWrapperFactory.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ WorkerWrapperFactory; }
/* harmony export */ });
/* harmony import */ var worker_loader_inline_no_fallback_filename_worker_js_worker_worker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! worker-loader?inline=no-fallback&filename=worker.js!../../worker/worker.js */ "./node_modules/worker-loader/dist/cjs.js?inline=no-fallback&filename=worker.js!./src/worker/worker.js");
/* harmony import */ var _WorkerWrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WorkerWrapper */ "./src/main/technicalServices/WorkerWrapper.js");
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Factory for creating a worker port. Factory create which wraps a dedicated inlined worker or a worker from url according to useUrlWorker configuration.
 */


var WorkerWrapperFactory = /*#__PURE__*/function () {
  function WorkerWrapperFactory(useUrlWorker, workerUrl) {
    _classCallCheck(this, WorkerWrapperFactory);
    this._useUrlWorker = useUrlWorker;
    this._workerUrl = workerUrl;
  }
  return _createClass(WorkerWrapperFactory, [{
    key: "create",
    value: function create() {
      return this._useUrlWorker ? this._createWorkerFromUrl() : this._createInlineWorker();
    }
  }, {
    key: "_createInlineWorker",
    value: function _createInlineWorker() {
      var nativeWorker = new worker_loader_inline_no_fallback_filename_worker_js_worker_worker_js__WEBPACK_IMPORTED_MODULE_0__["default"]();
      _log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info('Created a dedicated worker.');
      return new _WorkerWrapper__WEBPACK_IMPORTED_MODULE_1__["default"](nativeWorker);
    }
  }, {
    key: "_createWorkerFromUrl",
    value: function _createWorkerFromUrl() {
      try {
        var nativeWorker = new Worker(this._workerUrl);
        _log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].info("Created worker from url - ".concat(this._workerUrl));
        return new _WorkerWrapper__WEBPACK_IMPORTED_MODULE_1__["default"](nativeWorker);
      } catch (e) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_2__["default"].error('Failed to construct worker from url.');
        throw e;
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/agenticDomInjection/AgenticDomInjectionDetector.js":
/*!***************************************************************************************!*\
  !*** ./src/main/technicalServices/agenticDomInjection/AgenticDomInjectionDetector.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomInjectionIndicatorType: function() { return /* binding */ DomInjectionIndicatorType; },
/* harmony export */   "default": function() { return /* binding */ AgenticDomInjectionDetector; }
/* harmony export */ });
/* harmony import */ var _InlineStyleReader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InlineStyleReader */ "./src/main/technicalServices/agenticDomInjection/InlineStyleReader.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var DEFAULT_ALLOWED_TAGS = ['div', 'style'];
var DomInjectionIndicatorType = {
  unknown: -1,
  overlayDiv: 0,
  selectOpenStyle: 1
};
var AgenticDomInjectionDetector = /*#__PURE__*/function () {
  /**
   * @param {ConfigurationRepository} configurationRepository
   */
  function AgenticDomInjectionDetector(configurationRepository) {
    _classCallCheck(this, AgenticDomInjectionDetector);
    this._configurationRepository = configurationRepository;
    this._allowedTags = this._getAllowedTags();
  }
  return _createClass(AgenticDomInjectionDetector, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._allowedTags = this._getAllowedTags();
    }

    /**
     * @param {Element} el
     * @returns {number} DomInjectionIndicatorType
     */
  }, {
    key: "detect",
    value: function detect(el) {
      if (!el || el.nodeType !== Node.ELEMENT_NODE) return DomInjectionIndicatorType.unknown;
      var tag = (el.tagName || '').toLowerCase();
      if (this._allowedTags.length > 0 && !this._allowedTags.includes(tag)) {
        return DomInjectionIndicatorType.unknown;
      }
      if (tag === 'div') {
        if (!el.hasAttribute('style')) return DomInjectionIndicatorType.unknown;
        var s = new _InlineStyleReader__WEBPACK_IMPORTED_MODULE_0__["default"](el);
        var position = s.get('position');
        var inset = s.get('inset');
        var pe = s.get('pointer-events');
        var opacity = s.get('opacity');
        var zIndex = s.get('z-index');
        var isFixed = position === 'fixed';
        var coversViewport = inset === '0px' || inset === '0' || inset === '0px 0px 0px 0px';
        var noPointerEvents = pe === 'none';
        var lowOpacity = function () {
          var n = Number(opacity);
          return Number.isFinite(n) && n > 0 && n <= 0.01;
        }();
        var extremeNegativeZ = function () {
          if (!zIndex) return true; // allow empty/auto
          var zi = Number(zIndex);
          return Number.isFinite(zi) && zi <= -1000000;
        }();
        if (isFixed && coversViewport && noPointerEvents && lowOpacity && extremeNegativeZ) {
          return DomInjectionIndicatorType.overlayDiv;
        }
      }
      if (tag === 'style') {
        var t = String(el.textContent || '').toLowerCase();
        if (t.includes('select:open') && t.includes('@keyframes') && t.includes('animation')) {
          return DomInjectionIndicatorType.selectOpenStyle;
        }
      }
      return DomInjectionIndicatorType.unknown;
    }
  }, {
    key: "_getAllowedTags",
    value: function _getAllowedTags() {
      var _this$_configurationR;
      var tags = (_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.agenticDomInjectionBlinkTags);

      // Allow config to arrive as JSON string from server.
      if (typeof tags === 'string') {
        try {
          tags = JSON.parse(tags);
        } catch (_unused) {
          tags = null;
        }
      }
      return Array.isArray(tags) ? tags : DEFAULT_ALLOWED_TAGS;
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/agenticDomInjection/InlineStyleReader.js":
/*!*****************************************************************************!*\
  !*** ./src/main/technicalServices/agenticDomInjection/InlineStyleReader.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ InlineStyleReader; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * InlineStyleReader parses the `style="..."` attribute of an element.
 * In the context of "Agentic DOM Injection," it is used to iterate over and check specific 
 * style fields to see if they match patterns typically detected when an agentic agent 
 * injects while working.
 */
var InlineStyleReader = /*#__PURE__*/function () {
  /**
   * @param {Element} el
   */
  function InlineStyleReader(el) {
    var _el$getAttribute;
    _classCallCheck(this, InlineStyleReader);
    this._styles = new Map();
    var styleAttr = el === null || el === void 0 || (_el$getAttribute = el.getAttribute) === null || _el$getAttribute === void 0 ? void 0 : _el$getAttribute.call(el, 'style');
    if (styleAttr) {
      var parts = styleAttr.split(';');
      for (var i = 0; i < parts.length; i++) {
        var part = parts[i].trim();
        if (!part) continue;
        var colonIdx = part.indexOf(':');
        if (colonIdx > 0) {
          var key = part.substring(0, colonIdx).trim().toLowerCase();
          var value = part.substring(colonIdx + 1).trim().toLowerCase();
          if (key) {
            this._styles.set(key, value);
          }
        }
      }
    }
  }

  /**
   * Reads an inline style property value (lowercased), or ''.
   * @param {string} prop
   * @returns {string}
   */
  return _createClass(InlineStyleReader, [{
    key: "get",
    value: function get(prop) {
      if (!prop) return '';
      return this._styles.get(prop.toLowerCase()) || '';
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/categories/CategoryService.js":
/*!******************************************************************!*\
  !*** ./src/main/technicalServices/categories/CategoryService.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CategoryService; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * CategoryService  Semantic Form Field Classifier (Shadow DOM aware + Cached)
 *
 * Purpose:
 * - Automatically classifies HTML form fields (e.g. <input>, <select>) into semantic categories
 *   such as "email", "password", "SSN", etc., based on their attribute values and associated labels.
 *
 * Features:
 * - Uses a keyword-to-category mapping (from elementCategories.json or provided).
 * - Extracts text from key attributes (name, id, placeholder, aria-label, etc.).
 * - Supports associated <label for="..."> matching.
 * - Traverses into Shadow DOM to find inner form elements and attribute values.
 * - Uses a WeakMap cache to avoid redundant computation (each element is scanned only once).
 * - Stops scanning early when a strong match is found (3 hits on a keyword).
 * - Uses configurable element selectors from elementSelectors.json or provided.
 *
 * Input:
 * - HTMLElement (form field or container element)
 *
 * Output:
 * - Category ID (string), or "0" if no category match is found.
 *
 * Typical Use:
 *   const cs = new CategoryService();
 *   const categoryId = cs.categoryField(myInputElement);
 */
var CategoryService = /*#__PURE__*/function () {
  /**
   * @param {Record<string,number>|null} elementCategories  map keyword  ID
   * @param {{attributes:string[]}|null} elementAttributes  attributes to scan
   * @param {{selectors:string[]}|null} elementSelectors  element selectors to match
   */
  function CategoryService() {
    var _elementAttributes$at, _elementSelectors$sel;
    var elementCategories = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var elementAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var elementSelectors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    _classCallCheck(this, CategoryService);
    var defaultCats = __webpack_require__(/*! ./elementCategories.json */ "./src/main/technicalServices/categories/elementCategories.json");
    var defaultAttrs = __webpack_require__(/*! ./elementAttributes.json */ "./src/main/technicalServices/categories/elementAttributes.json");
    var defaultSelectors = __webpack_require__(/*! ./elementSelectors.json */ "./src/main/technicalServices/categories/elementSelectors.json");
    var catSource = elementCategories && Object.keys(elementCategories).length ? elementCategories : defaultCats;
    this.CATEGORY_RULES = Object.create(null);
    for (var _i = 0, _Object$entries = Object.entries(catSource); _i < _Object$entries.length; _i++) {
      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
        key = _Object$entries$_i[0],
        value = _Object$entries$_i[1];
      this.CATEGORY_RULES[key] = value;
    }
    var attrSource = elementAttributes !== null && elementAttributes !== void 0 && (_elementAttributes$at = elementAttributes.attributes) !== null && _elementAttributes$at !== void 0 && _elementAttributes$at.length ? elementAttributes : defaultAttrs;
    this.ATTRIBUTE_NAMES = attrSource.attributes;
    var selectorSource = elementSelectors !== null && elementSelectors !== void 0 && (_elementSelectors$sel = elementSelectors.selectors) !== null && _elementSelectors$sel !== void 0 && _elementSelectors$sel.length ? elementSelectors : defaultSelectors;
    this.ELEMENT_SELECTORS = selectorSource.selectors.join(',');

    /** @private */
    this._cache = new WeakMap();
  }
  return _createClass(CategoryService, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      var _attrParsed$attribute, _selectorParsed$selec;
      var parseMaybeJson = function parseMaybeJson(value) {
        if (!value) return null;
        if (typeof value === 'string') {
          try {
            return JSON.parse(value);
          } catch (e) {
            return null;
          }
        }
        if (_typeof(value) === 'object') return value;
        return null;
      };
      var catRaw = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementCategories);
      var catParsed = parseMaybeJson(catRaw);
      if (catParsed && Object.keys(catParsed).length) {
        var rules = Object.create(null);
        for (var _i2 = 0, _Object$entries2 = Object.entries(catParsed); _i2 < _Object$entries2.length; _i2++) {
          var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),
            key = _Object$entries2$_i[0],
            value = _Object$entries2$_i[1];
          rules[key] = value;
        }
        this.CATEGORY_RULES = rules;
      }
      var attrRaw = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementAttributes);
      var attrParsed = parseMaybeJson(attrRaw);
      if (attrParsed !== null && attrParsed !== void 0 && (_attrParsed$attribute = attrParsed.attributes) !== null && _attrParsed$attribute !== void 0 && _attrParsed$attribute.length) {
        this.ATTRIBUTE_NAMES = attrParsed.attributes;
      }
      var selectorRaw = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.elementSelectors);
      var selectorParsed = parseMaybeJson(selectorRaw);
      if (selectorParsed !== null && selectorParsed !== void 0 && (_selectorParsed$selec = selectorParsed.selectors) !== null && _selectorParsed$selec !== void 0 && _selectorParsed$selec.length) {
        this.ELEMENT_SELECTORS = selectorParsed.selectors.join(',');
      }
    }

    /**
     * Categorise a form control.
     * @param {HTMLElement} el
     * @returns {string} Category ID string, `"0"` for no match, or `"-1"` on internal error.
     */
  }, {
    key: "categoryField",
    value: function categoryField(el) {
      // Handle null/undefined inputs gracefully
      try {
        if (!el || !(el instanceof HTMLElement)) {
          return '0';
        }
        var cached = this._cache.get(el);
        if (cached !== undefined) return cached;
        if (el.type === 'hidden') {
          this._cache.set(el, '0');
          return '0';
        }
        var ctrl = this._resolveControlNode(el);
        if (!ctrl) {
          this._cache.set(el, '0');
          return '0';
        }
        var strings = this._collectStrings(ctrl);
        if (!strings.length) {
          this._cache.set(el, '0');
          return '0';
        }
        var counts = Object.create(null);
        var bestId = '0';
        var bestHits = 0;
        var _iterator = _createForOfIteratorHelper(strings),
          _step;
        try {
          outer: for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var str = _step.value;
            var _iterator2 = _createForOfIteratorHelper(this._splitWords(str)),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var token = _step2.value;
                var id = this.CATEGORY_RULES[token];
                if (id !== undefined) {
                  var hits = (counts[id] || 0) + 1;
                  counts[id] = hits;
                  if (hits > bestHits) {
                    bestId = id.toString();
                    bestHits = hits;
                    if (bestHits >= 3) break outer;
                  }
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        this._cache.set(el, bestId);
        return bestId;
      } catch (e) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error("CategoryService.categoryField failed: ".concat(e));
        return "-1";
      }
    }
  }, {
    key: "_resolveControlNode",
    value: function _resolveControlNode(el) {
      if (el.matches(this.ELEMENT_SELECTORS)) return el;
      if (el.shadowRoot) {
        var inner = el.shadowRoot.querySelector(this.ELEMENT_SELECTORS);
        if (inner) return inner;
      }
      return null;
    }
  }, {
    key: "_collectStrings",
    value: function _collectStrings(ctrl) {
      var _this = this;
      var out = [];
      var pushAttrValues = function pushAttrValues(node) {
        var _iterator3 = _createForOfIteratorHelper(_this.ATTRIBUTE_NAMES),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var _node$getAttribute;
            var name = _step3.value;
            var v = (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, name);
            if (v) out.push(v.toLowerCase());
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      };
      pushAttrValues(ctrl);
      if (ctrl.shadowRoot) ctrl.shadowRoot.querySelectorAll('*').forEach(pushAttrValues);
      var root = ctrl.getRootNode();
      if (ctrl.id) {
        var _lbl;
        // Try to find label in the root node first, then fallback to document
        var lbl = root.querySelector("label[for=\"".concat(ctrl.id, "\"]"));
        if (!lbl && root !== document) {
          lbl = document.querySelector("label[for=\"".concat(ctrl.id, "\"]"));
        }
        if ((_lbl = lbl) !== null && _lbl !== void 0 && _lbl.textContent) {
          var labelText = lbl.textContent.toLowerCase().replace(/ /g, '');
          out.push(labelText);
        }
      }
      return out;
    }
  }, {
    key: "_splitWords",
    value: function _splitWords(str) {
      return str.replace(/([a-z])([A-Z])/g, '$1 $2').split(/[^a-z0-9]+/i).filter(Boolean).map(function (s) {
        return s.toLowerCase();
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/categories/ContextCategoryService.js":
/*!*************************************************************************!*\
  !*** ./src/main/technicalServices/categories/ContextCategoryService.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ ContextCategoryService; }
/* harmony export */ });
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


var ContextCategoryService = /*#__PURE__*/function () {
  function ContextCategoryService(configurationRepository) {
    _classCallCheck(this, ContextCategoryService);
    this.onConfigUpdate(configurationRepository);
  }
  return _createClass(ContextCategoryService, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      this.enableAutoContextCategory = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableAutoContextCategory);
      var rawContextCategories = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.contextCategories);
      var contextCategories;
      try {
        contextCategories = typeof rawContextCategories === 'string' ? JSON.parse(rawContextCategories) : rawContextCategories;
      } catch (e) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('Failed to parse contextCategories JSON:', e);
        this.NORMALIZED_KEYWORDS = {};
        return;
      }
      if (_typeof(contextCategories) !== 'object' || contextCategories === null || Array.isArray(contextCategories)) {
        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].error('contextCategories must be an object:', contextCategories);
        this.NORMALIZED_KEYWORDS = {};
        return;
      }
      this.NORMALIZED_KEYWORDS = {};
      for (var _i = 0, _Object$entries = Object.entries(contextCategories); _i < _Object$entries.length; _i++) {
        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
          keyword = _Object$entries$_i[0],
          category = _Object$entries$_i[1];
        if (typeof category !== 'string') {
          _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__["default"].warn("Expected string for category of \"".concat(keyword, "\", got"), category);
          continue;
        }
        var normalizedKey = keyword.toLowerCase().trim();
        this.NORMALIZED_KEYWORDS[normalizedKey] = category;
      }
    }
  }, {
    key: "isVisible",
    value: function isVisible(el) {
      if (!el || el.nodeType !== Node.ELEMENT_NODE) return true;
      if (el.offsetParent === null && el.tagName !== 'BODY') return false;
      var style = window.getComputedStyle(el);
      return style.display !== 'none' && style.visibility !== 'hidden' && el.getAttribute('aria-hidden') !== 'true';
    }
  }, {
    key: "extractVisibleText",
    value: function extractVisibleText() {
      var root = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.body;
      var maxNodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;
      var maxDepth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;
      var textContent = '';
      var nodeCount = 0;
      var self = this;
      function traverseIterative(root) {
        var stack = [{
          node: root,
          depth: 0
        }];
        var _loop = function _loop() {
            var _stack$pop = stack.pop(),
              node = _stack$pop.node,
              depth = _stack$pop.depth;
            if (nodeCount >= maxNodes || depth > maxDepth) return 0; // continue
            if (node.nodeType === Node.TEXT_NODE) {
              var trimmed = node.textContent.trim();
              if (trimmed.length > 2) {
                textContent += trimmed + ' ';
              }
            }
            if (node.nodeType === Node.ELEMENT_NODE && !self.isVisible(node)) return 0; // continue
            nodeCount++;
            node.childNodes.forEach(function (child) {
              return stack.push({
                node: child,
                depth: depth + 1
              });
            });
            if (node.shadowRoot) {
              stack.push({
                node: node.shadowRoot,
                depth: depth + 1
              });
            }
          },
          _ret;
        while (stack.length > 0) {
          _ret = _loop();
          if (_ret === 0) continue;
        }
      }
      traverseIterative(root);
      return textContent.toLowerCase();
    }
  }, {
    key: "getMetaText",
    value: function getMetaText() {
      var _document$querySelect, _document$querySelect2;
      var title = document.title || '';
      var metaDescription = ((_document$querySelect = document.querySelector('meta[name="description"]')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.content) || '';
      var ogTitle = ((_document$querySelect2 = document.querySelector('meta[property="og:title"]')) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.content) || '';
      return "".concat(title, " ").concat(metaDescription, " ").concat(ogTitle).toLowerCase();
    }
  }, {
    key: "matchCategory",
    value: function matchCategory(text) {
      var normalizedText = text.toLowerCase();
      var scores = {};
      var matchedKeywords = {};
      for (var _i2 = 0, _Object$entries2 = Object.entries(this.NORMALIZED_KEYWORDS); _i2 < _Object$entries2.length; _i2++) {
        var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),
          keyword = _Object$entries2$_i[0],
          category = _Object$entries2$_i[1];
        if (normalizedText.includes(keyword)) {
          scores[category] = (scores[category] || 0) + 1;
          (matchedKeywords[category] || (matchedKeywords[category] = [])).push(keyword);
          if (scores[category] >= 3) break;
        }
      }
      var sortedScores = Object.entries(scores).sort(function (a, b) {
        return b[1] - a[1];
      });
      var topCategory = sortedScores.length > 0 ? sortedScores[0][0] : '0';
      return topCategory;
    }
  }, {
    key: "_getLocation",
    value: function _getLocation() {
      return window.location;
    }
  }, {
    key: "getCategory",
    value: function getCategory() {
      if (!this.enableAutoContextCategory) return '0';
      var urlText = this._getLocation().href.toLowerCase();
      var category = this.matchCategory(urlText);
      if (category === '0') {
        var metaText = this.getMetaText();
        category = this.matchCategory(metaText);
      }
      return category;
    }
  }]);
}();

;

/***/ }),

/***/ "./src/main/technicalServices/dev_collectors/DevDebugDataQ.js":
/*!********************************************************************!*\
  !*** ./src/main/technicalServices/dev_collectors/DevDebugDataQ.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DevDebugDataQ: function() { return /* binding */ DevDebugDataQ; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _collectorsV2_dto_CustomerMetadataObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../collectorsV2/dto/CustomerMetadataObject */ "./src/main/collectorsV2/dto/CustomerMetadataObject.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 *
 * A DataQ wrapper designed to seamlessly encapsulate `client_debug_info` static collectors.
 *
 * This class allows debug-level features to queue their data for deferred, aggregated reporting,
 * while still supporting production-level static fields that should be sent immediately.
 *
 * Aggregation ensures that multiple debug-level features can report together,
 * without flooding the queue. The aggregation is flushed once per WUP cycle,
 * as registered via `_onPreSendToWorker`.
 *
 * ### Usage for debug-level features:
 * 1. Use this wrapper in place of the regular DataQ.
 * 2. Ensure the feature is defined in the `debugInfoCollectionLevels` configuration as `"debug"`.
 * 3. When the feature collects data, it should call `addToQueue` with:
 *    - name: `"static_fields"`
 *    - data: `[featureName, ...dataValues]`
 *    - addCtxId: typically `false`
 *    - isImmediateWup: as appropriate
 *
 * ### To promote a feature from 'debug' to 'prod':
 * - Change its collection level in `debugInfoCollectionLevels` from `"debug"` to `"prod"`.
 * - Move the feature to use the regular DataQ directly.
 * - Remove it from the debug-level config list (`debugInfoCollectionLevels`) in codebase JSON.
 *
 *
 * ### Important Note:
 * - Each feature is also controlled by its own independent feature-enablement (kill-switch) configuration.
 *   - For example, even if a feature is defined as `"debug"` in `debugInfoCollectionLevels`,
 *     it will only collect data if its `enableXFeature` flag is also turned on.
 * - This class **only** acts on the result of collectors that already decided to run.
 *   It does not control whether features are enabled or not.
 */
var DevDebugDataQ = /*#__PURE__*/function () {
  function DevDebugDataQ(configurationRepository, dataQ) {
    _classCallCheck(this, DevDebugDataQ);
    this._configurationRepository = configurationRepository;
    this._dataQ = dataQ;
    this._aggregatedDebugInfoData = {};

    // Convenient states used for tracking if new data added to aggregatedDebugInfoData object since the last time DataQ was sent to server.
    // This prevents duplication of client_debug_info fields on the same wup.
    this._changeId = -1;
    this._flushId = -1;
    this._dataQ.registerOnPreSendToWorker(this._onPreSendToWorker.bind(this));
    // Inorder to send customer_metadata to the server (continuous debug events)
    // We need to match the expected Schema:
    // Therefore we are tracking a numeric - some-number-wtf
    // https://biocatch.atlassian.net/wiki/spaces/SER/pages/6483935261/SDK+Debug+fields+in+session+object
    this._someNumberWtf = -1;
    this.defaultCollectionLevels = {
      emuid: 'debug',
      // TODO: add here every new static_feature should be reported as client_debug_info field.
      drm: 'debug',
      cpu: 'debug',
      font_emoji_info: 'debug',
      font_math_info: 'debug',
      font_width_info: 'debug',
      navigator_pdfViewerEnabled: 'debug',
      navigator_webdriver: 'debug',
      navigator_userAgentData: 'debug',
      navigator_appVersion: 'debug',
      navigator_platform: 'debug',
      navigator_vendor: 'debug',
      navigator_productSub: 'debug',
      navigator_vendorSub: 'debug',
      navigator_onLine: 'debug',
      navigator_prototype: 'debug',
      heap: 'debug',
      audio_detect_feature2: 'debug',
      cpuTiming: 'debug',
      graphicTiming: 'debug',
      browserTiming: 'debug',
      fontTiming: 'debug',
      is_incognito: 'debug',
      browser_extensions_url: 'debug'
    };

    /**
     * A set static_fields features should never be promoted to production.
     * features appears on this list - will be considered as collectionLevel debug, regardless
     * any configuration specified at debugInfoCollectionLevels configuration.
     */
    this._fixedDebugFeatures = [
    /**
     * Once emuid will mature - it will replace entirely the existing muid.
     * muid used in several places besides static_field collection.
     * Therefore, Emuid cannot be promoted to production as standalone static field.
     */
    'emuid'];
  }
  return _createClass(DevDebugDataQ, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      var devDebugCollectionLevels = this._resolveDebugInfoCollectionLevels();
      var feature = data[0];
      if ((0,_collectorsV2_dto_CustomerMetadataObject__WEBPACK_IMPORTED_MODULE_1__.collectorExperimental)(feature)) {
        // We are investigate new mechanic of collection (using Propagation)
        // So if are we trying to send an event from experimental collector (right now all of them continuous)
        // We will send them to a debug field in the final json, called customer_metadata
        this._dataQ.addToQueue('customer_metadata', (0,_collectorsV2_dto_CustomerMetadataObject__WEBPACK_IMPORTED_MODULE_1__.dataToObject)(data, this._someNumberWtf++));
      } else {
        var collectionLevel = this._fixedDebugFeatures.includes(feature) ? 'debug' : devDebugCollectionLevels[feature];
        if (collectionLevel === 'debug') {
          // Aggregate debug data by feature
          this._aggregatedDebugInfoData[feature] = data[1]; // take the single value after feature name
          this._changeId++;
        } else if (collectionLevel === 'prod') {
          // Forward directly to the queue for production-level features
          this._dataQ.addToQueue(name, data, addCtxId, isImmediateWup);
        } else {
          // If collectionLevel is 'none' or unrecognized, the feature is ignored
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Received collectionLevel = ".concat(collectionLevel, " for ").concat(feature));
        }
      }
    }
  }, {
    key: "_onPreSendToWorker",
    value: function _onPreSendToWorker() {
      if (this._changeId === this._flushId) {
        // No change since last time client_debug_info sent to the DataQ.
        return;
      }

      // Don't add to queue and empty client_debug_info object when there is no data.
      if (Object.keys(this._aggregatedDebugInfoData).length === 0) return;
      this._appendAggregatedDebugInfoDataToQueue();
      this._flushId = this._changeId;
    }

    /**
     * Sends all aggregated `client_debug_info` fields to the queue at once.
     *
     * This is triggered before the DataQ flushes, but only if new debug fields were added.
     *
     * IMPORTANT:
     * - All aggregated data is kept in memory and re-sent in *every* future WUP where a new feature is added.
     * - This is required because the server-side logic *overwrites* existing static fields rather than merging them.
     * - Therefore, we must always send the full `client_debug_info` object (including previously-sent values)
     *   to preserve the complete state.
     *
     * It ensures that:
     * - A single 'client_debug_info' static_field entry is sent per WUP.
     * - Features are not sent partially (which would be lost on the server).
     */
  }, {
    key: "_appendAggregatedDebugInfoDataToQueue",
    value: function _appendAggregatedDebugInfoDataToQueue() {
      // Pass a clone, to prevent usage of the same instance list within the dataQ
      var aggregatedDataClone = JSON.parse(JSON.stringify(this._aggregatedDebugInfoData));
      this._dataQ.appendData('static_fields', ['client_debug_info', aggregatedDataClone]);
    }

    /**
     * Returns a debugInfoCollectionLevels json from remote configuration or local fallback.
     *
     * The result object will be in same structure as this.defaultCollectionLevels:
     * Each key is feature name,
     * Each value - 'prod' / 'debug' / 'none'
     *
     * For example:
     * {
     *   featureX: 'debug',
     *   featureY: 'none',
     *   featureZ : 'prod',
     * }
     */
  }, {
    key: "_resolveDebugInfoCollectionLevels",
    value: function _resolveDebugInfoCollectionLevels() {
      var remoteConfigValue = this._configurationRepository.get('debugInfoCollectionLevels');
      if (remoteConfigValue) {
        try {
          /**
           * The server returns the configuration as string, so it needs to be parsed to object.
           */
          return JSON.parse(remoteConfigValue);
        } catch (e) {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error('Invalid debugInfoCollectionLevels config, falling back to defaults', e);
          return this.defaultCollectionLevels;
        }
      } else {
        return this.defaultCollectionLevels;
      }
    }
  }]);
}();

/***/ }),

/***/ "./src/main/technicalServices/externalLoaders/wasmModuleLoader.js":
/*!************************************************************************!*\
  !*** ./src/main/technicalServices/externalLoaders/wasmModuleLoader.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ WasmModuleLoader; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Serves as a bridge between the WasmLoader module available in the window object scope and the SDK
 */
var WasmModuleLoader = /*#__PURE__*/function () {
  /**
   *
   * @param externalWASMModules
   */
  function WasmModuleLoader() {
    var externalWASMModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    _classCallCheck(this, WasmModuleLoader);
    this._wasmLoader = null;
    this._externalWASMModules = externalWASMModules;
    if (this._externalWASMModules.length > 0 && _typeof(window['WasmLoader']) === 'object') {
      this._wasmLoader = window['WasmLoader'];
    }
  }
  return _createClass(WasmModuleLoader, [{
    key: "isWasmLoaderAvailable",
    value: function isWasmLoaderAvailable() {
      if (this._wasmLoader && typeof this._wasmLoader['loadKotlinModule'] === 'function') {
        return true;
      }
      _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('WasmLoader is not available in the window scope or loadKotlinModule is not a function.');
      return false;
    }

    /**
     * Load an external Wasm module by its name.
     * @param name
     * @param callback
     * @returns {null}
     */
  }, {
    key: "loadExternalWASMModuleByName",
    value: function loadExternalWASMModuleByName() {
      var _this = this;
      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      if (!this._externalWASMModules || !Array.isArray(this._externalWASMModules)) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Attempted to get external Wasm module, but externalWASMModules is not an array.');
        return null;
      }
      var wasmModuleDesc = this._externalWASMModules.find(function (_ref) {
        var key = _ref.key;
        return key === name;
      });
      if (!wasmModuleDesc) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("No external Wasm module found with name \"".concat(name, "\"."));
        return null;
      }
      if (!this.isWasmLoaderAvailable()) {
        return null;
      }
      this._wasmLoader['loadKotlinModule'](wasmModuleDesc.url, wasmModuleDesc.key).then(function () {
        var wasmModule = _this.getLoadedWasmModule(wasmModuleDesc.key);
        if (wasmModule) {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Successfully loaded external Wasm module \"".concat(name, "\"."));
          if (typeof callback === 'function') {
            callback(wasmModule);
          }
        } else {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed to load external Wasm module \"".concat(name, "\"."));
          return null;
        }
      })["catch"](function (error) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Failed to load external Wasm module \"".concat(name, "\" from URL \"").concat(wasmModuleDesc.url, "\": ").concat(error.message));
        return null;
      });
    }

    /**
     * Obtain a loaded Wasm module by its name.
     * @param name
     * @returns {*}
     */
  }, {
    key: "getLoadedWasmModule",
    value: function getLoadedWasmModule() {
      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      if (!this._externalWASMModules.find(function (_ref2) {
        var key = _ref2.key;
        return key === name;
      })) {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Attempted to load a Wasm module with name \"".concat(name, "\", \n            but it is not available in externalWASMModules."));
        return null;
      }
      if (this._wasmLoader) {
        var wasmModule = this._wasmLoader.getModule(name);
        if (wasmModule && _typeof(wasmModule) === 'object' && _typeof(wasmModule['exports']) === 'object') {
          return wasmModule['exports'];
        }
      } else {
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Attempted to load a Wasm module, ' + 'but no WasmLoader is available in the window scope or externalWASMModules is empty.');
        return undefined;
      }
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/log/LogBridge.js":
/*!*****************************************************!*\
  !*** ./src/main/technicalServices/log/LogBridge.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ LogBridge; }
/* harmony export */ });
/* harmony import */ var _worker_LogAggregator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../worker/LogAggregator */ "./src/worker/LogAggregator.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

var LogBridge = /*#__PURE__*/function () {
  function LogBridge(logAggregator, url) {
    var msgPrefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    _classCallCheck(this, LogBridge);
    this.sn = 0;
    this.url = url;
    this.logAggregator = logAggregator;
    this.msgPrefix = msgPrefix;
  }
  return _createClass(LogBridge, [{
    key: "log",
    value: function log(msg, logLevel, sessionIdentifiers) {
      this.logAggregator.add({
        eventName: 'log',
        data: _objectSpread(_objectSpread({
          msg: this.msgPrefix + msg
        }, sessionIdentifiers), {}, {
          url: this.url,
          level: logLevel,
          sn: this.sn++
        })
      });
    }
  }, {
    key: "setLogLevel",
    value: function setLogLevel(logLevel) {
      if (this.logAggregator instanceof _worker_LogAggregator__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        this.logAggregator.setLogLevel(logLevel);
      }
    }
  }, {
    key: "clearLogEntriesByLogLevel",
    value: function clearLogEntriesByLogLevel(logLevel) {
      this.logAggregator.filterOutByLogLevel(logLevel);
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/log/LogDataQ.js":
/*!****************************************************!*\
  !*** ./src/main/technicalServices/log/LogDataQ.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ LogDataQ; }
/* harmony export */ });
/* harmony import */ var _DataQ__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DataQ */ "./src/main/technicalServices/DataQ.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }

var LogDataQ = /*#__PURE__*/function (_DataQ) {
  function LogDataQ() {
    _classCallCheck(this, LogDataQ);
    return _callSuper(this, LogDataQ, arguments);
  }
  _inherits(LogDataQ, _DataQ);
  return _createClass(LogDataQ, [{
    key: "add",
    value: function add(message) {
      this.addToQueue(message.eventName, message.data);
    }
  }, {
    key: "filterOutByLogLevel",
    value: function filterOutByLogLevel(logLevel) {
      this.filterOut(function (value) {
        return value.data.level >= logLevel;
      });
    }
  }]);
}(_DataQ__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/main/technicalServices/log/LogLevel.js":
/*!****************************************************!*\
  !*** ./src/main/technicalServices/log/LogLevel.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LogLevel: function() { return /* binding */ LogLevel; }
/* harmony export */ });
var LogLevel = {
  DEBUG: 10,
  INFO: 20,
  WARN: 30,
  ERROR: 40,
  CRITICAL: 50,
  OFF: 80
};

/***/ }),

/***/ "./src/main/technicalServices/log/Logger.js":
/*!**************************************************!*\
  !*** ./src/main/technicalServices/log/Logger.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Logger: function() { return /* binding */ Logger; },
/* harmony export */   "default": function() { return /* binding */ Log; }
/* harmony export */ });
/* harmony import */ var _LogLevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LogLevel */ "./src/main/technicalServices/log/LogLevel.js");
/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./src/main/core/configuration/ConfigurationFields.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// eslint-disable-next-line max-classes-per-file


var Log = /*#__PURE__*/function () {
  function Log() {
    _classCallCheck(this, Log);
  }
  return _createClass(Log, null, [{
    key: "setLogger",
    value: function setLogger(logger) {
      this._logger = logger;
    }
  }, {
    key: "attachSessionIdentifiers",
    value: function attachSessionIdentifiers(sessionIdentifiers) {
      if (!this._logger) {
        return;
      }
      return this._logger.attachSessionIdentifiers(sessionIdentifiers);
    }
  }, {
    key: "isDebug",
    value: function isDebug() {
      if (!this._logger) {
        return;
      }
      return this._logger.isDebug();
    }
  }, {
    key: "error",
    value: function error(msg, ex) {
      if (!this._logger) {
        return;
      }
      this._logger.error(msg, ex || null);
    }
  }, {
    key: "warn",
    value: function warn(msg, ex) {
      if (!this._logger) {
        return;
      }
      this._logger.warn(msg, ex || null);
    }
  }, {
    key: "trace",
    value: function trace(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.trace(msg);
    }
  }, {
    key: "debug",
    value: function debug(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.debug(msg);
    }
  }, {
    key: "info",
    value: function info(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.info(msg);
    }

    /**
     * Helper function to determine if we should log based on exponential pattern
     * Logs at attempts: 1, 2, 4, 8, 16, and the final attempt
     * @param {number} retryCount - Current retry count (1-based)
     * @param {number} maxRetries - Maximum retry count
     * @returns {boolean} - Whether to log this attempt
     */
  }, {
    key: "shouldLogRetry",
    value: function shouldLogRetry(retryCount, maxRetries) {
      // Always log first attempt and final attempt
      if (retryCount === 1 || retryCount >= maxRetries) {
        return true;
      }
      // Log if retry count is a power of 2 (2, 4, 8, 16, etc.)
      return retryCount > 0 && (retryCount & retryCount - 1) === 0;
    }

    /**
     * Log a warning message with smart retry logic (only logs at exponential intervals)
     * @param {string} msg - The message to log
     * @param {number} retryCount - Current retry count (1-based)
     * @param {number} maxRetries - Maximum retry count
     * @param {Error} [ex] - Optional exception
     */
  }, {
    key: "warnRetry",
    value: function warnRetry(msg, retryCount, maxRetries, ex) {
      if (this.shouldLogRetry(retryCount, maxRetries)) {
        this.warn(msg, ex);
      }
    }

    /**
     * Log an error message with smart retry logic (only logs at exponential intervals)
     * @param {string} msg - The message to log
     * @param {number} retryCount - Current retry count (1-based)
     * @param {number} maxRetries - Maximum retry count
     * @param {Error} [ex] - Optional exception
     */
  }, {
    key: "errorRetry",
    value: function errorRetry(msg, retryCount, maxRetries, ex) {
      if (this.shouldLogRetry(retryCount, maxRetries)) {
        this.error(msg, ex);
      }
    }

    /**
     * Log an info message with smart retry logic (only logs at exponential intervals)
     * @param {string} msg - The message to log
     * @param {number} retryCount - Current retry count (1-based)
     * @param {number} maxRetries - Maximum retry count
     */
  }, {
    key: "infoRetry",
    value: function infoRetry(msg, retryCount, maxRetries) {
      if (this.shouldLogRetry(retryCount, maxRetries)) {
        this.info(msg);
      }
    }
  }]);
}();

var Logger = /*#__PURE__*/function () {
  function Logger(logBridge, logLevel) {
    _classCallCheck(this, Logger);
    this._logBridge = logBridge;
    this._logLevel = logLevel || _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO;
    this._sessionIdentifiers = {};
  }
  return _createClass(Logger, [{
    key: "attachSessionIdentifiers",
    value: function attachSessionIdentifiers(sessionIdentifiers) {
      // add the provided identifiers to the existing ones.
      Object.assign(this._sessionIdentifiers, sessionIdentifiers);
    }
  }, {
    key: "trace",
    value: function trace(msg) {
      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG); // The server does not support trace
    }
  }, {
    key: "debug",
    value: function debug(msg) {
      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG);
    }
  }, {
    key: "info",
    value: function info(msg) {
      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO);
    }
  }, {
    key: "warn",
    value: function warn(msg, ex) {
      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.WARN, ex);
    }
  }, {
    key: "error",
    value: function error(msg, ex) {
      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.ERROR, ex);
    }
  }, {
    key: "isDebug",
    value: function isDebug() {
      return this._logLevel === _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG;
    }
  }, {
    key: "updateLogConfig",
    value: function updateLogConfig(configurationRepository) {
      this._logLevel = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logLevel) || this._logLevel;
      this._logBridge.setLogLevel(this._logLevel);
      this._logBridge.clearLogEntriesByLogLevel(this._logLevel);
    }
  }, {
    key: "_sendToLogBridge",
    value: function _sendToLogBridge(msg, logLevel, ex) {
      if (logLevel >= this._logLevel) {
        if (ex && ex.stack) {
          msg += " ;stack: ".concat(ex.stack);
        }
        this._logBridge.log(msg, logLevel, this._sessionIdentifiers);
      }
    }
  }]);
}();

/***/ }),

/***/ "./src/main/technicalServices/security/CryptoServiceAESGCM.js":
/*!********************************************************************!*\
  !*** ./src/main/technicalServices/security/CryptoServiceAESGCM.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CryptoServiceAESGCM; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _KeyStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./KeyStore */ "./src/main/technicalServices/security/KeyStore.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * CryptoServiceAESGCM is responsible for handling encryption and decryption
 * using the AES-GCM algorithm. It relies on KeyStore for secure key management.
 */
var CryptoServiceAESGCM = /*#__PURE__*/function () {
  /**
   * Constructs the CryptoServiceAESGCM instance with KeyStore.
   *
   * @param {KeyStore} keyStore - An instance of KeyStore for managing cryptographic keys.
   */
  function CryptoServiceAESGCM(encryptionKeyName) {
    var keyStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, CryptoServiceAESGCM);
    if (!encryptionKeyName) {
      throw new Error("encryptionKeyName is required.");
    }
    this.encryptionKeyName = encryptionKeyName; // Default key identifier

    this.keyStore = keyStore !== null && keyStore !== void 0 ? keyStore : new _KeyStore__WEBPACK_IMPORTED_MODULE_1__["default"]();
    this.isInitialized = false; // Track initialization state
  }

  /**
   * Initializes the KeyStore instance.
   *
   * @returns {Promise<void>} Resolves when the KeyStore is successfully initialized.
   */
  return _createClass(CryptoServiceAESGCM, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this.isInitialized) {
                _context.next = 4;
                break;
              }
              _context.next = 3;
              return this.keyStore.init();
            case 3:
              this.isInitialized = true;
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Encrypts the provided data using AES-GCM encryption.
     *
     * @param {string} data - The plaintext data to encrypt.
     * @returns {Promise<{ encryptedData: number[], iv: number[] }>} An object containing the encrypted data and the initialization vector (IV).
     * @throws {Error} If encryption fails.
     */
    )
  }, {
    key: "encrypt",
    value: (function () {
      var _encrypt = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data) {
        var key, iv, encodedData, encryptedBuffer, encryptedData;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.init();
            case 2:
              _context2.prev = 2;
              _context2.next = 5;
              return this.keyStore.getKey(this.encryptionKeyName);
            case 5:
              key = _context2.sent;
              // Generate a random 12-byte IV for AES-GCM (recommended size)
              iv = window.crypto.getRandomValues(new Uint8Array(12)); // Encode the plaintext data as UTF-8
              encodedData = new TextEncoder().encode(data); // Perform the encryption
              _context2.next = 10;
              return window.crypto.subtle.encrypt({
                name: "AES-GCM",
                iv: iv
              }, key, encodedData);
            case 10:
              encryptedBuffer = _context2.sent;
              // Convert ArrayBuffer to Uint8Array for easier handling
              encryptedData = new Uint8Array(encryptedBuffer);
              return _context2.abrupt("return", {
                encryptedData: Array.from(encryptedData),
                iv: Array.from(iv)
              });
            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](2);
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Encryption failed:", _context2.t0);
              throw new Error("Encryption error occurred.");
            case 19:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[2, 15]]);
      }));
      function encrypt(_x) {
        return _encrypt.apply(this, arguments);
      }
      return encrypt;
    }()
    /**
     * Decrypts the provided encrypted data using AES-GCM decryption.
     *
     * @param {number[]} encryptedDataArray - The encrypted data as an array of numbers.
     * @param {number[]} ivArray - The initialization vector (IV) as an array of numbers.
     * @returns {Promise<string>} The decrypted plaintext data.
     * @throws {Error} If decryption fails.
     */
    )
  }, {
    key: "decrypt",
    value: (function () {
      var _decrypt = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(encryptedDataArray, ivArray) {
        var key, encryptedData, iv, decryptedBuffer, decryptedData;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.init();
            case 2:
              _context3.prev = 2;
              _context3.next = 5;
              return this.keyStore.getKey(this.encryptionKeyName);
            case 5:
              key = _context3.sent;
              // Convert arrays back to Uint8Array
              encryptedData = new Uint8Array(encryptedDataArray).buffer;
              iv = new Uint8Array(ivArray); // Perform the decryption
              _context3.next = 10;
              return window.crypto.subtle.decrypt({
                name: "AES-GCM",
                iv: iv
              }, key, encryptedData);
            case 10:
              decryptedBuffer = _context3.sent;
              // Decode the decrypted data from UTF-8
              decryptedData = new TextDecoder().decode(decryptedBuffer);
              return _context3.abrupt("return", decryptedData);
            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](2);
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Decryption failed:", _context3.t0);
              throw new Error("Decryption error occurred.");
            case 19:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[2, 15]]);
      }));
      function decrypt(_x2, _x3) {
        return _decrypt.apply(this, arguments);
      }
      return decrypt;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/security/KeyStore.js":
/*!*********************************************************!*\
  !*** ./src/main/technicalServices/security/KeyStore.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ KeyStore; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _storage_IndexedDBStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../storage/IndexedDBStorage */ "./src/main/technicalServices/storage/IndexedDBStorage.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * KeyStore manages cryptographic keys securely using IndexedDB.
 * This class provides methods to retrieve and delete cryptographic keys, with private utilities for key management.
 */
var KeyStore = /*#__PURE__*/function () {
  /**
   * Constructs the KeyStore instance with IndexedDBStorage as a dependency.
   *
   * @param {IndexedDBStorage} indexedDBStorage - An instance of IndexedDBStorage.
   */
  function KeyStore(indexedDBStorage) {
    _classCallCheck(this, KeyStore);
    this.storage = indexedDBStorage !== null && indexedDBStorage !== void 0 ? indexedDBStorage : new _storage_IndexedDBStorage__WEBPACK_IMPORTED_MODULE_1__["default"]({
      storeName: "keystore"
    });
  }

  /**
   * Initializes the IndexedDBStorage instance.
   *
   * @returns {Promise<void>} Resolves when the storage is successfully initialized.
   */
  return _createClass(KeyStore, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.storage.init();
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Retrieves a cryptographic key from the IndexedDB. If the key is not found, it generates a new key, saves it, and returns it.
     *
     * IndexedDB is a browser-managed, secure storage mechanism. By design, it ensures that data stored in it is isolated to the origin
     * and accessible only to scripts from the same domain. This provides a secure environment for storing cryptographic keys.
     * 
     * IndexedDB also supports the Web Crypto API's `CryptoKey` objects. This allows the keys to remain non-exportable, meaning they
     * cannot be extracted from the browser's secure environment. Instead, the keys are securely handled by the Web Crypto API
     * within the browser's context, ensuring confidentiality and mitigating the risk of unauthorized access. For more details, see
     * the [MDN documentation on CryptoKey](https://developer.mozilla.org/en-US/docs/Web/API/CryptoKey).
     * 
     * See the [MDN documentation on IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API).
     *
     * @param {string} keyId - The unique identifier for the key.
     * @returns {Promise<CryptoKey>} Resolves with the CryptoKey.
     */
    )
  }, {
    key: "getKey",
    value: (function () {
      var _getKey = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(keyId) {
        var record, newKey;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return this.storage.getRecord(keyId);
            case 3:
              record = _context2.sent;
              if (record) {
                _context2.next = 11;
                break;
              }
              _context2.next = 7;
              return this._generateKey();
            case 7:
              newKey = _context2.sent;
              _context2.next = 10;
              return this._saveKey(keyId, newKey);
            case 10:
              return _context2.abrupt("return", newKey);
            case 11:
              return _context2.abrupt("return", record);
            case 14:
              _context2.prev = 14;
              _context2.t0 = _context2["catch"](0);
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to import key:", _context2.t0);
              throw new Error("Key retrieval failed.");
            case 18:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[0, 14]]);
      }));
      function getKey(_x) {
        return _getKey.apply(this, arguments);
      }
      return getKey;
    }()
    /**
     * Deletes a cryptographic key from the IndexedDB.
     *
     * @param {string} keyId - The unique identifier for the key.
     * @returns {Promise<void>} Resolves when the key is successfully deleted.
     */
    )
  }, {
    key: "deleteKey",
    value: (function () {
      var _deleteKey = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(keyId) {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.storage.deleteRecord(keyId);
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function deleteKey(_x2) {
        return _deleteKey.apply(this, arguments);
      }
      return deleteKey;
    }()
    /**
     * Generates a new AES-GCM encryption key and stores it in the instance.
     * This method ensures that a secure, random key is used for encryption.
     *
     * Setting `exportable` to `false` ensures that the key cannot be extracted
     * or exported from the Web Crypto API. This prevents unauthorized access
     * to the raw key material, even if an attacker gains access to the IndexedDB
     * storage or the application's code. By making the key non-exportable, the
     * encryption key remains secure and can only be used within the context of
     * the browser's cryptographic environment.
     *
     * @private
     * @returns {Promise<CryptoKey>} The generated cryptographic key.
     * @throws {Error} If key generation fails.
     */
    )
  }, {
    key: "_generateKey",
    value: (function () {
      var _generateKey2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _context4.next = 3;
              return window.crypto.subtle.generateKey({
                name: "AES-GCM",
                length: 256 // 256-bit key for strong encryption
              }, false,
              // Non-exportable for added security
              ["encrypt", "decrypt"]);
            case 3:
              return _context4.abrupt("return", _context4.sent);
            case 6:
              _context4.prev = 6;
              _context4.t0 = _context4["catch"](0);
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to generate key:", _context4.t0);
              throw new Error("Key generation failed.");
            case 10:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[0, 6]]);
      }));
      function _generateKey() {
        return _generateKey2.apply(this, arguments);
      }
      return _generateKey;
    }()
    /**
     * Saves a cryptographic cryptoKey in the IndexedDB.
     *
     * @private
     * @param {string} keyId - The unique identifier for the key.
     * @param {CryptoKey} cryptoKey - The cryptographic key to store.
     * @returns {Promise<void>} Resolves when the key is successfully saved.
     */
    )
  }, {
    key: "_saveKey",
    value: (function () {
      var _saveKey2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(keyId, cryptoKey) {
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              _context5.next = 3;
              return this.storage.addRecord(keyId, cryptoKey);
            case 3:
              _context5.next = 9;
              break;
            case 5:
              _context5.prev = 5;
              _context5.t0 = _context5["catch"](0);
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Failed to save key:", _context5.t0);
              throw new Error("Key saving failed.");
            case 9:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 5]]);
      }));
      function _saveKey(_x3, _x4) {
        return _saveKey2.apply(this, arguments);
      }
      return _saveKey;
    }()
    /**
     * Clears all keys from the IndexedDB.
     *
     * @private
     * @returns {Promise<void>} Resolves when all keys are successfully cleared.
     */
    )
  }, {
    key: "_clearKeys",
    value: (function () {
      var _clearKeys2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.storage.clearStore();
            case 2:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function _clearKeys() {
        return _clearKeys2.apply(this, arguments);
      }
      return _clearKeys;
    }()
    /**
     * Releases the IndexedDBStorage resources by closing the connection.
     */
    )
  }, {
    key: "release",
    value: function release() {
      this.storage.release();
    }
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/storage/EncryptedIndexedDBStorage.js":
/*!*************************************************************************!*\
  !*** ./src/main/technicalServices/storage/EncryptedIndexedDBStorage.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ EncryptedIndexedDBStorage; }
/* harmony export */ });
/* harmony import */ var _IndexedDBStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./IndexedDBStorage */ "./src/main/technicalServices/storage/IndexedDBStorage.js");
/* harmony import */ var _security_CryptoServiceAESGCM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../security/CryptoServiceAESGCM */ "./src/main/technicalServices/security/CryptoServiceAESGCM.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



/**
 * EncryptedIndexedDBStorage handles encrypted storage and retrieval of data in IndexedDB.
 * It uses IndexedDBStorage for database operations and CryptoService for encryption/decryption.
 */
var EncryptedIndexedDBStorage = /*#__PURE__*/function () {
  /**
   * Constructs the EncryptedIndexedDBStorage instance.
   *
   * @param {Object} config - Configuration for IndexedDBStorage.
   * @param {string} config.storeName - The store name for IndexedDBStorage.
   * @param {string} config.primaryKey - The primary key for the IndexedDBStorage.
   * @param {number} config.version - The version of the IndexedDB database.
   * @param {AESGCM_CryptoService} cryptoService - An instance of CryptoService for encryption/decryption operations.
   */
  function EncryptedIndexedDBStorage(_ref) {
    var storeName = _ref.storeName;
    var cryptoService = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, EncryptedIndexedDBStorage);
    this.indexedDBStorage = new _IndexedDBStorage__WEBPACK_IMPORTED_MODULE_0__["default"]({
      storeName: storeName
    });
    this.cryptoService = cryptoService !== null && cryptoService !== void 0 ? cryptoService : new _security_CryptoServiceAESGCM__WEBPACK_IMPORTED_MODULE_1__["default"](storeName);
    this.initialized = false;
  }

  /**
   * Initializes the IndexedDB storage and ensures the encryption key exists.
   *
   * @returns {Promise<void>}
   */
  return _createClass(EncryptedIndexedDBStorage, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.initialized) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              _context.next = 4;
              return this.indexedDBStorage.init();
            case 4:
              _context.next = 6;
              return this.cryptoService.init();
            case 6:
              this.initialized = true;
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Releases database resources.
     */
    )
  }, {
    key: "release",
    value: function release() {
      this.indexedDBStorage.release();
      this.encryptionKeyStorage.release();
      this.initialized = false;
    }

    /**
     * Adds a record to the database after encrypting it.
     *
     * @param {string} key - The key to associate with the record.
     * @param {Object} value - The record to be encrypted and stored.
     * @returns {Promise<string>} A success message upon successful encryption and storage.
     */
  }, {
    key: "addRecord",
    value: (function () {
      var _addRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(key, value) {
        var encryptedValue;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.init();
            case 2:
              _context2.next = 4;
              return this._encryptRecord(value);
            case 4:
              encryptedValue = _context2.sent;
              return _context2.abrupt("return", this.indexedDBStorage.addRecord(key, encryptedValue));
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function addRecord(_x, _x2) {
        return _addRecord.apply(this, arguments);
      }
      return addRecord;
    }()
    /**
     * Retrieves a record from the database and decrypts it.
     *
     * @param {string} key - The key of the record to retrieve.
     * @returns {Promise<Object|null>} The decrypted record, or null if not found.
     */
    )
  }, {
    key: "getRecord",
    value: (function () {
      var _getRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(key) {
        var encryptedValue;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.init();
            case 2:
              _context3.next = 4;
              return this.indexedDBStorage.getRecord(key);
            case 4:
              encryptedValue = _context3.sent;
              if (encryptedValue) {
                _context3.next = 7;
                break;
              }
              return _context3.abrupt("return", null);
            case 7:
              return _context3.abrupt("return", this._decryptRecord(encryptedValue));
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getRecord(_x3) {
        return _getRecord.apply(this, arguments);
      }
      return getRecord;
    }()
    /**
     * Updates a record in the database after encrypting it.
     *
     * @param {string} key - The key of the record to update.
     * @param {Object} value - The record to be encrypted and updated.
     * @returns {Promise<string>} A success message upon successful encryption and update.
     */
    )
  }, {
    key: "updateRecord",
    value: (function () {
      var _updateRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(key, value) {
        var encryptedValue;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return this.init();
            case 2:
              _context4.next = 4;
              return this._encryptRecord(value);
            case 4:
              encryptedValue = _context4.sent;
              return _context4.abrupt("return", this.indexedDBStorage.updateRecord(key, encryptedValue));
            case 6:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function updateRecord(_x4, _x5) {
        return _updateRecord.apply(this, arguments);
      }
      return updateRecord;
    }()
    /**
     * Deletes a record from the database.
     *
     * @param {string} key - The key of the record to delete.
     * @returns {Promise<string>} A success message upon successful deletion.
     */
    )
  }, {
    key: "deleteRecord",
    value: (function () {
      var _deleteRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(key) {
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return this.init();
            case 2:
              return _context5.abrupt("return", this.indexedDBStorage.deleteRecord(key));
            case 3:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function deleteRecord(_x6) {
        return _deleteRecord.apply(this, arguments);
      }
      return deleteRecord;
    }()
    /**
     * Retrieves all records from the database and decrypts them.
     *
     * @returns {Promise<Object[]>} An array of decrypted records.
     */
    )
  }, {
    key: "getAllRecords",
    value: (function () {
      var _getAllRecords = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var _this = this;
        var encryptedRecords;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.init();
            case 2:
              _context6.next = 4;
              return this.indexedDBStorage.getAllRecords();
            case 4:
              encryptedRecords = _context6.sent;
              return _context6.abrupt("return", Promise.all(encryptedRecords.map(function (record) {
                return _this._decryptRecord(record);
              })));
            case 6:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getAllRecords() {
        return _getAllRecords.apply(this, arguments);
      }
      return getAllRecords;
    }()
    /**
     * Clears all records from the database.
     *
     * @returns {Promise<string>} A success message upon successful clearance.
     */
    )
  }, {
    key: "clearStore",
    value: (function () {
      var _clearStore = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return this.init();
            case 2:
              return _context7.abrupt("return", this.indexedDBStorage.clearStore());
            case 3:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function clearStore() {
        return _clearStore.apply(this, arguments);
      }
      return clearStore;
    }()
    /**
     * Encrypts a record using the CryptoService.
     *
     * @private
     * @param {Object} record - The record to be encrypted.
     * @returns {Promise<Object>} The encrypted record.
     */
    )
  }, {
    key: "_encryptRecord",
    value: (function () {
      var _encryptRecord2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(record) {
        var _yield$this$cryptoSer, encryptedData, iv;
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              _context8.next = 2;
              return this.cryptoService.encrypt(JSON.stringify(record));
            case 2:
              _yield$this$cryptoSer = _context8.sent;
              encryptedData = _yield$this$cryptoSer.encryptedData;
              iv = _yield$this$cryptoSer.iv;
              return _context8.abrupt("return", {
                encryptedData: encryptedData,
                iv: iv
              });
            case 6:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function _encryptRecord(_x7) {
        return _encryptRecord2.apply(this, arguments);
      }
      return _encryptRecord;
    }()
    /**
     * Decrypts a record using the CryptoService.
     *
     * @private
     * @param {Object} encryptedRecord - The record to be decrypted.
     * @returns {Promise<Object>} The decrypted record.
     */
    )
  }, {
    key: "_decryptRecord",
    value: (function () {
      var _decryptRecord2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(encryptedRecord) {
        var encryptedData, iv, decryptedData;
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              encryptedData = encryptedRecord.encryptedData, iv = encryptedRecord.iv;
              _context9.next = 3;
              return this.cryptoService.decrypt(encryptedData, iv);
            case 3:
              decryptedData = _context9.sent;
              return _context9.abrupt("return", JSON.parse(decryptedData));
            case 5:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function _decryptRecord(_x8) {
        return _decryptRecord2.apply(this, arguments);
      }
      return _decryptRecord;
    }())
  }]);
}();


/***/ }),

/***/ "./src/main/technicalServices/storage/IndexedDBStorage.js":
/*!****************************************************************!*\
  !*** ./src/main/technicalServices/storage/IndexedDBStorage.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ IndexedDBStorage; }
/* harmony export */ });
/* harmony import */ var _log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../log/Logger */ "./src/main/technicalServices/log/Logger.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


/**
 * Singleton IndexedDBStorage with centralized schema management and fixed database name.
 */
var IndexedDBStorage = /*#__PURE__*/function () {
  function IndexedDBStorage(_ref) {
    var storeName = _ref.storeName;
    _classCallCheck(this, IndexedDBStorage);
    if (!storeName) {
      throw new Error("Store name must be provided.");
    }
    if (IndexedDBStorage.instances.has(storeName)) {
      return IndexedDBStorage.instances.get(storeName);
    }
    if (!IndexedDBStorage.DB_CONFIG.STORE_SCHEMAS[storeName]) {
      throw new Error("Store \"".concat(storeName, "\" is not defined in the schema."));
    }
    this.storeName = storeName;
    this.db = null;
    this.initialized = false;
    IndexedDBStorage.instances.set(storeName, this);
  }

  /**
   * Initializes the database and ensures schema consistency.
   *
   * @returns {Promise<void>} Resolves when the database is initialized.
   */
  return _createClass(IndexedDBStorage, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.initialized) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              _context.next = 4;
              return this._openDB();
            case 4:
              this.db = _context.sent;
              this.initialized = true;
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Opens the database and manages schema creation/updates.
     *
     * @private
     * @returns {Promise<IDBDatabase>} Resolves with the database instance.
     */
    )
  }, {
    key: "_openDB",
    value: function _openDB() {
      return new Promise(function (resolve, reject) {
        var request = indexedDB.open(IndexedDBStorage.DB_CONFIG.NAME, IndexedDBStorage.DB_CONFIG.VERSION);
        request.onupgradeneeded = function (event) {
          var db = event.target.result;
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Database upgrade: Version ".concat(event.oldVersion, " -> ").concat(event.newVersion));

          // Create or update object stores
          for (var _i = 0, _Object$entries = Object.entries(IndexedDBStorage.DB_CONFIG.STORE_SCHEMAS); _i < _Object$entries.length; _i++) {
            var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 1),
              storeName = _Object$entries$_i[0];
            if (!db.objectStoreNames.contains(storeName)) {
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Creating object store: ".concat(storeName));
              db.createObjectStore(storeName);
            } else {
              _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Object store exists: ".concat(storeName));
            }
          }
        };
        request.onsuccess = function (event) {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\" opened successfully."));
          resolve(event.target.result);
        };
        request.onerror = function (event) {
          _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("Error opening database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\":"), event.target.error);
          reject(event.target.error);
        };
      });
    }

    /**
     * Opens a transaction and accesses the specified object store.
     *
     * @param {string} mode - The transaction mode, e.g., "readwrite" or "readonly".
     * @returns {IDBObjectStore} The object store instance.
     */
  }, {
    key: "_openObjectStore",
    value: function _openObjectStore(mode) {
      if (!this.db) {
        throw new Error("Database is not initialized. Call init() first.");
      }
      var transaction = this.db.transaction([this.storeName], mode);
      return transaction.objectStore(this.storeName);
    }

    /**
     * Adds a record to the specified object store.
     *
     * @param {Object} record - The record to add.
     * @returns {Promise<string>} Resolves when the record is added.
     */
  }, {
    key: "addRecord",
    value: (function () {
      var _addRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(key, value) {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.init();
            case 2:
              return _context2.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this._openObjectStore("readwrite");
                var request = store.put(value, key);
                request.onsuccess = function () {
                  return resolve("Record added successfully.");
                };
                request.onerror = function (event) {
                  return reject("Add record error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function addRecord(_x, _x2) {
        return _addRecord.apply(this, arguments);
      }
      return addRecord;
    }()
    /**
     * Retrieves a record from the specified object store.
     *
     * @param {string|number} key - The key of the record to retrieve.
     * @returns {Promise<Object|null>} Resolves with the retrieved record or null if not found.
     */
    )
  }, {
    key: "getRecord",
    value: (function () {
      var _getRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(key) {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.init();
            case 2:
              return _context3.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this2._openObjectStore("readonly");
                var request = store.get(key);
                request.onsuccess = function (event) {
                  return resolve(event.target.result || null);
                };
                request.onerror = function (event) {
                  return reject("Get record error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getRecord(_x3) {
        return _getRecord.apply(this, arguments);
      }
      return getRecord;
    }()
    /**
     * Updates a record in the specified object store.
     *
     * @param {Object} record - The record to update.
     * @returns {Promise<string>} Resolves when the record is updated.
     */
    )
  }, {
    key: "updateRecord",
    value: (function () {
      var _updateRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(key, value) {
        var _this3 = this;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return this.init();
            case 2:
              return _context4.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this3._openObjectStore("readwrite");
                var request = store.put(value, key);
                request.onsuccess = function () {
                  return resolve("Record updated successfully.");
                };
                request.onerror = function (event) {
                  return reject("Update record error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function updateRecord(_x4, _x5) {
        return _updateRecord.apply(this, arguments);
      }
      return updateRecord;
    }()
    /**
     * Deletes a record from the specified object store.
     *
     * @param {string|number} key - The key of the record to delete.
     * @returns {Promise<string>} Resolves when the record is deleted.
     */
    )
  }, {
    key: "deleteRecord",
    value: (function () {
      var _deleteRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(key) {
        var _this4 = this;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return this.init();
            case 2:
              return _context5.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this4._openObjectStore("readwrite");
                var request = store["delete"](key);
                request.onsuccess = function () {
                  return resolve("Record deleted successfully.");
                };
                request.onerror = function (event) {
                  return reject("Delete record error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function deleteRecord(_x6) {
        return _deleteRecord.apply(this, arguments);
      }
      return deleteRecord;
    }()
    /**
     * Retrieves all records from the specified object store.
     *
     * @returns {Promise<Object[]>} Resolves with an array of all records.
     */
    )
  }, {
    key: "getAllRecords",
    value: (function () {
      var _getAllRecords = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var _this5 = this;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.init();
            case 2:
              return _context6.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this5._openObjectStore("readonly");
                var request = store.getAll();
                request.onsuccess = function (event) {
                  return resolve(event.target.result);
                };
                request.onerror = function (event) {
                  return reject("Get all records error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getAllRecords() {
        return _getAllRecords.apply(this, arguments);
      }
      return getAllRecords;
    }()
    /**
     * Clears all records from the specified object store.
     *
     * @returns {Promise<string>} Resolves when all records are cleared.
     */
    )
  }, {
    key: "clearStore",
    value: (function () {
      var _clearStore = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var _this6 = this;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return this.init();
            case 2:
              return _context7.abrupt("return", new Promise(function (resolve, reject) {
                var store = _this6._openObjectStore("readwrite");
                var request = store.clear();
                request.onsuccess = function () {
                  return resolve("All records cleared successfully.");
                };
                request.onerror = function (event) {
                  return reject("Clear store error: ".concat(event.target.error));
                };
              }));
            case 3:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function clearStore() {
        return _clearStore.apply(this, arguments);
      }
      return clearStore;
    }()
    /**
     * Releases the database connection.
     */
    )
  }, {
    key: "release",
    value: function release() {
      if (this.db) {
        this.db.close();
        this.db = null;
        this.initialized = false;
        IndexedDBStorage.instances["delete"](this.storeName);
        _log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].debug("Database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\" connection for store \"").concat(this.storeName, "\" closed."));
      }
    }
  }]);
}();
// Singleton instance per store
_defineProperty(IndexedDBStorage, "instances", new Map());
// Unified database configuration
_defineProperty(IndexedDBStorage, "DB_CONFIG", {
  NAME: "bio",
  VERSION: 1,
  STORE_SCHEMAS: {
    emuid: {},
    keystore: {}
  }
});


/***/ }),

/***/ "./src/slave/MasterSlaveMessage.js":
/*!*****************************************!*\
  !*** ./src/slave/MasterSlaveMessage.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MasterSlaveMessage: function() { return /* binding */ MasterSlaveMessage; }
/* harmony export */ });
var MasterSlaveMessage = {
  dataFromSlave: 'dataFromSlave',
  registerSlave: 'registerSlave',
  setupPort: 'setupPort',
  logPerfSlave: 'logPerfSlave',
  updateSlaveConf: 'updateSlaveConf',
  updateSlaveState: 'updateSlaveState',
  updateMasterContext: 'updateMasterContext',
  resetSessionTriggerFromSlave: 'resetSessionTriggerFromSlave',
  mouseChallengeTriggerFromSlave: 'mouseChallengeTriggerFromSlave',
  onBeforeUnload: 'onbeforeunload',
  slaveHandShake: 'SlaveHandShake',
  cdHandShake: 'CDHandShake',
  slaveAlive: 'slaveAlive',
  iosHandshake: 'iosHandshake',
  channelMessageIdAck: 'channelMessageIdAck',
  startMessagingIntervalToChannel: 'startMessagingIntervalToChannel',
  isChannelSupportsAckMessageLogic: "isChannelSupportsAckMessageLogic"
};

/***/ }),

/***/ "./src/worker/LogAggregator.js":
/*!*************************************!*\
  !*** ./src/worker/LogAggregator.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ LogAggregator; }
/* harmony export */ });
/* harmony import */ var _main_technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/technicalServices/log/LogLevel */ "./src/main/technicalServices/log/LogLevel.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/*
Aggregates log messages
 */

var LogAggregator = /*#__PURE__*/function () {
  function LogAggregator() {
    _classCallCheck(this, LogAggregator);
    this.reset();
  }
  return _createClass(LogAggregator, [{
    key: "setLogLevel",
    value: function setLogLevel(logLevel) {
      this._logLevel = logLevel;
    }
  }, {
    key: "add",
    value: function add(message) {
      var messageData = message.data;
      if (!messageData) {
        throw new Error('Unable to add log message. Missing data field');
      }

      //We add message to log if:
      // 1. messsage has no level (performance ("perf") events that are posted to worker for logging)
      // 2. logLevel of the message >= the level of the log
      if (!messageData.level || messageData.level >= this._logLevel) {
        this._Q.push(messageData);
      }
    }

    /**
     * Takes current data from the aggregator and removes it from the aggregator.
     * Aggregator is reset to initial empty state
     * @returns {Array}
     */
  }, {
    key: "take",
    value: function take() {
      var currentQ = this._Q;
      this.reset();
      return currentQ;
    }
  }, {
    key: "reset",
    value: function reset() {
      this._Q = [];
      this.setLogLevel(typeof this._logLevel === "undefined" ? _main_technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO : this._logLevel);
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this._Q.length === 0;
    }
  }, {
    key: "filterOutByLogLevel",
    value: function filterOutByLogLevel(logLevel) {
      this._Q = this._Q.filter(
      // eslint-disable-next-line no-unused-vars
      function (value, index, arr) {
        return value.level >= logLevel;
      });
    }
  }]);
}();


/***/ }),

/***/ "./src/worker/communication/ConfigurationDefaultValues.js":
/*!****************************************************************!*\
  !*** ./src/worker/communication/ConfigurationDefaultValues.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConfigurationDefaultValues: function() { return /* binding */ ConfigurationDefaultValues; }
/* harmony export */ });
var ConfigurationDefaultValues = {
  DEFAULT_RETRY_NUM: 5,
  //Retry 5 times before giving up
  MIN_RETRY_NUM: 1,
  //Retry once
  MAX_RETRY_NUM: 1000,
  //Retry 1000 times before giving up

  DEFAULT_RETRY_INTERVAL: 1000,
  //1 second
  MIN_RETRY_INTERVAL: 100,
  //100 milliseconds
  MAX_RETRY_INTERVAL: 10000,
  //10 seconds

  DEFAULT_GROWTH_PER_FAILURE: 3500,
  //milliseconds
  MIN_GROWTH_PER_FAILURE: 0,
  //Start the growing interval from 0 milliseconds
  MAX_GROWTH_PER_FAILURE: 10000,
  //Increase each interval by 10 seconds

  DEFAULT_INTERVAL_LIMIT: 16000,
  //Don't increase retries for more than 16 seconds
  MIN_INTERVAL_LIMIT: 100,
  //Don't increase retries for more than 100 milliseconds
  MAX_INTERVAL_LIMIT: 300000,
  //Don't increase retries for more than 5 minutes

  MAX_REQUEST_DELAY: 6000,
  MAX_CSID_RETRY_COUNT: 20,
  // Maximum number of retries for CSID and cdApi operations

  DEFAULT_CDS_NUM_EXPIRATION_TIME: 60,
  // 60 minutes
  MIN_CDS_NUM_EXPIRATION_TIME: 1,
  // 1 minutes
  MAX_CDS_NUM_EXPIRATION_TIME: 44640,
  // 44640 minutes = 1 month

  VALUE_DID_NOT_EXIST: 1,
  SUCCESS_IN_CHANGED_EXPIRATION: 0,
  FAILURE_IN_CHANGED_EXPIRATION: -1
};

/***/ }),

/***/ "./src/worker/fonts/detector/CanvasFontDetector.js":
/*!*********************************************************!*\
  !*** ./src/worker/fonts/detector/CanvasFontDetector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ CanvasFontDetector; }
/* harmony export */ });
/* harmony import */ var _FontDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FontDetector */ "./src/worker/fonts/detector/FontDetector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


/**
 * CanvasFontDetector
 * Detects font availability using the canvas text measurement technique.
 * 
 * IMPORTANT: This class is designed to run ONLY in Web Workers.
 * It uses OffscreenCanvas which is the only canvas API available in Web Workers.
 * Do not use this class in the main thread as it will not work properly.
 *
 * BROWSER COMPATIBILITY NOTE:
 * OffscreenCanvas support in Web Workers:
 * - Chrome 69+: Full support
 * - Firefox 105+: Limited support
 * - Safari 17.0+: Initial support (limited)
 * - Safari 17.4+: Stable support
 * - Edge 79+: Full support
 *
 * This detector requires OffscreenCanvas support to function properly.
 */
var CanvasFontDetector = /*#__PURE__*/function (_FontDetector) {
  function CanvasFontDetector() {
    var _this;
    _classCallCheck(this, CanvasFontDetector);
    _this = _callSuper(this, CanvasFontDetector);
    _this._testText = "AaBb123!@#            "; // Sample text for measurement
    _this._fontSize = "48px"; // Font size for measurements
    _this._canvas = null; // Reusable canvas element
    _this._context = null; // Cached 2D context
    _this._fallbackWidth = null; // Cached fallback width for performance
    _this._initialized = false; // Track initialization state
    _this._hasReleased = false; // Track release state
    return _this;
  }

  /**
   * Detects the availability of a specified font.
   * Compares the width of the font's rendering against a fallback font.
   * 
   * @param {string} fontName - The name of the font to check.
   * @returns {Promise<boolean>} Resolves to `true` if the font is available, `false` otherwise.
   */
  _inherits(CanvasFontDetector, _FontDetector);
  return _createClass(CanvasFontDetector, [{
    key: "detect",
    value: (function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName) {
        var testWidth;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this._hasReleased) {
                _context.next = 2;
                break;
              }
              throw new Error('CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.');
            case 2:
              if (this._initialized) {
                _context.next = 5;
                break;
              }
              _context.next = 5;
              return this._initialize();
            case 5:
              // Measure the width of the test font with the given fontFamily as fallback
              this._context.font = "".concat(this._fontSize, " \"").concat(fontName, "\", non-existed-fallback");
              testWidth = this._context.measureText(this._testText).width; // Compare the test width against the cached fallback width
              return _context.abrupt("return", testWidth !== this._fallbackWidth);
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function detect(_x) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Releases resources by cleaning up cached data and canvas elements.
     */
    )
  }, {
    key: "release",
    value: (function () {
      var _release = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this._hasReleased = true;
              this._canvas = null;
              this._context = null;
              this._fallbackWidth = null;
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function release() {
        return _release.apply(this, arguments);
      }
      return release;
    }()
    /**
     * Checks if the canvas-based font detection system is supported by the browser.
     * Only checks for OffscreenCanvas support since this class runs in Web Workers.
     *
     * @returns {boolean} True if OffscreenCanvas is supported, false otherwise.
     */
    )
  }, {
    key: "isSupported",
    value: function isSupported() {
      try {
        // Check for OffscreenCanvas support (required for Web Workers)
        if (typeof OffscreenCanvas !== 'undefined') {
          var offscreenCanvas = new OffscreenCanvas(1, 1);
          return Boolean(offscreenCanvas.getContext && offscreenCanvas.getContext('2d'));
        }
        return false;
      } catch (_unused) {
        return false;
      }
    }

    /**
     * Ensures the canvas-based font detection system is initialized.
     * Sets up the OffscreenCanvas for text measurements in Web Workers.
     *
     * @returns {Promise<void>} Resolves when initialization is complete.
     * @throws {Error} If OffscreenCanvas is not supported in the current environment.
     */
  }, {
    key: "_initialize",
    value: (function () {
      var _initialize2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!(typeof OffscreenCanvas === 'undefined')) {
                _context3.next = 2;
                break;
              }
              throw new Error('OffscreenCanvas is not supported in this environment. CanvasFontDetector requires OffscreenCanvas to run in Web Workers.');
            case 2:
              this._canvas = new OffscreenCanvas(100, 100);
              this._context = this._canvas.getContext('2d', {
                alpha: false,
                desynchronized: true
              });
              this._context.textBaseline = 'alphabetic';
              this._context.direction = 'ltr';
              this._context.imageSmoothingEnabled = false;

              // Cache the fallback width once during initialization
              this._context.font = "".concat(this._fontSize, " \"non-existed-font\", non-existed-fallback");
              this._fallbackWidth = this._context.measureText(this._testText).width;
              this._initialized = true; // Mark as initialized
            case 10:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _initialize() {
        return _initialize2.apply(this, arguments);
      }
      return _initialize;
    }())
  }]);
}(_FontDetector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./src/worker/fonts/detector/FontDetector.js":
/*!***************************************************!*\
  !*** ./src/worker/fonts/detector/FontDetector.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontDetector; }
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * FontDetectorInterface
 * Defines the required methods for a font detector implementation.
 */
var FontDetector = /*#__PURE__*/function () {
  function FontDetector() {
    _classCallCheck(this, FontDetector);
  }
  return _createClass(FontDetector, [{
    key: "detect",
    value: (
    /**
     * Checks the availability of a group of fonts.
     * @param {Array<string>} fontName - A font name to check.
     * @returns {Promise<Array<string>>} A promise that resolves with the list of detected fonts.
     * @throws {Error} Throws an error if the number of fonts exceeds the allowed limit.
     */
    // eslint-disable-next-line no-unused-vars
    function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName, fontFamily) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              throw new Error('Method "checkFontList" must be implemented.');
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function detect(_x, _x2) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Releases resources used by the font detection system, such as cleaning up DOM elements.
     * @returns {void}
     */
    )
  }, {
    key: "release",
    value: function release() {
      throw new Error('Method "release" must be implemented.');
    }

    /**
     * Checks if the font detection mechanism is supported by the environment.
     * This function can be overridden by implementations to provide specific checks
     * (e.g., availability of `document.fonts` or other APIs).
     * @returns {boolean} True if supported, false otherwise.
     */
  }, {
    key: "isSupported",
    value: function isSupported() {
      throw new Error('Method "isSupported" must be implemented.');
    }
  }]);
}();


/***/ }),

/***/ "./src/worker/fonts/detector/FontDetectorProvider.js":
/*!***********************************************************!*\
  !*** ./src/worker/fonts/detector/FontDetectorProvider.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ FontDetectorProvider; }
/* harmony export */ });
/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../main/technicalServices/log/Logger */ "./src/main/technicalServices/log/Logger.js");
/* harmony import */ var _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NativeFontDetector */ "./src/worker/fonts/detector/NativeFontDetector.js");
/* harmony import */ var _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CanvasFontDetector */ "./src/worker/fonts/detector/CanvasFontDetector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var FontDetectorProvider = /*#__PURE__*/function () {
  function FontDetectorProvider() {
    _classCallCheck(this, FontDetectorProvider);
    this._logsTag = "[FONTS-COLLECTOR]";
  }

  /**
   * Creates a detector instance based on the specified type
   * @param {string} detectorType - The type of detector to create ('native', 'canvas')
   * @param {Object} config - Configuration repository to check constraints
   * @returns {FontDetector} The detector instance
   */
  return _createClass(FontDetectorProvider, [{
    key: "getDetectorByType",
    value: function getDetectorByType(detectorType) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var type = detectorType.toLowerCase();
      switch (type) {
        case 'native':
          return new _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__["default"]();
        case 'canvas':
          return new _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__["default"]();
        default:
          throw new Error("Invalid detector type: '".concat(detectorType, "'. Supported types: 'native', 'canvas'"));
      }
    }

    /**
     * Provides the best font detector based on the current environment
     * @param {Object} config - Configuration repository
     * @returns {FontDetector} An instance of the best available font detector
     */
  }, {
    key: "getBestDetector",
    value: function getBestDetector(config) {
      // Try native detector first
      try {
        var nativeDetector = new _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__["default"]();
        if (nativeDetector.isSupported()) {
          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Using native detector"));
          return nativeDetector;
        }
      } catch (error) {
        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("".concat(this._logsTag, " Native detector failed:"), error);
      }

      // Try canvas detector (fallback)
      try {
        var canvasDetector = new _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__["default"]();
        if (canvasDetector.isSupported()) {
          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].info("".concat(this._logsTag, " Using canvas detector"));
          return canvasDetector;
        }
      } catch (error) {
        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__["default"].error("".concat(this._logsTag, " Canvas detector failed:"), error);
      }
      throw new Error('[FontDetectorProvider] No suitable font detection implementation is supported in this environment.');
    }
  }]);
}();


/***/ }),

/***/ "./src/worker/fonts/detector/NativeFontDetector.js":
/*!*********************************************************!*\
  !*** ./src/worker/fonts/detector/NativeFontDetector.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ NativeFontDetector; }
/* harmony export */ });
/* harmony import */ var _FontDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FontDetector */ "./src/worker/fonts/detector/FontDetector.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


// Comments:
// Safari has more local font access than Chrome.
// Chrome intentionally blocks most system fonts from web pages.
// FontDetector will not see fonts like Charter, PingFang, STIX, Phosphate in Chrome.
//
// BROWSER COMPATIBILITY NOTE:
// FontFace API in Web Workers:
// - Chrome: 57+ main thread, 70+ workers
// - Firefox: 41+ main thread, 69+ workers (limited)
// - Safari: 10+ main thread, 16.4+ workers
// - Edge: 79+ main thread and workers
// This detector runs in Web Worker context.
var NativeFontDetector = /*#__PURE__*/function (_FontDetector) {
  function NativeFontDetector() {
    var _self;
    var _this;
    var fonts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ((_self = self) === null || _self === void 0 ? void 0 : _self.fonts) || null;
    _classCallCheck(this, NativeFontDetector);
    _this = _callSuper(this, NativeFontDetector);
    if (!fonts) throw new Error('fonts is required for NativeFontDetector.');
    _this.fonts = fonts;
    return _this;
  }

  /**
   * Detect if a font family is available.
   * @param {string} fontName - The name of the font family to check.
   * @returns {Promise<boolean>} - Resolves to true if the font is available, false otherwise.
   */
  _inherits(NativeFontDetector, _FontDetector);
  return _createClass(NativeFontDetector, [{
    key: "detect",
    value: (function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName) {
        var fontFace, isLoaded;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              // Logger.trace(`NativeFontDetector.detect: ${fontName}`);
              fontFace = null;
              _context.prev = 1;
              // Create the FontFace
              fontFace = new FontFace(fontName, "local(\"".concat(fontName, "\")"));

              // Add to worker's FontFaceSet (self.fonts in workers)
              this.fonts.add(fontFace);

              // Try to load the font
              _context.next = 6;
              return fontFace.load();
            case 6:
              // Check if the font is loaded
              isLoaded = fontFace.status === 'loaded';
              return _context.abrupt("return", isLoaded);
            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](1);
              return _context.abrupt("return", false);
            case 13:
              _context.prev = 13;
              // Always delete the font after checking status, even on error
              if (fontFace) {
                this.fonts["delete"](fontFace);
              }
              return _context.finish(13);
            case 16:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[1, 10, 13, 16]]);
      }));
      function detect(_x) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Check if the fonts API is supported in the current context.
     * @returns {boolean} - True if the API is supported, false otherwise.
     */
    )
  }, {
    key: "isSupported",
    value: function isSupported() {
      try {
        // Check for FontFace API support
        if (typeof FontFace === 'undefined' || typeof this.fonts === 'undefined') {
          return false;
        }
        // Try to create a FontFace instance to ensure it works
        new FontFace('test', 'url(test.woff)');
        return true;
      } catch (error) {
        return false;
      }
    }

    /**
     * Release resources used by the font detection system.
     * @returns {void}
     */
  }, {
    key: "release",
    value: function release() {
      // Ensure all fonts are deleted from fonts
    }
  }]);
}(_FontDetector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./node_modules/worker-loader/dist/cjs.js?inline=no-fallback&filename=worker.js!./src/worker/worker.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/worker-loader/dist/cjs.js?inline=no-fallback&filename=worker.js!./src/worker/worker.js ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Worker_fn; }
/* harmony export */ });
/* harmony import */ var _node_modules_worker_loader_dist_runtime_inline_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !!../../node_modules/worker-loader/dist/runtime/inline.js */ "./node_modules/worker-loader/dist/runtime/inline.js");
/* harmony import */ var _node_modules_worker_loader_dist_runtime_inline_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_worker_loader_dist_runtime_inline_js__WEBPACK_IMPORTED_MODULE_0__);



function Worker_fn() {
  return _node_modules_worker_loader_dist_runtime_inline_js__WEBPACK_IMPORTED_MODULE_0___default()("/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/main/collectors/static/font/collection/FontConfiguration.js\":\n/*!*************************************************************************!*\\\n  !*** ./src/main/collectors/static/font/collection/FontConfiguration.js ***!\n  \\*************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FONT_COLLECTION_DEFAULT_CONFIG: function() { return /* binding */ FONT_COLLECTION_DEFAULT_CONFIG; },\n/* harmony export */   \"default\": function() { return /* binding */ FontConfiguration; }\n/* harmony export */ });\n/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/FontMigrationStage */ \"./src/main/collectors/static/font/collection/types/FontMigrationStage.js\");\n/* harmony import */ var _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/FontVersionType */ \"./src/main/collectors/static/font/collection/types/FontVersionType.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\nvar FONT_COLLECTION_DEFAULT_CONFIG = {\n  migrationMode: _types_FontMigrationStage__WEBPACK_IMPORTED_MODULE_2__[\"default\"].V1_ONLY,\n  v1: {\n    offloadFontsCollectionEnabled: false,\n    offloadFontsRemoveDuplicated: true\n  },\n  v2: {\n    // undefined means use best available detector\n    // we have to keep way to control detector type in any case of new browser limitations or some other limits\n    detectorType: undefined,\n    // can be undefined, 'canvas', 'native'\n\n    fontsPerBatch: 100,\n    delayBetweenBatchesMs: 0,\n    adaptiveBatchEnabled: true,\n    minFontsPerBatch: 100,\n    maxFontsPerBatch: 1000,\n    frameBudgetMs: 100,\n    frameHistorySize: 3,\n    ignoreFonts: [\"STFangsong\", \"STHeiti\", \"STKaiti\", \"STXihei\", \"NanumGothic\", \"NanumMyeongjo\", \"Osaka\", \"Osaka-Mono\", \"YuppySC-Regular\"]\n  }\n};\n\n/**\n * Configuration manager for font collection settings\n */\nvar FontConfiguration = /*#__PURE__*/function () {\n  function FontConfiguration(configurationRepository) {\n    _classCallCheck(this, FontConfiguration);\n    this._configurationRepository = configurationRepository;\n    this._logsTag = \"[FONTS-COLLECTOR][CONFIG-MANAGER]\";\n  }\n\n  /**\n   * Gets the V1 scanner configuration settings\n   * @returns {Object} V1 scanner configuration\n   */\n  return _createClass(FontConfiguration, [{\n    key: \"getV1ScannerConfig\",\n    value: function getV1ScannerConfig() {\n      var offloadFontsCollectionEnabled = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.offloadFontsCollectionEnabled);\n      var offloadFontsRemoveDuplicated = this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.offloadFontsRemoveDuplicated);\n      return {\n        offloadFontsCollectionEnabled: offloadFontsCollectionEnabled !== null && offloadFontsCollectionEnabled !== void 0 ? offloadFontsCollectionEnabled : FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsCollectionEnabled,\n        offloadFontsRemoveDuplicated: offloadFontsRemoveDuplicated !== null && offloadFontsRemoveDuplicated !== void 0 ? offloadFontsRemoveDuplicated : FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsRemoveDuplicated\n      };\n    }\n\n    /**\n     * Gets the V2 scanner configuration settings\n     * @returns {Object} V2 scanner configuration with detectorType support\n     * @property {number} fontsPerBatch - Number of fonts to process per batch\n     * @property {number} delayBetweenBatchesMs - Delay between batches in milliseconds\n     * @property {boolean} adaptiveBatchEnabled - Whether adaptive batch processing is enabled\n     * @property {number} minFontsPerBatch - Minimum fonts per batch for adaptive processing\n     * @property {number} maxFontsPerBatch - Maximum fonts per batch for adaptive processing\n     * @property {number} frameBudgetMs - Time budget per frame in milliseconds\n     * @property {number} frameHistorySize - Number of frames to track for adaptive processing\n     * @property {string|undefined} detectorType - Specific detector type ('native' or 'canvas') or undefined for best available\n     */\n  }, {\n    key: \"getV2ScannerConfig\",\n    value: function getV2ScannerConfig() {\n      var _config$v2$detectorTy, _config$v, _config$v2$fontsPerBa, _config$v2, _config$v2$delayBetwe, _config$v3, _config$v2$adaptiveBa, _config$v4, _config$v2$minFontsPe, _config$v5, _config$v2$maxFontsPe, _config$v6, _config$v2$frameBudge, _config$v7, _config$v2$frameHisto, _config$v8;\n      var config = this._getParsedFontCollectionConfig();\n      return {\n        detectorType: (_config$v2$detectorTy = config === null || config === void 0 || (_config$v = config.v2) === null || _config$v === void 0 ? void 0 : _config$v.detectorType) !== null && _config$v2$detectorTy !== void 0 ? _config$v2$detectorTy : FONT_COLLECTION_DEFAULT_CONFIG.v2.detectorType,\n        fontsPerBatch: (_config$v2$fontsPerBa = config === null || config === void 0 || (_config$v2 = config.v2) === null || _config$v2 === void 0 ? void 0 : _config$v2.fontsPerBatch) !== null && _config$v2$fontsPerBa !== void 0 ? _config$v2$fontsPerBa : FONT_COLLECTION_DEFAULT_CONFIG.v2.fontsPerBatch,\n        delayBetweenBatchesMs: (_config$v2$delayBetwe = config === null || config === void 0 || (_config$v3 = config.v2) === null || _config$v3 === void 0 ? void 0 : _config$v3.delayBetweenBatchesMs) !== null && _config$v2$delayBetwe !== void 0 ? _config$v2$delayBetwe : FONT_COLLECTION_DEFAULT_CONFIG.v2.delayBetweenBatchesMs,\n        adaptiveBatchEnabled: (_config$v2$adaptiveBa = config === null || config === void 0 || (_config$v4 = config.v2) === null || _config$v4 === void 0 ? void 0 : _config$v4.adaptiveBatchEnabled) !== null && _config$v2$adaptiveBa !== void 0 ? _config$v2$adaptiveBa : FONT_COLLECTION_DEFAULT_CONFIG.v2.adaptiveBatchEnabled,\n        minFontsPerBatch: (_config$v2$minFontsPe = config === null || config === void 0 || (_config$v5 = config.v2) === null || _config$v5 === void 0 ? void 0 : _config$v5.minFontsPerBatch) !== null && _config$v2$minFontsPe !== void 0 ? _config$v2$minFontsPe : FONT_COLLECTION_DEFAULT_CONFIG.v2.minFontsPerBatch,\n        maxFontsPerBatch: (_config$v2$maxFontsPe = config === null || config === void 0 || (_config$v6 = config.v2) === null || _config$v6 === void 0 ? void 0 : _config$v6.maxFontsPerBatch) !== null && _config$v2$maxFontsPe !== void 0 ? _config$v2$maxFontsPe : FONT_COLLECTION_DEFAULT_CONFIG.v2.maxFontsPerBatch,\n        frameBudgetMs: (_config$v2$frameBudge = config === null || config === void 0 || (_config$v7 = config.v2) === null || _config$v7 === void 0 ? void 0 : _config$v7.frameBudgetMs) !== null && _config$v2$frameBudge !== void 0 ? _config$v2$frameBudge : FONT_COLLECTION_DEFAULT_CONFIG.v2.frameBudgetMs,\n        frameHistorySize: (_config$v2$frameHisto = config === null || config === void 0 || (_config$v8 = config.v2) === null || _config$v8 === void 0 ? void 0 : _config$v8.frameHistorySize) !== null && _config$v2$frameHisto !== void 0 ? _config$v2$frameHisto : FONT_COLLECTION_DEFAULT_CONFIG.v2.frameHistorySize\n      };\n    }\n\n    /**\n     * Gets the font collection configuration for migration and general settings\n     * @returns {Object} Font collection configuration\n     */\n  }, {\n    key: \"getFontCollectionConfig\",\n    value: function getFontCollectionConfig() {\n      return this._getParsedFontCollectionConfig();\n    }\n\n    /**\n     * Gets the migration mode from configuration\n     * @returns {string} Migration mode\n     */\n  }, {\n    key: \"getMigrationMode\",\n    value: function getMigrationMode(defaultMode) {\n      var _this$_getParsedFontC;\n      return (_this$_getParsedFontC = this._getParsedFontCollectionConfig().migrationMode) !== null && _this$_getParsedFontC !== void 0 ? _this$_getParsedFontC : defaultMode;\n    }\n\n    /**\n     * Gets the detector type from V2 configuration\n     * @returns {string|undefined} Detector type or undefined\n     */\n  }, {\n    key: \"getDetectorType\",\n    value: function getDetectorType() {\n      var _this$_getParsedFontC2;\n      return (_this$_getParsedFontC2 = this._getParsedFontCollectionConfig()) === null || _this$_getParsedFontC2 === void 0 || (_this$_getParsedFontC2 = _this$_getParsedFontC2.v2) === null || _this$_getParsedFontC2 === void 0 ? void 0 : _this$_getParsedFontC2.detectorType;\n    }\n\n    /**\n     * Gets the list of fonts to ignore during font collection\n     * @returns {Array<string>} Array of font names to ignore\n     */\n  }, {\n    key: \"getIgnoredFonts\",\n    value: function getIgnoredFonts() {\n      var _config$v2$ignoreFont, _config$v9;\n      var config = this._getParsedFontCollectionConfig();\n      var serverIgnoreFonts = (_config$v2$ignoreFont = config === null || config === void 0 || (_config$v9 = config.v2) === null || _config$v9 === void 0 ? void 0 : _config$v9.ignoreFonts) !== null && _config$v2$ignoreFont !== void 0 ? _config$v2$ignoreFont : [];\n      var defaultIgnoreFonts = FONT_COLLECTION_DEFAULT_CONFIG.v2.ignoreFonts;\n\n      // Merge server and default ignore fonts, removing duplicates\n      var mergedFonts = new Set([].concat(_toConsumableArray(serverIgnoreFonts), _toConsumableArray(defaultIgnoreFonts)));\n      return Array.from(mergedFonts);\n    }\n  }, {\n    key: \"getConfigByVersion\",\n    value: function getConfigByVersion(version) {\n      if (version === _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__[\"default\"].VERSION1) {\n        return this.getV1ScannerConfig();\n      } else if (version === _types_FontVersionType__WEBPACK_IMPORTED_MODULE_3__[\"default\"].VERSION2) {\n        return this.getV2ScannerConfig();\n      }\n    }\n\n    /**\n     * Parses and returns the font collection configuration\n     * @private\n     * @returns {Object} Parsed font collection configuration\n     */\n  }, {\n    key: \"_getParsedFontCollectionConfig\",\n    value: function _getParsedFontCollectionConfig() {\n      try {\n        return JSON.parse(this._configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.fontCollection) || \"{}\");\n      } catch (error) {\n        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(\"\".concat(this._logsTag, \" Failed to parse font collection config: \").concat(error.message));\n        return {};\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/collectors/static/font/collection/types/FontMigrationStage.js\":\n/*!********************************************************************************!*\\\n  !*** ./src/main/collectors/static/font/collection/types/FontMigrationStage.js ***!\n  \\********************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * FontMigrationStage\n * \n * Defines the different stages of font collection migration from V1 to V2.\n * Each stage represents a different phase in the migration process:\n * \n * V1_ONLY (0): Only V1 collector is active\n * DUAL_COLLECTION_V1_PRIORITY (1): Both collectors active, V1 is primary\n * DUAL_COLLECTION_V2_PRIORITY (2): Both collectors active, V2 is primary\n * V2_ONLY (3): Only V2 collector is active\n * DUAL_COLLECTION_PARALLEL (5): Both collectors active, parallel\n */\n\nvar FontMigrationStage = {\n  V1_ONLY: \"0\",\n  DUAL_COLLECTION_PARALLEL: \"5\",\n  DUAL_COLLECTION_V1_PRIORITY: \"1\",\n  DUAL_COLLECTION_V2_PRIORITY: \"2\",\n  V2_ONLY: \"3\",\n  /**\n   * Checks if a given stage is valid\n   * @param {string} stage - The migration stage to validate\n   * @returns {boolean} True if the stage is valid, false otherwise\n   */\n  isValid: function isValid(stage) {\n    return Object.values(FontMigrationStage).includes(stage);\n  },\n  /**\n   * Gets a description of what each stage represents\n   * @param {string} stage - The migration stage to get description for\n   * @returns {string} Description of the stage\n   */\n  getDescription: function getDescription(stage) {\n    var descriptions = _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontMigrationStage.V1_ONLY, \"Only V1 collector is active\"), FontMigrationStage.DUAL_COLLECTION_V1_PRIORITY, \"Both collectors active, V1 is primary\"), FontMigrationStage.DUAL_COLLECTION_V2_PRIORITY, \"Both collectors active, V2 is primary\"), FontMigrationStage.V2_ONLY, \"Only V2 collector is active\");\n    return descriptions[stage] || \"Unknown stage\";\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (FontMigrationStage);\n\n/***/ }),\n\n/***/ \"./src/main/collectors/static/font/collection/types/FontVersionType.js\":\n/*!*****************************************************************************!*\\\n  !*** ./src/main/collectors/static/font/collection/types/FontVersionType.js ***!\n  \\*****************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n// Enum for font version types\nvar FontVersionType = Object.freeze({\n  VERSION1: \"VERSION1\",\n  VERSION2: \"VERSION2\"\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (FontVersionType);\n\n/***/ }),\n\n/***/ \"./src/main/common/polyfills/TextEncoderPolyfill.js\":\n/*!**********************************************************!*\\\n  !*** ./src/main/common/polyfills/TextEncoderPolyfill.js ***!\n  \\**********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ apply; }\n/* harmony export */ });\n/**\n * This polyfill is needed for browsers that don't support TextEncoder\n * TextEncoder is used in the HashService file for hashing the body of the request\n * @param {Object} scope - the scope of the window\n */\nfunction apply(scope) {\n  if (typeof TextEncoder === 'undefined') {\n    scope.TextEncoder = function TextEncoder() {};\n    TextEncoder.prototype.encode = function (str) {\n      var utf8 = [];\n      for (var i = 0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);else if (charcode < 0x800) {\n          utf8.push(0xc0 | charcode >> 6, 0x80 | charcode & 0x3f);\n        } else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | charcode >> 12, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by subtracting 0x10000 and splitting into two 16-bit characters\n          charcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n          utf8.push(0xf0 | charcode >> 18, 0x80 | charcode >> 12 & 0x3f, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n        }\n      }\n      return new Uint8Array(utf8);\n    };\n  }\n}\n\n/***/ }),\n\n/***/ \"./src/main/const/communication.js\":\n/*!*****************************************!*\\\n  !*** ./src/main/const/communication.js ***!\n  \\*****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: function() { return /* binding */ POST; },\n/* harmony export */   bioCatchPreservedPaths: function() { return /* binding */ bioCatchPreservedPaths; },\n/* harmony export */   minifiedUrlV3Path: function() { return /* binding */ minifiedUrlV3Path; },\n/* harmony export */   minifiedUrlV4Path: function() { return /* binding */ minifiedUrlV4Path; },\n/* harmony export */   serverProtocolV3: function() { return /* binding */ serverProtocolV3; },\n/* harmony export */   serverProtocolV4: function() { return /* binding */ serverProtocolV4; },\n/* harmony export */   wupUrlV3Path: function() { return /* binding */ wupUrlV3Path; },\n/* harmony export */   wupUrlV4Path: function() { return /* binding */ wupUrlV4Path; }\n/* harmony export */ });\n// wup url constants\nvar wupUrlV4Path = 'api/v4/wup';\nvar wupUrlV3Path = 'client/v3.1/web/wup';\nvar minifiedUrlV3Path = 'v3.1';\nvar minifiedUrlV4Path = 'v4';\nvar serverProtocolV3 = 3;\nvar serverProtocolV4 = 4;\n\n// server request methods constants\nvar POST = 'POST';\n\n/**\n * Background:\n *\n * To support dynamic WUP URL modificationssuch as enabling the `enableMinifiedWupUri` featurewhile maintaining backward compatibility,\n * classes like `ServerUrlResolver` and `ServerUrlCache` decompose the configured `cdApi` or manual-start URL into three parts:\n *   - baseUrl\n *   - protocolType\n *   - cid\n *\n * These parts are later reassembled using classes like `WupServerClient` and `WupUrlBuilder` based on current configuration.\n *\n * For example:\n *   Given the configured URL:\n *     https://wup-dtrackers.bc2.customers.biocatch.com/client/v3.1/web/wup?cid=dtrackers\n *\n *   It is decomposed as:\n *     - baseUrl: https://wup-dtrackers.bc2.customers.biocatch.com\n *     - protocolType: V3\n *     - cid: dtrackers\n *\n * This constant defines which known WUP path segments should be **excluded** from the `baseUrl`.\n * It ensures that only the protocol-specific suffix (e.g., `/client/.../wup` or `/api/v4/wup`) is stripped\n * while preserving any **custom path prefixes** that are part of a proxy setup.\n *\n * Example of a proxy setup (path should not be stripped):\n *   https://empresarial.banamex.com/clvntw/wup?cid=calvintest\n */\nvar bioCatchPreservedPaths = [wupUrlV4Path, wupUrlV3Path, 'wup'];\n\n/***/ }),\n\n/***/ \"./src/main/const/hashing.js\":\n/*!***********************************!*\\\n  !*** ./src/main/const/hashing.js ***!\n  \\***********************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   REAL_API: function() { return /* binding */ REAL_API; },\n/* harmony export */   sha256Hash: function() { return /* binding */ sha256Hash; },\n/* harmony export */   sha256HeaderName: function() { return /* binding */ sha256HeaderName; }\n/* harmony export */ });\n// sha256 hash constants for wup messages hashing\nvar sha256Hash = 'SHA-256';\nvar sha256HeaderName = 'X-h';\nvar REAL_API = 'x-requested-host';\n\n/***/ }),\n\n/***/ \"./src/main/contract/AgentType.js\":\n/*!****************************************!*\\\n  !*** ./src/main/contract/AgentType.js ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentType: function() { return /* binding */ AgentType; }\n/* harmony export */ });\nvar AgentType = {\n  PRIMARY: \"primary\",\n  SECONDARY: \"secondary\"\n};\nObject.freeze(AgentType);\n\n/***/ }),\n\n/***/ \"./src/main/core/configuration/ConfigurationFields.js\":\n/*!************************************************************!*\\\n  !*** ./src/main/core/configuration/ConfigurationFields.js ***!\n  \\************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigurationFields: function() { return /* binding */ ConfigurationFields; }\n/* harmony export */ });\nvar ConfigurationFields = {\n  resetSessionApiThreshold: 'resetSessionApiThreshold',\n  dataWupDispatchRateSettings: 'dataWupDispatchRateSettings',\n  logWupDispatchRateSettings: 'logWupDispatchRateSettings',\n  logServerURL: 'logAddress',\n  enableMinifiedLogUri: 'enableMinifiedLogUri',\n  forceDynamicDataWupDispatchSettings: 'forceDynamicDataWupDispatchSettings',\n  wupStatisticsLogIntervalMs: 'wupStatisticsLogIntervalMs',\n  serverCommunicationSettings: 'serverCommunicationSettings',\n  wupResponseTimeout: 'wupResponseTimeout',\n  // Deprecated\n  wupMessageRequestTimeout: 'wupMessageRequestTimeout',\n  logMessageRequestTimeout: 'logMessageRequestTimeout',\n  collectKeyRegionValue: 'collectKeyRegionValue',\n  crossDomainsList: 'crossDomainsList',\n  crossDomainsTimeout: 'crossDomainsTimeout',\n  isMutationObserver: 'isMutationObserver',\n  isEnabled: 'isEnabled',\n  slaveChannelHandshakeTimeout: 'slaveChannelHandshakeTimeout',\n  slaveAliveMessageInterval: 'slaveAliveMessageInterval',\n  collectCustomElementAttribute: 'collectCustomElementAttribute',\n  customElementAttribute: 'customElementAttribute',\n  enableFramesProcessing: 'enableFramesProcessing',\n  enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',\n  wupServerURL: 'wupServerURL',\n  recoveryServerURL: 'recoveryServerURL',\n  logAddress: 'logAddress',\n  isCaptureKeyEvents: 'isCaptureKeyEvents',\n  locationEventsTimeoutMsec: 'locationEventsTimeoutMsec',\n  heartBeatMessageInterval: 'heartBeatMessageInterval',\n  isMotionAroundTouchEnabled: 'isMotionAroundTouchEnabled',\n  motionPaddingAroundTouchMSec: 'motionPaddingAroundTouchMSec',\n  isMotionOnSessionStart: 'isMotionOnSessionStart',\n  motionPaddingOnSessionStartMSec: 'motionPaddingOnSessionStartMSec',\n  isVMDetection: 'isVMDetection',\n  isScrollCollect: 'isScrollCollect',\n  isContextPropsFeature: 'isContextPropsFeature',\n  isCrossDomain: 'isCrossdomain',\n  gyroEventsThreshold: 'gyroEventsThreshold',\n  gyroEventsSamplePeriod: 'gyroEventsSamplePeriod',\n  dataQPassWorkerInterval: 'dataQPassWorkerInterval',\n  accelerometerEventsSamplePeriod: 'accelerometerEventsSamplePeriod',\n  orientationEventsThreshold: 'orientationEventsThreshold',\n  orientationEventsSamplePeriod: 'orientationEventsSamplePeriod',\n  isAudioDetection: 'isAudioDetection',\n  stateChangeEnabled: 'stateChangeEnabled',\n  logLevel: 'logLevel',\n  enableCustomElementsProcessing: 'enableCustomElementsProcessing',\n  keyEventsMaskSpecialChars: 'keyEventsMaskSpecialChars',\n  collectSelectElementBlurAndFocusEvents: 'collectSelectElementBlurAndFocusEvents',\n  allowedUnmaskedValuesList: 'allowedUnmaskedValuesList',\n  enableUnmaskedValues: 'enableUnmaskedValues',\n  wupMessageNumToRetry: 'wupMessageNumToRetry',\n  wupRetryOnNetworkFailureOnly: 'wupRetryOnNetworkFailureOnly',\n  wupMessageRetryInterval: 'wupMessageRetryInterval',\n  wupIncrementalGrowthBetweenFailures: 'wupIncrementalGrowthBetweenFailures',\n  wupMaxIntervalBetweenFailures: 'wupMaxIntervalBetweenFailures',\n  logMessageNumToRetry: 'logMessageNumToRetry',\n  logRetryOnNetworkFailureOnly: 'logRetryOnNetworkFailureOnly',\n  logMessageRetryInterval: 'logMessageRetryInterval',\n  logIncrementalGrowthBetweenFailures: 'logIncrementalGrowthBetweenFailures',\n  logMaxIntervalBetweenFailures: 'logMaxIntervalBetweenFailures',\n  cdsNumExpirationTime: 'cdsNumExpirationTime',\n  enableCoordinatesMasking: 'enableCoordinatesMasking',\n  maskElementsAttributes: 'maskElementsAttributes',\n  enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',\n  timeTillClearingElementsBufferQueueTimeout: 'timeTillClearingElementsBufferQueueTimeout',\n  acknowledgeDataDispatchingRate: 'acknowledgeDataDispatchingRate',\n  isChannelSupportsAckMessageLogic: 'isChannelSupportsAckMessageLogic',\n  parentElementSelector: 'parentElementSelector',\n  childElementWithCustomAttribute: 'childElementWithCustomAttribute',\n  elementDataAttribute: 'elementDataAttribute',\n  customButtons: 'customButtons',\n  enableElementHierarchy: 'enableElementHierarchy',\n  enableElementCategory: 'enableElementCategory',\n  agentType: 'agentType',\n  collectionMode: 'collectionMode',\n  enableWupMessagesHashing: 'enableWupMessagesHashing',\n  enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',\n  offloadFontsCollectionEnabled: 'offloadFontsCollectionEnabled',\n  offloadFontsRemoveDuplicated: 'offloadFontsRemoveDuplicated',\n  mutationMaxChunkSize: 'mutationMaxChunkSize',\n  mutationChunkDelayMs: 'mutationChunkDelayMs',\n  passwordIdMaskingList: 'passwordIdMaskingList',\n  elementUniqueIDConfiguration: 'elementUniqueIDConfiguration',\n  fontCollection: 'fontCollection',\n  useLegacyZeroTimeout: 'useLegacyZeroTimeout',\n  useMessageChannelForSlaveComm: 'useMessageChannelForSlaveComm',\n  enableAutoContextCategory: 'enableAutoContextCategory',\n  contextCategories: 'contextCategories',\n  elementCategories: 'elementCategories',\n  elementAttributes: 'elementAttributes',\n  elementSelectors: 'elementSelectors',\n  externalWASMModules: 'externalWASMModules',\n  enableIncognitoDetection: 'enableIncognitoDetection',\n  isCollectorsV2: 'isCollectorsV2',\n  agenticBrowserFonts: 'agenticBrowserFonts',\n  agenticDomInjectionBlinkThresholdMs: 'agenticDomInjectionBlinkThresholdMs',\n  agenticDomInjectionBlinkTags: 'agenticDomInjectionBlinkTags',\n  collectAgenticPasteSignal: 'collectAgenticPasteSignal'\n};\n\n/***/ }),\n\n/***/ \"./src/main/core/configuration/ConfigurationRepository.js\":\n/*!****************************************************************!*\\\n  !*** ./src/main/core/configuration/ConfigurationRepository.js ***!\n  \\****************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigurationDefaultTemplates: function() { return /* binding */ ConfigurationDefaultTemplates; },\n/* harmony export */   \"default\": function() { return /* binding */ ConfigurationRepository; }\n/* harmony export */ });\n/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../technicalServices/log/LogLevel */ \"./src/main/technicalServices/log/LogLevel.js\");\n/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../infrastructure/CDMap */ \"./src/main/infrastructure/CDMap.js\");\n/* harmony import */ var _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../collectors/static/font/collection/FontConfiguration */ \"./src/main/collectors/static/font/collection/FontConfiguration.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\nvar ConfigurationDefaultTemplates = {\n  defaultDynamicWupDispatchRateConfiguration: {\n    type: 'dynamic'\n  },\n  defaultIncrementalWupDispatchRateConfiguration: {\n    type: 'incremental',\n    // (incremental, constant)\n    initialRateValueMs: 500,\n    // The initial rate\n    incrementStepMs: 500,\n    // The rate increment rate\n    incrementStopMs: 5000,\n    // At what rate value do we stop incrementing\n    incrementStartWupSendCount: 20 // After how many wups do we start increasing\n  }\n};\n\n/**\n * List of config keys allowed to be modified only via local configuration.\n *\n * @type {string[]}\n */\nvar configOverrideBlackList = [\n/**\n * This keys should be modified only from local configuration, to prevent security treat\n * in which sensitive inputs masking could be disabled remotely.\n * For example, by man-in-the middle attack.\n */\n_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.keyEventsMaskSpecialChars, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.passwordIdMaskingList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.maskElementsAttributes, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableUnmaskedValues, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.enableCoordinatesMasking];\nvar ConfigurationRepository = /*#__PURE__*/function () {\n  function ConfigurationRepository() {\n    _classCallCheck(this, ConfigurationRepository);\n    // Dictionary holds the config values which require parsing so we can parse them when they arrive from the server\n    this._requireParseFields = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_2__.create();\n    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.dataWupDispatchRateSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.dataWupDispatchRateSettings);\n    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logWupDispatchRateSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logWupDispatchRateSettings);\n    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.crossDomainsList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.crossDomainsList);\n    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.allowedUnmaskedValuesList);\n    this._requireParseFields.set(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings, _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings);\n    this._configurationList = {};\n    // For subscribing to configuration updates\n    this.configDefault = {\n      logLevel: _technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_1__.LogLevel.INFO,\n      isCrossdomain: false,\n      isGfxRendering: false,\n      isAudioDetectFeature: false,\n      enableEmuidFeature: false,\n      crossDomainsList: [],\n      crossDomainsTimeout: 5000,\n      orientationEventsSamplePeriod: 300,\n      orientationEventsThreshold: 1,\n      stateChangeEnabled: false,\n      accelerometerEventsSamplePeriod: 0,\n      dataQPassWorkerInterval: 500,\n      gyroEventsSamplePeriod: 0,\n      gyroEventsThreshold: 0.3,\n      isContextPropsFeature: true,\n      isEnabled: true,\n      isResetEveryLoad: false,\n      isScrollCollect: true,\n      isVMDetection: true,\n      isAudioDetection: false,\n      wupStatisticsLogIntervalMs: 30000,\n      heartBeatMessageInterval: 5000,\n      resetSessionApiThreshold: 20000,\n      wupMessageRequestTimeout: 5000,\n      logMessageRequestTimeout: 5000,\n      slaveChannelHandshakeTimeout: 60000,\n      slaveAliveMessageInterval: 100,\n      forceDynamicDataWupDispatchSettings: true,\n      dataWupDispatchRateSettings: ConfigurationDefaultTemplates.defaultDynamicWupDispatchRateConfiguration,\n      logWupDispatchRateSettings: {\n        type: 'constant',\n        // (incremental, constant)\n        initialRateValueMs: 2500 // The initial rate\n      },\n      serverCommunicationSettings: {\n        queueLoadThreshold: 100\n      },\n      collectKeyRegionValue: false,\n      isMutationObserver: true,\n      collectCustomElementAttribute: true,\n      isCaptureKeyEvents: false,\n      locationEventsTimeoutMsec: 10000,\n      isMotionAroundTouchEnabled: true,\n      motionPaddingAroundTouchMSec: 3000,\n      isMotionOnSessionStart: true,\n      motionPaddingOnSessionStartMSec: 20000,\n      keyEventsMaskSpecialChars: false,\n      collectSelectElementBlurAndFocusEvents: false,\n      enableUnmaskedValues: false,\n      allowedUnmaskedValuesList: [],\n      wupMessageNumToRetry: 5,\n      wupMessageRetryInterval: 1000,\n      wupRetryOnNetworkFailureOnly: false,\n      wupIncrementalGrowthBetweenFailures: 3500,\n      wupMaxIntervalBetweenFailures: 16000,\n      logMessageNumToRetry: 5,\n      logMessageRetryInterval: 1000,\n      logRetryOnNetworkFailureOnly: false,\n      logIncrementalGrowthBetweenFailures: 3500,\n      logMaxIntervalBetweenFailures: 16000,\n      cdsNumExpirationTime: 60,\n      enableCoordinatesMasking: false,\n      acknowledgeDataDispatchingRate: 3000,\n      passwordIdMaskingList: [],\n      isFontWidthFeature: false,\n      isFontMathFeature: false,\n      isFontEmojiFeature: false,\n      isStorageFeature: false,\n      isKeyboardLayoutFeature: false,\n      isScreenHighResFeature: false,\n      isBatteryStatusFeature: false,\n      isNavigatorFeature: false,\n      isWebglFeature: false,\n      isWebRTCFeature: false,\n      isSpeechVoicesFeature: false,\n      isDRMFeature: false,\n      isBrowserExtensionsFeature: false,\n      isAdblockerListsFeature: false,\n      isAudioDetectFeature2: false,\n      enableIncognitoDetection: false,\n      elementUniqueIDConfiguration: {\n        componentsFormat: \"{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}\",\n        hierarchyFormat: \"{tagName}_{index}\",\n        enabledTags: [\"input\", \"textarea\", \"button\", \"select\", \"div\", \"span\"]\n      },\n      offloadFontsCollectionEnabled: _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsCollectionEnabled,\n      offloadFontsRemoveDuplicated: _collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG.v1.offloadFontsRemoveDuplicated,\n      fontCollection: JSON.stringify(_collectors_static_font_collection_FontConfiguration__WEBPACK_IMPORTED_MODULE_3__.FONT_COLLECTION_DEFAULT_CONFIG),\n      enableElementHierarchy: false,\n      enableElementCategory: true,\n      isCPUFeature: false,\n      enableAutoContextCategory: true,\n      contextCategories: __webpack_require__(/*! ../../technicalServices/categories/ContextCategories.json */ \"./src/main/technicalServices/categories/ContextCategories.json\"),\n      enableWupSendDataFields: false,\n      //Shared config param with server and client\n      embedding_minimal_collectors: [\"grph_card\", \"cores\", \"os\", \"fonts\", \"main_lang\", \"languages\"],\n      isCollectorsV2: false,\n      isAgenticBrowserDetectFeature: false,\n      agenticBrowserFonts: [\"FKGroteskNeue\"],\n      isAgenticDomInjectionFeature: false,\n      agenticDomInjectionBlinkThresholdMs: 100,\n      agenticDomInjectionBlinkTags: [\"div\", \"style\"],\n      collectAgenticPasteSignal: false\n    };\n    this.loadConfigurations(this.configDefault);\n  }\n\n  /**\n   * Indicates if we are using the a configuration which was updated from the server or not\n   * @returns boolean True if update configuration is used. False if default one is used\n   */\n  return _createClass(ConfigurationRepository, [{\n    key: \"isConfigurationUpdatedFromServer\",\n    value: function isConfigurationUpdatedFromServer() {\n      return !this._isDefaultConfiguration;\n    }\n\n    /**\n     * get a list of configurations and sets them all\n     * @param config\n     * @param forceOverride\n     */\n  }, {\n    key: \"loadConfigurations\",\n    value: function loadConfigurations(config, forceOverride) {\n      var _this = this;\n      if (!config) {\n        return;\n      }\n      this._isDefaultConfiguration = config === this.configDefault;\n      Object.keys(config).forEach(function (key) {\n        if (forceOverride || _this._isDefaultConfiguration || !configOverrideBlackList.includes(key)) {\n          var configurationValue = config[key];\n          if (_this._requireParseFields.has(key)) {\n            var parsedValue = _this._tryParseConfigurationValue(configurationValue);\n            if (parsedValue) {\n              configurationValue = parsedValue;\n            }\n          }\n          _this._configurationList[key] = configurationValue;\n        }\n      });\n    }\n\n    /**\n     * get specific feature value\n     * @param featureName\n     * @constructor\n     */\n  }, {\n    key: \"get\",\n    value: function get(configurationName) {\n      return this._configurationList[configurationName];\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this._configurationList[name] = value;\n    }\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      return this._configurationList;\n    }\n  }, {\n    key: \"_tryParseConfigurationValue\",\n    value: function _tryParseConfigurationValue(configurationValue) {\n      if (typeof configurationValue !== 'string') {\n        return null;\n      }\n      try {\n        return JSON.parse(configurationValue);\n      } catch (ex) {\n        // swallow error\n      }\n      return null;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/core/configuration/ConfigurationWrapperLogMessage.js\":\n/*!***********************************************************************!*\\\n  !*** ./src/main/core/configuration/ConfigurationWrapperLogMessage.js ***!\n  \\***********************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ConfigurationWrapperLogMessage; }\n/* harmony export */ });\n/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _worker_communication_ReMessageSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../worker/communication/ReMessageSettings */ \"./src/worker/communication/ReMessageSettings.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar ConfigurationWrapperLogMessage = /*#__PURE__*/function () {\n  function ConfigurationWrapperLogMessage() {\n    _classCallCheck(this, ConfigurationWrapperLogMessage);\n  }\n  return _createClass(ConfigurationWrapperLogMessage, null, [{\n    key: \"createReMessageSettings\",\n    value: function createReMessageSettings(configurationRepository) {\n      return new _worker_communication_ReMessageSettings__WEBPACK_IMPORTED_MODULE_1__[\"default\"](configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logMessageNumToRetry), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logMessageRetryInterval), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logIncrementalGrowthBetweenFailures), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logMaxIntervalBetweenFailures), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logRetryOnNetworkFailureOnly));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/core/configuration/ConfigurationWrapperWupMessage.js\":\n/*!***********************************************************************!*\\\n  !*** ./src/main/core/configuration/ConfigurationWrapperWupMessage.js ***!\n  \\***********************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ConfigurationWrapperWupMessage; }\n/* harmony export */ });\n/* harmony import */ var _ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _worker_communication_ReMessageSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../worker/communication/ReMessageSettings */ \"./src/worker/communication/ReMessageSettings.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar ConfigurationWrapperWupMessage = /*#__PURE__*/function () {\n  function ConfigurationWrapperWupMessage() {\n    _classCallCheck(this, ConfigurationWrapperWupMessage);\n  }\n  return _createClass(ConfigurationWrapperWupMessage, null, [{\n    key: \"createReMessageSettings\",\n    value: function createReMessageSettings(configurationRepository) {\n      return new _worker_communication_ReMessageSettings__WEBPACK_IMPORTED_MODULE_1__[\"default\"](configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupMessageNumToRetry), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupMessageRetryInterval), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupIncrementalGrowthBetweenFailures), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupMaxIntervalBetweenFailures), configurationRepository.get(_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupRetryOnNetworkFailureOnly));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/events/HeartBeatEvent.js\":\n/*!*******************************************!*\\\n  !*** ./src/main/events/HeartBeatEvent.js ***!\n  \\*******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ HeartBeatEvent; },\n/* harmony export */   statusTypes: function() { return /* binding */ statusTypes; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nvar statusTypes = {\n  Ok: 'oK',\n  Error: 'Error',\n  RequestError: 'RequestError'\n};\nvar HeartBeatEvent = /*#__PURE__*/_createClass(function HeartBeatEvent(category, status) {\n  _classCallCheck(this, HeartBeatEvent);\n  this.category = category;\n  this.status = status;\n});\n\n\n/***/ }),\n\n/***/ \"./src/main/events/MessageBusEventType.js\":\n/*!************************************************!*\\\n  !*** ./src/main/events/MessageBusEventType.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageBusEventType: function() { return /* binding */ MessageBusEventType; }\n/* harmony export */ });\nvar MessageBusEventType = {\n  TouchEvent: 'touchEvent',\n  KeyEvent: 'keyEvent',\n  MainThreadBlocking: 'MainThreadBlocking',\n  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',\n  NewSessionStartedEvent: 'NewSessionStartedEvent',\n  WupDispatchRateUpdatedEvent: 'WupDispatchRateUpdatedEvent',\n  ApiContextChangeEvent: 'ApiContextChangeEvent',\n  ApiResetSessionEvent: 'ApiResetSessionEvent',\n  ApiCustomerMetadataEvent: 'ApiCustomerMetadataEvent',\n  ApiChangeStateEvent: 'ApiChangeStateEvent',\n  ApiSetCsidEvent: 'ApiSetCsidEvent',\n  ApiSetPsidEvent: 'ApiSetPsidEvent',\n  ApiSetCustomerBrand: 'ApiSetCustomerBrand',\n  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',\n  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',\n  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent',\n  StateChangedEvent: 'StateChangedEvent',\n  MutationSingleEvent: 'MutationSingleEvent',\n  MutationAddedNodes: 'MutationAddedNodes',\n  MutationRemovedNodes: 'MutationRemovedNodes',\n  StandardInputEvent: 'StandardInputEvent',\n  StandardInputFocusEvent: 'StandardInputFocusEvent',\n  StandardInputBlurEvent: 'StandardInputBlurEvent',\n  StandardOnClickEvent: 'StandardOnClickEvent',\n  StandardOnSelectEvent: 'StandardOnSelectEvent',\n  ElementFocusEvent: 'ElementFocusEvent',\n  ElementBlurEvent: 'ElementBlurEvent',\n  StandardOnFormSubmitEvent: 'StandardOnFormSubmitEvent',\n  SyntheticInputMaskEvent: 'SyntheticInputMaskEvent',\n  CutEvent: 'CutEvent',\n  CopyEvent: 'CopyEvent',\n  PasteEvent: 'PasteEvent',\n  DeviceOrientationEvent: 'DeviceOrientationEvent',\n  BeforeInstallPromptEvent: 'BeforeInstallPromptEvent',\n  FocusEvent: 'FocusEvent',\n  BlurEvent: 'BlurEvent',\n  ResizeEvent: 'ResizeEvent',\n  DOMContentLoadedEvent: 'DOMContentLoadedEvent',\n  VisibilityChangeEvent: 'VisibilityChangeEvent',\n  ScrollEvent: 'ScrollEvent',\n  WindowMessageEvent: 'WindowMessageEvent',\n  WorkerSystemStatusEvent: 'WorkerSystemStatusEvent',\n  CustomElementDetectedEvent: 'CustomElementDetectedEvent',\n  CustomElementAddedEvent: 'CustomElementAddedEvent',\n  CustomElementRemovedEvent: 'CustomElementRemovedEvent',\n  CustomElementInaccessible: 'CustomElementInaccessible',\n  CustomElementSubmitted: 'CustomElementSubmitted',\n  BrowserContextAdded: 'BrowserContextAdded',\n  RunDefaultFeatures: 'RunDefaultFeatures',\n  StopDefaultFeatures: 'StopDefaultFeatures',\n  CustomInputElement: 'CustomInputElement',\n  BCTracker: {\n    ElementsEvent: 'BCTrackerElementsEvent',\n    ElementEventsEvent: 'BCTrackerElementEventsEvent',\n    KeyEvent: 'BCTrackerKeyEvent',\n    TouchEvent: 'BCTrackerTouchEvent',\n    MouseEvent: 'BCTrackerMouseEvent'\n  }\n};\n\n/***/ }),\n\n/***/ \"./src/main/events/WorkerCommand.js\":\n/*!******************************************!*\\\n  !*** ./src/main/events/WorkerCommand.js ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkerCommand: function() { return /* binding */ WorkerCommand; }\n/* harmony export */ });\nvar WorkerCommand = {\n  requestConfigurationsCommand: 'requestConfigurationsCommand',\n  startNewSessionCommand: 'startNewSessionCommand',\n  resumeSessionCommand: 'resumeSessionCommand',\n  changeContextCommand: 'changeContextCommand',\n  updateCsidCommand: 'updateCsidCommand',\n  updatePsidCommand: 'updatePsidCommand',\n  updateLogUrlCommand: 'updateLogUrl',\n  sendDataCommand: 'sendDataCommand',\n  sendLogCommand: 'sendLogCommand',\n  updateBrandCommand: 'updateBrandCommand',\n  stateUpdateFromStorage: 'stateUpdateFromStorage',\n  setAgentTypeCommand: 'setAgentTypeCommand',\n  updateAgentIdCommand: 'updateAgentIdCommand',\n  enableWupMessagesHashingCommand: 'enableWupMessagesHashingCommand',\n  updateSDKStateCommand: 'updateSDKState',\n  scanFontsCommand: 'scanFontsCommand'\n};\n\n/***/ }),\n\n/***/ \"./src/main/events/WorkerEvent.js\":\n/*!****************************************!*\\\n  !*** ./src/main/events/WorkerEvent.js ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkerEvent: function() { return /* binding */ WorkerEvent; }\n/* harmony export */ });\nvar WorkerEvent = {\n  NewSessionStartedEvent: 'NewSessionStartedEvent',\n  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',\n  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',\n  HeartBeatStatusEvent: 'HeartBeatStatusEvent',\n  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',\n  SetAgentTypeEvent: 'SetAgentTypeEvent',\n  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent'\n};\n\n/***/ }),\n\n/***/ \"./src/main/events/WorkerResponse.js\":\n/*!*******************************************!*\\\n  !*** ./src/main/events/WorkerResponse.js ***!\n  \\*******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkerResponse: function() { return /* binding */ WorkerResponse; }\n/* harmony export */ });\nvar WorkerResponse = {\n  fontDetectionResponse: 'fontDetectionResponse'\n};\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/CDEvent.js\":\n/*!********************************************!*\\\n  !*** ./src/main/infrastructure/CDEvent.js ***!\n  \\********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ CDEvent; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar CDEvent = /*#__PURE__*/function () {\n  function CDEvent() {\n    _classCallCheck(this, CDEvent);\n    this._listeners = [];\n  }\n  return _createClass(CDEvent, [{\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      this._listeners.push(listener);\n    }\n  }, {\n    key: \"publish\",\n    value: function publish(args) {\n      for (var i = 0, len = this._listeners.length; i < len; i++) {\n        this._listeners[i](args);\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(callback) {\n      for (var i = 0, len = this._listeners.length; i < len; i++) {\n        if (callback === this._listeners[i]) {\n          this._listeners.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/CDMap.js\":\n/*!******************************************!*\\\n  !*** ./src/main/infrastructure/CDMap.js ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: function() { return /* binding */ create; },\n/* harmony export */   createLocal: function() { return /* binding */ createLocal; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/*\n * A polyfill for unsupported mode. This polyfill has O(n) on all methods so its a big piece of junk but will due for our needs\n * @constructor\n */\nvar CDMap = /*#__PURE__*/function () {\n  function CDMap() {\n    _classCallCheck(this, CDMap);\n    this._pairs = [];\n    this.size = 0;\n  }\n  return _createClass(CDMap, [{\n    key: \"has\",\n    value: function has(key) {\n      return this._indexOf(key) > -1;\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var index = this._indexOf(key);\n      if (index > -1) {\n        return this._pairs[index][1];\n      }\n      return undefined;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      var index = this._indexOf(key);\n      if (index > -1) {\n        this._pairs[index][1] = value;\n      } else {\n        this._pairs.push([key, value]);\n        this.size++;\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var index = this._indexOf(key);\n      if (index > -1) {\n        this._pairs.splice(index, 1);\n        this.size--;\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(cb) {\n      for (var i = 0; i < this._pairs.length; i++) {\n        cb(this._pairs[i][1], this._pairs[i][0]);\n      }\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._pairs = [];\n    }\n  }, {\n    key: \"_indexOf\",\n    value: function _indexOf(key) {\n      for (var i = 0; i < this._pairs.length; i++) {\n        if (this._pairs[i][0] === key) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  }]);\n}();\nvar create = function create() {\n  var Ctor = self.Map || CDMap;\n  return new Ctor();\n};\nvar createLocal = function createLocal() {\n  return new CDMap();\n};\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/CDPort.js\":\n/*!*******************************************!*\\\n  !*** ./src/main/infrastructure/CDPort.js ***!\n  \\*******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ CDPort; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar CDPort = /*#__PURE__*/function () {\n  function CDPort(nativeWorker) {\n    _classCallCheck(this, CDPort);\n    this._portNativeWorker = nativeWorker;\n  }\n\n  /* eslint-disable prefer-rest-params */\n  return _createClass(CDPort, [{\n    key: \"postMessage\",\n    value: function postMessage() {\n      this._portNativeWorker.postMessage.apply(this._portNativeWorker, arguments);\n    }\n\n    /* eslint-enable prefer-rest-params */\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._portNativeWorker.terminate();\n    }\n\n    // in the original is was set onmessage using a setter but since IE8 does not support setters I changed\n  }, {\n    key: \"setonmessage\",\n    value: function setonmessage(cb) {\n      this._portNativeWorker.onmessage = cb;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/CDSet.js\":\n/*!******************************************!*\\\n  !*** ./src/main/infrastructure/CDSet.js ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: function() { return /* binding */ create; },\n/* harmony export */   createLocal: function() { return /* binding */ createLocal; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/*\n * A polyfill for unsupported mode. It is not a full polyfill since it does not support Object as a value and more,\n * but enough for our needs...\n * @constructor\n */\nvar CDSet = /*#__PURE__*/function () {\n  function CDSet() {\n    _classCallCheck(this, CDSet);\n    this._set = [];\n    this.size = 0;\n  }\n  return _createClass(CDSet, [{\n    key: \"add\",\n    value: function add(val) {\n      this._set.push(val);\n      this.size++;\n      return this; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/add\n    }\n  }, {\n    key: \"has\",\n    value: function has(val) {\n      return this._set.indexOf(val) > -1;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(val) {\n      for (var i = 0; i < this._set.length; i++) {\n        if (this._set[i] === val) {\n          this._set.splice(i, 1);\n          this.size--;\n          return true; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/delete\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(cb) {\n      for (var i = 0; i < this._set.length; i++) {\n        cb(this._set[i]);\n      }\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._set = [];\n    }\n  }]);\n}();\nvar create = function create() {\n  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var Ctor = self.Set || CDSet;\n  var set = new Ctor();\n  for (var i = 0; i < initial_values.length; i++) {\n    set.add(initial_values[i]);\n  }\n  return set;\n};\nvar createLocal = function createLocal() {\n  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var set = new CDSet();\n  for (var i = 0; i < initial_values.length; i++) {\n    set.add(initial_values[i]);\n  }\n  return set;\n};\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/HttpRequestFactory.js\":\n/*!*******************************************************!*\\\n  !*** ./src/main/infrastructure/HttpRequestFactory.js ***!\n  \\*******************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ HttpRequestFactory; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Factory for creating an http request object. If XmlHttpRequest with cors support is available it is used. Otherwise if XDomainRequest is supported it is used.\n * If both are not supported we use XmlHttpRequest...\n */\nvar HttpRequestFactory = /*#__PURE__*/function () {\n  function HttpRequestFactory() {\n    _classCallCheck(this, HttpRequestFactory);\n  }\n  return _createClass(HttpRequestFactory, null, [{\n    key: \"create\",\n    value: function create() {\n      // Notice that the order of the conditions is important!\n      // Best option is if we have XMLHttpRequest with CORS support\n      if (self.XMLHttpRequest && Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype, 'withCredentials')) {\n        return new XMLHttpRequest();\n      }\n      if (self.XDomainRequest) {\n        // Second option is if we have XDomainRequest which also supports CORS (God bless Microsoft)\n        return new XDomainRequest();\n      }\n      if (!self.XMLHttpRequest) {\n        throw new Error('There is no supported http request object');\n      }\n\n      // If non of the above is available and the XmlHttpRequest is available we use it without the CORS support\n      return new XMLHttpRequest();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/infrastructure/Queue.js\":\n/*!******************************************!*\\\n  !*** ./src/main/infrastructure/Queue.js ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Queue; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Queue = /*#__PURE__*/function () {\n  function Queue() {\n    _classCallCheck(this, Queue);\n    this._buffer = [];\n  }\n  return _createClass(Queue, [{\n    key: \"hasItems\",\n    value: function hasItems() {\n      return this.length() > 0;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return this._buffer.length;\n    }\n  }, {\n    key: \"enqueue\",\n    value: function enqueue(item) {\n      this._buffer.push(item);\n    }\n  }, {\n    key: \"enqueueToHead\",\n    value: function enqueueToHead(item) {\n      this._buffer.unshift(item);\n    }\n  }, {\n    key: \"dequeue\",\n    value: function dequeue() {\n      return this._buffer.shift();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(index) {\n      return this._buffer[index];\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/services/BatchProcessor.js\":\n/*!*********************************************!*\\\n  !*** ./src/main/services/BatchProcessor.js ***!\n  \\*********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ BatchProcessor; }\n/* harmony export */ });\n/* harmony import */ var _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * BatchProcessor\n * Efficiently processes items in a list by processing them in controlled batches.\n * This approach avoids blocking the browser's main thread and ensures responsiveness\n * for UI interactions. Supports adaptive batch sizing based on frame performance.\n */\nvar BatchProcessor = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Object} config - Configuration object.\n   * @param {number} config.batchSize - Number of items to process per batch.\n   * @param {number} config.timeoutGap - Timeout gap between batches in milliseconds.\n   * @param {number} [config.frameBudgetMs=8] - Maximum time per frame in milliseconds.\n   * @param {boolean} [config.adaptiveEnabled=true] - Whether to enable adaptive batch sizing.\n   */\n  function BatchProcessor(_ref) {\n    var batchSize = _ref.batchSize,\n      timeoutGap = _ref.timeoutGap,\n      _ref$frameBudgetMs = _ref.frameBudgetMs,\n      frameBudgetMs = _ref$frameBudgetMs === void 0 ? 8 : _ref$frameBudgetMs,\n      _ref$minBatchSize = _ref.minBatchSize,\n      minBatchSize = _ref$minBatchSize === void 0 ? 1 : _ref$minBatchSize,\n      _ref$maxBatchSize = _ref.maxBatchSize,\n      maxBatchSize = _ref$maxBatchSize === void 0 ? 200 : _ref$maxBatchSize,\n      _ref$historySize = _ref.historySize,\n      historySize = _ref$historySize === void 0 ? 5 : _ref$historySize,\n      _ref$targetUtilizatio = _ref.targetUtilization,\n      targetUtilization = _ref$targetUtilizatio === void 0 ? 0.8 : _ref$targetUtilizatio,\n      _ref$adaptiveEnabled = _ref.adaptiveEnabled,\n      adaptiveEnabled = _ref$adaptiveEnabled === void 0 ? true : _ref$adaptiveEnabled;\n    _classCallCheck(this, BatchProcessor);\n    if (batchSize === undefined || batchSize === null) throw new Error(\"The 'batchSize' parameter is required.\");\n    if (batchSize <= 0) throw new Error(\"The 'batchSize' parameter must be greater than 0.\");\n    if (timeoutGap === undefined || timeoutGap === null) throw new Error(\"The 'timeoutGap' parameter is required.\");\n\n    // Configuration properties\n    this.batchSize = batchSize; // Default batch size if not provided\n    this.timeoutGap = timeoutGap;\n    this.frameBudgetMs = frameBudgetMs;\n    this.adaptiveEnabled = adaptiveEnabled;\n\n    // Adaptive batch sizing properties\n    this._minBatchSize = minBatchSize;\n    this._maxBatchSize = maxBatchSize; // Prevent excessive batch sizes\n    this._historySize = historySize; // Keep track of last 5 frames\n    this._targetUtilization = targetUtilization; // Target 80% of frame budget usage\n\n    // Static properties\n    this._currentBatchSize = this.batchSize;\n    this._frameHistory = []; // Track recent frame durations\n\n    // Flag to track if the processor has been released\n    this._hasReleased = false;\n    this._logsTag = \"[BATCH-PROCESSOR]\";\n  }\n\n  /**\n   * Releases resources associated with the BatchProcessor.\n   * Marks the processor as released and prevents further operations.\n   *\n   * @returns {Promise<void>} Resolves when all resources are released.\n   */\n  return _createClass(BatchProcessor, [{\n    key: \"release\",\n    value: (function () {\n      var _release = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this._hasReleased = true;\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function release() {\n        return _release.apply(this, arguments);\n      }\n      return release;\n    }()\n    /**\n     * Processes the provided list of items using the specified item processor function.\n     * The operation is performed in frame-budgeted chunks to maintain responsiveness.\n     *\n     * @param {Object} params - Named parameters object\n     * @param {Function} params.processItem - Async function to run for each item. Should return true to include the item in results, false otherwise.\n     * @param {Array} params.items - List of items to process.\n     * @returns {Promise<Array>} A promise that resolves with a list of included items.\n     * @throws {Error} If the processor has been released or is released during processing.\n     */\n    )\n  }, {\n    key: \"process\",\n    value: (function () {\n      var _process = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2) {\n        var processItem, items, results, currentIndex, frameStartTime, processedInFrame, frameDuration;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              processItem = _ref2.processItem, items = _ref2.items;\n              if (!this._hasReleased) {\n                _context2.next = 3;\n                break;\n              }\n              throw new Error(\"BatchProcessor has been released and cannot be used.\");\n            case 3:\n              if (!(typeof processItem !== 'function')) {\n                _context2.next = 5;\n                break;\n              }\n              throw new TypeError(\"The 'processItem' parameter must be a function.\");\n            case 5:\n              if (Array.isArray(items)) {\n                _context2.next = 7;\n                break;\n              }\n              throw new TypeError(\"The 'items' parameter must be an array.\");\n            case 7:\n              if (!(items.length === 0)) {\n                _context2.next = 9;\n                break;\n              }\n              return _context2.abrupt(\"return\", []);\n            case 9:\n              results = [];\n              currentIndex = 0;\n            case 11:\n              if (!(currentIndex < items.length)) {\n                _context2.next = 27;\n                break;\n              }\n              if (!this._hasReleased) {\n                _context2.next = 14;\n                break;\n              }\n              throw new Error(\"BatchProcessor was released during processing. Operation aborted.\");\n            case 14:\n              frameStartTime = performance.now();\n              _context2.next = 17;\n              return this._processFrame(processItem, items, currentIndex, results);\n            case 17:\n              processedInFrame = _context2.sent;\n              currentIndex += processedInFrame;\n              frameDuration = performance.now() - frameStartTime; // Adjust batch size based on frame performance (if adaptive enabled)\n              if (this.adaptiveEnabled) {\n                this._adjustBatchSize(frameDuration, processedInFrame);\n              }\n\n              // Only log if trace is enabled to avoid string formatting overhead\n              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trace(\"\".concat(this._logsTag, \" Frame processed \").concat(processedInFrame, \" items in \").concat(frameDuration.toFixed(2), \"ms. Progress: \").concat(currentIndex, \"/\").concat(items.length));\n\n              // Yield control if there are more items to process\n              if (!(currentIndex < items.length)) {\n                _context2.next = 25;\n                break;\n              }\n              _context2.next = 25;\n              return this._yield();\n            case 25:\n              _context2.next = 11;\n              break;\n            case 27:\n              if (!this._hasReleased) {\n                _context2.next = 29;\n                break;\n              }\n              throw new Error(\"BatchProcessor was released after processing. Operation aborted.\");\n            case 29:\n              return _context2.abrupt(\"return\", results);\n            case 30:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n      return process;\n    }()\n    /**\n     * Processes items within a single frame budget, yielding control when the budget is exceeded.\n     *\n     * @param {Function} processItem - Async function to run for each item. Should return true to include the item in results, false otherwise.\n     * @param {Array} items - Complete list of items to process.\n     * @param {number} startIndex - Starting index for this frame.\n     * @param {Array} results - Accumulated list of included items.\n     * @returns {Promise<number>} Number of items processed in this frame.\n     * @throws {Error} If the processor is released during processing.\n     */\n    )\n  }, {\n    key: \"_processFrame\",\n    value: (function () {\n      var _processFrame2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(processItem, items, startIndex, results) {\n        var processedCount, frameStartTime, maxBatchSize, i, itemIndex, item, shouldInclude;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              processedCount = 0;\n              frameStartTime = performance.now();\n              maxBatchSize = Math.min(this._currentBatchSize, items.length - startIndex);\n              i = 0;\n            case 4:\n              if (!(i < maxBatchSize)) {\n                _context3.next = 26;\n                break;\n              }\n              if (!this._hasReleased) {\n                _context3.next = 7;\n                break;\n              }\n              throw new Error(\"BatchProcessor was released during frame processing. Operation aborted.\");\n            case 7:\n              itemIndex = startIndex + i;\n              item = items[itemIndex];\n              _context3.prev = 9;\n              _context3.next = 12;\n              return processItem(item);\n            case 12:\n              shouldInclude = _context3.sent;\n              if (shouldInclude === true) {\n                results.push(item);\n              }\n              processedCount++;\n              _context3.next = 21;\n              break;\n            case 17:\n              _context3.prev = 17;\n              _context3.t0 = _context3[\"catch\"](9);\n              _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(\"Error processing item at index \".concat(itemIndex, \":\"), _context3.t0);\n              processedCount++; // Count as processed even if it failed\n            case 21:\n              if (!(performance.now() - frameStartTime > this.frameBudgetMs)) {\n                _context3.next = 23;\n                break;\n              }\n              return _context3.abrupt(\"break\", 26);\n            case 23:\n              i++;\n              _context3.next = 4;\n              break;\n            case 26:\n              return _context3.abrupt(\"return\", processedCount);\n            case 27:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[9, 17]]);\n      }));\n      function _processFrame(_x2, _x3, _x4, _x5) {\n        return _processFrame2.apply(this, arguments);\n      }\n      return _processFrame;\n    }()\n    /**\n     * Yields control back to the browser to maintain responsiveness.\n     * Uses setTimeout to introduce a delay between batches.\n     *\n     * @returns {Promise<void>} Resolves when control is yielded.\n     */\n    )\n  }, {\n    key: \"_yield\",\n    value: function _yield() {\n      return this._delay(this.timeoutGap);\n    }\n\n    /**\n     * Introduces a delay between asynchronous operations to avoid blocking the event loop.\n     *\n     * @param {number} ms - Delay duration in milliseconds.\n     * @returns {Promise<void>} Resolves after the specified delay.\n     */\n  }, {\n    key: \"_delay\",\n    value: function _delay(ms) {\n      return new Promise(function (resolve) {\n        return setTimeout(resolve, ms);\n      });\n    }\n\n    ///////////////////////////////\n    // Adaptive batch sizing\n    ///////////////////////////////\n\n    /**\n     * Adjusts the batch size based on recent frame performance.\n     * Uses a simple algorithm to increase batch size when frames are under-utilized\n     * and decrease when frames are over-utilized.\n     *\n     * @param {number} frameDuration - Duration of the last frame in milliseconds.\n     * @param {number} itemsProcessed - Number of items processed in the last frame.\n     */\n  }, {\n    key: \"_adjustBatchSize\",\n    value: function _adjustBatchSize(frameDuration, itemsProcessed) {\n      if (itemsProcessed === 0) return; // Skip adjustment if no items were processed\n\n      // Add current frame duration to history\n      this._frameHistory.push(frameDuration);\n      if (this._frameHistory.length > this._historySize) {\n        this._frameHistory.shift(); // Remove oldest entry\n      }\n\n      // Only adjust if we have enough history\n      if (this._frameHistory.length < 2) return;\n      var avgFrameDuration = this._frameHistory.reduce(function (sum, duration) {\n        return sum + duration;\n      }, 0) / this._frameHistory.length;\n      var targetDuration = this.frameBudgetMs * this._targetUtilization;\n      var currentUtilization = avgFrameDuration / this.frameBudgetMs;\n      var newBatchSize = this._currentBatchSize;\n      if (currentUtilization < this._targetUtilization * 0.8) {\n        // Under-utilized: increase batch size\n        newBatchSize = Math.min(this._maxBatchSize, Math.ceil(this._currentBatchSize * 1.5));\n      } else if (currentUtilization > this._targetUtilization * 1.2) {\n        // Over-utilized: decrease batch size\n        newBatchSize = Math.max(this._minBatchSize, Math.floor(this._currentBatchSize * 0.7));\n      }\n\n      // Only log if batch size actually changed\n      if (newBatchSize !== this._currentBatchSize) {\n        _technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trace(\"\".concat(this._logsTag, \" Adjusting batch size from \").concat(this._currentBatchSize, \" to \").concat(newBatchSize, \" (avg frame: \").concat(avgFrameDuration.toFixed(2), \"ms, target: \").concat(targetDuration.toFixed(2), \"ms)\"));\n        this._currentBatchSize = newBatchSize;\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/DOMUtils.js\":\n/*!************************************************!*\\\n  !*** ./src/main/technicalServices/DOMUtils.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DOMUtils; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction isPassiveSupported() {\n  var isPassive = false;\n  try {\n    // Test via a getter in the options object to see if the passive property is accessed\n    // browsers throw exception if addEventListener gets an object and not boolean for third param\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        isPassive = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n  } catch (e) {\n    // no support for passive\n  }\n  return isPassive;\n}\nvar DOMUtils = /*#__PURE__*/function () {\n  function DOMUtils() {\n    _classCallCheck(this, DOMUtils);\n  }\n  return _createClass(DOMUtils, null, [{\n    key: \"addEventListener\",\n    value: function addEventListener(target, type, handler) {\n      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      if (this.isPassiveSupported) {\n        target.addEventListener(type, handler, {\n          capture: isCapture,\n          passive: isPassive,\n          once: isOnce\n        });\n      } else if (target.addEventListener) {\n        target.addEventListener(type, handler, isCapture);\n      } else {\n        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent\n      }\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(target, type, handler) {\n      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);\n    }\n\n    // getting the HTML so that it will also work on FF\n  }, {\n    key: \"outerHTML\",\n    value: function outerHTML(node) {\n      return node.outerHTML || new XMLSerializer().serializeToString(node);\n    }\n  }, {\n    key: \"onDocumentBody\",\n    value: function onDocumentBody(frame, callback) {\n      if (frame.document.body) {\n        callback();\n      } else {\n        window.addEventListener ? window.addEventListener('DOMContentLoaded', callback, true) : window.attachEvent('onload', callback); // Old IE does not support DOMContentLoaded\n      }\n    }\n  }, {\n    key: \"onPageLoad\",\n    value: function onPageLoad(frame, callback) {\n      DOMUtils.addEventListener(frame, 'load', callback, true);\n      if (frame.contentWindow && frame.contentWindow.document.readyState === 'complete' || frame.document && frame.document.readyState === 'complete') {\n        // since we still want to listen every time a frame is loaded\n        callback();\n      }\n    }\n  }, {\n    key: \"awaitWindowDocumentReady\",\n    value: function awaitWindowDocumentReady(contentWindow) {\n      var _this = this;\n      return new Promise(function (resolve, reject) {\n        try {\n          _this.onWindowDocumentReady(contentWindow, function () {\n            resolve();\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n  }, {\n    key: \"onWindowDocumentReady\",\n    value: function onWindowDocumentReady(contentWindow, callback) {\n      var eventType = window.addEventListener ? 'DOMContentLoaded' : 'load';\n\n      // We consider both states good since they both mean the dom was already loaded and we can work on the document\n      if (contentWindow.document.readyState === 'complete' || contentWindow.document.readyState === 'interactive') {\n        callback();\n      } else {\n        var onLoaded = function onLoadedWindowEvent() {\n          DOMUtils.removeEventListener(contentWindow, eventType, onLoaded, true);\n          callback();\n        };\n        DOMUtils.addEventListener(contentWindow, eventType, onLoaded, true);\n      }\n    }\n  }, {\n    key: \"isWindowDocumentReady\",\n    value: function isWindowDocumentReady(contentWindow) {\n      return contentWindow && contentWindow.document.readyState === 'complete';\n    }\n  }, {\n    key: \"canAccessIFrame\",\n    value: function canAccessIFrame(iframe) {\n      // If there's no contentWindow, it's not ready\n      if (!iframe.contentWindow) return false;\n\n      // Compare origins *before* touching .document\n      var parentOrigin = window.location.origin;\n      var childOrigin;\n      try {\n        // Some browsers expose it safely via location.origin\n        childOrigin = iframe.contentWindow.location.origin;\n      } catch (_unused) {\n        // Cross-origin => cannot read\n        return false;\n      }\n\n      // If same origin or null origin (for local files), safe to touch\n      if (childOrigin === parentOrigin || childOrigin === \"null\") {\n        try {\n          return !!(iframe.contentDocument && iframe.contentDocument.body);\n        } catch (_unused2) {\n          return false;\n        }\n      }\n\n      // Different origin\n      return false;\n    }\n\n    // Some browsers (for example IE11) have prefixed implementation of matches function but a pollyfill is not good enough\n    // since in some cases the matches function is still missing (for example, removed nodes received from mutation observer)\n    // so we use this function instead...\n  }, {\n    key: \"matches\",\n    value: function matches(element, selector) {\n      var matchesFunc = element.matches || element.matchesSelector || element.mozMatchesSelector || element.msMatchesSelector || element.oMatchesSelector || element.webkitMatchesSelector || function (s) {\n        // Get the document from the element\n        var currentDocument = this.document || this.ownerDocument;\n\n        // If we don't have a document we can't match...\n        if (!currentDocument) {\n          return false;\n        }\n        var matches = currentDocument.querySelectorAll(s);\n        var i = matches.length;\n        while (--i >= 0) {\n          // Get the current item and check if it equals the element\n          // If item property is not available we use the index access (some old browsers have issues sometimes)\n          var currentItem = matches.item ? matches.item(i) : matches[i];\n          if (currentItem === this) {\n            break;\n          }\n        }\n        return i > -1;\n      };\n      return matchesFunc.call(element, selector);\n    }\n\n    //Check if the WebWorker supports fetch API: return true || false\n  }, {\n    key: \"isWebWorkerFetchSupported\",\n    value: function isWebWorkerFetchSupported() {\n      var request = \"Request\" in self;\n      var fetchInSelf = \"fetch\" in self;\n      //IE does not support the \"Request\" object at all, so the if statement is for IE browsers\n      if (!request) return false;\n      var keepAliveInRequestPrototype = \"keepalive\" in Request.prototype;\n      return fetchInSelf && keepAliveInRequestPrototype;\n    }\n  }, {\n    key: \"isSubtleCryptoSupported\",\n    value: function isSubtleCryptoSupported() {\n      return _typeof(self.crypto) === 'object' && _typeof(self.crypto.subtle) === 'object' && typeof self.crypto.subtle.digest === 'function';\n    }\n  }]);\n}();\n_defineProperty(DOMUtils, \"isPassiveSupported\", isPassiveSupported());\n\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/MessageBus.js\":\n/*!**************************************************!*\\\n  !*** ./src/main/technicalServices/MessageBus.js ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDMap */ \"./src/main/infrastructure/CDMap.js\");\n/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../infrastructure/CDSet */ \"./src/main/infrastructure/CDSet.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n/**\n *\n */\nvar MessageBus = /*#__PURE__*/function () {\n  function MessageBus() {\n    _classCallCheck(this, MessageBus);\n    this.subscribers = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();\n  }\n\n  /**\n   *\n   * @param messageType\n   * @param handler\n   * @param isOneTime\n   */\n  return _createClass(MessageBus, [{\n    key: \"subscribe\",\n    value: function subscribe(messageType, handler) {\n      var isOneTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var listenersSet;\n      var foundHandler = false;\n      if (this.subscribers.has(messageType)) {\n        listenersSet = this.subscribers.get(messageType);\n        listenersSet && listenersSet.forEach(function (listener) {\n          if (handler === listener.handler) {\n            foundHandler = true;\n          }\n        });\n      } else {\n        listenersSet = _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create();\n        this.subscribers.set(messageType, listenersSet);\n      }\n      if (!foundHandler) {\n        listenersSet.add({\n          handler: handler,\n          isOneTime: isOneTime\n        });\n      }\n    }\n\n    /**\n     *\n     * @param messageType\n     * @param handler\n     */\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(messageType, handler) {\n      if (messageType && this.subscribers.has(messageType)) {\n        var listenersSet = this.subscribers.get(messageType);\n        listenersSet && listenersSet.forEach(function (listener) {\n          if (handler === listener.handler) {\n            listenersSet[\"delete\"](listener);\n          }\n        });\n        if (listenersSet.size === 0) {\n          this.subscribers[\"delete\"](messageType);\n        }\n      }\n    }\n\n    /**\n     *\n     * @param messageType\n     * @param message\n     */\n  }, {\n    key: \"publish\",\n    value: function publish(messageType, message) {\n      if (!messageType) {\n        throw new Error('invalid argument messageType must be defined');\n      }\n      this._notifySubscribers(messageType, message);\n    }\n\n    /**\n     *\n     * @param messageType\n     * @param message\n     */\n  }, {\n    key: \"_notifySubscribers\",\n    value: function _notifySubscribers(messageType, message) {\n      var listenersSet = this.subscribers.get(messageType);\n      listenersSet && listenersSet.forEach(function (listener) {\n        listener.handler(message);\n        if (listener.isOneTime) {\n          listenersSet[\"delete\"](listener);\n        }\n      });\n    }\n  }]);\n}();\n/* harmony default export */ __webpack_exports__[\"default\"] = (MessageBus);\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/WorkerCommunicator.js\":\n/*!**********************************************************!*\\\n  !*** ./src/main/technicalServices/WorkerCommunicator.js ***!\n  \\**********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerCommunicator; }\n/* harmony export */ });\n/* harmony import */ var _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../infrastructure/CDMap */ \"./src/main/infrastructure/CDMap.js\");\n/* harmony import */ var _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../infrastructure/CDSet */ \"./src/main/infrastructure/CDSet.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n// The WorkerCommunicator can communicate between the main and the worker and also can\n// exist in the worker and communicate with the main. All depends on the implementation\n// of messagePort. messagePort is an object that must implement onmessage and potMessage functions\nvar WorkerCommunicator = /*#__PURE__*/function () {\n  function WorkerCommunicator() {\n    _classCallCheck(this, WorkerCommunicator);\n    this._msgListeners = _infrastructure_CDMap__WEBPACK_IMPORTED_MODULE_0__.create();\n  }\n  return _createClass(WorkerCommunicator, [{\n    key: \"setMessagingPort\",\n    value: function setMessagingPort(messagePort) {\n      var _this = this;\n      this._messagePort = messagePort;\n      messagePort.setonmessage(function (e) {\n        var msg = e.data;\n        var oneTimeListeners = [];\n        // call the relevant msg listeners by the msgType\n        var listenersSet = _this._msgListeners.get(msg.msgType);\n        listenersSet && listenersSet.forEach(function (listener) {\n          listener.callback(msg.data);\n          if (listener.isOneTime) {\n            oneTimeListeners.push(listener);\n          }\n        });\n\n        // Remove one time listeners out side of the main foreach since otherwise you get unexpected results (think about it)\n        oneTimeListeners.forEach(function (item) {\n          listenersSet[\"delete\"](item);\n        });\n      });\n    }\n\n    // All the parameters after data are optional. Using them is just a shortcut for calling addMessageListener separately\n  }, {\n    key: \"sendAsync\",\n    value: function sendAsync(msgType, data, responseMsgType, onResponse, isOneTime) {\n      if (onResponse && responseMsgType) {\n        this.addMessageListener(responseMsgType, onResponse, isOneTime);\n      }\n      this._messagePort.postMessage({\n        msgType: msgType,\n        data: data\n      });\n    }\n  }, {\n    key: \"addMessageListener\",\n    value: function addMessageListener(msgType, callback, isOneTime) {\n      var listenersSet = null;\n      if (this._msgListeners.has(msgType)) {\n        listenersSet = this._msgListeners.get(msgType);\n      } else {\n        listenersSet = _infrastructure_CDSet__WEBPACK_IMPORTED_MODULE_1__.create();\n        this._msgListeners.set(msgType, listenersSet);\n      }\n      listenersSet.add({\n        callback: callback,\n        isOneTime: isOneTime\n      });\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/log/LogBridge.js\":\n/*!*****************************************************!*\\\n  !*** ./src/main/technicalServices/log/LogBridge.js ***!\n  \\*****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogBridge; }\n/* harmony export */ });\n/* harmony import */ var _worker_LogAggregator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../worker/LogAggregator */ \"./src/worker/LogAggregator.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar LogBridge = /*#__PURE__*/function () {\n  function LogBridge(logAggregator, url) {\n    var msgPrefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    _classCallCheck(this, LogBridge);\n    this.sn = 0;\n    this.url = url;\n    this.logAggregator = logAggregator;\n    this.msgPrefix = msgPrefix;\n  }\n  return _createClass(LogBridge, [{\n    key: \"log\",\n    value: function log(msg, logLevel, sessionIdentifiers) {\n      this.logAggregator.add({\n        eventName: 'log',\n        data: _objectSpread(_objectSpread({\n          msg: this.msgPrefix + msg\n        }, sessionIdentifiers), {}, {\n          url: this.url,\n          level: logLevel,\n          sn: this.sn++\n        })\n      });\n    }\n  }, {\n    key: \"setLogLevel\",\n    value: function setLogLevel(logLevel) {\n      if (this.logAggregator instanceof _worker_LogAggregator__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n        this.logAggregator.setLogLevel(logLevel);\n      }\n    }\n  }, {\n    key: \"clearLogEntriesByLogLevel\",\n    value: function clearLogEntriesByLogLevel(logLevel) {\n      this.logAggregator.filterOutByLogLevel(logLevel);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/log/LogLevel.js\":\n/*!****************************************************!*\\\n  !*** ./src/main/technicalServices/log/LogLevel.js ***!\n  \\****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: function() { return /* binding */ LogLevel; }\n/* harmony export */ });\nvar LogLevel = {\n  DEBUG: 10,\n  INFO: 20,\n  WARN: 30,\n  ERROR: 40,\n  CRITICAL: 50,\n  OFF: 80\n};\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/log/Logger.js\":\n/*!**************************************************!*\\\n  !*** ./src/main/technicalServices/log/Logger.js ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Logger: function() { return /* binding */ Logger; },\n/* harmony export */   \"default\": function() { return /* binding */ Log; }\n/* harmony export */ });\n/* harmony import */ var _LogLevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LogLevel */ \"./src/main/technicalServices/log/LogLevel.js\");\n/* harmony import */ var _core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// eslint-disable-next-line max-classes-per-file\n\n\nvar Log = /*#__PURE__*/function () {\n  function Log() {\n    _classCallCheck(this, Log);\n  }\n  return _createClass(Log, null, [{\n    key: \"setLogger\",\n    value: function setLogger(logger) {\n      this._logger = logger;\n    }\n  }, {\n    key: \"attachSessionIdentifiers\",\n    value: function attachSessionIdentifiers(sessionIdentifiers) {\n      if (!this._logger) {\n        return;\n      }\n      return this._logger.attachSessionIdentifiers(sessionIdentifiers);\n    }\n  }, {\n    key: \"isDebug\",\n    value: function isDebug() {\n      if (!this._logger) {\n        return;\n      }\n      return this._logger.isDebug();\n    }\n  }, {\n    key: \"error\",\n    value: function error(msg, ex) {\n      if (!this._logger) {\n        return;\n      }\n      this._logger.error(msg, ex || null);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(msg, ex) {\n      if (!this._logger) {\n        return;\n      }\n      this._logger.warn(msg, ex || null);\n    }\n  }, {\n    key: \"trace\",\n    value: function trace(msg) {\n      if (!this._logger) {\n        return;\n      }\n      this._logger.trace(msg);\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(msg) {\n      if (!this._logger) {\n        return;\n      }\n      this._logger.debug(msg);\n    }\n  }, {\n    key: \"info\",\n    value: function info(msg) {\n      if (!this._logger) {\n        return;\n      }\n      this._logger.info(msg);\n    }\n\n    /**\n     * Helper function to determine if we should log based on exponential pattern\n     * Logs at attempts: 1, 2, 4, 8, 16, and the final attempt\n     * @param {number} retryCount - Current retry count (1-based)\n     * @param {number} maxRetries - Maximum retry count\n     * @returns {boolean} - Whether to log this attempt\n     */\n  }, {\n    key: \"shouldLogRetry\",\n    value: function shouldLogRetry(retryCount, maxRetries) {\n      // Always log first attempt and final attempt\n      if (retryCount === 1 || retryCount >= maxRetries) {\n        return true;\n      }\n      // Log if retry count is a power of 2 (2, 4, 8, 16, etc.)\n      return retryCount > 0 && (retryCount & retryCount - 1) === 0;\n    }\n\n    /**\n     * Log a warning message with smart retry logic (only logs at exponential intervals)\n     * @param {string} msg - The message to log\n     * @param {number} retryCount - Current retry count (1-based)\n     * @param {number} maxRetries - Maximum retry count\n     * @param {Error} [ex] - Optional exception\n     */\n  }, {\n    key: \"warnRetry\",\n    value: function warnRetry(msg, retryCount, maxRetries, ex) {\n      if (this.shouldLogRetry(retryCount, maxRetries)) {\n        this.warn(msg, ex);\n      }\n    }\n\n    /**\n     * Log an error message with smart retry logic (only logs at exponential intervals)\n     * @param {string} msg - The message to log\n     * @param {number} retryCount - Current retry count (1-based)\n     * @param {number} maxRetries - Maximum retry count\n     * @param {Error} [ex] - Optional exception\n     */\n  }, {\n    key: \"errorRetry\",\n    value: function errorRetry(msg, retryCount, maxRetries, ex) {\n      if (this.shouldLogRetry(retryCount, maxRetries)) {\n        this.error(msg, ex);\n      }\n    }\n\n    /**\n     * Log an info message with smart retry logic (only logs at exponential intervals)\n     * @param {string} msg - The message to log\n     * @param {number} retryCount - Current retry count (1-based)\n     * @param {number} maxRetries - Maximum retry count\n     */\n  }, {\n    key: \"infoRetry\",\n    value: function infoRetry(msg, retryCount, maxRetries) {\n      if (this.shouldLogRetry(retryCount, maxRetries)) {\n        this.info(msg);\n      }\n    }\n  }]);\n}();\n\nvar Logger = /*#__PURE__*/function () {\n  function Logger(logBridge, logLevel) {\n    _classCallCheck(this, Logger);\n    this._logBridge = logBridge;\n    this._logLevel = logLevel || _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO;\n    this._sessionIdentifiers = {};\n  }\n  return _createClass(Logger, [{\n    key: \"attachSessionIdentifiers\",\n    value: function attachSessionIdentifiers(sessionIdentifiers) {\n      // add the provided identifiers to the existing ones.\n      Object.assign(this._sessionIdentifiers, sessionIdentifiers);\n    }\n  }, {\n    key: \"trace\",\n    value: function trace(msg) {\n      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG); // The server does not support trace\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(msg) {\n      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG);\n    }\n  }, {\n    key: \"info\",\n    value: function info(msg) {\n      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(msg, ex) {\n      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.WARN, ex);\n    }\n  }, {\n    key: \"error\",\n    value: function error(msg, ex) {\n      this._sendToLogBridge(msg, _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.ERROR, ex);\n    }\n  }, {\n    key: \"isDebug\",\n    value: function isDebug() {\n      return this._logLevel === _LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG;\n    }\n  }, {\n    key: \"updateLogConfig\",\n    value: function updateLogConfig(configurationRepository) {\n      this._logLevel = configurationRepository.get(_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logLevel) || this._logLevel;\n      this._logBridge.setLogLevel(this._logLevel);\n      this._logBridge.clearLogEntriesByLogLevel(this._logLevel);\n    }\n  }, {\n    key: \"_sendToLogBridge\",\n    value: function _sendToLogBridge(msg, logLevel, ex) {\n      if (logLevel >= this._logLevel) {\n        if (ex && ex.stack) {\n          msg += \" ;stack: \".concat(ex.stack);\n        }\n        this._logBridge.log(msg, logLevel, this._sessionIdentifiers);\n      }\n    }\n  }]);\n}();\n\n/***/ }),\n\n/***/ \"./src/worker/Application.js\":\n/*!***********************************!*\\\n  !*** ./src/worker/Application.js ***!\n  \\***********************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Application; }\n/* harmony export */ });\n/* harmony import */ var _WorkerStartPoint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WorkerStartPoint */ \"./src/worker/WorkerStartPoint.js\");\n/* harmony import */ var _main_common_polyfills_TextEncoderPolyfill_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main/common/polyfills/TextEncoderPolyfill.js */ \"./src/main/common/polyfills/TextEncoderPolyfill.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Application = /*#__PURE__*/function () {\n  function Application() {\n    _classCallCheck(this, Application);\n    (0,_main_common_polyfills_TextEncoderPolyfill_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(self);\n  }\n  return _createClass(Application, [{\n    key: \"start\",\n    value: function start() {\n      new _WorkerStartPoint__WEBPACK_IMPORTED_MODULE_0__[\"default\"]().start();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/DataAggregator.js\":\n/*!**************************************!*\\\n  !*** ./src/worker/DataAggregator.js ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DataAggregator; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar DataAggregator = /*#__PURE__*/function () {\n  // Server communicator should not be used by the repository but until we remove the requestId responsibility from it\n  // we have to do it.\n  function DataAggregator(wupServerSessionState) {\n    _classCallCheck(this, DataAggregator);\n    this._wupServerSessionState = wupServerSessionState;\n    this.reset();\n  }\n  return _createClass(DataAggregator, [{\n    key: \"add\",\n    value: function add(message) {\n      var eventName = message.eventName;\n      var data = message.data;\n      if (!eventName) {\n        throw new Error('Unable to add data message. Missing eventName field');\n      }\n      if (!data) {\n        throw new Error('Unable to add data message. Missing data field');\n      }\n      this._isEmpty = false;\n      this._dataObj[eventName] = this._dataObj[eventName] || [];\n      this._dataObj[eventName].push(data);\n    }\n\n    /**\n     * Takes current data from the aggregator and removes it from the aggregator.\n     * Aggregator is reset to initial empty state\n     * @returns {{static_fields, key_events, mouse_events}|*}\n     */\n  }, {\n    key: \"take\",\n    value: function take() {\n      if (!this._isEmpty) {\n        this._dataObj.static_fields.push(['requestId', this._wupServerSessionState.incrementRequestId()]);\n      }\n      var currentDataObj = this._dataObj;\n      this.reset();\n      return currentDataObj;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._isEmpty = true;\n      this._dataObj = this.getFreshDataObj();\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._isEmpty;\n    }\n  }, {\n    key: \"getFreshDataObj\",\n    value: function getFreshDataObj() {\n      return {\n        static_fields: [],\n        key_events: [],\n        mouse_events: []\n      };\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/DataDispatcher.js\":\n/*!**************************************!*\\\n  !*** ./src/worker/DataDispatcher.js ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DataDispatcher; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * This class runs in the worker side. Responsible for sending the data received\n * to the server. The class aggregates the data and sends it periodically to the server (_sendToServerInterval)\n *  @param serverCommunicator - ServerCommunicator class type\n *  @para, aggregator - responsible for aggregating the data and packing it for delivery\n *  @param wupCtor - Wup class\n *  @param sendRateConfigKey - interval configuration field name for updates\n *  @param sendToServerInterval - interval initial configuration\n */\nvar DataDispatcher = /*#__PURE__*/function () {\n  function DataDispatcher(serverClient, aggregator, wupDispatchRateCalculatorFactory, wupDispatchRateSettings) {\n    _classCallCheck(this, DataDispatcher);\n    this._serverClient = serverClient;\n    this._aggregator = aggregator;\n    this._wupDispatchRateCalculatorFactory = wupDispatchRateCalculatorFactory;\n    this._wupDispatchRateSettings = wupDispatchRateSettings;\n    this._wupDispatchRateCalculator = this._wupDispatchRateCalculatorFactory.create(this._wupDispatchRateSettings);\n    this._sendToServerInterval = this._wupDispatchRateCalculator.getRate();\n    this._setDispatchInterval(this._sendToServerInterval);\n  }\n  return _createClass(DataDispatcher, [{\n    key: \"add\",\n    value: function add(message) {\n      this._aggregator.add(message);\n    }\n  }, {\n    key: \"sendIfRequired\",\n    value: function sendIfRequired() {\n      var shouldFlush = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (this._sendToServerInterval === 0 || shouldFlush) {\n        this._sendToServer(shouldFlush);\n      }\n    }\n  }, {\n    key: \"updateByConfig\",\n    value: function updateByConfig(wupDispatchRateSettings) {\n      if (!wupDispatchRateSettings) {\n        return;\n      }\n      if (wupDispatchRateSettings.type !== this._wupDispatchRateSettings.type) {\n        this._wupDispatchRateCalculator = this._wupDispatchRateCalculatorFactory.create(wupDispatchRateSettings);\n      } else {\n        this._wupDispatchRateCalculator.updateSettings(wupDispatchRateSettings);\n      }\n      this._sendToServerInterval = this._wupDispatchRateCalculator.getRate();\n      this._setDispatchInterval(this._sendToServerInterval);\n      this._wupDispatchRateSettings = wupDispatchRateSettings;\n    }\n  }, {\n    key: \"scheduleNextDispatching\",\n    value: function scheduleNextDispatching() {\n      // Get the new rate for dispatching the wups\n      var newRate = this._wupDispatchRateCalculator.getRate();\n\n      // Update the rate if it is different than the current one we are working at\n      if (newRate !== this._sendToServerInterval) {\n        this._sendToServerInterval = newRate;\n        this._setDispatchInterval(this._sendToServerInterval);\n      }\n    }\n  }, {\n    key: \"_sendToServer\",\n    value: function _sendToServer() {\n      var shouldFlush = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debug('Sending a message to the server');\n      if (!this._serverClient.isReady()) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(\"\".concat(this._serverClient.constructor.name, \" is not ready. Message will not be sent to server\"));\n        return;\n      }\n\n      // If there is no data to send we abort at this point\n      if (this._aggregator.isEmpty()) {\n        return;\n      }\n      this._serverClient.sendData(this._aggregator.take(), shouldFlush);\n      this.scheduleNextDispatching();\n    }\n  }, {\n    key: \"_setDispatchInterval\",\n    value: function _setDispatchInterval(interval) {\n      if (this._sendIntervalId) {\n        clearInterval(this._sendIntervalId);\n        this._sendIntervalId = null;\n      }\n      if (interval !== 0) {\n        this._sendIntervalId = setInterval(this._sendToServer.bind(this), interval);\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/LogAggregator.js\":\n/*!*************************************!*\\\n  !*** ./src/worker/LogAggregator.js ***!\n  \\*************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogAggregator; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/technicalServices/log/LogLevel */ \"./src/main/technicalServices/log/LogLevel.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/*\nAggregates log messages\n */\n\nvar LogAggregator = /*#__PURE__*/function () {\n  function LogAggregator() {\n    _classCallCheck(this, LogAggregator);\n    this.reset();\n  }\n  return _createClass(LogAggregator, [{\n    key: \"setLogLevel\",\n    value: function setLogLevel(logLevel) {\n      this._logLevel = logLevel;\n    }\n  }, {\n    key: \"add\",\n    value: function add(message) {\n      var messageData = message.data;\n      if (!messageData) {\n        throw new Error('Unable to add log message. Missing data field');\n      }\n\n      //We add message to log if:\n      // 1. messsage has no level (performance (\"perf\") events that are posted to worker for logging)\n      // 2. logLevel of the message >= the level of the log\n      if (!messageData.level || messageData.level >= this._logLevel) {\n        this._Q.push(messageData);\n      }\n    }\n\n    /**\n     * Takes current data from the aggregator and removes it from the aggregator.\n     * Aggregator is reset to initial empty state\n     * @returns {Array}\n     */\n  }, {\n    key: \"take\",\n    value: function take() {\n      var currentQ = this._Q;\n      this.reset();\n      return currentQ;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._Q = [];\n      this.setLogLevel(typeof this._logLevel === \"undefined\" ? _main_technicalServices_log_LogLevel__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO : this._logLevel);\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._Q.length === 0;\n    }\n  }, {\n    key: \"filterOutByLogLevel\",\n    value: function filterOutByLogLevel(logLevel) {\n      this._Q = this._Q.filter(\n      // eslint-disable-next-line no-unused-vars\n      function (value, index, arr) {\n        return value.level >= logLevel;\n      });\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/MessageProcessor.js\":\n/*!****************************************!*\\\n  !*** ./src/worker/MessageProcessor.js ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MessageProcessor; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar MessageProcessor = /*#__PURE__*/function () {\n  function MessageProcessor(dataDispatcher) {\n    _classCallCheck(this, MessageProcessor);\n    this._dataDispatcher = dataDispatcher;\n  }\n\n  /**\n   * Initial message processing. Understands if the message is an array of messages or a single message (why do we even send different structures?!?!?!?!)\n   * and forwards accordingly for message processing.\n   * Finally the method triggers the wup dispatcher data send if required.\n   * @param message\n   */\n  return _createClass(MessageProcessor, [{\n    key: \"process\",\n    value: function process(message) {\n      if (!message) {\n        throw new Error('Invalid message received for processing.');\n      }\n      var shouldFlush = false;\n      if (Array.isArray(message)) {\n        for (var i = 0, len = message.length; i < len; i++) {\n          // Check if flush was requested on one of the messages or if flush was already requested just keep it true\n          shouldFlush = this._processSingleMessage(message[i]) || shouldFlush;\n        }\n      } else {\n        // Check if flush was requested on one of the messages or if flush was already requested just keep it true\n        shouldFlush = this._processSingleMessage(message) || shouldFlush;\n      }\n      this._dataDispatcher.sendIfRequired(shouldFlush);\n    }\n\n    /**\n     * Processes a single message. Decides if the message includes a flush request or is a flush message.\n     * Validates the message structure and forwards to wup dispatcher in case there is data to send\n     * @param message\n     * @returns {boolean} - True if a flush of data is required. False otherwise\n     * @private\n     */\n  }, {\n    key: \"_processSingleMessage\",\n    value: function _processSingleMessage(message) {\n      // If the message is a flush message containing no data we just return true for the flush\n      if (this._isEmptyFlushMessage(message)) {\n        return true;\n      }\n\n      // In case the message contains the shouldFlush property we mark should flush as true\n      // but continue to process the data on the message\n      var shouldFlush = false;\n      if (message.shouldFlush) {\n        shouldFlush = true;\n      }\n      if (this._isDataValid(message)) {\n        this._dataDispatcher.add(message);\n      } else {\n        var logMessage = 'Received a message with invalid structure. Missing eventName or Data fields';\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(logMessage);\n        throw new Error(logMessage);\n      }\n      return shouldFlush;\n    }\n  }, {\n    key: \"_isEmptyFlushMessage\",\n    value: function _isEmptyFlushMessage(message) {\n      return message.eventName === 'flushData';\n    }\n  }, {\n    key: \"_isDataValid\",\n    value: function _isDataValid(message) {\n      return message.eventName && message.data;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/WorkerService.js\":\n/*!*************************************!*\\\n  !*** ./src/worker/WorkerService.js ***!\n  \\*************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerService; }\n/* harmony export */ });\n/* harmony import */ var _main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/events/WorkerCommand */ \"./src/main/events/WorkerCommand.js\");\n/* harmony import */ var _main_events_WorkerResponse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main/events/WorkerResponse */ \"./src/main/events/WorkerResponse.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * The class is the worker api entry point. All communication to worker should start here\n */\n\n\n\nvar WorkerService = /*#__PURE__*/function () {\n  function WorkerService(mainCommunicator, wupServerClient, logServerClient, configurationRepository, messageProcessor, logMessageProcessor, wupServerSessionState, dataServerCommunicator, FontsScannerWorker) {\n    _classCallCheck(this, WorkerService);\n    this._mainCommunicator = mainCommunicator;\n    this._wupServerClient = wupServerClient;\n    this._logServerClient = logServerClient;\n    this._configurationRepository = configurationRepository;\n    this._messageProcessor = messageProcessor;\n    this._logMessageProcessor = logMessageProcessor;\n    this._wupServerSessionState = wupServerSessionState;\n    this._dataServerCommunicator = dataServerCommunicator;\n    this._fontsScannerWorker = FontsScannerWorker;\n  }\n\n  /**\n   * Start the worker service. Once called the service will start listening for all relevant worker commands and act upon them.\n   */\n  return _createClass(WorkerService, [{\n    key: \"start\",\n    value: function start() {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug('Starting Worker Service');\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.startNewSessionCommand, this._onStartNewSessionCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.resumeSessionCommand, this._onResumeSessionCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.changeContextCommand, this._onChangeContextCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateCsidCommand, this._onUpdateCsidCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updatePsidCommand, this._onUpdatePsidCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateLogUrlCommand, this._onUpdateLogUrlCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.sendDataCommand, this._onSendDataCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.sendLogCommand, this._onSendLogCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateBrandCommand, this._onUpdateBrandCommand.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.setAgentTypeCommand, this._setSessionAgentType.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateAgentIdCommand, this._onUpdateAgentId.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.enableWupMessagesHashingCommand, this._setWupMessagesHashing.bind(this));\n      this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.scanFontsCommand, this._onScanFontsCommand.bind(this));\n    }\n  }, {\n    key: \"_onStartNewSessionCommand\",\n    value: function _onStartNewSessionCommand(command) {\n      this._wupServerClient.startNewSession(command.cid, command.protocolType, command.minifiedUri, command.csid, command.psid, command.muid, command.contextName, command.serverAddress, command.recoveryServerURL);\n    }\n  }, {\n    key: \"_onResumeSessionCommand\",\n    value: function _onResumeSessionCommand(command) {\n      this._wupServerClient.resumeSession(command.cdsnum, command.cid, command.protocolType, command.minifiedUri, command.csid, command.psid, command.muid, command.contextName, command.serverAddress, command.serverState, command.recoveryServerURL);\n    }\n\n    /**\n     * For cases where the sid is updated during and after init like customer event or late csid\n     * Server expects to request ID to start from 0 every new SID. Can also be used to update the wup wrapper\n     * fields - (csid, context_name etc)\n     * @param data - structure of data - if contains updateParams=true, then fields objects exists,\n     * otherwise pass all the data for initialization\n     */\n  }, {\n    key: \"_onChangeContextCommand\",\n    value: function _onChangeContextCommand(data) {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug('Worker received a ChangeContextCommand from main.');\n      this._wupServerSessionState.setContextName(data.contextName);\n    }\n\n    /**\n     * Handles the UpdateCsidCommand. Function updates the csid in the server communicator session data and sends an update wup to the server\n     * @param data - the csid\n     */\n  }, {\n    key: \"_onUpdateCsidCommand\",\n    value: function _onUpdateCsidCommand(data) {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug(\"Worker received an UpdateCsidCommand from main. CSID: \".concat(data.csid, \".\"));\n      this._wupServerClient.updateCsid(data.csid);\n    }\n\n    /**\n     * Handles the UpdatePsidCommand. Function updates the psid in the server communicator session data and sends an update wup to the server\n     * @param data - the psid\n     */\n  }, {\n    key: \"_onUpdatePsidCommand\",\n    value: function _onUpdatePsidCommand(data) {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug(\"Worker received an UpdatePsidCommand from main. PSID: \".concat(data.psid, \".\"));\n      this._wupServerClient.updatePsid(data.psid);\n    }\n  }, {\n    key: \"_onUpdateLogUrlCommand\",\n    value: function _onUpdateLogUrlCommand(data) {\n      /**\n       * attach the session identifiers to the worker's Log instance.\n       * Log.attachSessionIdentifiers also been called from ConfigurationService.updateLogUrlToWorker so that\n       * it Log static instance will be updated as well.\n       */\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].attachSessionIdentifiers(data.sessionIdentifiers);\n      this._logServerClient.setServerUrl(data.logAddress);\n    }\n  }, {\n    key: \"_onSendDataCommand\",\n    value: function _onSendDataCommand(message) {\n      this._messageProcessor.process(message);\n    }\n  }, {\n    key: \"_onSendLogCommand\",\n    value: function _onSendLogCommand(message) {\n      this._logMessageProcessor.process(message);\n    }\n  }, {\n    key: \"_onUpdateBrandCommand\",\n    value: function _onUpdateBrandCommand(data) {\n      this._wupServerClient.updateBrand(data.brand);\n    }\n  }, {\n    key: \"_setSessionAgentType\",\n    value: function _setSessionAgentType(data) {\n      this._wupServerSessionState.setAgentType(data.agentType);\n    }\n  }, {\n    key: \"_onUpdateAgentId\",\n    value: function _onUpdateAgentId(data) {\n      this._wupServerSessionState.setAgentId(data.agentId);\n    }\n  }, {\n    key: \"_setWupMessagesHashing\",\n    value: function _setWupMessagesHashing(data) {\n      this._dataServerCommunicator.updateEnableWupMessagesHashing(data.enableWupMessagesHashing);\n    }\n\n    /**\n     * Handles font detection requests from the main thread\n     * @param {Object} data - Font detection request data\n     * @param {Array<string>} data.fontNames - Array of font names to detect\n     * @param {string} data.requestId - Unique request identifier\n     * @param {Object} [data.config] - Font detection configuration\n     * @param {number} [data.config.batchSize] - Batch size for processing\n     * @param {number} [data.config.timeoutGap] - Timeout gap between batches\n     */\n  }, {\n    key: \"_onScanFontsCommand\",\n    value: (function () {\n      var _onScanFontsCommand2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data) {\n        var _data$fontNames;\n        var detectedFonts;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug(\"[WorkerService] Received font detection request for \".concat(((_data$fontNames = data.fontNames) === null || _data$fontNames === void 0 ? void 0 : _data$fontNames.length) || 0, \" fonts\"));\n              _context.prev = 1;\n              if (this._fontsScannerWorker) {\n                _context.next = 4;\n                break;\n              }\n              throw new Error('Font detection service not available');\n            case 4:\n              _context.next = 6;\n              return this._fontsScannerWorker.scanFonts(data.fontNames, data.config);\n            case 6:\n              detectedFonts = _context.sent;\n              // Send response back to main thread\n              this._mainCommunicator.sendAsync(_main_events_WorkerResponse__WEBPACK_IMPORTED_MODULE_1__.WorkerResponse.fontDetectionResponse, {\n                requestId: data.requestId,\n                detectedFonts: detectedFonts,\n                success: true\n              });\n              _context.next = 14;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('[WorkerService] Font detection failed:', _context.t0);\n\n              // Send error response back to main thread\n              this._mainCommunicator.sendAsync(_main_events_WorkerResponse__WEBPACK_IMPORTED_MODULE_1__.WorkerResponse.fontDetectionResponse, {\n                requestId: data.requestId,\n                detectedFonts: [],\n                success: false,\n                error: _context.t0.message\n              });\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n      function _onScanFontsCommand(_x) {\n        return _onScanFontsCommand2.apply(this, arguments);\n      }\n      return _onScanFontsCommand;\n    }())\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/WorkerStartPoint.js\":\n/*!****************************************!*\\\n  !*** ./src/worker/WorkerStartPoint.js ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerStartPoint; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_WorkerCommunicator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/technicalServices/WorkerCommunicator */ \"./src/main/technicalServices/WorkerCommunicator.js\");\n/* harmony import */ var _WorkerSysLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WorkerSysLoader */ \"./src/worker/WorkerSysLoader.js\");\n/* harmony import */ var _WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WorkerStatusCategoryType */ \"./src/worker/WorkerStatusCategoryType.js\");\n/* harmony import */ var _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../main/events/HeartBeatEvent */ \"./src/main/events/HeartBeatEvent.js\");\n/* harmony import */ var _main_technicalServices_MessageBus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../main/technicalServices/MessageBus */ \"./src/main/technicalServices/MessageBus.js\");\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_infrastructure_CDPort__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../main/infrastructure/CDPort */ \"./src/main/infrastructure/CDPort.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\nvar WorkerStartPoint = /*#__PURE__*/function () {\n  function WorkerStartPoint() {\n    _classCallCheck(this, WorkerStartPoint);\n  }\n  return _createClass(WorkerStartPoint, [{\n    key: \"start\",\n    value: function start() {\n      // start the system\n      var mainCommunicator = new _main_technicalServices_WorkerCommunicator__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n      var msgBus = new _main_technicalServices_MessageBus__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n      var workerSysLoader = new _WorkerSysLoader__WEBPACK_IMPORTED_MODULE_1__[\"default\"](mainCommunicator, msgBus);\n      this._loadWorkerSystem(mainCommunicator, msgBus, workerSysLoader, new _main_infrastructure_CDPort__WEBPACK_IMPORTED_MODULE_6__[\"default\"](self));\n    }\n  }, {\n    key: \"_loadWorkerSystem\",\n    value: function _loadWorkerSystem(mainCommunicator, msgBus, workerSysLoader, port) {\n      try {\n        mainCommunicator.setMessagingPort(port);\n        workerSysLoader.loadSystem();\n        msgBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_5__.MessageBusEventType.WorkerSystemStatusEvent, new _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WorkerSetup, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Ok));\n      } catch (e) {\n        msgBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_5__.MessageBusEventType.WorkerSystemStatusEvent, new _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WorkerSetup, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Error));\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/WorkerStatusCategoryType.js\":\n/*!************************************************!*\\\n  !*** ./src/worker/WorkerStatusCategoryType.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkerStatusCategoryType: function() { return /* binding */ WorkerStatusCategoryType; }\n/* harmony export */ });\nvar WorkerStatusCategoryType = {\n  // Worker failed to setup, error occurred during load system process\n  WorkerSetup: '701',\n  // Configuration was not received from WupServer\n  ConfigurationReceived: '702',\n  // WupServer returned invalid response\n  WupServerResponse: '703',\n  // Request to WupServer has failed - general error occurred\n  WupServerError: '704'\n};\n\n/***/ }),\n\n/***/ \"./src/worker/WorkerSysLoader.js\":\n/*!***************************************!*\\\n  !*** ./src/worker/WorkerSysLoader.js ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerSysLoader; }\n/* harmony export */ });\n/* harmony import */ var _main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main/core/configuration/ConfigurationRepository */ \"./src/main/core/configuration/ConfigurationRepository.js\");\n/* harmony import */ var _communication_WupServerSessionState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./communication/WupServerSessionState */ \"./src/worker/communication/WupServerSessionState.js\");\n/* harmony import */ var _communication_LogRequestBodyBuilder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./communication/LogRequestBodyBuilder */ \"./src/worker/communication/LogRequestBodyBuilder.js\");\n/* harmony import */ var _communication_ServerCommunicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./communication/ServerCommunicator */ \"./src/worker/communication/ServerCommunicator.js\");\n/* harmony import */ var _communication_LogMessageBuilder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./communication/LogMessageBuilder */ \"./src/worker/communication/LogMessageBuilder.js\");\n/* harmony import */ var _wup_DataPacker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./wup/DataPacker */ \"./src/worker/wup/DataPacker.js\");\n/* harmony import */ var _communication_LogServerClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./communication/LogServerClient */ \"./src/worker/communication/LogServerClient.js\");\n/* harmony import */ var _wup_WupStatisticsService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./wup/WupStatisticsService */ \"./src/worker/wup/WupStatisticsService.js\");\n/* harmony import */ var _wup_dispatching_WupDispatchRateCalculatorFactory__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./wup/dispatching/WupDispatchRateCalculatorFactory */ \"./src/worker/wup/dispatching/WupDispatchRateCalculatorFactory.js\");\n/* harmony import */ var _DataDispatcher__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./DataDispatcher */ \"./src/worker/DataDispatcher.js\");\n/* harmony import */ var _LogAggregator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LogAggregator */ \"./src/worker/LogAggregator.js\");\n/* harmony import */ var _MessageProcessor__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MessageProcessor */ \"./src/worker/MessageProcessor.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _communication_WupMessageBuilder__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./communication/WupMessageBuilder */ \"./src/worker/communication/WupMessageBuilder.js\");\n/* harmony import */ var _communication_WupRequestBodyBuilder__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./communication/WupRequestBodyBuilder */ \"./src/worker/communication/WupRequestBodyBuilder.js\");\n/* harmony import */ var _communication_WupResponseProcessor__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./communication/WupResponseProcessor */ \"./src/worker/communication/WupResponseProcessor.js\");\n/* harmony import */ var _communication_WupServerClient__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./communication/WupServerClient */ \"./src/worker/communication/WupServerClient.js\");\n/* harmony import */ var _DataAggregator__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./DataAggregator */ \"./src/worker/DataAggregator.js\");\n/* harmony import */ var _events_WorkerConfigurationLoadedEventHandler__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./events/WorkerConfigurationLoadedEventHandler */ \"./src/worker/events/WorkerConfigurationLoadedEventHandler.js\");\n/* harmony import */ var _events_WorkerNewSessionStartedEventHandler__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./events/WorkerNewSessionStartedEventHandler */ \"./src/worker/events/WorkerNewSessionStartedEventHandler.js\");\n/* harmony import */ var _events_WorkerServerStateUpdatedEventHandler__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./events/WorkerServerStateUpdatedEventHandler */ \"./src/worker/events/WorkerServerStateUpdatedEventHandler.js\");\n/* harmony import */ var _events_WorkerWupDispatchRateUpdatedEventHandler__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./events/WorkerWupDispatchRateUpdatedEventHandler */ \"./src/worker/events/WorkerWupDispatchRateUpdatedEventHandler.js\");\n/* harmony import */ var _WorkerService__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./WorkerService */ \"./src/worker/WorkerService.js\");\n/* harmony import */ var _utils_WorkerUtils__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./utils/WorkerUtils */ \"./src/worker/utils/WorkerUtils.js\");\n/* harmony import */ var _WorkerSystemStatusEventHandler__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./WorkerSystemStatusEventHandler */ \"./src/worker/WorkerSystemStatusEventHandler.js\");\n/* harmony import */ var _main_technicalServices_log_LogBridge__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../main/technicalServices/log/LogBridge */ \"./src/main/technicalServices/log/LogBridge.js\");\n/* harmony import */ var _communication_RetryMessage__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./communication/RetryMessage */ \"./src/worker/communication/RetryMessage.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationWrapperWupMessage__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../main/core/configuration/ConfigurationWrapperWupMessage */ \"./src/main/core/configuration/ConfigurationWrapperWupMessage.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationWrapperLogMessage__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../main/core/configuration/ConfigurationWrapperLogMessage */ \"./src/main/core/configuration/ConfigurationWrapperLogMessage.js\");\n/* harmony import */ var _events_WorkerServerRestoredMuidEventHandler__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./events/WorkerServerRestoredMuidEventHandler */ \"./src/worker/events/WorkerServerRestoredMuidEventHandler.js\");\n/* harmony import */ var _events_WorkerStateUpdateFromStorage__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./events/WorkerStateUpdateFromStorage */ \"./src/worker/events/WorkerStateUpdateFromStorage.js\");\n/* harmony import */ var _events_WorkerServerNewAgentId__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./events/WorkerServerNewAgentId */ \"./src/worker/events/WorkerServerNewAgentId.js\");\n/* harmony import */ var _fonts_FontsScannerWorker__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./fonts/FontsScannerWorker */ \"./src/worker/fonts/FontsScannerWorker.js\");\n/* harmony import */ var _fonts_detector_FontDetectorProvider__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./fonts/detector/FontDetectorProvider */ \"./src/worker/fonts/detector/FontDetectorProvider.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WorkerSysLoader = /*#__PURE__*/function () {\n  function WorkerSysLoader(mainCommunicator, msgBus) {\n    _classCallCheck(this, WorkerSysLoader);\n    this._mainCommunicator = mainCommunicator;\n    this._msgBus = msgBus;\n    this._eventHandlers = [];\n  }\n  return _createClass(WorkerSysLoader, [{\n    key: \"loadSystem\",\n    value: function loadSystem() {\n      var _this = this;\n      this._configurationRepository = new _main_core_configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n      this._wupServerSessionState = new _communication_WupServerSessionState__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n      this._logRequestBodyBuilder = new _communication_LogRequestBodyBuilder__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n      var logReMessageSettings = _main_core_configuration_ConfigurationWrapperLogMessage__WEBPACK_IMPORTED_MODULE_30__[\"default\"].createReMessageSettings(this._configurationRepository);\n      this._logRetryMessage = new _communication_RetryMessage__WEBPACK_IMPORTED_MODULE_28__[\"default\"](logReMessageSettings);\n      this._logServerCommunicator = new _communication_ServerCommunicator__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this._logRequestBodyBuilder, this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings), _utils_WorkerUtils__WEBPACK_IMPORTED_MODULE_25__[\"default\"], this._logRetryMessage, true, 'log');\n      this._logMessageBuilder = new _communication_LogMessageBuilder__WEBPACK_IMPORTED_MODULE_6__[\"default\"](new _wup_DataPacker__WEBPACK_IMPORTED_MODULE_7__[\"default\"]());\n      this._logServerClient = new _communication_LogServerClient__WEBPACK_IMPORTED_MODULE_8__[\"default\"](this._logServerCommunicator, this._logMessageBuilder, this._configurationRepository);\n      this._wupStatisticsService = new _wup_WupStatisticsService__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupStatisticsLogIntervalMs));\n      this._wupDispatchRateCalculatorFactory = new _wup_dispatching_WupDispatchRateCalculatorFactory__WEBPACK_IMPORTED_MODULE_10__[\"default\"](this._wupStatisticsService, this._wupServerSessionState);\n      var logAggregator = new _LogAggregator__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n      this._logDataDispatcher = new _DataDispatcher__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this._logServerClient, logAggregator, this._wupDispatchRateCalculatorFactory, this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logWupDispatchRateSettings));\n      var workerLogBridge = new _main_technicalServices_log_LogBridge__WEBPACK_IMPORTED_MODULE_27__[\"default\"](logAggregator, 'worker');\n      this._logMessageProcessor = new _MessageProcessor__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this._logDataDispatcher);\n      var logger = new _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_14__.Logger(workerLogBridge);\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_14__[\"default\"].setLogger(logger);\n      this._wupMessageBuilder = new _communication_WupMessageBuilder__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this._wupServerSessionState, new _wup_DataPacker__WEBPACK_IMPORTED_MODULE_7__[\"default\"](), this._configurationRepository);\n      this._wupRequestBodyBuilder = new _communication_WupRequestBodyBuilder__WEBPACK_IMPORTED_MODULE_16__[\"default\"](this._wupServerSessionState);\n      var wupReMessageSettings = _main_core_configuration_ConfigurationWrapperWupMessage__WEBPACK_IMPORTED_MODULE_29__[\"default\"].createReMessageSettings(this._configurationRepository);\n      this._wupRetryMessage = new _communication_RetryMessage__WEBPACK_IMPORTED_MODULE_28__[\"default\"](wupReMessageSettings);\n      this._dataServerCommunicator = new _communication_ServerCommunicator__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this._wupRequestBodyBuilder, this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.serverCommunicationSettings), _utils_WorkerUtils__WEBPACK_IMPORTED_MODULE_25__[\"default\"], this._wupRetryMessage, false, 'wup');\n      this._wupResponseProcessor = new _communication_WupResponseProcessor__WEBPACK_IMPORTED_MODULE_17__[\"default\"](this._wupServerSessionState, this._msgBus, this._configurationRepository);\n      this._wupServerClient = new _communication_WupServerClient__WEBPACK_IMPORTED_MODULE_18__[\"default\"](this._dataServerCommunicator, this._wupMessageBuilder, this._wupServerSessionState, this._wupStatisticsService, this._wupResponseProcessor, this._configurationRepository, this._msgBus);\n      var wupDispatchRateSettings = this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.forceDynamicDataWupDispatchSettings) ? _main_core_configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_2__.ConfigurationDefaultTemplates.defaultDynamicWupDispatchRateConfiguration : this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.dataWupDispatchRateSettings);\n      this._dataDispatcher = new _DataDispatcher__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this._wupServerClient, new _DataAggregator__WEBPACK_IMPORTED_MODULE_19__[\"default\"](this._wupServerSessionState), this._wupDispatchRateCalculatorFactory, wupDispatchRateSettings);\n      this._messageProcessor = new _MessageProcessor__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this._dataDispatcher);\n\n      // Initialize font detection service with default values\n      // Configuration will be passed from main thread via messages\n      this._fontsScannerWorker = new _fonts_FontsScannerWorker__WEBPACK_IMPORTED_MODULE_34__[\"default\"]({\n        detectorProvider: new _fonts_detector_FontDetectorProvider__WEBPACK_IMPORTED_MODULE_35__[\"default\"]()\n      });\n\n      // Create the event handlers\n      this._eventHandlers.push(new _events_WorkerConfigurationLoadedEventHandler__WEBPACK_IMPORTED_MODULE_20__[\"default\"](this._msgBus, this._wupStatisticsService, this._dataDispatcher, this._logDataDispatcher, this._dataServerCommunicator, this._wupServerClient, this._logServerClient, logger, this._mainCommunicator));\n      this._eventHandlers.push(new _events_WorkerNewSessionStartedEventHandler__WEBPACK_IMPORTED_MODULE_21__[\"default\"](this._msgBus, logger, this._mainCommunicator));\n      this._eventHandlers.push(new _events_WorkerServerStateUpdatedEventHandler__WEBPACK_IMPORTED_MODULE_22__[\"default\"](this._msgBus, logger, this._mainCommunicator));\n      this._eventHandlers.push(new _events_WorkerWupDispatchRateUpdatedEventHandler__WEBPACK_IMPORTED_MODULE_23__[\"default\"](this._msgBus, this._dataDispatcher, logger));\n      this._eventHandlers.push(new _WorkerSystemStatusEventHandler__WEBPACK_IMPORTED_MODULE_26__[\"default\"](this._mainCommunicator, this._msgBus, logger));\n      this._eventHandlers.push(new _events_WorkerServerRestoredMuidEventHandler__WEBPACK_IMPORTED_MODULE_31__[\"default\"](this._msgBus, this._mainCommunicator));\n      this._eventHandlers.push(new _events_WorkerStateUpdateFromStorage__WEBPACK_IMPORTED_MODULE_32__[\"default\"](this._mainCommunicator, this._wupServerSessionState, this._logServerClient));\n      this._eventHandlers.push(new _events_WorkerServerNewAgentId__WEBPACK_IMPORTED_MODULE_33__[\"default\"](this._msgBus, this._mainCommunicator));\n\n      // update the main with the server state on each response from server. Currently 'onServerStateUpdated' is triggered only for requestId changes\n      // we should probably get rid soon and move it to the bus event handler\n      this._wupServerSessionState.onServerStateUpdated.subscribe(function (serverState) {\n        _this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.ServerStateUpdatedEvent, serverState);\n      });\n      this._workerService = new _WorkerService__WEBPACK_IMPORTED_MODULE_24__[\"default\"](this._mainCommunicator, this._wupServerClient, this._logServerClient, this._configurationRepository, this._messageProcessor, this._logMessageProcessor, this._wupServerSessionState, this._dataServerCommunicator, this._fontsScannerWorker);\n      this._workerService.start();\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_14__[\"default\"].info('Loaded worker');\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/WorkerSystemStatusEventHandler.js\":\n/*!******************************************************!*\\\n  !*** ./src/worker/WorkerSystemStatusEventHandler.js ***!\n  \\******************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerSystemStatusEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n/**\n * The class purpose is to publish HeartBeat events to main through WorkerCommunicator\n */\nvar WorkerSystemStatusEventHandler = /*#__PURE__*/function () {\n  /**\n   *\n   * @param mainCommunicator - WorkerCommunicator class\n   * @param messageBus\n   * @param logger\n   */\n  function WorkerSystemStatusEventHandler(mainCommunicator, messageBus, logger) {\n    _classCallCheck(this, WorkerSystemStatusEventHandler);\n    this._mainCommunicator = mainCommunicator;\n    this._messageBus = messageBus;\n    this._logger = logger;\n    this.errors = {};\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_1__.MessageBusEventType.WorkerSystemStatusEvent, this._handle.bind(this));\n  }\n\n  /**\n   * This method creates HeartBeatEvent object and publish it through workerCommunicator\n   * @param heartbeatEvent\n   */\n  return _createClass(WorkerSystemStatusEventHandler, [{\n    key: \"_handle\",\n    value: function _handle(heartbeatEvent) {\n      this._logger.debug(\"Sending new HeartBeatStatusEvent - \".concat(heartbeatEvent.category, \", \").concat(heartbeatEvent.status));\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_0__.WorkerEvent.HeartBeatStatusEvent, heartbeatEvent);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/ConfigurationDefaultValues.js\":\n/*!****************************************************************!*\\\n  !*** ./src/worker/communication/ConfigurationDefaultValues.js ***!\n  \\****************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigurationDefaultValues: function() { return /* binding */ ConfigurationDefaultValues; }\n/* harmony export */ });\nvar ConfigurationDefaultValues = {\n  DEFAULT_RETRY_NUM: 5,\n  //Retry 5 times before giving up\n  MIN_RETRY_NUM: 1,\n  //Retry once\n  MAX_RETRY_NUM: 1000,\n  //Retry 1000 times before giving up\n\n  DEFAULT_RETRY_INTERVAL: 1000,\n  //1 second\n  MIN_RETRY_INTERVAL: 100,\n  //100 milliseconds\n  MAX_RETRY_INTERVAL: 10000,\n  //10 seconds\n\n  DEFAULT_GROWTH_PER_FAILURE: 3500,\n  //milliseconds\n  MIN_GROWTH_PER_FAILURE: 0,\n  //Start the growing interval from 0 milliseconds\n  MAX_GROWTH_PER_FAILURE: 10000,\n  //Increase each interval by 10 seconds\n\n  DEFAULT_INTERVAL_LIMIT: 16000,\n  //Don't increase retries for more than 16 seconds\n  MIN_INTERVAL_LIMIT: 100,\n  //Don't increase retries for more than 100 milliseconds\n  MAX_INTERVAL_LIMIT: 300000,\n  //Don't increase retries for more than 5 minutes\n\n  MAX_REQUEST_DELAY: 6000,\n  MAX_CSID_RETRY_COUNT: 20,\n  // Maximum number of retries for CSID and cdApi operations\n\n  DEFAULT_CDS_NUM_EXPIRATION_TIME: 60,\n  // 60 minutes\n  MIN_CDS_NUM_EXPIRATION_TIME: 1,\n  // 1 minutes\n  MAX_CDS_NUM_EXPIRATION_TIME: 44640,\n  // 44640 minutes = 1 month\n\n  VALUE_DID_NOT_EXIST: 1,\n  SUCCESS_IN_CHANGED_EXPIRATION: 0,\n  FAILURE_IN_CHANGED_EXPIRATION: -1\n};\n\n/***/ }),\n\n/***/ \"./src/worker/communication/Constants.js\":\n/*!***********************************************!*\\\n  !*** ./src/worker/communication/Constants.js ***!\n  \\***********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DATA_SOURCE_TYPE: function() { return /* binding */ DATA_SOURCE_TYPE; },\n/* harmony export */   DEFAULT_WUP_TYPE: function() { return /* binding */ DEFAULT_WUP_TYPE; }\n/* harmony export */ });\nvar DATA_SOURCE_TYPE = 'js';\nvar DEFAULT_WUP_TYPE = '0';\n\n/***/ }),\n\n/***/ \"./src/worker/communication/LogMessage.js\":\n/*!************************************************!*\\\n  !*** ./src/worker/communication/LogMessage.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogMessage; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar LogMessage = /*#__PURE__*/function () {\n  function LogMessage() {\n    _classCallCheck(this, LogMessage);\n  }\n  return _createClass(LogMessage, [{\n    key: \"setData\",\n    value: function setData(data) {\n      this._data = data;\n    }\n  }, {\n    key: \"getInternalMessage\",\n    value: function getInternalMessage() {\n      return this._data;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/LogMessageBuilder.js\":\n/*!*******************************************************!*\\\n  !*** ./src/worker/communication/LogMessageBuilder.js ***!\n  \\*******************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogMessageBuilder; }\n/* harmony export */ });\n/* harmony import */ var _LogMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LogMessage */ \"./src/worker/communication/LogMessage.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar LogMessageBuilder = /*#__PURE__*/function () {\n  function LogMessageBuilder(dataPacker) {\n    _classCallCheck(this, LogMessageBuilder);\n    this._dataPacker = dataPacker;\n  }\n  return _createClass(LogMessageBuilder, [{\n    key: \"build\",\n    value: function build(data) {\n      var logMessage = new _LogMessage__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n      logMessage.setData(this._dataPacker.pack(data));\n      return logMessage;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/LogRequestBodyBuilder.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/communication/LogRequestBodyBuilder.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogRequestBodyBuilder; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar LogRequestBodyBuilder = /*#__PURE__*/function () {\n  function LogRequestBodyBuilder() {\n    _classCallCheck(this, LogRequestBodyBuilder);\n  }\n  return _createClass(LogRequestBodyBuilder, [{\n    key: \"build\",\n    value: function build(logMessage) {\n      return logMessage.getInternalMessage();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/LogServerClient.js\":\n/*!*****************************************************!*\\\n  !*** ./src/worker/communication/LogServerClient.js ***!\n  \\*****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ LogServerClient; }\n/* harmony export */ });\n/* harmony import */ var _main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationWrapperLogMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationWrapperLogMessage */ \"./src/main/core/configuration/ConfigurationWrapperLogMessage.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nvar LogServerClient = /*#__PURE__*/function () {\n  function LogServerClient(serverCommunicator, logMessageBuilder, configurationRepository) {\n    _classCallCheck(this, LogServerClient);\n    this._serverCommunicator = serverCommunicator;\n    this._logMessageBuilder = logMessageBuilder;\n    this._configurationRepository = configurationRepository;\n    this._serverUrl = null;\n    this._MESSAGE_SEND_RETRIES = 5;\n    this._requestTimeout = this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.logMessageRequestTimeout);\n  }\n  return _createClass(LogServerClient, [{\n    key: \"setServerUrl\",\n    value: function setServerUrl(serverUrl) {\n      this._serverUrl = serverUrl;\n    }\n  }, {\n    key: \"setIsPaused\",\n    value: function setIsPaused(state) {\n      this._serverCommunicator.setIsPaused(state);\n    }\n  }, {\n    key: \"sendData\",\n    value: function sendData(data) {\n      var shouldFlush = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this._serverUrl) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Cannot send log message: server URL is not set');\n        return;\n      }\n      var logMessage = this._logMessageBuilder.build(data);\n      this._serverCommunicator.sendMessage(logMessage, this._requestTimeout, this._serverCommunicator.getRetryMessage().getMessageNumToRetry(), shouldFlush, this._onSendDataSuccess.bind(this), this._onSendDataFailure.bind(this), this._serverUrl);\n      if (shouldFlush) {\n        this._serverCommunicator.flush();\n      }\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      return this._serverCommunicator.isReadyToSendData();\n    }\n  }, {\n    key: \"setRequestTimeout\",\n    value: function setRequestTimeout(timeout) {\n      this._requestTimeout = timeout;\n    }\n  }, {\n    key: \"setConfigurationLogMessage\",\n    value: function setConfigurationLogMessage() {\n      var reLogMessageSettings = _main_core_configuration_ConfigurationWrapperLogMessage__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createReMessageSettings(this._configurationRepository);\n      this._serverCommunicator.getRetryMessage().updateSettings(reLogMessageSettings);\n    }\n  }, {\n    key: \"_onSendDataSuccess\",\n    value: function _onSendDataSuccess(/* responseData */\n    ) {\n      // No handling for responses from log server since there is no response currently\n    }\n  }, {\n    key: \"_onSendDataFailure\",\n    value: function _onSendDataFailure(response) {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"Failed sending log message. Error: \".concat(response, \".\"));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/ReMessageSettings.js\":\n/*!*******************************************************!*\\\n  !*** ./src/worker/communication/ReMessageSettings.js ***!\n  \\*******************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ReMessageSettings; }\n/* harmony export */ });\n/* harmony import */ var _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConfigurationDefaultValues */ \"./src/worker/communication/ConfigurationDefaultValues.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar ReMessageSettings = /*#__PURE__*/function () {\n  function ReMessageSettings(messageNumToRetry, messageRetryInterval, incrementalGrowthBetweenFailures, maxIntervalBetweenFailures, retryOnNetworkFailureOnly) {\n    _classCallCheck(this, ReMessageSettings);\n    this.messageNumToRetry = messageNumToRetry;\n    this.messageRetryInterval = messageRetryInterval;\n    this.incrementalGrowthBetweenFailures = incrementalGrowthBetweenFailures;\n    this.maxIntervalBetweenFailures = maxIntervalBetweenFailures;\n    this.retryOnNetworkFailureOnly = retryOnNetworkFailureOnly;\n    this.init();\n  }\n  return _createClass(ReMessageSettings, [{\n    key: \"init\",\n    value: function init() {\n      this._validateReMessageSettings();\n    }\n  }, {\n    key: \"getMessageNumToRetry\",\n    value: function getMessageNumToRetry() {\n      return this.messageNumToRetry;\n    }\n  }, {\n    key: \"getMessageRetryInterval\",\n    value: function getMessageRetryInterval() {\n      return this.messageRetryInterval;\n    }\n  }, {\n    key: \"getMaxIntervalBetweenFailures\",\n    value: function getMaxIntervalBetweenFailures() {\n      return this.maxIntervalBetweenFailures;\n    }\n  }, {\n    key: \"getIncrementalGrowthBetweenFailures\",\n    value: function getIncrementalGrowthBetweenFailures() {\n      return this.incrementalGrowthBetweenFailures;\n    }\n  }, {\n    key: \"shouldRetryOnNetworkFailureOnly\",\n    value: function shouldRetryOnNetworkFailureOnly() {\n      return this.retryOnNetworkFailureOnly;\n    }\n  }, {\n    key: \"_validateReMessageSettings\",\n    value: function _validateReMessageSettings() {\n      var logMessage = 'The provided configuration is invalid, it must be  ';\n      if (!isNaN(this.messageNumToRetry)) {\n        this.messageNumToRetry = parseInt(this.messageNumToRetry);\n      } else {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"\".concat(logMessage, \" a number. setting to default: \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_NUM));\n        this.messageNumToRetry = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_NUM;\n      }\n      if (this.messageNumToRetry < _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_RETRY_NUM || this.messageNumToRetry > _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_RETRY_NUM) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"messageNumToRetry - \".concat(logMessage, \" in the following range: \\n            \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_RETRY_NUM, \" - \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_RETRY_NUM, \" setting to default: \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_NUM));\n        this.messageNumToRetry = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_NUM;\n      }\n      if (this.messageRetryInterval < _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_RETRY_INTERVAL || this.messageRetryInterval > _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_RETRY_INTERVAL) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"messageRetryInterval - \".concat(logMessage, \" in the following range: \\n            [\").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_RETRY_INTERVAL, \" - \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_RETRY_INTERVAL, \"], \\n            setting to default: \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_INTERVAL));\n        this.messageRetryInterval = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_INTERVAL;\n      }\n      if (this.incrementalGrowthBetweenFailures < _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_GROWTH_PER_FAILURE || this.incrementalGrowthBetweenFailures > _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_GROWTH_PER_FAILURE) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"incrementalGrowthBetweenFailures - \".concat(logMessage, \" in the following range: \\n            [\").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_GROWTH_PER_FAILURE, \" - \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_GROWTH_PER_FAILURE, \"],\\n                setting to default: \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_GROWTH_PER_FAILURE));\n        this.incrementalGrowthBetweenFailures = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_GROWTH_PER_FAILURE;\n      }\n      if (this.maxIntervalBetweenFailures < _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_INTERVAL_LIMIT || this.maxIntervalBetweenFailures > _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_INTERVAL_LIMIT) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"maxIntervalBetweenFailures - \".concat(logMessage, \" in the following range: \\n            [\").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_INTERVAL_LIMIT, \" - \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MAX_INTERVAL_LIMIT, \"]\\n                setting to default: \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_INTERVAL_LIMIT));\n        this.maxIntervalBetweenFailures = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_INTERVAL_LIMIT;\n      }\n      if (this.maxIntervalBetweenFailures < this.messageRetryInterval) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\" maxIntervalBetweenFailures - \".concat(logMessage, \" greater than minimum interval: \\n            [\").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.MIN_INTERVAL_LIMIT, \"], setting to defaults:\\n                \").concat(_ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_INTERVAL_LIMIT));\n        this.maxIntervalBetweenFailures = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_INTERVAL_LIMIT;\n        this.messageRetryInterval = _ConfigurationDefaultValues__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDefaultValues.DEFAULT_RETRY_INTERVAL;\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/RetryMessage.js\":\n/*!**************************************************!*\\\n  !*** ./src/worker/communication/RetryMessage.js ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ RetryMessage; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n//  This class is responsible for the logic in case of failure to send message\nvar RetryMessage = /*#__PURE__*/function () {\n  function RetryMessage(reMessageSettings) {\n    _classCallCheck(this, RetryMessage);\n    this.currentMessageNumberOfSendFailures = 0;\n    this.reMessageSettings = reMessageSettings;\n    this.currentInterval = this.getMessageRetryInterval();\n  }\n  //set to initial value\n  return _createClass(RetryMessage, [{\n    key: \"restartMessageSettings\",\n    value: function restartMessageSettings() {\n      this.currentMessageNumberOfSendFailures = 0;\n      this.currentInterval = this.getMessageRetryInterval();\n    }\n    //set to initial value of the settings\n  }, {\n    key: \"updateSettings\",\n    value: function updateSettings(reMessageSettings) {\n      this.reMessageSettings = reMessageSettings;\n    }\n    //check the values under the min/max constrains\n  }, {\n    key: \"updateAllSettings\",\n    value: function updateAllSettings(reMessageSettings) {\n      reMessageSettings.init();\n      this.reMessageSettings = reMessageSettings;\n    }\n    //getters\n  }, {\n    key: \"getNumberOfSendFailures\",\n    value: function getNumberOfSendFailures() {\n      return this.currentMessageNumberOfSendFailures;\n    }\n  }, {\n    key: \"getNextInterval\",\n    value: function getNextInterval() {\n      return this.currentInterval;\n    }\n\n    //getters for the initial configuration. needed for testing conditions\n  }, {\n    key: \"getMessageNumToRetry\",\n    value: function getMessageNumToRetry() {\n      return this.reMessageSettings.getMessageNumToRetry();\n    }\n  }, {\n    key: \"getMessageRetryInterval\",\n    value: function getMessageRetryInterval() {\n      return this.reMessageSettings.getMessageRetryInterval();\n    }\n  }, {\n    key: \"getMaxIntervalBetweenFailures\",\n    value: function getMaxIntervalBetweenFailures() {\n      return this.reMessageSettings.getMaxIntervalBetweenFailures();\n    }\n  }, {\n    key: \"getIncrementalGrowthBetweenFailures\",\n    value: function getIncrementalGrowthBetweenFailures() {\n      return this.reMessageSettings.getIncrementalGrowthBetweenFailures();\n    }\n    /**\n     * @param currentMessageNumberOfSendFailures\n     * @private\n     */\n  }, {\n    key: \"_incrementNumberOfSendFailures\",\n    value: function _incrementNumberOfSendFailures() {\n      this.currentMessageNumberOfSendFailures++;\n    }\n  }, {\n    key: \"shouldReMessage\",\n    value: function shouldReMessage(isMandatory, failureStatusCode) {\n      if (isMandatory) {\n        return true;\n      }\n      var retryOnNetworkFailureOnly = this.reMessageSettings.shouldRetryOnNetworkFailureOnly();\n      var hasServerResponded = Boolean(failureStatusCode);\n      if (hasServerResponded && retryOnNetworkFailureOnly) {\n        /**\n         * If a response is received from the serverregardless of its contentthere is generally\n         * no reason to retry sending the same message. Retrying in this case could risk creating\n         * a DDoS-like effect on the server rather than providing any benefit.\n         *\n         * This behavior is controlled by a remote feature flag. If the flag is disabled, retries\n         * will proceed as they did previously, allowing flexibility in case any regressions are\n         * observed in production.\n         *\n         * Note: This condition does **not** apply to mandatory requests (e.g., the initial WUP\n         * request that fetches configuration), which are always retried as needed.\n         */\n        return false;\n      }\n\n      // Lastly, if all other conditions haven't met - retry only if haven't reached the num-of-retries limit.\n      return this.getNumberOfSendFailures() < this.getMessageNumToRetry();\n    }\n\n    //calculate the next interval before remessage\n  }, {\n    key: \"updateRetryInterval\",\n    value: function updateRetryInterval() {\n      var nextInterval = this.currentInterval + this.currentMessageNumberOfSendFailures * this.getIncrementalGrowthBetweenFailures();\n      if (nextInterval > this.getMaxIntervalBetweenFailures()) {\n        this.currentInterval = this.getMaxIntervalBetweenFailures();\n      } else {\n        this.currentInterval = nextInterval;\n      }\n      this._incrementNumberOfSendFailures();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/ServerCommunicator.js\":\n/*!********************************************************!*\\\n  !*** ./src/worker/communication/ServerCommunicator.js ***!\n  \\********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ServerCommunicator; }\n/* harmony export */ });\n/* harmony import */ var _main_infrastructure_Queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/infrastructure/Queue */ \"./src/main/infrastructure/Queue.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _main_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../main/technicalServices/DOMUtils */ \"./src/main/technicalServices/DOMUtils.js\");\n/* harmony import */ var _services_HashService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/HashService */ \"./src/worker/services/HashService.js\");\n/* harmony import */ var _main_const_hashing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../main/const/hashing */ \"./src/main/const/hashing.js\");\n/* harmony import */ var _main_const_communication__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../main/const/communication */ \"./src/main/const/communication.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\nvar ServerCommunicator = /*#__PURE__*/function () {\n  function ServerCommunicator(requestBodyBuilder, settings, workerUtils, retryMessage) {\n    var acceptNoResponse = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var messageDescriptor = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '';\n    _classCallCheck(this, ServerCommunicator);\n    this._requestBodyBuilder = requestBodyBuilder;\n    this.updateSettings(settings);\n    this._workerUtils = workerUtils;\n    this._acceptNoResponse = acceptNoResponse;\n    this._messageDescriptor = messageDescriptor;\n    this.retryMessage = retryMessage;\n    this._dataQueue = new _main_infrastructure_Queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this._awaitingServerResponse = false;\n    this._currentSentItem = null;\n    this._sendRetryTimeoutId = null;\n    this._shouldRetryToSendMessage = false;\n\n    // An id for a message for easier tracking of logs\n    this._messageIdentifier = 0;\n    this._enableRequestBodyHashing = false;\n    this._isPaused = false;\n  }\n  return _createClass(ServerCommunicator, [{\n    key: \"updateSettings\",\n    value: function updateSettings(settings) {\n      this._queueLoadThershold = settings.queueLoadThreshold;\n    }\n  }, {\n    key: \"getRetryMessage\",\n    value: function getRetryMessage() {\n      return this.retryMessage;\n    }\n  }, {\n    key: \"updateEnableWupMessagesHashing\",\n    value: function updateEnableWupMessagesHashing(enableRequestBodyHashing) {\n      this._enableRequestBodyHashing = enableRequestBodyHashing;\n    }\n\n    /**\n     * Send a message to the server\n     * @param message\n     * @param timeout\n     * @param maxNumberOfSendAttempts - The max number of send attempts for each message. 0 means infinite attempts\n     * @param shouldFlush\n     * @param onSuccessResponse\n     * @param onMessageRetryFailure\n     * @param onMessageFailure\n     * @param serverUrl - The URL to send the message to\n     */\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(message, timeout, maxNumberOfSendAttempts, shouldFlush, onSuccessResponse, onMessageFailure, serverUrl) {\n      var _this = this;\n      var realAPI = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var onSuccess = function onSuccess(responseData) {\n        _this._onMessageSendSuccess(responseData, onSuccessResponse);\n      };\n      var onFailure = function onFailure(responseText, status, statusText) {\n        _this._onMessageSendFailure(responseText, status, statusText, onMessageFailure);\n      };\n      this._enqueueMessage(message, timeout, maxNumberOfSendAttempts, shouldFlush, onSuccess, onFailure, serverUrl, realAPI);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      this._flushData();\n    }\n  }, {\n    key: \"setIsPaused\",\n    value: function setIsPaused(state) {\n      this._isPaused = state;\n    }\n  }, {\n    key: \"isReadyToSendData\",\n    value: function isReadyToSendData() {\n      return !this._isPaused;\n    }\n  }, {\n    key: \"_onMessageSendSuccess\",\n    value: function _onMessageSendSuccess(responseData, callback) {\n      this._awaitingServerResponse = false;\n      this._currentSentItem = null;\n      this._shouldRetryToSendMessage = false;\n      this.retryMessage.restartMessageSettings();\n      callback(responseData);\n      this._processNextQueueItem();\n    }\n  }, {\n    key: \"_onMessageSendFailure\",\n    value: function _onMessageSendFailure(responseText, status, statusText, onError) {\n      if (!this._currentSentItem) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].debug(\"\".concat(this._messageDescriptor, \" message send failure callback invoked but current item is null. \") + \"This typically occurs when a delayed error callback fires after a flush operation. \" + \"Moving to next queued item.\");\n        this._processNextQueueItem();\n        return;\n      }\n      this._awaitingServerResponse = false;\n\n      // Get failure count and max retries for throttled logging\n      var currentFailureCount = this.retryMessage.getNumberOfSendFailures() + 1; // +1 because we haven't incremented yet\n      var maxRetries = this.retryMessage.getMessageNumToRetry();\n      var failureDetails = this._buildFailureLog(responseText, status, statusText);\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warnRetry(\"Failed sending \".concat(this._messageDescriptor, \" message #\").concat(this._currentSentItem.identifier, \". \") + \"Attempt \".concat(currentFailureCount, \"/\").concat(maxRetries, \". \").concat(failureDetails), currentFailureCount, maxRetries);\n\n      // If maxNumberOfSendAttempts is 0 the message is mandatory and we attempt to send until successful. Otherwise we check the number of send attempts...\n      var isMandatoryMessage = this._currentSentItem.maxNumberOfSendAttempts === 0;\n      if (!this._isPaused && this.retryMessage.shouldReMessage(isMandatoryMessage, status)) {\n        this._shouldRetryToSendMessage = true;\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].infoRetry(\"Trying to send \".concat(this._messageDescriptor, \" message #\").concat(this._currentSentItem.identifier, \" again. Failure \").concat(currentFailureCount, \"/\").concat(maxRetries), currentFailureCount, maxRetries);\n        onError && onError(status, this._currentSentItem, this.retryMessage.getNumberOfSendFailures(), this._shouldRetryToSendMessage);\n      } else {\n        this._shouldRetryToSendMessage = false;\n        var hasServerResponded = Boolean(status);\n        var retryOnNetworkFailureOnly = this.retryMessage.reMessageSettings && this.retryMessage.reMessageSettings.shouldRetryOnNetworkFailureOnly();\n        var isExpectedDiscard = hasServerResponded && retryOnNetworkFailureOnly && !isMandatoryMessage;\n        if (isExpectedDiscard) {\n          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].debug(\"Discarding \".concat(this._messageDescriptor, \" message #\").concat(this._currentSentItem.identifier, \" (server responded with status \").concat(status, \", retryOnNetworkFailureOnly enabled).\"));\n        } else {\n          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"Discarding \".concat(this._messageDescriptor, \" message #\").concat(this._currentSentItem.identifier, \" after \").concat(this.retryMessage.getNumberOfSendFailures(), \" failed send attempts.\"));\n        }\n\n        // call onError\n        onError && onError(status, this._currentSentItem, this.retryMessage.getNumberOfSendFailures(), this._shouldRetryToSendMessage);\n        this._currentSentItem = null;\n        this.retryMessage.restartMessageSettings();\n        this._processNextQueueItem();\n      }\n    }\n  }, {\n    key: \"_enqueueMessage\",\n    value: function _enqueueMessage(message, timeout, maxNumberOfSendAttempts, shouldFlush, onSuccess, onFailure, serverUrl, realAPI) {\n      this._dataQueue.enqueue({\n        identifier: this._messageIdentifier++,\n        messageToSend: message,\n        onSuccess: onSuccess,\n        onError: onFailure,\n        timeout: timeout,\n        maxNumberOfSendAttempts: maxNumberOfSendAttempts,\n        serverUrl: serverUrl,\n        realAPI: realAPI\n      });\n      if (!this._shouldRetryToSendMessage) {\n        // Clear the retry timeout if set because we are about to retry right now.\n        this._clearRetryTimeout();\n\n        // If a flush was requested we flush all that is in the queue before sending the current item\n        if (shouldFlush) {\n          this._flushData();\n        }\n        if (!this._awaitingServerResponse) {\n          // Process the next queue item if we are not currently waiting for a respomnse from server\n          this._processNextQueueItem(shouldFlush);\n        }\n      }\n    }\n  }, {\n    key: \"_processNextQueueItem\",\n    value: function _processNextQueueItem() {\n      var _this2 = this;\n      var shouldFlush = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var shouldDequeue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      // No items to process\n      if (!this._dataQueue.hasItems() && shouldDequeue) {\n        return;\n      }\n      var item = null;\n      if (shouldDequeue) {\n        item = this._dataQueue.dequeue();\n        this._currentSentItem = item;\n      } else {\n        item = this._currentSentItem;\n      }\n      var requestBody = this._requestBodyBuilder.build(item.messageToSend, shouldFlush);\n      if (this._enableRequestBodyHashing) {\n        _services_HashService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].hashSha256(requestBody, function (err, hashedBody) {\n          if (err) {\n            _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(err);\n            return;\n          }\n          _this2._sendProcessedQueueItem(requestBody, item, shouldFlush, hashedBody);\n        });\n      } else {\n        this._sendProcessedQueueItem(requestBody, item, shouldFlush);\n      }\n    }\n  }, {\n    key: \"_sendProcessedQueueItem\",\n    value: function _sendProcessedQueueItem(requestBody, item, shouldFlush) {\n      var hashedBody = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      //using 'self' as there's no access to the window object from the worker.\n      //Request is not supported by IE 11.\n      if (_main_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isWebWorkerFetchSupported() && shouldFlush) {\n        var headers = new Headers();\n        if (hashedBody) {\n          headers.append(_main_const_hashing__WEBPACK_IMPORTED_MODULE_4__.sha256HeaderName, hashedBody);\n        }\n        if (item.realAPI) {\n          headers.append(_main_const_hashing__WEBPACK_IMPORTED_MODULE_4__.REAL_API, item.realAPI);\n        }\n        var requestData = {\n          method: _main_const_communication__WEBPACK_IMPORTED_MODULE_5__.POST,\n          headers: headers,\n          body: requestBody,\n          keepalive: true\n        };\n        this._sendWithFetch(requestData, item.serverUrl);\n      } else {\n        this._sendWithXMLHttpRequest(requestBody, item, hashedBody);\n      }\n      this._checkQueueLength();\n    }\n  }, {\n    key: \"_sendWithFetch\",\n    value: function _sendWithFetch(requestOptions, serverUrl) {\n      // Fetch with keepalive is fire-and-forget for flush scenarios (e.g., page unload)\n      // Clear _currentSentItem immediately since we're not tracking the response\n      this._currentSentItem = null;\n\n      // Send with fetch and handle the promise properly\n      self.fetch(serverUrl, requestOptions).then(function () {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('Flush data was sent successfully by fetch');\n      })[\"catch\"](function (error) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].debug(\"Flush data fetch request failed (expected for fire-and-forget): \".concat(error));\n      });\n    }\n  }, {\n    key: \"_sendWithXMLHttpRequest\",\n    value: function _sendWithXMLHttpRequest(requestBody, item, hashedBody) {\n      this._awaitingServerResponse = true;\n      this._workerUtils.getPostUrl(item.serverUrl, _main_const_communication__WEBPACK_IMPORTED_MODULE_5__.POST, requestBody, item.onSuccess, item.onError, this._acceptNoResponse, item.timeout, hashedBody, item.realAPI);\n    }\n  }, {\n    key: \"_checkQueueLength\",\n    value: function _checkQueueLength() {\n      if (this._dataQueue.length() > this._queueLoadThershold) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"Data queue has \".concat(this._dataQueue.length(), \" items in queue. Might indicate slow\\\\unstable communication issues.\"));\n      }\n    }\n  }, {\n    key: \"_flushData\",\n    value: function _flushData() {\n      while (this._dataQueue.hasItems()) {\n        this._processNextQueueItem(true);\n      }\n    }\n  }, {\n    key: \"prepareMessageForSendRetry\",\n    value: function prepareMessageForSendRetry(item) {\n      var _this3 = this;\n      this._clearRetryTimeout();\n      this.retryMessage.updateRetryInterval();\n      var timeBetweenRetry = this.retryMessage.getNextInterval();\n      this._sendRetryTimeoutId = setTimeout(function () {\n        _this3._retryQueueItem(item);\n      }, timeBetweenRetry);\n    }\n  }, {\n    key: \"_retryQueueItem\",\n    value: function _retryQueueItem(updatedItem) {\n      var _this4 = this;\n      var item = null;\n      item = updatedItem;\n      var requestBody = this._requestBodyBuilder.build(item.messageToSend, false);\n      if (this._enableRequestBodyHashing) {\n        _services_HashService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].hashSha256(requestBody, function (err, hashedBody) {\n          if (err) {\n            _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(err);\n            return;\n          }\n          _this4._sendProcessedQueueItem(requestBody, item, false, hashedBody);\n        });\n      } else {\n        this._sendProcessedQueueItem(requestBody, item, false, null);\n      }\n    }\n  }, {\n    key: \"_clearRetryTimeout\",\n    value: function _clearRetryTimeout() {\n      if (this._sendRetryTimeoutId) {\n        clearTimeout(this._sendRetryTimeoutId);\n      }\n    }\n  }, {\n    key: \"_buildFailureLog\",\n    value: function _buildFailureLog(responseText, status, statusText) {\n      var failureLog = '';\n      if (responseText) {\n        failureLog += \"Response Text: \".concat(responseText, \".\");\n      }\n      if (status) {\n        failureLog += \"Status: \".concat(status, \".\");\n      }\n      if (statusText) {\n        failureLog += \"Status Text: \".concat(statusText, \".\");\n      }\n      return failureLog;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupMessage.js\":\n/*!************************************************!*\\\n  !*** ./src/worker/communication/WupMessage.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupMessage; }\n/* harmony export */ });\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Constants */ \"./src/worker/communication/Constants.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar WupMessage = /*#__PURE__*/function () {\n  function WupMessage() {\n    _classCallCheck(this, WupMessage);\n    this._messageStruct = {\n      ds: _Constants__WEBPACK_IMPORTED_MODULE_0__.DATA_SOURCE_TYPE\n    };\n  }\n  return _createClass(WupMessage, [{\n    key: \"getDataSource\",\n    value: function getDataSource() {\n      return this._messageStruct.ds;\n    }\n  }, {\n    key: \"getSid\",\n    value: function getSid() {\n      return this._messageStruct.cdsnum;\n    }\n  }, {\n    key: \"setSid\",\n    value: function setSid(sid) {\n      this._messageStruct.cdsnum = sid;\n    }\n  }, {\n    key: \"getCsid\",\n    value: function getCsid() {\n      return this._messageStruct.csid;\n    }\n  }, {\n    key: \"setCsid\",\n    value: function setCsid(csid) {\n      this._messageStruct.csid = csid;\n    }\n  }, {\n    key: \"getPsid\",\n    value: function getPsid() {\n      return this._messageStruct.psid;\n    }\n  }, {\n    key: \"setPsid\",\n    value: function setPsid(psid) {\n      this._messageStruct.psid = psid;\n    }\n  }, {\n    key: \"getMuid\",\n    value: function getMuid() {\n      return this._messageStruct.muid;\n    }\n  }, {\n    key: \"setMuid\",\n    value: function setMuid(muid) {\n      this._messageStruct.muid = muid;\n    }\n  }, {\n    key: \"getContextName\",\n    value: function getContextName() {\n      return this._messageStruct.context_name;\n    }\n  }, {\n    key: \"setContextName\",\n    value: function setContextName(contextName) {\n      this._messageStruct.context_name = contextName;\n    }\n  }, {\n    key: \"getRequestId\",\n    value: function getRequestId() {\n      return this._messageStruct.requestId;\n    }\n  }, {\n    key: \"setRequestId\",\n    value: function setRequestId(requestId) {\n      this._messageStruct.requestId = requestId;\n    }\n  }, {\n    key: \"getSts\",\n    value: function getSts() {\n      return this._messageStruct.sts;\n    }\n  }, {\n    key: \"setSts\",\n    value: function setSts(sts) {\n      this._messageStruct.sts = sts;\n    }\n  }, {\n    key: \"getStd\",\n    value: function getStd() {\n      return this._messageStruct.std;\n    }\n  }, {\n    key: \"setStd\",\n    value: function setStd(std) {\n      this._messageStruct.std = std;\n    }\n  }, {\n    key: \"setFlush\",\n    value: function setFlush(flushName) {\n      this._messageStruct.f = flushName;\n    }\n  }, {\n    key: \"getConfigurationName\",\n    value: function getConfigurationName() {\n      return this._messageStruct.c;\n    }\n  }, {\n    key: \"setConfigurationName\",\n    value: function setConfigurationName(configurationName) {\n      this._messageStruct.c = configurationName;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this._messageStruct.d;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      this._messageStruct.d = data;\n    }\n  }, {\n    key: \"getDataFields\",\n    value: function getDataFields() {\n      return this._messageStruct.sf;\n    }\n  }, {\n    key: \"setDataFields\",\n    value: function setDataFields(dataFields) {\n      this._messageStruct.sf = dataFields;\n    }\n  }, {\n    key: \"getInternalMessage\",\n    value: function getInternalMessage() {\n      return this._messageStruct;\n    }\n  }, {\n    key: \"setOtt\",\n    value: function setOtt(ott) {\n      this._messageStruct.ott = ott;\n    }\n  }, {\n    key: \"getOtt\",\n    value: function getOtt() {\n      return this._messageStruct.ott;\n    }\n  }, {\n    key: \"setAgentType\",\n    value: function setAgentType(agentType) {\n      this._messageStruct.agent_type = agentType;\n    }\n  }, {\n    key: \"getAgentType\",\n    value: function getAgentType() {\n      return this._messageStruct.agent_type;\n    }\n  }, {\n    key: \"setAgentId\",\n    value: function setAgentId(agentId) {\n      this._messageStruct.agent_id = agentId;\n    }\n  }, {\n    key: \"getAgentId\",\n    value: function getAgentId() {\n      return this._messageStruct.agent_id;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupMessageBuilder.js\":\n/*!*******************************************************!*\\\n  !*** ./src/worker/communication/WupMessageBuilder.js ***!\n  \\*******************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupMessageBuilder; }\n/* harmony export */ });\n/* harmony import */ var _WupMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WupMessage */ \"./src/worker/communication/WupMessage.js\");\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Constants */ \"./src/worker/communication/Constants.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Class is responsible for building a wup message.\n */\n\n\nvar WupMessageBuilder = /*#__PURE__*/function () {\n  function WupMessageBuilder(wupServerSessionState, dataPacker, configurationRepository) {\n    _classCallCheck(this, WupMessageBuilder);\n    this._wupServerSessionState = wupServerSessionState;\n    this._dataPacker = dataPacker;\n    this._configurationRepository = configurationRepository;\n  }\n  return _createClass(WupMessageBuilder, [{\n    key: \"build\",\n    value: function build(wupType, data) {\n      var wupMessage = new _WupMessage__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n      this._updateDataWithBrand(data);\n\n      // Set the SID property. This might be overridden before sending the message\n      wupMessage.setSid(this._wupServerSessionState.getSid());\n      wupMessage.setCsid(this._wupServerSessionState.getCsid());\n      wupMessage.setPsid(this._wupServerSessionState.getPsid());\n      wupMessage.setMuid(this._wupServerSessionState.getMuid());\n      wupMessage.setContextName(this._wupServerSessionState.getContextName());\n      wupMessage.setRequestId(this._wupServerSessionState.getRequestId());\n      wupMessage.setAgentType(this._wupServerSessionState.getAgentType());\n      wupMessage.setAgentId(this._wupServerSessionState.getAgentId());\n      if (this._wupServerSessionState.getSts() && this._wupServerSessionState.getStd()) {\n        // Set the STS, STD properties. These might be overridden before sending the message\n        wupMessage.setSts(this._wupServerSessionState.getSts());\n        wupMessage.setStd(this._wupServerSessionState.getStd());\n      }\n      var ott = this._wupServerSessionState.getOtt();\n      if (ott) {\n        wupMessage.setOtt(ott);\n      }\n      if (wupType === _Constants__WEBPACK_IMPORTED_MODULE_1__.DATA_SOURCE_TYPE) {\n        wupMessage.setConfigurationName(wupType);\n      } else {\n        wupMessage.setData([this._dataPacker.pack(data)]);\n        var enableWupSendDataFields = this._configurationRepository.get('enableWupSendDataFields');\n        if (enableWupSendDataFields) {\n          wupMessage.setDataFields(this._getDataFieldIndices(data));\n        }\n      }\n      return wupMessage;\n    }\n  }, {\n    key: \"_updateDataWithBrand\",\n    value: function _updateDataWithBrand(data) {\n      var brand = this._wupServerSessionState.getBrand();\n      if (brand) {\n        if (!data.static_fields) {\n          data['static_fields'] = [];\n        }\n        data.static_fields.push(['brand', brand]);\n      }\n    }\n\n    /**\n     * Generates a sparse bitmask array representing which tracked fields are present in the current WUP message.\n     * \n     * This function enables the server to track data collection completeness without parsing the entire payload\n     * on every heartbeat or chunk. The server can merge sparse masks across multiple WUP messages to determine\n     * when all required fields have been collected and trigger fingerprint calculation early to meet getScore SLA.\n     * \n     * The sparse bitmask format:\n     * - First element: Checksum of the tracked_fields configuration (for debugging/logging only)\n     * - Remaining elements: Sorted indices of fields present in this WUP message\n     * \n     * Example:\n     * - Configuration: [\"g_ips\", \"fonts\", \"os\", \"device_id\", \"canvas\"]\n     * - WUP contains: \"g_ips\" (index 0), \"os\" (index 2), \"device_id\" (index 3)\n     * - Returns: [checksum, 0, 2, 3]\n     * \n     * The server processes this by:\n     * 1. Skipping the first element (checksum, used only for validation/debugging)\n     * 2. Mapping remaining indices to tracked_fields configuration to determine present fields\n     * 3. Accumulating indices across multiple WUP messages for the session\n     * 4. Triggering fingerprint calculation once all required fields are collected\n     * \n     * @param {Object} data - The WUP message data object containing static_fields array\n     * @param {Array<Array>} [data.static_fields] - Array of field pairs, where each pair is [fieldName, fieldValue]\n     * \n     * @returns {Array<number>} Sparse bitmask array with checksum as first element, followed by sorted field indices.\n     *                          Returns empty array if:\n     *                          - Configuration is missing or invalid\n     *                          - No tracked fields are present in the data\n     *                          - Configuration parsing fails\n     * \n     * @example\n     * // Configuration: [\"g_ips\", \"fonts\", \"os\"]\n     * // data.static_fields: [[\"g_ips\", \"192.168.1.1\"], [\"os\", \"Windows\"]]\n     * // Returns: [checksum, 0, 2]  // g_ips=0, os=2\n     */\n  }, {\n    key: \"_getDataFieldIndices\",\n    value: function _getDataFieldIndices(data) {\n      var wupSendDataFields = this._configurationRepository.get('embedding_minimal_collectors');\n\n      // Parse JSON string if needed, return empty array on failure\n      if (typeof wupSendDataFields === 'string') {\n        try {\n          wupSendDataFields = JSON.parse(wupSendDataFields);\n        } catch (_unused) {\n          return [];\n        }\n      }\n\n      // Validate configuration is an array\n      if (!Array.isArray(wupSendDataFields)) {\n        return [];\n      }\n\n      // Extract field indices from static_fields\n      var fieldIndices = new Set((Array.isArray(data.static_fields) ? data.static_fields : []).filter(function (fieldPair) {\n        return Array.isArray(fieldPair) && fieldPair.length >= 1;\n      }).map(function (fieldPair) {\n        return wupSendDataFields.indexOf(fieldPair[0]);\n      }).filter(function (index) {\n        return index !== -1;\n      }));\n\n      // Return sorted indices, or empty array if no matches\n      if (fieldIndices.size === 0) {\n        return [];\n      }\n\n      // Add checksum and return with checksum first, then sorted remaining indices\n      var checksum = this._calculateChecksum(wupSendDataFields);\n      var sortedIndices = Array.from(fieldIndices).sort(function (a, b) {\n        return a - b;\n      });\n      return [checksum].concat(_toConsumableArray(sortedIndices));\n    }\n  }, {\n    key: \"_calculateChecksum\",\n    value: function _calculateChecksum(array) {\n      // Convert array to string representation for checksum calculation\n      var arrayString = JSON.stringify(array);\n      var hash = 0;\n      for (var i = 0; i < arrayString.length; i++) {\n        var _char = arrayString.charCodeAt(i);\n        hash = (hash << 5) - hash + _char;\n        hash = hash & hash; // Convert to 32-bit integer\n      }\n      return Math.abs(hash);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupRequestBodyBuilder.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/communication/WupRequestBodyBuilder.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupRequestBodyBuilder; }\n/* harmony export */ });\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Constants */ \"./src/worker/communication/Constants.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar WupRequestBodyBuilder = /*#__PURE__*/function () {\n  function WupRequestBodyBuilder(wupServerSessionState) {\n    _classCallCheck(this, WupRequestBodyBuilder);\n    this._wupServerSessionState = wupServerSessionState;\n  }\n  return _createClass(WupRequestBodyBuilder, [{\n    key: \"build\",\n    value: function build(wupMessage) {\n      var shouldFlush = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      wupMessage.setSid(this._wupServerSessionState.getSid());\n      wupMessage.setSts(this._wupServerSessionState.getSts());\n      wupMessage.setStd(this._wupServerSessionState.getStd());\n      wupMessage.setOtt(this._wupServerSessionState.getOtt());\n      if (shouldFlush) {\n        wupMessage.setFlush(_Constants__WEBPACK_IMPORTED_MODULE_0__.DATA_SOURCE_TYPE);\n      }\n      return JSON.stringify(wupMessage.getInternalMessage());\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupResponseProcessor.js\":\n/*!**********************************************************!*\\\n  !*** ./src/worker/communication/WupResponseProcessor.js ***!\n  \\**********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupResponseProcessor; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar WupResponseProcessor = /*#__PURE__*/function () {\n  function WupResponseProcessor(wupServerSessionState, messageBus, configurationRepository) {\n    _classCallCheck(this, WupResponseProcessor);\n    this._wupServerSessionState = wupServerSessionState;\n    this._messageBus = messageBus;\n    this._configurationRepository = configurationRepository;\n  }\n  return _createClass(WupResponseProcessor, [{\n    key: \"process\",\n    value: function process(response, processConfigurations) {\n      //here we are getting updates from the server and checks the nature of message and react upon\n      var publishConfigurationLoadedEvent = false;\n      if (processConfigurations) {\n        this._wupServerSessionState.markConfigurationReceived();\n        // Update the worker instance configurations\n        this._configurationRepository.loadConfigurations(response);\n        publishConfigurationLoadedEvent = true;\n      }\n\n      // Update sts if we received an updated one\n      if (response.sts) {\n        this._wupServerSessionState.setSts(response.sts);\n      }\n\n      // Update std if we received an updated one\n      if (response.std) {\n        this._wupServerSessionState.setStd(response.std);\n      }\n      if (response.ott) {\n        this._wupServerSessionState.setOtt(response.ott);\n      }\n\n      // If session was reset and we have a new sid\n      if (response.reset_session && response.new_sid) {\n        this._wupServerSessionState.setSid(response.new_sid);\n      }\n\n      // If we get restored muid from the server\n      if (response.rmd) {\n        this._wupServerSessionState.setMuid(response.rmd);\n        this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerRestoredMuidEvent, response.rmd);\n      }\n      if (response.agent_id) {\n        this._wupServerSessionState.setAgentId(response.agent_id);\n        this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerNewAgentIdEvent, response.agent_id);\n      }\n\n      // Notify on session state change\n      this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerStateUpdatedEvent, {\n        requestId: this._wupServerSessionState.getRequestId(),\n        sid: this._wupServerSessionState.getSid(),\n        sts: this._wupServerSessionState.getSts(),\n        std: this._wupServerSessionState.getStd(),\n        ott: this._wupServerSessionState.getOtt()\n      });\n\n      // Publish the configuration loaded event if required\n      if (publishConfigurationLoadedEvent) {\n        this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ConfigurationLoadedEvent, this._configurationRepository);\n      }\n\n      // If session was reset we publish a bus event to handle the case\n      if (response.reset_session) {\n        if (response.new_sid) {\n          this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.NewSessionStartedEvent, response.new_sid);\n        } else {\n          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn('Received a reset session flag from the server without a new sid. Ignoring reset.');\n        }\n      }\n      if (response.nextWupInterval) {\n        if (response.nextWupInterval !== this._wupServerSessionState.getWupDispatchRate()) {\n          this._wupServerSessionState.setWupDispatchRate(response.nextWupInterval);\n          this._messageBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.WupDispatchRateUpdatedEvent, this._wupServerSessionState.getWupDispatchRate());\n        }\n      } else {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"Received an invalid nextWupInterval value of \".concat(response.nextWupInterval, \". Ignoring value.\"));\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupServerClient.js\":\n/*!*****************************************************!*\\\n  !*** ./src/worker/communication/WupServerClient.js ***!\n  \\*****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupServerClient; }\n/* harmony export */ });\n/* harmony import */ var _main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../WorkerStatusCategoryType */ \"./src/worker/WorkerStatusCategoryType.js\");\n/* harmony import */ var _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../main/events/HeartBeatEvent */ \"./src/main/events/HeartBeatEvent.js\");\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Constants */ \"./src/worker/communication/Constants.js\");\n/* harmony import */ var _main_contract_AgentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../main/contract/AgentType */ \"./src/main/contract/AgentType.js\");\n/* harmony import */ var _main_const_communication__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../main/const/communication */ \"./src/main/const/communication.js\");\n/* harmony import */ var _WupUrlBuilder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./WupUrlBuilder */ \"./src/worker/communication/WupUrlBuilder.js\");\n/* harmony import */ var _utils_WorkerUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/WorkerUtils */ \"./src/worker/utils/WorkerUtils.js\");\n/* harmony import */ var _ReMessageSettings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ReMessageSettings */ \"./src/worker/communication/ReMessageSettings.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationWrapperWupMessage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationWrapperWupMessage */ \"./src/main/core/configuration/ConfigurationWrapperWupMessage.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WupServerClient = /*#__PURE__*/function () {\n  function WupServerClient(serverCommunicator, wupMessageBuilder, wupServerSessionState, wupStatisticsService, wupResponseProcessor, configurationRepository, msgBus) {\n    _classCallCheck(this, WupServerClient);\n    this._serverCommunicator = serverCommunicator;\n    this._wupMessageBuilder = wupMessageBuilder;\n    this._wupServerSessionState = wupServerSessionState;\n    this._wupStatisticsService = wupStatisticsService;\n    this._wupResponseProcessor = wupResponseProcessor;\n    this._configurationRepository = configurationRepository;\n    this._msgBus = msgBus;\n    // Retry infinite number of times until successful...\n    this._INFINITE_MESSAGE_SEND_RETRIES = 0;\n    this._retryMessage = this._serverCommunicator.getRetryMessage();\n    this._MESSAGE_SEND_RETRIES = this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupMessageNumToRetry);\n    this._requestTimeout = this._configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_0__.ConfigurationFields.wupMessageRequestTimeout);\n  }\n  return _createClass(WupServerClient, [{\n    key: \"startNewSession\",\n    value: function startNewSession(cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, recoveryServerURL) {\n      this._validateCommonSessionRelatedParameters(muid, serverAddress);\n\n      // Reset the request ID since we are starting a new session\n      this._wupServerSessionState.setRequestId(0);\n      //Reset the brand since the start new session arrived from the api and not from the server\n      this._wupServerSessionState.setBrand(null);\n      this._serverAddress = serverAddress;\n      this._recoveryServerURL = recoveryServerURL;\n      this.shouldAddRealAPI = false;\n      this._sendSessionMessage(null, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, null, this._wupServerSessionState.getRequestId());\n    }\n\n    /**\n     * Send a new session or resume session message to the server\n     * @param sid - the sid if available. If not a new session will be started.\n     * @param cid\n     * @param protocolType\n     * @param minifiedUriEnabled\n     * @param csid - csid if available\n     * @param psid - psid if available\n     * @param muid\n     * @param contextName\n     * @param serverAddress\n     * @param serverState\n     * @param requestId\n     * @private\n     */\n  }, {\n    key: \"_sendSessionMessage\",\n    value: function _sendSessionMessage(sid, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, serverState, requestId) {\n      var _this = this;\n      this._initSession(sid, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, serverState, requestId);\n      var dataToSend = this._createStaticFieldsPart();\n\n      //We should only request for configurations if we don't have them already and if we don't have a pending request for them\n      var shouldRequestConfigurations = !this._wupServerSessionState.getHasConfiguration() && !this._wupServerSessionState.getHasPendingConfigurationRequest();\n\n      //Mark that we are requesting configuration so that we don't do double requests... This can actually\n      //happen if a customer for instance calls reset session fast enough\n      if (shouldRequestConfigurations) {\n        this._wupServerSessionState.markConfigurationRequested();\n      }\n\n      // Build the message to be sent\n      var message = this._wupMessageBuilder.build(shouldRequestConfigurations ? _Constants__WEBPACK_IMPORTED_MODULE_5__.DATA_SOURCE_TYPE : _Constants__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_WUP_TYPE, dataToSend);\n      var onSendSuccess = function onSendSuccess(responseData) {\n        // If we don't have configurations yet, we indicate that we expect to receive configurations in the response\n        _this._onSendDataSuccess(responseData, shouldRequestConfigurations);\n      };\n      var serverUrl = (0,_WupUrlBuilder__WEBPACK_IMPORTED_MODULE_8__.buildServerUrl)(serverAddress, protocolType, cid, minifiedUriEnabled);\n      this._serverCommunicator.sendMessage(message, this._requestTimeout, shouldRequestConfigurations ? this._INFINITE_MESSAGE_SEND_RETRIES : this._MESSAGE_SEND_RETRIES, false, onSendSuccess, this._onSendDataFailure.bind(this), serverUrl);\n    }\n  }, {\n    key: \"resumeSession\",\n    value: function resumeSession(sid, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, serverState, recoveryServerURL) {\n      this._validateResumeSessionRelatedParameters(sid, muid, serverAddress);\n\n      // if request id is zero or -1 or nan then it mean reset session\n      // else just config request, reload page so increment it\n      var requestId = serverState && serverState.requestId ? this._wupServerSessionState.setRequestId(serverState.requestId + 1) : this._wupServerSessionState.setRequestId(0);\n      this._serverAddress = serverAddress;\n      this._recoveryServerURL = recoveryServerURL;\n      this._sendSessionMessage(sid, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, serverState, requestId);\n    }\n  }, {\n    key: \"sendData\",\n    value: function sendData(data) {\n      var shouldFlush = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var ottVal = this._wupServerSessionState.getOtt();\n      var protocolType = this._wupServerSessionState.getProtocolType();\n      var isV4 = protocolType === _main_const_communication__WEBPACK_IMPORTED_MODULE_7__.serverProtocolV4;\n      var isV3 = protocolType === _main_const_communication__WEBPACK_IMPORTED_MODULE_7__.serverProtocolV3;\n      var isStsStdExists = this._wupServerSessionState.getSts() && this._wupServerSessionState.getStd();\n      if (ottVal && isV4 || isStsStdExists && isV3) {\n        this._sendMessage(data, shouldFlush);\n        return;\n      }\n\n      // do not send data if no sts or std on V3 and ott on V4\n      var noDataInfoLog = isV4 ? 'ott' : 'sts or std';\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(\"Unable to send data. \".concat(noDataInfoLog, \" is undefined\"));\n    }\n  }, {\n    key: \"setRequestTimeout\",\n    value: function setRequestTimeout(timeout) {\n      this._requestTimeout = timeout;\n    }\n  }, {\n    key: \"setConfigurationWupMessage\",\n    value: function setConfigurationWupMessage() {\n      var reWupMessageSettings = _main_core_configuration_ConfigurationWrapperWupMessage__WEBPACK_IMPORTED_MODULE_11__[\"default\"].createReMessageSettings(this._configurationRepository);\n      this._retryMessage.updateSettings(reWupMessageSettings);\n    }\n\n    /**\n     * Initializes a new session\n     */\n  }, {\n    key: \"_initSession\",\n    value: function _initSession(sid, cid, protocolType, minifiedUriEnabled, csid, psid, muid, contextName, serverAddress, serverState, requestId) {\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].debug(\"Initializing session. wupUrl:\".concat(serverAddress, \", sid:\").concat(sid));\n      this._wupServerSessionState.setBaseServerUrl(serverAddress);\n      this._wupServerSessionState.setSid(sid);\n      this._wupServerSessionState.setCid(cid);\n      this._wupServerSessionState.setCsid(csid);\n      this._wupServerSessionState.setPsid(psid);\n      this._wupServerSessionState.setMuid(muid);\n      this._wupServerSessionState.setProtocolType(protocolType);\n      this._wupServerSessionState.setShouldMinifyUri(minifiedUriEnabled);\n      this._wupServerSessionState.setContextName(contextName || '');\n      this._wupServerSessionState.setRequestId(requestId, false);\n      if (serverState) {\n        this._wupServerSessionState.setSts(serverState.sts);\n        this._wupServerSessionState.setStd(serverState.std);\n        this._wupServerSessionState.setOtt(serverState.ott);\n      } else {\n        // a new session is starting (maybe as a result of session id change)\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('Resetting server state of server communicator. Deleting sts and std');\n        this._wupServerSessionState.setSts(null);\n        this._wupServerSessionState.setStd(null);\n        this._wupServerSessionState.setOtt(null);\n\n        // Reset the wup statistics once a new session is starting\n        this._wupStatisticsService.resetCounters();\n      }\n    }\n  }, {\n    key: \"_fallBackToRecoveryServerUrl\",\n    value: function _fallBackToRecoveryServerUrl() {\n      if (this._recoveryServerURL) {\n        this._wupServerSessionState.setBaseServerUrl(this._recoveryServerURL);\n        this.shouldAddRealAPI = true;\n      }\n    }\n  }, {\n    key: \"updateCsid\",\n    value: function updateCsid(csid) {\n      // Get the next request id. In case there was no request id we get 0 but this should not happen\n      var requestId = this._wupServerSessionState.incrementRequestId() || 0;\n      this._wupServerSessionState.setCsid(csid);\n      var data = {\n        static_fields: []\n      };\n      data.static_fields.push(['requestId', requestId], ['contextId', this._wupServerSessionState.getContextName()], ['sessionId', this._wupServerSessionState.getSid()], ['customerSessionId', this._wupServerSessionState.getCsid()], ['partnerSessionId', this._wupServerSessionState.getPsid()], ['muid', this._wupServerSessionState.getMuid()]);\n      this._sendMessage(data);\n    }\n  }, {\n    key: \"updatePsid\",\n    value: function updatePsid(psid) {\n      // Get the next request id. In case there was no request id we get 0 but this should not happen\n      var requestId = this._wupServerSessionState.incrementRequestId() || 0;\n      this._wupServerSessionState.setPsid(psid);\n      var data = {\n        static_fields: []\n      };\n      data.static_fields.push(['requestId', requestId], ['contextId', this._wupServerSessionState.getContextName()], ['sessionId', this._wupServerSessionState.getSid()], ['customerSessionId', this._wupServerSessionState.getCsid()], ['partnerSessionId', this._wupServerSessionState.getPsid()], ['muid', this._wupServerSessionState.getMuid()]);\n      this._sendMessage(data);\n    }\n  }, {\n    key: \"updateBrand\",\n    value: function updateBrand(brand) {\n      this._wupServerSessionState.setBrand(brand);\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      var isCommonReady = this._serverCommunicator.isReadyToSendData();\n      var protocolType = this._wupServerSessionState.getProtocolType();\n\n      // on wupserver V4 the std has a default value of 'std'\n      if (protocolType === _main_const_communication__WEBPACK_IMPORTED_MODULE_7__.serverProtocolV4) {\n        return !!(isCommonReady && this._wupServerSessionState.getOtt());\n      }\n      // support for wupserver V3\n      var isStsStdExists = this._wupServerSessionState.getStd() && this._wupServerSessionState.getSts();\n      return !!(isCommonReady && isStsStdExists);\n    }\n\n    /**\n     * Validate mandatory parameters for session resume\n     * These parameters must be sent when session message is sent to server\n     * @param sid\n     * @param muid\n     * @param serverAddress\n     * @private\n     */\n  }, {\n    key: \"_validateResumeSessionRelatedParameters\",\n    value: function _validateResumeSessionRelatedParameters(sid, muid, serverAddress) {\n      if (!sid) {\n        throw new Error(\"Invalid sid parameter \".concat(sid, \". Unable to start new session\"));\n      }\n      this._validateCommonSessionRelatedParameters(muid, serverAddress);\n    }\n\n    /**\n     * Validate mandatory parameters for start and resume of session\n     * @param muid\n     * @param serverAddress\n     * @private\n     */\n  }, {\n    key: \"_validateCommonSessionRelatedParameters\",\n    value: function _validateCommonSessionRelatedParameters(muid, serverAddress) {\n      if (!muid) {\n        if (this._wupServerSessionState.getAgentType() !== _main_contract_AgentType__WEBPACK_IMPORTED_MODULE_6__.AgentType.SECONDARY) {\n          throw new Error(\"Invalid muid parameter \".concat(muid, \". Unable to start new session\"));\n        }\n      }\n      if (!serverAddress) {\n        throw new Error(\"Invalid serverAddress parameter \".concat(serverAddress, \". Unable to start new session\"));\n      }\n    }\n\n    /**\n     * Create the static fields message part out of the session state\n     * @returns {{static_fields: Array}}\n     * @private\n     */\n  }, {\n    key: \"_createStaticFieldsPart\",\n    value: function _createStaticFieldsPart() {\n      var staticFieldsPart = {\n        static_fields: []\n      };\n      staticFieldsPart.static_fields.push(['requestId', this._wupServerSessionState.getRequestId()], ['contextId', this._wupServerSessionState.getContextName()], ['sessionId', this._wupServerSessionState.getSid()], ['customerSessionId', this._wupServerSessionState.getCsid()], ['partnerSessionId', this._wupServerSessionState.getPsid()], ['muid', this._wupServerSessionState.getMuid()]);\n      return staticFieldsPart;\n    }\n\n    /**\n     * Used to send a regular wup (all except for configuration)\n     * @param data\n     * @param shouldFlush\n     * @private\n     */\n  }, {\n    key: \"_sendMessage\",\n    value: function _sendMessage(data) {\n      var shouldFlush = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      // Build the message to be sent\n      var wupMessage = this._wupMessageBuilder.build(_Constants__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_WUP_TYPE, data);\n      var serverUrl = (0,_WupUrlBuilder__WEBPACK_IMPORTED_MODULE_8__.buildServerUrl)(this._wupServerSessionState.getBaseServerUrl(), this._wupServerSessionState.getProtocolType(), this._wupServerSessionState.getCid(), this._wupServerSessionState.getShouldMinifyUri());\n      var host;\n      try {\n        host = new URL(this._serverAddress).hostname;\n      } catch (_unused) {\n        host = null; // or some fallback\n      }\n      this._serverCommunicator.sendMessage(wupMessage, this._requestTimeout, this._MESSAGE_SEND_RETRIES, shouldFlush, this._onSendDataSuccess.bind(this), this._onSendDataFailure.bind(this), serverUrl, this.shouldAddRealAPI ? host : null);\n    }\n  }, {\n    key: \"_onSendDataSuccess\",\n    value: function _onSendDataSuccess(response, expectConfiguration) {\n      // If we didn't receive the parameter we default to false\n      expectConfiguration = expectConfiguration || false;\n      this._publishWorkerSystemStatus(_WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WupServerError, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Ok);\n      this._handleSuccessResponse(response, expectConfiguration);\n      this._wupStatisticsService.incrementSentWupCount();\n    }\n  }, {\n    key: \"_onSendDataFailure\",\n    value: function _onSendDataFailure(status, request, retriesCount, shouldRetry) {\n      if (retriesCount === this._MESSAGE_SEND_RETRIES) {\n        // Notify heartbeat service on wup failure\n        this._publishWorkerSystemStatus(_WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WupServerError, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Error);\n      } else {\n        // Notify heartbeat service on wup request attempt failure.\n        this._publishWorkerSystemStatus(_WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WupServerError, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.RequestError);\n      }\n      if (status == _utils_WorkerUtils__WEBPACK_IMPORTED_MODULE_9__[\"default\"].AD_BLOCK_STATUS_CODE && this._recoveryServerURL) {\n        this._fallBackToRecoveryServerUrl();\n        var serverUrl = (0,_WupUrlBuilder__WEBPACK_IMPORTED_MODULE_8__.buildServerUrl)(this._wupServerSessionState.getBaseServerUrl(), this._wupServerSessionState.getProtocolType(), this._wupServerSessionState.getCid(), this._wupServerSessionState.getShouldMinifyUri());\n        var host;\n        try {\n          host = new URL(this._serverAddress).hostname;\n        } catch (_unused2) {\n          host = null; // or some fallback\n        }\n        var item = _objectSpread(_objectSpread({}, request), {}, {\n          serverUrl: serverUrl,\n          realAPI: host\n        });\n        this._serverCommunicator.prepareMessageForSendRetry(item);\n      } else if (shouldRetry) {\n        this._serverCommunicator.prepareMessageForSendRetry(request);\n      }\n    }\n  }, {\n    key: \"_handleSuccessResponse\",\n    value: function _handleSuccessResponse(response, expectConfiguration) {\n      var category = expectConfiguration ? _WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.ConfigurationReceived : _WorkerStatusCategoryType__WEBPACK_IMPORTED_MODULE_2__.WorkerStatusCategoryType.WupServerResponse;\n      try {\n        var parsedResponse = JSON.parse(response);\n\n        //in the wupResponseProcessor we are using the WupServerSessionState to set the correct received from the server\n        this._wupResponseProcessor.process(parsedResponse, expectConfiguration);\n        this._publishWorkerSystemStatus(category, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Ok);\n      } catch (ex) {\n        this._publishWorkerSystemStatus(category, _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__.statusTypes.Error);\n        var err = \"Failed to parse message from server: \".concat(ex.message);\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(err, ex);\n      }\n    }\n  }, {\n    key: \"_publishWorkerSystemStatus\",\n    value: function _publishWorkerSystemStatus(category, status) {\n      this._msgBus.publish(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_4__.MessageBusEventType.WorkerSystemStatusEvent, new _main_events_HeartBeatEvent__WEBPACK_IMPORTED_MODULE_3__[\"default\"](category, status));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupServerSessionState.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/communication/WupServerSessionState.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupServerSessionState; }\n/* harmony export */ });\n/* harmony import */ var _main_infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/infrastructure/CDEvent */ \"./src/main/infrastructure/CDEvent.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar DEFAULT_DISPATCH_RATE = 5000;\nvar WupServerSessionState = /*#__PURE__*/function () {\n  function WupServerSessionState() {\n    _classCallCheck(this, WupServerSessionState);\n    this.onServerStateUpdated = new _main_infrastructure_CDEvent__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.reset();\n  }\n  return _createClass(WupServerSessionState, [{\n    key: \"getSts\",\n    value: function getSts() {\n      return this._sts;\n    }\n  }, {\n    key: \"getStd\",\n    value: function getStd() {\n      return this._std;\n    }\n  }, {\n    key: \"getSid\",\n    value: function getSid() {\n      return this._sid;\n    }\n  }, {\n    key: \"setCid\",\n    value: function setCid(cid) {\n      this._cid = cid;\n    }\n  }, {\n    key: \"getCid\",\n    value: function getCid() {\n      return this._cid;\n    }\n  }, {\n    key: \"getCsid\",\n    value: function getCsid() {\n      return this._csid;\n    }\n  }, {\n    key: \"getPsid\",\n    value: function getPsid() {\n      return this._psid;\n    }\n  }, {\n    key: \"getMuid\",\n    value: function getMuid() {\n      return this._muid;\n    }\n  }, {\n    key: \"getContextName\",\n    value: function getContextName() {\n      return this._contextName;\n    }\n  }, {\n    key: \"getRequestId\",\n    value: function getRequestId() {\n      return this._requestId;\n    }\n  }, {\n    key: \"getWupDispatchRate\",\n    value: function getWupDispatchRate() {\n      return this._wupDispatchRate;\n    }\n  }, {\n    key: \"getBrand\",\n    value: function getBrand() {\n      return this._brand;\n    }\n  }, {\n    key: \"setSts\",\n    value: function setSts(sts) {\n      this._sts = sts;\n    }\n  }, {\n    key: \"setStd\",\n    value: function setStd(std) {\n      this._std = std;\n    }\n  }, {\n    key: \"setSid\",\n    value: function setSid(sid) {\n      this._sid = sid;\n    }\n  }, {\n    key: \"setCsid\",\n    value: function setCsid(csid) {\n      this._csid = csid;\n    }\n  }, {\n    key: \"setPsid\",\n    value: function setPsid(psid) {\n      this._psid = psid;\n    }\n  }, {\n    key: \"setMuid\",\n    value: function setMuid(muid) {\n      this._muid = muid || null;\n    }\n  }, {\n    key: \"setOtt\",\n    value: function setOtt(ott) {\n      this._ott = ott;\n    }\n  }, {\n    key: \"getOtt\",\n    value: function getOtt() {\n      return this._ott;\n    }\n  }, {\n    key: \"setContextName\",\n    value: function setContextName(contextName) {\n      this._contextName = contextName;\n    }\n  }, {\n    key: \"setRequestId\",\n    value: function setRequestId(requestId) {\n      var publishChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this._requestId = requestId;\n      if (publishChange) {\n        this._publish();\n      }\n      return this._requestId;\n    }\n  }, {\n    key: \"setWupDispatchRate\",\n    value: function setWupDispatchRate(wupDispatchRate) {\n      if (!wupDispatchRate) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn(\"Wup dispatch rate of \".concat(wupDispatchRate, \" is invalid. Ignoring update\"));\n        return;\n      }\n      this._wupDispatchRate = wupDispatchRate;\n    }\n  }, {\n    key: \"setBrand\",\n    value: function setBrand(brand) {\n      this._brand = brand;\n    }\n  }, {\n    key: \"setAgentType\",\n    value: function setAgentType(agentType) {\n      this._agent_type = agentType;\n    }\n  }, {\n    key: \"getAgentType\",\n    value: function getAgentType() {\n      return this._agent_type;\n    }\n  }, {\n    key: \"setAgentId\",\n    value: function setAgentId(agentId) {\n      this._agent_id = agentId;\n    }\n  }, {\n    key: \"getAgentId\",\n    value: function getAgentId() {\n      return this._agent_id;\n    }\n  }, {\n    key: \"markConfigurationRequested\",\n    value: function markConfigurationRequested() {\n      if (this._hasConfiguration) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn('We already have configuration. Ignoring the attempt to mark a pending configuration request.');\n        return;\n      }\n      this._hasPendingConfigurationRequest = true;\n    }\n  }, {\n    key: \"markConfigurationReceived\",\n    value: function markConfigurationReceived() {\n      if (this._hasConfiguration) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn('Marking that we received configuration although we already received configuration from the server. We shouldn\\'t have received it again.');\n      } else if (!this._hasPendingConfigurationRequest) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn('Marking that we received configurations although we didn\\'t have a pending request for configurations.');\n      }\n      this._hasPendingConfigurationRequest = false;\n      this._hasConfiguration = true;\n    }\n  }, {\n    key: \"getHasConfiguration\",\n    value: function getHasConfiguration() {\n      return this._hasConfiguration;\n    }\n  }, {\n    key: \"getHasPendingConfigurationRequest\",\n    value: function getHasPendingConfigurationRequest() {\n      return this._hasPendingConfigurationRequest;\n    }\n  }, {\n    key: \"incrementRequestId\",\n    value: function incrementRequestId() {\n      this._requestId++;\n      this._publish();\n      return this._requestId;\n    }\n  }, {\n    key: \"resetRequestId\",\n    value: function resetRequestId() {\n      this._requestId = 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._ott = null;\n      this._sts = null;\n      this._std = null;\n      this._sid = null;\n      this._cid = null;\n      this._csid = null;\n      this._muid = null;\n      this._contextName = null;\n      this._requestId = 0;\n      this._wupDispatchRate = DEFAULT_DISPATCH_RATE;\n      this._hasConfiguration = false;\n      this._hasPendingConfigurationRequest = false;\n      this._brand = null;\n      this._agent_type = null;\n      this._agent_id = null;\n      this._baseServerUrl = null;\n      this._protocolType = null;\n      this._shouldMinifyUri = false;\n    }\n  }, {\n    key: \"setBaseServerUrl\",\n    value: function setBaseServerUrl(url) {\n      this._baseServerUrl = url;\n    }\n  }, {\n    key: \"getBaseServerUrl\",\n    value: function getBaseServerUrl() {\n      return this._baseServerUrl;\n    }\n  }, {\n    key: \"setProtocolType\",\n    value: function setProtocolType(protocolType) {\n      this._protocolType = protocolType;\n    }\n  }, {\n    key: \"setShouldMinifyUri\",\n    value: function setShouldMinifyUri(shouldMinifyUri) {\n      this._shouldMinifyUri = shouldMinifyUri;\n    }\n  }, {\n    key: \"getShouldMinifyUri\",\n    value: function getShouldMinifyUri() {\n      return this._shouldMinifyUri;\n    }\n  }, {\n    key: \"getProtocolType\",\n    value: function getProtocolType() {\n      return this._protocolType;\n    }\n  }, {\n    key: \"_publish\",\n    value: function _publish() {\n      this.onServerStateUpdated.publish({\n        requestId: this._requestId,\n        sid: this._sid,\n        sts: this._sts,\n        std: this._std,\n        ott: this._ott\n      });\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/communication/WupUrlBuilder.js\":\n/*!***************************************************!*\\\n  !*** ./src/worker/communication/WupUrlBuilder.js ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildServerUrl: function() { return /* binding */ buildServerUrl; }\n/* harmony export */ });\n/* harmony import */ var _main_const_communication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/const/communication */ \"./src/main/const/communication.js\");\n\n\n/**\n *\n * @param baseUrl for example: https://wup-dtrackers.bc2.customers.biocatch.com\n * @param protocolType 3 for v3 and 4 for v4.\n * @param cid\n * @param minify true if should apply sub-path removal and random segment addition to make-it harder for add-blocks to black-list our server's path pattern.\n * @returns example outputs:\n * in case protocolType === 3 , and minify === false , and cid === dtrackers:\n * the result is: https://wup-dtrackers.bc2.customers.biocatch.com/client/v3.1/web/wup?cid=dtrackers\n *\n * in case protocolType === 4 , and minify === true , and cid === dtrackers:\n * the result is: https://wup-dtrackers.bc2.customers.biocatch.com/v4/random-string  (without cid when minify is true)\n */\nfunction buildServerUrl(baseUrl, protocolType, cid, minify) {\n  var path;\n  if (minify) {\n    if (protocolType === _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.serverProtocolV3) {\n      path = _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.minifiedUrlV3Path;\n    } else {\n      path = _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.minifiedUrlV4Path;\n    }\n    path += '/' + _generateRandomUrlSafeString();\n  } else {\n    if (protocolType === _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.serverProtocolV3) {\n      path = _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.wupUrlV3Path;\n    } else {\n      path = _main_const_communication__WEBPACK_IMPORTED_MODULE_0__.wupUrlV4Path;\n    }\n    path += '?cid=' + cid;\n  }\n  return baseUrl + '/' + path;\n}\nfunction _generateRandomUrlSafeString() {\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var length = Math.floor(Math.random() * (20 - 10 + 1)) + 10; // Random length between 10 and 20\n  var randomString = '';\n  for (var i = 0; i < length; i++) {\n    var randomIndex = Math.floor(Math.random() * chars.length);\n    randomString += chars[randomIndex];\n  }\n  return randomString;\n}\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerConfigurationLoadedEventHandler.js\":\n/*!********************************************************************!*\\\n  !*** ./src/worker/events/WorkerConfigurationLoadedEventHandler.js ***!\n  \\********************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerConfigurationLoadedEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationFields */ \"./src/main/core/configuration/ConfigurationFields.js\");\n/* harmony import */ var _main_core_configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../main/core/configuration/ConfigurationRepository */ \"./src/main/core/configuration/ConfigurationRepository.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * This class is for handling configuration updates in worker\n */\n\n\n\n\nvar WorkerConfigurationLoadedEventHandler = /*#__PURE__*/function () {\n  function WorkerConfigurationLoadedEventHandler(messageBus, wupStatisticsService, dataDispatcher, logDataDispatcher, serverCommunicator, wupServerClient, logServerClient, logger, mainCommunicator) {\n    _classCallCheck(this, WorkerConfigurationLoadedEventHandler);\n    this._messageBus = messageBus;\n    this._wupStatisticsService = wupStatisticsService;\n    this._dataDispatcher = dataDispatcher;\n    this._logDataDispatcher = logDataDispatcher;\n    this._serverCommunicator = serverCommunicator;\n    this._wupServerClient = wupServerClient;\n    this._logServerClient = logServerClient;\n    this._logger = logger;\n    this._mainCommunicator = mainCommunicator;\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ConfigurationLoadedEvent, this._handle.bind(this));\n  }\n  return _createClass(WorkerConfigurationLoadedEventHandler, [{\n    key: \"_handle\",\n    value: function _handle(configurationRepository) {\n      this._wupStatisticsService.updateSettings(configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.wupStatisticsLogIntervalMs));\n      var wupDispatcheRateSettings = configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.forceDynamicDataWupDispatchSettings) ? _main_core_configuration_ConfigurationRepository__WEBPACK_IMPORTED_MODULE_2__.ConfigurationDefaultTemplates.defaultDynamicWupDispatchRateConfiguration : configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.dataWupDispatchRateSettings);\n      this._dataDispatcher.updateByConfig(wupDispatcheRateSettings);\n      this._logDataDispatcher.updateByConfig(configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logWupDispatchRateSettings));\n      this._serverCommunicator.updateSettings(configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.serverCommunicationSettings));\n      this._logger.updateLogConfig(configurationRepository);\n\n      // Update the request timeouts in wup and log server clients. wupResponseTimeout config is deprecated but we still try to take it for backwards compatibility\n      this._wupServerClient.setRequestTimeout(configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.wupMessageRequestTimeout) || configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.wupResponseTimeout));\n      this._logServerClient.setRequestTimeout(configurationRepository.get(_main_core_configuration_ConfigurationFields__WEBPACK_IMPORTED_MODULE_1__.ConfigurationFields.logMessageRequestTimeout));\n      this._wupServerClient.setConfigurationWupMessage();\n      this._logServerClient.setConfigurationLogMessage();\n\n      // Notify the main thread that configurations were loaded\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_3__.WorkerEvent.ConfigurationLoadedEvent, configurationRepository.getAll());\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerNewSessionStartedEventHandler.js\":\n/*!******************************************************************!*\\\n  !*** ./src/worker/events/WorkerNewSessionStartedEventHandler.js ***!\n  \\******************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerNewSessionStartedEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * This class is for handling a new session in worker\n */\n\n\nvar WorkerNewSessionStartedEventHandler = /*#__PURE__*/function () {\n  function WorkerNewSessionStartedEventHandler(messageBus, logger, mainCommunicator) {\n    _classCallCheck(this, WorkerNewSessionStartedEventHandler);\n    this._messageBus = messageBus;\n    this._logger = logger;\n    this._mainCommunicator = mainCommunicator;\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.NewSessionStartedEvent, this._handle.bind(this));\n  }\n  return _createClass(WorkerNewSessionStartedEventHandler, [{\n    key: \"_handle\",\n    value: function _handle(newSid) {\n      this._logger.info(\"Worker received a new session id \".concat(newSid, \" from server.\"));\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.NewSessionStartedEvent, newSid);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerServerNewAgentId.js\":\n/*!*****************************************************!*\\\n  !*** ./src/worker/events/WorkerServerNewAgentId.js ***!\n  \\*****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerServerNewAgentId; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar WorkerServerNewAgentId = /*#__PURE__*/function () {\n  function WorkerServerNewAgentId(messageBus, mainCommunicator) {\n    _classCallCheck(this, WorkerServerNewAgentId);\n    this._messageBus = messageBus;\n    this._mainCommunicator = mainCommunicator;\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerNewAgentIdEvent, this._handle.bind(this));\n  }\n  return _createClass(WorkerServerNewAgentId, [{\n    key: \"_handle\",\n    value: function _handle(agentId) {\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.ServerNewAgentIdEvent, agentId);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerServerRestoredMuidEventHandler.js\":\n/*!*******************************************************************!*\\\n  !*** ./src/worker/events/WorkerServerRestoredMuidEventHandler.js ***!\n  \\*******************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerServerRestoredMuidEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n/**\n * This class is for handling server response with a restored muid\n */\nvar WorkerServerRestoredMuidEventHandler = /*#__PURE__*/function () {\n  function WorkerServerRestoredMuidEventHandler(messageBus, mainCommunicator) {\n    _classCallCheck(this, WorkerServerRestoredMuidEventHandler);\n    this._messageBus = messageBus;\n    this._mainCommunicator = mainCommunicator;\n\n    //getting the restored muid should be a one time event, once we get it, we remove the subscription for this event\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerRestoredMuidEvent, this._handler.bind(this), true);\n  }\n\n  /**\n   * when the server sends the restored muid, it will publish a messageBus event. In the main js side\n   * on initialization it registers this event to react upon and update what is needed on the client side\n   * @param restoredMuid - The restored muid\n   */\n  return _createClass(WorkerServerRestoredMuidEventHandler, [{\n    key: \"_handler\",\n    value: function _handler(restoredMuid) {\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.ServerRestoredMuidEvent, restoredMuid);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerServerStateUpdatedEventHandler.js\":\n/*!*******************************************************************!*\\\n  !*** ./src/worker/events/WorkerServerStateUpdatedEventHandler.js ***!\n  \\*******************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerServerStateUpdatedEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\n/* harmony import */ var _main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/events/WorkerEvent */ \"./src/main/events/WorkerEvent.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * This class is for handling a session state update (modified sts or std received from server or a requestId which was modified)\n */\n\n\nvar WorkerServerStateUpdatedEventHandler = /*#__PURE__*/function () {\n  function WorkerServerStateUpdatedEventHandler(messageBus, logger, mainCommunicator) {\n    _classCallCheck(this, WorkerServerStateUpdatedEventHandler);\n    this._messageBus = messageBus;\n    this._logger = logger;\n    this._mainCommunicator = mainCommunicator;\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.ServerStateUpdatedEvent, this._handle.bind(this));\n  }\n  return _createClass(WorkerServerStateUpdatedEventHandler, [{\n    key: \"_handle\",\n    value: function _handle(newServerState) {\n      this._logger.debug('Worker received an updated server state.');\n      this._mainCommunicator.sendAsync(_main_events_WorkerEvent__WEBPACK_IMPORTED_MODULE_1__.WorkerEvent.ServerStateUpdatedEvent, newServerState);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerStateUpdateFromStorage.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/events/WorkerStateUpdateFromStorage.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerStateUpdateFromStorage; }\n/* harmony export */ });\n/* harmony import */ var _main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/WorkerCommand */ \"./src/main/events/WorkerCommand.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar WorkerStateUpdateFromStorage = /*#__PURE__*/function () {\n  function WorkerStateUpdateFromStorage(mainCommunicator, wupServerSessionState, logServerClient) {\n    _classCallCheck(this, WorkerStateUpdateFromStorage);\n    this._mainCommunicator = mainCommunicator;\n    this._wupServerSessionState = wupServerSessionState;\n    this._logServerClient = logServerClient;\n    this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.stateUpdateFromStorage, this._handle.bind(this));\n    this._mainCommunicator.addMessageListener(_main_events_WorkerCommand__WEBPACK_IMPORTED_MODULE_0__.WorkerCommand.updateSDKStateCommand, this._handleStateChanged.bind(this));\n  }\n  return _createClass(WorkerStateUpdateFromStorage, [{\n    key: \"_handle\",\n    value: function _handle(msg) {\n      if (msg !== null && msg !== void 0 && msg.requestId && (msg !== null && msg !== void 0 && msg.ott || msg !== null && msg !== void 0 && msg.sts)) {\n        this._wupServerSessionState.setRequestId(msg.requestId, false);\n        this._wupServerSessionState.setOtt(msg.ott);\n        this._wupServerSessionState.setSts(msg.sts);\n        this._wupServerSessionState.setStd(msg.std);\n      }\n    }\n  }, {\n    key: \"_handleStateChanged\",\n    value: function _handleStateChanged(newState) {\n      this._logServerClient.setIsPaused(newState.SDK_state);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/events/WorkerWupDispatchRateUpdatedEventHandler.js\":\n/*!***********************************************************************!*\\\n  !*** ./src/worker/events/WorkerWupDispatchRateUpdatedEventHandler.js ***!\n  \\***********************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerWupDispatchRateUpdatedEventHandler; }\n/* harmony export */ });\n/* harmony import */ var _main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/events/MessageBusEventType */ \"./src/main/events/MessageBusEventType.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * This class is for handling an update to the wup dispatch rate in worker\n */\n\nvar WorkerWupDispatchRateUpdatedEventHandler = /*#__PURE__*/function () {\n  function WorkerWupDispatchRateUpdatedEventHandler(messageBus, dataDispatcher, logger) {\n    _classCallCheck(this, WorkerWupDispatchRateUpdatedEventHandler);\n    this._messageBus = messageBus;\n    this._dataDispatcher = dataDispatcher;\n    this._logger = logger;\n    this._messageBus.subscribe(_main_events_MessageBusEventType__WEBPACK_IMPORTED_MODULE_0__.MessageBusEventType.WupDispatchRateUpdatedEvent, this._handle.bind(this));\n  }\n  return _createClass(WorkerWupDispatchRateUpdatedEventHandler, [{\n    key: \"_handle\",\n    value: function _handle(newWupDispatchRate) {\n      this._logger.info(\"Worker received a wup dispatch rate \".concat(newWupDispatchRate, \" from server.\"));\n      this._dataDispatcher.scheduleNextDispatching();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/fonts/FontsScannerWorker.js\":\n/*!************************************************!*\\\n  !*** ./src/worker/fonts/FontsScannerWorker.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ FontsScannerWorker; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _detector_FontDetectorProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./detector/FontDetectorProvider */ \"./src/worker/fonts/detector/FontDetectorProvider.js\");\n/* harmony import */ var _main_services_BatchProcessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../main/services/BatchProcessor */ \"./src/main/services/BatchProcessor.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n/**\n * FontsScannerWorker - After [FontsScanner] sends the request to the worker,\n * this service processes the request.\n * This service processes font detection requests from the main thread\n *\n * @param {Object} options - Configuration options\n * @param {FontDetectorProvider} options.detectorProvider - Required provider for font detection\n * @param {Object} options.logger - Optional logger instance (defaults to global Log)\n * @param {Function} options.batchProcessorFactory - Optional factory for BatchProcessor (defaults to BatchProcessor class)\n */\nvar FontsScannerWorker = /*#__PURE__*/function () {\n  function FontsScannerWorker() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, FontsScannerWorker);\n    this._detectorProvider = options.detectorProvider;\n    if (!this._detectorProvider) {\n      throw new Error('DetectorProvider is required for font scanning');\n    }\n    this._logger = options.logger || _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n    this._batchProcessorFactory = options.batchProcessorFactory || _main_services_BatchProcessor__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n  }\n\n  /**\n   * Scans a list of font names to determine which ones are available\n   * @param {string[]} fontNames - Array of font names to scan\n   * @param {Object} options - Configuration options\n   * @param {number} options.fontsPerBatch - Number of fonts to process per batch\n   * @param {number} options.delayBetweenBatchesMs - Delay between batches in milliseconds\n   * @param {number} options.minFontsPerBatch - Minimum fonts per batch for adaptive processing\n   * @param {number} options.maxFontsPerBatch - Maximum fonts per batch for adaptive processing\n   * @param {number} options.frameBudgetMs - Time budget per frame in milliseconds\n   * @param {number} options.frameHistorySize - Number of frames to track for adaptive processing\n   * @param {boolean} options.adaptiveBatchEnabled - Whether to enable adaptive batch processing\n   * @param {string} options.detectorType - Specific detector type to use ('native' or 'canvas')\n   * @returns {Promise<string[]>} Array of detected font names\n   */\n  return _createClass(FontsScannerWorker, [{\n    key: \"scanFonts\",\n    value: (function () {\n      var _scanFonts = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(fontNames) {\n        var options,\n          processor,\n          detector,\n          _args2 = arguments;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              options = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n              if (!(options.fontsPerBatch == null || options.fontsPerBatch <= 0)) {\n                _context2.next = 3;\n                break;\n              }\n              throw new Error(\"The 'fontsPerBatch' parameter is required and must be greater than 0.\");\n            case 3:\n              if (!(options.delayBetweenBatchesMs == null || options.delayBetweenBatchesMs < 0)) {\n                _context2.next = 5;\n                break;\n              }\n              throw new Error(\"The 'delayBetweenBatchesMs' parameter is required and must be greater than or equal to 0.\");\n            case 5:\n              if (!(options.minFontsPerBatch == null || options.minFontsPerBatch <= 0)) {\n                _context2.next = 7;\n                break;\n              }\n              throw new Error(\"The 'minFontsPerBatch' parameter is required and must be greater than 0.\");\n            case 7:\n              if (!(options.maxFontsPerBatch == null || options.maxFontsPerBatch <= 0)) {\n                _context2.next = 9;\n                break;\n              }\n              throw new Error(\"The 'maxFontsPerBatch' parameter is required and must be greater than 0.\");\n            case 9:\n              if (!(options.frameBudgetMs == null || options.frameBudgetMs <= 0)) {\n                _context2.next = 11;\n                break;\n              }\n              throw new Error(\"The 'frameBudgetMs' parameter is required and must be greater than 0.\");\n            case 11:\n              if (!(options.frameHistorySize == null || options.frameHistorySize <= 0)) {\n                _context2.next = 13;\n                break;\n              }\n              throw new Error(\"The 'frameHistorySize' parameter is required and must be greater than 0.\");\n            case 13:\n              if (!(!Array.isArray(fontNames) || fontNames.length === 0)) {\n                _context2.next = 15;\n                break;\n              }\n              return _context2.abrupt(\"return\", []);\n            case 15:\n              this._logger.debug(\"[FontsScannerWorker] Detecting \".concat(fontNames.length, \" fonts with config: fontsPerBatch=\").concat(options.fontsPerBatch, \", delayBetweenBatchesMs=\").concat(options.delayBetweenBatchesMs));\n              processor = new this._batchProcessorFactory({\n                batchSize: options.fontsPerBatch,\n                timeoutGap: options.delayBetweenBatchesMs,\n                minBatchSize: options.minFontsPerBatch,\n                maxBatchSize: options.maxFontsPerBatch,\n                frameBudgetMs: options.frameBudgetMs,\n                historySize: options.frameHistorySize,\n                adaptiveEnabled: options.adaptiveBatchEnabled\n              }); // Use specific detector type if provided, otherwise use best available detector\n              detector = options.detectorType ? this._detectorProvider.getDetectorByType(options.detectorType) : this._detectorProvider.getBestDetector();\n              return _context2.abrupt(\"return\", processor.process({\n                items: fontNames,\n                processItem: function () {\n                  var _processItem = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName) {\n                    var isDetected;\n                    return _regeneratorRuntime().wrap(function _callee$(_context) {\n                      while (1) switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return detector.detect(fontName);\n                        case 2:\n                          isDetected = _context.sent;\n                          return _context.abrupt(\"return\", isDetected);\n                        case 4:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }, _callee);\n                  }));\n                  function processItem(_x2) {\n                    return _processItem.apply(this, arguments);\n                  }\n                  return processItem;\n                }()\n              }));\n            case 19:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function scanFonts(_x) {\n        return _scanFonts.apply(this, arguments);\n      }\n      return scanFonts;\n    }())\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/fonts/detector/CanvasFontDetector.js\":\n/*!*********************************************************!*\\\n  !*** ./src/worker/fonts/detector/CanvasFontDetector.js ***!\n  \\*********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ CanvasFontDetector; }\n/* harmony export */ });\n/* harmony import */ var _FontDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FontDetector */ \"./src/worker/fonts/detector/FontDetector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n\n\n/**\n * CanvasFontDetector\n * Detects font availability using the canvas text measurement technique.\n * \n * IMPORTANT: This class is designed to run ONLY in Web Workers.\n * It uses OffscreenCanvas which is the only canvas API available in Web Workers.\n * Do not use this class in the main thread as it will not work properly.\n *\n * BROWSER COMPATIBILITY NOTE:\n * OffscreenCanvas support in Web Workers:\n * - Chrome 69+: Full support\n * - Firefox 105+: Limited support\n * - Safari 17.0+: Initial support (limited)\n * - Safari 17.4+: Stable support\n * - Edge 79+: Full support\n *\n * This detector requires OffscreenCanvas support to function properly.\n */\nvar CanvasFontDetector = /*#__PURE__*/function (_FontDetector) {\n  function CanvasFontDetector() {\n    var _this;\n    _classCallCheck(this, CanvasFontDetector);\n    _this = _callSuper(this, CanvasFontDetector);\n    _this._testText = \"AaBb123!@#            \"; // Sample text for measurement\n    _this._fontSize = \"48px\"; // Font size for measurements\n    _this._canvas = null; // Reusable canvas element\n    _this._context = null; // Cached 2D context\n    _this._fallbackWidth = null; // Cached fallback width for performance\n    _this._initialized = false; // Track initialization state\n    _this._hasReleased = false; // Track release state\n    return _this;\n  }\n\n  /**\n   * Detects the availability of a specified font.\n   * Compares the width of the font's rendering against a fallback font.\n   * \n   * @param {string} fontName - The name of the font to check.\n   * @returns {Promise<boolean>} Resolves to `true` if the font is available, `false` otherwise.\n   */\n  _inherits(CanvasFontDetector, _FontDetector);\n  return _createClass(CanvasFontDetector, [{\n    key: \"detect\",\n    value: (function () {\n      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName) {\n        var testWidth;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!this._hasReleased) {\n                _context.next = 2;\n                break;\n              }\n              throw new Error('CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.');\n            case 2:\n              if (this._initialized) {\n                _context.next = 5;\n                break;\n              }\n              _context.next = 5;\n              return this._initialize();\n            case 5:\n              // Measure the width of the test font with the given fontFamily as fallback\n              this._context.font = \"\".concat(this._fontSize, \" \\\"\").concat(fontName, \"\\\", non-existed-fallback\");\n              testWidth = this._context.measureText(this._testText).width; // Compare the test width against the cached fallback width\n              return _context.abrupt(\"return\", testWidth !== this._fallbackWidth);\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function detect(_x) {\n        return _detect.apply(this, arguments);\n      }\n      return detect;\n    }()\n    /**\n     * Releases resources by cleaning up cached data and canvas elements.\n     */\n    )\n  }, {\n    key: \"release\",\n    value: (function () {\n      var _release = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              this._hasReleased = true;\n              this._canvas = null;\n              this._context = null;\n              this._fallbackWidth = null;\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function release() {\n        return _release.apply(this, arguments);\n      }\n      return release;\n    }()\n    /**\n     * Checks if the canvas-based font detection system is supported by the browser.\n     * Only checks for OffscreenCanvas support since this class runs in Web Workers.\n     *\n     * @returns {boolean} True if OffscreenCanvas is supported, false otherwise.\n     */\n    )\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      try {\n        // Check for OffscreenCanvas support (required for Web Workers)\n        if (typeof OffscreenCanvas !== 'undefined') {\n          var offscreenCanvas = new OffscreenCanvas(1, 1);\n          return Boolean(offscreenCanvas.getContext && offscreenCanvas.getContext('2d'));\n        }\n        return false;\n      } catch (_unused) {\n        return false;\n      }\n    }\n\n    /**\n     * Ensures the canvas-based font detection system is initialized.\n     * Sets up the OffscreenCanvas for text measurements in Web Workers.\n     *\n     * @returns {Promise<void>} Resolves when initialization is complete.\n     * @throws {Error} If OffscreenCanvas is not supported in the current environment.\n     */\n  }, {\n    key: \"_initialize\",\n    value: (function () {\n      var _initialize2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(typeof OffscreenCanvas === 'undefined')) {\n                _context3.next = 2;\n                break;\n              }\n              throw new Error('OffscreenCanvas is not supported in this environment. CanvasFontDetector requires OffscreenCanvas to run in Web Workers.');\n            case 2:\n              this._canvas = new OffscreenCanvas(100, 100);\n              this._context = this._canvas.getContext('2d', {\n                alpha: false,\n                desynchronized: true\n              });\n              this._context.textBaseline = 'alphabetic';\n              this._context.direction = 'ltr';\n              this._context.imageSmoothingEnabled = false;\n\n              // Cache the fallback width once during initialization\n              this._context.font = \"\".concat(this._fontSize, \" \\\"non-existed-font\\\", non-existed-fallback\");\n              this._fallbackWidth = this._context.measureText(this._testText).width;\n              this._initialized = true; // Mark as initialized\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function _initialize() {\n        return _initialize2.apply(this, arguments);\n      }\n      return _initialize;\n    }())\n  }]);\n}(_FontDetector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/worker/fonts/detector/FontDetector.js\":\n/*!***************************************************!*\\\n  !*** ./src/worker/fonts/detector/FontDetector.js ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ FontDetector; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * FontDetectorInterface\n * Defines the required methods for a font detector implementation.\n */\nvar FontDetector = /*#__PURE__*/function () {\n  function FontDetector() {\n    _classCallCheck(this, FontDetector);\n  }\n  return _createClass(FontDetector, [{\n    key: \"detect\",\n    value: (\n    /**\n     * Checks the availability of a group of fonts.\n     * @param {Array<string>} fontName - A font name to check.\n     * @returns {Promise<Array<string>>} A promise that resolves with the list of detected fonts.\n     * @throws {Error} Throws an error if the number of fonts exceeds the allowed limit.\n     */\n    // eslint-disable-next-line no-unused-vars\n    function () {\n      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName, fontFamily) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              throw new Error('Method \"checkFontList\" must be implemented.');\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function detect(_x, _x2) {\n        return _detect.apply(this, arguments);\n      }\n      return detect;\n    }()\n    /**\n     * Releases resources used by the font detection system, such as cleaning up DOM elements.\n     * @returns {void}\n     */\n    )\n  }, {\n    key: \"release\",\n    value: function release() {\n      throw new Error('Method \"release\" must be implemented.');\n    }\n\n    /**\n     * Checks if the font detection mechanism is supported by the environment.\n     * This function can be overridden by implementations to provide specific checks\n     * (e.g., availability of `document.fonts` or other APIs).\n     * @returns {boolean} True if supported, false otherwise.\n     */\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      throw new Error('Method \"isSupported\" must be implemented.');\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/fonts/detector/FontDetectorProvider.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/fonts/detector/FontDetectorProvider.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ FontDetectorProvider; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\n/* harmony import */ var _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NativeFontDetector */ \"./src/worker/fonts/detector/NativeFontDetector.js\");\n/* harmony import */ var _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CanvasFontDetector */ \"./src/worker/fonts/detector/CanvasFontDetector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nvar FontDetectorProvider = /*#__PURE__*/function () {\n  function FontDetectorProvider() {\n    _classCallCheck(this, FontDetectorProvider);\n    this._logsTag = \"[FONTS-COLLECTOR]\";\n  }\n\n  /**\n   * Creates a detector instance based on the specified type\n   * @param {string} detectorType - The type of detector to create ('native', 'canvas')\n   * @param {Object} config - Configuration repository to check constraints\n   * @returns {FontDetector} The detector instance\n   */\n  return _createClass(FontDetectorProvider, [{\n    key: \"getDetectorByType\",\n    value: function getDetectorByType(detectorType) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var type = detectorType.toLowerCase();\n      switch (type) {\n        case 'native':\n          return new _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        case 'canvas':\n          return new _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n        default:\n          throw new Error(\"Invalid detector type: '\".concat(detectorType, \"'. Supported types: 'native', 'canvas'\"));\n      }\n    }\n\n    /**\n     * Provides the best font detector based on the current environment\n     * @param {Object} config - Configuration repository\n     * @returns {FontDetector} An instance of the best available font detector\n     */\n  }, {\n    key: \"getBestDetector\",\n    value: function getBestDetector(config) {\n      // Try native detector first\n      try {\n        var nativeDetector = new _NativeFontDetector__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        if (nativeDetector.isSupported()) {\n          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(\"\".concat(this._logsTag, \" Using native detector\"));\n          return nativeDetector;\n        }\n      } catch (error) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(\"\".concat(this._logsTag, \" Native detector failed:\"), error);\n      }\n\n      // Try canvas detector (fallback)\n      try {\n        var canvasDetector = new _CanvasFontDetector__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n        if (canvasDetector.isSupported()) {\n          _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(\"\".concat(this._logsTag, \" Using canvas detector\"));\n          return canvasDetector;\n        }\n      } catch (error) {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(\"\".concat(this._logsTag, \" Canvas detector failed:\"), error);\n      }\n      throw new Error('[FontDetectorProvider] No suitable font detection implementation is supported in this environment.');\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/fonts/detector/NativeFontDetector.js\":\n/*!*********************************************************!*\\\n  !*** ./src/worker/fonts/detector/NativeFontDetector.js ***!\n  \\*********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ NativeFontDetector; }\n/* harmony export */ });\n/* harmony import */ var _FontDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FontDetector */ \"./src/worker/fonts/detector/FontDetector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n\n\n// Comments:\n// Safari has more local font access than Chrome.\n// Chrome intentionally blocks most system fonts from web pages.\n// FontDetector will not see fonts like Charter, PingFang, STIX, Phosphate in Chrome.\n//\n// BROWSER COMPATIBILITY NOTE:\n// FontFace API in Web Workers:\n// - Chrome: 57+ main thread, 70+ workers\n// - Firefox: 41+ main thread, 69+ workers (limited)\n// - Safari: 10+ main thread, 16.4+ workers\n// - Edge: 79+ main thread and workers\n// This detector runs in Web Worker context.\nvar NativeFontDetector = /*#__PURE__*/function (_FontDetector) {\n  function NativeFontDetector() {\n    var _self;\n    var _this;\n    var fonts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ((_self = self) === null || _self === void 0 ? void 0 : _self.fonts) || null;\n    _classCallCheck(this, NativeFontDetector);\n    _this = _callSuper(this, NativeFontDetector);\n    if (!fonts) throw new Error('fonts is required for NativeFontDetector.');\n    _this.fonts = fonts;\n    return _this;\n  }\n\n  /**\n   * Detect if a font family is available.\n   * @param {string} fontName - The name of the font family to check.\n   * @returns {Promise<boolean>} - Resolves to true if the font is available, false otherwise.\n   */\n  _inherits(NativeFontDetector, _FontDetector);\n  return _createClass(NativeFontDetector, [{\n    key: \"detect\",\n    value: (function () {\n      var _detect = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(fontName) {\n        var fontFace, isLoaded;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              // Logger.trace(`NativeFontDetector.detect: ${fontName}`);\n              fontFace = null;\n              _context.prev = 1;\n              // Create the FontFace\n              fontFace = new FontFace(fontName, \"local(\\\"\".concat(fontName, \"\\\")\"));\n\n              // Add to worker's FontFaceSet (self.fonts in workers)\n              this.fonts.add(fontFace);\n\n              // Try to load the font\n              _context.next = 6;\n              return fontFace.load();\n            case 6:\n              // Check if the font is loaded\n              isLoaded = fontFace.status === 'loaded';\n              return _context.abrupt(\"return\", isLoaded);\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", false);\n            case 13:\n              _context.prev = 13;\n              // Always delete the font after checking status, even on error\n              if (fontFace) {\n                this.fonts[\"delete\"](fontFace);\n              }\n              return _context.finish(13);\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[1, 10, 13, 16]]);\n      }));\n      function detect(_x) {\n        return _detect.apply(this, arguments);\n      }\n      return detect;\n    }()\n    /**\n     * Check if the fonts API is supported in the current context.\n     * @returns {boolean} - True if the API is supported, false otherwise.\n     */\n    )\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      try {\n        // Check for FontFace API support\n        if (typeof FontFace === 'undefined' || typeof this.fonts === 'undefined') {\n          return false;\n        }\n        // Try to create a FontFace instance to ensure it works\n        new FontFace('test', 'url(test.woff)');\n        return true;\n      } catch (error) {\n        return false;\n      }\n    }\n\n    /**\n     * Release resources used by the font detection system.\n     * @returns {void}\n     */\n  }, {\n    key: \"release\",\n    value: function release() {\n      // Ensure all fonts are deleted from fonts\n    }\n  }]);\n}(_FontDetector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/worker/libs/msgpack.min.js\":\n/*!****************************************!*\\\n  !*** ./src/worker/libs/msgpack.min.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n!function (t) {\n  if (\"object\" == ( false ? 0 : _typeof(exports)) && \"undefined\" != \"object\") module.exports = t();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (t),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else { var r; }\n}(function () {\n  return function t(r, e, n) {\n    function i(f, u) {\n      if (!e[f]) {\n        if (!r[f]) {\n          var a = undefined;\n          if (!u && a) return require(f, !0);\n          if (o) return o(f, !0);\n          var s = new Error(\"Cannot find module '\" + f + \"'\");\n          throw s.code = \"MODULE_NOT_FOUND\", s;\n        }\n        var c = e[f] = {\n          exports: {}\n        };\n        r[f][0].call(c.exports, function (t) {\n          var e = r[f][1][t];\n          return i(e ? e : t);\n        }, c, c.exports, t, r, e, n);\n      }\n      return e[f].exports;\n    }\n    for (var o = undefined, f = 0; f < n.length; f++) i(n[f]);\n    return i;\n  }({\n    1: [function (t, r, e) {\n      e.encode = t(\"./encode\").encode, e.decode = t(\"./decode\").decode, e.Encoder = t(\"./encoder\").Encoder, e.Decoder = t(\"./decoder\").Decoder, e.createCodec = t(\"./ext\").createCodec, e.codec = t(\"./codec\").codec;\n    }, {\n      \"./codec\": 10,\n      \"./decode\": 12,\n      \"./decoder\": 13,\n      \"./encode\": 15,\n      \"./encoder\": 16,\n      \"./ext\": 20\n    }],\n    2: [function (t, r, e) {\n      (function (Buffer) {\n        function t(t) {\n          return t && t.isBuffer && t;\n        }\n        r.exports = t(\"undefined\" != typeof Buffer && Buffer) || t(this.Buffer) || t(\"undefined\" != typeof window && window.Buffer) || this.Buffer;\n      }).call(this, t(\"buffer\").Buffer);\n    }, {\n      buffer: 29\n    }],\n    3: [function (t, r, e) {\n      function n(t, r) {\n        for (var e = this, n = r || (r |= 0), i = t.length, o = 0, f = 0; f < i;) o = t.charCodeAt(f++), o < 128 ? e[n++] = o : o < 2048 ? (e[n++] = 192 | o >>> 6, e[n++] = 128 | 63 & o) : o < 55296 || o > 57343 ? (e[n++] = 224 | o >>> 12, e[n++] = 128 | o >>> 6 & 63, e[n++] = 128 | 63 & o) : (o = (o - 55296 << 10 | t.charCodeAt(f++) - 56320) + 65536, e[n++] = 240 | o >>> 18, e[n++] = 128 | o >>> 12 & 63, e[n++] = 128 | o >>> 6 & 63, e[n++] = 128 | 63 & o);\n        return n - r;\n      }\n      function i(t, r, e) {\n        var n = this,\n          i = 0 | r;\n        e || (e = n.length);\n        for (var o = \"\", f = 0; i < e;) f = n[i++], f < 128 ? o += String.fromCharCode(f) : (192 === (224 & f) ? f = (31 & f) << 6 | 63 & n[i++] : 224 === (240 & f) ? f = (15 & f) << 12 | (63 & n[i++]) << 6 | 63 & n[i++] : 240 === (248 & f) && (f = (7 & f) << 18 | (63 & n[i++]) << 12 | (63 & n[i++]) << 6 | 63 & n[i++]), f >= 65536 ? (f -= 65536, o += String.fromCharCode((f >>> 10) + 55296, (1023 & f) + 56320)) : o += String.fromCharCode(f));\n        return o;\n      }\n      function o(t, r, e, n) {\n        var i;\n        e || (e = 0), n || 0 === n || (n = this.length), r || (r = 0);\n        var o = n - e;\n        if (t === this && e < r && r < n) for (i = o - 1; i >= 0; i--) t[i + r] = this[i + e];else for (i = 0; i < o; i++) t[i + r] = this[i + e];\n        return o;\n      }\n      e.copy = o, e.toString = i, e.write = n;\n    }, {}],\n    4: [function (t, r, e) {\n      function n(t) {\n        return new Array(t);\n      }\n      function i(t) {\n        if (!o.isBuffer(t) && o.isView(t)) t = o.Uint8Array.from(t);else if (o.isArrayBuffer(t)) t = new Uint8Array(t);else {\n          if (\"string\" == typeof t) return o.from.call(e, t);\n          if (\"number\" == typeof t) throw new TypeError('\"value\" argument must not be a number');\n        }\n        return Array.prototype.slice.call(t);\n      }\n      var o = t(\"./bufferish\"),\n        e = r.exports = n(0);\n      e.alloc = n, e.concat = o.concat, e.from = i;\n    }, {\n      \"./bufferish\": 8\n    }],\n    5: [function (t, r, e) {\n      function n(t) {\n        return new Buffer(t);\n      }\n      function i(t) {\n        if (!o.isBuffer(t) && o.isView(t)) t = o.Uint8Array.from(t);else if (o.isArrayBuffer(t)) t = new Uint8Array(t);else {\n          if (\"string\" == typeof t) return o.from.call(e, t);\n          if (\"number\" == typeof t) throw new TypeError('\"value\" argument must not be a number');\n        }\n        return Buffer.from && 1 !== Buffer.from.length ? Buffer.from(t) : new Buffer(t);\n      }\n      var o = t(\"./bufferish\"),\n        Buffer = o.global,\n        e = r.exports = o.hasBuffer ? n(0) : [];\n      e.alloc = o.hasBuffer && Buffer.alloc || n, e.concat = o.concat, e.from = i;\n    }, {\n      \"./bufferish\": 8\n    }],\n    6: [function (t, r, e) {\n      function n(t, r, e, n) {\n        var o = a.isBuffer(this),\n          f = a.isBuffer(t);\n        if (o && f) return this.copy(t, r, e, n);\n        if (c || o || f || !a.isView(this) || !a.isView(t)) return u.copy.call(this, t, r, e, n);\n        var s = e || null != n ? i.call(this, e, n) : this;\n        return t.set(s, r), s.length;\n      }\n      function i(t, r) {\n        var e = this.slice || !c && this.subarray;\n        if (e) return e.call(this, t, r);\n        var i = a.alloc.call(this, r - t);\n        return n.call(this, i, 0, t, r), i;\n      }\n      function o(t, r, e) {\n        var n = !s && a.isBuffer(this) ? this.toString : u.toString;\n        return n.apply(this, arguments);\n      }\n      function f(t) {\n        function r() {\n          var r = this[t] || u[t];\n          return r.apply(this, arguments);\n        }\n        return r;\n      }\n      var u = t(\"./buffer-lite\");\n      e.copy = n, e.slice = i, e.toString = o, e.write = f(\"write\");\n      var a = t(\"./bufferish\"),\n        Buffer = a.global,\n        s = a.hasBuffer && \"TYPED_ARRAY_SUPPORT\" in Buffer,\n        c = s && !Buffer.TYPED_ARRAY_SUPPORT;\n    }, {\n      \"./buffer-lite\": 3,\n      \"./bufferish\": 8\n    }],\n    7: [function (t, r, e) {\n      function n(t) {\n        return new Uint8Array(t);\n      }\n      function i(t) {\n        if (o.isView(t)) {\n          var r = t.byteOffset,\n            n = t.byteLength;\n          t = t.buffer, t.byteLength !== n && (t.slice ? t = t.slice(r, r + n) : (t = new Uint8Array(t), t.byteLength !== n && (t = Array.prototype.slice.call(t, r, r + n))));\n        } else {\n          if (\"string\" == typeof t) return o.from.call(e, t);\n          if (\"number\" == typeof t) throw new TypeError('\"value\" argument must not be a number');\n        }\n        return new Uint8Array(t);\n      }\n      var o = t(\"./bufferish\"),\n        e = r.exports = o.hasArrayBuffer ? n(0) : [];\n      e.alloc = n, e.concat = o.concat, e.from = i;\n    }, {\n      \"./bufferish\": 8\n    }],\n    8: [function (t, r, e) {\n      function n(t) {\n        return \"string\" == typeof t ? u.call(this, t) : a(this).from(t);\n      }\n      function i(t) {\n        return a(this).alloc(t);\n      }\n      function o(t, r) {\n        function n(t) {\n          r += t.length;\n        }\n        function o(t) {\n          a += w.copy.call(t, u, a);\n        }\n        r || (r = 0, Array.prototype.forEach.call(t, n));\n        var f = this !== e && this || t[0],\n          u = i.call(f, r),\n          a = 0;\n        return Array.prototype.forEach.call(t, o), u;\n      }\n      function f(t) {\n        return t instanceof ArrayBuffer || E(t);\n      }\n      function u(t) {\n        var r = 3 * t.length,\n          e = i.call(this, r),\n          n = w.write.call(e, t);\n        return r !== n && (e = w.slice.call(e, 0, n)), e;\n      }\n      function a(t) {\n        return d(t) ? g : y(t) ? b : p(t) ? v : h ? g : l ? b : v;\n      }\n      function s() {\n        return !1;\n      }\n      function c(t, r) {\n        return t = \"[object \" + t + \"]\", function (e) {\n          return null != e && {}.toString.call(r ? e[r] : e) === t;\n        };\n      }\n      var Buffer = e.global = t(\"./buffer-global\"),\n        h = e.hasBuffer = Buffer && !!Buffer.isBuffer,\n        l = e.hasArrayBuffer = \"undefined\" != typeof ArrayBuffer,\n        p = e.isArray = t(\"isarray\");\n      e.isArrayBuffer = l ? f : s;\n      var d = e.isBuffer = h ? Buffer.isBuffer : s,\n        y = e.isView = l ? ArrayBuffer.isView || c(\"ArrayBuffer\", \"buffer\") : s;\n      e.alloc = i, e.concat = o, e.from = n;\n      var v = e.Array = t(\"./bufferish-array\"),\n        g = e.Buffer = t(\"./bufferish-buffer\"),\n        b = e.Uint8Array = t(\"./bufferish-uint8array\"),\n        w = e.prototype = t(\"./bufferish-proto\"),\n        E = c(\"ArrayBuffer\");\n    }, {\n      \"./buffer-global\": 2,\n      \"./bufferish-array\": 4,\n      \"./bufferish-buffer\": 5,\n      \"./bufferish-proto\": 6,\n      \"./bufferish-uint8array\": 7,\n      isarray: 34\n    }],\n    9: [function (t, r, e) {\n      function n(t) {\n        return this instanceof n ? (this.options = t, void this.init()) : new n(t);\n      }\n      function i(t) {\n        for (var r in t) n.prototype[r] = o(n.prototype[r], t[r]);\n      }\n      function o(t, r) {\n        function e() {\n          return t.apply(this, arguments), r.apply(this, arguments);\n        }\n        return t && r ? e : t || r;\n      }\n      function f(t) {\n        function r(t, r) {\n          return r(t);\n        }\n        return t = t.slice(), function (e) {\n          return t.reduce(r, e);\n        };\n      }\n      function u(t) {\n        return s(t) ? f(t) : t;\n      }\n      function a(t) {\n        return new n(t);\n      }\n      var s = t(\"isarray\");\n      e.createCodec = a, e.install = i, e.filter = u;\n      var c = t(\"./bufferish\");\n      n.prototype.init = function () {\n        var t = this.options;\n        return t && t.uint8array && (this.bufferish = c.Uint8Array), this;\n      }, e.preset = a({\n        preset: !0\n      });\n    }, {\n      \"./bufferish\": 8,\n      isarray: 34\n    }],\n    10: [function (t, r, e) {\n      t(\"./read-core\"), t(\"./write-core\"), e.codec = {\n        preset: t(\"./codec-base\").preset\n      };\n    }, {\n      \"./codec-base\": 9,\n      \"./read-core\": 22,\n      \"./write-core\": 25\n    }],\n    11: [function (t, r, e) {\n      function n(t) {\n        if (!(this instanceof n)) return new n(t);\n        if (t && (this.options = t, t.codec)) {\n          var r = this.codec = t.codec;\n          r.bufferish && (this.bufferish = r.bufferish);\n        }\n      }\n      e.DecodeBuffer = n;\n      var i = t(\"./read-core\").preset,\n        o = t(\"./flex-buffer\").FlexDecoder;\n      o.mixin(n.prototype), n.prototype.codec = i, n.prototype.fetch = function () {\n        return this.codec.decode(this);\n      };\n    }, {\n      \"./flex-buffer\": 21,\n      \"./read-core\": 22\n    }],\n    12: [function (t, r, e) {\n      function n(t, r) {\n        var e = new i(r);\n        return e.write(t), e.read();\n      }\n      e.decode = n;\n      var i = t(\"./decode-buffer\").DecodeBuffer;\n    }, {\n      \"./decode-buffer\": 11\n    }],\n    13: [function (t, r, e) {\n      function n(t) {\n        return this instanceof n ? void o.call(this, t) : new n(t);\n      }\n      e.Decoder = n;\n      var i = t(\"event-lite\"),\n        o = t(\"./decode-buffer\").DecodeBuffer;\n      n.prototype = new o(), i.mixin(n.prototype), n.prototype.decode = function (t) {\n        arguments.length && this.write(t), this.flush();\n      }, n.prototype.push = function (t) {\n        this.emit(\"data\", t);\n      }, n.prototype.end = function (t) {\n        this.decode(t), this.emit(\"end\");\n      };\n    }, {\n      \"./decode-buffer\": 11,\n      \"event-lite\": 31\n    }],\n    14: [function (t, r, e) {\n      function n(t) {\n        if (!(this instanceof n)) return new n(t);\n        if (t && (this.options = t, t.codec)) {\n          var r = this.codec = t.codec;\n          r.bufferish && (this.bufferish = r.bufferish);\n        }\n      }\n      e.EncodeBuffer = n;\n      var i = t(\"./write-core\").preset,\n        o = t(\"./flex-buffer\").FlexEncoder;\n      o.mixin(n.prototype), n.prototype.codec = i, n.prototype.write = function (t) {\n        this.codec.encode(this, t);\n      };\n    }, {\n      \"./flex-buffer\": 21,\n      \"./write-core\": 25\n    }],\n    15: [function (t, r, e) {\n      function n(t, r) {\n        var e = new i(r);\n        return e.write(t), e.read();\n      }\n      e.encode = n;\n      var i = t(\"./encode-buffer\").EncodeBuffer;\n    }, {\n      \"./encode-buffer\": 14\n    }],\n    16: [function (t, r, e) {\n      function n(t) {\n        return this instanceof n ? void o.call(this, t) : new n(t);\n      }\n      e.Encoder = n;\n      var i = t(\"event-lite\"),\n        o = t(\"./encode-buffer\").EncodeBuffer;\n      n.prototype = new o(), i.mixin(n.prototype), n.prototype.encode = function (t) {\n        this.write(t), this.emit(\"data\", this.read());\n      }, n.prototype.end = function (t) {\n        arguments.length && this.encode(t), this.flush(), this.emit(\"end\");\n      };\n    }, {\n      \"./encode-buffer\": 14,\n      \"event-lite\": 31\n    }],\n    17: [function (t, r, e) {\n      function n(t, r) {\n        return this instanceof n ? (this.buffer = i.from(t), void (this.type = r)) : new n(t, r);\n      }\n      e.ExtBuffer = n;\n      var i = t(\"./bufferish\");\n    }, {\n      \"./bufferish\": 8\n    }],\n    18: [function (t, r, e) {\n      function n(t) {\n        t.addExtPacker(14, Error, [u, i]), t.addExtPacker(1, EvalError, [u, i]), t.addExtPacker(2, RangeError, [u, i]), t.addExtPacker(3, ReferenceError, [u, i]), t.addExtPacker(4, SyntaxError, [u, i]), t.addExtPacker(5, TypeError, [u, i]), t.addExtPacker(6, URIError, [u, i]), t.addExtPacker(10, RegExp, [f, i]), t.addExtPacker(11, Boolean, [o, i]), t.addExtPacker(12, String, [o, i]), t.addExtPacker(13, Date, [Number, i]), t.addExtPacker(15, Number, [o, i]), \"undefined\" != typeof Uint8Array && (t.addExtPacker(17, Int8Array, c), t.addExtPacker(18, Uint8Array, c), t.addExtPacker(19, Int16Array, c), t.addExtPacker(20, Uint16Array, c), t.addExtPacker(21, Int32Array, c), t.addExtPacker(22, Uint32Array, c), t.addExtPacker(23, Float32Array, c), \"undefined\" != typeof Float64Array && t.addExtPacker(24, Float64Array, c), \"undefined\" != typeof Uint8ClampedArray && t.addExtPacker(25, Uint8ClampedArray, c), t.addExtPacker(26, ArrayBuffer, c), t.addExtPacker(29, DataView, c)), s.hasBuffer && t.addExtPacker(27, Buffer, s.from);\n      }\n      function i(r) {\n        return a || (a = t(\"./encode\").encode), a(r);\n      }\n      function o(t) {\n        return t.valueOf();\n      }\n      function f(t) {\n        t = RegExp.prototype.toString.call(t).split(\"/\"), t.shift();\n        var r = [t.pop()];\n        return r.unshift(t.join(\"/\")), r;\n      }\n      function u(t) {\n        var r = {};\n        for (var e in h) r[e] = t[e];\n        return r;\n      }\n      e.setExtPackers = n;\n      var a,\n        s = t(\"./bufferish\"),\n        Buffer = s.global,\n        c = s.Uint8Array.from,\n        h = {\n          name: 1,\n          message: 1,\n          stack: 1,\n          columnNumber: 1,\n          fileName: 1,\n          lineNumber: 1\n        };\n    }, {\n      \"./bufferish\": 8,\n      \"./encode\": 15\n    }],\n    19: [function (t, r, e) {\n      function n(t) {\n        t.addExtUnpacker(14, [i, f(Error)]), t.addExtUnpacker(1, [i, f(EvalError)]), t.addExtUnpacker(2, [i, f(RangeError)]), t.addExtUnpacker(3, [i, f(ReferenceError)]), t.addExtUnpacker(4, [i, f(SyntaxError)]), t.addExtUnpacker(5, [i, f(TypeError)]), t.addExtUnpacker(6, [i, f(URIError)]), t.addExtUnpacker(10, [i, o]), t.addExtUnpacker(11, [i, u(Boolean)]), t.addExtUnpacker(12, [i, u(String)]), t.addExtUnpacker(13, [i, u(Date)]), t.addExtUnpacker(15, [i, u(Number)]), \"undefined\" != typeof Uint8Array && (t.addExtUnpacker(17, u(Int8Array)), t.addExtUnpacker(18, u(Uint8Array)), t.addExtUnpacker(19, [a, u(Int16Array)]), t.addExtUnpacker(20, [a, u(Uint16Array)]), t.addExtUnpacker(21, [a, u(Int32Array)]), t.addExtUnpacker(22, [a, u(Uint32Array)]), t.addExtUnpacker(23, [a, u(Float32Array)]), \"undefined\" != typeof Float64Array && t.addExtUnpacker(24, [a, u(Float64Array)]), \"undefined\" != typeof Uint8ClampedArray && t.addExtUnpacker(25, u(Uint8ClampedArray)), t.addExtUnpacker(26, a), t.addExtUnpacker(29, [a, u(DataView)])), c.hasBuffer && t.addExtUnpacker(27, u(Buffer));\n      }\n      function i(r) {\n        return s || (s = t(\"./decode\").decode), s(r);\n      }\n      function o(t) {\n        return RegExp.apply(null, t);\n      }\n      function f(t) {\n        return function (r) {\n          var e = new t();\n          for (var n in h) e[n] = r[n];\n          return e;\n        };\n      }\n      function u(t) {\n        return function (r) {\n          return new t(r);\n        };\n      }\n      function a(t) {\n        return new Uint8Array(t).buffer;\n      }\n      e.setExtUnpackers = n;\n      var s,\n        c = t(\"./bufferish\"),\n        Buffer = c.global,\n        h = {\n          name: 1,\n          message: 1,\n          stack: 1,\n          columnNumber: 1,\n          fileName: 1,\n          lineNumber: 1\n        };\n    }, {\n      \"./bufferish\": 8,\n      \"./decode\": 12\n    }],\n    20: [function (t, r, e) {\n      t(\"./read-core\"), t(\"./write-core\"), e.createCodec = t(\"./codec-base\").createCodec;\n    }, {\n      \"./codec-base\": 9,\n      \"./read-core\": 22,\n      \"./write-core\": 25\n    }],\n    21: [function (t, r, e) {\n      function n() {\n        if (!(this instanceof n)) return new n();\n      }\n      function i() {\n        if (!(this instanceof i)) return new i();\n      }\n      function o() {\n        function t(t) {\n          var r = this.offset ? p.prototype.slice.call(this.buffer, this.offset) : this.buffer;\n          this.buffer = r ? t ? this.bufferish.concat([r, t]) : r : t, this.offset = 0;\n        }\n        function r() {\n          for (; this.offset < this.buffer.length;) {\n            var t,\n              r = this.offset;\n            try {\n              t = this.fetch();\n            } catch (t) {\n              if (t && t.message != v) throw t;\n              this.offset = r;\n              break;\n            }\n            this.push(t);\n          }\n        }\n        function e(t) {\n          var r = this.offset,\n            e = r + t;\n          if (e > this.buffer.length) throw new Error(v);\n          return this.offset = e, r;\n        }\n        return {\n          bufferish: p,\n          write: t,\n          fetch: a,\n          flush: r,\n          push: c,\n          pull: h,\n          read: s,\n          reserve: e,\n          offset: 0\n        };\n      }\n      function f() {\n        function t() {\n          var t = this.start;\n          if (t < this.offset) {\n            var r = this.start = this.offset;\n            return p.prototype.slice.call(this.buffer, t, r);\n          }\n        }\n        function r() {\n          for (; this.start < this.offset;) {\n            var t = this.fetch();\n            t && this.push(t);\n          }\n        }\n        function e() {\n          var t = this.buffers || (this.buffers = []),\n            r = t.length > 1 ? this.bufferish.concat(t) : t[0];\n          return t.length = 0, r;\n        }\n        function n(t) {\n          var r = 0 | t;\n          if (this.buffer) {\n            var e = this.buffer.length,\n              n = 0 | this.offset,\n              i = n + r;\n            if (i < e) return this.offset = i, n;\n            this.flush(), t = Math.max(t, Math.min(2 * e, this.maxBufferSize));\n          }\n          return t = Math.max(t, this.minBufferSize), this.buffer = this.bufferish.alloc(t), this.start = 0, this.offset = r, 0;\n        }\n        function i(t) {\n          var r = t.length;\n          if (r > this.minBufferSize) this.flush(), this.push(t);else {\n            var e = this.reserve(r);\n            p.prototype.copy.call(t, this.buffer, e);\n          }\n        }\n        return {\n          bufferish: p,\n          write: u,\n          fetch: t,\n          flush: r,\n          push: c,\n          pull: e,\n          read: s,\n          reserve: n,\n          send: i,\n          maxBufferSize: y,\n          minBufferSize: d,\n          offset: 0,\n          start: 0\n        };\n      }\n      function u() {\n        throw new Error(\"method not implemented: write()\");\n      }\n      function a() {\n        throw new Error(\"method not implemented: fetch()\");\n      }\n      function s() {\n        var t = this.buffers && this.buffers.length;\n        return t ? (this.flush(), this.pull()) : this.fetch();\n      }\n      function c(t) {\n        var r = this.buffers || (this.buffers = []);\n        r.push(t);\n      }\n      function h() {\n        var t = this.buffers || (this.buffers = []);\n        return t.shift();\n      }\n      function l(t) {\n        function r(r) {\n          for (var e in t) r[e] = t[e];\n          return r;\n        }\n        return r;\n      }\n      e.FlexDecoder = n, e.FlexEncoder = i;\n      var p = t(\"./bufferish\"),\n        d = 2048,\n        y = 65536,\n        v = \"BUFFER_SHORTAGE\";\n      n.mixin = l(o()), n.mixin(n.prototype), i.mixin = l(f()), i.mixin(i.prototype);\n    }, {\n      \"./bufferish\": 8\n    }],\n    22: [function (t, r, e) {\n      function n(t) {\n        function r(t) {\n          var r = s(t),\n            n = e[r];\n          if (!n) throw new Error(\"Invalid type: \" + (r ? \"0x\" + r.toString(16) : r));\n          return n(t);\n        }\n        var e = c.getReadToken(t);\n        return r;\n      }\n      function i() {\n        var t = this.options;\n        return this.decode = n(t), t && t.preset && a.setExtUnpackers(this), this;\n      }\n      function o(t, r) {\n        var e = this.extUnpackers || (this.extUnpackers = []);\n        e[t] = h.filter(r);\n      }\n      function f(t) {\n        function r(r) {\n          return new u(r, t);\n        }\n        var e = this.extUnpackers || (this.extUnpackers = []);\n        return e[t] || r;\n      }\n      var u = t(\"./ext-buffer\").ExtBuffer,\n        a = t(\"./ext-unpacker\"),\n        s = t(\"./read-format\").readUint8,\n        c = t(\"./read-token\"),\n        h = t(\"./codec-base\");\n      h.install({\n        addExtUnpacker: o,\n        getExtUnpacker: f,\n        init: i\n      }), e.preset = i.call(h.preset);\n    }, {\n      \"./codec-base\": 9,\n      \"./ext-buffer\": 17,\n      \"./ext-unpacker\": 19,\n      \"./read-format\": 23,\n      \"./read-token\": 24\n    }],\n    23: [function (t, r, e) {\n      function n(t) {\n        var r = k.hasArrayBuffer && t && t.binarraybuffer,\n          e = t && t.int64,\n          n = T && t && t.usemap,\n          B = {\n            map: n ? o : i,\n            array: f,\n            str: u,\n            bin: r ? s : a,\n            ext: c,\n            uint8: h,\n            uint16: p,\n            uint32: y,\n            uint64: g(8, e ? E : b),\n            int8: l,\n            int16: d,\n            int32: v,\n            int64: g(8, e ? A : w),\n            float32: g(4, m),\n            float64: g(8, x)\n          };\n        return B;\n      }\n      function i(t, r) {\n        var e,\n          n = {},\n          i = new Array(r),\n          o = new Array(r),\n          f = t.codec.decode;\n        for (e = 0; e < r; e++) i[e] = f(t), o[e] = f(t);\n        for (e = 0; e < r; e++) n[i[e]] = o[e];\n        return n;\n      }\n      function o(t, r) {\n        var e,\n          n = new Map(),\n          i = new Array(r),\n          o = new Array(r),\n          f = t.codec.decode;\n        for (e = 0; e < r; e++) i[e] = f(t), o[e] = f(t);\n        for (e = 0; e < r; e++) n.set(i[e], o[e]);\n        return n;\n      }\n      function f(t, r) {\n        for (var e = new Array(r), n = t.codec.decode, i = 0; i < r; i++) e[i] = n(t);\n        return e;\n      }\n      function u(t, r) {\n        var e = t.reserve(r),\n          n = e + r;\n        return _.toString.call(t.buffer, \"utf-8\", e, n);\n      }\n      function a(t, r) {\n        var e = t.reserve(r),\n          n = e + r,\n          i = _.slice.call(t.buffer, e, n);\n        return k.from(i);\n      }\n      function s(t, r) {\n        var e = t.reserve(r),\n          n = e + r,\n          i = _.slice.call(t.buffer, e, n);\n        return k.Uint8Array.from(i).buffer;\n      }\n      function c(t, r) {\n        var e = t.reserve(r + 1),\n          n = t.buffer[e++],\n          i = e + r,\n          o = t.codec.getExtUnpacker(n);\n        if (!o) throw new Error(\"Invalid ext type: \" + (n ? \"0x\" + n.toString(16) : n));\n        var f = _.slice.call(t.buffer, e, i);\n        return o(f);\n      }\n      function h(t) {\n        var r = t.reserve(1);\n        return t.buffer[r];\n      }\n      function l(t) {\n        var r = t.reserve(1),\n          e = t.buffer[r];\n        return 128 & e ? e - 256 : e;\n      }\n      function p(t) {\n        var r = t.reserve(2),\n          e = t.buffer;\n        return e[r++] << 8 | e[r];\n      }\n      function d(t) {\n        var r = t.reserve(2),\n          e = t.buffer,\n          n = e[r++] << 8 | e[r];\n        return 32768 & n ? n - 65536 : n;\n      }\n      function y(t) {\n        var r = t.reserve(4),\n          e = t.buffer;\n        return 16777216 * e[r++] + (e[r++] << 16) + (e[r++] << 8) + e[r];\n      }\n      function v(t) {\n        var r = t.reserve(4),\n          e = t.buffer;\n        return e[r++] << 24 | e[r++] << 16 | e[r++] << 8 | e[r];\n      }\n      function g(t, r) {\n        return function (e) {\n          var n = e.reserve(t);\n          return r.call(e.buffer, n, S);\n        };\n      }\n      function b(t) {\n        return new P(this, t).toNumber();\n      }\n      function w(t) {\n        return new R(this, t).toNumber();\n      }\n      function E(t) {\n        return new P(this, t);\n      }\n      function A(t) {\n        return new R(this, t);\n      }\n      function m(t) {\n        return B.read(this, t, !1, 23, 4);\n      }\n      function x(t) {\n        return B.read(this, t, !1, 52, 8);\n      }\n      var B = t(\"ieee754\"),\n        U = t(\"int64-buffer\"),\n        P = U.Uint64BE,\n        R = U.Int64BE;\n      e.getReadFormat = n, e.readUint8 = h;\n      var k = t(\"./bufferish\"),\n        _ = t(\"./bufferish-proto\"),\n        T = \"undefined\" != typeof Map,\n        S = !0;\n    }, {\n      \"./bufferish\": 8,\n      \"./bufferish-proto\": 6,\n      ieee754: 32,\n      \"int64-buffer\": 33\n    }],\n    24: [function (t, r, e) {\n      function n(t) {\n        var r = s.getReadFormat(t);\n        return t && t.useraw ? o(r) : i(r);\n      }\n      function i(t) {\n        var r,\n          e = new Array(256);\n        for (r = 0; r <= 127; r++) e[r] = f(r);\n        for (r = 128; r <= 143; r++) e[r] = a(r - 128, t.map);\n        for (r = 144; r <= 159; r++) e[r] = a(r - 144, t.array);\n        for (r = 160; r <= 191; r++) e[r] = a(r - 160, t.str);\n        for (e[192] = f(null), e[193] = null, e[194] = f(!1), e[195] = f(!0), e[196] = u(t.uint8, t.bin), e[197] = u(t.uint16, t.bin), e[198] = u(t.uint32, t.bin), e[199] = u(t.uint8, t.ext), e[200] = u(t.uint16, t.ext), e[201] = u(t.uint32, t.ext), e[202] = t.float32, e[203] = t.float64, e[204] = t.uint8, e[205] = t.uint16, e[206] = t.uint32, e[207] = t.uint64, e[208] = t.int8, e[209] = t.int16, e[210] = t.int32, e[211] = t.int64, e[212] = a(1, t.ext), e[213] = a(2, t.ext), e[214] = a(4, t.ext), e[215] = a(8, t.ext), e[216] = a(16, t.ext), e[217] = u(t.uint8, t.str), e[218] = u(t.uint16, t.str), e[219] = u(t.uint32, t.str), e[220] = u(t.uint16, t.array), e[221] = u(t.uint32, t.array), e[222] = u(t.uint16, t.map), e[223] = u(t.uint32, t.map), r = 224; r <= 255; r++) e[r] = f(r - 256);\n        return e;\n      }\n      function o(t) {\n        var r,\n          e = i(t).slice();\n        for (e[217] = e[196], e[218] = e[197], e[219] = e[198], r = 160; r <= 191; r++) e[r] = a(r - 160, t.bin);\n        return e;\n      }\n      function f(t) {\n        return function () {\n          return t;\n        };\n      }\n      function u(t, r) {\n        return function (e) {\n          var n = t(e);\n          return r(e, n);\n        };\n      }\n      function a(t, r) {\n        return function (e) {\n          return r(e, t);\n        };\n      }\n      var s = t(\"./read-format\");\n      e.getReadToken = n;\n    }, {\n      \"./read-format\": 23\n    }],\n    25: [function (t, r, e) {\n      function n(t) {\n        function r(t, r) {\n          var n = e[_typeof(r)];\n          if (!n) throw new Error('Unsupported type \"' + _typeof(r) + '\": ' + r);\n          n(t, r);\n        }\n        var e = s.getWriteType(t);\n        return r;\n      }\n      function i() {\n        var t = this.options;\n        return this.encode = n(t), t && t.preset && a.setExtPackers(this), this;\n      }\n      function o(t, r, e) {\n        function n(r) {\n          return e && (r = e(r)), new u(r, t);\n        }\n        e = c.filter(e);\n        var i = r.name;\n        if (i && \"Object\" !== i) {\n          var o = this.extPackers || (this.extPackers = {});\n          o[i] = n;\n        } else {\n          var f = this.extEncoderList || (this.extEncoderList = []);\n          f.unshift([r, n]);\n        }\n      }\n      function f(t) {\n        var r = this.extPackers || (this.extPackers = {}),\n          e = t.constructor,\n          n = e && e.name && r[e.name];\n        if (n) return n;\n        for (var i = this.extEncoderList || (this.extEncoderList = []), o = i.length, f = 0; f < o; f++) {\n          var u = i[f];\n          if (e === u[0]) return u[1];\n        }\n      }\n      var u = t(\"./ext-buffer\").ExtBuffer,\n        a = t(\"./ext-packer\"),\n        s = t(\"./write-type\"),\n        c = t(\"./codec-base\");\n      c.install({\n        addExtPacker: o,\n        getExtPacker: f,\n        init: i\n      }), e.preset = i.call(c.preset);\n    }, {\n      \"./codec-base\": 9,\n      \"./ext-buffer\": 17,\n      \"./ext-packer\": 18,\n      \"./write-type\": 27\n    }],\n    26: [function (t, r, e) {\n      function n(t) {\n        return t && t.uint8array ? i() : m || E.hasBuffer && t && t.safe ? f() : o();\n      }\n      function i() {\n        var t = o();\n        return t[202] = c(202, 4, p), t[203] = c(203, 8, d), t;\n      }\n      function o() {\n        var t = w.slice();\n        return t[196] = u(196), t[197] = a(197), t[198] = s(198), t[199] = u(199), t[200] = a(200), t[201] = s(201), t[202] = c(202, 4, x.writeFloatBE || p, !0), t[203] = c(203, 8, x.writeDoubleBE || d, !0), t[204] = u(204), t[205] = a(205), t[206] = s(206), t[207] = c(207, 8, h), t[208] = u(208), t[209] = a(209), t[210] = s(210), t[211] = c(211, 8, l), t[217] = u(217), t[218] = a(218), t[219] = s(219), t[220] = a(220), t[221] = s(221), t[222] = a(222), t[223] = s(223), t;\n      }\n      function f() {\n        var t = w.slice();\n        return t[196] = c(196, 1, Buffer.prototype.writeUInt8), t[197] = c(197, 2, Buffer.prototype.writeUInt16BE), t[198] = c(198, 4, Buffer.prototype.writeUInt32BE), t[199] = c(199, 1, Buffer.prototype.writeUInt8), t[200] = c(200, 2, Buffer.prototype.writeUInt16BE), t[201] = c(201, 4, Buffer.prototype.writeUInt32BE), t[202] = c(202, 4, Buffer.prototype.writeFloatBE), t[203] = c(203, 8, Buffer.prototype.writeDoubleBE), t[204] = c(204, 1, Buffer.prototype.writeUInt8), t[205] = c(205, 2, Buffer.prototype.writeUInt16BE), t[206] = c(206, 4, Buffer.prototype.writeUInt32BE), t[207] = c(207, 8, h), t[208] = c(208, 1, Buffer.prototype.writeInt8), t[209] = c(209, 2, Buffer.prototype.writeInt16BE), t[210] = c(210, 4, Buffer.prototype.writeInt32BE), t[211] = c(211, 8, l), t[217] = c(217, 1, Buffer.prototype.writeUInt8), t[218] = c(218, 2, Buffer.prototype.writeUInt16BE), t[219] = c(219, 4, Buffer.prototype.writeUInt32BE), t[220] = c(220, 2, Buffer.prototype.writeUInt16BE), t[221] = c(221, 4, Buffer.prototype.writeUInt32BE), t[222] = c(222, 2, Buffer.prototype.writeUInt16BE), t[223] = c(223, 4, Buffer.prototype.writeUInt32BE), t;\n      }\n      function u(t) {\n        return function (r, e) {\n          var n = r.reserve(2),\n            i = r.buffer;\n          i[n++] = t, i[n] = e;\n        };\n      }\n      function a(t) {\n        return function (r, e) {\n          var n = r.reserve(3),\n            i = r.buffer;\n          i[n++] = t, i[n++] = e >>> 8, i[n] = e;\n        };\n      }\n      function s(t) {\n        return function (r, e) {\n          var n = r.reserve(5),\n            i = r.buffer;\n          i[n++] = t, i[n++] = e >>> 24, i[n++] = e >>> 16, i[n++] = e >>> 8, i[n] = e;\n        };\n      }\n      function c(t, r, e, n) {\n        return function (i, o) {\n          var f = i.reserve(r + 1);\n          i.buffer[f++] = t, e.call(i.buffer, o, f, n);\n        };\n      }\n      function h(t, r) {\n        new g(this, r, t);\n      }\n      function l(t, r) {\n        new b(this, r, t);\n      }\n      function p(t, r) {\n        y.write(this, t, r, !1, 23, 4);\n      }\n      function d(t, r) {\n        y.write(this, t, r, !1, 52, 8);\n      }\n      var y = t(\"ieee754\"),\n        v = t(\"int64-buffer\"),\n        g = v.Uint64BE,\n        b = v.Int64BE,\n        w = t(\"./write-uint8\").uint8,\n        E = t(\"./bufferish\"),\n        Buffer = E.global,\n        A = E.hasBuffer && \"TYPED_ARRAY_SUPPORT\" in Buffer,\n        m = A && !Buffer.TYPED_ARRAY_SUPPORT,\n        x = E.hasBuffer && Buffer.prototype || {};\n      e.getWriteToken = n;\n    }, {\n      \"./bufferish\": 8,\n      \"./write-uint8\": 28,\n      ieee754: 32,\n      \"int64-buffer\": 33\n    }],\n    27: [function (t, r, e) {\n      function n(t) {\n        function r(t, r) {\n          var e = r ? 195 : 194;\n          _[e](t, r);\n        }\n        function e(t, r) {\n          var e,\n            n = 0 | r;\n          return r !== n ? (e = 203, void _[e](t, r)) : (e = -32 <= n && n <= 127 ? 255 & n : 0 <= n ? n <= 255 ? 204 : n <= 65535 ? 205 : 206 : -128 <= n ? 208 : -32768 <= n ? 209 : 210, void _[e](t, n));\n        }\n        function n(t, r) {\n          var e = 207;\n          _[e](t, r.toArray());\n        }\n        function o(t, r) {\n          var e = 211;\n          _[e](t, r.toArray());\n        }\n        function v(t) {\n          return t < 32 ? 1 : t <= 255 ? 2 : t <= 65535 ? 3 : 5;\n        }\n        function g(t) {\n          return t < 32 ? 1 : t <= 65535 ? 3 : 5;\n        }\n        function b(t) {\n          function r(r, e) {\n            var n = e.length,\n              i = 5 + 3 * n;\n            r.offset = r.reserve(i);\n            var o = r.buffer,\n              f = t(n),\n              u = r.offset + f;\n            n = s.write.call(o, e, u);\n            var a = t(n);\n            if (f !== a) {\n              var c = u + a - f,\n                h = u + n;\n              s.copy.call(o, o, c, u, h);\n            }\n            var l = 1 === a ? 160 + n : a <= 3 ? 215 + a : 219;\n            _[l](r, n), r.offset += n;\n          }\n          return r;\n        }\n        function w(t, r) {\n          if (null === r) return A(t, r);\n          if (I(r)) return Y(t, r);\n          if (i(r)) return m(t, r);\n          if (f.isUint64BE(r)) return n(t, r);\n          if (u.isInt64BE(r)) return o(t, r);\n          var e = t.codec.getExtPacker(r);\n          return e && (r = e(r)), r instanceof l ? U(t, r) : void D(t, r);\n        }\n        function E(t, r) {\n          return I(r) ? k(t, r) : void w(t, r);\n        }\n        function A(t, r) {\n          var e = 192;\n          _[e](t, r);\n        }\n        function m(t, r) {\n          var e = r.length,\n            n = e < 16 ? 144 + e : e <= 65535 ? 220 : 221;\n          _[n](t, e);\n          for (var i = t.codec.encode, o = 0; o < e; o++) i(t, r[o]);\n        }\n        function x(t, r) {\n          var e = r.length,\n            n = e < 255 ? 196 : e <= 65535 ? 197 : 198;\n          _[n](t, e), t.send(r);\n        }\n        function B(t, r) {\n          x(t, new Uint8Array(r));\n        }\n        function U(t, r) {\n          var e = r.buffer,\n            n = e.length,\n            i = y[n] || (n < 255 ? 199 : n <= 65535 ? 200 : 201);\n          _[i](t, n), h[r.type](t), t.send(e);\n        }\n        function P(t, r) {\n          var e = Object.keys(r),\n            n = e.length,\n            i = n < 16 ? 128 + n : n <= 65535 ? 222 : 223;\n          _[i](t, n);\n          var o = t.codec.encode;\n          e.forEach(function (e) {\n            o(t, e), o(t, r[e]);\n          });\n        }\n        function R(t, r) {\n          if (!(r instanceof Map)) return P(t, r);\n          var e = r.size,\n            n = e < 16 ? 128 + e : e <= 65535 ? 222 : 223;\n          _[n](t, e);\n          var i = t.codec.encode;\n          r.forEach(function (r, e, n) {\n            i(t, e), i(t, r);\n          });\n        }\n        function k(t, r) {\n          var e = r.length,\n            n = e < 32 ? 160 + e : e <= 65535 ? 218 : 219;\n          _[n](t, e), t.send(r);\n        }\n        var _ = c.getWriteToken(t),\n          T = t && t.useraw,\n          S = p && t && t.binarraybuffer,\n          I = S ? a.isArrayBuffer : a.isBuffer,\n          Y = S ? B : x,\n          C = d && t && t.usemap,\n          D = C ? R : P,\n          O = {\n            \"boolean\": r,\n            \"function\": A,\n            number: e,\n            object: T ? E : w,\n            string: b(T ? g : v),\n            symbol: A,\n            undefined: A\n          };\n        return O;\n      }\n      var i = t(\"isarray\"),\n        o = t(\"int64-buffer\"),\n        f = o.Uint64BE,\n        u = o.Int64BE,\n        a = t(\"./bufferish\"),\n        s = t(\"./bufferish-proto\"),\n        c = t(\"./write-token\"),\n        h = t(\"./write-uint8\").uint8,\n        l = t(\"./ext-buffer\").ExtBuffer,\n        p = \"undefined\" != typeof Uint8Array,\n        d = \"undefined\" != typeof Map,\n        y = [];\n      y[1] = 212, y[2] = 213, y[4] = 214, y[8] = 215, y[16] = 216, e.getWriteType = n;\n    }, {\n      \"./bufferish\": 8,\n      \"./bufferish-proto\": 6,\n      \"./ext-buffer\": 17,\n      \"./write-token\": 26,\n      \"./write-uint8\": 28,\n      \"int64-buffer\": 33,\n      isarray: 34\n    }],\n    28: [function (t, r, e) {\n      function n(t) {\n        return function (r) {\n          var e = r.reserve(1);\n          r.buffer[e] = t;\n        };\n      }\n      for (var i = e.uint8 = new Array(256), o = 0; o <= 255; o++) i[o] = n(o);\n    }, {}],\n    29: [function (t, r, e) {\n      (function (r) {\n        \"use strict\";\n\n        function n() {\n          try {\n            var t = new Uint8Array(1);\n            return t.__proto__ = {\n              __proto__: Uint8Array.prototype,\n              foo: function foo() {\n                return 42;\n              }\n            }, 42 === t.foo() && \"function\" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength;\n          } catch (t) {\n            return !1;\n          }\n        }\n        function i() {\n          return Buffer.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;\n        }\n        function o(t, r) {\n          if (i() < r) throw new RangeError(\"Invalid typed array length\");\n          return Buffer.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(r), t.__proto__ = Buffer.prototype) : (null === t && (t = new Buffer(r)), t.length = r), t;\n        }\n        function Buffer(t, r, e) {\n          if (!(Buffer.TYPED_ARRAY_SUPPORT || this instanceof Buffer)) return new Buffer(t, r, e);\n          if (\"number\" == typeof t) {\n            if (\"string\" == typeof r) throw new Error(\"If encoding is specified then the first argument must be a string\");\n            return s(this, t);\n          }\n          return f(this, t, r, e);\n        }\n        function f(t, r, e, n) {\n          if (\"number\" == typeof r) throw new TypeError('\"value\" argument must not be a number');\n          return \"undefined\" != typeof ArrayBuffer && r instanceof ArrayBuffer ? l(t, r, e, n) : \"string\" == typeof r ? c(t, r, e) : p(t, r);\n        }\n        function u(t) {\n          if (\"number\" != typeof t) throw new TypeError('\"size\" argument must be a number');\n          if (t < 0) throw new RangeError('\"size\" argument must not be negative');\n        }\n        function a(t, r, e, n) {\n          return u(r), r <= 0 ? o(t, r) : void 0 !== e ? \"string\" == typeof n ? o(t, r).fill(e, n) : o(t, r).fill(e) : o(t, r);\n        }\n        function s(t, r) {\n          if (u(r), t = o(t, r < 0 ? 0 : 0 | d(r)), !Buffer.TYPED_ARRAY_SUPPORT) for (var e = 0; e < r; ++e) t[e] = 0;\n          return t;\n        }\n        function c(t, r, e) {\n          if (\"string\" == typeof e && \"\" !== e || (e = \"utf8\"), !Buffer.isEncoding(e)) throw new TypeError('\"encoding\" must be a valid string encoding');\n          var n = 0 | v(r, e);\n          t = o(t, n);\n          var i = t.write(r, e);\n          return i !== n && (t = t.slice(0, i)), t;\n        }\n        function h(t, r) {\n          var e = r.length < 0 ? 0 : 0 | d(r.length);\n          t = o(t, e);\n          for (var n = 0; n < e; n += 1) t[n] = 255 & r[n];\n          return t;\n        }\n        function l(t, r, e, n) {\n          if (r.byteLength, e < 0 || r.byteLength < e) throw new RangeError(\"'offset' is out of bounds\");\n          if (r.byteLength < e + (n || 0)) throw new RangeError(\"'length' is out of bounds\");\n          return r = void 0 === e && void 0 === n ? new Uint8Array(r) : void 0 === n ? new Uint8Array(r, e) : new Uint8Array(r, e, n), Buffer.TYPED_ARRAY_SUPPORT ? (t = r, t.__proto__ = Buffer.prototype) : t = h(t, r), t;\n        }\n        function p(t, r) {\n          if (Buffer.isBuffer(r)) {\n            var e = 0 | d(r.length);\n            return t = o(t, e), 0 === t.length ? t : (r.copy(t, 0, 0, e), t);\n          }\n          if (r) {\n            if (\"undefined\" != typeof ArrayBuffer && r.buffer instanceof ArrayBuffer || \"length\" in r) return \"number\" != typeof r.length || H(r.length) ? o(t, 0) : h(t, r);\n            if (\"Buffer\" === r.type && Q(r.data)) return h(t, r.data);\n          }\n          throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\");\n        }\n        function d(t) {\n          if (t >= i()) throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\" + i().toString(16) + \" bytes\");\n          return 0 | t;\n        }\n        function y(t) {\n          return +t != t && (t = 0), Buffer.alloc(+t);\n        }\n        function v(t, r) {\n          if (Buffer.isBuffer(t)) return t.length;\n          if (\"undefined\" != typeof ArrayBuffer && \"function\" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;\n          \"string\" != typeof t && (t = \"\" + t);\n          var e = t.length;\n          if (0 === e) return 0;\n          for (var n = !1;;) switch (r) {\n            case \"ascii\":\n            case \"latin1\":\n            case \"binary\":\n              return e;\n            case \"utf8\":\n            case \"utf-8\":\n            case void 0:\n              return q(t).length;\n            case \"ucs2\":\n            case \"ucs-2\":\n            case \"utf16le\":\n            case \"utf-16le\":\n              return 2 * e;\n            case \"hex\":\n              return e >>> 1;\n            case \"base64\":\n              return X(t).length;\n            default:\n              if (n) return q(t).length;\n              r = (\"\" + r).toLowerCase(), n = !0;\n          }\n        }\n        function g(t, r, e) {\n          var n = !1;\n          if ((void 0 === r || r < 0) && (r = 0), r > this.length) return \"\";\n          if ((void 0 === e || e > this.length) && (e = this.length), e <= 0) return \"\";\n          if (e >>>= 0, r >>>= 0, e <= r) return \"\";\n          for (t || (t = \"utf8\");;) switch (t) {\n            case \"hex\":\n              return I(this, r, e);\n            case \"utf8\":\n            case \"utf-8\":\n              return k(this, r, e);\n            case \"ascii\":\n              return T(this, r, e);\n            case \"latin1\":\n            case \"binary\":\n              return S(this, r, e);\n            case \"base64\":\n              return R(this, r, e);\n            case \"ucs2\":\n            case \"ucs-2\":\n            case \"utf16le\":\n            case \"utf-16le\":\n              return Y(this, r, e);\n            default:\n              if (n) throw new TypeError(\"Unknown encoding: \" + t);\n              t = (t + \"\").toLowerCase(), n = !0;\n          }\n        }\n        function b(t, r, e) {\n          var n = t[r];\n          t[r] = t[e], t[e] = n;\n        }\n        function w(t, r, e, n, i) {\n          if (0 === t.length) return -1;\n          if (\"string\" == typeof e ? (n = e, e = 0) : e > 2147483647 ? e = 2147483647 : e < -2147483648 && (e = -2147483648), e = +e, isNaN(e) && (e = i ? 0 : t.length - 1), e < 0 && (e = t.length + e), e >= t.length) {\n            if (i) return -1;\n            e = t.length - 1;\n          } else if (e < 0) {\n            if (!i) return -1;\n            e = 0;\n          }\n          if (\"string\" == typeof r && (r = Buffer.from(r, n)), Buffer.isBuffer(r)) return 0 === r.length ? -1 : E(t, r, e, n, i);\n          if (\"number\" == typeof r) return r = 255 & r, Buffer.TYPED_ARRAY_SUPPORT && \"function\" == typeof Uint8Array.prototype.indexOf ? i ? Uint8Array.prototype.indexOf.call(t, r, e) : Uint8Array.prototype.lastIndexOf.call(t, r, e) : E(t, [r], e, n, i);\n          throw new TypeError(\"val must be string, number or Buffer\");\n        }\n        function E(t, r, e, n, i) {\n          function o(t, r) {\n            return 1 === f ? t[r] : t.readUInt16BE(r * f);\n          }\n          var f = 1,\n            u = t.length,\n            a = r.length;\n          if (void 0 !== n && (n = String(n).toLowerCase(), \"ucs2\" === n || \"ucs-2\" === n || \"utf16le\" === n || \"utf-16le\" === n)) {\n            if (t.length < 2 || r.length < 2) return -1;\n            f = 2, u /= 2, a /= 2, e /= 2;\n          }\n          var s;\n          if (i) {\n            var c = -1;\n            for (s = e; s < u; s++) if (o(t, s) === o(r, c === -1 ? 0 : s - c)) {\n              if (c === -1 && (c = s), s - c + 1 === a) return c * f;\n            } else c !== -1 && (s -= s - c), c = -1;\n          } else for (e + a > u && (e = u - a), s = e; s >= 0; s--) {\n            for (var h = !0, l = 0; l < a; l++) if (o(t, s + l) !== o(r, l)) {\n              h = !1;\n              break;\n            }\n            if (h) return s;\n          }\n          return -1;\n        }\n        function A(t, r, e, n) {\n          e = Number(e) || 0;\n          var i = t.length - e;\n          n ? (n = Number(n), n > i && (n = i)) : n = i;\n          var o = r.length;\n          if (o % 2 !== 0) throw new TypeError(\"Invalid hex string\");\n          n > o / 2 && (n = o / 2);\n          for (var f = 0; f < n; ++f) {\n            var u = parseInt(r.substr(2 * f, 2), 16);\n            if (isNaN(u)) return f;\n            t[e + f] = u;\n          }\n          return f;\n        }\n        function m(t, r, e, n) {\n          return G(q(r, t.length - e), t, e, n);\n        }\n        function x(t, r, e, n) {\n          return G(W(r), t, e, n);\n        }\n        function B(t, r, e, n) {\n          return x(t, r, e, n);\n        }\n        function U(t, r, e, n) {\n          return G(X(r), t, e, n);\n        }\n        function P(t, r, e, n) {\n          return G(J(r, t.length - e), t, e, n);\n        }\n        function R(t, r, e) {\n          return 0 === r && e === t.length ? Z.fromByteArray(t) : Z.fromByteArray(t.slice(r, e));\n        }\n        function k(t, r, e) {\n          e = Math.min(t.length, e);\n          for (var n = [], i = r; i < e;) {\n            var o = t[i],\n              f = null,\n              u = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;\n            if (i + u <= e) {\n              var a, s, c, h;\n              switch (u) {\n                case 1:\n                  o < 128 && (f = o);\n                  break;\n                case 2:\n                  a = t[i + 1], 128 === (192 & a) && (h = (31 & o) << 6 | 63 & a, h > 127 && (f = h));\n                  break;\n                case 3:\n                  a = t[i + 1], s = t[i + 2], 128 === (192 & a) && 128 === (192 & s) && (h = (15 & o) << 12 | (63 & a) << 6 | 63 & s, h > 2047 && (h < 55296 || h > 57343) && (f = h));\n                  break;\n                case 4:\n                  a = t[i + 1], s = t[i + 2], c = t[i + 3], 128 === (192 & a) && 128 === (192 & s) && 128 === (192 & c) && (h = (15 & o) << 18 | (63 & a) << 12 | (63 & s) << 6 | 63 & c, h > 65535 && h < 1114112 && (f = h));\n              }\n            }\n            null === f ? (f = 65533, u = 1) : f > 65535 && (f -= 65536, n.push(f >>> 10 & 1023 | 55296), f = 56320 | 1023 & f), n.push(f), i += u;\n          }\n          return _(n);\n        }\n        function _(t) {\n          var r = t.length;\n          if (r <= $) return String.fromCharCode.apply(String, t);\n          for (var e = \"\", n = 0; n < r;) e += String.fromCharCode.apply(String, t.slice(n, n += $));\n          return e;\n        }\n        function T(t, r, e) {\n          var n = \"\";\n          e = Math.min(t.length, e);\n          for (var i = r; i < e; ++i) n += String.fromCharCode(127 & t[i]);\n          return n;\n        }\n        function S(t, r, e) {\n          var n = \"\";\n          e = Math.min(t.length, e);\n          for (var i = r; i < e; ++i) n += String.fromCharCode(t[i]);\n          return n;\n        }\n        function I(t, r, e) {\n          var n = t.length;\n          (!r || r < 0) && (r = 0), (!e || e < 0 || e > n) && (e = n);\n          for (var i = \"\", o = r; o < e; ++o) i += V(t[o]);\n          return i;\n        }\n        function Y(t, r, e) {\n          for (var n = t.slice(r, e), i = \"\", o = 0; o < n.length; o += 2) i += String.fromCharCode(n[o] + 256 * n[o + 1]);\n          return i;\n        }\n        function C(t, r, e) {\n          if (t % 1 !== 0 || t < 0) throw new RangeError(\"offset is not uint\");\n          if (t + r > e) throw new RangeError(\"Trying to access beyond buffer length\");\n        }\n        function D(t, r, e, n, i, o) {\n          if (!Buffer.isBuffer(t)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n          if (r > i || r < o) throw new RangeError('\"value\" argument is out of bounds');\n          if (e + n > t.length) throw new RangeError(\"Index out of range\");\n        }\n        function O(t, r, e, n) {\n          r < 0 && (r = 65535 + r + 1);\n          for (var i = 0, o = Math.min(t.length - e, 2); i < o; ++i) t[e + i] = (r & 255 << 8 * (n ? i : 1 - i)) >>> 8 * (n ? i : 1 - i);\n        }\n        function L(t, r, e, n) {\n          r < 0 && (r = 4294967295 + r + 1);\n          for (var i = 0, o = Math.min(t.length - e, 4); i < o; ++i) t[e + i] = r >>> 8 * (n ? i : 3 - i) & 255;\n        }\n        function M(t, r, e, n, i, o) {\n          if (e + n > t.length) throw new RangeError(\"Index out of range\");\n          if (e < 0) throw new RangeError(\"Index out of range\");\n        }\n        function N(t, r, e, n, i) {\n          return i || M(t, r, e, 4, 3.4028234663852886e38, -3.4028234663852886e38), K.write(t, r, e, n, 23, 4), e + 4;\n        }\n        function F(t, r, e, n, i) {\n          return i || M(t, r, e, 8, 1.7976931348623157e308, -1.7976931348623157e308), K.write(t, r, e, n, 52, 8), e + 8;\n        }\n        function j(t) {\n          if (t = z(t).replace(tt, \"\"), t.length < 2) return \"\";\n          for (; t.length % 4 !== 0;) t += \"=\";\n          return t;\n        }\n        function z(t) {\n          return t.trim ? t.trim() : t.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        function V(t) {\n          return t < 16 ? \"0\" + t.toString(16) : t.toString(16);\n        }\n        function q(t, r) {\n          r = r || 1 / 0;\n          for (var e, n = t.length, i = null, o = [], f = 0; f < n; ++f) {\n            if (e = t.charCodeAt(f), e > 55295 && e < 57344) {\n              if (!i) {\n                if (e > 56319) {\n                  (r -= 3) > -1 && o.push(239, 191, 189);\n                  continue;\n                }\n                if (f + 1 === n) {\n                  (r -= 3) > -1 && o.push(239, 191, 189);\n                  continue;\n                }\n                i = e;\n                continue;\n              }\n              if (e < 56320) {\n                (r -= 3) > -1 && o.push(239, 191, 189), i = e;\n                continue;\n              }\n              e = (i - 55296 << 10 | e - 56320) + 65536;\n            } else i && (r -= 3) > -1 && o.push(239, 191, 189);\n            if (i = null, e < 128) {\n              if ((r -= 1) < 0) break;\n              o.push(e);\n            } else if (e < 2048) {\n              if ((r -= 2) < 0) break;\n              o.push(e >> 6 | 192, 63 & e | 128);\n            } else if (e < 65536) {\n              if ((r -= 3) < 0) break;\n              o.push(e >> 12 | 224, e >> 6 & 63 | 128, 63 & e | 128);\n            } else {\n              if (!(e < 1114112)) throw new Error(\"Invalid code point\");\n              if ((r -= 4) < 0) break;\n              o.push(e >> 18 | 240, e >> 12 & 63 | 128, e >> 6 & 63 | 128, 63 & e | 128);\n            }\n          }\n          return o;\n        }\n        function W(t) {\n          for (var r = [], e = 0; e < t.length; ++e) r.push(255 & t.charCodeAt(e));\n          return r;\n        }\n        function J(t, r) {\n          for (var e, n, i, o = [], f = 0; f < t.length && !((r -= 2) < 0); ++f) e = t.charCodeAt(f), n = e >> 8, i = e % 256, o.push(i), o.push(n);\n          return o;\n        }\n        function X(t) {\n          return Z.toByteArray(j(t));\n        }\n        function G(t, r, e, n) {\n          for (var i = 0; i < n && !(i + e >= r.length || i >= t.length); ++i) r[i + e] = t[i];\n          return i;\n        }\n        function H(t) {\n          return t !== t;\n        }\n        var Z = t(\"base64-js\"),\n          K = t(\"ieee754\"),\n          Q = t(\"isarray\");\n        e.Buffer = Buffer, e.SlowBuffer = y, e.INSPECT_MAX_BYTES = 50, Buffer.TYPED_ARRAY_SUPPORT = void 0 !== r.TYPED_ARRAY_SUPPORT ? r.TYPED_ARRAY_SUPPORT : n(), e.kMaxLength = i(), Buffer.poolSize = 8192, Buffer._augment = function (t) {\n          return t.__proto__ = Buffer.prototype, t;\n        }, Buffer.from = function (t, r, e) {\n          return f(null, t, r, e);\n        }, Buffer.TYPED_ARRAY_SUPPORT && (Buffer.prototype.__proto__ = Uint8Array.prototype, Buffer.__proto__ = Uint8Array, \"undefined\" != typeof Symbol && Symbol.species && Buffer[Symbol.species] === Buffer && Object.defineProperty(Buffer, Symbol.species, {\n          value: null,\n          configurable: !0\n        })), Buffer.alloc = function (t, r, e) {\n          return a(null, t, r, e);\n        }, Buffer.allocUnsafe = function (t) {\n          return s(null, t);\n        }, Buffer.allocUnsafeSlow = function (t) {\n          return s(null, t);\n        }, Buffer.isBuffer = function (t) {\n          return !(null == t || !t._isBuffer);\n        }, Buffer.compare = function (t, r) {\n          if (!Buffer.isBuffer(t) || !Buffer.isBuffer(r)) throw new TypeError(\"Arguments must be Buffers\");\n          if (t === r) return 0;\n          for (var e = t.length, n = r.length, i = 0, o = Math.min(e, n); i < o; ++i) if (t[i] !== r[i]) {\n            e = t[i], n = r[i];\n            break;\n          }\n          return e < n ? -1 : n < e ? 1 : 0;\n        }, Buffer.isEncoding = function (t) {\n          switch (String(t).toLowerCase()) {\n            case \"hex\":\n            case \"utf8\":\n            case \"utf-8\":\n            case \"ascii\":\n            case \"latin1\":\n            case \"binary\":\n            case \"base64\":\n            case \"ucs2\":\n            case \"ucs-2\":\n            case \"utf16le\":\n            case \"utf-16le\":\n              return !0;\n            default:\n              return !1;\n          }\n        }, Buffer.concat = function (t, r) {\n          if (!Q(t)) throw new TypeError('\"list\" argument must be an Array of Buffers');\n          if (0 === t.length) return Buffer.alloc(0);\n          var e;\n          if (void 0 === r) for (r = 0, e = 0; e < t.length; ++e) r += t[e].length;\n          var n = Buffer.allocUnsafe(r),\n            i = 0;\n          for (e = 0; e < t.length; ++e) {\n            var o = t[e];\n            if (!Buffer.isBuffer(o)) throw new TypeError('\"list\" argument must be an Array of Buffers');\n            o.copy(n, i), i += o.length;\n          }\n          return n;\n        }, Buffer.byteLength = v, Buffer.prototype._isBuffer = !0, Buffer.prototype.swap16 = function () {\n          var t = this.length;\n          if (t % 2 !== 0) throw new RangeError(\"Buffer size must be a multiple of 16-bits\");\n          for (var r = 0; r < t; r += 2) b(this, r, r + 1);\n          return this;\n        }, Buffer.prototype.swap32 = function () {\n          var t = this.length;\n          if (t % 4 !== 0) throw new RangeError(\"Buffer size must be a multiple of 32-bits\");\n          for (var r = 0; r < t; r += 4) b(this, r, r + 3), b(this, r + 1, r + 2);\n          return this;\n        }, Buffer.prototype.swap64 = function () {\n          var t = this.length;\n          if (t % 8 !== 0) throw new RangeError(\"Buffer size must be a multiple of 64-bits\");\n          for (var r = 0; r < t; r += 8) b(this, r, r + 7), b(this, r + 1, r + 6), b(this, r + 2, r + 5), b(this, r + 3, r + 4);\n          return this;\n        }, Buffer.prototype.toString = function () {\n          var t = 0 | this.length;\n          return 0 === t ? \"\" : 0 === arguments.length ? k(this, 0, t) : g.apply(this, arguments);\n        }, Buffer.prototype.equals = function (t) {\n          if (!Buffer.isBuffer(t)) throw new TypeError(\"Argument must be a Buffer\");\n          return this === t || 0 === Buffer.compare(this, t);\n        }, Buffer.prototype.inspect = function () {\n          var t = \"\",\n            r = e.INSPECT_MAX_BYTES;\n          return this.length > 0 && (t = this.toString(\"hex\", 0, r).match(/.{2}/g).join(\" \"), this.length > r && (t += \" ... \")), \"<Buffer \" + t + \">\";\n        }, Buffer.prototype.compare = function (t, r, e, n, i) {\n          if (!Buffer.isBuffer(t)) throw new TypeError(\"Argument must be a Buffer\");\n          if (void 0 === r && (r = 0), void 0 === e && (e = t ? t.length : 0), void 0 === n && (n = 0), void 0 === i && (i = this.length), r < 0 || e > t.length || n < 0 || i > this.length) throw new RangeError(\"out of range index\");\n          if (n >= i && r >= e) return 0;\n          if (n >= i) return -1;\n          if (r >= e) return 1;\n          if (r >>>= 0, e >>>= 0, n >>>= 0, i >>>= 0, this === t) return 0;\n          for (var o = i - n, f = e - r, u = Math.min(o, f), a = this.slice(n, i), s = t.slice(r, e), c = 0; c < u; ++c) if (a[c] !== s[c]) {\n            o = a[c], f = s[c];\n            break;\n          }\n          return o < f ? -1 : f < o ? 1 : 0;\n        }, Buffer.prototype.includes = function (t, r, e) {\n          return this.indexOf(t, r, e) !== -1;\n        }, Buffer.prototype.indexOf = function (t, r, e) {\n          return w(this, t, r, e, !0);\n        }, Buffer.prototype.lastIndexOf = function (t, r, e) {\n          return w(this, t, r, e, !1);\n        }, Buffer.prototype.write = function (t, r, e, n) {\n          if (void 0 === r) n = \"utf8\", e = this.length, r = 0;else if (void 0 === e && \"string\" == typeof r) n = r, e = this.length, r = 0;else {\n            if (!isFinite(r)) throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");\n            r = 0 | r, isFinite(e) ? (e = 0 | e, void 0 === n && (n = \"utf8\")) : (n = e, e = void 0);\n          }\n          var i = this.length - r;\n          if ((void 0 === e || e > i) && (e = i), t.length > 0 && (e < 0 || r < 0) || r > this.length) throw new RangeError(\"Attempt to write outside buffer bounds\");\n          n || (n = \"utf8\");\n          for (var o = !1;;) switch (n) {\n            case \"hex\":\n              return A(this, t, r, e);\n            case \"utf8\":\n            case \"utf-8\":\n              return m(this, t, r, e);\n            case \"ascii\":\n              return x(this, t, r, e);\n            case \"latin1\":\n            case \"binary\":\n              return B(this, t, r, e);\n            case \"base64\":\n              return U(this, t, r, e);\n            case \"ucs2\":\n            case \"ucs-2\":\n            case \"utf16le\":\n            case \"utf-16le\":\n              return P(this, t, r, e);\n            default:\n              if (o) throw new TypeError(\"Unknown encoding: \" + n);\n              n = (\"\" + n).toLowerCase(), o = !0;\n          }\n        }, Buffer.prototype.toJSON = function () {\n          return {\n            type: \"Buffer\",\n            data: Array.prototype.slice.call(this._arr || this, 0)\n          };\n        };\n        var $ = 4096;\n        Buffer.prototype.slice = function (t, r) {\n          var e = this.length;\n          t = ~~t, r = void 0 === r ? e : ~~r, t < 0 ? (t += e, t < 0 && (t = 0)) : t > e && (t = e), r < 0 ? (r += e, r < 0 && (r = 0)) : r > e && (r = e), r < t && (r = t);\n          var n;\n          if (Buffer.TYPED_ARRAY_SUPPORT) n = this.subarray(t, r), n.__proto__ = Buffer.prototype;else {\n            var i = r - t;\n            n = new Buffer(i, void 0);\n            for (var o = 0; o < i; ++o) n[o] = this[o + t];\n          }\n          return n;\n        }, Buffer.prototype.readUIntLE = function (t, r, e) {\n          t = 0 | t, r = 0 | r, e || C(t, r, this.length);\n          for (var n = this[t], i = 1, o = 0; ++o < r && (i *= 256);) n += this[t + o] * i;\n          return n;\n        }, Buffer.prototype.readUIntBE = function (t, r, e) {\n          t = 0 | t, r = 0 | r, e || C(t, r, this.length);\n          for (var n = this[t + --r], i = 1; r > 0 && (i *= 256);) n += this[t + --r] * i;\n          return n;\n        }, Buffer.prototype.readUInt8 = function (t, r) {\n          return r || C(t, 1, this.length), this[t];\n        }, Buffer.prototype.readUInt16LE = function (t, r) {\n          return r || C(t, 2, this.length), this[t] | this[t + 1] << 8;\n        }, Buffer.prototype.readUInt16BE = function (t, r) {\n          return r || C(t, 2, this.length), this[t] << 8 | this[t + 1];\n        }, Buffer.prototype.readUInt32LE = function (t, r) {\n          return r || C(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3];\n        }, Buffer.prototype.readUInt32BE = function (t, r) {\n          return r || C(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]);\n        }, Buffer.prototype.readIntLE = function (t, r, e) {\n          t = 0 | t, r = 0 | r, e || C(t, r, this.length);\n          for (var n = this[t], i = 1, o = 0; ++o < r && (i *= 256);) n += this[t + o] * i;\n          return i *= 128, n >= i && (n -= Math.pow(2, 8 * r)), n;\n        }, Buffer.prototype.readIntBE = function (t, r, e) {\n          t = 0 | t, r = 0 | r, e || C(t, r, this.length);\n          for (var n = r, i = 1, o = this[t + --n]; n > 0 && (i *= 256);) o += this[t + --n] * i;\n          return i *= 128, o >= i && (o -= Math.pow(2, 8 * r)), o;\n        }, Buffer.prototype.readInt8 = function (t, r) {\n          return r || C(t, 1, this.length), 128 & this[t] ? (255 - this[t] + 1) * -1 : this[t];\n        }, Buffer.prototype.readInt16LE = function (t, r) {\n          r || C(t, 2, this.length);\n          var e = this[t] | this[t + 1] << 8;\n          return 32768 & e ? 4294901760 | e : e;\n        }, Buffer.prototype.readInt16BE = function (t, r) {\n          r || C(t, 2, this.length);\n          var e = this[t + 1] | this[t] << 8;\n          return 32768 & e ? 4294901760 | e : e;\n        }, Buffer.prototype.readInt32LE = function (t, r) {\n          return r || C(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24;\n        }, Buffer.prototype.readInt32BE = function (t, r) {\n          return r || C(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3];\n        }, Buffer.prototype.readFloatLE = function (t, r) {\n          return r || C(t, 4, this.length), K.read(this, t, !0, 23, 4);\n        }, Buffer.prototype.readFloatBE = function (t, r) {\n          return r || C(t, 4, this.length), K.read(this, t, !1, 23, 4);\n        }, Buffer.prototype.readDoubleLE = function (t, r) {\n          return r || C(t, 8, this.length), K.read(this, t, !0, 52, 8);\n        }, Buffer.prototype.readDoubleBE = function (t, r) {\n          return r || C(t, 8, this.length), K.read(this, t, !1, 52, 8);\n        }, Buffer.prototype.writeUIntLE = function (t, r, e, n) {\n          if (t = +t, r = 0 | r, e = 0 | e, !n) {\n            var i = Math.pow(2, 8 * e) - 1;\n            D(this, t, r, e, i, 0);\n          }\n          var o = 1,\n            f = 0;\n          for (this[r] = 255 & t; ++f < e && (o *= 256);) this[r + f] = t / o & 255;\n          return r + e;\n        }, Buffer.prototype.writeUIntBE = function (t, r, e, n) {\n          if (t = +t, r = 0 | r, e = 0 | e, !n) {\n            var i = Math.pow(2, 8 * e) - 1;\n            D(this, t, r, e, i, 0);\n          }\n          var o = e - 1,\n            f = 1;\n          for (this[r + o] = 255 & t; --o >= 0 && (f *= 256);) this[r + o] = t / f & 255;\n          return r + e;\n        }, Buffer.prototype.writeUInt8 = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 1, 255, 0), Buffer.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), this[r] = 255 & t, r + 1;\n        }, Buffer.prototype.writeUInt16LE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 2, 65535, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t, this[r + 1] = t >>> 8) : O(this, t, r, !0), r + 2;\n        }, Buffer.prototype.writeUInt16BE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 2, 65535, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 8, this[r + 1] = 255 & t) : O(this, t, r, !1), r + 2;\n        }, Buffer.prototype.writeUInt32LE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 4, 4294967295, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[r + 3] = t >>> 24, this[r + 2] = t >>> 16, this[r + 1] = t >>> 8, this[r] = 255 & t) : L(this, t, r, !0), r + 4;\n        }, Buffer.prototype.writeUInt32BE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 4, 4294967295, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 24, this[r + 1] = t >>> 16, this[r + 2] = t >>> 8, this[r + 3] = 255 & t) : L(this, t, r, !1), r + 4;\n        }, Buffer.prototype.writeIntLE = function (t, r, e, n) {\n          if (t = +t, r = 0 | r, !n) {\n            var i = Math.pow(2, 8 * e - 1);\n            D(this, t, r, e, i - 1, -i);\n          }\n          var o = 0,\n            f = 1,\n            u = 0;\n          for (this[r] = 255 & t; ++o < e && (f *= 256);) t < 0 && 0 === u && 0 !== this[r + o - 1] && (u = 1), this[r + o] = (t / f >> 0) - u & 255;\n          return r + e;\n        }, Buffer.prototype.writeIntBE = function (t, r, e, n) {\n          if (t = +t, r = 0 | r, !n) {\n            var i = Math.pow(2, 8 * e - 1);\n            D(this, t, r, e, i - 1, -i);\n          }\n          var o = e - 1,\n            f = 1,\n            u = 0;\n          for (this[r + o] = 255 & t; --o >= 0 && (f *= 256);) t < 0 && 0 === u && 0 !== this[r + o + 1] && (u = 1), this[r + o] = (t / f >> 0) - u & 255;\n          return r + e;\n        }, Buffer.prototype.writeInt8 = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 1, 127, -128), Buffer.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), t < 0 && (t = 255 + t + 1), this[r] = 255 & t, r + 1;\n        }, Buffer.prototype.writeInt16LE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 2, 32767, -32768), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t, this[r + 1] = t >>> 8) : O(this, t, r, !0), r + 2;\n        }, Buffer.prototype.writeInt16BE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 2, 32767, -32768), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 8, this[r + 1] = 255 & t) : O(this, t, r, !1), r + 2;\n        }, Buffer.prototype.writeInt32LE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 4, 2147483647, -2147483648), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t, this[r + 1] = t >>> 8, this[r + 2] = t >>> 16, this[r + 3] = t >>> 24) : L(this, t, r, !0), r + 4;\n        }, Buffer.prototype.writeInt32BE = function (t, r, e) {\n          return t = +t, r = 0 | r, e || D(this, t, r, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), Buffer.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 24, this[r + 1] = t >>> 16, this[r + 2] = t >>> 8, this[r + 3] = 255 & t) : L(this, t, r, !1), r + 4;\n        }, Buffer.prototype.writeFloatLE = function (t, r, e) {\n          return N(this, t, r, !0, e);\n        }, Buffer.prototype.writeFloatBE = function (t, r, e) {\n          return N(this, t, r, !1, e);\n        }, Buffer.prototype.writeDoubleLE = function (t, r, e) {\n          return F(this, t, r, !0, e);\n        }, Buffer.prototype.writeDoubleBE = function (t, r, e) {\n          return F(this, t, r, !1, e);\n        }, Buffer.prototype.copy = function (t, r, e, n) {\n          if (e || (e = 0), n || 0 === n || (n = this.length), r >= t.length && (r = t.length), r || (r = 0), n > 0 && n < e && (n = e), n === e) return 0;\n          if (0 === t.length || 0 === this.length) return 0;\n          if (r < 0) throw new RangeError(\"targetStart out of bounds\");\n          if (e < 0 || e >= this.length) throw new RangeError(\"sourceStart out of bounds\");\n          if (n < 0) throw new RangeError(\"sourceEnd out of bounds\");\n          n > this.length && (n = this.length), t.length - r < n - e && (n = t.length - r + e);\n          var i,\n            o = n - e;\n          if (this === t && e < r && r < n) for (i = o - 1; i >= 0; --i) t[i + r] = this[i + e];else if (o < 1e3 || !Buffer.TYPED_ARRAY_SUPPORT) for (i = 0; i < o; ++i) t[i + r] = this[i + e];else Uint8Array.prototype.set.call(t, this.subarray(e, e + o), r);\n          return o;\n        }, Buffer.prototype.fill = function (t, r, e, n) {\n          if (\"string\" == typeof t) {\n            if (\"string\" == typeof r ? (n = r, r = 0, e = this.length) : \"string\" == typeof e && (n = e, e = this.length), 1 === t.length) {\n              var i = t.charCodeAt(0);\n              i < 256 && (t = i);\n            }\n            if (void 0 !== n && \"string\" != typeof n) throw new TypeError(\"encoding must be a string\");\n            if (\"string\" == typeof n && !Buffer.isEncoding(n)) throw new TypeError(\"Unknown encoding: \" + n);\n          } else \"number\" == typeof t && (t = 255 & t);\n          if (r < 0 || this.length < r || this.length < e) throw new RangeError(\"Out of range index\");\n          if (e <= r) return this;\n          r >>>= 0, e = void 0 === e ? this.length : e >>> 0, t || (t = 0);\n          var o;\n          if (\"number\" == typeof t) for (o = r; o < e; ++o) this[o] = t;else {\n            var f = Buffer.isBuffer(t) ? t : q(new Buffer(t, n).toString()),\n              u = f.length;\n            for (o = 0; o < e - r; ++o) this[o + r] = f[o % u];\n          }\n          return this;\n        };\n        var tt = /[^+\\/0-9A-Za-z-_]/g;\n      }).call(this, \"undefined\" != typeof __webpack_require__.g ? __webpack_require__.g : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n    }, {\n      \"base64-js\": 30,\n      ieee754: 32,\n      isarray: 34\n    }],\n    30: [function (t, r, e) {\n      \"use strict\";\n\n      function n(t) {\n        var r = t.length;\n        if (r % 4 > 0) throw new Error(\"Invalid string. Length must be a multiple of 4\");\n        return \"=\" === t[r - 2] ? 2 : \"=\" === t[r - 1] ? 1 : 0;\n      }\n      function i(t) {\n        return 3 * t.length / 4 - n(t);\n      }\n      function o(t) {\n        var r,\n          e,\n          i,\n          o,\n          f,\n          u,\n          a = t.length;\n        f = n(t), u = new h(3 * a / 4 - f), i = f > 0 ? a - 4 : a;\n        var s = 0;\n        for (r = 0, e = 0; r < i; r += 4, e += 3) o = c[t.charCodeAt(r)] << 18 | c[t.charCodeAt(r + 1)] << 12 | c[t.charCodeAt(r + 2)] << 6 | c[t.charCodeAt(r + 3)], u[s++] = o >> 16 & 255, u[s++] = o >> 8 & 255, u[s++] = 255 & o;\n        return 2 === f ? (o = c[t.charCodeAt(r)] << 2 | c[t.charCodeAt(r + 1)] >> 4, u[s++] = 255 & o) : 1 === f && (o = c[t.charCodeAt(r)] << 10 | c[t.charCodeAt(r + 1)] << 4 | c[t.charCodeAt(r + 2)] >> 2, u[s++] = o >> 8 & 255, u[s++] = 255 & o), u;\n      }\n      function f(t) {\n        return s[t >> 18 & 63] + s[t >> 12 & 63] + s[t >> 6 & 63] + s[63 & t];\n      }\n      function u(t, r, e) {\n        for (var n, i = [], o = r; o < e; o += 3) n = (t[o] << 16) + (t[o + 1] << 8) + t[o + 2], i.push(f(n));\n        return i.join(\"\");\n      }\n      function a(t) {\n        for (var r, e = t.length, n = e % 3, i = \"\", o = [], f = 16383, a = 0, c = e - n; a < c; a += f) o.push(u(t, a, a + f > c ? c : a + f));\n        return 1 === n ? (r = t[e - 1], i += s[r >> 2], i += s[r << 4 & 63], i += \"==\") : 2 === n && (r = (t[e - 2] << 8) + t[e - 1], i += s[r >> 10], i += s[r >> 4 & 63], i += s[r << 2 & 63], i += \"=\"), o.push(i), o.join(\"\");\n      }\n      e.byteLength = i, e.toByteArray = o, e.fromByteArray = a;\n      for (var s = [], c = [], h = \"undefined\" != typeof Uint8Array ? Uint8Array : Array, l = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", p = 0, d = l.length; p < d; ++p) s[p] = l[p], c[l.charCodeAt(p)] = p;\n      c[\"-\".charCodeAt(0)] = 62, c[\"_\".charCodeAt(0)] = 63;\n    }, {}],\n    31: [function (t, r, e) {\n      function n() {\n        if (!(this instanceof n)) return new n();\n      }\n      !function (t) {\n        function e(t) {\n          for (var r in s) t[r] = s[r];\n          return t;\n        }\n        function n(t, r) {\n          return u(this, t).push(r), this;\n        }\n        function i(t, r) {\n          function e() {\n            o.call(n, t, e), r.apply(this, arguments);\n          }\n          var n = this;\n          return e.originalListener = r, u(n, t).push(e), n;\n        }\n        function o(t, r) {\n          function e(t) {\n            return t !== r && t.originalListener !== r;\n          }\n          var n,\n            i = this;\n          if (arguments.length) {\n            if (r) {\n              if (n = u(i, t, !0)) {\n                if (n = n.filter(e), !n.length) return o.call(i, t);\n                i[a][t] = n;\n              }\n            } else if (n = i[a], n && (delete n[t], !Object.keys(n).length)) return o.call(i);\n          } else delete i[a];\n          return i;\n        }\n        function f(t, r) {\n          function e(t) {\n            t.call(o);\n          }\n          function n(t) {\n            t.call(o, r);\n          }\n          function i(t) {\n            t.apply(o, s);\n          }\n          var o = this,\n            f = u(o, t, !0);\n          if (!f) return !1;\n          var a = arguments.length;\n          if (1 === a) f.forEach(e);else if (2 === a) f.forEach(n);else {\n            var s = Array.prototype.slice.call(arguments, 1);\n            f.forEach(i);\n          }\n          return !!f.length;\n        }\n        function u(t, r, e) {\n          if (!e || t[a]) {\n            var n = t[a] || (t[a] = {});\n            return n[r] || (n[r] = []);\n          }\n        }\n        \"undefined\" != typeof r && (r.exports = t);\n        var a = \"listeners\",\n          s = {\n            on: n,\n            once: i,\n            off: o,\n            emit: f\n          };\n        e(t.prototype), t.mixin = e;\n      }(n);\n    }, {}],\n    32: [function (t, r, e) {\n      e.read = function (t, r, e, n, i) {\n        var o,\n          f,\n          u = 8 * i - n - 1,\n          a = (1 << u) - 1,\n          s = a >> 1,\n          c = -7,\n          h = e ? i - 1 : 0,\n          l = e ? -1 : 1,\n          p = t[r + h];\n        for (h += l, o = p & (1 << -c) - 1, p >>= -c, c += u; c > 0; o = 256 * o + t[r + h], h += l, c -= 8);\n        for (f = o & (1 << -c) - 1, o >>= -c, c += n; c > 0; f = 256 * f + t[r + h], h += l, c -= 8);\n        if (0 === o) o = 1 - s;else {\n          if (o === a) return f ? NaN : (p ? -1 : 1) * (1 / 0);\n          f += Math.pow(2, n), o -= s;\n        }\n        return (p ? -1 : 1) * f * Math.pow(2, o - n);\n      }, e.write = function (t, r, e, n, i, o) {\n        var f,\n          u,\n          a,\n          s = 8 * o - i - 1,\n          c = (1 << s) - 1,\n          h = c >> 1,\n          l = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n          p = n ? 0 : o - 1,\n          d = n ? 1 : -1,\n          y = r < 0 || 0 === r && 1 / r < 0 ? 1 : 0;\n        for (r = Math.abs(r), isNaN(r) || r === 1 / 0 ? (u = isNaN(r) ? 1 : 0, f = c) : (f = Math.floor(Math.log(r) / Math.LN2), r * (a = Math.pow(2, -f)) < 1 && (f--, a *= 2), r += f + h >= 1 ? l / a : l * Math.pow(2, 1 - h), r * a >= 2 && (f++, a /= 2), f + h >= c ? (u = 0, f = c) : f + h >= 1 ? (u = (r * a - 1) * Math.pow(2, i), f += h) : (u = r * Math.pow(2, h - 1) * Math.pow(2, i), f = 0)); i >= 8; t[e + p] = 255 & u, p += d, u /= 256, i -= 8);\n        for (f = f << i | u, s += i; s > 0; t[e + p] = 255 & f, p += d, f /= 256, s -= 8);\n        t[e + p - d] |= 128 * y;\n      };\n    }, {}],\n    33: [function (t, r, e) {\n      (function (Buffer) {\n        var t, r, n, i;\n        !function (e) {\n          function o(t, r, n) {\n            function i(t, r, e, n) {\n              return this instanceof i ? v(this, t, r, e, n) : new i(t, r, e, n);\n            }\n            function o(t) {\n              return !(!t || !t[F]);\n            }\n            function v(t, r, e, n, i) {\n              if (E && A && (r instanceof A && (r = new E(r)), n instanceof A && (n = new E(n))), !(r || e || n || g)) return void (t.buffer = h(m, 0));\n              if (!s(r, e)) {\n                var o = g || Array;\n                i = e, n = r, e = 0, r = new o(8);\n              }\n              t.buffer = r, t.offset = e |= 0, b !== _typeof(n) && (\"string\" == typeof n ? x(r, e, n, i || 10) : s(n, i) ? c(r, e, n, i) : \"number\" == typeof i ? (k(r, e + T, n), k(r, e + S, i)) : n > 0 ? O(r, e, n) : n < 0 ? L(r, e, n) : c(r, e, m, 0));\n            }\n            function x(t, r, e, n) {\n              var i = 0,\n                o = e.length,\n                f = 0,\n                u = 0;\n              \"-\" === e[0] && i++;\n              for (var a = i; i < o;) {\n                var s = parseInt(e[i++], n);\n                if (!(s >= 0)) break;\n                u = u * n + s, f = f * n + Math.floor(u / B), u %= B;\n              }\n              a && (f = ~f, u ? u = B - u : f++), k(t, r + T, f), k(t, r + S, u);\n            }\n            function P() {\n              var t = this.buffer,\n                r = this.offset,\n                e = _(t, r + T),\n                i = _(t, r + S);\n              return n || (e |= 0), e ? e * B + i : i;\n            }\n            function R(t) {\n              var r = this.buffer,\n                e = this.offset,\n                i = _(r, e + T),\n                o = _(r, e + S),\n                f = \"\",\n                u = !n && 2147483648 & i;\n              for (u && (i = ~i, o = B - o), t = t || 10;;) {\n                var a = i % t * B + o;\n                if (i = Math.floor(i / t), o = Math.floor(a / t), f = (a % t).toString(t) + f, !i && !o) break;\n              }\n              return u && (f = \"-\" + f), f;\n            }\n            function k(t, r, e) {\n              t[r + D] = 255 & e, e >>= 8, t[r + C] = 255 & e, e >>= 8, t[r + Y] = 255 & e, e >>= 8, t[r + I] = 255 & e;\n            }\n            function _(t, r) {\n              return t[r + I] * U + (t[r + Y] << 16) + (t[r + C] << 8) + t[r + D];\n            }\n            var T = r ? 0 : 4,\n              S = r ? 4 : 0,\n              I = r ? 0 : 3,\n              Y = r ? 1 : 2,\n              C = r ? 2 : 1,\n              D = r ? 3 : 0,\n              O = r ? l : d,\n              L = r ? p : y,\n              M = i.prototype,\n              N = \"is\" + t,\n              F = \"_\" + N;\n            return M.buffer = void 0, M.offset = 0, M[F] = !0, M.toNumber = P, M.toString = R, M.toJSON = P, M.toArray = f, w && (M.toBuffer = u), E && (M.toArrayBuffer = a), i[N] = o, e[t] = i, i;\n          }\n          function f(t) {\n            var r = this.buffer,\n              e = this.offset;\n            return g = null, t !== !1 && 0 === e && 8 === r.length && x(r) ? r : h(r, e);\n          }\n          function u(t) {\n            var r = this.buffer,\n              e = this.offset;\n            if (g = w, t !== !1 && 0 === e && 8 === r.length && Buffer.isBuffer(r)) return r;\n            var n = new w(8);\n            return c(n, 0, r, e), n;\n          }\n          function a(t) {\n            var r = this.buffer,\n              e = this.offset,\n              n = r.buffer;\n            if (g = E, t !== !1 && 0 === e && n instanceof A && 8 === n.byteLength) return n;\n            var i = new E(8);\n            return c(i, 0, r, e), i.buffer;\n          }\n          function s(t, r) {\n            var e = t && t.length;\n            return r |= 0, e && r + 8 <= e && \"string\" != typeof t[r];\n          }\n          function c(t, r, e, n) {\n            r |= 0, n |= 0;\n            for (var i = 0; i < 8; i++) t[r++] = 255 & e[n++];\n          }\n          function h(t, r) {\n            return Array.prototype.slice.call(t, r, r + 8);\n          }\n          function l(t, r, e) {\n            for (var n = r + 8; n > r;) t[--n] = 255 & e, e /= 256;\n          }\n          function p(t, r, e) {\n            var n = r + 8;\n            for (e++; n > r;) t[--n] = 255 & -e ^ 255, e /= 256;\n          }\n          function d(t, r, e) {\n            for (var n = r + 8; r < n;) t[r++] = 255 & e, e /= 256;\n          }\n          function y(t, r, e) {\n            var n = r + 8;\n            for (e++; r < n;) t[r++] = 255 & -e ^ 255, e /= 256;\n          }\n          function v(t) {\n            return !!t && \"[object Array]\" == Object.prototype.toString.call(t);\n          }\n          var g,\n            b = \"undefined\",\n            w = b !== _typeof(Buffer) && Buffer,\n            E = b !== (typeof Uint8Array === \"undefined\" ? \"undefined\" : _typeof(Uint8Array)) && Uint8Array,\n            A = b !== (typeof ArrayBuffer === \"undefined\" ? \"undefined\" : _typeof(ArrayBuffer)) && ArrayBuffer,\n            m = [0, 0, 0, 0, 0, 0, 0, 0],\n            x = Array.isArray || v,\n            B = 4294967296,\n            U = 16777216;\n          t = o(\"Uint64BE\", !0, !0), r = o(\"Int64BE\", !0, !1), n = o(\"Uint64LE\", !1, !0), i = o(\"Int64LE\", !1, !1);\n        }(\"object\" == _typeof(e) && \"string\" != typeof e.nodeName ? e : this || {});\n      }).call(this, t(\"buffer\").Buffer);\n    }, {\n      buffer: 29\n    }],\n    34: [function (t, r, e) {\n      var n = {}.toString;\n      r.exports = Array.isArray || function (t) {\n        return \"[object Array]\" == n.call(t);\n      };\n    }, {}]\n  }, {}, [1])(1);\n});\n\n/***/ }),\n\n/***/ \"./src/worker/libs/pako.min.js\":\n/*!*************************************!*\\\n  !*** ./src/worker/libs/pako.min.js ***!\n  \\*************************************/\n/***/ (function(module, exports) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n!function (t) {\n  if (\"object\" == ( false ? 0 : _typeof(exports)) && \"undefined\" != \"object\") module.exports = t();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (t),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}\n}(function () {\n  return function r(s, o, l) {\n    function h(e, t) {\n      if (!o[e]) {\n        if (!s[e]) {\n          var a = undefined;\n          if (!t && a) return require(e, !0);\n          if (d) return d(e, !0);\n          var i = new Error(\"Cannot find module '\" + e + \"'\");\n          throw i.code = \"MODULE_NOT_FOUND\", i;\n        }\n        var n = o[e] = {\n          exports: {}\n        };\n        s[e][0].call(n.exports, function (t) {\n          return h(s[e][1][t] || t);\n        }, n, n.exports, r, s, o, l);\n      }\n      return o[e].exports;\n    }\n    for (var d = undefined, t = 0; t < l.length; t++) h(l[t]);\n    return h;\n  }({\n    1: [function (t, e, a) {\n      \"use strict\";\n\n      var s = t(\"./zlib/deflate\"),\n        o = t(\"./utils/common\"),\n        l = t(\"./utils/strings\"),\n        n = t(\"./zlib/messages\"),\n        r = t(\"./zlib/zstream\"),\n        h = Object.prototype.toString,\n        d = 0,\n        f = -1,\n        _ = 0,\n        u = 8;\n      function c(t) {\n        if (!(this instanceof c)) return new c(t);\n        this.options = o.assign({\n          level: f,\n          method: u,\n          chunkSize: 16384,\n          windowBits: 15,\n          memLevel: 8,\n          strategy: _,\n          to: \"\"\n        }, t || {});\n        var e = this.options;\n        e.raw && 0 < e.windowBits ? e.windowBits = -e.windowBits : e.gzip && 0 < e.windowBits && e.windowBits < 16 && (e.windowBits += 16), this.err = 0, this.msg = \"\", this.ended = !1, this.chunks = [], this.strm = new r(), this.strm.avail_out = 0;\n        var a = s.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy);\n        if (a !== d) throw new Error(n[a]);\n        if (e.header && s.deflateSetHeader(this.strm, e.header), e.dictionary) {\n          var i;\n          if (i = \"string\" == typeof e.dictionary ? l.string2buf(e.dictionary) : \"[object ArrayBuffer]\" === h.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary, (a = s.deflateSetDictionary(this.strm, i)) !== d) throw new Error(n[a]);\n          this._dict_set = !0;\n        }\n      }\n      function i(t, e) {\n        var a = new c(e);\n        if (a.push(t, !0), a.err) throw a.msg || n[a.err];\n        return a.result;\n      }\n      c.prototype.push = function (t, e) {\n        var a,\n          i,\n          n = this.strm,\n          r = this.options.chunkSize;\n        if (this.ended) return !1;\n        i = e === ~~e ? e : !0 === e ? 4 : 0, \"string\" == typeof t ? n.input = l.string2buf(t) : \"[object ArrayBuffer]\" === h.call(t) ? n.input = new Uint8Array(t) : n.input = t, n.next_in = 0, n.avail_in = n.input.length;\n        do {\n          if (0 === n.avail_out && (n.output = new o.Buf8(r), n.next_out = 0, n.avail_out = r), 1 !== (a = s.deflate(n, i)) && a !== d) return this.onEnd(a), !(this.ended = !0);\n          0 !== n.avail_out && (0 !== n.avail_in || 4 !== i && 2 !== i) || (\"string\" === this.options.to ? this.onData(l.buf2binstring(o.shrinkBuf(n.output, n.next_out))) : this.onData(o.shrinkBuf(n.output, n.next_out)));\n        } while ((0 < n.avail_in || 0 === n.avail_out) && 1 !== a);\n        return 4 === i ? (a = s.deflateEnd(this.strm), this.onEnd(a), this.ended = !0, a === d) : 2 !== i || (this.onEnd(d), !(n.avail_out = 0));\n      }, c.prototype.onData = function (t) {\n        this.chunks.push(t);\n      }, c.prototype.onEnd = function (t) {\n        t === d && (\"string\" === this.options.to ? this.result = this.chunks.join(\"\") : this.result = o.flattenChunks(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg;\n      }, a.Deflate = c, a.deflate = i, a.deflateRaw = function (t, e) {\n        return (e = e || {}).raw = !0, i(t, e);\n      }, a.gzip = function (t, e) {\n        return (e = e || {}).gzip = !0, i(t, e);\n      };\n    }, {\n      \"./utils/common\": 3,\n      \"./utils/strings\": 4,\n      \"./zlib/deflate\": 8,\n      \"./zlib/messages\": 13,\n      \"./zlib/zstream\": 15\n    }],\n    2: [function (t, e, a) {\n      \"use strict\";\n\n      var f = t(\"./zlib/inflate\"),\n        _ = t(\"./utils/common\"),\n        u = t(\"./utils/strings\"),\n        c = t(\"./zlib/constants\"),\n        i = t(\"./zlib/messages\"),\n        n = t(\"./zlib/zstream\"),\n        r = t(\"./zlib/gzheader\"),\n        b = Object.prototype.toString;\n      function s(t) {\n        if (!(this instanceof s)) return new s(t);\n        this.options = _.assign({\n          chunkSize: 16384,\n          windowBits: 0,\n          to: \"\"\n        }, t || {});\n        var e = this.options;\n        e.raw && 0 <= e.windowBits && e.windowBits < 16 && (e.windowBits = -e.windowBits, 0 === e.windowBits && (e.windowBits = -15)), !(0 <= e.windowBits && e.windowBits < 16) || t && t.windowBits || (e.windowBits += 32), 15 < e.windowBits && e.windowBits < 48 && 0 == (15 & e.windowBits) && (e.windowBits |= 15), this.err = 0, this.msg = \"\", this.ended = !1, this.chunks = [], this.strm = new n(), this.strm.avail_out = 0;\n        var a = f.inflateInit2(this.strm, e.windowBits);\n        if (a !== c.Z_OK) throw new Error(i[a]);\n        if (this.header = new r(), f.inflateGetHeader(this.strm, this.header), e.dictionary && (\"string\" == typeof e.dictionary ? e.dictionary = u.string2buf(e.dictionary) : \"[object ArrayBuffer]\" === b.call(e.dictionary) && (e.dictionary = new Uint8Array(e.dictionary)), e.raw && (a = f.inflateSetDictionary(this.strm, e.dictionary)) !== c.Z_OK)) throw new Error(i[a]);\n      }\n      function o(t, e) {\n        var a = new s(e);\n        if (a.push(t, !0), a.err) throw a.msg || i[a.err];\n        return a.result;\n      }\n      s.prototype.push = function (t, e) {\n        var a,\n          i,\n          n,\n          r,\n          s,\n          o = this.strm,\n          l = this.options.chunkSize,\n          h = this.options.dictionary,\n          d = !1;\n        if (this.ended) return !1;\n        i = e === ~~e ? e : !0 === e ? c.Z_FINISH : c.Z_NO_FLUSH, \"string\" == typeof t ? o.input = u.binstring2buf(t) : \"[object ArrayBuffer]\" === b.call(t) ? o.input = new Uint8Array(t) : o.input = t, o.next_in = 0, o.avail_in = o.input.length;\n        do {\n          if (0 === o.avail_out && (o.output = new _.Buf8(l), o.next_out = 0, o.avail_out = l), (a = f.inflate(o, c.Z_NO_FLUSH)) === c.Z_NEED_DICT && h && (a = f.inflateSetDictionary(this.strm, h)), a === c.Z_BUF_ERROR && !0 === d && (a = c.Z_OK, d = !1), a !== c.Z_STREAM_END && a !== c.Z_OK) return this.onEnd(a), !(this.ended = !0);\n          o.next_out && (0 !== o.avail_out && a !== c.Z_STREAM_END && (0 !== o.avail_in || i !== c.Z_FINISH && i !== c.Z_SYNC_FLUSH) || (\"string\" === this.options.to ? (n = u.utf8border(o.output, o.next_out), r = o.next_out - n, s = u.buf2string(o.output, n), o.next_out = r, o.avail_out = l - r, r && _.arraySet(o.output, o.output, n, r, 0), this.onData(s)) : this.onData(_.shrinkBuf(o.output, o.next_out)))), 0 === o.avail_in && 0 === o.avail_out && (d = !0);\n        } while ((0 < o.avail_in || 0 === o.avail_out) && a !== c.Z_STREAM_END);\n        return a === c.Z_STREAM_END && (i = c.Z_FINISH), i === c.Z_FINISH ? (a = f.inflateEnd(this.strm), this.onEnd(a), this.ended = !0, a === c.Z_OK) : i !== c.Z_SYNC_FLUSH || (this.onEnd(c.Z_OK), !(o.avail_out = 0));\n      }, s.prototype.onData = function (t) {\n        this.chunks.push(t);\n      }, s.prototype.onEnd = function (t) {\n        t === c.Z_OK && (\"string\" === this.options.to ? this.result = this.chunks.join(\"\") : this.result = _.flattenChunks(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg;\n      }, a.Inflate = s, a.inflate = o, a.inflateRaw = function (t, e) {\n        return (e = e || {}).raw = !0, o(t, e);\n      }, a.ungzip = o;\n    }, {\n      \"./utils/common\": 3,\n      \"./utils/strings\": 4,\n      \"./zlib/constants\": 6,\n      \"./zlib/gzheader\": 9,\n      \"./zlib/inflate\": 11,\n      \"./zlib/messages\": 13,\n      \"./zlib/zstream\": 15\n    }],\n    3: [function (t, e, a) {\n      \"use strict\";\n\n      var i = \"undefined\" != typeof Uint8Array && \"undefined\" != typeof Uint16Array && \"undefined\" != typeof Int32Array;\n      a.assign = function (t) {\n        for (var e, a, i = Array.prototype.slice.call(arguments, 1); i.length;) {\n          var n = i.shift();\n          if (n) {\n            if (\"object\" != _typeof(n)) throw new TypeError(n + \"must be non-object\");\n            for (var r in n) e = n, a = r, Object.prototype.hasOwnProperty.call(e, a) && (t[r] = n[r]);\n          }\n        }\n        return t;\n      }, a.shrinkBuf = function (t, e) {\n        return t.length === e ? t : t.subarray ? t.subarray(0, e) : (t.length = e, t);\n      };\n      var n = {\n          arraySet: function arraySet(t, e, a, i, n) {\n            if (e.subarray && t.subarray) t.set(e.subarray(a, a + i), n);else for (var r = 0; r < i; r++) t[n + r] = e[a + r];\n          },\n          flattenChunks: function flattenChunks(t) {\n            var e, a, i, n, r, s;\n            for (e = i = 0, a = t.length; e < a; e++) i += t[e].length;\n            for (s = new Uint8Array(i), e = n = 0, a = t.length; e < a; e++) r = t[e], s.set(r, n), n += r.length;\n            return s;\n          }\n        },\n        r = {\n          arraySet: function arraySet(t, e, a, i, n) {\n            for (var r = 0; r < i; r++) t[n + r] = e[a + r];\n          },\n          flattenChunks: function flattenChunks(t) {\n            return [].concat.apply([], t);\n          }\n        };\n      a.setTyped = function (t) {\n        t ? (a.Buf8 = Uint8Array, a.Buf16 = Uint16Array, a.Buf32 = Int32Array, a.assign(a, n)) : (a.Buf8 = Array, a.Buf16 = Array, a.Buf32 = Array, a.assign(a, r));\n      }, a.setTyped(i);\n    }, {}],\n    4: [function (t, e, a) {\n      \"use strict\";\n\n      var l = t(\"./common\"),\n        n = !0,\n        r = !0;\n      try {\n        String.fromCharCode.apply(null, [0]);\n      } catch (t) {\n        n = !1;\n      }\n      try {\n        String.fromCharCode.apply(null, new Uint8Array(1));\n      } catch (t) {\n        r = !1;\n      }\n      for (var h = new l.Buf8(256), i = 0; i < 256; i++) h[i] = 252 <= i ? 6 : 248 <= i ? 5 : 240 <= i ? 4 : 224 <= i ? 3 : 192 <= i ? 2 : 1;\n      function d(t, e) {\n        if (e < 65534 && (t.subarray && r || !t.subarray && n)) return String.fromCharCode.apply(null, l.shrinkBuf(t, e));\n        for (var a = \"\", i = 0; i < e; i++) a += String.fromCharCode(t[i]);\n        return a;\n      }\n      h[254] = h[254] = 1, a.string2buf = function (t) {\n        var e,\n          a,\n          i,\n          n,\n          r,\n          s = t.length,\n          o = 0;\n        for (n = 0; n < s; n++) 55296 == (64512 & (a = t.charCodeAt(n))) && n + 1 < s && 56320 == (64512 & (i = t.charCodeAt(n + 1))) && (a = 65536 + (a - 55296 << 10) + (i - 56320), n++), o += a < 128 ? 1 : a < 2048 ? 2 : a < 65536 ? 3 : 4;\n        for (e = new l.Buf8(o), n = r = 0; r < o; n++) 55296 == (64512 & (a = t.charCodeAt(n))) && n + 1 < s && 56320 == (64512 & (i = t.charCodeAt(n + 1))) && (a = 65536 + (a - 55296 << 10) + (i - 56320), n++), a < 128 ? e[r++] = a : (a < 2048 ? e[r++] = 192 | a >>> 6 : (a < 65536 ? e[r++] = 224 | a >>> 12 : (e[r++] = 240 | a >>> 18, e[r++] = 128 | a >>> 12 & 63), e[r++] = 128 | a >>> 6 & 63), e[r++] = 128 | 63 & a);\n        return e;\n      }, a.buf2binstring = function (t) {\n        return d(t, t.length);\n      }, a.binstring2buf = function (t) {\n        for (var e = new l.Buf8(t.length), a = 0, i = e.length; a < i; a++) e[a] = t.charCodeAt(a);\n        return e;\n      }, a.buf2string = function (t, e) {\n        var a,\n          i,\n          n,\n          r,\n          s = e || t.length,\n          o = new Array(2 * s);\n        for (a = i = 0; a < s;) if ((n = t[a++]) < 128) o[i++] = n;else if (4 < (r = h[n])) o[i++] = 65533, a += r - 1;else {\n          for (n &= 2 === r ? 31 : 3 === r ? 15 : 7; 1 < r && a < s;) n = n << 6 | 63 & t[a++], r--;\n          1 < r ? o[i++] = 65533 : n < 65536 ? o[i++] = n : (n -= 65536, o[i++] = 55296 | n >> 10 & 1023, o[i++] = 56320 | 1023 & n);\n        }\n        return d(o, i);\n      }, a.utf8border = function (t, e) {\n        var a;\n        for ((e = e || t.length) > t.length && (e = t.length), a = e - 1; 0 <= a && 128 == (192 & t[a]);) a--;\n        return a < 0 ? e : 0 === a ? e : a + h[t[a]] > e ? a : e;\n      };\n    }, {\n      \"./common\": 3\n    }],\n    5: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = function (t, e, a, i) {\n        for (var n = 65535 & t | 0, r = t >>> 16 & 65535 | 0, s = 0; 0 !== a;) {\n          for (a -= s = 2e3 < a ? 2e3 : a; r = r + (n = n + e[i++] | 0) | 0, --s;);\n          n %= 65521, r %= 65521;\n        }\n        return n | r << 16 | 0;\n      };\n    }, {}],\n    6: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = {\n        Z_NO_FLUSH: 0,\n        Z_PARTIAL_FLUSH: 1,\n        Z_SYNC_FLUSH: 2,\n        Z_FULL_FLUSH: 3,\n        Z_FINISH: 4,\n        Z_BLOCK: 5,\n        Z_TREES: 6,\n        Z_OK: 0,\n        Z_STREAM_END: 1,\n        Z_NEED_DICT: 2,\n        Z_ERRNO: -1,\n        Z_STREAM_ERROR: -2,\n        Z_DATA_ERROR: -3,\n        Z_BUF_ERROR: -5,\n        Z_NO_COMPRESSION: 0,\n        Z_BEST_SPEED: 1,\n        Z_BEST_COMPRESSION: 9,\n        Z_DEFAULT_COMPRESSION: -1,\n        Z_FILTERED: 1,\n        Z_HUFFMAN_ONLY: 2,\n        Z_RLE: 3,\n        Z_FIXED: 4,\n        Z_DEFAULT_STRATEGY: 0,\n        Z_BINARY: 0,\n        Z_TEXT: 1,\n        Z_UNKNOWN: 2,\n        Z_DEFLATED: 8\n      };\n    }, {}],\n    7: [function (t, e, a) {\n      \"use strict\";\n\n      var o = function () {\n        for (var t, e = [], a = 0; a < 256; a++) {\n          t = a;\n          for (var i = 0; i < 8; i++) t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;\n          e[a] = t;\n        }\n        return e;\n      }();\n      e.exports = function (t, e, a, i) {\n        var n = o,\n          r = i + a;\n        t ^= -1;\n        for (var s = i; s < r; s++) t = t >>> 8 ^ n[255 & (t ^ e[s])];\n        return -1 ^ t;\n      };\n    }, {}],\n    8: [function (t, e, a) {\n      \"use strict\";\n\n      var l,\n        _ = t(\"../utils/common\"),\n        h = t(\"./trees\"),\n        u = t(\"./adler32\"),\n        c = t(\"./crc32\"),\n        i = t(\"./messages\"),\n        d = 0,\n        f = 4,\n        b = 0,\n        g = -2,\n        m = -1,\n        w = 4,\n        n = 2,\n        p = 8,\n        v = 9,\n        r = 286,\n        s = 30,\n        o = 19,\n        k = 2 * r + 1,\n        y = 15,\n        x = 3,\n        z = 258,\n        B = z + x + 1,\n        S = 42,\n        E = 113,\n        A = 1,\n        Z = 2,\n        R = 3,\n        C = 4;\n      function N(t, e) {\n        return t.msg = i[e], e;\n      }\n      function O(t) {\n        return (t << 1) - (4 < t ? 9 : 0);\n      }\n      function D(t) {\n        for (var e = t.length; 0 <= --e;) t[e] = 0;\n      }\n      function I(t) {\n        var e = t.state,\n          a = e.pending;\n        a > t.avail_out && (a = t.avail_out), 0 !== a && (_.arraySet(t.output, e.pending_buf, e.pending_out, a, t.next_out), t.next_out += a, e.pending_out += a, t.total_out += a, t.avail_out -= a, e.pending -= a, 0 === e.pending && (e.pending_out = 0));\n      }\n      function U(t, e) {\n        h._tr_flush_block(t, 0 <= t.block_start ? t.block_start : -1, t.strstart - t.block_start, e), t.block_start = t.strstart, I(t.strm);\n      }\n      function T(t, e) {\n        t.pending_buf[t.pending++] = e;\n      }\n      function F(t, e) {\n        t.pending_buf[t.pending++] = e >>> 8 & 255, t.pending_buf[t.pending++] = 255 & e;\n      }\n      function L(t, e) {\n        var a,\n          i,\n          n = t.max_chain_length,\n          r = t.strstart,\n          s = t.prev_length,\n          o = t.nice_match,\n          l = t.strstart > t.w_size - B ? t.strstart - (t.w_size - B) : 0,\n          h = t.window,\n          d = t.w_mask,\n          f = t.prev,\n          _ = t.strstart + z,\n          u = h[r + s - 1],\n          c = h[r + s];\n        t.prev_length >= t.good_match && (n >>= 2), o > t.lookahead && (o = t.lookahead);\n        do {\n          if (h[(a = e) + s] === c && h[a + s - 1] === u && h[a] === h[r] && h[++a] === h[r + 1]) {\n            r += 2, a++;\n            do {} while (h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && r < _);\n            if (i = z - (_ - r), r = _ - z, s < i) {\n              if (t.match_start = e, o <= (s = i)) break;\n              u = h[r + s - 1], c = h[r + s];\n            }\n          }\n        } while ((e = f[e & d]) > l && 0 != --n);\n        return s <= t.lookahead ? s : t.lookahead;\n      }\n      function H(t) {\n        var e,\n          a,\n          i,\n          n,\n          r,\n          s,\n          o,\n          l,\n          h,\n          d,\n          f = t.w_size;\n        do {\n          if (n = t.window_size - t.lookahead - t.strstart, t.strstart >= f + (f - B)) {\n            for (_.arraySet(t.window, t.window, f, f, 0), t.match_start -= f, t.strstart -= f, t.block_start -= f, e = a = t.hash_size; i = t.head[--e], t.head[e] = f <= i ? i - f : 0, --a;);\n            for (e = a = f; i = t.prev[--e], t.prev[e] = f <= i ? i - f : 0, --a;);\n            n += f;\n          }\n          if (0 === t.strm.avail_in) break;\n          if (s = t.strm, o = t.window, l = t.strstart + t.lookahead, h = n, d = void 0, d = s.avail_in, h < d && (d = h), a = 0 === d ? 0 : (s.avail_in -= d, _.arraySet(o, s.input, s.next_in, d, l), 1 === s.state.wrap ? s.adler = u(s.adler, o, d, l) : 2 === s.state.wrap && (s.adler = c(s.adler, o, d, l)), s.next_in += d, s.total_in += d, d), t.lookahead += a, t.lookahead + t.insert >= x) for (r = t.strstart - t.insert, t.ins_h = t.window[r], t.ins_h = (t.ins_h << t.hash_shift ^ t.window[r + 1]) & t.hash_mask; t.insert && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[r + x - 1]) & t.hash_mask, t.prev[r & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = r, r++, t.insert--, !(t.lookahead + t.insert < x)););\n        } while (t.lookahead < B && 0 !== t.strm.avail_in);\n      }\n      function j(t, e) {\n        for (var a, i;;) {\n          if (t.lookahead < B) {\n            if (H(t), t.lookahead < B && e === d) return A;\n            if (0 === t.lookahead) break;\n          }\n          if (a = 0, t.lookahead >= x && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + x - 1]) & t.hash_mask, a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), 0 !== a && t.strstart - a <= t.w_size - B && (t.match_length = L(t, a)), t.match_length >= x) {\n            if (i = h._tr_tally(t, t.strstart - t.match_start, t.match_length - x), t.lookahead -= t.match_length, t.match_length <= t.max_lazy_match && t.lookahead >= x) {\n              for (t.match_length--; t.strstart++, t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + x - 1]) & t.hash_mask, a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart, 0 != --t.match_length;);\n              t.strstart++;\n            } else t.strstart += t.match_length, t.match_length = 0, t.ins_h = t.window[t.strstart], t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + 1]) & t.hash_mask;\n          } else i = h._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++;\n          if (i && (U(t, !1), 0 === t.strm.avail_out)) return A;\n        }\n        return t.insert = t.strstart < x - 1 ? t.strstart : x - 1, e === f ? (U(t, !0), 0 === t.strm.avail_out ? R : C) : t.last_lit && (U(t, !1), 0 === t.strm.avail_out) ? A : Z;\n      }\n      function K(t, e) {\n        for (var a, i, n;;) {\n          if (t.lookahead < B) {\n            if (H(t), t.lookahead < B && e === d) return A;\n            if (0 === t.lookahead) break;\n          }\n          if (a = 0, t.lookahead >= x && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + x - 1]) & t.hash_mask, a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), t.prev_length = t.match_length, t.prev_match = t.match_start, t.match_length = x - 1, 0 !== a && t.prev_length < t.max_lazy_match && t.strstart - a <= t.w_size - B && (t.match_length = L(t, a), t.match_length <= 5 && (1 === t.strategy || t.match_length === x && 4096 < t.strstart - t.match_start) && (t.match_length = x - 1)), t.prev_length >= x && t.match_length <= t.prev_length) {\n            for (n = t.strstart + t.lookahead - x, i = h._tr_tally(t, t.strstart - 1 - t.prev_match, t.prev_length - x), t.lookahead -= t.prev_length - 1, t.prev_length -= 2; ++t.strstart <= n && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + x - 1]) & t.hash_mask, a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), 0 != --t.prev_length;);\n            if (t.match_available = 0, t.match_length = x - 1, t.strstart++, i && (U(t, !1), 0 === t.strm.avail_out)) return A;\n          } else if (t.match_available) {\n            if ((i = h._tr_tally(t, 0, t.window[t.strstart - 1])) && U(t, !1), t.strstart++, t.lookahead--, 0 === t.strm.avail_out) return A;\n          } else t.match_available = 1, t.strstart++, t.lookahead--;\n        }\n        return t.match_available && (i = h._tr_tally(t, 0, t.window[t.strstart - 1]), t.match_available = 0), t.insert = t.strstart < x - 1 ? t.strstart : x - 1, e === f ? (U(t, !0), 0 === t.strm.avail_out ? R : C) : t.last_lit && (U(t, !1), 0 === t.strm.avail_out) ? A : Z;\n      }\n      function M(t, e, a, i, n) {\n        this.good_length = t, this.max_lazy = e, this.nice_length = a, this.max_chain = i, this.func = n;\n      }\n      function P() {\n        this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = p, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new _.Buf16(2 * k), this.dyn_dtree = new _.Buf16(2 * (2 * s + 1)), this.bl_tree = new _.Buf16(2 * (2 * o + 1)), D(this.dyn_ltree), D(this.dyn_dtree), D(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new _.Buf16(y + 1), this.heap = new _.Buf16(2 * r + 1), D(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new _.Buf16(2 * r + 1), D(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;\n      }\n      function Y(t) {\n        var e;\n        return t && t.state ? (t.total_in = t.total_out = 0, t.data_type = n, (e = t.state).pending = 0, e.pending_out = 0, e.wrap < 0 && (e.wrap = -e.wrap), e.status = e.wrap ? S : E, t.adler = 2 === e.wrap ? 0 : 1, e.last_flush = d, h._tr_init(e), b) : N(t, g);\n      }\n      function q(t) {\n        var e,\n          a = Y(t);\n        return a === b && ((e = t.state).window_size = 2 * e.w_size, D(e.head), e.max_lazy_match = l[e.level].max_lazy, e.good_match = l[e.level].good_length, e.nice_match = l[e.level].nice_length, e.max_chain_length = l[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = x - 1, e.match_available = 0, e.ins_h = 0), a;\n      }\n      function G(t, e, a, i, n, r) {\n        if (!t) return g;\n        var s = 1;\n        if (e === m && (e = 6), i < 0 ? (s = 0, i = -i) : 15 < i && (s = 2, i -= 16), n < 1 || v < n || a !== p || i < 8 || 15 < i || e < 0 || 9 < e || r < 0 || w < r) return N(t, g);\n        8 === i && (i = 9);\n        var o = new P();\n        return (t.state = o).strm = t, o.wrap = s, o.gzhead = null, o.w_bits = i, o.w_size = 1 << o.w_bits, o.w_mask = o.w_size - 1, o.hash_bits = n + 7, o.hash_size = 1 << o.hash_bits, o.hash_mask = o.hash_size - 1, o.hash_shift = ~~((o.hash_bits + x - 1) / x), o.window = new _.Buf8(2 * o.w_size), o.head = new _.Buf16(o.hash_size), o.prev = new _.Buf16(o.w_size), o.lit_bufsize = 1 << n + 6, o.pending_buf_size = 4 * o.lit_bufsize, o.pending_buf = new _.Buf8(o.pending_buf_size), o.d_buf = 1 * o.lit_bufsize, o.l_buf = 3 * o.lit_bufsize, o.level = e, o.strategy = r, o.method = a, q(t);\n      }\n      l = [new M(0, 0, 0, 0, function (t, e) {\n        var a = 65535;\n        for (a > t.pending_buf_size - 5 && (a = t.pending_buf_size - 5);;) {\n          if (t.lookahead <= 1) {\n            if (H(t), 0 === t.lookahead && e === d) return A;\n            if (0 === t.lookahead) break;\n          }\n          t.strstart += t.lookahead, t.lookahead = 0;\n          var i = t.block_start + a;\n          if ((0 === t.strstart || t.strstart >= i) && (t.lookahead = t.strstart - i, t.strstart = i, U(t, !1), 0 === t.strm.avail_out)) return A;\n          if (t.strstart - t.block_start >= t.w_size - B && (U(t, !1), 0 === t.strm.avail_out)) return A;\n        }\n        return t.insert = 0, e === f ? (U(t, !0), 0 === t.strm.avail_out ? R : C) : (t.strstart > t.block_start && (U(t, !1), t.strm.avail_out), A);\n      }), new M(4, 4, 8, 4, j), new M(4, 5, 16, 8, j), new M(4, 6, 32, 32, j), new M(4, 4, 16, 16, K), new M(8, 16, 32, 32, K), new M(8, 16, 128, 128, K), new M(8, 32, 128, 256, K), new M(32, 128, 258, 1024, K), new M(32, 258, 258, 4096, K)], a.deflateInit = function (t, e) {\n        return G(t, e, p, 15, 8, 0);\n      }, a.deflateInit2 = G, a.deflateReset = q, a.deflateResetKeep = Y, a.deflateSetHeader = function (t, e) {\n        return t && t.state ? 2 !== t.state.wrap ? g : (t.state.gzhead = e, b) : g;\n      }, a.deflate = function (t, e) {\n        var a, i, n, r;\n        if (!t || !t.state || 5 < e || e < 0) return t ? N(t, g) : g;\n        if (i = t.state, !t.output || !t.input && 0 !== t.avail_in || 666 === i.status && e !== f) return N(t, 0 === t.avail_out ? -5 : g);\n        if (i.strm = t, a = i.last_flush, i.last_flush = e, i.status === S) if (2 === i.wrap) t.adler = 0, T(i, 31), T(i, 139), T(i, 8), i.gzhead ? (T(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), T(i, 255 & i.gzhead.time), T(i, i.gzhead.time >> 8 & 255), T(i, i.gzhead.time >> 16 & 255), T(i, i.gzhead.time >> 24 & 255), T(i, 9 === i.level ? 2 : 2 <= i.strategy || i.level < 2 ? 4 : 0), T(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && (T(i, 255 & i.gzhead.extra.length), T(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (t.adler = c(t.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69) : (T(i, 0), T(i, 0), T(i, 0), T(i, 0), T(i, 0), T(i, 9 === i.level ? 2 : 2 <= i.strategy || i.level < 2 ? 4 : 0), T(i, 3), i.status = E);else {\n          var s = p + (i.w_bits - 8 << 4) << 8;\n          s |= (2 <= i.strategy || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3) << 6, 0 !== i.strstart && (s |= 32), s += 31 - s % 31, i.status = E, F(i, s), 0 !== i.strstart && (F(i, t.adler >>> 16), F(i, 65535 & t.adler)), t.adler = 1;\n        }\n        if (69 === i.status) if (i.gzhead.extra) {\n          for (n = i.pending; i.gzindex < (65535 & i.gzhead.extra.length) && (i.pending !== i.pending_buf_size || (i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), I(t), n = i.pending, i.pending !== i.pending_buf_size));) T(i, 255 & i.gzhead.extra[i.gzindex]), i.gzindex++;\n          i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = 73);\n        } else i.status = 73;\n        if (73 === i.status) if (i.gzhead.name) {\n          n = i.pending;\n          do {\n            if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), I(t), n = i.pending, i.pending === i.pending_buf_size)) {\n              r = 1;\n              break;\n            }\n            T(i, r = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0);\n          } while (0 !== r);\n          i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), 0 === r && (i.gzindex = 0, i.status = 91);\n        } else i.status = 91;\n        if (91 === i.status) if (i.gzhead.comment) {\n          n = i.pending;\n          do {\n            if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), I(t), n = i.pending, i.pending === i.pending_buf_size)) {\n              r = 1;\n              break;\n            }\n            T(i, r = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0);\n          } while (0 !== r);\n          i.gzhead.hcrc && i.pending > n && (t.adler = c(t.adler, i.pending_buf, i.pending - n, n)), 0 === r && (i.status = 103);\n        } else i.status = 103;\n        if (103 === i.status && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && I(t), i.pending + 2 <= i.pending_buf_size && (T(i, 255 & t.adler), T(i, t.adler >> 8 & 255), t.adler = 0, i.status = E)) : i.status = E), 0 !== i.pending) {\n          if (I(t), 0 === t.avail_out) return i.last_flush = -1, b;\n        } else if (0 === t.avail_in && O(e) <= O(a) && e !== f) return N(t, -5);\n        if (666 === i.status && 0 !== t.avail_in) return N(t, -5);\n        if (0 !== t.avail_in || 0 !== i.lookahead || e !== d && 666 !== i.status) {\n          var o = 2 === i.strategy ? function (t, e) {\n            for (var a;;) {\n              if (0 === t.lookahead && (H(t), 0 === t.lookahead)) {\n                if (e === d) return A;\n                break;\n              }\n              if (t.match_length = 0, a = h._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++, a && (U(t, !1), 0 === t.strm.avail_out)) return A;\n            }\n            return t.insert = 0, e === f ? (U(t, !0), 0 === t.strm.avail_out ? R : C) : t.last_lit && (U(t, !1), 0 === t.strm.avail_out) ? A : Z;\n          }(i, e) : 3 === i.strategy ? function (t, e) {\n            for (var a, i, n, r, s = t.window;;) {\n              if (t.lookahead <= z) {\n                if (H(t), t.lookahead <= z && e === d) return A;\n                if (0 === t.lookahead) break;\n              }\n              if (t.match_length = 0, t.lookahead >= x && 0 < t.strstart && (i = s[n = t.strstart - 1]) === s[++n] && i === s[++n] && i === s[++n]) {\n                r = t.strstart + z;\n                do {} while (i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && n < r);\n                t.match_length = z - (r - n), t.match_length > t.lookahead && (t.match_length = t.lookahead);\n              }\n              if (t.match_length >= x ? (a = h._tr_tally(t, 1, t.match_length - x), t.lookahead -= t.match_length, t.strstart += t.match_length, t.match_length = 0) : (a = h._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++), a && (U(t, !1), 0 === t.strm.avail_out)) return A;\n            }\n            return t.insert = 0, e === f ? (U(t, !0), 0 === t.strm.avail_out ? R : C) : t.last_lit && (U(t, !1), 0 === t.strm.avail_out) ? A : Z;\n          }(i, e) : l[i.level].func(i, e);\n          if (o !== R && o !== C || (i.status = 666), o === A || o === R) return 0 === t.avail_out && (i.last_flush = -1), b;\n          if (o === Z && (1 === e ? h._tr_align(i) : 5 !== e && (h._tr_stored_block(i, 0, 0, !1), 3 === e && (D(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), I(t), 0 === t.avail_out)) return i.last_flush = -1, b;\n        }\n        return e !== f ? b : i.wrap <= 0 ? 1 : (2 === i.wrap ? (T(i, 255 & t.adler), T(i, t.adler >> 8 & 255), T(i, t.adler >> 16 & 255), T(i, t.adler >> 24 & 255), T(i, 255 & t.total_in), T(i, t.total_in >> 8 & 255), T(i, t.total_in >> 16 & 255), T(i, t.total_in >> 24 & 255)) : (F(i, t.adler >>> 16), F(i, 65535 & t.adler)), I(t), 0 < i.wrap && (i.wrap = -i.wrap), 0 !== i.pending ? b : 1);\n      }, a.deflateEnd = function (t) {\n        var e;\n        return t && t.state ? (e = t.state.status) !== S && 69 !== e && 73 !== e && 91 !== e && 103 !== e && e !== E && 666 !== e ? N(t, g) : (t.state = null, e === E ? N(t, -3) : b) : g;\n      }, a.deflateSetDictionary = function (t, e) {\n        var a,\n          i,\n          n,\n          r,\n          s,\n          o,\n          l,\n          h,\n          d = e.length;\n        if (!t || !t.state) return g;\n        if (2 === (r = (a = t.state).wrap) || 1 === r && a.status !== S || a.lookahead) return g;\n        for (1 === r && (t.adler = u(t.adler, e, d, 0)), a.wrap = 0, d >= a.w_size && (0 === r && (D(a.head), a.strstart = 0, a.block_start = 0, a.insert = 0), h = new _.Buf8(a.w_size), _.arraySet(h, e, d - a.w_size, a.w_size, 0), e = h, d = a.w_size), s = t.avail_in, o = t.next_in, l = t.input, t.avail_in = d, t.next_in = 0, t.input = e, H(a); a.lookahead >= x;) {\n          for (i = a.strstart, n = a.lookahead - (x - 1); a.ins_h = (a.ins_h << a.hash_shift ^ a.window[i + x - 1]) & a.hash_mask, a.prev[i & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = i, i++, --n;);\n          a.strstart = i, a.lookahead = x - 1, H(a);\n        }\n        return a.strstart += a.lookahead, a.block_start = a.strstart, a.insert = a.lookahead, a.lookahead = 0, a.match_length = a.prev_length = x - 1, a.match_available = 0, t.next_in = o, t.input = l, t.avail_in = s, a.wrap = r, b;\n      }, a.deflateInfo = \"pako deflate (from Nodeca project)\";\n    }, {\n      \"../utils/common\": 3,\n      \"./adler32\": 5,\n      \"./crc32\": 7,\n      \"./messages\": 13,\n      \"./trees\": 14\n    }],\n    9: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = function () {\n        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = \"\", this.comment = \"\", this.hcrc = 0, this.done = !1;\n      };\n    }, {}],\n    10: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = function (t, e) {\n        var a, i, n, r, s, o, l, h, d, f, _, u, c, b, g, m, w, p, v, k, y, x, z, B, S;\n        a = t.state, i = t.next_in, B = t.input, n = i + (t.avail_in - 5), r = t.next_out, S = t.output, s = r - (e - t.avail_out), o = r + (t.avail_out - 257), l = a.dmax, h = a.wsize, d = a.whave, f = a.wnext, _ = a.window, u = a.hold, c = a.bits, b = a.lencode, g = a.distcode, m = (1 << a.lenbits) - 1, w = (1 << a.distbits) - 1;\n        t: do {\n          c < 15 && (u += B[i++] << c, c += 8, u += B[i++] << c, c += 8), p = b[u & m];\n          e: for (;;) {\n            if (u >>>= v = p >>> 24, c -= v, 0 === (v = p >>> 16 & 255)) S[r++] = 65535 & p;else {\n              if (!(16 & v)) {\n                if (0 == (64 & v)) {\n                  p = b[(65535 & p) + (u & (1 << v) - 1)];\n                  continue e;\n                }\n                if (32 & v) {\n                  a.mode = 12;\n                  break t;\n                }\n                t.msg = \"invalid literal/length code\", a.mode = 30;\n                break t;\n              }\n              k = 65535 & p, (v &= 15) && (c < v && (u += B[i++] << c, c += 8), k += u & (1 << v) - 1, u >>>= v, c -= v), c < 15 && (u += B[i++] << c, c += 8, u += B[i++] << c, c += 8), p = g[u & w];\n              a: for (;;) {\n                if (u >>>= v = p >>> 24, c -= v, !(16 & (v = p >>> 16 & 255))) {\n                  if (0 == (64 & v)) {\n                    p = g[(65535 & p) + (u & (1 << v) - 1)];\n                    continue a;\n                  }\n                  t.msg = \"invalid distance code\", a.mode = 30;\n                  break t;\n                }\n                if (y = 65535 & p, c < (v &= 15) && (u += B[i++] << c, (c += 8) < v && (u += B[i++] << c, c += 8)), l < (y += u & (1 << v) - 1)) {\n                  t.msg = \"invalid distance too far back\", a.mode = 30;\n                  break t;\n                }\n                if (u >>>= v, c -= v, (v = r - s) < y) {\n                  if (d < (v = y - v) && a.sane) {\n                    t.msg = \"invalid distance too far back\", a.mode = 30;\n                    break t;\n                  }\n                  if (z = _, (x = 0) === f) {\n                    if (x += h - v, v < k) {\n                      for (k -= v; S[r++] = _[x++], --v;);\n                      x = r - y, z = S;\n                    }\n                  } else if (f < v) {\n                    if (x += h + f - v, (v -= f) < k) {\n                      for (k -= v; S[r++] = _[x++], --v;);\n                      if (x = 0, f < k) {\n                        for (k -= v = f; S[r++] = _[x++], --v;);\n                        x = r - y, z = S;\n                      }\n                    }\n                  } else if (x += f - v, v < k) {\n                    for (k -= v; S[r++] = _[x++], --v;);\n                    x = r - y, z = S;\n                  }\n                  for (; 2 < k;) S[r++] = z[x++], S[r++] = z[x++], S[r++] = z[x++], k -= 3;\n                  k && (S[r++] = z[x++], 1 < k && (S[r++] = z[x++]));\n                } else {\n                  for (x = r - y; S[r++] = S[x++], S[r++] = S[x++], S[r++] = S[x++], 2 < (k -= 3););\n                  k && (S[r++] = S[x++], 1 < k && (S[r++] = S[x++]));\n                }\n                break;\n              }\n            }\n            break;\n          }\n        } while (i < n && r < o);\n        i -= k = c >> 3, u &= (1 << (c -= k << 3)) - 1, t.next_in = i, t.next_out = r, t.avail_in = i < n ? n - i + 5 : 5 - (i - n), t.avail_out = r < o ? o - r + 257 : 257 - (r - o), a.hold = u, a.bits = c;\n      };\n    }, {}],\n    11: [function (t, e, a) {\n      \"use strict\";\n\n      var Z = t(\"../utils/common\"),\n        R = t(\"./adler32\"),\n        C = t(\"./crc32\"),\n        N = t(\"./inffast\"),\n        O = t(\"./inftrees\"),\n        D = 1,\n        I = 2,\n        U = 0,\n        T = -2,\n        F = 1,\n        i = 852,\n        n = 592;\n      function L(t) {\n        return (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24);\n      }\n      function r() {\n        this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Z.Buf16(320), this.work = new Z.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;\n      }\n      function s(t) {\n        var e;\n        return t && t.state ? (e = t.state, t.total_in = t.total_out = e.total = 0, t.msg = \"\", e.wrap && (t.adler = 1 & e.wrap), e.mode = F, e.last = 0, e.havedict = 0, e.dmax = 32768, e.head = null, e.hold = 0, e.bits = 0, e.lencode = e.lendyn = new Z.Buf32(i), e.distcode = e.distdyn = new Z.Buf32(n), e.sane = 1, e.back = -1, U) : T;\n      }\n      function o(t) {\n        var e;\n        return t && t.state ? ((e = t.state).wsize = 0, e.whave = 0, e.wnext = 0, s(t)) : T;\n      }\n      function l(t, e) {\n        var a, i;\n        return t && t.state ? (i = t.state, e < 0 ? (a = 0, e = -e) : (a = 1 + (e >> 4), e < 48 && (e &= 15)), e && (e < 8 || 15 < e) ? T : (null !== i.window && i.wbits !== e && (i.window = null), i.wrap = a, i.wbits = e, o(t))) : T;\n      }\n      function h(t, e) {\n        var a, i;\n        return t ? (i = new r(), (t.state = i).window = null, (a = l(t, e)) !== U && (t.state = null), a) : T;\n      }\n      var d,\n        f,\n        _ = !0;\n      function H(t) {\n        if (_) {\n          var e;\n          for (d = new Z.Buf32(512), f = new Z.Buf32(32), e = 0; e < 144;) t.lens[e++] = 8;\n          for (; e < 256;) t.lens[e++] = 9;\n          for (; e < 280;) t.lens[e++] = 7;\n          for (; e < 288;) t.lens[e++] = 8;\n          for (O(D, t.lens, 0, 288, d, 0, t.work, {\n            bits: 9\n          }), e = 0; e < 32;) t.lens[e++] = 5;\n          O(I, t.lens, 0, 32, f, 0, t.work, {\n            bits: 5\n          }), _ = !1;\n        }\n        t.lencode = d, t.lenbits = 9, t.distcode = f, t.distbits = 5;\n      }\n      function j(t, e, a, i) {\n        var n,\n          r = t.state;\n        return null === r.window && (r.wsize = 1 << r.wbits, r.wnext = 0, r.whave = 0, r.window = new Z.Buf8(r.wsize)), i >= r.wsize ? (Z.arraySet(r.window, e, a - r.wsize, r.wsize, 0), r.wnext = 0, r.whave = r.wsize) : (i < (n = r.wsize - r.wnext) && (n = i), Z.arraySet(r.window, e, a - i, n, r.wnext), (i -= n) ? (Z.arraySet(r.window, e, a - i, i, 0), r.wnext = i, r.whave = r.wsize) : (r.wnext += n, r.wnext === r.wsize && (r.wnext = 0), r.whave < r.wsize && (r.whave += n))), 0;\n      }\n      a.inflateReset = o, a.inflateReset2 = l, a.inflateResetKeep = s, a.inflateInit = function (t) {\n        return h(t, 15);\n      }, a.inflateInit2 = h, a.inflate = function (t, e) {\n        var a,\n          i,\n          n,\n          r,\n          s,\n          o,\n          l,\n          h,\n          d,\n          f,\n          _,\n          u,\n          c,\n          b,\n          g,\n          m,\n          w,\n          p,\n          v,\n          k,\n          y,\n          x,\n          z,\n          B,\n          S = 0,\n          E = new Z.Buf8(4),\n          A = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];\n        if (!t || !t.state || !t.output || !t.input && 0 !== t.avail_in) return T;\n        12 === (a = t.state).mode && (a.mode = 13), s = t.next_out, n = t.output, l = t.avail_out, r = t.next_in, i = t.input, o = t.avail_in, h = a.hold, d = a.bits, f = o, _ = l, x = U;\n        t: for (;;) switch (a.mode) {\n          case F:\n            if (0 === a.wrap) {\n              a.mode = 13;\n              break;\n            }\n            for (; d < 16;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if (2 & a.wrap && 35615 === h) {\n              E[a.check = 0] = 255 & h, E[1] = h >>> 8 & 255, a.check = C(a.check, E, 2, 0), d = h = 0, a.mode = 2;\n              break;\n            }\n            if (a.flags = 0, a.head && (a.head.done = !1), !(1 & a.wrap) || (((255 & h) << 8) + (h >> 8)) % 31) {\n              t.msg = \"incorrect header check\", a.mode = 30;\n              break;\n            }\n            if (8 != (15 & h)) {\n              t.msg = \"unknown compression method\", a.mode = 30;\n              break;\n            }\n            if (d -= 4, y = 8 + (15 & (h >>>= 4)), 0 === a.wbits) a.wbits = y;else if (y > a.wbits) {\n              t.msg = \"invalid window size\", a.mode = 30;\n              break;\n            }\n            a.dmax = 1 << y, t.adler = a.check = 1, a.mode = 512 & h ? 10 : 12, d = h = 0;\n            break;\n          case 2:\n            for (; d < 16;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if (a.flags = h, 8 != (255 & a.flags)) {\n              t.msg = \"unknown compression method\", a.mode = 30;\n              break;\n            }\n            if (57344 & a.flags) {\n              t.msg = \"unknown header flags set\", a.mode = 30;\n              break;\n            }\n            a.head && (a.head.text = h >> 8 & 1), 512 & a.flags && (E[0] = 255 & h, E[1] = h >>> 8 & 255, a.check = C(a.check, E, 2, 0)), d = h = 0, a.mode = 3;\n          case 3:\n            for (; d < 32;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            a.head && (a.head.time = h), 512 & a.flags && (E[0] = 255 & h, E[1] = h >>> 8 & 255, E[2] = h >>> 16 & 255, E[3] = h >>> 24 & 255, a.check = C(a.check, E, 4, 0)), d = h = 0, a.mode = 4;\n          case 4:\n            for (; d < 16;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            a.head && (a.head.xflags = 255 & h, a.head.os = h >> 8), 512 & a.flags && (E[0] = 255 & h, E[1] = h >>> 8 & 255, a.check = C(a.check, E, 2, 0)), d = h = 0, a.mode = 5;\n          case 5:\n            if (1024 & a.flags) {\n              for (; d < 16;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              a.length = h, a.head && (a.head.extra_len = h), 512 & a.flags && (E[0] = 255 & h, E[1] = h >>> 8 & 255, a.check = C(a.check, E, 2, 0)), d = h = 0;\n            } else a.head && (a.head.extra = null);\n            a.mode = 6;\n          case 6:\n            if (1024 & a.flags && (o < (u = a.length) && (u = o), u && (a.head && (y = a.head.extra_len - a.length, a.head.extra || (a.head.extra = new Array(a.head.extra_len)), Z.arraySet(a.head.extra, i, r, u, y)), 512 & a.flags && (a.check = C(a.check, i, u, r)), o -= u, r += u, a.length -= u), a.length)) break t;\n            a.length = 0, a.mode = 7;\n          case 7:\n            if (2048 & a.flags) {\n              if (0 === o) break t;\n              for (u = 0; y = i[r + u++], a.head && y && a.length < 65536 && (a.head.name += String.fromCharCode(y)), y && u < o;);\n              if (512 & a.flags && (a.check = C(a.check, i, u, r)), o -= u, r += u, y) break t;\n            } else a.head && (a.head.name = null);\n            a.length = 0, a.mode = 8;\n          case 8:\n            if (4096 & a.flags) {\n              if (0 === o) break t;\n              for (u = 0; y = i[r + u++], a.head && y && a.length < 65536 && (a.head.comment += String.fromCharCode(y)), y && u < o;);\n              if (512 & a.flags && (a.check = C(a.check, i, u, r)), o -= u, r += u, y) break t;\n            } else a.head && (a.head.comment = null);\n            a.mode = 9;\n          case 9:\n            if (512 & a.flags) {\n              for (; d < 16;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              if (h !== (65535 & a.check)) {\n                t.msg = \"header crc mismatch\", a.mode = 30;\n                break;\n              }\n              d = h = 0;\n            }\n            a.head && (a.head.hcrc = a.flags >> 9 & 1, a.head.done = !0), t.adler = a.check = 0, a.mode = 12;\n            break;\n          case 10:\n            for (; d < 32;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            t.adler = a.check = L(h), d = h = 0, a.mode = 11;\n          case 11:\n            if (0 === a.havedict) return t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, 2;\n            t.adler = a.check = 1, a.mode = 12;\n          case 12:\n            if (5 === e || 6 === e) break t;\n          case 13:\n            if (a.last) {\n              h >>>= 7 & d, d -= 7 & d, a.mode = 27;\n              break;\n            }\n            for (; d < 3;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            switch (a.last = 1 & h, d -= 1, 3 & (h >>>= 1)) {\n              case 0:\n                a.mode = 14;\n                break;\n              case 1:\n                if (H(a), a.mode = 20, 6 !== e) break;\n                h >>>= 2, d -= 2;\n                break t;\n              case 2:\n                a.mode = 17;\n                break;\n              case 3:\n                t.msg = \"invalid block type\", a.mode = 30;\n            }\n            h >>>= 2, d -= 2;\n            break;\n          case 14:\n            for (h >>>= 7 & d, d -= 7 & d; d < 32;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if ((65535 & h) != (h >>> 16 ^ 65535)) {\n              t.msg = \"invalid stored block lengths\", a.mode = 30;\n              break;\n            }\n            if (a.length = 65535 & h, d = h = 0, a.mode = 15, 6 === e) break t;\n          case 15:\n            a.mode = 16;\n          case 16:\n            if (u = a.length) {\n              if (o < u && (u = o), l < u && (u = l), 0 === u) break t;\n              Z.arraySet(n, i, r, u, s), o -= u, r += u, l -= u, s += u, a.length -= u;\n              break;\n            }\n            a.mode = 12;\n            break;\n          case 17:\n            for (; d < 14;) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if (a.nlen = 257 + (31 & h), h >>>= 5, d -= 5, a.ndist = 1 + (31 & h), h >>>= 5, d -= 5, a.ncode = 4 + (15 & h), h >>>= 4, d -= 4, 286 < a.nlen || 30 < a.ndist) {\n              t.msg = \"too many length or distance symbols\", a.mode = 30;\n              break;\n            }\n            a.have = 0, a.mode = 18;\n          case 18:\n            for (; a.have < a.ncode;) {\n              for (; d < 3;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              a.lens[A[a.have++]] = 7 & h, h >>>= 3, d -= 3;\n            }\n            for (; a.have < 19;) a.lens[A[a.have++]] = 0;\n            if (a.lencode = a.lendyn, a.lenbits = 7, z = {\n              bits: a.lenbits\n            }, x = O(0, a.lens, 0, 19, a.lencode, 0, a.work, z), a.lenbits = z.bits, x) {\n              t.msg = \"invalid code lengths set\", a.mode = 30;\n              break;\n            }\n            a.have = 0, a.mode = 19;\n          case 19:\n            for (; a.have < a.nlen + a.ndist;) {\n              for (; m = (S = a.lencode[h & (1 << a.lenbits) - 1]) >>> 16 & 255, w = 65535 & S, !((g = S >>> 24) <= d);) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              if (w < 16) h >>>= g, d -= g, a.lens[a.have++] = w;else {\n                if (16 === w) {\n                  for (B = g + 2; d < B;) {\n                    if (0 === o) break t;\n                    o--, h += i[r++] << d, d += 8;\n                  }\n                  if (h >>>= g, d -= g, 0 === a.have) {\n                    t.msg = \"invalid bit length repeat\", a.mode = 30;\n                    break;\n                  }\n                  y = a.lens[a.have - 1], u = 3 + (3 & h), h >>>= 2, d -= 2;\n                } else if (17 === w) {\n                  for (B = g + 3; d < B;) {\n                    if (0 === o) break t;\n                    o--, h += i[r++] << d, d += 8;\n                  }\n                  d -= g, y = 0, u = 3 + (7 & (h >>>= g)), h >>>= 3, d -= 3;\n                } else {\n                  for (B = g + 7; d < B;) {\n                    if (0 === o) break t;\n                    o--, h += i[r++] << d, d += 8;\n                  }\n                  d -= g, y = 0, u = 11 + (127 & (h >>>= g)), h >>>= 7, d -= 7;\n                }\n                if (a.have + u > a.nlen + a.ndist) {\n                  t.msg = \"invalid bit length repeat\", a.mode = 30;\n                  break;\n                }\n                for (; u--;) a.lens[a.have++] = y;\n              }\n            }\n            if (30 === a.mode) break;\n            if (0 === a.lens[256]) {\n              t.msg = \"invalid code -- missing end-of-block\", a.mode = 30;\n              break;\n            }\n            if (a.lenbits = 9, z = {\n              bits: a.lenbits\n            }, x = O(D, a.lens, 0, a.nlen, a.lencode, 0, a.work, z), a.lenbits = z.bits, x) {\n              t.msg = \"invalid literal/lengths set\", a.mode = 30;\n              break;\n            }\n            if (a.distbits = 6, a.distcode = a.distdyn, z = {\n              bits: a.distbits\n            }, x = O(I, a.lens, a.nlen, a.ndist, a.distcode, 0, a.work, z), a.distbits = z.bits, x) {\n              t.msg = \"invalid distances set\", a.mode = 30;\n              break;\n            }\n            if (a.mode = 20, 6 === e) break t;\n          case 20:\n            a.mode = 21;\n          case 21:\n            if (6 <= o && 258 <= l) {\n              t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, N(t, _), s = t.next_out, n = t.output, l = t.avail_out, r = t.next_in, i = t.input, o = t.avail_in, h = a.hold, d = a.bits, 12 === a.mode && (a.back = -1);\n              break;\n            }\n            for (a.back = 0; m = (S = a.lencode[h & (1 << a.lenbits) - 1]) >>> 16 & 255, w = 65535 & S, !((g = S >>> 24) <= d);) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if (m && 0 == (240 & m)) {\n              for (p = g, v = m, k = w; m = (S = a.lencode[k + ((h & (1 << p + v) - 1) >> p)]) >>> 16 & 255, w = 65535 & S, !(p + (g = S >>> 24) <= d);) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              h >>>= p, d -= p, a.back += p;\n            }\n            if (h >>>= g, d -= g, a.back += g, a.length = w, 0 === m) {\n              a.mode = 26;\n              break;\n            }\n            if (32 & m) {\n              a.back = -1, a.mode = 12;\n              break;\n            }\n            if (64 & m) {\n              t.msg = \"invalid literal/length code\", a.mode = 30;\n              break;\n            }\n            a.extra = 15 & m, a.mode = 22;\n          case 22:\n            if (a.extra) {\n              for (B = a.extra; d < B;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              a.length += h & (1 << a.extra) - 1, h >>>= a.extra, d -= a.extra, a.back += a.extra;\n            }\n            a.was = a.length, a.mode = 23;\n          case 23:\n            for (; m = (S = a.distcode[h & (1 << a.distbits) - 1]) >>> 16 & 255, w = 65535 & S, !((g = S >>> 24) <= d);) {\n              if (0 === o) break t;\n              o--, h += i[r++] << d, d += 8;\n            }\n            if (0 == (240 & m)) {\n              for (p = g, v = m, k = w; m = (S = a.distcode[k + ((h & (1 << p + v) - 1) >> p)]) >>> 16 & 255, w = 65535 & S, !(p + (g = S >>> 24) <= d);) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              h >>>= p, d -= p, a.back += p;\n            }\n            if (h >>>= g, d -= g, a.back += g, 64 & m) {\n              t.msg = \"invalid distance code\", a.mode = 30;\n              break;\n            }\n            a.offset = w, a.extra = 15 & m, a.mode = 24;\n          case 24:\n            if (a.extra) {\n              for (B = a.extra; d < B;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              a.offset += h & (1 << a.extra) - 1, h >>>= a.extra, d -= a.extra, a.back += a.extra;\n            }\n            if (a.offset > a.dmax) {\n              t.msg = \"invalid distance too far back\", a.mode = 30;\n              break;\n            }\n            a.mode = 25;\n          case 25:\n            if (0 === l) break t;\n            if (u = _ - l, a.offset > u) {\n              if ((u = a.offset - u) > a.whave && a.sane) {\n                t.msg = \"invalid distance too far back\", a.mode = 30;\n                break;\n              }\n              u > a.wnext ? (u -= a.wnext, c = a.wsize - u) : c = a.wnext - u, u > a.length && (u = a.length), b = a.window;\n            } else b = n, c = s - a.offset, u = a.length;\n            for (l < u && (u = l), l -= u, a.length -= u; n[s++] = b[c++], --u;);\n            0 === a.length && (a.mode = 21);\n            break;\n          case 26:\n            if (0 === l) break t;\n            n[s++] = a.length, l--, a.mode = 21;\n            break;\n          case 27:\n            if (a.wrap) {\n              for (; d < 32;) {\n                if (0 === o) break t;\n                o--, h |= i[r++] << d, d += 8;\n              }\n              if (_ -= l, t.total_out += _, a.total += _, _ && (t.adler = a.check = a.flags ? C(a.check, n, _, s - _) : R(a.check, n, _, s - _)), _ = l, (a.flags ? h : L(h)) !== a.check) {\n                t.msg = \"incorrect data check\", a.mode = 30;\n                break;\n              }\n              d = h = 0;\n            }\n            a.mode = 28;\n          case 28:\n            if (a.wrap && a.flags) {\n              for (; d < 32;) {\n                if (0 === o) break t;\n                o--, h += i[r++] << d, d += 8;\n              }\n              if (h !== (4294967295 & a.total)) {\n                t.msg = \"incorrect length check\", a.mode = 30;\n                break;\n              }\n              d = h = 0;\n            }\n            a.mode = 29;\n          case 29:\n            x = 1;\n            break t;\n          case 30:\n            x = -3;\n            break t;\n          case 31:\n            return -4;\n          case 32:\n          default:\n            return T;\n        }\n        return t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, (a.wsize || _ !== t.avail_out && a.mode < 30 && (a.mode < 27 || 4 !== e)) && j(t, t.output, t.next_out, _ - t.avail_out) ? (a.mode = 31, -4) : (f -= t.avail_in, _ -= t.avail_out, t.total_in += f, t.total_out += _, a.total += _, a.wrap && _ && (t.adler = a.check = a.flags ? C(a.check, n, _, t.next_out - _) : R(a.check, n, _, t.next_out - _)), t.data_type = a.bits + (a.last ? 64 : 0) + (12 === a.mode ? 128 : 0) + (20 === a.mode || 15 === a.mode ? 256 : 0), (0 === f && 0 === _ || 4 === e) && x === U && (x = -5), x);\n      }, a.inflateEnd = function (t) {\n        if (!t || !t.state) return T;\n        var e = t.state;\n        return e.window && (e.window = null), t.state = null, U;\n      }, a.inflateGetHeader = function (t, e) {\n        var a;\n        return t && t.state ? 0 == (2 & (a = t.state).wrap) ? T : ((a.head = e).done = !1, U) : T;\n      }, a.inflateSetDictionary = function (t, e) {\n        var a,\n          i = e.length;\n        return t && t.state ? 0 !== (a = t.state).wrap && 11 !== a.mode ? T : 11 === a.mode && R(1, e, i, 0) !== a.check ? -3 : j(t, e, i, i) ? (a.mode = 31, -4) : (a.havedict = 1, U) : T;\n      }, a.inflateInfo = \"pako inflate (from Nodeca project)\";\n    }, {\n      \"../utils/common\": 3,\n      \"./adler32\": 5,\n      \"./crc32\": 7,\n      \"./inffast\": 10,\n      \"./inftrees\": 12\n    }],\n    12: [function (t, e, a) {\n      \"use strict\";\n\n      var D = t(\"../utils/common\"),\n        I = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],\n        U = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],\n        T = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],\n        F = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];\n      e.exports = function (t, e, a, i, n, r, s, o) {\n        var l,\n          h,\n          d,\n          f,\n          _,\n          u,\n          c,\n          b,\n          g,\n          m = o.bits,\n          w = 0,\n          p = 0,\n          v = 0,\n          k = 0,\n          y = 0,\n          x = 0,\n          z = 0,\n          B = 0,\n          S = 0,\n          E = 0,\n          A = null,\n          Z = 0,\n          R = new D.Buf16(16),\n          C = new D.Buf16(16),\n          N = null,\n          O = 0;\n        for (w = 0; w <= 15; w++) R[w] = 0;\n        for (p = 0; p < i; p++) R[e[a + p]]++;\n        for (y = m, k = 15; 1 <= k && 0 === R[k]; k--);\n        if (k < y && (y = k), 0 === k) return n[r++] = 20971520, n[r++] = 20971520, o.bits = 1, 0;\n        for (v = 1; v < k && 0 === R[v]; v++);\n        for (y < v && (y = v), w = B = 1; w <= 15; w++) if (B <<= 1, (B -= R[w]) < 0) return -1;\n        if (0 < B && (0 === t || 1 !== k)) return -1;\n        for (C[1] = 0, w = 1; w < 15; w++) C[w + 1] = C[w] + R[w];\n        for (p = 0; p < i; p++) 0 !== e[a + p] && (s[C[e[a + p]]++] = p);\n        if (0 === t ? (A = N = s, u = 19) : 1 === t ? (A = I, Z -= 257, N = U, O -= 257, u = 256) : (A = T, N = F, u = -1), w = v, _ = r, z = p = E = 0, d = -1, f = (S = 1 << (x = y)) - 1, 1 === t && 852 < S || 2 === t && 592 < S) return 1;\n        for (;;) {\n          for (c = w - z, s[p] < u ? (b = 0, g = s[p]) : s[p] > u ? (b = N[O + s[p]], g = A[Z + s[p]]) : (b = 96, g = 0), l = 1 << w - z, v = h = 1 << x; n[_ + (E >> z) + (h -= l)] = c << 24 | b << 16 | g | 0, 0 !== h;);\n          for (l = 1 << w - 1; E & l;) l >>= 1;\n          if (0 !== l ? (E &= l - 1, E += l) : E = 0, p++, 0 == --R[w]) {\n            if (w === k) break;\n            w = e[a + s[p]];\n          }\n          if (y < w && (E & f) !== d) {\n            for (0 === z && (z = y), _ += v, B = 1 << (x = w - z); x + z < k && !((B -= R[x + z]) <= 0);) x++, B <<= 1;\n            if (S += 1 << x, 1 === t && 852 < S || 2 === t && 592 < S) return 1;\n            n[d = E & f] = y << 24 | x << 16 | _ - r | 0;\n          }\n        }\n        return 0 !== E && (n[_ + E] = w - z << 24 | 64 << 16 | 0), o.bits = y, 0;\n      };\n    }, {\n      \"../utils/common\": 3\n    }],\n    13: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = {\n        2: \"need dictionary\",\n        1: \"stream end\",\n        0: \"\",\n        \"-1\": \"file error\",\n        \"-2\": \"stream error\",\n        \"-3\": \"data error\",\n        \"-4\": \"insufficient memory\",\n        \"-5\": \"buffer error\",\n        \"-6\": \"incompatible version\"\n      };\n    }, {}],\n    14: [function (t, e, a) {\n      \"use strict\";\n\n      var l = t(\"../utils/common\"),\n        o = 0,\n        h = 1;\n      function i(t) {\n        for (var e = t.length; 0 <= --e;) t[e] = 0;\n      }\n      var d = 0,\n        s = 29,\n        f = 256,\n        _ = f + 1 + s,\n        u = 30,\n        c = 19,\n        g = 2 * _ + 1,\n        m = 15,\n        n = 16,\n        b = 7,\n        w = 256,\n        p = 16,\n        v = 17,\n        k = 18,\n        y = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],\n        x = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],\n        z = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],\n        B = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n        S = new Array(2 * (_ + 2));\n      i(S);\n      var E = new Array(2 * u);\n      i(E);\n      var A = new Array(512);\n      i(A);\n      var Z = new Array(256);\n      i(Z);\n      var R = new Array(s);\n      i(R);\n      var C,\n        N,\n        O,\n        D = new Array(u);\n      function I(t, e, a, i, n) {\n        this.static_tree = t, this.extra_bits = e, this.extra_base = a, this.elems = i, this.max_length = n, this.has_stree = t && t.length;\n      }\n      function r(t, e) {\n        this.dyn_tree = t, this.max_code = 0, this.stat_desc = e;\n      }\n      function U(t) {\n        return t < 256 ? A[t] : A[256 + (t >>> 7)];\n      }\n      function T(t, e) {\n        t.pending_buf[t.pending++] = 255 & e, t.pending_buf[t.pending++] = e >>> 8 & 255;\n      }\n      function F(t, e, a) {\n        t.bi_valid > n - a ? (t.bi_buf |= e << t.bi_valid & 65535, T(t, t.bi_buf), t.bi_buf = e >> n - t.bi_valid, t.bi_valid += a - n) : (t.bi_buf |= e << t.bi_valid & 65535, t.bi_valid += a);\n      }\n      function L(t, e, a) {\n        F(t, a[2 * e], a[2 * e + 1]);\n      }\n      function H(t, e) {\n        for (var a = 0; a |= 1 & t, t >>>= 1, a <<= 1, 0 < --e;);\n        return a >>> 1;\n      }\n      function j(t, e, a) {\n        var i,\n          n,\n          r = new Array(m + 1),\n          s = 0;\n        for (i = 1; i <= m; i++) r[i] = s = s + a[i - 1] << 1;\n        for (n = 0; n <= e; n++) {\n          var o = t[2 * n + 1];\n          0 !== o && (t[2 * n] = H(r[o]++, o));\n        }\n      }\n      function K(t) {\n        var e;\n        for (e = 0; e < _; e++) t.dyn_ltree[2 * e] = 0;\n        for (e = 0; e < u; e++) t.dyn_dtree[2 * e] = 0;\n        for (e = 0; e < c; e++) t.bl_tree[2 * e] = 0;\n        t.dyn_ltree[2 * w] = 1, t.opt_len = t.static_len = 0, t.last_lit = t.matches = 0;\n      }\n      function M(t) {\n        8 < t.bi_valid ? T(t, t.bi_buf) : 0 < t.bi_valid && (t.pending_buf[t.pending++] = t.bi_buf), t.bi_buf = 0, t.bi_valid = 0;\n      }\n      function P(t, e, a, i) {\n        var n = 2 * e,\n          r = 2 * a;\n        return t[n] < t[r] || t[n] === t[r] && i[e] <= i[a];\n      }\n      function Y(t, e, a) {\n        for (var i = t.heap[a], n = a << 1; n <= t.heap_len && (n < t.heap_len && P(e, t.heap[n + 1], t.heap[n], t.depth) && n++, !P(e, i, t.heap[n], t.depth));) t.heap[a] = t.heap[n], a = n, n <<= 1;\n        t.heap[a] = i;\n      }\n      function q(t, e, a) {\n        var i,\n          n,\n          r,\n          s,\n          o = 0;\n        if (0 !== t.last_lit) for (; i = t.pending_buf[t.d_buf + 2 * o] << 8 | t.pending_buf[t.d_buf + 2 * o + 1], n = t.pending_buf[t.l_buf + o], o++, 0 === i ? L(t, n, e) : (L(t, (r = Z[n]) + f + 1, e), 0 !== (s = y[r]) && F(t, n -= R[r], s), L(t, r = U(--i), a), 0 !== (s = x[r]) && F(t, i -= D[r], s)), o < t.last_lit;);\n        L(t, w, e);\n      }\n      function G(t, e) {\n        var a,\n          i,\n          n,\n          r = e.dyn_tree,\n          s = e.stat_desc.static_tree,\n          o = e.stat_desc.has_stree,\n          l = e.stat_desc.elems,\n          h = -1;\n        for (t.heap_len = 0, t.heap_max = g, a = 0; a < l; a++) 0 !== r[2 * a] ? (t.heap[++t.heap_len] = h = a, t.depth[a] = 0) : r[2 * a + 1] = 0;\n        for (; t.heap_len < 2;) r[2 * (n = t.heap[++t.heap_len] = h < 2 ? ++h : 0)] = 1, t.depth[n] = 0, t.opt_len--, o && (t.static_len -= s[2 * n + 1]);\n        for (e.max_code = h, a = t.heap_len >> 1; 1 <= a; a--) Y(t, r, a);\n        for (n = l; a = t.heap[1], t.heap[1] = t.heap[t.heap_len--], Y(t, r, 1), i = t.heap[1], t.heap[--t.heap_max] = a, t.heap[--t.heap_max] = i, r[2 * n] = r[2 * a] + r[2 * i], t.depth[n] = (t.depth[a] >= t.depth[i] ? t.depth[a] : t.depth[i]) + 1, r[2 * a + 1] = r[2 * i + 1] = n, t.heap[1] = n++, Y(t, r, 1), 2 <= t.heap_len;);\n        t.heap[--t.heap_max] = t.heap[1], function (t, e) {\n          var a,\n            i,\n            n,\n            r,\n            s,\n            o,\n            l = e.dyn_tree,\n            h = e.max_code,\n            d = e.stat_desc.static_tree,\n            f = e.stat_desc.has_stree,\n            _ = e.stat_desc.extra_bits,\n            u = e.stat_desc.extra_base,\n            c = e.stat_desc.max_length,\n            b = 0;\n          for (r = 0; r <= m; r++) t.bl_count[r] = 0;\n          for (l[2 * t.heap[t.heap_max] + 1] = 0, a = t.heap_max + 1; a < g; a++) c < (r = l[2 * l[2 * (i = t.heap[a]) + 1] + 1] + 1) && (r = c, b++), l[2 * i + 1] = r, h < i || (t.bl_count[r]++, s = 0, u <= i && (s = _[i - u]), o = l[2 * i], t.opt_len += o * (r + s), f && (t.static_len += o * (d[2 * i + 1] + s)));\n          if (0 !== b) {\n            do {\n              for (r = c - 1; 0 === t.bl_count[r];) r--;\n              t.bl_count[r]--, t.bl_count[r + 1] += 2, t.bl_count[c]--, b -= 2;\n            } while (0 < b);\n            for (r = c; 0 !== r; r--) for (i = t.bl_count[r]; 0 !== i;) h < (n = t.heap[--a]) || (l[2 * n + 1] !== r && (t.opt_len += (r - l[2 * n + 1]) * l[2 * n], l[2 * n + 1] = r), i--);\n          }\n        }(t, e), j(r, h, t.bl_count);\n      }\n      function X(t, e, a) {\n        var i,\n          n,\n          r = -1,\n          s = e[1],\n          o = 0,\n          l = 7,\n          h = 4;\n        for (0 === s && (l = 138, h = 3), e[2 * (a + 1) + 1] = 65535, i = 0; i <= a; i++) n = s, s = e[2 * (i + 1) + 1], ++o < l && n === s || (o < h ? t.bl_tree[2 * n] += o : 0 !== n ? (n !== r && t.bl_tree[2 * n]++, t.bl_tree[2 * p]++) : o <= 10 ? t.bl_tree[2 * v]++ : t.bl_tree[2 * k]++, r = n, (o = 0) === s ? (l = 138, h = 3) : n === s ? (l = 6, h = 3) : (l = 7, h = 4));\n      }\n      function W(t, e, a) {\n        var i,\n          n,\n          r = -1,\n          s = e[1],\n          o = 0,\n          l = 7,\n          h = 4;\n        for (0 === s && (l = 138, h = 3), i = 0; i <= a; i++) if (n = s, s = e[2 * (i + 1) + 1], !(++o < l && n === s)) {\n          if (o < h) for (; L(t, n, t.bl_tree), 0 != --o;);else 0 !== n ? (n !== r && (L(t, n, t.bl_tree), o--), L(t, p, t.bl_tree), F(t, o - 3, 2)) : o <= 10 ? (L(t, v, t.bl_tree), F(t, o - 3, 3)) : (L(t, k, t.bl_tree), F(t, o - 11, 7));\n          r = n, (o = 0) === s ? (l = 138, h = 3) : n === s ? (l = 6, h = 3) : (l = 7, h = 4);\n        }\n      }\n      i(D);\n      var J = !1;\n      function Q(t, e, a, i) {\n        var n, r, s, o;\n        F(t, (d << 1) + (i ? 1 : 0), 3), r = e, s = a, o = !0, M(n = t), o && (T(n, s), T(n, ~s)), l.arraySet(n.pending_buf, n.window, r, s, n.pending), n.pending += s;\n      }\n      a._tr_init = function (t) {\n        J || (function () {\n          var t,\n            e,\n            a,\n            i,\n            n,\n            r = new Array(m + 1);\n          for (i = a = 0; i < s - 1; i++) for (R[i] = a, t = 0; t < 1 << y[i]; t++) Z[a++] = i;\n          for (Z[a - 1] = i, i = n = 0; i < 16; i++) for (D[i] = n, t = 0; t < 1 << x[i]; t++) A[n++] = i;\n          for (n >>= 7; i < u; i++) for (D[i] = n << 7, t = 0; t < 1 << x[i] - 7; t++) A[256 + n++] = i;\n          for (e = 0; e <= m; e++) r[e] = 0;\n          for (t = 0; t <= 143;) S[2 * t + 1] = 8, t++, r[8]++;\n          for (; t <= 255;) S[2 * t + 1] = 9, t++, r[9]++;\n          for (; t <= 279;) S[2 * t + 1] = 7, t++, r[7]++;\n          for (; t <= 287;) S[2 * t + 1] = 8, t++, r[8]++;\n          for (j(S, _ + 1, r), t = 0; t < u; t++) E[2 * t + 1] = 5, E[2 * t] = H(t, 5);\n          C = new I(S, y, f + 1, _, m), N = new I(E, x, 0, u, m), O = new I(new Array(0), z, 0, c, b);\n        }(), J = !0), t.l_desc = new r(t.dyn_ltree, C), t.d_desc = new r(t.dyn_dtree, N), t.bl_desc = new r(t.bl_tree, O), t.bi_buf = 0, t.bi_valid = 0, K(t);\n      }, a._tr_stored_block = Q, a._tr_flush_block = function (t, e, a, i) {\n        var n,\n          r,\n          s = 0;\n        0 < t.level ? (2 === t.strm.data_type && (t.strm.data_type = function (t) {\n          var e,\n            a = 4093624447;\n          for (e = 0; e <= 31; e++, a >>>= 1) if (1 & a && 0 !== t.dyn_ltree[2 * e]) return o;\n          if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return h;\n          for (e = 32; e < f; e++) if (0 !== t.dyn_ltree[2 * e]) return h;\n          return o;\n        }(t)), G(t, t.l_desc), G(t, t.d_desc), s = function (t) {\n          var e;\n          for (X(t, t.dyn_ltree, t.l_desc.max_code), X(t, t.dyn_dtree, t.d_desc.max_code), G(t, t.bl_desc), e = c - 1; 3 <= e && 0 === t.bl_tree[2 * B[e] + 1]; e--);\n          return t.opt_len += 3 * (e + 1) + 5 + 5 + 4, e;\n        }(t), n = t.opt_len + 3 + 7 >>> 3, (r = t.static_len + 3 + 7 >>> 3) <= n && (n = r)) : n = r = a + 5, a + 4 <= n && -1 !== e ? Q(t, e, a, i) : 4 === t.strategy || r === n ? (F(t, 2 + (i ? 1 : 0), 3), q(t, S, E)) : (F(t, 4 + (i ? 1 : 0), 3), function (t, e, a, i) {\n          var n;\n          for (F(t, e - 257, 5), F(t, a - 1, 5), F(t, i - 4, 4), n = 0; n < i; n++) F(t, t.bl_tree[2 * B[n] + 1], 3);\n          W(t, t.dyn_ltree, e - 1), W(t, t.dyn_dtree, a - 1);\n        }(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, s + 1), q(t, t.dyn_ltree, t.dyn_dtree)), K(t), i && M(t);\n      }, a._tr_tally = function (t, e, a) {\n        return t.pending_buf[t.d_buf + 2 * t.last_lit] = e >>> 8 & 255, t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & e, t.pending_buf[t.l_buf + t.last_lit] = 255 & a, t.last_lit++, 0 === e ? t.dyn_ltree[2 * a]++ : (t.matches++, e--, t.dyn_ltree[2 * (Z[a] + f + 1)]++, t.dyn_dtree[2 * U(e)]++), t.last_lit === t.lit_bufsize - 1;\n      }, a._tr_align = function (t) {\n        var e;\n        F(t, 2, 3), L(t, w, S), 16 === (e = t).bi_valid ? (T(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : 8 <= e.bi_valid && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8);\n      };\n    }, {\n      \"../utils/common\": 3\n    }],\n    15: [function (t, e, a) {\n      \"use strict\";\n\n      e.exports = function () {\n        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = \"\", this.state = null, this.data_type = 2, this.adler = 0;\n      };\n    }, {}],\n    \"/\": [function (t, e, a) {\n      \"use strict\";\n\n      var i = {};\n      (0, t(\"./lib/utils/common\").assign)(i, t(\"./lib/deflate\"), t(\"./lib/inflate\"), t(\"./lib/zlib/constants\")), e.exports = i;\n    }, {\n      \"./lib/deflate\": 1,\n      \"./lib/inflate\": 2,\n      \"./lib/utils/common\": 3,\n      \"./lib/zlib/constants\": 6\n    }]\n  }, {}, [])(\"/\");\n});\n\n/***/ }),\n\n/***/ \"./src/worker/services/HashService.js\":\n/*!********************************************!*\\\n  !*** ./src/worker/services/HashService.js ***!\n  \\********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ HashService; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/technicalServices/DOMUtils */ \"./src/main/technicalServices/DOMUtils.js\");\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar HashService = /*#__PURE__*/function () {\n  function HashService() {\n    _classCallCheck(this, HashService);\n  }\n  return _createClass(HashService, null, [{\n    key: \"hashSha256\",\n    value: function hashSha256(data, callback) {\n      // Prefer WebCrypto if available\n      if (_main_technicalServices_DOMUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isSubtleCryptoSupported()) {\n        var encoder = new TextEncoder();\n        var bytes = encoder.encode(data);\n        crypto.subtle.digest(\"SHA-256\", bytes).then(function (hashBuffer) {\n          var hashArray = Array.from(new Uint8Array(hashBuffer));\n          var hex = hashArray.map(function (b) {\n            return b.toString(16).padStart(2, '0');\n          }).join('');\n          callback(null, hex);\n        })[\"catch\"](function (err) {\n          return callback(err);\n        });\n        return;\n      }\n\n      // ---- Fallback: pure JS SHA-256 ----\n      try {\n        _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('HashService: SubtleCrypto is not supported using fallback hashing');\n        var hex = _sha256_fallback(data);\n        callback(null, hex);\n      } catch (e) {\n        callback(e);\n      }\n    }\n  }]);\n}(); // Highly optimized, compact SHA-256 fallback (no dependencies)\n\nfunction _sha256_fallback(str) {\n  // Convert string to UTF-8 bytes\n  var utf8 = [];\n  for (var i = 0, l = str.length; i < l; i++) {\n    var c = str.charCodeAt(i);\n    if (c < 0x80) utf8.push(c);else if (c < 0x800) {\n      utf8.push(0xc0 | c >> 6, 0x80 | c & 0x3f);\n    } else if (c < 0xd800 || c >= 0xe000) {\n      utf8.push(0xe0 | c >> 12, 0x80 | c >> 6 & 0x3f, 0x80 | c & 0x3f);\n    } else {\n      // surrogate pair\n      i++;\n      c = 0x10000 + ((c & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n      utf8.push(0xf0 | c >> 18, 0x80 | c >> 12 & 0x3f, 0x80 | c >> 6 & 0x3f, 0x80 | c & 0x3f);\n    }\n  }\n  var words = [];\n  for (var _i = 0; _i < utf8.length; _i++) {\n    words[_i >> 2] |= utf8[_i] << (3 - (_i & 3) << 3);\n  }\n  var bitLen = utf8.length * 8;\n  words[bitLen >> 5] |= 0x80 << 24 - bitLen % 32;\n  words[(bitLen + 64 >> 9 << 4) + 15] = bitLen;\n  var w = new Array(64);\n\n  // Initial hash values\n  var H = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n\n  // Round constants\n  var K = [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2];\n  for (var _i2 = 0; _i2 < words.length; _i2 += 16) {\n    var a = H[0],\n      b = H[1],\n      _c = H[2],\n      d = H[3],\n      e = H[4],\n      f = H[5],\n      g = H[6],\n      h = H[7];\n    for (var j = 0; j < 64; j++) {\n      if (j < 16) {\n        w[j] = words[_i2 + j] | 0;\n      } else {\n        var s0 = (w[j - 15] >>> 7 | w[j - 15] << 25) ^ (w[j - 15] >>> 18 | w[j - 15] << 14) ^ w[j - 15] >>> 3;\n        var s1 = (w[j - 2] >>> 17 | w[j - 2] << 15) ^ (w[j - 2] >>> 19 | w[j - 2] << 13) ^ w[j - 2] >>> 10;\n        w[j] = w[j - 16] + s0 + w[j - 7] + s1 | 0;\n      }\n      var S1 = (e >>> 6 | e << 26) ^ (e >>> 11 | e << 21) ^ (e >>> 25 | e << 7);\n      var ch = e & f ^ ~e & g;\n      var temp1 = h + S1 + ch + K[j] + w[j] | 0;\n      var S0 = (a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10);\n      var maj = a & b ^ a & _c ^ b & _c;\n      var temp2 = S0 + maj | 0;\n      h = g;\n      g = f;\n      f = e;\n      e = d + temp1 | 0;\n      d = _c;\n      _c = b;\n      b = a;\n      a = temp1 + temp2 | 0;\n    }\n    H[0] = H[0] + a | 0;\n    H[1] = H[1] + b | 0;\n    H[2] = H[2] + _c | 0;\n    H[3] = H[3] + d | 0;\n    H[4] = H[4] + e | 0;\n    H[5] = H[5] + f | 0;\n    H[6] = H[6] + g | 0;\n    H[7] = H[7] + h | 0;\n  }\n\n  // produce hex output\n  var hex = \"\";\n  for (var _i3 = 0; _i3 < H.length; _i3++) {\n    hex += (\"00000000\" + (H[_i3] >>> 0).toString(16)).slice(-8);\n  }\n  return hex;\n}\n\n/***/ }),\n\n/***/ \"./src/worker/utils/Btoa.js\":\n/*!**********************************!*\\\n  !*** ./src/worker/utils/Btoa.js ***!\n  \\**********************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   btoa: function() { return /* binding */ btoa; }\n/* harmony export */ });\n/**\n * The implementation is taken from https://github.com/beatgammit/base64-js\n * I took only the btoa since there is no need in atob and for this reason I did not\n * embed all the library\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/* eslint-disable no-cond-assign, no-bitwise, no-mixed-operators */\nvar btoa = self.btoa ? self.btoa.bind(self) : function (input) {\n  var str = String(input);\n  var output = '';\n  for (\n  // initialize result and counter\n  var block, charCode, idx = 0, map = chars;\n  // if the next str index does not exist:\n  //   change the mapping table to \"=\"\n  //   check if d has no fractional digits\n  str.charAt(idx | 0) || (map = '=', idx % 1);\n  // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n  output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new Error(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n};\n\n/* eslint-enable no-cond-assign, no-bitwise, no-mixed-operators */\n\n/***/ }),\n\n/***/ \"./src/worker/utils/WorkerUtils.js\":\n/*!*****************************************!*\\\n  !*** ./src/worker/utils/WorkerUtils.js ***!\n  \\*****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WorkerUtils; }\n/* harmony export */ });\n/* harmony import */ var _main_infrastructure_HttpRequestFactory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/infrastructure/HttpRequestFactory */ \"./src/main/infrastructure/HttpRequestFactory.js\");\n/* harmony import */ var _main_const_hashing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../main/const/hashing */ \"./src/main/const/hashing.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar WorkerUtils = /*#__PURE__*/function () {\n  function WorkerUtils() {\n    _classCallCheck(this, WorkerUtils);\n  }\n  return _createClass(WorkerUtils, null, [{\n    key: \"isUndefinedNull\",\n    value: function isUndefinedNull(x) {\n      return x === null || x === undefined || typeof x === 'undefined';\n    }\n  }, {\n    key: \"getPostUrl\",\n    value: function getPostUrl(url, method, data, onSuccess, onError, acceptNoResponse, timeout, hashedBody, realAPI) {\n      var httpRequest = _main_infrastructure_HttpRequestFactory__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create();\n      try {\n        if (httpRequest instanceof self.XMLHttpRequest) {\n          httpRequest.open(method, url, true);\n          httpRequest.timeout = timeout || 12000;\n          if (hashedBody) {\n            // custom header must be set after request opened and before it has sent\n            httpRequest.setRequestHeader(_main_const_hashing__WEBPACK_IMPORTED_MODULE_1__.sha256HeaderName, hashedBody);\n          }\n          if (realAPI) {\n            // In case we have a fallback into recovery URL we are adding header of the original route.\n            httpRequest.setRequestHeader(_main_const_hashing__WEBPACK_IMPORTED_MODULE_1__.REAL_API, realAPI);\n          }\n          httpRequest.onload = function () {\n            if (httpRequest.status === 200 || httpRequest.status === 204 && acceptNoResponse) {\n              onSuccess && onSuccess(httpRequest.responseText);\n            } else {\n              var status = httpRequest.status;\n              if (WorkerUtils.isLikelyBlocked(httpRequest)) {\n                status = WorkerUtils.AD_BLOCK_STATUS_CODE;\n              }\n              onError && onError(httpRequest.responseText, status, httpRequest.statusText);\n            }\n          };\n          httpRequest.onerror = function () {\n            var status = httpRequest.status;\n            if (WorkerUtils.isLikelyBlocked(httpRequest)) {\n              status = WorkerUtils.AD_BLOCK_STATUS_CODE;\n            }\n            onError && onError(httpRequest.responseText, status, httpRequest.statusText);\n          };\n          httpRequest.ontimeout = function () {\n            onError && onError('timeout');\n          };\n          httpRequest.onabort = function () {\n            onError && onError('abort');\n          };\n          httpRequest.send(data);\n        } else {\n          httpRequest.onload = function () {\n            if (httpRequest.status === 200 || httpRequest.status === 204 && acceptNoResponse) {\n              onSuccess && onSuccess(httpRequest.responseText);\n            } else {\n              var status = httpRequest.status;\n              if (WorkerUtils.isLikelyBlocked(httpRequest)) {\n                status = WorkerUtils.AD_BLOCK_STATUS_CODE;\n              }\n              onError && onError(httpRequest.responseText, status, httpRequest.statusText);\n            }\n          };\n          httpRequest.onerror = function () {\n            var status = httpRequest.status;\n            if (WorkerUtils.isLikelyBlocked(httpRequest)) {\n              status = WorkerUtils.AD_BLOCK_STATUS_CODE;\n              // console.warn(\"Request likely blocked by AdBlock or network filter (onload check).\");\n            }\n            onError && onError(httpRequest.responseText, status, httpRequest.statusText);\n          };\n          httpRequest.onprogress = function () {};\n          httpRequest.ontimeout = function () {\n            onError && onError('timeout');\n          };\n          httpRequest.open(method, url, true);\n          if (hashedBody) {\n            httpRequest.setRequestHeader(_main_const_hashing__WEBPACK_IMPORTED_MODULE_1__.sha256HeaderName, hashedBody);\n          }\n          if (realAPI) {\n            // In case we have a fallback into recovery URL we are adding header of the original route.\n            httpRequest.setRequestHeader(_main_const_hashing__WEBPACK_IMPORTED_MODULE_1__.REAL_API, realAPI);\n          }\n          httpRequest.timeout = timeout || 12000;\n\n          // This is a workaround in IE<10 bug that aborts Cross-Domain XHR sometimes. See Commit a2ccf977b75cabce7582b4cbb45a06caa5d08f86\n          setTimeout(function () {\n            httpRequest.send(data);\n          }, 0);\n        }\n      } catch (e) {\n        /* eslint-disable */\n        throw e;\n        /* eslint-enable */\n      }\n    }\n  }, {\n    key: \"isLikelyBlocked\",\n    value: function isLikelyBlocked(xhr) {\n      // If the browser is offline, it's not adblock, it's network.\n      if (!navigator.onLine) {\n        return false;\n      }\n\n      // If the request failed with status 0 and browser is online, likely blocked.\n      return xhr.status === 0 || xhr.responseText === null || xhr.responseText === \"\";\n    }\n  }]);\n}();\n_defineProperty(WorkerUtils, \"AD_BLOCK_STATUS_CODE\", -243);\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/DataPacker.js\":\n/*!**************************************!*\\\n  !*** ./src/worker/wup/DataPacker.js ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DataPacker; }\n/* harmony export */ });\n/* harmony import */ var _utils_Btoa__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/Btoa */ \"./src/worker/utils/Btoa.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar msgpack = __webpack_require__(/*! ../libs/msgpack.min */ \"./src/worker/libs/msgpack.min.js\");\nvar pako = __webpack_require__(/*! ../libs/pako.min */ \"./src/worker/libs/pako.min.js\");\nvar DataPacker = /*#__PURE__*/function () {\n  function DataPacker() {\n    _classCallCheck(this, DataPacker);\n    this._compressData = function (data) {\n      var compressed = msgpack.encode(data);\n      compressed = pako.deflateRaw(compressed, {\n        to: 'string'\n      });\n      // exports.btoa is the browser one if exist or the one we bring with us (Btoa.js) if not\n      return (0,_utils_Btoa__WEBPACK_IMPORTED_MODULE_0__.btoa)(compressed);\n    };\n  }\n  return _createClass(DataPacker, [{\n    key: \"pack\",\n    value: function pack(data) {\n      return this._getCompressedData(data);\n    }\n  }, {\n    key: \"_getCompressedData\",\n    value: function _getCompressedData(data) {\n      return this._compressData(data);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/WupStatisticsService.js\":\n/*!************************************************!*\\\n  !*** ./src/worker/wup/WupStatisticsService.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupStatisticsService; }\n/* harmony export */ });\n/* harmony import */ var _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../main/technicalServices/log/Logger */ \"./src/main/technicalServices/log/Logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar WupStatisticsService = /*#__PURE__*/function () {\n  function WupStatisticsService(statisticsLogIntervalMs) {\n    _classCallCheck(this, WupStatisticsService);\n    this._statisticsLogIntervalMs = statisticsLogIntervalMs;\n    this.resetCounters();\n    this._setPeriodicStatisticsLog();\n  }\n  return _createClass(WupStatisticsService, [{\n    key: \"getSentWupsCount\",\n    value: function getSentWupsCount() {\n      return this._sentWupsCount;\n    }\n  }, {\n    key: \"incrementSentWupCount\",\n    value: function incrementSentWupCount() {\n      this._sentWupsCount++;\n      this._sentWupsInCurrentIntervalCount++;\n    }\n  }, {\n    key: \"updateSettings\",\n    value: function updateSettings(statisticsLogInterval) {\n      this._statisticsLogIntervalMs = statisticsLogInterval;\n      this._setPeriodicStatisticsLog();\n    }\n  }, {\n    key: \"resetCounters\",\n    value: function resetCounters() {\n      this._sentWupsCount = 0;\n      this._sentWupsInCurrentIntervalCount = 0;\n    }\n\n    /**\n     * Stop the wup statistics service. This will stop the periodic statistics log\n     */\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this._stopPeriodicStatisticsLog();\n    }\n  }, {\n    key: \"_writeStatisticsLog\",\n    value: function _writeStatisticsLog() {\n      // If no wups were sent we don't want to log the statistics\n      if (this._sentWupsInCurrentIntervalCount === 0) {\n        return;\n      }\n      _main_technicalServices_log_Logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debug(\"Sent \".concat(this._sentWupsInCurrentIntervalCount, \" wup in the last \").concat(this._statisticsLogIntervalMs, \" ms. Sent a total of \").concat(this._sentWupsCount, \" in the session\"));\n      this._sentWupsInCurrentIntervalCount = 0;\n    }\n  }, {\n    key: \"_stopPeriodicStatisticsLog\",\n    value: function _stopPeriodicStatisticsLog() {\n      if (this._periodicLogIntervalId) {\n        clearInterval(this._periodicLogIntervalId);\n      }\n    }\n  }, {\n    key: \"_setPeriodicStatisticsLog\",\n    value: function _setPeriodicStatisticsLog() {\n      this._stopPeriodicStatisticsLog();\n      this._periodicLogIntervalId = setInterval(this._writeStatisticsLog.bind(this), this._statisticsLogIntervalMs);\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/dispatching/WupDispatchConstantRateCalculator.js\":\n/*!*************************************************************************!*\\\n  !*** ./src/worker/wup/dispatching/WupDispatchConstantRateCalculator.js ***!\n  \\*************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupDispatchConstantRateCalculator; }\n/* harmony export */ });\n/* harmony import */ var _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WupDispatchRateType */ \"./src/worker/wup/dispatching/WupDispatchRateType.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Class is responsible for calculating the wup dispatch constant rate.\n */\n\nvar WupDispatchConstantRateCalculator = /*#__PURE__*/function () {\n  function WupDispatchConstantRateCalculator(wupDispatchRateSettings) {\n    _classCallCheck(this, WupDispatchConstantRateCalculator);\n    this.updateSettings(wupDispatchRateSettings);\n  }\n\n  /**\n   * Get the next dispatch rate\n   * @returns {*}\n   */\n  return _createClass(WupDispatchConstantRateCalculator, [{\n    key: \"getRate\",\n    value: function getRate() {\n      return this._currentRate;\n    }\n  }, {\n    key: \"updateSettings\",\n    value: function updateSettings(wupDispatchRateSettings) {\n      if (wupDispatchRateSettings.type !== _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__.WupDispatchRateType.constant) {\n        throw new Error('Invalid settings provided to constant calculator');\n      }\n      this._currentRate = wupDispatchRateSettings.initialRateValueMs;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/dispatching/WupDispatchDynamicRateCalculator.js\":\n/*!************************************************************************!*\\\n  !*** ./src/worker/wup/dispatching/WupDispatchDynamicRateCalculator.js ***!\n  \\************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupDispatchDynamicRateCalculator; }\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Class is responsible for calculating the wup dispatch dynamic rate.\n */\nvar WupDispatchDynamicRateCalculator = /*#__PURE__*/function () {\n  function WupDispatchDynamicRateCalculator(wupServerSessionState) {\n    _classCallCheck(this, WupDispatchDynamicRateCalculator);\n    this._wupServerSessionState = wupServerSessionState;\n  }\n\n  /**\n   * Get the next dispatch rate\n   * @returns {*}\n   */\n  return _createClass(WupDispatchDynamicRateCalculator, [{\n    key: \"getRate\",\n    value: function getRate() {\n      return this._wupServerSessionState.getWupDispatchRate();\n    }\n  }, {\n    key: \"updateSettings\",\n    value: function updateSettings() {}\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/dispatching/WupDispatchIncrementalRateCalculator.js\":\n/*!****************************************************************************!*\\\n  !*** ./src/worker/wup/dispatching/WupDispatchIncrementalRateCalculator.js ***!\n  \\****************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupDispatchIncrementalRateCalculator; }\n/* harmony export */ });\n/* harmony import */ var _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WupDispatchRateType */ \"./src/worker/wup/dispatching/WupDispatchRateType.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Class is responsible for calculating the wup dispatch incremental rate.\n */\n\nvar WupDispatchIncrementalRateCalculator = /*#__PURE__*/function () {\n  function WupDispatchIncrementalRateCalculator(wupDispatchRateSettings, wupStatisticsService) {\n    _classCallCheck(this, WupDispatchIncrementalRateCalculator);\n    this._wupStatisticsService = wupStatisticsService;\n    this.updateSettings(wupDispatchRateSettings);\n  }\n\n  /**\n   * Get the next dispatch rate\n   * @returns {*}\n   */\n  return _createClass(WupDispatchIncrementalRateCalculator, [{\n    key: \"getRate\",\n    value: function getRate() {\n      if (this._wupStatisticsService.getSentWupsCount() < this._incrementStartWupSendCount) {\n        return this._currentRate;\n      }\n      var nextRate = this._currentRate + this._incrementStepMs;\n      if (nextRate <= this._incrementStopMs) {\n        this._currentRate = nextRate;\n      }\n      return this._currentRate;\n    }\n  }, {\n    key: \"updateSettings\",\n    value: function updateSettings(wupDispatchRateSettings) {\n      if (wupDispatchRateSettings.type !== _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__.WupDispatchRateType.incremental) {\n        throw new Error('Invalid settings provided to incremental calculator');\n      }\n      this._currentRate = wupDispatchRateSettings.initialRateValueMs;\n      this._incrementStepMs = wupDispatchRateSettings.incrementStepMs;\n      this._incrementStopMs = wupDispatchRateSettings.incrementStopMs;\n      this._incrementStartWupSendCount = wupDispatchRateSettings.incrementStartWupSendCount;\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/dispatching/WupDispatchRateCalculatorFactory.js\":\n/*!************************************************************************!*\\\n  !*** ./src/worker/wup/dispatching/WupDispatchRateCalculatorFactory.js ***!\n  \\************************************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ WupDispatchRateCalculatorFactory; }\n/* harmony export */ });\n/* harmony import */ var _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WupDispatchRateType */ \"./src/worker/wup/dispatching/WupDispatchRateType.js\");\n/* harmony import */ var _WupDispatchConstantRateCalculator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WupDispatchConstantRateCalculator */ \"./src/worker/wup/dispatching/WupDispatchConstantRateCalculator.js\");\n/* harmony import */ var _WupDispatchIncrementalRateCalculator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WupDispatchIncrementalRateCalculator */ \"./src/worker/wup/dispatching/WupDispatchIncrementalRateCalculator.js\");\n/* harmony import */ var _WupDispatchDynamicRateCalculator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WupDispatchDynamicRateCalculator */ \"./src/worker/wup/dispatching/WupDispatchDynamicRateCalculator.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Class is responsible for creating a wup dispatch calculator. It support 2 rate calculator types (incremental, constant)\n */\n\n\n\n\nvar WupDispatchRateCalculatorFactory = /*#__PURE__*/function () {\n  function WupDispatchRateCalculatorFactory(wupStatisticsService, wupServerSessionState) {\n    _classCallCheck(this, WupDispatchRateCalculatorFactory);\n    this._wupStatisticsService = wupStatisticsService;\n    this._wupServerSessionState = wupServerSessionState;\n  }\n  return _createClass(WupDispatchRateCalculatorFactory, [{\n    key: \"create\",\n    value: function create(settings) {\n      if (settings.type === _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__.WupDispatchRateType.constant) {\n        return new _WupDispatchConstantRateCalculator__WEBPACK_IMPORTED_MODULE_1__[\"default\"](settings);\n      }\n      if (settings.type === _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__.WupDispatchRateType.incremental) {\n        return new _WupDispatchIncrementalRateCalculator__WEBPACK_IMPORTED_MODULE_2__[\"default\"](settings, this._wupStatisticsService);\n      }\n      if (settings.type === _WupDispatchRateType__WEBPACK_IMPORTED_MODULE_0__.WupDispatchRateType.dynamic) {\n        return new _WupDispatchDynamicRateCalculator__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this._wupServerSessionState);\n      }\n      throw new Error(\"Unsupported dispatch rate type \".concat(settings.type));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/worker/wup/dispatching/WupDispatchRateType.js\":\n/*!***********************************************************!*\\\n  !*** ./src/worker/wup/dispatching/WupDispatchRateType.js ***!\n  \\***********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WupDispatchRateType: function() { return /* binding */ WupDispatchRateType; }\n/* harmony export */ });\nvar WupDispatchRateType = {\n  incremental: 'incremental',\n  constant: 'constant',\n  dynamic: 'dynamic'\n};\n\n/***/ }),\n\n/***/ \"./src/main/technicalServices/categories/ContextCategories.json\":\n/*!**********************************************************************!*\\\n  !*** ./src/main/technicalServices/categories/ContextCategories.json ***!\n  \\**********************************************************************/\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = /*#__PURE__*/JSON.parse('{\"login\":\"0001\",\"log in\":\"0001\",\"sign in\":\"0001\",\"username\":\"0001\",\"password\":\"0001\",\"email address\":\"0001\",\"forgot password\":\"0001\",\"remember me\":\"0001\",\"secure login\":\"0001\",\"payment\":\"0002\",\"pay now\":\"0002\",\"make payment\":\"0002\",\"due amount\":\"0002\",\"bill\":\"0002\",\"invoice\":\"0002\",\"payee\":\"0002\",\"credit card\":\"0002\",\"debit card\":\"0002\",\"confirm payment\":\"0002\",\"add payee\":\"0003\",\"new payee\":\"0003\",\"beneficiary name\":\"0003\",\"bank account number\":\"0003\",\"ifsc code\":\"0003\",\"sort code\":\"0003\",\"iban\":\"0003\",\"routing number\":\"0003\",\"save payee\":\"0003\",\"otp\":\"0004\",\"one-time password\":\"0004\",\"verification code\":\"0004\",\"enter code\":\"0004\",\"sms code\":\"0004\",\"email code\":\"0004\",\"auth code\":\"0004\",\"2fa\":\"0004\",\"enroll\":\"0005\",\"enrollment\":\"0005\",\"sign up\":\"0005\",\"register\":\"0005\",\"create account\":\"0005\",\"start enrollment\":\"0005\",\"onboarding\":\"0005\",\"set up account\":\"0005\",\"loan\":\"0006\",\"apply for loan\":\"0006\",\"loan application\":\"0006\",\"emi\":\"0006\",\"installment\":\"0006\",\"loan calculator\":\"0006\",\"loan details\":\"0006\",\"loan offer\":\"0006\",\"cardless\":\"0007\",\"withdraw cash\":\"0007\",\"atm code\":\"0007\",\"cash withdrawal\":\"0007\",\"without card\":\"0007\",\"generate code\":\"0007\",\"atm access code\":\"0007\",\"change phone\":\"0008\",\"update phone number\":\"0008\",\"new phone number\":\"0008\",\"verify phone\":\"0008\",\"mobile number change\":\"0008\",\"change password\":\"0009\",\"update password\":\"0009\",\"new password\":\"0009\",\"current password\":\"0009\",\"reset password\":\"0009\",\"confirm password\":\"0009\",\"edit profile\":\"0010\",\"update details\":\"0010\",\"change information\":\"0010\",\"modify details\":\"0010\",\"update personal info\":\"0010\",\"change user info\":\"0010\",\"change email\":\"0011\",\"update email\":\"0011\",\"new email address\":\"0011\",\"verify email\":\"0011\",\"email confirmation\":\"0011\",\"confirm email\":\"0011\",\"change address\":\"0012\",\"update address\":\"0012\",\"new address\":\"0012\",\"billing address\":\"0012\",\"shipping address\":\"0012\",\"address details\":\"0012\"}');\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/global */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.g = (function() {\n/******/ \t\t\tif (typeof globalThis === 'object') return globalThis;\n/******/ \t\t\ttry {\n/******/ \t\t\t\treturn this || new Function('return this')();\n/******/ \t\t\t} catch (e) {\n/******/ \t\t\t\tif (typeof window === 'object') return window;\n/******/ \t\t\t}\n/******/ \t\t})();\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t!function() {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = function(exports) {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.\n!function() {\n\"use strict\";\n/*!*********************************************************************************************************!*\\\n  !*** ./node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].oneOf[0].use!./src/worker/worker.js ***!\n  \\*********************************************************************************************************/\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application */ \"./src/worker/Application.js\");\n\nnew _Application__WEBPACK_IMPORTED_MODULE_0__[\"default\"]().start();\n}();\n/******/ })()\n;\n", "Worker", undefined, undefined);
}


/***/ }),

/***/ "./node_modules/worker-loader/dist/runtime/inline.js":
/*!***********************************************************!*\
  !*** ./node_modules/worker-loader/dist/runtime/inline.js ***!
  \***********************************************************/
/***/ (function(module) {

"use strict";


/* eslint-env browser */

/* eslint-disable no-undef, no-use-before-define, new-cap */
module.exports = function (content, workerConstructor, workerOptions, url) {
  var globalScope = self || window;

  try {
    try {
      var blob;

      try {
        // New API
        blob = new globalScope.Blob([content]);
      } catch (e) {
        // BlobBuilder = Deprecated, but widely implemented
        var BlobBuilder = globalScope.BlobBuilder || globalScope.WebKitBlobBuilder || globalScope.MozBlobBuilder || globalScope.MSBlobBuilder;
        blob = new BlobBuilder();
        blob.append(content);
        blob = blob.getBlob();
      }

      var URL = globalScope.URL || globalScope.webkitURL;
      var objectURL = URL.createObjectURL(blob);
      var worker = new globalScope[workerConstructor](objectURL, workerOptions);
      URL.revokeObjectURL(objectURL);
      return worker;
    } catch (e) {
      return new globalScope[workerConstructor]("data:application/javascript,".concat(encodeURIComponent(content)), workerOptions);
    }
  } catch (e) {
    if (!url) {
      throw Error("Inline worker is not supported");
    }

    return new globalScope[workerConstructor](url, workerOptions);
  }
};

/***/ }),

/***/ "./src/main/technicalServices/categories/ContextCategories.json":
/*!**********************************************************************!*\
  !*** ./src/main/technicalServices/categories/ContextCategories.json ***!
  \**********************************************************************/
/***/ (function(module) {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"login":"0001","log in":"0001","sign in":"0001","username":"0001","password":"0001","email address":"0001","forgot password":"0001","remember me":"0001","secure login":"0001","payment":"0002","pay now":"0002","make payment":"0002","due amount":"0002","bill":"0002","invoice":"0002","payee":"0002","credit card":"0002","debit card":"0002","confirm payment":"0002","add payee":"0003","new payee":"0003","beneficiary name":"0003","bank account number":"0003","ifsc code":"0003","sort code":"0003","iban":"0003","routing number":"0003","save payee":"0003","otp":"0004","one-time password":"0004","verification code":"0004","enter code":"0004","sms code":"0004","email code":"0004","auth code":"0004","2fa":"0004","enroll":"0005","enrollment":"0005","sign up":"0005","register":"0005","create account":"0005","start enrollment":"0005","onboarding":"0005","set up account":"0005","loan":"0006","apply for loan":"0006","loan application":"0006","emi":"0006","installment":"0006","loan calculator":"0006","loan details":"0006","loan offer":"0006","cardless":"0007","withdraw cash":"0007","atm code":"0007","cash withdrawal":"0007","without card":"0007","generate code":"0007","atm access code":"0007","change phone":"0008","update phone number":"0008","new phone number":"0008","verify phone":"0008","mobile number change":"0008","change password":"0009","update password":"0009","new password":"0009","current password":"0009","reset password":"0009","confirm password":"0009","edit profile":"0010","update details":"0010","change information":"0010","modify details":"0010","update personal info":"0010","change user info":"0010","change email":"0011","update email":"0011","new email address":"0011","verify email":"0011","email confirmation":"0011","confirm email":"0011","change address":"0012","update address":"0012","new address":"0012","billing address":"0012","shipping address":"0012","address details":"0012"}');

/***/ }),

/***/ "./src/main/technicalServices/categories/elementAttributes.json":
/*!**********************************************************************!*\
  !*** ./src/main/technicalServices/categories/elementAttributes.json ***!
  \**********************************************************************/
/***/ (function(module) {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"attributes":["class","name","id","type","label","placeholder","aria-label","data-label","aria-describedby","title","autocomplete","data-placeholder","data-hint","aria-placeholder","aria-labelledby","formcontrolname","role","data-type","data-field","data-name","inputmode","data-test-id","data-value","data-format"]}');

/***/ }),

/***/ "./src/main/technicalServices/categories/elementCategories.json":
/*!**********************************************************************!*\
  !*** ./src/main/technicalServices/categories/elementCategories.json ***!
  \**********************************************************************/
/***/ (function(module) {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"username":"0001","user name":"0001","user-name":"0001","user_id":"0001","userid":"0001","user-id":"0001","login name":"0001","loginname":"0001","login_id":"0001","loginid":"0001","login-user":"0001","login_user":"0001","account name":"0001","accountname":"0001","account_name":"0001","account id":"0006","accountid":"0006","account_id":"0001","uname":"0001","member id":"0120","password":"0002","pass word":"0002","pass-word":"0002","passwd":"0002","pwd":"0002","p/w":"0002","pword":"0002","pass_code":"0002","passcode":"0002","password_input":"0002","pass input":"0002","password field":"0002","passwordfield":"0002","user password":"0002","userpassword":"0002","account password":"0002","accountpassword":"0002","login password":"0002","loginpassword":"0002","secret password":"0002","otp":"0003","one time password":"0003","one-time password":"0003","onetime password":"0003","one time pin":"0003","one-time pin":"0003","otp code":"0003","otpcode":"0003","verification code":"0128","verify code":"0003","verificationcode":"0003","auth code":"0003","authcode":"0003","authentication code":"0003","2fa code":"0003","two factor code":"0003","two-factor code":"0003","2fa":"0003","security code":"0128","pin code":"0003","amount":"0004","payment amount":"0004","transfer amount":"0004","total amount":"0004","money":"0004","value":"0004","sum":"0004","price":"0004","fee":"0004","charge":"0004","cost":"0004","amount due":"0004","balance":"0004","payable amount":"0004","bill amount":"0004","transaction amount":"0004","withdrawal amount":"0004","deposit amount":"0004","loan amount":"0004","subtotal":"0004","new payee":"0005","add payee":"0005","payee name":"0005","payee":"0005","recipient name":"0005","recipient":"0005","beneficiary":"0005","beneficiary name":"0005","payee account":"0005","payee_account":"0005","recipient account":"0005","recipient_account":"0005","payee id":"0005","payeeid":"0005","beneficiary id":"0005","beneficiaryid":"0005","new recipient":"0005","add beneficiary":"0005","payee details":"0005","recipient details":"0005","account number":"0006","acc number":"0006","acct number":"0006","account no":"0006","account #":"0006","account#":"0006","accountnum":"0006","accountnum#":"0006","bank account":"0006","bankaccount":"0006","bank account number":"0006","bankaccountnumber":"0006","accountnumbr":"0006","acct no":"0006","acct#":"0006","acctno":"0006","account identifier":"0006","account code":"0006","change password":"0007","update password":"0007","reset password":"0007","new password":"0007","set password":"0007","create password":"0007","re-enter password":"0007","confirm password":"0007","modify password":"0007","password change":"0007","password reset":"0007","password update":"0007","change passcode":"0007","update passcode":"0007","reset passcode":"0007","change pwd":"0007","update pwd":"0007","reset pwd":"0007","change secret":"0007","update secret":"0007","change phone":"0008","update phone":"0008","new phone":"0008","phone update":"0008","change number":"0008","phone number change":"0008","update number":"0008","modify phone":"0008","modify number":"0008","phone change":"0008","phone edit":"0008","edit phone":"0008","replace phone":"0008","replace number":"0008","new phone number":"0008","add phone number":"0008","set phone number":"0008","set phone":"0008","phone update request":"0008","update mobile":"0008","change email":"0009","update email":"0009","new email":"0009","email update":"0009","change e-mail":"0009","e-mail update":"0009","email address change":"0009","update email address":"0009","change email address":"0009","modify email":"0009","modify e-mail":"0009","edit email":"0009","email change":"0009","replace email":"0009","new email address":"0009","set email":"0009","update mail":"0009","change mail":"0009","mail update":"0009","email modifications":"0009","change address":"0010","update address":"0010","new address":"0010","address update":"0010","edit address":"0010","modify address":"0010","replace address":"0010","address change":"0010","address edit":"0010","address modification":"0010","set address":"0010","update location":"0010","change location":"0010","new location":"0010","location update":"0010","shipping address change":"0010","billing address change":"0010","change street":"0010","update street":"0010","change home address":"0010","login":"0011","sign in":"0011","sign-in":"0011","signin":"0011","submit login":"0011","login button":"0011","log in":"0011","log-in":"0011","login submit":"0011","submit credentials":"0011","sign in button":"0011","sign in submit":"0011","connect":"0011","access account":"0011","enter":"0011","enter site":"0011","authenticate":"0011","proceed login":"0011","start session":"0011","begin session":"0011","first name":"0100","firstname":"0100","given name":"0100","your first name":"0100","first-name":"0100","forename":"0100","christian name":"0100","personal name":"0100","first":"0100","initial name":"0100","givenname":"0100","firstn":"0100","fname":"0100","first name field":"0100","customer first name":"0100","applicant first name":"0100","user first name":"0100","first name input":"0100","first name enter":"0100","first-name-entry":"0100","last name":"0101","lastname":"0101","surname":"0101","family name":"0101","last-name":"0101","l-name":"0101","lname":"0101","second name":"0102","lastn":"0101","last name field":"0101","customer last name":"0101","applicant last name":"0101","user last name":"0101","surname field":"0101","familyname":"0101","last name input":"0101","last name enter":"0101","surname input":"0101","surname enter":"0101","surname entry":"0101","middle name":"0102","middlename":"0102","middle-name":"0102","middle initial":"0102","middleinitial":"0102","m name":"0102","mname":"0102","middle":"0102","middle n.":"0102","middle name field":"0102","middle name input":"0102","middle name enter":"0102","middle name entry":"0102","mi":"0102","middle initial field":"0102","middleinitial field":"0102","middle initial input":"0102","middle initial entry":"0102","m.i.":"0102","email":"0103","email address":"0103","e-mail":"0103","mail address":"0103","your email":"0103","your e-mail":"0103","email id":"0103","emailid":"0103","email_id":"0103","mail id":"0103","mailid":"0103","mail_id":"0103","emailaddress":"0103","email addr":"0103","email field":"0103","email input":"0103","email enter":"0103","email entry":"0103","emailaccount":"0103","email account":"0103","ssn":"0104","social security number":"0104","social security #":"0104","ssn number":"0104","soc sec number":"0104","social-sec-number":"0104","social security no":"0104","ss no":"0104","ss#":"0104","ss number":"0104","socsec":"0104","social security id":"0104","social security identifier":"0104","social security code":"0104","ssnid":"0104","ssn id":"0104","ssn field":"0104","ssn input":"0104","ssn enter":"0104","ssn entry":"0104","phone number":"0105","phone":"0105","mobile number":"0105","mobile":"0105","telephone":"0105","cell number":"0105","cellphone":"0105","your phone":"0105","contact number":"0105","contact #":"0105","phone no":"0105","phone#":"0105","tel":"0105","tel number":"0105","telephone number":"0105","mobile phone":"0105","cell":"0105","cell phone":"0105","phone field":"0105","phone input":"0105","street address":"0106","address":"0106","home address":"0106","residential address":"0106","mailing address":"0106","your address":"0106","street":"0106","street address line":"0106","streetaddr":"0106","address line":"0106","street address field":"0106","street address input":"0106","address field":"0106","address input":"0106","address enter":"0106","address entry":"0106","house address":"0106","road address":"0106","streetname":"0106","street line":"0106","dob":"0107","date of birth":"0107","birth date":"0107","full dob":"0107","your birthdate":"0107","birthdate":"0107","birth date full":"0107","full date of birth":"0107","dob full":"0107","dob field":"0107","dob input":"0107","dob enter":"0107","birthdate field":"0107","birthday":"0107","birthday full":"0107","birthday date":"0107","date-of-birth":"0107","birth date input":"0107","birth date entry":"0107","dob complete":"0107","dob day":"0108","birth day":"0108","day of birth":"0108","birth day of month":"0108","day of month":"0108","dob-day":"0108","birth day field":"0108","birth day input":"0108","day field":"0108","day input":"0108","dob day field":"0108","birth day entry":"0108","day birth":"0108","day dob":"0108","birth-day":"0108","dayofbirth":"0108","day-of-birth":"0108","date day":"0108","day value":"0108","dob d":"0108","dob month":"0109","birth month":"0109","month of birth":"0109","month born":"0109","dob-month":"0109","birth month field":"0109","month field":"0109","month input":"0109","month entry":"0109","dob mth":"0109","dob m":"0109","month dob":"0109","birth-month":"0109","monthofbirth":"0109","month-of-birth":"0109","month value":"0109","month dob field":"0109","month dob input":"0109","birth mth":"0109","dob month value":"0109","dob year":"0110","birth year":"0110","year of birth":"0110","year born":"0110","dob-year":"0110","birth year field":"0110","year field":"0110","year input":"0110","year entry":"0110","dob yr":"0110","birth-year":"0110","yearofbirth":"0110","year-of-birth":"0110","yr of birth":"0110","dob y":"0110","birthyear":"0110","year value":"0110","dob year field":"0110","year dob":"0110","dob yyyy":"0110","annual income":"0111","income":"0111","yearly income":"0111","salary":"0111","earnings":"0111","yearly salary":"0111","annual salary":"0111","monthly income":"0111","income per year":"0111","yearly earnings":"0111","income yearly":"0111","total income":"0111","gross income":"0111","net income":"0111","income amount":"0111","income field":"0111","income input":"0111","salary amount":"0111","salary field":"0111","salary input":"0111","zip code":"0112","postal code":"0112","zipcode":"0112","zip":"0112","post code":"0112","zip-code":"0112","zip number":"0112","zip no":"0112","postal":"0112","postal no":"0112","postal number":"0112","postalcode":"0112","post code number":"0112","zip field":"0112","zip input":"0112","zip entry":"0112","postcode field":"0112","postal code field":"0112","zip_digit":"0112","zipcode field":"0112","city":"0113","town":"0113","city name":"0113","town name":"0113","your city":"0113","municipality":"0113","city/town":"0113","citytown":"0113","city or town":"0113","locality":"0113","village":"0113","hometown":"0113","city field":"0113","city input":"0113","city entry":"0113","city value":"0113","town field":"0113","town input":"0113","cityname":"0113","city location":"0113","state":"0114","province":"0114","territory":"0114","region":"0114","your state":"0114","state/region":"0114","state name":"0114","province name":"0114","province/state":"0114","county":"0114","state field":"0114","state input":"0114","state entry":"0114","region field":"0114","region input":"0114","regional":"0114","state value":"0114","state id":"0114","statecode":"0114","statecode field":"0114","country":"0115","nation":"0115","country name":"0115","your country":"0115","country/region":"0115","nationality":"0115","nation name":"0115","country field":"0115","country input":"0115","country entry":"0115","country code":"0115","countrycode":"0115","country id":"0115","country identifier":"0115","country of residence":"0115","residing country":"0115","country value":"0115","countryname":"0115","home country":"0115","birth country":"0115","address line 1":"0116","street line 1":"0116","address1":"0116","street address 1":"0116","address first line":"0116","addr line 1":"0116","address line1":"0116","streetline1":"0116","addressl1":"0116","street addr 1":"0116","line1 address":"0116","address primary":"0116","primary address":"0116","address_part1":"0116","address part 1":"0116","house number":"0116","house no":"0116","block":"0116","building number":"0116","building no":"0116","address line 2":"0117","street line 2":"0117","address2":"0117","street address 2":"0117","address second line":"0117","addr line 2":"0117","address line2":"0117","streetline2":"0117","addressl2":"0117","street addr 2":"0117","line2 address":"0117","secondary address":"0117","secondary addr":"0117","address_part2":"0117","address part 2":"0117","apartment":"0117","apt number":"0117","suite":"0117","unit":"0117","floor":"0117","submit application":"0118","application submit":"0118","apply button":"0118","submit form":"0118","send application":"0118","apply now":"0118","application button":"0118","submit app":"0118","apply":"0118","submit application button":"0118","application submit button":"0118","send form":"0118","submit request":"0118","send request":"0118","proceed":"0118","continue application":"0118","submit":"0118","continue":"0118","next":"0118","finish application":"0118","iban":"0119","international bank account number":"0119","iban number":"0119","iban no":"0119","bank iban":"0119","iban code":"0119","iban field":"0119","iban input":"0119","iban entry":"0119","iban#":"0119","account iban":"0119","account_iban":"0119","iban id":"0119","iban identifier":"0119","iban value":"0119","iban digits":"0119","iban account":"0119","iban acct":"0119","acct iban":"0119","iban code number":"0119","membership id":"0120","membership number":"0120","member number":"0120","membership no":"0120","member no":"0120","membership#":"0120","member#":"0120","membershipid":"0120","memberid":"0120","member identifier":"0120","membership identifier":"0120","membership code":"0120","membership code number":"0120","membership account":"0120","account membership":"0120","membership field":"0120","member field":"0120","membership input":"0120","member input":"0120","mother name":"0121","mother\'s name":"0121","mom name":"0121","mom\'s name":"0121","maternal name":"0121","mothername":"0121","momname":"0121","mother full name":"0121","mother fullname":"0121","mums name":"0121","mother field":"0121","mother input":"0121","mother entry":"0121","mom field":"0121","mom input":"0121","mother\'s full name":"0121","maternal fullname":"0121","mothername field":"0121","mother first name":"0121","mother last name":"0121","routing number":"0122","bank routing number":"0122","routing no":"0122","routing #":"0122","routing code":"0122","bank routing code":"0122","routingnum":"0122","routingnum#":"0122","routing number field":"0122","routing field":"0122","routing input":"0122","routing entry":"0122","aba number":"0122","aba routing":"0122","aba code":"0122","aba routing number":"0122","aba routing no":"0122","transit number":"0122","bank transit number":"0122","transit code":"0122","sort code":"0123","bank sort code":"0123","sortcode":"0123","sort-code":"0123","sort code number":"0123","bank sort code number":"0123","sort code field":"0123","sort code input":"0123","sort code entry":"0123","sort no":"0123","sort#":"0123","bank sort#":"0123","bank sort no":"0123","sort identifier":"0123","bank code":"0123","bank sort identifier":"0123","bank code number":"0123","bank sort":"0123","clearing code":"0123","sort digits":"0123","passport number":"0124","passport no":"0124","passport id":"0124","passport #":"0124","passportnum":"0124","passport#":"0124","passport identifier":"0124","passport code":"0124","passport field":"0124","passport input":"0124","passport entry":"0124","passport document number":"0124","passportdocument":"0124","passport doc no":"0124","passport doc#":"0124","passport serial":"0124","passport serial number":"0124","passport num field":"0124","travel document number":"0124","passport digits":"0124","driving licence number":"0125","driver\'s license number":"0125","driver licence number":"0125","dl number":"0125","drivers license":"0125","driving license":"0125","licence number":"0125","driver license no":"0125","driver license #":"0125","driverlicense":"0125","driving licence no":"0125","dl no":"0125","license number":"0125","driving licence id":"0125","driver id":"0125","driver\'s licence id":"0125","driving permit number":"0125","driving licence field":"0125","dl field":"0125","dl input":"0125","business name":"0126","company name":"0126","organization name":"0126","business":"0126","company":"0126","organization":"0126","enterprise name":"0126","enterprise":"0126","corporate name":"0126","corporate":"0126","businessname":"0126","companyname":"0126","company title":"0126","firm name":"0126","firm":"0126","business title":"0126","business field":"0126","company field":"0126","organization field":"0126","company input":"0126","card number":"0127","credit card number":"0127","debit card number":"0127","card no":"0127","card #":"0127","cardnum":"0127","card#":"0127","card digits":"0127","card id":"0127","card identifier":"0127","cc number":"0127","cc#":"0127","creditcard":"0127","debitcard":"0127","card number field":"0127","card input":"0127","card entry":"0127","payment card number":"0127","card account number":"0127","card acct number":"0127","cvv":"0128","cvc":"0128","card security code":"0128","card cvv":"0128","card cvc":"0128","cvv2":"0128","cvv code":"0128","cvc code":"0128","card code":"0128","card verification value":"0128","card verification code":"0128","card verification":"0128","security number":"0128","card security number":"0128","cvv field":"0128","cvv input":"0128","cvv entry":"0128","cvc2":"0128","card expiration":"0129","expiry date":"0129","expiration date":"0129","card expiry":"0129","expiration":"0129","exp date":"0129","exp":"0129","card exp":"0129","card expiration date":"0129","card expiry date":"0129","expiry":"0129","cardexp":"0129","card exp date":"0129","expdate":"0129","expiration field":"0129","expiry field":"0129","expiration input":"0129","expiry input":"0129","expiration entry":"0129","exp date field":"0129","employer name":"0130","company you work for":"0130","workplace":"0130","work name":"0130","employer":"0130","employername":"0130","company employer":"0130","work employer":"0130","organization employer":"0130","employer field":"0130","employer input":"0130","employer entry":"0130","job employer":"0130","employer company":"0130","employer organization":"0130","employer details":"0130","employer info":"0130","employer id":"0130","employer title":"0130","employer company name":"0130","security question 1":"0131","security q1":"0131","security question one":"0131","security question first":"0131","first security question":"0131","securityquestion1":"0131","securityquestionone":"0131","sec q1":"0131","sec question 1":"0131","sq1":"0131","security qn1":"0131","sec ques 1":"0131","security question field 1":"0131","security question input 1":"0131","security question 1 field":"0131","question 1":"0131","security quest 1":"0131","personal question 1":"0131","secret question 1":"0131","challenge question 1":"0131","security question 2":"0132","security q2":"0132","security question two":"0132","security question second":"0132","second security question":"0132","securityquestion2":"0132","securityquestiontwo":"0132","sec q2":"0132","sec question 2":"0132","sq2":"0132","security qn2":"0132","sec ques 2":"0132","security question field 2":"0132","security question input 2":"0132","security question 2 field":"0132","question 2":"0132","security quest 2":"0132","personal question 2":"0132","secret question 2":"0132","challenge question 2":"0132"}');

/***/ }),

/***/ "./src/main/technicalServices/categories/elementSelectors.json":
/*!*********************************************************************!*\
  !*** ./src/main/technicalServices/categories/elementSelectors.json ***!
  \*********************************************************************/
/***/ (function(module) {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"selectors":["input","textarea","select","button"]}');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/amd options */
/******/ 	!function() {
/******/ 		__webpack_require__.amdO = {};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
!function() {
"use strict";
/*!*********************************!*\
  !*** ./src/main/system/main.js ***!
  \*********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BioCatchClient: function() { return /* reexport safe */ _BioCatchClient__WEBPACK_IMPORTED_MODULE_0__.BioCatchClient; },
/* harmony export */   initializeBioCatchClient: function() { return /* binding */ initializeBioCatchClient; }
/* harmony export */ });
/* harmony import */ var _BioCatchClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BioCatchClient */ "./src/main/BioCatchClient.js");
/* harmony import */ var _core_DynamicCdApiLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/DynamicCdApiLoader */ "./src/main/core/DynamicCdApiLoader.js");
/* harmony import */ var _core_ConfigMapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ConfigMapper */ "./src/main/core/ConfigMapper.js");
/* harmony import */ var _core_ServerUrlResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/ServerUrlResolver */ "./src/main/core/ServerUrlResolver.js");
/* harmony import */ var _Client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Client */ "./src/main/Client.js");






function initializeBioCatchClient() {
  // BioCatchClient constructor will auto-start the sdk if external cdApi is provided.
  // Otherwise - will attach a 'bcTracker' member object from type BioCatchClient to the window which can be used for "manual-start".
  return new _BioCatchClient__WEBPACK_IMPORTED_MODULE_0__.BioCatchClient(new _Client__WEBPACK_IMPORTED_MODULE_4__["default"](), new _core_DynamicCdApiLoader__WEBPACK_IMPORTED_MODULE_1__.DynamicCdApiLoader(), new _core_ConfigMapper__WEBPACK_IMPORTED_MODULE_2__.ConfigMapper(), new _core_ServerUrlResolver__WEBPACK_IMPORTED_MODULE_3__.ServerUrlResolver());
}
initializeBioCatchClient();
}();
cdwpb = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=slothdev-version.0.7e8daa94e.js.map